(()=>{var t,e,i,n,o={5045:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var n,o=i(9179),r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const s=function(t){function e(e){var i=this,n="Assertion failed. See https://openlayers.org/en/"+("latest"===o.q4?o.q4:"v"+o.q4.split("-")[0])+"/doc/errors/#"+e+" for details.";return(i=t.call(this,n)||this).code=e,i.name="AssertionError",i.message=n,i}return r(e,t),e}(Error)},8426:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var n,o=i(5045),r=i(8493),s=i(9629),a=i(9520),l=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),h="length",u=function(t){function e(e,i,n){var o=t.call(this,e)||this;return o.element=i,o.index=n,o}return l(e,t),e}(a.ZP);const c=function(t){function e(e,i){var n=t.call(this)||this,o=i||{};if(n.unique_=!!o.unique,n.array_=e||[],n.unique_)for(var r=0,s=n.array_.length;r<s;++r)n.assertUnique_(n.array_[r],r);return n.updateLength_(),n}return l(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(h)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new u(s.Z.ADD,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new u(s.Z.REMOVE,e,t)),e},e.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new u(s.Z.REMOVE,n,t)),this.dispatchEvent(new u(s.Z.ADD,e,t))}else{for(var o=i;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(h,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new o.Z(58)},e}(r.ZP)},9629:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={ADD:"add",REMOVE:"remove"}},967:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}()},1256:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},6:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(3381);const o={SINGLECLICK:"singleclick",CLICK:n.Z.CLICK,DBLCLICK:n.Z.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},188:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}},8493:(t,e,i)=>{"use strict";i.d(e,{v_:()=>f,ZP:()=>d});var n,o=i(9520),r=i(3910),s=i(6834),a=i(3580),l=i(9179),h=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),u=function(t){function e(e,i,n){var o=t.call(this,e)||this;return o.key=i,o.oldValue=n,o}return h(e,t),e}(o.ZP),c=function(t){function e(e){var i=t.call(this)||this;return(0,l.sq)(i),i.values_=null,void 0!==e&&i.setProperties(e),i}return h(e,t),e.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&(0,a.f0)({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,e){var i;i=f(t),this.dispatchEvent(new u(i,t,e)),i=r.Z.PROPERTYCHANGE,this.dispatchEvent(new u(i,t,e))},e.prototype.set=function(t,e,i){var n=this.values_||(this.values_={});if(i)n[t]=e;else{var o=n[t];n[t]=e,o!==e&&this.notify(t,o)}},e.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},e.prototype.applyProperties=function(t){t.values_&&(0,a.f0)(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var i=this.values_[t];delete this.values_[t],(0,a.xb)(this.values_)&&(this.values_=null),e||this.notify(t,i)}},e}(s.Z),p={};function f(t){return p.hasOwnProperty(t)?p[t]:p[t]="change:"+t}const d=c},3910:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={PROPERTYCHANGE:"propertychange"}},6834:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n,o=i(6575),r=i(3381),s=i(3002),a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const l=function(t){function e(){var e=t.call(this)||this;return e.revision_=0,e}return a(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(r.Z.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),o=0;o<i;++o)n[o]=(0,s.oL)(this,t[o],e);return n}return(0,s.oL)(this,t,e)},e.prototype.once=function(t,e){var i;if(Array.isArray(t)){var n=t.length;i=new Array(n);for(var o=0;o<n;++o)i[o]=(0,s.Vx)(this,t[o],e)}else i=(0,s.Vx)(this,t,e);return e.ol_key=i,i},e.prototype.un=function(t,e){var i=e.ol_key;if(i)!function(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)(0,s.bN)(t[e]);else(0,s.bN)(t)}(i);else if(Array.isArray(t))for(var n=0,o=t.length;n<o;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)},e}(o.Z)},9682:(t,e,i)=>{"use strict";function n(t,e){return t>e?1:t<e?-1:0}function o(t,e){return t.indexOf(e)>=0}function r(t,e,i){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var o=void 0;if(i>0){for(o=1;o<n;++o)if(t[o]<e)return o-1}else if(i<0){for(o=1;o<n;++o)if(t[o]<=e)return o}else for(o=1;o<n;++o){if(t[o]==e)return o;if(t[o]<e)return t[o-1]-e<e-t[o]?o-1:o}return n-1}function s(t,e,i){for(;e<i;){var n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function a(t,e){for(var i=Array.isArray(e)?e:[e],n=i.length,o=0;o<n;o++)t[t.length]=i[o]}function l(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function h(t,e,i){var o=e||n;return t.every((function(e,n){if(0===n)return!0;var r=o(t[n-1],e);return!(r>0||i&&0===r)}))}i.d(e,{kK:()=>n,q9:()=>o,h7:()=>r,FZ:()=>s,l7:()=>a,fS:()=>l,pT:()=>h})},8906:(t,e,i)=>{"use strict";i.d(e,{h:()=>o});var n=i(5045);function o(t,e){if(!t)throw new n.Z(e)}},8913:(t,e,i)=>{"use strict";i.d(e,{XC:()=>a,_2:()=>c,BB:()=>f});var n=i(8906),o=i(1882),r=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,s=/^([a-z]*)$|^hsla?\(.*\)$/i;function a(t){return"string"==typeof t?t:f(t)}var l,h,u=(l={},h=0,function(t){var e;if(l.hasOwnProperty(t))e=l[t];else{if(h>=1024){var i=0;for(var o in l)0==(3&i++)&&(delete l[o],--h)}e=function(t){var e,i,o,a,l;if(s.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i}return""}(t)),r.exec(t)){var h,u=t.length-1;h=u<=4?1:2;var c=4===u||8===u;e=parseInt(t.substr(1+0*h,h),16),i=parseInt(t.substr(1+1*h,h),16),o=parseInt(t.substr(1+2*h,h),16),a=c?parseInt(t.substr(1+3*h,h),16):255,1==h&&(e=(e<<4)+e,i=(i<<4)+i,o=(o<<4)+o,c&&(a=(a<<4)+a)),l=[e,i,o,a/255]}else 0==t.indexOf("rgba(")?p(l=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((l=t.slice(4,-1).split(",").map(Number)).push(1),p(l)):(0,n.h)(!1,14);return l}(t),l[t]=e,++h}return e});function c(t){return Array.isArray(t)?t:u(t)}function p(t){return t[0]=(0,o.uZ)(t[0]+.5|0,0,255),t[1]=(0,o.uZ)(t[1]+.5|0,0,255),t[2]=(0,o.uZ)(t[2]+.5|0,0,255),t[3]=(0,o.uZ)(t[3],0,1),t}function f(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:t[3])+")"}},5120:(t,e,i)=>{"use strict";i.d(e,{y:()=>o});var n=i(8913);function o(t){return Array.isArray(t)?(0,n.BB)(t):t}},7644:(t,e,i)=>{"use strict";i.d(e,{oj:()=>n,$A:()=>o,XV:()=>r,hg:()=>s,hN:()=>a,p:()=>u});var n="ol-hidden",o="ol-selectable",r="ol-unselectable",s="ol-control",a="ol-collapsed",l=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),h=["style","variant","weight","size","lineHeight","family"],u=function(t){var e=t.match(l);if(!e)return null;for(var i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,o=h.length;n<o;++n){var r=e[n+1];void 0!==r&&(i[h[n]]=r)}return i.families=i.family.split(/,\s?/),i}},5386:(t,e,i)=>{"use strict";i.d(e,{E4:()=>o,iO:()=>r,Pb:()=>s,$H:()=>a,ZF:()=>l,ep:()=>h,hF:()=>u});var n=i(1358);function o(t,e,i){var o=i&&i.length?i.shift():n.Id?new OffscreenCanvas(t||300,e||300):document.createElement("canvas");return t&&(o.width=t),e&&(o.height=e),o.getContext("2d")}function r(t){var e=t.offsetWidth,i=getComputedStyle(t);return e+(parseInt(i.marginLeft,10)+parseInt(i.marginRight,10))}function s(t){var e=t.offsetHeight,i=getComputedStyle(t);return e+(parseInt(i.marginTop,10)+parseInt(i.marginBottom,10))}function a(t,e){var i=e.parentNode;i&&i.replaceChild(t,e)}function l(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function h(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function u(t,e){for(var i=t.childNodes,n=0;;++n){var o=i[n],r=e[n];if(!o&&!r)break;o!==r&&(o?r?t.insertBefore(r,o):(t.removeChild(o),--n):t.appendChild(r))}}},6320:(t,e,i)=>{"use strict";function n(t){return Math.pow(t,3)}function o(t){return 1-n(1-t)}function r(t){return 3*t*t-2*t*t*t}function s(t){return t}i.d(e,{YQ:()=>n,Vv:()=>o,rd:()=>r,GE:()=>s})},3002:(t,e,i)=>{"use strict";i.d(e,{oL:()=>o,Vx:()=>r,bN:()=>s});var n=i(3580);function o(t,e,i,n,o){if(n&&n!==t&&(i=i.bind(n)),o){var r=i;i=function(){t.removeEventListener(e,i),r.apply(this,arguments)}}var s={target:t,type:e,listener:i};return t.addEventListener(e,i),s}function r(t,e,i,n){return o(t,e,i,n,!0)}function s(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),(0,n.ZH)(t))}},9520:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>n});const n=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}()},3381:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},6575:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n,o=i(967),r=i(9520),s=i(4011),a=i(3580),l=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const h=function(t){function e(e){var i=t.call(this)||this;return i.eventTarget_=e,i.pendingRemovals_=null,i.dispatching_=null,i.listeners_=null,i}return l(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var i=this.listeners_||(this.listeners_={}),n=i[t]||(i[t]=[]);-1===n.indexOf(e)&&n.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new r.ZP(t):t,i=e.type;e.target||(e.target=this.eventTarget_||this);var n,o=this.listeners_&&this.listeners_[i];if(o){var a=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});i in a||(a[i]=0,l[i]=0),++a[i];for(var h=0,u=o.length;h<u;++h)if(!1===(n="handleEvent"in o[h]?o[h].handleEvent(e):o[h].call(this,e))||e.propagationStopped){n=!1;break}if(--a[i],0===a[i]){var c=l[i];for(delete l[i];c--;)this.removeEventListener(i,s.Zn);delete a[i]}return n}},e.prototype.disposeInternal=function(){this.listeners_&&(0,a.ZH)(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},e.prototype.removeEventListener=function(t,e){var i=this.listeners_&&this.listeners_[t];if(i){var n=i.indexOf(e);-1!==n&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[n]=s.Zn,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}},e}(o.Z)},6403:(t,e,i)=>{"use strict";i.d(e,{$6:()=>a,aj:()=>l,yZ:()=>h,Bx:()=>u,V4:()=>c,v8:()=>p,Fi:()=>f,Kf:()=>d,rM:()=>_,vY:()=>g,TN:()=>y,QL:()=>v,Xp:()=>m});var n=i(6),o=i(4011),r=i(1358),s=i(8906);function a(t){var e=arguments;return function(t){for(var i=!0,n=0,o=e.length;n<o&&(i=i&&e[n](t));++n);return i}}var l=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},h=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){return t.target.getTargetElement().contains(document.activeElement)}(t)},u=o.uX,c=function(t){return t.type==n.Z.CLICK},p=function(t){var e=t.originalEvent;return 0==e.button&&!(r.G$&&r.tK&&e.ctrlKey)},f=o.Dv,d=function(t){return t.type==n.Z.SINGLECLICK},_=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},g=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},y=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},v=function(t){var e=t.originalEvent;return(0,s.h)(void 0!==e,56),"mouse"==e.pointerType},m=function(t){var e=t.originalEvent;return(0,s.h)(void 0!==e,56),e.isPrimary&&0===e.button}},1915:(t,e,i)=>{"use strict";i.d(e,{hI:()=>s,f3:()=>a,d9:()=>l,qf:()=>h,b8:()=>u,r4:()=>c,jE:()=>p,pX:()=>f,lJ:()=>d,T9:()=>_,YN:()=>g,HK:()=>y,ZT:()=>v,GN:()=>m,fS:()=>x,l7:()=>E,Wj:()=>C,qP:()=>S,H6:()=>w,bg:()=>T,hC:()=>b,w$:()=>I,qg:()=>P,g0:()=>R,p8:()=>L,Cr:()=>M,Ed:()=>A,rL:()=>F,Xv:()=>Z,dz:()=>D,kK:()=>k,xb:()=>j,EO:()=>N,H9:()=>G,I7:()=>z,Ne:()=>W,Cf:()=>Y});var n=i(1748),o=i(4178),r=i(8906);function s(t){for(var e=[1/0,1/0,-1/0,-1/0],i=0,n=t.length;i<n;++i)C(e,t[i]);return e}function a(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function l(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function h(t,e,i){var n,o;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(o=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*o}function u(t,e){return p(t,e[0],e[1])}function c(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function p(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function f(t,e){var i=t[0],n=t[1],r=t[2],s=t[3],a=e[0],l=e[1],h=o.Z.UNKNOWN;return a<i?h|=o.Z.LEFT:a>r&&(h|=o.Z.RIGHT),l<n?h|=o.Z.BELOW:l>s&&(h|=o.Z.ABOVE),h===o.Z.UNKNOWN&&(h=o.Z.INTERSECTING),h}function d(){return[1/0,1/0,-1/0,-1/0]}function _(t,e,i,n,o){return o?(o[0]=t,o[1]=e,o[2]=i,o[3]=n,o):[t,e,i,n]}function g(t){return _(1/0,1/0,-1/0,-1/0,t)}function y(t,e){var i=t[0],n=t[1];return _(i,n,i,n,e)}function v(t,e){return function(t,e){for(var i=0,n=e.length;i<n;++i)C(t,e[i]);return t}(g(e),t)}function m(t,e,i,n,o){return S(g(o),t,e,i,n)}function x(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function E(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function C(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function S(t,e,i,n,o){for(;i<n;i+=o)O(t,e[i],e[i+1]);return t}function O(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function w(t,e){var i;return(i=e(b(t)))||(i=e(I(t)))||(i=e(Z(t)))?i:(i=e(F(t)))||!1}function T(t){var e=0;return j(t)||(e=D(t)*M(t)),e}function b(t){return[t[0],t[1]]}function I(t){return[t[2],t[1]]}function P(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function R(t,e){var i;return e===n.Z.BOTTOM_LEFT?i=b(t):e===n.Z.BOTTOM_RIGHT?i=I(t):e===n.Z.TOP_LEFT?i=F(t):e===n.Z.TOP_RIGHT?i=Z(t):(0,r.h)(!1,13),i}function L(t,e,i,n,o){var r=e*n[0]/2,s=e*n[1]/2,a=Math.cos(i),l=Math.sin(i),h=r*a,u=r*l,c=s*a,p=s*l,f=t[0],d=t[1],g=f-h+p,y=f-h-p,v=f+h-p,m=f+h+p,x=d-u-c,E=d-u+c,C=d+u+c,S=d+u-c;return _(Math.min(g,y,v,m),Math.min(x,E,C,S),Math.max(g,y,v,m),Math.max(x,E,C,S),o)}function M(t){return t[3]-t[1]}function A(t,e,i){var n=i||[1/0,1/0,-1/0,-1/0];return k(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):g(n),n}function F(t){return[t[0],t[3]]}function Z(t){return[t[2],t[3]]}function D(t){return t[2]-t[0]}function k(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function j(t){return t[2]<t[0]||t[3]<t[1]}function N(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function G(t,e){var i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=n,t[3]+=n}function z(t,e,i){var n=!1,r=f(t,e),s=f(t,i);if(r===o.Z.INTERSECTING||s===o.Z.INTERSECTING)n=!0;else{var a=t[0],l=t[1],h=t[2],u=t[3],c=e[0],p=e[1],d=i[0],_=i[1],g=(_-p)/(d-c),y=void 0,v=void 0;s&o.Z.ABOVE&&!(r&o.Z.ABOVE)&&(n=(y=d-(_-u)/g)>=a&&y<=h),n||!(s&o.Z.RIGHT)||r&o.Z.RIGHT||(n=(v=_-(d-h)*g)>=l&&v<=u),n||!(s&o.Z.BELOW)||r&o.Z.BELOW||(n=(y=d-(_-l)/g)>=a&&y<=h),n||!(s&o.Z.LEFT)||r&o.Z.LEFT||(n=(v=_-(d-a)*g)>=l&&v<=u)}return n}function W(t,e,i,n){var o=[];if(n>1)for(var r=t[2]-t[0],s=t[3]-t[1],a=0;a<n;++a)o.push(t[0]+r*a/n,t[1],t[2],t[1]+s*a/n,t[2]-r*a/n,t[3],t[0],t[3]-s*a/n);else o=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(o,o,2);for(var l=[],h=[],u=(a=0,o.length);a<u;a+=2)l.push(o[a]),h.push(o[a+1]);return function(t,e,i){return _(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}(l,h,i)}function Y(t,e){var i=e.getExtent(),n=P(t);if(e.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){var o=D(i),r=Math.floor((n[0]-i[0])/o)*o;t[0]-=r,t[2]-=r}return t}},1748:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},4178:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},4011:(t,e,i)=>{"use strict";i.d(e,{uX:()=>o,Dv:()=>r,Zn:()=>s,qe:()=>a});var n=i(9682);function o(){return!0}function r(){return!1}function s(){}function a(t){var e,i,o,r=!1;return function(){var s=Array.prototype.slice.call(arguments);return r&&this===o&&(0,n.fS)(s,i)||(r=!0,o=this,i=s,e=t.apply(this,arguments)),e}}},3696:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},8795:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},2043:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n,o=i(8795),r=i(4759),s=i(1915),a=i(8667),l=i(1882),h=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const u=function(t){function e(e,i){var n=t.call(this)||this;return n.setCoordinates(e,i),n}return h(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){var o=this.flatCoordinates,r=(0,l.bI)(t,e,o[0],o[1]);if(r<n){for(var s=this.stride,a=0;a<s;++a)i[a]=o[a];return i.length=s,r}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return(0,s.HK)(this.flatCoordinates,t)},e.prototype.getType=function(){return o.Z.POINT},e.prototype.intersectsExtent=function(t){return(0,s.jE)(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,a.IG)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(r.ZP)},4759:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>m,Kr:()=>v});var n,o=i(8493),r=i(868),s=i(9179),a=i(2359),l=i(1915),h=i(1964),u=i(4011),c=i(7882),p=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),f=(0,a.Ue)();const d=function(t){function e(){var e=t.call(this)||this;return e.extent_=(0,l.lJ)(),e.extentRevision_=-1,e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e.simplifyTransformedInternal=(0,u.qe)((function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)})),e}return p(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return(0,s.O3)()},e.prototype.closestPointXY=function(t,e,i,n){return(0,s.O3)()},e.prototype.containsXY=function(t,e){var i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e},e.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return(0,s.O3)()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&(0,l.YN)(e),this.extentRevision_=this.getRevision()}return(0,l.EO)(this.extent_,t)},e.prototype.rotate=function(t,e){(0,s.O3)()},e.prototype.scale=function(t,e,i){(0,s.O3)()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return(0,s.O3)()},e.prototype.getType=function(){return(0,s.O3)()},e.prototype.applyTransform=function(t){(0,s.O3)()},e.prototype.intersectsExtent=function(t){return(0,s.O3)()},e.prototype.translate=function(t,e){(0,s.O3)()},e.prototype.transform=function(t,e){var i=(0,h.U2)(t),n=i.getUnits()==r.Z.TILE_PIXELS?function(t,n,o){var r=i.getExtent(),s=i.getWorldExtent(),u=(0,l.Cr)(s)/(0,l.Cr)(r);return(0,a.qC)(f,s[0],s[3],u,-u,0,0,0),(0,c.vT)(t,0,t.length,o,f,n),(0,h.Ck)(i,e)(t,n,o)}:(0,h.Ck)(i,e);return this.applyTransform(n),this},e}(o.ZP);var _=i(3696),g=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function y(t){var e;return t==_.Z.XY?e=2:t==_.Z.XYZ||t==_.Z.XYM?e=3:t==_.Z.XYZM&&(e=4),e}function v(t,e,i){var n=t.getFlatCoordinates();if(n){var o=t.getStride();return(0,c.vT)(n,0,n.length,o,e,i)}return null}const m=function(t){function e(){var e=t.call(this)||this;return e.layout=_.Z.XY,e.stride=2,e.flatCoordinates=null,e}return g(e,t),e.prototype.computeExtent=function(t){return(0,l.GN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return(0,s.O3)()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=y(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){(0,s.O3)()},e.prototype.setLayout=function(t,e,i){var n;if(t)n=y(t);else{for(var o=0;o<i;++o){if(0===e.length)return this.layout=_.Z.XY,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=_.Z.XY:3==t?e=_.Z.XYZ:4==t&&(e=_.Z.XYZM),e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();(0,c.U1)(i,0,i.length,n,t,e,i),this.changed()}},e.prototype.scale=function(t,e,i){var n=e;void 0===n&&(n=t);var o=i;o||(o=(0,l.qg)(this.getExtent()));var r=this.getFlatCoordinates();if(r){var s=this.getStride();(0,c.bA)(r,0,r.length,s,t,n,o,r),this.changed()}},e.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();(0,c.Iu)(i,0,i.length,n,t,e,i),this.changed()}},e}(d)},8667:(t,e,i)=>{"use strict";function n(t,e,i,n){for(var o=0,r=i.length;o<r;++o)t[e++]=i[o];return e}function o(t,e,i,n){for(var o=0,r=i.length;o<r;++o)for(var s=i[o],a=0;a<n;++a)t[e++]=s[a];return e}function r(t,e,i,n,r){for(var s=r||[],a=0,l=0,h=i.length;l<h;++l){var u=o(t,e,i[l],n);s[a++]=u,e=u}return s.length=a,s}i.d(e,{IG:()=>n,Sg:()=>o,_5:()=>r})},7882:(t,e,i)=>{"use strict";function n(t,e,i,n,o,r){for(var s=r||[],a=0,l=e;l<i;l+=n){var h=t[l],u=t[l+1];s[a++]=o[0]*h+o[2]*u+o[4],s[a++]=o[1]*h+o[3]*u+o[5]}return r&&s.length!=a&&(s.length=a),s}function o(t,e,i,n,o,r,s){for(var a=s||[],l=Math.cos(o),h=Math.sin(o),u=r[0],c=r[1],p=0,f=e;f<i;f+=n){var d=t[f]-u,_=t[f+1]-c;a[p++]=u+d*l-_*h,a[p++]=c+d*h+_*l;for(var g=f+2;g<f+n;++g)a[p++]=t[g]}return s&&a.length!=p&&(a.length=p),a}function r(t,e,i,n,o,r,s,a){for(var l=a||[],h=s[0],u=s[1],c=0,p=e;p<i;p+=n){var f=t[p]-h,d=t[p+1]-u;l[c++]=h+o*f,l[c++]=u+r*d;for(var _=p+2;_<p+n;++_)l[c++]=t[_]}return a&&l.length!=c&&(l.length=c),l}function s(t,e,i,n,o,r,s){for(var a=s||[],l=0,h=e;h<i;h+=n){a[l++]=t[h]+o,a[l++]=t[h+1]+r;for(var u=h+2;u<h+n;++u)a[l++]=t[u]}return s&&a.length!=l&&(a.length=l),a}i.d(e,{vT:()=>n,U1:()=>o,bA:()=>r,Iu:()=>s})},1358:(t,e,i)=>{"use strict";i.d(e,{V:()=>o,G$:()=>r,tK:()=>s,MP:()=>a,Id:()=>l,Tp:()=>h,bM:()=>u});var n="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",o=-1!==n.indexOf("firefox"),r=(-1!==n.indexOf("safari")&&n.indexOf("chrom"),-1!==n.indexOf("webkit")&&-1==n.indexOf("edge")),s=-1!==n.indexOf("macintosh"),a="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,l="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,h="undefined"!=typeof Image&&Image.prototype.decode,u=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}()},7588:(t,e,i)=>{"use strict";i.d(e,{Cv:()=>l,FW:()=>h,ZP:()=>u});var n,o=i(8493),r=i(3604),s=i(6320),a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function l(t,e,i){var n=t.getCenterInternal();if(n){var o=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==i?i:250,easing:s.GE,center:t.getConstrainedCenter(o)})}}function h(t,e,i,n){var o=t.getZoom();if(void 0!==o){var r=t.getConstrainedZoom(o+e),a=t.getResolutionForZoom(r);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:i,duration:void 0!==n?n:250,easing:s.Vv})}}const u=function(t){function e(e){var i=t.call(this)||this;return e&&e.handleEvent&&(i.handleEvent=e.handleEvent),i.map_=null,i.setActive(!0),i}return a(e,t),e.prototype.getActive=function(){return this.get(r.Z.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(r.Z.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(o.ZP)},8024:(t,e,i)=>{"use strict";i.d(e,{S:()=>l,Z:()=>h});var n,o=i(7588),r=i(6),s=i(3580),a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function l(t){for(var e=t.length,i=0,n=0,o=0;o<e;o++)i+=t[o].clientX,n+=t[o].clientY;return[i/e,n/e]}const h=function(t){function e(e){var i=this,n=e||{};return i=t.call(this,n)||this,n.handleDownEvent&&(i.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(i.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(i.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(i.handleUpEvent=n.handleUpEvent),n.stopDown&&(i.stopDown=n.stopDown),i.handlingDownUpSequence=!1,i.trackedPointers_={},i.targetPointers=[],i}return a(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==r.Z.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==r.Z.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==r.Z.POINTERDOWN){var n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==r.Z.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===r.Z.POINTERDOWN||e===r.Z.POINTERDRAG||e===r.Z.POINTERUP}(t)){var e=t.originalEvent,i=e.pointerId.toString();t.type==r.Z.POINTERUP?delete this.trackedPointers_[i]:(t.type==r.Z.POINTERDOWN||i in this.trackedPointers_)&&(this.trackedPointers_[i]=e),this.targetPointers=(0,s.KX)(this.trackedPointers_)}},e}(o.ZP)},3604:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={ACTIVE:"active"}},1273:(t,e,i)=>{"use strict";i.d(e,{t:()=>g,Z:()=>v});var n,o=i(8426),r=i(9629),s=i(9520),a=i(8795),l=i(7588),h=i(4011),u=i(3580),c=i(1219),p=i(9682),f=i(9179),d=i(6403),_=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),g=function(t){function e(e,i,n,o){var r=t.call(this,e)||this;return r.selected=i,r.deselected=n,r.mapBrowserEvent=o,r}return _(e,t),e}(s.ZP),y={};const v=function(t){function e(e){var i,n,r=t.call(this)||this,s=e||{};if(r.boundAddFeature_=r.addFeature_.bind(r),r.boundRemoveFeature_=r.removeFeature_.bind(r),r.condition_=s.condition?s.condition:d.Kf,r.addCondition_=s.addCondition?s.addCondition:d.Fi,r.removeCondition_=s.removeCondition?s.removeCondition:d.Fi,r.toggleCondition_=s.toggleCondition?s.toggleCondition:d.vY,r.multi_=!!s.multi&&s.multi,r.filter_=s.filter?s.filter:h.uX,r.hitTolerance_=s.hitTolerance?s.hitTolerance:0,r.style_=void 0!==s.style?s.style:(i=(0,c.Ly)(),(0,p.l7)(i[a.Z.POLYGON],i[a.Z.LINE_STRING]),(0,p.l7)(i[a.Z.GEOMETRY_COLLECTION],i[a.Z.LINE_STRING]),function(t){return t.getGeometry()?i[t.getGeometry().getType()]:null}),r.features_=s.features||new o.Z,s.layers)if("function"==typeof s.layers)n=s.layers;else{var l=s.layers;n=function(t){return(0,p.q9)(l,t)}}else n=h.uX;return r.layerFilter_=n,r.featureLayerAssociation_={},r}return _(e,t),e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[(0,f.sq)(t)]=e},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[(0,f.sq)(t)]},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),t.prototype.setMap.call(this,e),e?(this.features_.addEventListener(r.Z.ADD,this.boundAddFeature_),this.features_.addEventListener(r.Z.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(r.Z.ADD,this.boundAddFeature_),this.features_.removeEventListener(r.Z.REMOVE,this.boundRemoveFeature_))},e.prototype.addFeature_=function(t){var e=t.element;this.style_&&this.applySelectedStyle_(e)},e.prototype.removeFeature_=function(t){var e=t.element;this.style_&&this.restorePreviousStyle_(e)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(t){var e=(0,f.sq)(t);e in y||(y[e]=t.getStyle()),t.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(t){for(var i=this.getMap().getInteractions().getArray(),n=i.length-1;n>=0;--n){var o=i[n];if(o!==this&&o instanceof e&&o.getStyle()&&-1!==o.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(o.getStyle())}var r=(0,f.sq)(t);t.setStyle(y[r]),delete y[r]},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[(0,f.sq)(t)]},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),i=this.removeCondition_(t),n=this.toggleCondition_(t),o=!e&&!i&&!n,r=t.map,s=this.getFeatures(),a=[],l=[];if(o){(0,u.ZH)(this.featureLayerAssociation_),r.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return l.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var h=s.getLength()-1;h>=0;--h){var c=s.item(h),f=l.indexOf(c);f>-1?l.splice(f,1):(s.remove(c),a.push(c))}0!==l.length&&s.extend(l)}else{r.forEachFeatureAtPixel(t.pixel,function(t,o){if(this.filter_(t,o))return!e&&!n||(0,p.q9)(s.getArray(),t)?(i||n)&&(0,p.q9)(s.getArray(),t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)):(l.push(t),this.addFeatureLayerAssociation_(t,o)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var d=a.length-1;d>=0;--d)s.remove(a[d]);s.extend(l)}return(l.length>0||a.length>0)&&this.dispatchEvent(new g("select",l,a,t)),!0},e}(l.ZP)},1882:(t,e,i)=>{"use strict";function n(t,e,i){return Math.min(Math.max(t,e),i)}i.d(e,{uZ:()=>n,f9:()=>o,k3:()=>r,rU:()=>s,bI:()=>a,SV:()=>l,Yr:()=>h,$W:()=>u,t7:()=>c});var o="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},r="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function s(t,e,i,n,o,r){var s=o-i,l=r-n;if(0!==s||0!==l){var h=((t-i)*s+(e-n)*l)/(s*s+l*l);h>1?(i=o,n=r):h>0&&(i+=s*h,n+=l*h)}return a(t,e,i,n)}function a(t,e,i,n){var o=i-t,r=n-e;return o*o+r*r}function l(t){for(var e=t.length,i=0;i<e;i++){for(var n=i,o=Math.abs(t[i][i]),r=i+1;r<e;r++){var s=Math.abs(t[r][i]);s>o&&(o=s,n=r)}if(0===o)return null;var a=t[n];t[n]=t[i],t[i]=a;for(var l=i+1;l<e;l++)for(var h=-t[l][i]/t[i][i],u=i;u<e+1;u++)i==u?t[l][u]=0:t[l][u]+=h*t[i][u]}for(var c=new Array(e),p=e-1;p>=0;p--){c[p]=t[p][e]/t[p][p];for(var f=p-1;f>=0;f--)t[f][e]-=t[f][p]*c[p]}return c}function h(t){return t*Math.PI/180}function u(t,e){var i=t%e;return i*e<0?i+e:i}function c(t,e,i){return t+i*(e-t)}},3580:(t,e,i)=>{"use strict";i.d(e,{f0:()=>n,ZH:()=>o,KX:()=>r,xb:()=>s});var n="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1,o=arguments.length;n<o;++n){var r=arguments[n];if(null!=r)for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])}return i};function o(t){for(var e in t)delete t[e]}var r="function"==typeof Object.values?Object.values:function(t){var e=[];for(var i in t)e.push(t[i]);return e};function s(t){var e;for(e in t)return!1;return!e}},1964:(t,e,i)=>{"use strict";i.d(e,{Wm:()=>n.W,UQ:()=>R,OP:()=>A,mi:()=>L,Vs:()=>Y,dY:()=>K,U2:()=>b,_Q:()=>I,Ck:()=>Z,WO:()=>F,Cs:()=>z,bU:()=>M,lO:()=>W,Fj:()=>X,vs:()=>D});var n=i(868);const o=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||n.W[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();var r,s=i(1882),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=6378137,h=Math.PI*l,u=[-h,-h,h,h],c=[-180,-85,180,85],p=l*Math.log(Math.tan(Math.PI/2)),f=function(t){function e(e){return t.call(this,{code:e,units:n.Z.METERS,extent:u,global:!0,worldExtent:c,getPointResolution:function(t,e){return t/(0,s.f9)(e[1]/l)}})||this}return a(e,t),e}(o),d=[new f("EPSG:3857"),new f("EPSG:102100"),new f("EPSG:102113"),new f("EPSG:900913"),new f("http://www.opengis.net/gml/srs/epsg.xml#3857")];var _=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),g=[-180,-90,180,90],y=6378137*Math.PI/180,v=function(t){function e(e,i){return t.call(this,{code:e,units:n.Z.DEGREES,extent:g,axisOrientation:i,global:!0,metersPerUnit:y,worldExtent:g})||this}return _(e,t),e}(o),m=[new v("CRS:84"),new v("EPSG:4326","neu"),new v("urn:ogc:def:crs:OGC:1.3:CRS84"),new v("urn:ogc:def:crs:OGC:2:84"),new v("http://www.opengis.net/gml/srs/epsg.xml#4326","neu")],x={},E={};function C(t,e,i){var n=t.getCode(),o=e.getCode();n in E||(E[n]={}),E[n][o]=i}i(1915);function S(t,e,i){var n=i||6371008.8,o=(0,s.Yr)(t[1]),r=(0,s.Yr)(e[1]),a=(r-o)/2,l=(0,s.Yr)(e[0]-t[0])/2,h=Math.sin(a)*Math.sin(a)+Math.sin(l)*Math.sin(l)*Math.cos(o)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function O(t,e,i){var n;if(void 0!==e){for(var o=0,r=t.length;o<r;++o)e[o]=t[o];n=e}else n=t.slice();return n}function w(t,e,i){if(void 0!==e&&t!==e){for(var n=0,o=t.length;n<o;++n)e[n]=t[n];t=e}return t}function T(t){!function(t,e){x[t]=e}(t.getCode(),t),C(t,t,O)}function b(t){return"string"==typeof t?x[e=t]||x[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function I(t,e,i,o){var r,s=(t=b(t)).getPointResolutionFunc();if(s)r=s(e,i),o&&o!==t.getUnits()&&(l=t.getMetersPerUnit())&&(r=r*l/n.W[o]);else{var a=t.getUnits();if(a==n.Z.DEGREES&&!o||o==n.Z.DEGREES)r=e;else{var l,h=F(t,b("EPSG:4326"));if(h===w&&a!==n.Z.DEGREES)r=e*t.getMetersPerUnit();else{var u=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];r=(S((u=h(u,u,2)).slice(0,2),u.slice(2,4))+S(u.slice(4,6),u.slice(6,8)))/2}void 0!==(l=o?n.W[o]:t.getMetersPerUnit())&&(r/=l)}}return r}function P(t){!function(t){t.forEach(T)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&C(e,t,O)}))}))}function R(t,e){return t?"string"==typeof t?b(t):t:b(e)}function L(t,e){return D(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function M(t,e){var i=D(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),n=i[0];return(n<-180||n>180)&&(i[0]=(0,s.$W)(n+180,360)-180),i}function A(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||F(t,e)===O)&&i}function F(t,e){var i=function(t,e){var i;return t in E&&e in E[t]&&(i=E[t][e]),i}(t.getCode(),e.getCode());return i||(i=w),i}function Z(t,e){return F(b(t),b(e))}function D(t,e,i){return Z(e,i)(t,void 0,t.length)}var k,j,N,G=null;function z(){return G}function W(t,e){return t}function Y(t,e){return t}function X(t,e){return t}function K(t,e){return t}P(d),P(m),k=d,j=function(t,e,i){var n=t.length,o=i>1?i:2,r=e;void 0===r&&(r=o>2?t.slice():new Array(n));for(var s=0;s<n;s+=o){r[s]=h*t[s]/180;var a=l*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));a>p?a=p:a<-p&&(a=-p),r[s+1]=a}return r},N=function(t,e,i){var n=t.length,o=i>1?i:2,r=e;void 0===r&&(r=o>2?t.slice():new Array(n));for(var s=0;s<n;s+=o)r[s]=180*t[s]/h,r[s+1]=360*Math.atan(Math.exp(t[s+1]/l))/Math.PI-90;return r},m.forEach((function(t){k.forEach((function(e){C(t,e,j),C(e,t,N)}))}))},868:(t,e,i)=>{"use strict";i.d(e,{W:()=>o,Z:()=>r});var n={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},o={};o[n.DEGREES]=2*Math.PI*6370997/360,o[n.FEET]=.3048,o[n.METERS]=1,o[n.USFEET]=1200/3937;const r=n},8509:(t,e,i)=>{"use strict";i.d(e,{Df:()=>u,bL:()=>c,mb:()=>p,X9:()=>f,He:()=>d,rc:()=>_,V4:()=>g,Tx:()=>y,PH:()=>v,ru:()=>m,oB:()=>x,yC:()=>E,sG:()=>C,Qx:()=>b,fk:()=>I,Kd:()=>L,gs:()=>M,qs:()=>A,_f:()=>F,QP:()=>D});var n=i(8493),o=i(6575),r=i(1358),s=i(3580),a=i(5386),l=i(7644),h=i(2359),u="10px sans-serif",c="#000",p="round",f=[],d=0,_="round",g=10,y="#000",v="center",m="middle",x=[0,0,0,0],E=1,C=new n.ZP;(new o.Z).setSize=function(){console.warn("labelCache is deprecated.")};var S,O,w=null,T={},b=function(){var t,e,i="32px ",n=["monospace","serif"],o=n.length,r="wmytzilWMYTZIL@#/&?$%10";function a(t,s,a){for(var l=!0,h=0;h<o;++h){var u=n[h];if(e=R(t+" "+s+" "+i+u,r),a!=u){var c=R(t+" "+s+" "+i+a+","+u,r);l=l&&c!=e}}return!!l}function h(){for(var e=!0,i=C.getKeys(),n=0,o=i.length;n<o;++n){var r=i[n];C.get(r)<100&&(a.apply(this,r.split("\n"))?((0,s.ZH)(T),w=null,S=void 0,C.set(r,100)):(C.set(r,C.get(r)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var i=(0,l.p)(e);if(i)for(var n=i.families,o=0,r=n.length;o<r;++o){var s=n[o],u=i.style+"\n"+i.weight+"\n"+s;void 0===C.get(u)&&(C.set(u,100,!0),a(i.style,i.weight,s)||(C.set(u,0,!0),void 0===t&&(t=setInterval(h,32))))}}}(),I=function(t){var e=T[t];if(null==e){if(r.Id){var i=(0,l.p)(t),n=P(t,"Žg");e=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else O||((O=document.createElement("div")).innerHTML="M",O.style.margin="0 !important",O.style.padding="0 !important",O.style.position="absolute !important",O.style.left="-99999px !important"),O.style.font=t,document.body.appendChild(O),e=O.offsetHeight,document.body.removeChild(O);T[t]=e}return e};function P(t,e){return w||(w=(0,a.E4)(1,1)),t!=S&&(w.font=t,S=w.font),w.measureText(e)}function R(t,e){return P(t,e).width}function L(t,e,i){if(e in i)return i[e];var n=R(t,e);return i[e]=n,n}function M(t,e,i){for(var n=e.length,o=0,r=0;r<n;++r){var s=R(t,e[r]);o=Math.max(o,s),i.push(s)}return o}function A(t,e,i,n){0!==e&&(t.translate(i,n),t.rotate(e),t.translate(-i,-n))}function F(t,e,i,n,o,r,s,a,l,h,u){t.save(),1!==i&&(t.globalAlpha*=i),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(l,h),t.scale(u[0],u[1]),function(t,e){for(var i=t.contextInstructions,n=0,o=i.length;n<o;n+=2)Array.isArray(i[n+1])?e[i[n]].apply(e,i[n+1]):e[i[n]]=i[n+1]}(n,t)):u[0]<0||u[1]<0?(t.translate(l,h),t.scale(u[0],u[1]),t.drawImage(n,o,r,s,a,0,0,s,a)):t.drawImage(n,o,r,s,a,l,h,s*u[0],a*u[1]),t.restore()}var Z=null;function D(t){return r.Id?(0,h.BB)(t):(Z||(Z=(0,a.E4)(1,1).canvas),Z.style.transform=(0,h.BB)(t),Z.style.transform)}},596:(t,e,i)=>{"use strict";function n(t){return t[0]>0&&t[1]>0}function o(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function r(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}i.d(e,{py:()=>n,bA:()=>o,Pq:()=>r})},9797:(t,e,i)=>{"use strict";i.d(e,{Z:()=>f});var n,o=i(1256),r=i(8039),s=i(8913),a=i(5120),l=i(5386),h=i(8509),u=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const c=function(t){function e(e){var i=this,n=void 0!==e.rotateWithView&&e.rotateWithView;return(i=t.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_={},i.hitDetectionCanvas_=null,i.fill_=void 0!==e.fill?e.fill:null,i.origin_=[0,0],i.points_=e.points,i.radius_=void 0!==e.radius?e.radius:e.radius1,i.radius2_=e.radius2,i.angle_=void 0!==e.angle?e.angle:0,i.stroke_=void 0!==e.stroke?e.stroke:null,i.anchor_=null,i.size_=null,i.imageSize_=null,i.hitDetectionImageSize_=null,i.render(),i}return u(e,t),e.prototype.clone=function(){var t=this.getScale(),i=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionCanvas_){var t=this.createRenderOptions();this.createHitDetectionCanvas_(t)}return this.hitDetectionCanvas_},e.prototype.getImage=function(t){if(!this.canvas_[t||1]){var e=this.createRenderOptions(),i=(0,l.E4)(e.size*t||1,e.size*t||1);this.draw_(e,i,0,0,t||1),this.canvas_[t||1]=i.canvas}return this.canvas_[t||1]},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return o.Z.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.createRenderOptions=function(){var t,e=h.mb,i=h.rc,n=0,o=null,r=0,s=0;return this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=h.Tx),t=(0,a.y)(t),void 0===(s=this.stroke_.getWidth())&&(s=h.yC),o=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),void 0===(i=this.stroke_.getLineJoin())&&(i=h.rc),void 0===(e=this.stroke_.getLineCap())&&(e=h.mb),void 0===(n=this.stroke_.getMiterLimit())&&(n=h.V4)),{strokeStyle:t,strokeWidth:s,size:2*(this.radius_+s)+1,lineCap:e,lineDash:o,lineDashOffset:r,lineJoin:i,miterLimit:n}},e.prototype.render=function(){var t=this.createRenderOptions(),e=(0,l.E4)(t.size,t.size);this.draw_(t,e,0,0,1),this.canvas_={},this.canvas_[1]=e.canvas;var i=e.canvas.width,n=i,o=this.getDisplacement();this.hitDetectionImageSize_=[t.size,t.size],this.createHitDetectionCanvas_(t),this.anchor_=[i/2-o[0],i/2+o[1]],this.size_=[i,i],this.imageSize_=[n,n]},e.prototype.draw_=function(t,e,i,n,o){var r,s,l;e.setTransform(o,0,0,o,0,0),e.translate(i,n),e.beginPath();var u=this.points_;if(u===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var c=void 0!==this.radius2_?this.radius2_:this.radius_;for(c!==this.radius_&&(u*=2),r=0;r<=u;r++)s=2*r*Math.PI/u-Math.PI/2+this.angle_,l=r%2==0?this.radius_:c,e.lineTo(t.size/2+l*Math.cos(s),t.size/2+l*Math.sin(s))}if(this.fill_){var p=this.fill_.getColor();null===p&&(p=h.bL),e.fillStyle=(0,a.y)(p),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionCanvas_=this.getImage(1),this.fill_){var e=this.fill_.getColor(),i=0;if("string"==typeof e&&(e=(0,s._2)(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){var n=(0,l.E4)(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n,0,0)}}},e.prototype.drawHitDetectionCanvas_=function(t,e,i,n){e.translate(i,n),e.beginPath();var o=this.points_;if(o===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var r=void 0!==this.radius2_?this.radius2_:this.radius_;r!==this.radius_&&(o*=2);var s=void 0,a=void 0,l=void 0;for(s=0;s<=o;s++)l=2*s*Math.PI/o-Math.PI/2+this.angle_,a=s%2==0?this.radius_:r,e.lineTo(t.size/2+a*Math.cos(l),t.size/2+a*Math.sin(l))}e.fillStyle=h.bL,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e}(r.Z);var p=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const f=function(t){function e(e){var i=e||{};return t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,scale:void 0!==i.scale?i.scale:1,rotation:void 0!==i.rotation?i.rotation:0,rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this}return p(e,t),e.prototype.clone=function(){var t=this.getScale(),i=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(c)},8185:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}()},8039:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(9179),o=i(596);const r=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,o.Pq)(t.scale),this.displacement_=t.displacement}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return(0,n.O3)()},t.prototype.getImage=function(t){return(0,n.O3)()},t.prototype.getHitDetectionImage=function(){return(0,n.O3)()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return(0,n.O3)()},t.prototype.getImageSize=function(){return(0,n.O3)()},t.prototype.getHitDetectionImageSize=function(){return(0,n.O3)()},t.prototype.getOrigin=function(){return(0,n.O3)()},t.prototype.getSize=function(){return(0,n.O3)()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=(0,o.Pq)(t)},t.prototype.listenImageChange=function(t){(0,n.O3)()},t.prototype.load=function(){(0,n.O3)()},t.prototype.unlistenImageChange=function(t){(0,n.O3)()},t}()},767:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}()},1219:(t,e,i)=>{"use strict";i.d(e,{J$:()=>h,yF:()=>c,Ly:()=>p,ZP:()=>d});var n=i(9797),o=i(8185),r=i(8795),s=i(767),a=i(8906),l=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=f,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=f,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}();function h(t){var e,i;"function"==typeof t?e=t:(Array.isArray(t)?i=t:((0,a.h)("function"==typeof t.getZIndex,41),i=[t]),e=function(){return i});return e}var u=null;function c(t,e){if(!u){var i=new o.Z({color:"rgba(255,255,255,0.4)"}),r=new s.Z({color:"#3399CC",width:1.25});u=[new l({image:new n.Z({fill:i,stroke:r,radius:5}),fill:i,stroke:r})]}return u}function p(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t[r.Z.POLYGON]=[new l({fill:new o.Z({color:[255,255,255,.5]})})],t[r.Z.MULTI_POLYGON]=t[r.Z.POLYGON],t[r.Z.LINE_STRING]=[new l({stroke:new s.Z({color:e,width:5})}),new l({stroke:new s.Z({color:i,width:3})})],t[r.Z.MULTI_LINE_STRING]=t[r.Z.LINE_STRING],t[r.Z.CIRCLE]=t[r.Z.POLYGON].concat(t[r.Z.LINE_STRING]),t[r.Z.POINT]=[new l({image:new n.Z({radius:6,fill:new o.Z({color:i}),stroke:new s.Z({color:e,width:1.5})}),zIndex:1/0})],t[r.Z.MULTI_POINT]=t[r.Z.POINT],t[r.Z.GEOMETRY_COLLECTION]=t[r.Z.POLYGON].concat(t[r.Z.LINE_STRING],t[r.Z.POINT]),t}function f(t){return t.getGeometry()}const d=l},8288:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={POINT:"point",LINE:"line"}},2359:(t,e,i)=>{"use strict";i.d(e,{Ue:()=>o,lk:()=>r,nn:()=>s,n3:()=>a,qC:()=>l,nb:()=>h,BB:()=>u});var n=i(8906);function o(){return[1,0,0,1,0,0]}function r(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function s(t,e){var i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function a(t,e,i){return o=e,r=0,s=0,a=i,l=0,h=0,(n=t)[0]=o,n[1]=r,n[2]=s,n[3]=a,n[4]=l,n[5]=h,n;var n,o,r,s,a,l,h}function l(t,e,i,n,o,r,s,a){var l=Math.sin(r),h=Math.cos(r);return t[0]=n*h,t[1]=o*l,t[2]=-n*l,t[3]=o*h,t[4]=s*n*h-a*n*l+e,t[5]=s*o*l+a*o*h+i,t}function h(t,e){var i,o=(i=e)[0]*i[3]-i[1]*i[2];(0,n.h)(0!==o,32);var r=e[0],s=e[1],a=e[2],l=e[3],h=e[4],u=e[5];return t[0]=l/o,t[1]=-s/o,t[2]=-a/o,t[3]=r/o,t[4]=(a*u-l*h)/o,t[5]=-(r*u-s*h)/o,t}function u(t){return"matrix("+t.join(", ")+")"}new Array(6)},9179:(t,e,i)=>{"use strict";function n(){return function(){throw new Error("Unimplemented abstract method.")}()}i.d(e,{O3:()=>n,sq:()=>r,q4:()=>s});var o=0;function r(t){return t.ol_uid||(t.ol_uid=String(++o))}var s="6.5.0"},2582:function(t){t.exports=function(){"use strict";function t(t,n,o,r,s){!function t(i,n,o,r,s){for(;r>o;){if(r-o>600){var a=r-o+1,l=n-o+1,h=Math.log(a),u=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*u*(a-u)/a)*(l-a/2<0?-1:1);t(i,n,Math.max(o,Math.floor(n-l*u/a+c)),Math.min(r,Math.floor(n+(a-l)*u/a+c)),s)}var p=i[n],f=o,d=r;for(e(i,o,n),s(i[r],p)>0&&e(i,o,r);f<d;){for(e(i,f,d),f++,d--;s(i[f],p)<0;)f++;for(;s(i[d],p)>0;)d--}0===s(i[o],p)?e(i,o,d):e(i,++d,r),d<=n&&(o=d+1),n<=d&&(r=d-1)}}(t,n,o||0,r||t.length-1,s||i)}function e(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function i(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function r(t,e){s(t,0,t.children.length,e,t)}function s(t,e,i,n,o){o||(o=d(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var r=e;r<i;r++){var s=t.children[r];a(o,t.leaf?n(s):s)}return o}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(e,i,n,o,r){for(var s=[i,n];s.length;)if(!((n=s.pop())-(i=s.pop())<=o)){var a=i+Math.ceil((n-i)/o/2)*o;t(e,a,i,n,r),s.push(i,a,a,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,i=[];if(!f(t,e))return i;for(var n=this.toBBox,o=[];e;){for(var r=0;r<e.children.length;r++){var s=e.children[r],a=e.leaf?n(s):s;f(t,a)&&(e.leaf?i.push(s):p(t,a)?this._all(s,i):o.push(s))}e=o.pop()}return i},n.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var i=[];e;){for(var n=0;n<e.children.length;n++){var o=e.children[n],r=e.leaf?this.toBBox(o):o;if(f(t,r)){if(e.leaf||p(t,r))return!0;i.push(o)}}e=i.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=d([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var i,n,r,s=this.data,a=this.toBBox(t),l=[],h=[];s||l.length;){if(s||(s=l.pop(),n=l[l.length-1],i=h.pop(),r=!0),s.leaf){var u=o(t,s.children,e);if(-1!==u)return s.children.splice(u,1),l.push(s),this._condense(l),this}r||s.leaf||!p(s,a)?n?(i++,s=n.children[i],r=!1):s=null:(l.push(s),h.push(i),i=0,n=s,s=s.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},n.prototype._build=function(t,e,i,n){var o,s=i-e+1,a=this._maxEntries;if(s<=a)return r(o=d(t.slice(e,i+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,n-1))),(o=d([])).leaf=!1,o.height=n;var l=Math.ceil(s/a),h=l*Math.ceil(Math.sqrt(a));_(t,e,i,h,this.compareMinX);for(var u=e;u<=i;u+=h){var c=Math.min(u+h-1,i);_(t,u,c,l,this.compareMinY);for(var p=u;p<=c;p+=l){var f=Math.min(p+l-1,c);o.children.push(this._build(t,p,f,n-1))}}return r(o,this.toBBox),o},n.prototype._chooseSubtree=function(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){for(var o=1/0,r=1/0,s=void 0,a=0;a<e.children.length;a++){var l=e.children[a],h=u(l),c=(p=t,f=l,(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-h);c<r?(r=c,o=h<o?h:o,s=l):c===r&&h<o&&(o=h,s=l)}e=s||e.children[0]}var p,f;return e},n.prototype._insert=function(t,e,i){var n=i?t:this.toBBox(t),o=[],r=this._chooseSubtree(n,this.data,e,o);for(r.children.push(t),a(r,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},n.prototype._split=function(t,e){var i=t[e],n=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,n);var s=this._chooseSplitIndex(i,o,n),a=d(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,r(i,this.toBBox),r(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},n.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,i){for(var n,o,r,a,l,h,c,p=1/0,f=1/0,d=e;d<=i-e;d++){var _=s(t,0,d,this.toBBox),g=s(t,d,i,this.toBBox),y=(o=_,r=g,void 0,void 0,void 0,void 0,a=Math.max(o.minX,r.minX),l=Math.max(o.minY,r.minY),h=Math.min(o.maxX,r.maxX),c=Math.min(o.maxY,r.maxY),Math.max(0,h-a)*Math.max(0,c-l)),v=u(_)+u(g);y<p?(p=y,n=d,f=v<f?v:f):y===p&&v<f&&(f=v,n=d)}return n||i-e},n.prototype._chooseSplitAxis=function(t,e,i){var n=t.leaf?this.compareMinX:l,o=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,o)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,i,n){t.children.sort(n);for(var o=this.toBBox,r=s(t,0,e,o),l=s(t,i-e,i,o),h=c(r)+c(l),u=e;u<i-e;u++){var p=t.children[u];a(r,t.leaf?o(p):p),h+=c(r)}for(var f=i-e-1;f>=e;f--){var d=t.children[f];a(l,t.leaf?o(d):d),h+=c(l)}return h},n.prototype._adjustParentBBoxes=function(t,e,i){for(var n=i;n>=0;n--)a(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():r(t[e],this.toBBox)},n}()},1978:(t,e,i)=>{"use strict";i.d(e,{J:()=>k,q:()=>j});var n,o=i(8493),r=i(3381),s=i(8906),a=i(3002),l=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const h=function(t){function e(e){var i=t.call(this)||this;if(i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addEventListener((0,o.v_)(i.geometryName_),i.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;i.setGeometry(n)}else{var r=e;i.setProperties(r)}return i}return l(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&((0,a.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=(0,a.oL)(t,r.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){var e,i;this.style_=t,this.styleFunction_=t?"function"==typeof(e=t)?e:(Array.isArray(e)?i=e:((0,s.h)("function"==typeof e.getZIndex,41),i=[e]),function(){return i}):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeEventListener((0,o.v_)(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener((0,o.v_)(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(o.ZP);var u=i(188);const c="bottom-center",p="bottom-right",f="center-center",d="center-right";var _=i(7644),g=i(1915),y=i(5386),v=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),m="element",x="map",E="offset",C="position",S="positioning";const O=function(t){function e(e){var i=t.call(this)||this;i.options=e,i.id=e.id,i.insertFirst=void 0===e.insertFirst||e.insertFirst,i.stopEvent=void 0===e.stopEvent||e.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==e.className?e.className:"ol-overlay-container "+_.$A,i.element.style.position="absolute",i.element.style.pointerEvents="auto";var n=e.autoPan;return n&&"object"!=typeof n&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),i.autoPan=n||!1,i.rendered={transform_:"",visible:!0},i.mapPostrenderListenerKey=null,i.addEventListener((0,o.v_)(m),i.handleElementChanged),i.addEventListener((0,o.v_)(x),i.handleMapChanged),i.addEventListener((0,o.v_)(E),i.handleOffsetChanged),i.addEventListener((0,o.v_)(C),i.handlePositionChanged),i.addEventListener((0,o.v_)(S),i.handlePositioningChanged),void 0!==e.element&&i.setElement(e.element),i.setOffset(void 0!==e.offset?e.offset:[0,0]),i.setPositioning(void 0!==e.positioning?e.positioning:"top-left"),void 0!==e.position&&i.setPosition(e.position),i}return v(e,t),e.prototype.getElement=function(){return this.get(m)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(x)},e.prototype.getOffset=function(){return this.get(E)},e.prototype.getPosition=function(){return this.get(C)},e.prototype.getPositioning=function(){return this.get(S)},e.prototype.handleElementChanged=function(){(0,y.ep)(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&((0,y.ZF)(this.element),(0,a.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,a.oL)(t,u.Z.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(m,t)},e.prototype.setMap=function(t){this.set(x,t)},e.prototype.setOffset=function(t){this.set(E,t)},e.prototype.setPosition=function(t){this.set(C,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(C)){var i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),o=this.getRect(n,[(0,y.iO)(n),(0,y.Pb)(n)]),r=t||{},s=void 0===r.margin?20:r.margin;if(!(0,g.r4)(i,o)){var a=o[0]-i[0],l=i[2]-o[2],h=o[1]-i[1],u=i[3]-o[3],c=[0,0];if(a<0?c[0]=a-s:l<0&&(c[0]=Math.abs(l)+s),h<0?c[1]=h-s:u<0&&(c[1]=Math.abs(u)+s),0!==c[0]||0!==c[1]){var p=e.getView().getCenterInternal(),f=e.getPixelFromCoordinateInternal(p);if(!f)return;var d=[f[0]+c[0],f[1]+c[1]],_=r.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(d),duration:_.duration,easing:_.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[n,o,n+e[0],o+e[1]]},e.prototype.setPositioning=function(t){this.set(S,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var r=Math.round(t[0]+n[0])+"px",s=Math.round(t[1]+n[1])+"px",a="0%",l="0%";o==p||o==d||"top-right"==o?a="-100%":o!=c&&o!=f&&"top-center"!=o||(a="-50%"),"bottom-left"==o||o==c||o==p?l="-100%":"center-left"!=o&&o!=f&&o!=d||(l="-50%");var h="translate("+a+", "+l+") translate("+r+", "+s+")";this.rendered.transform_!=h&&(this.rendered.transform_=h,i.transform=h,i.msTransform=h)},e.prototype.getOptions=function(){return this.options},e}(o.ZP);var w=i(8185),T=i(8288),b=i(596);const I=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=(0,b.Pq)(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new w.Z({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:T.Z.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=(0,b.Pq)(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}();var P=i(1219),R=i(9797),L=i(767),M=i(2043),A=i(1964),F=i(8795),Z=i(9882);const D={primary:"#ff1493",secondary:"#ffff00"};class k extends h{constructor({name:t,location:e,info:i=null,infoHTML:n="",color:o={}}){super({type:F.Z.POINT,geometry:new M.Z((0,A.mi)(e)),name:t}),this.popup=null,this.handleChange=t=>{switch(t.key){case"location":this.popup.setPosition((0,A.mi)(this.get("location")));break;case"info":this.popup.setElement(this.get("info"))}},this.set("location",e),this.set("info",i||function(t=""){return Object.assign(document.createElement("div"),{className:"info",innerHTML:t})}(n)),this.set("color",Object.assign(Object.assign({},D),o)),this.on("propertychange",this.handleChange),this.popup=this.initPopup()}get hasInfo(){return""!==this.popup.getElement().innerHTML.trim()}showInfo(t){this.hasInfo&&t.addOverlay(this.popup)}hideInfo(t){t.removeOverlay(this.popup)}toggleInfo(t,e){return e?this.showInfo(t):this.hideInfo(t)}toJSON(){return{name:this.get("name"),location:this.get("location"),infoHTML:this.get("info").innerHTML,color:(0,Z.v)(this.get("color"),((t,e)=>e.toLowerCase()!==D[t]))}}initPopup(){return this.popup&&this.popup.dispose(),new O({element:this.get("info"),position:(0,A.mi)(this.get("location")),positioning:"center-left",offset:[20,0],autoPan:{animation:{duration:200}}})}}function j(t,e=!1){const i=t.get("color");return new P.ZP({image:new R.Z(Object.assign({radius:10,fill:new w.Z({color:e?i.secondary:i.primary})},e?{stroke:new L.Z({color:i.primary,width:3})}:{})),text:new I({text:t.get("name"),textAlign:"top",backgroundFill:new w.Z({color:"white"}),padding:[4,4,4,4],offsetY:25})})}},9882:(t,e,i)=>{"use strict";function n(t,e){return Object.entries(t).reduce(((t,[i,n])=>Object.assign(Object.assign({},t),e(i,n)?{[i]:n}:{})),{})}i.d(e,{v:()=>n})}},r={};function s(t){if(r[t])return r[t].exports;var e=r[t]={exports:{}};return o[t].call(e.exports,e,e.exports,s),e.exports}s.m=o,s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.f={},s.e=t=>Promise.all(Object.keys(s.f).reduce(((e,i)=>(s.f[i](t,e),e)),[])),s.u=t=>t+".js",s.miniCssF=t=>t+".css",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="map-markers:",s.l=(i,n,o,r)=>{if(t[i])t[i].push(n);else{var a,l;if(void 0!==o)for(var h=document.getElementsByTagName("script"),u=0;u<h.length;u++){var c=h[u];if(c.getAttribute("src")==i||c.getAttribute("data-webpack")==e+o){a=c;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",e+o),a.src=i),t[i]=[n];var p=(e,n)=>{a.onerror=a.onload=null,clearTimeout(f);var o=t[i];if(delete t[i],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((t=>t(n))),e)return e(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),l&&document.head.appendChild(a)}},s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t})(),i=t=>new Promise(((e,i)=>{var n=s.miniCssF(t),o=s.p+n;if(((t,e)=>{for(var i=document.getElementsByTagName("link"),n=0;n<i.length;n++){var o=(s=i[n]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(o===t||o===e))return s}var r=document.getElementsByTagName("style");for(n=0;n<r.length;n++){var s;if((o=(s=r[n]).getAttribute("data-href"))===t||o===e)return s}})(n,o))return e();((t,e,i,n)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=r=>{if(o.onerror=o.onload=null,"load"===r.type)i();else{var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=s,l.request=a,o.parentNode.removeChild(o),n(l)}},o.href=e,document.head.appendChild(o)})(t,o,e,i)})),n={179:0},s.f.miniCss=(t,e)=>{n[t]?e.push(n[t]):0!==n[t]&&{301:1}[t]&&e.push(n[t]=i(t).then((()=>{n[t]=0}),(e=>{throw delete n[t],e})))},(()=>{var t={179:0};s.f.j=(e,i)=>{var n=s.o(t,e)?t[e]:void 0;if(0!==n)if(n)i.push(n[2]);else{var o=new Promise(((i,o)=>{n=t[e]=[i,o]}));i.push(n[2]=o);var r=s.p+s.u(e),a=new Error;s.l(r,(i=>{if(s.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var o=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",a.name="ChunkLoadError",a.type=o,a.request=r,n[1](a)}}),"chunk-"+e,e)}};var e=(e,i)=>{for(var n,o,[r,a,l]=i,h=0,u=[];h<r.length;h++)o=r[h],s.o(t,o)&&t[o]&&u.push(t[o][0]),t[o]=0;for(n in a)s.o(a,n)&&(s.m[n]=a[n]);for(l&&l(s),e&&e(i);u.length;)u.shift()()},i=self.webpackChunkmap_markers=self.webpackChunkmap_markers||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),(()=>{"use strict";var t=s(967),e=s(4011),i=s(9179),n=s(2359),o=s(1915),r=s(8913);function a(t,e,i){return e+":"+t+":"+(i?(0,r.XC)(i):"null")}var l=new(function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,i){var n=a(t,e,i);return n in this.cache_?this.cache_[n]:null},t.prototype.set=function(t,e,i,n){var o=a(t,e,i);this.cache_[o]=n,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}()),h=s(8493);const u="opacity",c="visible",p="extent",f="zIndex",d="maxResolution",_="minResolution",g="maxZoom",y="minZoom",v="source";var m,x=s(8906),E=s(3580),C=s(1882),S=(m=function(t,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const O=function(t){function e(e){var i=t.call(this)||this,n=(0,E.f0)({},e);return n.opacity=void 0!==e.opacity?e.opacity:1,(0,x.h)("number"==typeof n.opacity,64),n.visible=void 0===e.visible||e.visible,n.zIndex=e.zIndex,n.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,n.minResolution=void 0!==e.minResolution?e.minResolution:0,n.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,n.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,i.className_=void 0!==n.className?e.className:"ol-layer",delete n.className,i.setProperties(n),i.state_=null,i}return S(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=(0,C.uZ)(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i?i:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return(0,i.O3)()},e.prototype.getLayerStatesArray=function(t){return(0,i.O3)()},e.prototype.getExtent=function(){return this.get(p)},e.prototype.getMaxResolution=function(){return this.get(d)},e.prototype.getMinResolution=function(){return this.get(_)},e.prototype.getMinZoom=function(){return this.get(y)},e.prototype.getMaxZoom=function(){return this.get(g)},e.prototype.getOpacity=function(){return this.get(u)},e.prototype.getSourceState=function(){return(0,i.O3)()},e.prototype.getVisible=function(){return this.get(c)},e.prototype.getZIndex=function(){return this.get(f)},e.prototype.setExtent=function(t){this.set(p,t)},e.prototype.setMaxResolution=function(t){this.set(d,t)},e.prototype.setMinResolution=function(t){this.set(_,t)},e.prototype.setMaxZoom=function(t){this.set(g,t)},e.prototype.setMinZoom=function(t){this.set(y,t)},e.prototype.setOpacity=function(t){(0,x.h)("number"==typeof t,64),this.set(u,t)},e.prototype.setVisible=function(t){this.set(c,t)},e.prototype.setZIndex=function(t){this.set(f,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(h.ZP);var w=s(3381);const T="precompose",b="rendercomplete",I="undefined",P="ready";var R=s(3002),L=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function M(t,e){if(!t.visible)return!1;var i=e.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;var n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}const A=function(t){function e(e){var i=this,n=(0,E.f0)({},e);delete n.source,(i=t.call(this,n)||this).mapPrecomposeKey_=null,i.mapRenderKey_=null,i.sourceChangeKey_=null,i.renderer_=null,e.render&&(i.render=e.render),e.map&&i.setMap(e.map),i.addEventListener((0,h.v_)(v),i.handleSourcePropertyChange_);var o=e.source?e.source:null;return i.setSource(o),i}return L(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(v)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():I},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&((0,R.bN)(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=(0,R.oL)(t,w.Z.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_.getFeatures(t)},e.prototype.render=function(t,e){var i=this.getRenderer();if(i.prepareFrame(t))return i.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&((0,R.bN)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&((0,R.bN)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=(0,R.oL)(t,T,(function(t){var e=t.frameState.layerStatesArray,i=this.getLayerState(!1);(0,x.h)(!e.some((function(t){return t.layer===i.layer})),67),e.push(i)}),this),this.mapRenderKey_=(0,R.oL)(this,w.Z.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(v,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(O);function F(t,e){for(var i=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}function Z(t,e){var i=Math.cos(e),n=Math.sin(e),o=t[0]*i-t[1]*n,r=t[1]*i+t[0]*n;return t[0]=o,t[1]=r,t}function D(t,e){if(e.canWrapX()){var i=(0,o.dz)(e.getExtent()),n=function(t,e,i){var n=e.getExtent(),r=0;if(e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])){var s=i||(0,o.dz)(n);r=Math.floor((t[0]-n[0])/s)}return r}(t,e,i);n&&(t[0]-=n*i)}return t}var k=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function j(t,e){l.expire()}const N=function(t){function r(e){var i=t.call(this)||this;return i.map_=e,i}return k(r,t),r.prototype.dispatchRenderEvent=function(t,e){(0,i.O3)()},r.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;(0,n.qC)(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),(0,n.nb)(o,i)},r.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,s,a,l){var h,u=e.viewState;function c(t,e,i,n){return r.call(s,e,t?i:null,n)}var p=u.projection,f=D(t.slice(),p),d=[[0,0]];if(p.canWrapX()&&n){var _=p.getExtent(),g=(0,o.dz)(_);d.push([-g,0],[g,0])}for(var y=e.layerStatesArray,v=y.length,m=[],x=[],E=0;E<d.length;E++)for(var C=v-1;C>=0;--C){var S=y[C],O=S.layer;if(O.hasRenderer()&&M(S,u)&&a.call(l,O)){var w=O.getRenderer(),T=O.getSource();if(w&&T){var b=T.getWrapX()?f:t,I=c.bind(null,S.managed);x[0]=b[0]+d[E][0],x[1]=b[1]+d[E][1],h=w.forEachFeatureAtCoordinate(x,e,i,I,m)}if(h)return h}}if(0!==m.length){var P=1/m.length;return m.forEach((function(t,e){return t.distanceSq+=e*P})),m.sort((function(t,e){return t.distanceSq-e.distanceSq})),m.some((function(t){return h=t.callback(t.feature,t.layer,t.geometry)})),h}},r.prototype.forEachLayerAtPixel=function(t,e,n,o,r){return(0,i.O3)()},r.prototype.hasFeatureAtCoordinate=function(t,i,n,o,r,s){return void 0!==this.forEachFeatureAtCoordinate(t,i,n,o,e.uX,this,r,s)},r.prototype.getMap=function(){return this.map_},r.prototype.renderFrame=function(t){(0,i.O3)()},r.prototype.scheduleExpireIconCache=function(t){l.canExpireCache()&&t.postRenderFunctions.push(j)},r}(t.Z);var G=s(3910),z=s(9520),W=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Y=function(t){function e(e,i,n,o){var r=t.call(this,e)||this;return r.inversePixelTransform=i,r.frameState=n,r.context=o,r}return W(e,t),e}(z.ZP);var X=s(7644),K=s(8509),B=s(5386),V=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const U=function(t){function e(e){var i=t.call(this,e)||this;i.fontChangeListenerKey_=(0,R.oL)(K.sG,G.Z.PROPERTYCHANGE,e.redrawText.bind(e)),i.element_=document.createElement("div");var n=i.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",i.element_.className=X.XV+" ol-layers";var o=e.getViewport();return o.insertBefore(i.element_,o.firstChild||null),i.children_=[],i.renderedVisible_=!0,i}return V(e,t),e.prototype.dispatchRenderEvent=function(t,e){var i=this.getMap();if(i.hasListener(t)){var n=new Y(t,void 0,e);i.dispatchEvent(n)}},e.prototype.disposeInternal=function(){(0,R.bN)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(T,t);var e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),i=t.viewState;this.children_.length=0;for(var n=[],o=null,r=0,s=e.length;r<s;++r){var a=e[r];if(t.layerIndex=r,M(a,i)&&(a.sourceState==P||a.sourceState==I)){var l=a.layer,h=l.render(t,o);h&&(h!==o&&(this.children_.push(h),o=h),"getDeclutter"in l&&n.push(l))}}for(r=n.length-1;r>=0;--r)n[r].renderDeclutter(t);(0,B.hF)(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,i,n,o){for(var r=e.viewState,s=e.layerStatesArray,a=s.length-1;a>=0;--a){var l=s[a],h=l.layer;if(h.hasRenderer()&&M(l,r)&&o(h)){var u=h.getRenderer().getDataAtPixel(t,e,i);if(u){var c=n(h,u);if(c)return c}}}},e}(N);var q=s(8426),H=s(9629),J=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$="layers";const Q=function(t){function e(e){var i=this,n=e||{},o=(0,E.f0)({},n);delete o.layers;var r=n.layers;return(i=t.call(this,o)||this).layersListenerKeys_=[],i.listenerKeys_={},i.addEventListener((0,h.v_)($),i.handleLayersChanged_),r?Array.isArray(r)?r=new q.Z(r.slice(),{unique:!0}):(0,x.h)("function"==typeof r.getArray,43):r=new q.Z(void 0,{unique:!0}),i.setLayers(r),i}return J(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(R.bN),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push((0,R.oL)(t,H.Z.ADD,this.handleLayersAdd_,this),(0,R.oL)(t,H.Z.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(R.bN);(0,E.ZH)(this.listenerKeys_);for(var n=t.getArray(),o=0,r=n.length;o<r;o++){var s=n[o];this.listenerKeys_[(0,i.sq)(s)]=[(0,R.oL)(s,G.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,R.oL)(s,w.Z.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[(0,i.sq)(e)]=[(0,R.oL)(e,G.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,R.oL)(e,w.Z.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=t.element,n=(0,i.sq)(e);this.listenerKeys_[n].forEach(R.bN),delete this.listenerKeys_[n],this.changed()},e.prototype.getLayers=function(){return this.get($)},e.prototype.setLayers=function(t){this.set($,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));for(var n=this.getLayerState(),r=i,s=e.length;r<s;r++){var a=e[r];a.opacity*=n.opacity,a.visible=a.visible&&n.visible,a.maxResolution=Math.min(a.maxResolution,n.maxResolution),a.minResolution=Math.max(a.minResolution,n.minResolution),a.minZoom=Math.max(a.minZoom,n.minZoom),a.maxZoom=Math.min(a.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==a.extent?a.extent=(0,o.Ed)(a.extent,n.extent):a.extent=n.extent)}return e},e.prototype.getSourceState=function(){return P},e}(O);var tt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const et=function(t){function e(e,i,n){var o=t.call(this,e)||this;return o.map=i,o.frameState=void 0!==n?n:null,o}return tt(e,t),e}(z.ZP);var it=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const nt=function(t){function e(e,i,n,o,r){var s=t.call(this,e,i,r)||this;return s.originalEvent=n,s.pixel_=null,s.coordinate_=null,s.dragging=void 0!==o&&o,s}return it(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(et);var ot=s(6575),rt=s(6);const st="pointerdown";var at=s(1358),lt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const ht=function(t){function e(e,i){var n=t.call(this,e)||this;n.map_=e,n.clickTimeoutId_,n.emulateClicks_=!1,n.dragging_=!1,n.dragListenerKeys_=[],n.moveTolerance_=i?i*at.MP:at.MP,n.down_=null;var o=n.map_.getViewport();return n.activePointers_=0,n.trackedTouches_={},n.element_=o,n.pointerdownListenerKey_=(0,R.oL)(o,st,n.handlePointerDown_,n),n.originalPointerMoveEvent_,n.relayedListenerKey_=(0,R.oL)(o,"pointermove",n.relayEvent_,n),n.boundHandleTouchMove_=n.handleTouchMove_.bind(n),n.element_.addEventListener(w.Z.TOUCHMOVE,n.boundHandleTouchMove_,!!at.bM&&{passive:!1}),n}return lt(e,t),e.prototype.emulateClick_=function(t){var e=new nt(rt.Z.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new nt(rt.Z.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new nt(rt.Z.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==rt.Z.POINTERUP||e.type==rt.Z.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==rt.Z.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new nt(rt.Z.POINTERUP,this.map_,t);this.dispatchEvent(e),this.emulateClicks_&&!e.propagationStopped&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(R.bN),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(t);var e=new nt(rt.Z.POINTERDOWN,this.map_,t);if(this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length){var i=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,R.oL)(i,rt.Z.POINTERMOVE,this.handlePointerMove_,this),(0,R.oL)(i,rt.Z.POINTERUP,this.handlePointerUp_,this),(0,R.oL)(this.element_,rt.Z.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push((0,R.oL)(this.element_.getRootNode(),rt.Z.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new nt(rt.Z.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new nt(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&((0,R.bN)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(w.Z.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,R.bN)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(R.bN),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(ot.Z);var ut=s(188);const ct="layergroup",pt="size",ft="target",dt="view";var _t=1/0;const gt=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,(0,E.ZH)(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},t.prototype.enqueue=function(t){(0,x.h)(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=_t&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,o=e[t],r=i[t],s=t;t<n>>1;){var a=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),h=l<n&&i[l]<i[a]?l:a;e[t]=e[h],i[t]=i[h],t=h}e[t]=o,i[t]=r,this.siftDown_(s,t)},t.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,o=i[e],r=n[e];e>t;){var s=this.getParentIndex_(e);if(!(n[s]>r))break;i[e]=i[s],n[e]=n[s],e=s}i[e]=o,n[e]=r},t.prototype.reprioritize=function(){var t,e,i,n=this.priorityFunction_,o=this.elements_,r=this.priorities_,s=0,a=o.length;for(e=0;e<a;++e)(i=n(t=o[e]))==_t?delete this.queuedElements_[this.keyFunction_(t)]:(r[s]=i,o[s++]=t);o.length=s,r.length=s,this.heapify_()},t}();var yt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const vt=function(t){function e(e,i){var n=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return n.boundHandleTileChange_=n.handleTileChange.bind(n),n.tileChangeCallback_=i,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return yt(e,t),e.prototype.enqueue=function(e){var i=t.prototype.enqueue.call(this,e);return i&&e[0].addEventListener(w.Z.CHANGE,this.boundHandleTileChange_),i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(e.hifi&&2===i||3===i||4===i){e.removeEventListener(w.Z.CHANGE,this.boundHandleTileChange_);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var i,n,o=0;this.tilesLoading_<t&&o<e&&this.getCount()>0;)n=(i=this.dequeue()[0]).getKey(),0!==i.getState()||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++o,i.load())},e}(gt);var mt=s(8795),xt=s(868);const Et="center",Ct="resolution",St="rotation";var Ot=s(1964);function wt(t,e,i){return function(n,o,r,s,a){if(n){var l=e?0:r[0]*o,h=e?0:r[1]*o,u=a?a[0]:0,c=a?a[1]:0,p=t[0]+l/2+u,f=t[2]-l/2+u,d=t[1]+h/2+c,_=t[3]-h/2+c;p>f&&(f=p=(f+p)/2),d>_&&(_=d=(_+d)/2);var g=(0,C.uZ)(n[0],p,f),y=(0,C.uZ)(n[1],d,_),v=30*o;return s&&i&&(g+=-v*Math.log(1+Math.max(0,p-n[0])/v)+v*Math.log(1+Math.max(0,n[0]-f)/v),y+=-v*Math.log(1+Math.max(0,d-n[1])/v)+v*Math.log(1+Math.max(0,n[1]-_)/v)),[g,y]}}}function Tt(t){return t}var bt=s(9682);function It(t,e,i,n){var r=(0,o.dz)(e)/i[0],s=(0,o.Cr)(e)/i[1];return n?Math.min(t,Math.max(r,s)):Math.min(t,Math.min(r,s))}function Pt(t,e,i){var n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,i&&(n=Math.max(n,i),n/=Math.log(1+50*Math.max(0,i/t-1))/50+1),(0,C.uZ)(n,i/2,2*e)}function Rt(t,e,i,n,o){return function(r,s,a,l){if(void 0!==r){var h=n?It(t,n,a,o):t;return(void 0===i||i)&&l?Pt(r,h,e):(0,C.uZ)(r,e,h)}}}function Lt(t){return void 0!==t?0:void 0}function Mt(t){return void 0!==t?t:void 0}var At=s(6320),Ft=s(3696),Zt=s(4759);function Dt(t,e,i,n,o,r,s){var a,l=t[e],h=t[e+1],u=t[i]-l,c=t[i+1]-h;if(0===u&&0===c)a=e;else{var p=((o-l)*u+(r-h)*c)/(u*u+c*c);if(p>1)a=i;else{if(p>0){for(var f=0;f<n;++f)s[f]=(0,C.t7)(t[e+f],t[i+f],p);return void(s.length=n)}a=e}}for(f=0;f<n;++f)s[f]=t[a+f];s.length=n}function kt(t,e,i,n,o){var r=t[e],s=t[e+1];for(e+=n;e<i;e+=n){var a=t[e],l=t[e+1],h=(0,C.bI)(r,s,a,l);h>o&&(o=h),r=a,s=l}return o}function jt(t,e,i,n,o,r,s,a,l,h,u){if(e==i)return h;var c,p;if(0===o){if((p=(0,C.bI)(s,a,t[e],t[e+1]))<h){for(c=0;c<n;++c)l[c]=t[e+c];return l.length=n,p}return h}for(var f=u||[NaN,NaN],d=e+n;d<i;)if(Dt(t,d-n,d,n,s,a,f),(p=(0,C.bI)(s,a,f[0],f[1]))<h){for(h=p,c=0;c<n;++c)l[c]=f[c];l.length=n,d+=n}else d+=n*Math.max((Math.sqrt(p)-Math.sqrt(h))/o|0,1);if(r&&(Dt(t,i-n,e,n,s,a,f),(p=(0,C.bI)(s,a,f[0],f[1]))<h)){for(h=p,c=0;c<n;++c)l[c]=f[c];l.length=n}return h}var Nt=s(8667);function Gt(t,e){return e*Math.round(t/e)}function zt(t,e,i,n,o,r,s){if(e==i)return s;var a,l,h=Gt(t[e],o),u=Gt(t[e+1],o);e+=n,r[s++]=h,r[s++]=u;do{if(a=Gt(t[e],o),l=Gt(t[e+1],o),(e+=n)==i)return r[s++]=a,r[s++]=l,s}while(a==h&&l==u);for(;e<i;){var c=Gt(t[e],o),p=Gt(t[e+1],o);if(e+=n,c!=a||p!=l){var f=a-h,d=l-u,_=c-h,g=p-u;f*g==d*_&&(f<0&&_<f||f==_||f>0&&_>f)&&(d<0&&g<d||d==g||d>0&&g>d)?(a=c,l=p):(r[s++]=a,r[s++]=l,h=a,u=l,a=c,l=p)}}return r[s++]=a,r[s++]=l,s}function Wt(t,e,i,n,o){for(var r=void 0!==o?o:[],s=0,a=e;a<i;a+=n)r[s++]=t.slice(a,a+n);return r.length=s,r}function Yt(t,e,i,n,o){for(var r=void 0!==o?o:[],s=0,a=0,l=i.length;a<l;++a){var h=i[a];r[s++]=Wt(t,e,h,n,r[s]),e=h}return r.length=s,r}function Xt(t,e,i,n,o){for(var r=void 0!==o?o:[],s=0,a=0,l=i.length;a<l;++a){var h=i[a];r[s++]=Yt(t,e,h,n,r[s]),e=h[h.length-1]}return r.length=s,r}function Kt(t,e,i,n){for(var o=0,r=t[i-n],s=t[i-n+1];e<i;e+=n){var a=t[e],l=t[e+1];o+=s*a-r*l,r=a,s=l}return o/2}var Bt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Vt=function(t){function e(e,i){var n=t.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?n.setCoordinates(e,i):n.setFlatCoordinates(i,e),n}return Bt(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<(0,o.qf)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(kt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),jt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.getArea=function(){return Kt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Wt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=function(t,e,i,n,o,r,s){var a=(i-e)/n;if(a<3){for(;e<i;e+=n)r[s++]=t[e],r[s++]=t[e+1];return s}var l=new Array(a);l[0]=1,l[a-1]=1;for(var h=[e,i-n],u=0;h.length>0;){for(var c=h.pop(),p=h.pop(),f=0,d=t[p],_=t[p+1],g=t[c],y=t[c+1],v=p+n;v<c;v+=n){var m=t[v],x=t[v+1],E=(0,C.rU)(m,x,d,_,g,y);E>f&&(u=v,f=E)}f>o&&(l[(u-e)/n]=1,p+n<u&&h.push(p,u),u+n<c&&h.push(u,c))}for(v=0;v<a;++v)l[v]&&(r[s++]=t[e+v*n],r[s++]=t[e+v*n+1]);return s}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,Ft.Z.XY)},e.prototype.getType=function(){return mt.Z.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,Nt.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Zt.ZP);var Ut=s(2043);function qt(t,e,i,n,r){return!(0,o.H6)(r,(function(o){return!Ht(t,e,i,n,o[0],o[1])}))}function Ht(t,e,i,n,o,r){for(var s=0,a=t[i-n],l=t[i-n+1];e<i;e+=n){var h=t[e],u=t[e+1];l<=r?u>r&&(h-a)*(r-l)-(o-a)*(u-l)>0&&s++:u<=r&&(h-a)*(r-l)-(o-a)*(u-l)<0&&s--,a=h,l=u}return 0!==s}function Jt(t,e,i,n,o,r){if(0===i.length)return!1;if(!Ht(t,e,i[0],n,o,r))return!1;for(var s=1,a=i.length;s<a;++s)if(Ht(t,i[s-1],i[s],n,o,r))return!1;return!0}function $t(t,e,i,n,r){var s=(0,o.qP)((0,o.lJ)(),t,e,i,n);return!!(0,o.kK)(r,s)&&(!!(0,o.r4)(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]||function(t,e,i,n,o){for(var r,s=[t[e],t[e+1]],a=[];e+n<i;e+=n){if(a[0]=t[e+n],a[1]=t[e+n+1],r=o(s,a))return r;s[0]=a[0],s[1]=a[1]}return!1}(t,e,i,n,(function(t,e){return(0,o.I7)(r,t,e)})))}function Qt(t,e,i,n){for(;e<i-n;){for(var o=0;o<n;++o){var r=t[e+o];t[e+o]=t[i-n+o],t[i-n+o]=r}e+=n,i-=n}}function te(t,e,i,n){for(var o=0,r=t[i-n],s=t[i-n+1];e<i;e+=n){var a=t[e],l=t[e+1];o+=(a-r)*(l+s),r=a,s=l}return 0===o?void 0:o>0}function ee(t,e,i,n,o){for(var r=void 0!==o&&o,s=0,a=i.length;s<a;++s){var l=i[s],h=te(t,e,l,n);(0===s?r&&h||!r&&!h:r&&!h||!r&&h)&&Qt(t,e,l,n),e=l}return e}var ie=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ne=function(t){function e(e,i,n){var o=t.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,void 0!==i&&n?(o.setFlatCoordinates(i,e),o.ends_=n):o.setCoordinates(e,i),o}return ie(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?(0,bt.l7)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){return n<(0,o.qf)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,i,n,o){for(var r=0,s=i.length;r<s;++r){var a=i[r];o=kt(t,e,a,n,o),e=a}return o}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,i,n,o,r,s,a,l,h,u){for(var c=u||[NaN,NaN],p=0,f=i.length;p<f;++p){var d=i[p];h=jt(t,e,d,n,o,r,s,a,l,h,c),e=d}return h}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return Jt(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,i,n){for(var o=0,r=0,s=i.length;r<s;++r){var a=i[r];o+=Kt(t,e,a,n),e=a}return o}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?ee(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,Yt(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=(0,o.qg)(this.getExtent());this.flatInteriorPoint_=function(t,e,i,n,o,r,s){for(var a,l,h,u,c,p,f,d=o[r+1],_=[],g=0,y=i.length;g<y;++g){var v=i[g];for(u=t[v-n],p=t[v-n+1],a=e;a<v;a+=n)c=t[a],f=t[a+1],(d<=p&&f<=d||p<=d&&d<=f)&&(h=(d-p)/(f-p)*(c-u)+u,_.push(h)),u=c,p=f}var m=NaN,x=-1/0;for(_.sort(bt.kK),u=_[0],a=1,l=_.length;a<l;++a){c=_[a];var E=Math.abs(c-u);E>x&&Jt(t,e,i,n,h=(u+c)/2,d)&&(m=h,x=E),u=c}return isNaN(m)&&(m=o[r]),s?(s.push(m,d,x),s):[m,d,x]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Ut.Z(this.getFlatInteriorPoint(),Ft.Z.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Vt(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[],o=0,r=0,s=i.length;r<s;++r){var a=i[r],l=new Vt(e.slice(o,a),t);n.push(l),o=a}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,i,n,o){for(var r=void 0!==o&&o,s=0,a=i.length;s<a;++s){var l=i[s],h=te(t,e,l,n);if(0===s){if(r&&h||!r&&!h)return!1}else if(r&&!h||!r&&h)return!1;e=l}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ee(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=function(t,e,i,n,o,r,s,a){for(var l=0,h=i.length;l<h;++l){var u=i[l];s=zt(t,e,u,n,o,r,s),a.push(s),e=u}return s}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new e(i,Ft.Z.XY,n)},e.prototype.getType=function(){return mt.Z.POLYGON},e.prototype.intersectsExtent=function(t){return function(t,e,i,n,o){if(!function(t,e,i,n,o){return!!($t(t,e,i,n,o)||Ht(t,e,i,n,o[0],o[1])||Ht(t,e,i,n,o[0],o[3])||Ht(t,e,i,n,o[2],o[1])||Ht(t,e,i,n,o[2],o[3]))}(t,e,i[0],n,o))return!1;if(1===i.length)return!0;for(var r=1,s=i.length;r<s;++r)if(qt(t,i[r-1],i[r],n,o)&&!$t(t,i[r-1],i[r],n,o))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,Nt._5)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(Zt.ZP);const oe=ne;function re(t){var e=t[0],i=t[1],n=t[2],o=t[3],r=[e,i,e,o,n,o,n,i,e,i];return new ne(r,Ft.Z.XY,[r.length])}var se=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function ae(t,e){setTimeout((function(){t(e)}),0)}function le(t){return!(t.sourceCenter&&t.targetCenter&&!F(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function he(t,e,i,n,o){var r=Math.cos(-o),s=Math.sin(-o),a=t[0]*r-t[1]*s,l=t[1]*r+t[0]*s;return[(a+=(e[0]/2-i[0])*n)*r-(l+=(i[1]-e[1]/2)*n)*(s=-s),l*r+a*s]}const ue=function(t){function i(e){var i=t.call(this)||this,n=(0,E.f0)({},e);return i.hints_=[0,0],i.animations_=[],i.updateAnimationKey_,i.projection_=(0,Ot.UQ)(n.projection,"EPSG:3857"),i.viewportSize_=[100,100],i.targetCenter_=null,i.targetResolution_,i.targetRotation_,i.cancelAnchor_=void 0,n.center&&(n.center=(0,Ot.Vs)(n.center,i.projection_)),n.extent&&(n.extent=(0,Ot.dY)(n.extent,i.projection_)),i.applyOptions_(n),i}return se(i,t),i.prototype.applyOptions_=function(t){var e=function(t){var e,i,n,r=void 0!==t.minZoom?t.minZoom:0,s=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,l=void 0!==t.multiWorld&&t.multiWorld,h=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,u=void 0!==t.showFullExtent&&t.showFullExtent,c=(0,Ot.UQ)(t.projection,"EPSG:3857"),p=c.getExtent(),f=t.constrainOnlyCenter,d=t.extent;if(l||d||!c.isGlobal()||(f=!1,d=p),void 0!==t.resolutions){var _=t.resolutions;i=_[r],n=void 0!==_[s]?_[s]:_[_.length-1],e=t.constrainResolution?function(t,e,i,n){return function(o,r,s,a){if(void 0!==o){var l=t[0],h=t[t.length-1],u=i?It(l,i,s,n):l;if(a)return void 0===e||e?Pt(o,u,h):(0,C.uZ)(o,h,u);var c=Math.min(u,o),p=Math.floor((0,bt.h7)(t,c,r));return t[p]>u&&p<t.length-1?t[p+1]:t[p]}}}(_,h,!f&&d,u):Rt(i,n,h,!f&&d,u)}else{var g=(p?Math.max((0,o.dz)(p),(0,o.Cr)(p)):360*Ot.Wm[xt.Z.DEGREES]/c.getMetersPerUnit())/256/Math.pow(2,0),y=g/Math.pow(2,28);void 0!==(i=t.maxResolution)?r=0:i=g/Math.pow(a,r),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(a,s):g/Math.pow(a,s):y),s=r+Math.floor(Math.log(i/n)/Math.log(a)),n=i/Math.pow(a,s-r),e=t.constrainResolution?function(t,e,i,n,o,r){return function(s,a,l,h){if(void 0!==s){var u=o?It(e,o,l,r):e,c=void 0!==i?i:0;if(h)return void 0===n||n?Pt(s,u,c):(0,C.uZ)(s,c,u);var p=Math.ceil(Math.log(e/u)/Math.log(t)-1e-9),f=-a*(.5-1e-9)+.5,d=Math.min(u,s),_=Math.floor(Math.log(e/d)/Math.log(t)+f),g=Math.max(p,_),y=e/Math.pow(t,g);return(0,C.uZ)(y,c,u)}}}(a,i,n,h,!f&&d,u):Rt(i,n,h,!f&&d,u)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:r,zoomFactor:a}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.padding=t.padding,this.minZoom_=e.minZoom;var i=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return wt(t.extent,t.constrainOnlyCenter,e)}var i=(0,Ot.UQ)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&i.isGlobal()){var n=i.getExtent().slice();return n[0]=-1/0,n[2]=1/0,wt(n,!1,!1)}return Tt}(t),n=e.constraint,r=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(o=(0,C.Yr)(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=o?0:t:void 0}):!1===e?Mt:"number"==typeof e?(i=e,n=2*Math.PI/i,function(t,e){return e?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}):Mt}return Lt;var i,n,o}(t);this.constraints_={center:i,resolution:n,rotation:r},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},i.prototype.getUpdatedOptions_=function(t){var e=(0,E.f0)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),(0,E.f0)({},e,t)},i.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),i=0;i<e.length;++i){var n=arguments[i];n.center&&((n=(0,E.f0)({},n)).center=(0,Ot.Vs)(n.center,this.getProjection())),n.anchor&&((n=(0,E.f0)({},n)).anchor=(0,Ot.Vs)(n.anchor,this.getProjection())),e[i]=n}this.animateInternal.apply(this,e)},i.prototype.animateInternal=function(t){var e,i=arguments.length;if(i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i),!this.isDef()){var n=arguments[i-1];return n.center&&this.setCenterInternal(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(e&&ae(e,!0))}for(var o=Date.now(),r=this.targetCenter_.slice(),s=this.targetResolution_,a=this.targetRotation_,l=[],h=0;h<i;++h){var u=arguments[h],c={start:o,complete:!1,anchor:u.anchor,duration:void 0!==u.duration?u.duration:1e3,easing:u.easing||At.rd,callback:e};if(u.center&&(c.sourceCenter=r,c.targetCenter=u.center.slice(),r=c.targetCenter),void 0!==u.zoom?(c.sourceResolution=s,c.targetResolution=this.getResolutionForZoom(u.zoom),s=c.targetResolution):u.resolution&&(c.sourceResolution=s,c.targetResolution=u.resolution,s=c.targetResolution),void 0!==u.rotation){c.sourceRotation=a;var p=(0,C.$W)(u.rotation-a+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=a+p,a=c.targetRotation}le(c)?c.complete=!0:o+=c.duration,l.push(c)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()},i.prototype.getAnimating=function(){return this.hints_[0]>0},i.prototype.getInteracting=function(){return this.hints_[1]>0},i.prototype.cancelAnimations=function(){var t;this.setHint(0,-this.hints_[0]);for(var e=0,i=this.animations_.length;e<i;++e){var n=this.animations_[e];if(n[0].callback&&ae(n[0].callback,!1),!t)for(var o=0,r=n.length;o<r;++o){var s=n[o];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},i.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;i>=0;--i){for(var n=this.animations_[i],o=!0,r=0,s=n.length;r<s;++r){var a=n[r];if(!a.complete){var l=t-a.start,h=a.duration>0?l/a.duration:1;h>=1?(a.complete=!0,h=1):o=!1;var u=a.easing(h);if(a.sourceCenter){var c=a.sourceCenter[0],p=a.sourceCenter[1],f=c+u*(a.targetCenter[0]-c),d=p+u*(a.targetCenter[1]-p);this.targetCenter_=[f,d]}if(a.sourceResolution&&a.targetResolution){var _=1===u?a.targetResolution:a.sourceResolution+u*(a.targetResolution-a.sourceResolution);if(a.anchor){var g=this.getViewportSize_(this.getRotation()),y=this.constraints_.resolution(_,0,g,!0);this.targetCenter_=this.calculateCenterZoom(y,a.anchor)}this.targetResolution_=_,this.applyTargetState_(!0)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var v=1===u?(0,C.$W)(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+u*(a.targetRotation-a.sourceRotation);if(a.anchor){var m=this.constraints_.rotation(v,!0);this.targetCenter_=this.calculateCenterRotate(m,a.anchor)}this.targetRotation_=v}if(this.applyTargetState_(!0),e=!0,!a.complete)break}}if(o){this.animations_[i]=null,this.setHint(0,-1);var x=n[0].callback;x&&ae(x,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},i.prototype.calculateCenterRotate=function(t,e){var i,n,o,r=this.getCenterInternal();return void 0!==r&&(Z(i=[r[0]-e[0],r[1]-e[1]],t-this.getRotation()),o=e,(n=i)[0]+=+o[0],n[1]+=+o[1]),i},i.prototype.calculateCenterZoom=function(t,e){var i,n=this.getCenterInternal(),o=this.getResolution();return void 0!==n&&void 0!==o&&(i=[e[0]-t*(e[0]-n[0])/o,e[1]-t*(e[1]-n[1])/o]),i},i.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e},i.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},i.prototype.getCenter=function(){var t=this.getCenterInternal();return t?(0,Ot.lO)(t,this.getProjection()):t},i.prototype.getCenterInternal=function(){return this.get(Et)},i.prototype.getConstraints=function(){return this.constraints_},i.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},i.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},i.prototype.calculateExtent=function(t){var e=this.calculateExtentInternal(t);return(0,Ot.Fj)(e,this.getProjection())},i.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSize_(),i=this.getCenterInternal();(0,x.h)(i,1);var n=this.getResolution();(0,x.h)(void 0!==n,2);var r=this.getRotation();return(0,x.h)(void 0!==r,3),(0,o.p8)(i,n,r,e)},i.prototype.getMaxResolution=function(){return this.maxResolution_},i.prototype.getMinResolution=function(){return this.minResolution_},i.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},i.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},i.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},i.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},i.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},i.prototype.getProjection=function(){return this.projection_},i.prototype.getResolution=function(){return this.get(Ct)},i.prototype.getResolutions=function(){return this.resolutions_},i.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal((0,Ot.dY)(t,this.getProjection()),e)},i.prototype.getResolutionForExtentInternal=function(t,e){var i=e||this.getViewportSize_(),n=(0,o.dz)(t)/i[0],r=(0,o.Cr)(t)/i[1];return Math.max(n,r)},i.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(i/n)/Math.log(e);return function(t){return i/Math.pow(e,t*o)}},i.prototype.getRotation=function(){return this.get(St)},i.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(i/n)/e;return function(t){return Math.log(i/t)/e/o}},i.prototype.getViewportSizeMinusPadding_=function(t){var e=this.getViewportSize_(t),i=this.padding;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e},i.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),i=this.getRotation(),n=this.getCenterInternal(),o=this.padding;if(o){var r=this.getViewportSizeMinusPadding_();n=he(n,this.getViewportSize_(),[r[0]/2+o[3],r[1]/2+o[0]],e,i)}return{center:n.slice(0),projection:void 0!==t?t:null,resolution:e,rotation:i,zoom:this.getZoom()}},i.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},i.prototype.getZoomForResolution=function(t){var e,i,n=this.minZoom_||0;if(this.resolutions_){var o=(0,bt.h7)(this.resolutions_,t,1);n=o,e=this.resolutions_[o],i=o==this.resolutions_.length-1?2:e/this.resolutions_[o+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)},i.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=(0,C.uZ)(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,(0,C.uZ)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},i.prototype.fit=function(t,e){var i;if((0,x.h)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))(0,x.h)(!(0,o.xb)(t),25),i=re(n=(0,Ot.dY)(t,this.getProjection()));else if(t.getType()===mt.Z.CIRCLE){var n;(i=re(n=(0,Ot.dY)(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),(0,o.qg)(n))}else{var r=(0,Ot.Cs)();i=r?t.clone().transform(r,this.getProjection()):t}this.fitInternal(i,e)},i.prototype.fitInternal=function(t,i){var n=i||{},o=n.size;o||(o=this.getViewportSizeMinusPadding_());var r,s=void 0!==n.padding?n.padding:[0,0,0,0],a=void 0!==n.nearest&&n.nearest;r=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;for(var l=t.getFlatCoordinates(),h=this.getRotation(),u=Math.cos(-h),c=Math.sin(-h),p=1/0,f=1/0,d=-1/0,_=-1/0,g=t.getStride(),y=0,v=l.length;y<v;y+=g){var m=l[y]*u-l[y+1]*c,x=l[y]*c+l[y+1]*u;p=Math.min(p,m),f=Math.min(f,x),d=Math.max(d,m),_=Math.max(_,x)}var E=this.getResolutionForExtentInternal([p,f,d,_],[o[0]-s[1]-s[3],o[1]-s[0]-s[2]]);E=isNaN(E)?r:Math.max(E,r),E=this.getConstrainedResolution(E,a?0:1),c=-c;var C=(p+d)/2,S=(f+_)/2,O=(C+=(s[1]-s[3])/2*E)*u-(S+=(s[0]-s[2])/2*E)*c,w=S*u+C*c,T=this.getConstrainedCenter([O,w],E),b=n.callback?n.callback:e.Zn;void 0!==n.duration?this.animateInternal({resolution:E,center:T,duration:n.duration,easing:n.easing},b):(this.targetResolution_=E,this.targetCenter_=T,this.applyTargetState_(!1,!0),ae(b,!0))},i.prototype.centerOn=function(t,e,i){this.centerOnInternal((0,Ot.Vs)(t,this.getProjection()),e,i)},i.prototype.centerOnInternal=function(t,e,i){this.setCenterInternal(he(t,e,i,this.getResolution(),this.getRotation()))},i.prototype.calculateCenterShift=function(t,e,i,n){var o,r=this.padding;if(r&&t){var s=this.getViewportSizeMinusPadding_(-i),a=he(t,n,[s[0]/2+r[3],s[1]/2+r[0]],e,i);o=[t[0]-a[0],t[1]-a[1]]}return o},i.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},i.prototype.adjustCenter=function(t){var e=(0,Ot.lO)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},i.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},i.prototype.adjustResolution=function(t,e){var i=e&&(0,Ot.Vs)(e,this.getProjection());this.adjustResolutionInternal(t,i)},i.prototype.adjustResolutionInternal=function(t,e){var i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(o,e)),this.targetResolution_*=t,this.applyTargetState_()},i.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},i.prototype.adjustRotation=function(t,e){e&&(e=(0,Ot.Vs)(e,this.getProjection())),this.adjustRotationInternal(t,e)},i.prototype.adjustRotationInternal=function(t,e){var i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()},i.prototype.setCenter=function(t){this.setCenterInternal((0,Ot.Vs)(t,this.getProjection()))},i.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},i.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},i.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},i.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},i.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},i.prototype.applyTargetState_=function(t,e){var i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),o=this.getViewportSize_(n),r=this.constraints_.resolution(this.targetResolution_,0,o,i),s=this.constraints_.center(this.targetCenter_,r,o,i,this.calculateCenterShift(this.targetCenter_,r,n,o));this.get(St)!==n&&this.set(St,n),this.get(Ct)!==r&&this.set(Ct,r),this.get(Et)&&F(this.get(Et),s)||this.set(Et,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},i.prototype.resolveConstraints=function(t,e,i){var n=void 0!==t?t:200,o=e||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,o,s),l=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,r,s));if(0===n&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,void this.applyTargetState_();var h=i||(0===n?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===r&&this.getCenterInternal()&&F(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:n,easing:At.Vv,anchor:h}))},i.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},i.prototype.endInteraction=function(t,e,i){var n=i&&(0,Ot.Vs)(i,this.getProjection());this.endInteractionInternal(t,e,n)},i.prototype.endInteractionInternal=function(t,e,i){this.setHint(1,-1),this.resolveConstraints(t,e,i)},i.prototype.getConstrainedCenter=function(t,e){var i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)},i.prototype.getConstrainedZoom=function(t,e){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))},i.prototype.getConstrainedResolution=function(t,e){var i=e||0,n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,i,n)},i}(h.ZP);var ce=s(596),pe=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const fe=function(t){function i(e){var i=t.call(this)||this,o=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,n,o,r={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new Q({layers:t.layers});return r.layergroup=s,r.target=t.target,r.view=void 0!==t.view?t.view:new ue,void 0!==t.controls&&(Array.isArray(t.controls)?i=new q.Z(t.controls.slice()):((0,x.h)("function"==typeof t.controls.getArray,47),i=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new q.Z(t.interactions.slice()):((0,x.h)("function"==typeof t.interactions.getArray,48),n=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?o=new q.Z(t.overlays.slice()):((0,x.h)("function"==typeof t.overlays.getArray,49),o=t.overlays):o=new q.Z,{controls:i,interactions:n,keyboardEventTarget:e,overlays:o,values:r}}(e);return i.boundHandleBrowserEvent_=i.handleBrowserEvent.bind(i),i.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,i.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:at.MP,i.postRenderTimeoutHandle_,i.animationDelayKey_,i.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(i),i.coordinateToPixelTransform_=(0,n.Ue)(),i.pixelToCoordinateTransform_=(0,n.Ue)(),i.frameIndex_=0,i.frameState_=null,i.previousExtent_=null,i.viewPropertyListenerKey_=null,i.viewChangeListenerKey_=null,i.layerGroupPropertyListenerKeys_=null,i.viewport_=document.createElement("div"),i.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.viewport_.style.position="relative",i.viewport_.style.overflow="hidden",i.viewport_.style.width="100%",i.viewport_.style.height="100%",i.overlayContainer_=document.createElement("div"),i.overlayContainer_.style.position="absolute",i.overlayContainer_.style.zIndex="0",i.overlayContainer_.style.width="100%",i.overlayContainer_.style.height="100%",i.overlayContainer_.style.pointerEvents="none",i.overlayContainer_.className="ol-overlaycontainer",i.viewport_.appendChild(i.overlayContainer_),i.overlayContainerStopEvent_=document.createElement("div"),i.overlayContainerStopEvent_.style.position="absolute",i.overlayContainerStopEvent_.style.zIndex="0",i.overlayContainerStopEvent_.style.width="100%",i.overlayContainerStopEvent_.style.height="100%",i.overlayContainerStopEvent_.style.pointerEvents="none",i.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",i.viewport_.appendChild(i.overlayContainerStopEvent_),i.mapBrowserEventHandler_=null,i.moveTolerance_=e.moveTolerance,i.keyboardEventTarget_=o.keyboardEventTarget,i.keyHandlerKeys_=null,i.controls=o.controls||new q.Z,i.interactions=o.interactions||new q.Z,i.overlays_=o.overlays,i.overlayIdIndex_={},i.renderer_=null,i.handleResize_,i.postRenderFunctions_=[],i.tileQueue_=new vt(i.getTilePriority.bind(i),i.handleTileChange_.bind(i)),i.addEventListener((0,h.v_)(ct),i.handleLayerGroupChanged_),i.addEventListener((0,h.v_)(dt),i.handleViewChanged_),i.addEventListener((0,h.v_)(pt),i.handleSizeChanged_),i.addEventListener((0,h.v_)(ft),i.handleTargetChanged_),i.setProperties(o.values),i.controls.forEach(function(t){t.setMap(this)}.bind(i)),i.controls.addEventListener(H.Z.ADD,function(t){t.element.setMap(this)}.bind(i)),i.controls.addEventListener(H.Z.REMOVE,function(t){t.element.setMap(null)}.bind(i)),i.interactions.forEach(function(t){t.setMap(this)}.bind(i)),i.interactions.addEventListener(H.Z.ADD,function(t){t.element.setMap(this)}.bind(i)),i.interactions.addEventListener(H.Z.REMOVE,function(t){t.element.setMap(null)}.bind(i)),i.overlays_.forEach(i.addOverlayInternal_.bind(i)),i.overlays_.addEventListener(H.Z.ADD,function(t){this.addOverlayInternal_(t.element)}.bind(i)),i.overlays_.addEventListener(H.Z.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(i)),i}return pe(i,t),i.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},i.prototype.addControl=function(t){this.getControls().push(t)},i.prototype.addInteraction=function(t){this.getInteractions().push(t)},i.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},i.prototype.addOverlay=function(t){this.getOverlays().push(t)},i.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},i.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},i.prototype.forEachFeatureAtPixel=function(t,i,n){if(this.frameState_){var o=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,s=void 0!==n.layerFilter?n.layerFilter:e.uX,a=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,r,a,i,null,s,null)}},i.prototype.getFeaturesAtPixel=function(t,e){var i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),e),i},i.prototype.forEachLayerAtPixel=function(t,i,n){if(this.frameState_){var o=n||{},r=void 0!==o.hitTolerance?o.hitTolerance:0,s=o.layerFilter||e.uX;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,r,i,s)}},i.prototype.hasFeatureAtPixel=function(t,i){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixelInternal(t),o=void 0!==(i=void 0!==i?i:{}).layerFilter?i.layerFilter:e.uX,r=void 0!==i.hitTolerance?i.hitTolerance:0,s=!1!==i.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,s,o,null)},i.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},i.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},i.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},i.prototype.getTarget=function(){return this.get(ft)},i.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},i.prototype.getCoordinateFromPixel=function(t){return(0,Ot.lO)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},i.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?(0,n.nn)(e.pixelToCoordinateTransform,t.slice()):null},i.prototype.getControls=function(){return this.controls},i.prototype.getOverlays=function(){return this.overlays_},i.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},i.prototype.getInteractions=function(){return this.interactions},i.prototype.getLayerGroup=function(){return this.get(ct)},i.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},i.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,i=t.length;e<i;++e){var n=t[e].layer.getSource();if(n&&n.loading)return!0}return!1},i.prototype.getPixelFromCoordinate=function(t){var e=(0,Ot.Vs)(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},i.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?(0,n.nn)(e.coordinateToPixelTransform,t.slice(0,2)):null},i.prototype.getRenderer=function(){return this.renderer_},i.prototype.getSize=function(){return this.get(pt)},i.prototype.getView=function(){return this.get(dt)},i.prototype.getViewport=function(){return this.viewport_},i.prototype.getOverlayContainer=function(){return this.overlayContainer_},i.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},i.prototype.getOwnerDocument=function(){return this.getTargetElement()?this.getTargetElement().ownerDocument:document},i.prototype.getTilePriority=function(t,e,i,n){return function(t,e,i,n,o){if(!t||!(i in t.wantedTiles))return _t;if(!t.wantedTiles[i][e.getKey()])return _t;var r=t.viewState.center,s=n[0]-r[0],a=n[1]-r[1];return 65536*Math.log(o)+Math.sqrt(s*s+a*a)/o}(this.frameState_,t,e,i,n)},i.prototype.handleBrowserEvent=function(t,e){var i=e||t.type,n=new nt(i,this,t);this.handleMapBrowserEvent(n)},i.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent,i=e.type;if(i===st||i===w.Z.WHEEL||i===w.Z.KEYDOWN){var n=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():n,r="host"in o?o.elementFromPoint(e.clientX,e.clientY):e.target;if(this.overlayContainerStopEvent_.contains(r)||!(o===n?n.documentElement:o).contains(r))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var s=this.getInteractions().getArray().slice(),a=s.length-1;a>=0;a--){var l=s[a];if(l.getMap()===this&&l.getActive()&&this.getTargetElement()&&(!l.handleEvent(t)||t.propagationStopped))break}}},i.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=this.maxTilesLoading_,n=i;if(t){var o=t.viewHints;if(o[0]||o[1]){var r=!at.Tp&&Date.now()-t.time>8;i=r?0:8,n=r?0:2}}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}!t||!this.hasListener(b)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(b,t);for(var s=this.postRenderFunctions_,a=0,l=s.length;a<l;++a)s[a](this,t);s.length=0},i.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},i.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.mapBrowserEventHandler_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)(0,R.bN)(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(w.Z.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(w.Z.WHEEL,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(w.Z.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,B.ZF)(this.viewport_)}if(t){for(var n in t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new ht(this,this.moveTolerance_),rt.Z)this.mapBrowserEventHandler_.addEventListener(rt.Z[n],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(w.Z.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(w.Z.WHEEL,this.boundHandleBrowserEvent_,!!at.bM&&{passive:!1});var o=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[(0,R.oL)(o,w.Z.KEYDOWN,this.handleBrowserEvent,this),(0,R.oL)(o,w.Z.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(w.Z.RESIZE,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},i.prototype.handleTileChange_=function(){this.render()},i.prototype.handleViewPropertyChanged_=function(){this.render()},i.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&((0,R.bN)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,R.bN)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,R.oL)(t,G.Z.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,R.oL)(t,w.Z.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},i.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(R.bN),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[(0,R.oL)(t,G.Z.PROPERTYCHANGE,this.render,this),(0,R.oL)(t,w.Z.CHANGE,this.render,this)]),this.render()},i.prototype.isRendered=function(){return!!this.frameState_},i.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},i.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,i=t.length;e<i;++e){var n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}},i.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},i.prototype.removeControl=function(t){return this.getControls().remove(t)},i.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},i.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},i.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},i.prototype.renderFrame_=function(t){var e=this,i=this.getSize(),n=this.getView(),r=this.frameState_,s=null;if(void 0!==i&&(0,ce.py)(i)&&n&&n.isDef()){var a=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=n.getState();s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,o.p8)(l.center,l.resolution,l.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:l,viewHints:a,wantedTiles:{}}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!(0,o.xb)(this.previousExtent_)&&!(0,o.fS)(s.extent,this.previousExtent_))&&(this.dispatchEvent(new et(ut.Z.MOVESTART,this,r)),this.previousExtent_=(0,o.YN)(this.previousExtent_)),this.previousExtent_&&!s.viewHints[0]&&!s.viewHints[1]&&!(0,o.fS)(s.extent,this.previousExtent_)&&(this.dispatchEvent(new et(ut.Z.MOVEEND,this,s)),(0,o.d9)(s.extent,this.previousExtent_))),this.dispatchEvent(new et(ut.Z.POSTRENDER,this,s)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((function(){e.postRenderTimeoutHandle_=void 0,e.handlePostRender()}),0))},i.prototype.setLayerGroup=function(t){this.set(ct,t)},i.prototype.setSize=function(t){this.set(pt,t)},i.prototype.setTarget=function(t){this.set(ft,t)},i.prototype.setView=function(t){this.set(dt,t)},i.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},i.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}},i}(h.ZP);var de=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const _e=function(t){function i(e){var i=t.call(this)||this,n=e.element;return!n||e.target||n.style.pointerEvents||(n.style.pointerEvents="auto"),i.element=n||null,i.target_=null,i.map_=null,i.listenerKeys=[],e.render&&(i.render=e.render),e.target&&i.setTarget(e.target),i}return de(i,t),i.prototype.disposeInternal=function(){(0,B.ZF)(this.element),t.prototype.disposeInternal.call(this)},i.prototype.getMap=function(){return this.map_},i.prototype.setMap=function(t){this.map_&&(0,B.ZF)(this.element);for(var i=0,n=this.listenerKeys.length;i<n;++i)(0,R.bN)(this.listenerKeys[i]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==e.Zn&&this.listenerKeys.push((0,R.oL)(t,ut.Z.POSTRENDER,this.render,this)),t.render())},i.prototype.render=function(t){},i.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},i}(h.ZP);var ge=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const ye=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this).ulElement_=document.createElement("ul"),i.collapsed_=void 0===n.collapsed||n.collapsed,i.userCollapsed_=i.collapsed_,i.overrideCollapsible_=void 0!==n.collapsible,i.collapsible_=void 0===n.collapsible||n.collapsible,i.collapsible_||(i.collapsed_=!1);var o=void 0!==n.className?n.className:"ol-attribution",r=void 0!==n.tipLabel?n.tipLabel:"Attributions",s=void 0!==n.expandClassName?n.expandClassName:o+"-expand",a=void 0!==n.collapseLabel?n.collapseLabel:"»",l=void 0!==n.collapseClassName?n.collapseClassName:o+"-collpase";"string"==typeof a?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=a,i.collapseLabel_.className=l):i.collapseLabel_=a;var h=void 0!==n.label?n.label:"i";"string"==typeof h?(i.label_=document.createElement("span"),i.label_.textContent=h,i.label_.className=s):i.label_=h;var u=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_,c=document.createElement("button");c.setAttribute("type","button"),c.title=r,c.appendChild(u),c.addEventListener(w.Z.CLICK,i.handleClick_.bind(i),!1);var p=o+" "+X.XV+" "+X.hg+(i.collapsed_&&i.collapsible_?" "+X.hN:"")+(i.collapsible_?"":" ol-uncollapsible"),f=i.element;return f.className=p,f.appendChild(i.ulElement_),f.appendChild(c),i.renderedAttributions_=[],i.renderedVisible_=!0,i}return ge(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},i=[],n=!0,o=t.layerStatesArray,r=0,s=o.length;r<s;++r){var a=o[r];if(M(a,t.viewState)){var l=a.layer.getSource();if(l){var h=l.getAttributions();if(h){var u=h(t);if(u)if(n=n&&!1!==l.getAttributionsCollapsible(),Array.isArray(u))for(var c=0,p=u.length;c<p;++c)u[c]in e||(i.push(u[c]),e[u[c]]=!0);else u in e||(i.push(u),e[u]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(n),i},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!(0,bt.fS)(e,this.renderedAttributions_)){(0,B.ep)(this.ulElement_);for(var n=0,o=e.length;n<o;++n){var r=document.createElement("li");r.innerHTML=e[n],this.ulElement_.appendChild(r)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle(X.hN),this.collapsed_?(0,B.$H)(this.collapseLabel_,this.label_):(0,B.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(_e);var ve=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const me=function(t){function e(e){var i=this,n=e||{};i=t.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this;var o=void 0!==n.className?n.className:"ol-rotate",r=void 0!==n.label?n.label:"⇧",s=void 0!==n.compassClassName?n.compassClassName:"ol-compass";i.label_=null,"string"==typeof r?(i.label_=document.createElement("span"),i.label_.className=s,i.label_.textContent=r):(i.label_=r,i.label_.classList.add(s));var a=n.tipLabel?n.tipLabel:"Reset rotation",l=document.createElement("button");l.className=o+"-reset",l.setAttribute("type","button"),l.title=a,l.appendChild(i.label_),l.addEventListener(w.Z.CLICK,i.handleClick_.bind(i),!1);var h=o+" "+X.XV+" "+X.hg,u=i.element;return u.className=h,u.appendChild(l),i.callResetNorth_=n.resetNorth?n.resetNorth:void 0,i.duration_=void 0!==n.duration?n.duration:250,i.autoHide_=void 0===n.autoHide||n.autoHide,i.rotation_=void 0,i.autoHide_&&i.element.classList.add(X.oj),i}return ve(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:At.Vv}):t.setRotation(0))}},e.prototype.render=function(t){var e=t.frameState;if(e){var i=e.viewState.rotation;if(i!=this.rotation_){var n="rotate("+i+"rad)";if(this.autoHide_){var o=this.element.classList.contains(X.oj);o||0!==i?o&&0!==i&&this.element.classList.remove(X.oj):this.element.classList.add(X.oj)}this.label_.style.transform=n}this.rotation_=i}},e}(_e);var xe=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ee=function(t){function e(e){var i=this,n=e||{};i=t.call(this,{element:document.createElement("div"),target:n.target})||this;var o=void 0!==n.className?n.className:"ol-zoom",r=void 0!==n.delta?n.delta:1,s=void 0!==n.zoomInClassName?n.zoomInClassName:o+"-in",a=void 0!==n.zoomOutClassName?n.zoomOutClassName:o+"-out",l=void 0!==n.zoomInLabel?n.zoomInLabel:"+",h=void 0!==n.zoomOutLabel?n.zoomOutLabel:"−",u=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",c=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=s,p.setAttribute("type","button"),p.title=u,p.appendChild("string"==typeof l?document.createTextNode(l):l),p.addEventListener(w.Z.CLICK,i.handleClick_.bind(i,r),!1);var f=document.createElement("button");f.className=a,f.setAttribute("type","button"),f.title=c,f.appendChild("string"==typeof h?document.createTextNode(h):h),f.addEventListener(w.Z.CLICK,i.handleClick_.bind(i,-r),!1);var d=o+" "+X.XV+" "+X.hg,_=i.element;return _.className=d,_.appendChild(p),_.appendChild(f),i.duration_=void 0!==n.duration?n.duration:250,i}return xe(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var i=e.getZoom();if(void 0!==i){var n=e.getConstrainedZoom(i+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:At.Vv})):e.setZoom(n)}}},e}(_e);var Ce=s(7588),Se=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Oe=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.delta_=n.delta?n.delta:1,i.duration_=void 0!==n.duration?n.duration:250,i}return Se(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==rt.Z.DBLCLICK){var i=t.originalEvent,n=t.map,o=t.coordinate,r=i.shiftKey?-this.delta_:this.delta_,s=n.getView();(0,Ce.FW)(s,r,o,this.duration_),i.preventDefault(),e=!0}return!e},e}(Ce.ZP);var we=s(8024),Te=s(6403),be=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ie=function(t){function i(i){var n=t.call(this,{stopDown:e.Dv})||this,o=i||{};n.kinetic_=o.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var r=o.condition?o.condition:(0,Te.$6)(Te.rM,Te.Xp);return n.condition_=o.onFocusOnly?(0,Te.$6)(Te.yZ,r):r,n.noKinetic_=!1,n}return be(i,t),i.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e,i,n=this.targetPointers,o=(0,we.S)(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(o[0],o[1]),this.lastCentroid){var r=[this.lastCentroid[0]-o[0],o[1]-this.lastCentroid[1]],s=t.map.getView();e=r,i=s.getResolution(),e[0]*=i,e[1]*=i,Z(r,s.getRotation()),s.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=o,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()},i.prototype.handleUpEvent=function(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),r=i.getCenterInternal(),s=e.getPixelFromCoordinateInternal(r),a=e.getCoordinateFromPixelInternal([s[0]-n*Math.cos(o),s[1]-n*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(a),duration:500,easing:At.Vv})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},i.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},i}(we.Z);var Pe=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Re=function(t){function i(i){var n=this,o=i||{};return(n=t.call(this,{stopDown:e.Dv})||this).condition_=o.condition?o.condition:Te.aj,n.lastAngle_=void 0,n.duration_=void 0!==o.duration?o.duration:250,n}return Pe(i,t),i.prototype.handleDragEvent=function(t){if((0,Te.QL)(t)){var e=t.map,i=e.getView();if(i.getConstraints().rotation!==Lt){var n=e.getSize(),o=t.pixel,r=Math.atan2(n[1]/2-o[1],o[0]-n[0]/2);if(void 0!==this.lastAngle_){var s=r-this.lastAngle_;i.adjustRotationInternal(-s)}this.lastAngle_=r}}},i.prototype.handleUpEvent=function(t){return!(0,Te.QL)(t)||(t.map.getView().endInteraction(this.duration_),!1)},i.prototype.handleDownEvent=function(t){return!(!(0,Te.QL)(t)||!(0,Te.v8)(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},i}(we.Z);var Le=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Me=function(t){function e(e){var i=t.call(this)||this;return i.geometry_=null,i.element_=document.createElement("div"),i.element_.style.position="absolute",i.element_.style.pointerEvents="auto",i.element_.className="ol-box "+e,i.map_=null,i.startPixel_=null,i.endPixel_=null,i}return Le(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(t[0],e[0])+i,n.top=Math.min(t[1],e[1])+i,n.width=Math.abs(e[0]-t[0])+i,n.height=Math.abs(e[1]-t[1])+i},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new oe([i])},e.prototype.getGeometry=function(){return this.geometry_},e}(t.Z);var Ae=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Fe=function(t){function e(e,i,n){var o=t.call(this,e)||this;return o.coordinate=i,o.mapBrowserEvent=n,o}return Ae(e,t),e}(z.ZP);const Ze=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.box_=new Me(n.className||"ol-dragbox"),i.minArea_=void 0!==n.minArea?n.minArea:64,n.onBoxEnd&&(i.onBoxEnd=n.onBoxEnd),i.startPixel_=null,i.condition_=n.condition?n.condition:Te.v8,i.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:i.defaultBoxEndCondition,i}return Ae(e,t),e.prototype.defaultBoxEndCondition=function(t,e,i){var n=i[0]-e[0],o=i[1]-e[1];return n*n+o*o>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Fe("boxdrag",t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Fe(e?"boxend":"boxcancel",t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Fe("boxstart",t.coordinate,t)),!0)},e.prototype.onBoxEnd=function(t){},e}(we.Z);var De=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const ke=function(t){function e(e){var i=this,n=e||{},o=n.condition?n.condition:Te.vY;return(i=t.call(this,{condition:o,className:n.className||"ol-dragzoom",minArea:n.minArea})||this).duration_=void 0!==n.duration?n.duration:200,i.out_=void 0!==n.out&&n.out,i}return De(e,t),e.prototype.onBoxEnd=function(t){var e=this.getMap(),i=e.getView(),n=e.getSize(),r=this.getGeometry().getExtent();if(this.out_){var s=i.calculateExtentInternal(n),a=(0,o.ZT)([e.getPixelFromCoordinateInternal((0,o.hC)(r)),e.getPixelFromCoordinateInternal((0,o.Xv)(r))]),l=i.getResolutionForExtentInternal(a,n);(0,o.H9)(s,1/l),r=s}var h=i.getConstrainedResolution(i.getResolutionForExtentInternal(r,n)),u=i.getConstrainedCenter((0,o.qg)(r),h);i.animateInternal({resolution:h,center:u,duration:this.duration_,easing:At.Vv})},e}(Ze);var je=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ne=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.defaultCondition_=function(t){return(0,Te.rM)(t)&&(0,Te.TN)(t)},i.condition_=void 0!==n.condition?n.condition:i.defaultCondition_,i.duration_=void 0!==n.duration?n.duration:100,i.pixelDelta_=void 0!==n.pixelDelta?n.pixelDelta:128,i}return je(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==w.Z.KEYDOWN){var i=t.originalEvent,n=i.keyCode;if(this.condition_(t)&&(40==n||37==n||39==n||38==n)){var o=t.map.getView(),r=o.getResolution()*this.pixelDelta_,s=0,a=0;40==n?a=-r:37==n?s=-r:39==n?s=r:a=r;var l=[s,a];Z(l,o.getRotation()),(0,Ce.Cv)(o,l,this.duration_),i.preventDefault(),e=!0}}return!e},e}(Ce.ZP);var Ge=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const ze=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.condition_=n.condition?n.condition:Te.TN,i.delta_=n.delta?n.delta:1,i.duration_=void 0!==n.duration?n.duration:100,i}return Ge(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==w.Z.KEYDOWN||t.type==w.Z.KEYPRESS){var i=t.originalEvent,n=i.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){var o=t.map,r=n=="+".charCodeAt(0)?this.delta_:-this.delta_,s=o.getView();(0,Ce.FW)(s,r,void 0,this.duration_),i.preventDefault(),e=!0}}return!e},e}(Ce.ZP),We=function(){function t(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;i>0&&this.points_[i+2]>t;)i-=3;var n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;var o=this.points_[e]-this.points_[i],r=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(r,o),this.initialVelocity_=Math.sqrt(o*o+r*r)/n,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}();var Ye=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xe="trackpad";const Ke=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,n)||this).totalDelta_=0,i.lastDelta_=0,i.maxDelta_=void 0!==n.maxDelta?n.maxDelta:1,i.duration_=void 0!==n.duration?n.duration:250,i.timeout_=void 0!==n.timeout?n.timeout:80,i.useAnchor_=void 0===n.useAnchor||n.useAnchor,i.constrainResolution_=void 0!==n.constrainResolution&&n.constrainResolution;var o=n.condition?n.condition:Te.Bx;return i.condition_=n.onFocusOnly?(0,Te.$6)(Te.yZ,o):o,i.lastAnchor_=null,i.startTime_=void 0,i.timeoutId_,i.mode_=void 0,i.trackpadEventGap_=400,i.trackpadTimeoutId_,i.deltaPerZoom_=300,i}return Ye(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==w.Z.WHEEL)return!0;var e,i=t.map,n=t.originalEvent;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==w.Z.WHEEL&&(e=n.deltaY,at.V&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=at.MP),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var o=Date.now();void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?Xe:"wheel");var r=i.getView();if(this.mode_===Xe&&!r.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(r.getAnimating()&&r.cancelAnimations(),r.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),r.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=e;var s=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),s),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var i=-(0,C.uZ)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),(0,Ce.FW)(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(Ce.ZP);var Be=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ve=function(t){function i(i){var n=this,o=i||{},r=o;return r.stopDown||(r.stopDown=e.Dv),(n=t.call(this,r)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==o.threshold?o.threshold:.3,n.duration_=void 0!==o.duration?o.duration:250,n}return Be(i,t),i.prototype.handleDragEvent=function(t){var e=0,i=this.targetPointers[0],n=this.targetPointers[1],o=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){var r=o-this.lastAngle_;this.rotationDelta_+=r,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=r}this.lastAngle_=o;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==Lt){var l=s.getViewport().getBoundingClientRect(),h=(0,we.S)(this.targetPointers);h[0]-=l.left,h[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(h),this.rotating_&&(s.render(),a.adjustRotationInternal(e,this.anchor_))}},i.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))},i.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},i}(we.Z);var Ue=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const qe=function(t){function i(i){var n=this,o=i||{},r=o;return r.stopDown||(r.stopDown=e.Dv),(n=t.call(this,r)||this).anchor_=null,n.duration_=void 0!==o.duration?o.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return Ue(i,t),i.prototype.handleDragEvent=function(t){var e=1,i=this.targetPointers[0],n=this.targetPointers[1],o=i.clientX-n.clientX,r=i.clientY-n.clientY,s=Math.sqrt(o*o+r*r);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e);var h=a.getViewport().getBoundingClientRect(),u=(0,we.S)(this.targetPointers);u[0]-=h.left,u[1]-=h.top,this.anchor_=a.getCoordinateFromPixelInternal(u),a.render(),l.adjustResolutionInternal(e,this.anchor_)},i.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),i=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,i),!1}return!0},i.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},i}(we.Z);var He=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Je=function(t){function e(e){return(e=(0,E.f0)({},e)).controls||(e.controls=function(t){var e={},i=new q.Z;return(void 0===e.zoom||e.zoom)&&i.push(new Ee(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&i.push(new me(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&i.push(new ye(e.attributionOptions)),i}()),e.interactions||(e.interactions=function(t){var e={onFocusOnly:!0}||{},i=new q.Z,n=new We(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new Re),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new Oe({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new Ie({onFocusOnly:e.onFocusOnly,kinetic:n})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new Ve),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new qe({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new Ne),i.push(new ze({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new Ke({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new ke({duration:e.zoomDuration})),i}()),t.call(this,e)||this}return He(e,t),e.prototype.createRenderer=function(){return new U(this)},e}(fe);var $e=s(1273);const Qe="preload",ti="useInterimTilesOnError";var ei=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const ii=function(t){function e(e){var i=this,n=e||{},o=(0,E.f0)({},n);return delete o.preload,delete o.useInterimTilesOnError,(i=t.call(this,o)||this).setPreload(void 0!==n.preload?n.preload:0),i.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),i}return ei(e,t),e.prototype.getPreload=function(){return this.get(Qe)},e.prototype.setPreload=function(t){this.set(Qe,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(ti)},e.prototype.setUseInterimTilesOnError=function(t){this.set(ti,t)},e}(A);var ni=s(1256),oi=s(6834),ri=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const si=function(t){function e(e){var i=t.call(this)||this;return i.boundHandleImageChange_=i.handleImageChange_.bind(i),i.layer_=e,i.declutterExecutorGroup=null,i}return ri(e,t),e.prototype.getFeatures=function(t){return(0,i.O3)()},e.prototype.prepareFrame=function(t){return(0,i.O3)()},e.prototype.renderFrame=function(t,e){return(0,i.O3)()},e.prototype.loadedTileCallback=function(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i},e.prototype.createLoadedTileFinder=function(t,e,i){return function(n,o){var r=this.loadedTileCallback.bind(this,i,n);return t.forEachLoadedTile(e,n,o,r)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o){},e.prototype.getDataAtPixel=function(t,e,n){return(0,i.O3)()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===ni.Z.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=ni.Z.LOADED&&e!=ni.Z.ERROR&&t.addEventListener(w.Z.CHANGE,this.boundHandleImageChange_),e==ni.Z.IDLE&&(t.load(),e=t.getState()),e==ni.Z.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==P&&t.changed()},e}(oi.Z);var ai=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const li=function(t){function e(e){var i=t.call(this,e)||this;return i.container=null,i.renderedResolution,i.tempTransform=(0,n.Ue)(),i.pixelTransform=(0,n.Ue)(),i.inversePixelTransform=(0,n.Ue)(),i.context=null,i.containerReused=!1,i}return ai(e,t),e.prototype.useContainer=function(t,e,i){var n,o,r=this.getLayer().getClassName();if(t&&""===t.style.opacity&&t.className===r&&(a=t.firstElementChild)instanceof HTMLCanvasElement&&(o=a.getContext("2d")),!o||0!==o.canvas.width&&o.canvas.style.transform!==e?this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1):(this.container=t,this.context=o,this.containerReused=!0),!this.container){(n=document.createElement("div")).className=r;var s=n.style;s.position="absolute",s.width="100%",s.height="100%";var a=(o=(0,B.E4)()).canvas;n.appendChild(a),(s=a.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=n,this.context=o}},e.prototype.clip=function(t,e,i){var r=e.pixelRatio,s=e.size[0]*r/2,a=e.size[1]*r/2,l=e.viewState.rotation,h=(0,o.rL)(i),u=(0,o.Xv)(i),c=(0,o.w$)(i),p=(0,o.hC)(i);(0,n.nn)(e.coordinateToPixelTransform,h),(0,n.nn)(e.coordinateToPixelTransform,u),(0,n.nn)(e.coordinateToPixelTransform,c),(0,n.nn)(e.coordinateToPixelTransform,p),t.save(),(0,K.qs)(t,-l,s,a),t.beginPath(),t.moveTo(h[0]*r,h[1]*r),t.lineTo(u[0]*r,u[1]*r),t.lineTo(c[0]*r,c[1]*r),t.lineTo(p[0]*r,p[1]*r),t.clip(),(0,K.qs)(t,l,s,a)},e.prototype.clipUnrotated=function(t,e,i){var r=(0,o.rL)(i),s=(0,o.Xv)(i),a=(0,o.w$)(i),l=(0,o.hC)(i);(0,n.nn)(e.coordinateToPixelTransform,r),(0,n.nn)(e.coordinateToPixelTransform,s),(0,n.nn)(e.coordinateToPixelTransform,a),(0,n.nn)(e.coordinateToPixelTransform,l);var h=this.inversePixelTransform;(0,n.nn)(h,r),(0,n.nn)(h,s),(0,n.nn)(h,a),(0,n.nn)(h,l),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,i){var n=this.getLayer();if(n.hasListener(t)){var o=new Y(t,this.inversePixelTransform,i,e);n.dispatchEvent(o)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_("prerender",t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_("postrender",t,e)},e.prototype.getRenderTransform=function(t,e,i,o,r,s,a){var l=r/2,h=s/2,u=o/e,c=-u,p=-t[0]+a,f=-t[1];return(0,n.qC)(this.tempTransform,l,h,u,c,-i,p,f)},e.prototype.getDataAtPixel=function(t,e,i){var r,s=(0,n.nn)(this.inversePixelTransform,t.slice()),a=this.context,l=this.getLayer().getExtent();if(l){var h=(0,n.nn)(e.pixelToCoordinateTransform,t.slice());if(!(0,o.b8)(l,h))return null}try{var u=Math.round(s[0]),c=Math.round(s[1]),p=document.createElement("canvas"),f=p.getContext("2d");p.width=1,p.height=1,f.clearRect(0,0,1,1),f.drawImage(a.canvas,u,c,1,1,0,0,1,1),r=f.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:r}return 0===r[3]?null:r},e}(si);var hi=function(){function t(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function ui(t,e,i,n,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=i,o.maxY=n,o):new hi(t,e,i,n)}const ci=hi;var pi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fi=function(t){function e(e){var i=t.call(this,e)||this;return i.extentChanged=!0,i.renderedExtent_=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.newTiles_=!1,i.tmpExtent=(0,o.lJ)(),i.tmpTileRange_=new ci(0,0,0,0),i}return pi(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return 2==i||4==i||3==i&&!n},e.prototype.getTile=function(t,e,i,n){var o=n.pixelRatio,r=n.viewState.projection,s=this.getLayer(),a=s.getSource().getTile(t,e,i,o,r);return 3==a.getState()&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.newTiles_=!0):a.setState(2)),this.isDrawableTile(a)||(a=a.getInterimTile()),a},e.prototype.loadedTileCallback=function(e,i,n){return!!this.isDrawableTile(n)&&t.prototype.loadedTileCallback.call(this,e,i,n)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var r=t.layerStatesArray[t.layerIndex],s=t.viewState,a=s.projection,l=s.resolution,h=s.center,u=s.rotation,c=t.pixelRatio,p=this.getLayer(),f=p.getSource(),d=f.getRevision(),_=f.getTileGridForProjection(a),g=_.getZForResolution(l,f.zDirection),y=_.getResolution(g),v=t.extent,m=r.extent&&(0,Ot.dY)(r.extent,a);m&&(v=(0,o.Ed)(v,(0,Ot.dY)(r.extent,a)));var x=f.getTilePixelRatio(c),C=Math.round(t.size[0]*x),S=Math.round(t.size[1]*x);if(u){var O=Math.round(Math.sqrt(C*C+S*S));C=O,S=O}var w=y*C/2/x,T=y*S/2/x,b=[h[0]-w,h[1]-T,h[0]+w,h[1]+T],I=_.getTileRangeForExtentAndZ(v,g),P={};P[g]={};var R=this.createLoadedTileFinder(f,a,P),L=this.tmpExtent,M=this.tmpTileRange_;this.newTiles_=!1;for(var A=I.minX;A<=I.maxX;++A)for(var F=I.minY;F<=I.maxY;++F){var Z=this.getTile(g,A,F,t);if(this.isDrawableTile(Z)){var D=(0,i.sq)(this);if(2==Z.getState()){P[g][Z.tileCoord.toString()]=Z;var k=Z.inTransition(D);this.newTiles_||!k&&-1!==this.renderedTiles.indexOf(Z)||(this.newTiles_=!0)}if(1===Z.getAlpha(D,t.time))continue}var j=_.getTileCoordChildTileRange(Z.tileCoord,M,L),N=!1;j&&(N=R(g+1,j)),N||_.forEachTileCoordParentTileRange(Z.tileCoord,R,M,L)}var G=y/l;(0,n.qC)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/x,1/x,u,-C/2,-S/2);var z=(0,K.QP)(this.pixelTransform);this.useContainer(e,z,r.opacity);var W=this.context,Y=W.canvas;(0,n.nb)(this.inversePixelTransform,this.pixelTransform),(0,n.qC)(this.tempTransform,C/2,S/2,G,G,0,-C/2,-S/2),Y.width!=C||Y.height!=S?(Y.width=C,Y.height=S):this.containerReused||W.clearRect(0,0,C,S),m&&this.clipUnrotated(W,t,m),(0,E.f0)(W,f.getContextOptions()),this.preRender(W,t),this.renderedTiles.length=0;var X,B,V,U=Object.keys(P).map(Number);U.sort(bt.kK),1!==r.opacity||this.containerReused&&!f.getOpaque(t.viewState.projection)?(X=[],B=[]):U=U.reverse();for(var q=U.length-1;q>=0;--q){var H=U[q],J=f.getTilePixelSize(H,c,a),$=_.getResolution(H)/y,Q=J[0]*$*G,tt=J[1]*$*G,et=_.getTileCoordForCoordAndZ((0,o.rL)(b),H),it=_.getTileCoordExtent(et),nt=(0,n.nn)(this.tempTransform,[x*(it[0]-b[0])/y,x*(b[3]-it[3])/y]),ot=x*f.getGutterForProjection(a),rt=P[H];for(var st in rt){var at=(Z=rt[st]).tileCoord,lt=nt[0]-(et[1]-at[1])*Q,ht=Math.round(lt+Q),ut=nt[1]-(et[2]-at[2])*tt,ct=Math.round(ut+tt),pt=ht-(A=Math.round(lt)),ft=ct-(F=Math.round(ut)),dt=g===H;if(!(k=dt&&1!==Z.getAlpha((0,i.sq)(this),t.time)))if(X){W.save(),V=[A,F,A+pt,F,A+pt,F+ft,A,F+ft];for(var _t=0,gt=X.length;_t<gt;++_t)if(g!==H&&H<B[_t]){var yt=X[_t];W.beginPath(),W.moveTo(V[0],V[1]),W.lineTo(V[2],V[3]),W.lineTo(V[4],V[5]),W.lineTo(V[6],V[7]),W.moveTo(yt[6],yt[7]),W.lineTo(yt[4],yt[5]),W.lineTo(yt[2],yt[3]),W.lineTo(yt[0],yt[1]),W.clip()}X.push(V),B.push(H)}else W.clearRect(A,F,pt,ft);this.drawTileImage(Z,t,A,F,pt,ft,ot,dt,r.opacity),X&&!k&&W.restore(),this.renderedTiles.push(Z),this.updateUsedTiles(t.usedTiles,f,Z)}}return this.renderedRevision=d,this.renderedResolution=y,this.extentChanged=!this.renderedExtent_||!(0,o.fS)(this.renderedExtent_,b),this.renderedExtent_=b,this.renderedPixelRatio=c,this.renderedProjection=a,this.manageTilePyramid(t,f,_,c,a,v,g,p.getPreload()),this.scheduleExpireCache(t,f),this.postRender(W,t),r.extent&&W.restore(),z!==Y.style.transform&&(Y.style.transform=z),this.container},e.prototype.drawTileImage=function(t,e,n,o,r,s,a,l,h){var u=this.getTileImage(t);if(u){var c=(0,i.sq)(this),p=l?t.getAlpha(c,e.time):1,f=h*p,d=f!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(u,a,a,u.width-2*a,u.height-2*a,n,o,r,s),d&&this.context.restore(),1!==p?e.animate=!0:l&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var o=(0,i.sq)(t);o in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[o])}.bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n){var o=(0,i.sq)(e);o in t||(t[o]={}),t[o][n.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,n,o,r,s,a,l,h){var u=(0,i.sq)(e);u in t.wantedTiles||(t.wantedTiles[u]={});var c,p,f,d,_,g,y=t.wantedTiles[u],v=t.tileQueue,m=0;for(g=n.getMinZoom();g<=a;++g)for(p=n.getTileRangeForExtentAndZ(s,g,p),f=n.getResolution(g),d=p.minX;d<=p.maxX;++d)for(_=p.minY;_<=p.maxY;++_)a-g<=l?(++m,0==(c=e.getTile(g,d,_,o,r)).getState()&&(y[c.getKey()]=!0,v.isKeyQueued(c.getKey())||v.enqueue([c,u,n.getTileCoordCenter(c.tileCoord),f])),void 0!==h&&h(c)):e.useTile(g,d,_,r);e.updateCacheSize(m,r)},e}(li);fi.prototype.getLayer;const di=fi;var _i=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const gi=function(t){function e(e){return t.call(this,e)||this}return _i(e,t),e.prototype.createRenderer=function(){return new di(this)},e}(ii);var yi=s(2582),vi=s.n(yi),mi=s(1219),xi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ei="renderOrder";const Ci=function(t){function e(e){var i=this,n=e||{},o=(0,E.f0)({},n);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,(i=t.call(this,o)||this).declutter_=void 0!==n.declutter&&n.declutter,i.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(n.style),i.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,i.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,i}return xi(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(Ei)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new(vi())(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(Ei,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:mi.yF,this.styleFunction_=null===t?void 0:(0,mi.J$)(this.style_),this.changed()},e}(A);var Si={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Oi=[Si.FILL],wi=[Si.STROKE],Ti=[Si.BEGIN_PATH],bi=[Si.CLOSE_PATH];const Ii=Si;var Pi=s(4178);const Ri=function(){function t(){}return t.prototype.drawCustom=function(t,e,i){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}();var Li=s(5120),Mi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ai=function(t){function e(e,i,n,o){var r=t.call(this)||this;return r.tolerance=e,r.maxExtent=i,r.pixelRatio=o,r.maxLineWidth=0,r.resolution=n,r.beginGeometryInstruction1_=null,r.beginGeometryInstruction2_=null,r.bufferedMaxExtent_=null,r.instructions=[],r.coordinates=[],r.tmpCoordinate_=[],r.hitDetectionInstructions=[],r.state={},r}return Mi(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatPointCoordinates=function(t,e){for(var i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,r=this.coordinates,s=r.length,a=0,l=t.length;a<l;a+=e)n[0]=t[a],n[1]=t[a+1],(0,o.b8)(i,n)&&(r[s++]=n[0],r[s++]=n[1]);return s},e.prototype.appendFlatLineCoordinates=function(t,e,i,n,r,s){var a=this.coordinates,l=a.length,h=this.getBufferedMaxExtent();s&&(e+=n);var u,c,p,f=t[e],d=t[e+1],_=this.tmpCoordinate_,g=!0;for(u=e+n;u<i;u+=n)_[0]=t[u],_[1]=t[u+1],(p=(0,o.pX)(h,_))!==c?(g&&(a[l++]=f,a[l++]=d,g=!1),a[l++]=_[0],a[l++]=_[1]):p===Pi.Z.INTERSECTING?(a[l++]=_[0],a[l++]=_[1],g=!1):g=!0,f=_[0],d=_[1],c=p;return(r&&g||u===e+n)&&(a[l++]=f,a[l++]=d),l},e.prototype.drawCustomCoordinates_=function(t,e,i,n,o){for(var r=0,s=i.length;r<s;++r){var a=i[r],l=this.appendFlatLineCoordinates(t,e,a,n,!1,!1);o.push(l),e=a}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var n,o,r,s,a,l=t.getType(),h=t.getStride(),u=this.coordinates.length;if(l==mt.Z.MULTI_POLYGON){n=t.getOrientedFlatCoordinates(),s=[];var c=t.getEndss();a=0;for(var p=0,f=c.length;p<f;++p){var d=[];a=this.drawCustomCoordinates_(n,a,c[p],h,d),s.push(d)}this.instructions.push([Ii.CUSTOM,u,s,t,i,Xt])}else l==mt.Z.POLYGON||l==mt.Z.MULTI_LINE_STRING?(r=[],n=l==mt.Z.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(n,0,t.getEnds(),h,r),this.instructions.push([Ii.CUSTOM,u,r,t,i,Yt])):l==mt.Z.LINE_STRING||l==mt.Z.CIRCLE?(n=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(n,0,n.length,h,!1,!1),this.instructions.push([Ii.CUSTOM,u,o,t,i,Wt])):l==mt.Z.MULTI_POINT?(n=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(n,h))>u&&this.instructions.push([Ii.CUSTOM,u,o,t,i,Wt])):l==mt.Z.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),o=this.coordinates.length,this.instructions.push([Ii.CUSTOM,u,o,t,i]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[Ii.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Ii.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,n,o=e.length,r=-1;for(t=0;t<o;++t)(n=(i=e[t])[0])==Ii.END_GEOMETRY?r=t:n==Ii.BEGIN_GEOMETRY&&(i[2]=t,(0,bt.FZ)(this.hitDetectionInstructions,r,t),r=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=(0,Li.y)(n||K.bL)}else i.fillStyle=void 0;if(e){var o=e.getColor();i.strokeStyle=(0,Li.y)(o||K.Tx);var r=e.getLineCap();i.lineCap=void 0!==r?r:K.mb;var s=e.getLineDash();i.lineDash=s?s.slice():K.X9;var a=e.getLineDashOffset();i.lineDashOffset=a||K.He;var l=e.getLineJoin();i.lineJoin=void 0!==l?l:K.rc;var h=e.getWidth();i.lineWidth=void 0!==h?h:K.yC;var u=e.getMiterLimit();i.miterLimit=void 0!==u?u:K.V4,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,i=[Ii.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[Ii.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,n=t.lineCap,o=t.lineDash,r=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||o!=t.currentLineDash&&!(0,bt.fS)(t.currentLineDash,o)||t.currentLineDashOffset!=r||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=o,t.currentLineDashOffset=r,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=l)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[Ii.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,o.d9)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;(0,o.f3)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(Ri);var Fi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Zi=function(t){function e(e,i,n,o){var r=t.call(this,e,i,n,o)||this;return r.hitDetectionImage_=null,r.image_=null,r.imagePixelRatio_=void 0,r.anchorX_=void 0,r.anchorY_=void 0,r.height_=void 0,r.opacity_=void 0,r.originX_=void 0,r.originY_=void 0,r.rotateWithView_=void 0,r.rotation_=void 0,r.scale_=void 0,r.width_=void 0,r.declutterImageWithText_=void 0,r}return Fi(e,t),e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,r=this.appendFlatPointCoordinates(i,n);this.instructions.push([Ii.DRAW_IMAGE,o,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ii.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,r=this.appendFlatPointCoordinates(i,n);this.instructions.push([Ii.DRAW_IMAGE,o,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ii.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),n=t.getSize(),o=t.getHitDetectionImage(),r=t.getImage(this.pixelRatio),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=o,this.image_=r,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterImageWithText_=e},e}(Ai);var Di=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const ki=function(t){function e(e,i,n,o){return t.call(this,e,i,n,o)||this}return Di(e,t),e.prototype.drawFlatCoordinates_=function(t,e,i,n){var o=this.coordinates.length,r=this.appendFlatLineCoordinates(t,e,i,n,!1,!1),s=[Ii.MOVE_TO_LINE_TO,o,r];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},e.prototype.drawLineString=function(t,e){var i=this.state,n=i.strokeStyle,o=i.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Ii.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Ti);var r=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(r,0,r.length,s),this.hitDetectionInstructions.push(wi),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,n=i.strokeStyle,o=i.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Ii.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Ti);for(var r=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),l=0,h=0,u=r.length;h<u;++h)l=this.drawFlatCoordinates_(s,l,r[h],a);this.hitDetectionInstructions.push(wi),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(wi),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(wi),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(Ti)},e}(Ai);var ji=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ni=function(t){function e(e,i,n,o){return t.call(this,e,i,n,o)||this}return ji(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,i,n){var o=this.state,r=void 0!==o.fillStyle,s=void 0!==o.strokeStyle,a=i.length;this.instructions.push(Ti),this.hitDetectionInstructions.push(Ti);for(var l=0;l<a;++l){var h=i[l],u=this.coordinates.length,c=this.appendFlatLineCoordinates(t,e,h,n,!0,!s),p=[Ii.MOVE_TO_LINE_TO,u,c];this.instructions.push(p),this.hitDetectionInstructions.push(p),s&&(this.instructions.push(bi),this.hitDetectionInstructions.push(bi)),e=h}return r&&(this.instructions.push(Oi),this.hitDetectionInstructions.push(Oi)),s&&(this.instructions.push(wi),this.hitDetectionInstructions.push(wi)),e},e.prototype.drawCircle=function(t,e){var i=this.state,n=i.fillStyle,o=i.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Ii.SET_FILL_STYLE,K.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Ii.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var r=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatLineCoordinates(r,0,r.length,s,!1,!1);var l=[Ii.CIRCLE,a];this.instructions.push(Ti,l),this.hitDetectionInstructions.push(Ti,l),void 0!==i.fillStyle&&(this.instructions.push(Oi),this.hitDetectionInstructions.push(Oi)),void 0!==i.strokeStyle&&(this.instructions.push(wi),this.hitDetectionInstructions.push(wi)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,n=i.fillStyle,o=i.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Ii.SET_FILL_STYLE,K.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Ii.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var r=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,r,a),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,n=i.fillStyle,o=i.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Ii.SET_FILL_STYLE,K.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Ii.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var r=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),l=0,h=0,u=r.length;h<u;++h)l=this.drawFlatCoordinatess_(s,l,r[h],a);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var i=this.coordinates,n=0,o=i.length;n<o;++n)i[n]=Gt(i[n],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(Ai);var Gi=s(8288);function zi(t,e,i,n,o){var r,s,a,l,h,u,c,p,f,d=i,_=i,g=0,y=0,v=i;for(r=i;r<n;r+=o){var m=e[r],x=e[r+1];void 0!==l&&(p=m-l,f=x-h,a=Math.sqrt(p*p+f*f),void 0!==u&&(y+=s,Math.acos((u*p+c*f)/(s*a))>t&&(y>g&&(g=y,d=v,_=r),y=0,v=r-o)),s=a,u=p,c=f),l=m,h=x}return(y+=a)>g?[v,r]:[d,_]}var Wi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yi={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Xi={Circle:Ni,Default:Ai,Image:Zi,LineString:ki,Polygon:Ni,Text:function(t){function e(e,i,n,o){var r=t.call(this,e,i,n,o)||this;return r.labels_=null,r.text_="",r.textOffsetX_=0,r.textOffsetY_=0,r.textRotateWithView_=void 0,r.textRotation_=0,r.textFillState_=null,r.fillStates={},r.textStrokeState_=null,r.strokeStates={},r.textState_={},r.textStates={},r.textKey_="",r.fillKey_="",r.strokeKey_="",r.declutterImageWithText_=void 0,r}return Wi(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var i=this.textFillState_,n=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(i||n)){var s=this.coordinates,a=s.length,l=t.getType(),h=null,u=t.getStride();if(r.placement!==Gi.Z.LINE||l!=mt.Z.LINE_STRING&&l!=mt.Z.MULTI_LINE_STRING&&l!=mt.Z.POLYGON&&l!=mt.Z.MULTI_POLYGON){var c=r.overflow?null:[];switch(l){case mt.Z.POINT:case mt.Z.MULTI_POINT:h=t.getFlatCoordinates();break;case mt.Z.LINE_STRING:h=t.getFlatMidpoint();break;case mt.Z.CIRCLE:h=t.getCenter();break;case mt.Z.MULTI_LINE_STRING:h=t.getFlatMidpoints(),u=2;break;case mt.Z.POLYGON:h=t.getFlatInteriorPoint(),r.overflow||c.push(h[2]/this.resolution),u=3;break;case mt.Z.MULTI_POLYGON:var p=t.getFlatInteriorPoints();for(h=[],C=0,S=p.length;C<S;C+=3)r.overflow||c.push(p[C+2]/this.resolution),h.push(p[C],p[C+1]);if(0===h.length)return;u=2}if((R=this.appendFlatPointCoordinates(h,u))===a)return;this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var f=r.padding;if(f!=K.oB&&(r.scale[0]<0||r.scale[1]<0)){var d=r.padding[0],_=r.padding[1],g=r.padding[2],y=r.padding[3];r.scale[0]<0&&(_=-_,y=-y),r.scale[1]<0&&(d=-d,g=-g),f=[d,_,g,y]}var v=this.pixelRatio;this.instructions.push([Ii.DRAW_IMAGE,a,R,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,f==K.oB?K.oB:f.map((function(t){return t*v})),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]);var m=1/v;this.hitDetectionInstructions.push([Ii.DRAW_IMAGE,a,R,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,this.declutterImageWithText_,f,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]),this.endGeometry(e)}else{if(!(0,o.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;var x=void 0;if(h=t.getFlatCoordinates(),l==mt.Z.LINE_STRING)x=[h.length];else if(l==mt.Z.MULTI_LINE_STRING)x=t.getEnds();else if(l==mt.Z.POLYGON)x=t.getEnds().slice(0,1);else if(l==mt.Z.MULTI_POLYGON){var E=t.getEndss();x=[];for(var C=0,S=E.length;C<S;++C)x.push(E[C][0])}this.beginGeometry(t,e);for(var O=r.textAlign,w=0,T=void 0,b=0,I=x.length;b<I;++b){if(null==O){var P=zi(r.maxAngle,h,w,x[b],u);w=P[0],T=P[1]}else T=x[b];for(C=w;C<T;C+=u)s.push(h[C],h[C+1]);var R=s.length;w=x[b],this.drawChars_(a,R),a=R}this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var o=this.textKey_;o in this.textStates||(this.textStates[o]={font:e.font,textAlign:e.textAlign||K.PH,textBaseline:e.textBaseline||K.ru,scale:e.scale});var r=this.fillKey_;i&&(r in this.fillStates||(this.fillStates[r]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,e){var i=this.textStrokeState_,n=this.textState_,o=this.strokeKey_,r=this.textKey_,s=this.fillKey_;this.saveTextStates_();var a=this.pixelRatio,l=Yi[n.textBaseline],h=this.textOffsetY_*a,u=this.text_,c=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([Ii.DRAW_CHARS,t,e,l,n.overflow,s,n.maxAngle,a,h,o,c*a,u,r,1]),this.hitDetectionInstructions.push([Ii.DRAW_CHARS,t,e,l,n.overflow,s,n.maxAngle,1,h,o,c,u,r,1/a])},e.prototype.setTextStyle=function(t,e){var n,o,r;if(t){var s=t.getFill();s?((o=this.textFillState_)||(o={},this.textFillState_=o),o.fillStyle=(0,Li.y)(s.getColor()||K.bL)):(o=null,this.textFillState_=o);var a=t.getStroke();if(a){(r=this.textStrokeState_)||(r={},this.textStrokeState_=r);var l=a.getLineDash(),h=a.getLineDashOffset(),u=a.getWidth(),c=a.getMiterLimit();r.lineCap=a.getLineCap()||K.mb,r.lineDash=l?l.slice():K.X9,r.lineDashOffset=void 0===h?K.He:h,r.lineJoin=a.getLineJoin()||K.rc,r.lineWidth=void 0===u?K.yC:u,r.miterLimit=void 0===c?K.V4:c,r.strokeStyle=(0,Li.y)(a.getColor()||K.Tx)}else r=null,this.textStrokeState_=r;n=this.textState_;var p=t.getFont()||K.Df;(0,K.Qx)(p);var f=t.getScaleArray();n.overflow=t.getOverflow(),n.font=p,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.textBaseline=t.getTextBaseline()||K.ru,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||K.oB,n.scale=void 0===f?[1,1]:f;var d=t.getOffsetX(),_=t.getOffsetY(),g=t.getRotateWithView(),y=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===d?0:d,this.textOffsetY_=void 0===_?0:_,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===y?0:y,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:(0,i.sq)(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.textBaseline||"?"),this.fillKey_=o?"string"==typeof o.fillStyle?o.fillStyle:"|"+(0,i.sq)(o.fillStyle):""}else this.text_="";this.declutterImageWithText_=e},e}(Ai)};const Ki=function(){function t(t,e,i,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}return t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var i=this.buildersByZIndex_[e];for(var n in i){var o=i[n].finish();t[e][n]=o}}return t},t.prototype.getBuilder=function(t,e){var i=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[i];void 0===n&&(n={},this.buildersByZIndex_[i]=n);var o=n[e];return void 0===o&&(o=new(0,Xi[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=o),o},t}(),Bi="Circle",Vi="Default",Ui="Image",qi="LineString",Hi="Polygon",Ji="Text";var $i=s(7882);function Qi(t,e,i,n,o,r,s,a,l,h,u,c){var p=t[e],f=t[e+1],d=0,_=0,g=0,y=0;function v(){d=p,_=f,p=t[e+=n],f=t[e+1],y+=g,g=Math.sqrt((p-d)*(p-d)+(f-_)*(f-_))}do{v()}while(e<i-n&&y+g<r);for(var m=(r-y)/g,x=(0,C.t7)(d,p,m),E=(0,C.t7)(_,f,m),S=e-n,O=y,w=r+a*l(h,o,u);e<i-n&&y+g<w;)v();m=(w-y)/g;var T,b=(0,C.t7)(d,p,m),I=(0,C.t7)(_,f,m);if(c){var P=[x,E,b,I];(0,$i.U1)(P,0,4,2,c,P,P),T=P[0]>P[2]}else T=x>b;var R,L=Math.PI,M=[],A=S+n===e;if(g=0,y=O,p=t[e=S],f=t[e+1],A){v();var F=Math.atan2(f-_,p-d);T&&(F+=F>0?-L:L);var Z=(b+x)/2,D=(I+E)/2;return M[0]=[Z,D,(w-r)/2,F,o],M}for(var k=0,j=o.length;k<j;){v();var N=Math.atan2(f-_,p-d);if(T&&(N+=N>0?-L:L),void 0!==R){var G=N-R;if(G+=G>L?-2*L:G<-L?2*L:0,Math.abs(G)>s)return null}R=N;for(var z=k,W=0;k<j;++k){var Y=a*l(h,o[T?j-k-1:k],u);if(e+n<i&&y+g<r+W+Y/2)break;W+=Y}if(k!==z){var X=T?o.substring(j-z,j-k):o.substring(z,k);m=(r+W/2-y)/g,Z=(0,C.t7)(d,p,m),D=(0,C.t7)(_,f,m),M.push([Z,D,W/2,N,X]),r+=W}}return M}function tn(t,e,i,n){for(var o=t[e],r=t[e+1],s=0,a=e+n;a<i;a+=n){var l=t[a],h=t[a+1];s+=Math.sqrt((l-o)*(l-o)+(h-r)*(h-r)),o=l,r=h}return s}var en=(0,o.lJ)(),nn=[],on=[],rn=[],sn=[];function an(t){return t[3].declutterBox}var ln=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function hn(t,e){return"start"!==e&&"end"!==e||ln.test(t)||(e="start"===e?"left":"right"),Yi[e]}const un=function(){function t(t,e,i,o,r){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=o.instructions,this.coordinates=o.coordinates,this.coordinateCache_={},this.renderBuffer_=r,this.renderedTransform_=(0,n.Ue)(),this.hitDetectionInstructions=o.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=o.fillStates||{},this.strokeStates=o.strokeStates||{},this.textStates=o.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,i,n){var o=t+e+i+n;if(this.labels_[o])return this.labels_[o];var r=n?this.strokeStates[n]:null,s=i?this.fillStates[i]:null,a=this.textStates[e],l=this.pixelRatio,h=[a.scale[0]*l,a.scale[1]*l],u=hn(t,a.textAlign||K.PH),c=n&&r.lineWidth?r.lineWidth:0,p=t.split("\n"),f=p.length,d=[],_=(0,K.gs)(a.font,p,d),g=(0,K.fk)(a.font),y=_+c,v=[],m=(y+2)*h[0],x=(g*f+c)*h[1],E={width:m<0?Math.floor(m):Math.ceil(m),height:x<0?Math.floor(x):Math.ceil(x),contextInstructions:v};1==h[0]&&1==h[1]||v.push("scale",h),v.push("font",a.font),n&&(v.push("strokeStyle",r.strokeStyle),v.push("lineWidth",c),v.push("lineCap",r.lineCap),v.push("lineJoin",r.lineJoin),v.push("miterLimit",r.miterLimit),(at.Id?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(v.push("setLineDash",[r.lineDash]),v.push("lineDashOffset",r.lineDashOffset))),i&&v.push("fillStyle",s.fillStyle),v.push("textBaseline","middle"),v.push("textAlign","center");var C,S=.5-u,O=u*y+S*c;if(n)for(C=0;C<f;++C)v.push("strokeText",[p[C],O+S*d[C],.5*(c+g)+C*g]);if(i)for(C=0;C<f;++C)v.push("fillText",[p[C],O+S*d[C],.5*(c+g)+C*g]);return this.labels_[o]=E,E},t.prototype.replayTextBackground_=function(t,e,i,n,o,r,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,o),t.lineTo.apply(t,e),r&&(this.alignFill_=r[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},t.prototype.calculateImageOrLabelDimensions_=function(t,e,i,r,s,a,l,h,u,c,p,f,d,_,g,y){var v,m=i-(l*=f[0]),x=r-(h*=f[1]),E=s+u>t?t-u:s,C=a+c>e?e-c:a,S=_[3]+E*f[0]+_[1],O=_[0]+C*f[1]+_[2],w=m-_[3],T=x-_[0];return(g||0!==p)&&(nn[0]=w,sn[0]=w,nn[1]=T,on[1]=T,on[0]=w+S,rn[0]=on[0],rn[1]=T+O,sn[1]=rn[1]),0!==p?(v=(0,n.qC)((0,n.Ue)(),i,r,1,1,p,-i,-r),(0,n.nn)(v,nn),(0,n.nn)(v,on),(0,n.nn)(v,rn),(0,n.nn)(v,sn),(0,o.T9)(Math.min(nn[0],on[0],rn[0],sn[0]),Math.min(nn[1],on[1],rn[1],sn[1]),Math.max(nn[0],on[0],rn[0],sn[0]),Math.max(nn[1],on[1],rn[1],sn[1]),en)):(0,o.T9)(Math.min(w,w+S),Math.min(T,T+O),Math.max(w,w+S),Math.max(T,T+O),en),d&&(m=Math.round(m),x=Math.round(x)),{drawImageX:m,drawImageY:x,drawImageW:E,drawImageH:C,originX:u,originY:c,declutterBox:{minX:en[0],minY:en[1],maxX:en[2],maxY:en[3],value:y},canvasTransform:v,scale:f}},t.prototype.replayImageOrLabel_=function(t,e,i,n,o,r,s){var a=!(!r&&!s),l=n.declutterBox,h=t.canvas,u=s?s[2]*n.scale[0]/2:0;return l.minX-u<=h.width/e&&l.maxX+u>=0&&l.minY-u<=h.height/e&&l.maxY+u>=0&&(a&&this.replayTextBackground_(t,nn,on,rn,sn,r,s),(0,K._f)(t,n.canvasTransform,o,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0},t.prototype.fill_=function(t){if(this.alignFill_){var e=(0,n.nn)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.drawLabelWithPointPlacement_=function(t,e,i,n){var o=this.textStates[e],r=this.createLabel(t,e,n,i),s=this.strokeStates[i],a=this.pixelRatio,l=hn(t,o.textAlign||K.PH),h=Yi[o.textBaseline||K.ru],u=s&&s.lineWidth?s.lineWidth:0;return{label:r,anchorX:l*(r.width/a-2*o.scale[0])+2*(.5-l)*u,anchorY:h*r.height/a+2*(.5-h)*u}},t.prototype.execute_=function(t,e,i,r,s,a,l,h){var u;this.pixelCoordinates_&&(0,bt.fS)(i,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=(0,$i.vT)(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),(0,n.lk)(this.renderedTransform_,i));for(var c,p,f,d,_,g,y,v,m,x,E,C,S,O,w,T,b=0,I=r.length,P=0,R=0,L=0,M=null,A=null,F=this.coordinateCache_,Z=this.viewRotation_,D=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,k={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Z},j=this.instructions!=r||this.overlaps?0:200;b<I;){var N=r[b];switch(N[0]){case Ii.BEGIN_GEOMETRY:S=N[1],T=N[3],S.getGeometry()?void 0===l||(0,o.kK)(l,T.getExtent())?++b:b=N[2]+1:b=N[2];break;case Ii.BEGIN_PATH:R>j&&(this.fill_(t),R=0),L>j&&(t.stroke(),L=0),R||L||(t.beginPath(),d=NaN,_=NaN),++b;break;case Ii.CIRCLE:var G=u[P=N[1]],z=u[P+1],W=u[P+2]-G,Y=u[P+3]-z,X=Math.sqrt(W*W+Y*Y);t.moveTo(G+X,z),t.arc(G,z,X,0,2*Math.PI,!0),++b;break;case Ii.CLOSE_PATH:t.closePath(),++b;break;case Ii.CUSTOM:P=N[1],c=N[2];var B=N[3],V=N[4],U=6==N.length?N[5]:void 0;k.geometry=B,k.feature=S,b in F||(F[b]=[]);var q=F[b];U?U(u,P,c,2,q):(q[0]=u[P],q[1]=u[P+1],q.length=2),V(q,k),++b;break;case Ii.DRAW_IMAGE:P=N[1],c=N[2],v=N[3],p=N[4],f=N[5];var H=N[6],J=N[7],$=N[8],Q=N[9],tt=N[10],et=N[11],it=N[12],nt=N[13],ot=N[14];if(!v&&N.length>=19){m=N[18],x=N[19],E=N[20],C=N[21];var rt=this.drawLabelWithPointPlacement_(m,x,E,C);v=rt.label,N[3]=v;var st=N[22];p=(rt.anchorX-st)*this.pixelRatio,N[4]=p;var at=N[23];f=(rt.anchorY-at)*this.pixelRatio,N[5]=f,H=v.height,N[6]=H,nt=v.width,N[13]=nt}var lt=void 0;N.length>24&&(lt=N[24]);var ht=void 0,ut=void 0,ct=void 0;N.length>16?(ht=N[15],ut=N[16],ct=N[17]):(ht=K.oB,ut=!1,ct=!1),tt&&D?et+=Z:tt||D||(et-=Z);for(var pt=0;P<c;P+=2)if(!(lt&&lt[pt++]<nt/this.pixelRatio)){var ft=[t,e,v,Gt=this.calculateImageOrLabelDimensions_(v.width,v.height,u[P],u[P+1],nt,H,p,f,$,Q,et,it,s,ht,ut||ct,S),J,ut?M:null,ct?A:null],dt=void 0,_t=void 0;if(h&&ot){if(!ot[P]){ot[P]=ft;continue}if(dt=ot[P],delete ot[P],_t=an(dt),h.collides(_t))continue}h&&h.collides(Gt.declutterBox)||(dt&&(h&&h.insert(_t),this.replayImageOrLabel_.apply(this,dt)),h&&h.insert(Gt.declutterBox),this.replayImageOrLabel_.apply(this,ft))}++b;break;case Ii.DRAW_CHARS:var gt=N[1],yt=N[2],vt=N[3],mt=N[4];C=N[5];var xt=N[6],Et=N[7],Ct=N[8];E=N[9];var St=N[10];m=N[11],x=N[12];var Ot=[N[13],N[13]],wt=this.textStates[x],Tt=wt.font,It=[wt.scale[0]*Et,wt.scale[1]*Et],Pt=void 0;Tt in this.widths_?Pt=this.widths_[Tt]:(Pt={},this.widths_[Tt]=Pt);var Rt=tn(u,gt,yt,2),Lt=Math.abs(It[0])*(0,K.Kd)(Tt,m,Pt);if(mt||Lt<=Rt){var Mt=this.textStates[x].textAlign,At=Qi(u,gt,yt,2,m,(Rt-Lt)*Yi[Mt],xt,Math.abs(It[0]),K.Kd,Tt,Pt,D?0:this.viewRotation_);t:if(At){var Ft=[],Zt=void 0,Dt=void 0,kt=void 0,jt=void 0,Nt=void 0;if(E)for(Zt=0,Dt=At.length;Zt<Dt;++Zt){kt=(Nt=At[Zt])[4],jt=this.createLabel(kt,x,"",E),p=Nt[2]+(It[0]<0?-St:St),f=vt*jt.height+2*(.5-vt)*St*It[1]/It[0]-Ct;var Gt=this.calculateImageOrLabelDimensions_(jt.width,jt.height,Nt[0],Nt[1],jt.width,jt.height,p,f,0,0,Nt[3],Ot,!1,K.oB,!1,S);if(h&&h.collides(Gt.declutterBox))break t;Ft.push([t,e,jt,Gt,1,null,null])}if(C)for(Zt=0,Dt=At.length;Zt<Dt;++Zt){if(kt=(Nt=At[Zt])[4],jt=this.createLabel(kt,x,C,""),p=Nt[2],f=vt*jt.height-Ct,Gt=this.calculateImageOrLabelDimensions_(jt.width,jt.height,Nt[0],Nt[1],jt.width,jt.height,p,f,0,0,Nt[3],Ot,!1,K.oB,!1,S),h&&h.collides(Gt.declutterBox))break t;Ft.push([t,e,jt,Gt,1,null,null])}h&&h.load(Ft.map(an));for(var zt=0,Wt=Ft.length;zt<Wt;++zt)this.replayImageOrLabel_.apply(this,Ft[zt])}}++b;break;case Ii.END_GEOMETRY:if(void 0!==a){var Yt=a(S=N[1],T);if(Yt)return Yt}++b;break;case Ii.FILL:j?R++:this.fill_(t),++b;break;case Ii.MOVE_TO_LINE_TO:for(P=N[1],c=N[2],O=u[P],y=(w=u[P+1])+.5|0,(g=O+.5|0)===d&&y===_||(t.moveTo(O,w),d=g,_=y),P+=2;P<c;P+=2)g=(O=u[P])+.5|0,y=(w=u[P+1])+.5|0,P!=c-2&&g===d&&y===_||(t.lineTo(O,w),d=g,_=y);++b;break;case Ii.SET_FILL_STYLE:M=N,this.alignFill_=N[2],R&&(this.fill_(t),R=0,L&&(t.stroke(),L=0)),t.fillStyle=N[1],++b;break;case Ii.SET_STROKE_STYLE:A=N,L&&(t.stroke(),L=0),this.setStrokeStyle_(t,N),++b;break;case Ii.STROKE:j?L++:t.stroke(),++b;break;default:++b}}R&&this.fill_(t),L&&t.stroke()},t.prototype.execute=function(t,e,i,n,o,r){this.viewRotation_=n,this.execute_(t,e,i,this.instructions,o,void 0,void 0,r)},t.prototype.executeHitDetection=function(t,e,i,n,o){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,o)},t}();var cn=[Hi,Bi,qi,Ui,Ji,Vi],pn=function(){function t(t,e,i,o,r,s){this.maxExtent_=t,this.overlaps_=o,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,n.Ue)(),this.createExecutors_(r)}return t.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);var n=t[e],o=[this.renderBuffer_||0,this.renderBuffer_||0];for(var r in n){var s=n[r];i[r]=new un(this.resolution_,this.pixelRatio_,this.overlaps_,s,o)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[e],n=0,o=t.length;n<o;++n)if(t[n]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,s,a){var l=2*(r=Math.round(r))+1,h=(0,n.qC)(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-i,-t[0],-t[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=(0,B.E4)(l,l));var c,p=this.hitDetectionContext_;p.canvas.width!==l||p.canvas.height!==l?(p.canvas.width=l,p.canvas.height=l):u||p.clearRect(0,0,l,l),void 0!==this.renderBuffer_&&(c=(0,o.lJ)(),(0,o.Wj)(c,t),(0,o.f3)(c,e*(this.renderBuffer_+r),c));var f,d=function(t){if(void 0!==fn[t])return fn[t];for(var e=2*t+1,i=t*t,n=new Array(i+1),o=0;o<=t;++o)for(var r=0;r<=t;++r){var s=o*o+r*r;if(s>i)break;var a=n[s];a||(a=[],n[s]=a),a.push(4*((t+o)*e+(t+r))+3),o>0&&a.push(4*((t-o)*e+(t+r))+3),r>0&&(a.push(4*((t+o)*e+(t-r))+3),o>0&&a.push(4*((t-o)*e+(t-r))+3))}for(var l=[],h=(o=0,n.length);o<h;++o)n[o]&&l.push.apply(l,n[o]);return fn[t]=l,l}(r);function _(t,e){for(var i=p.getImageData(0,0,l,l).data,n=0,o=d.length;n<o;n++)if(i[d[n]]>0){if(!a||f!==Ui&&f!==Ji||-1!==a.indexOf(t)){var h=(d[n]-3)/4,u=r-h%l,c=r-(h/l|0),_=s(t,e,u*u+c*c);if(_)return _}p.clearRect(0,0,l,l);break}}var g,y,v,m,x,E=Object.keys(this.executorsByZIndex_).map(Number);for(E.sort(bt.kK),g=E.length-1;g>=0;--g){var C=E[g].toString();for(v=this.executorsByZIndex_[C],y=cn.length-1;y>=0;--y)if(void 0!==(m=v[f=cn[y]])&&(x=m.executeHitDetection(p,h,i,_,c)))return x}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var i=e[0],n=e[1],o=e[2],r=e[3],s=[i,n,i,r,o,r,o,n];return(0,$i.vT)(s,0,8,2,t,s),s},t.prototype.isEmpty=function(){return(0,E.xb)(this.executorsByZIndex_)},t.prototype.execute=function(t,e,i,n,o,r,s){var a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(bt.kK),this.maxExtent_&&(t.save(),this.clip(t,i));var l,h,u,c,p,f,d=r||cn;for(s&&a.reverse(),l=0,h=a.length;l<h;++l){var _=a[l].toString();for(p=this.executorsByZIndex_[_],u=0,c=d.length;u<c;++u)void 0!==(f=p[d[u]])&&f.execute(t,e,i,n,o,s)}this.maxExtent_&&t.restore()},t}(),fn={};const dn=pn;var _n=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const gn=function(t){function e(e,i,o,r,s,a,l){var h=t.call(this)||this;return h.context_=e,h.pixelRatio_=i,h.extent_=o,h.transform_=r,h.viewRotation_=s,h.squaredTolerance_=a,h.userTransform_=l,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=[0,0],h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=[0,0],h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=(0,n.Ue)(),h}return _n(e,t),e.prototype.drawImages_=function(t,e,i,o){if(this.image_){var r=(0,$i.vT)(t,e,i,2,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,l=s.globalAlpha;1!=this.imageOpacity_&&(s.globalAlpha=l*this.imageOpacity_);var h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(var u=0,c=r.length;u<c;u+=2){var p=r[u]-this.imageAnchorX_,f=r[u+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var d=p+this.imageAnchorX_,_=f+this.imageAnchorY_;(0,n.qC)(a,d,_,1,1,h,-d,-_),s.setTransform.apply(s,a),s.translate(d,_),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.setTransform(1,0,0,1,0,0)}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,f,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(s.globalAlpha=l)}},e.prototype.drawText_=function(t,e,i,o){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=(0,$i.vT)(t,e,i,o,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=o){var l=r[e]+this.textOffsetX_,h=r[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]){var u=(0,n.qC)(this.tmpLocalTransform_,l,h,1,1,a,-l,-h);s.setTransform.apply(s,u),s.translate(l,h),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&s.strokeText(this.text_,l,h),this.textFillState_&&s.fillText(this.text_,l,h)}}},e.prototype.moveToLineTo_=function(t,e,i,n,o){var r=this.context_,s=(0,$i.vT)(t,e,i,n,this.transform_,this.pixelCoordinates_);r.moveTo(s[0],s[1]);var a=s.length;o&&(a-=2);for(var l=2;l<a;l+=2)r.lineTo(s[l],s[l+1]);return o&&r.closePath(),i},e.prototype.drawRings_=function(t,e,i,n){for(var o=0,r=i.length;o<r;++o)e=this.moveToLineTo_(t,e,i[o],n,!0);return e},e.prototype.drawCircle=function(t){if((0,o.kK)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=(0,Zt.Kr)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],r=Math.sqrt(i*i+n*n),s=this.context_;s.beginPath(),s.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case mt.Z.POINT:this.drawPoint(t);break;case mt.Z.LINE_STRING:this.drawLineString(t);break;case mt.Z.POLYGON:this.drawPolygon(t);break;case mt.Z.MULTI_POINT:this.drawMultiPoint(t);break;case mt.Z.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case mt.Z.MULTI_POLYGON:this.drawMultiPolygon(t);break;case mt.Z.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case mt.Z.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&(0,o.kK)(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,o.kK)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if((0,o.kK)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,n=t.getFlatCoordinates(),r=0,s=t.getEnds(),a=t.getStride();i.beginPath();for(var l=0,h=s.length;l<h;++l)r=this.moveToLineTo_(n,r,s[l],a,!1);i.stroke()}if(""!==this.text_){var u=t.getFlatMidpoints();this.drawText_(u,0,u.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,o.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,o.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),n=0,r=t.getEndss(),s=t.getStride();e.beginPath();for(var a=0,l=r.length;a<l;++a){var h=r[a];n=this.drawRings_(i,n,h,s)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var u=t.getFlatInteriorPoints();this.drawText_(u,0,u.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&((0,bt.fS)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:K.PH;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:(0,Li.y)(i||K.bL)}}else this.fillState_=null;if(e){var n=e.getColor(),o=e.getLineCap(),r=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit();this.strokeState_={lineCap:void 0!==o?o:K.mb,lineDash:r||K.X9,lineDashOffset:s||K.He,lineJoin:void 0!==a?a:K.rc,lineWidth:this.pixelRatio_*(void 0!==l?l:K.yC),miterLimit:void 0!==h?h:K.V4,strokeStyle:(0,Li.y)(n||K.Tx)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getSize();if(e){var i=t.getAnchor(),n=t.getImage(1),o=t.getOrigin(),r=t.getScaleArray();this.imageAnchorX_=i[0],this.imageAnchorY_=i[1],this.imageHeight_=e[1],this.image_=n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=[this.pixelRatio_*r[0],this.pixelRatio_*r[1]],this.imageWidth_=e[0]}else this.image_=null}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:(0,Li.y)(i||K.bL)}}else this.textFillState_=null;var n=t.getStroke();if(n){var o=n.getColor(),r=n.getLineCap(),s=n.getLineDash(),a=n.getLineDashOffset(),l=n.getLineJoin(),h=n.getWidth(),u=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==r?r:K.mb,lineDash:s||K.X9,lineDashOffset:a||K.He,lineJoin:void 0!==l?l:K.rc,lineWidth:void 0!==h?h:K.yC,miterLimit:void 0!==u?u:K.V4,strokeStyle:(0,Li.y)(o||K.Tx)}}else this.textStrokeState_=null;var c=t.getFont(),p=t.getOffsetX(),f=t.getOffsetY(),d=t.getRotateWithView(),_=t.getRotation(),g=t.getScaleArray(),y=t.getText(),v=t.getTextAlign(),m=t.getTextBaseline();this.textState_={font:void 0!==c?c:K.Df,textAlign:void 0!==v?v:K.PH,textBaseline:void 0!==m?m:K.ru},this.text_=void 0!==y?y:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==f?this.pixelRatio_*f:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==_?_:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}else this.text_=""},e}(Ri),yn="fraction",vn="pixels",mn="bottom-left",xn="bottom-right",En="top-left",Cn="top-right";var Sn=s(8039),On=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const wn=function(t){function e(e,i,n,o){var r=t.call(this)||this;return r.extent=e,r.pixelRatio_=n,r.resolution=i,r.state=o,r}return On(e,t),e.prototype.changed=function(){this.dispatchEvent(w.Z.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return(0,i.O3)()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){(0,i.O3)()},e}(ot.Z);var Tn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function bn(t,e,i){var n=t;if(n.src&&at.Tp){var o=n.decode(),r=!0;return o.then((function(){r&&e()})).catch((function(t){r&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():i())})),function(){r=!1}}var s=[(0,R.Vx)(n,w.Z.LOAD,e),(0,R.Vx)(n,w.Z.ERROR,i)];return function(){s.forEach(R.bN)}}!function(t){function e(e,i,n,o,r,s){var a=t.call(this,e,i,n,ni.Z.IDLE)||this;return a.src_=o,a.image_=new Image,null!==r&&(a.image_.crossOrigin=r),a.unlisten_=null,a.state=ni.Z.IDLE,a.imageLoadFunction_=s,a}Tn(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=ni.Z.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=(0,o.Cr)(this.extent)/this.image_.height),this.state=ni.Z.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=ni.Z.IDLE&&this.state!=ni.Z.ERROR||(this.state=ni.Z.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=bn(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(wn);var In=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pn=null,Rn=function(t){function e(e,i,n,o,r,s){var a=t.call(this)||this;return a.hitDetectionImage_=null,a.image_=e||new Image,null!==o&&(a.image_.crossOrigin=o),a.canvas_={},a.color_=s,a.unlisten_=null,a.imageState_=r,a.size_=n,a.src_=i,a.tainted_,a}return In(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===ni.Z.LOADED){Pn||(Pn=(0,B.E4)(1,1)),Pn.drawImage(this.image_,0,0);try{Pn.getImageData(0,0,1,1),this.tainted_=!1}catch(t){Pn=null,this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(w.Z.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=ni.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=ni.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],i=(0,B.E4)(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==ni.Z.IDLE){this.imageState_=ni.Z.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=bn(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var i=e.getContext("2d");if(i.scale(t,t),i.drawImage(this.image_,0,0),i.globalCompositeOperation="multiply","multiply"===i.globalCompositeOperation||this.isTainted_())i.fillStyle=(0,r.XC)(this.color_),i.fillRect(0,0,e.width,e.height),i.globalCompositeOperation="destination-in",i.drawImage(this.image_,0,0);else{for(var n=i.getImageData(0,0,e.width,e.height),o=n.data,s=this.color_[0]/255,a=this.color_[1]/255,l=this.color_[2]/255,h=this.color_[3],u=0,c=o.length;u<c;u+=4)o[u]*=s,o[u+1]*=a,o[u+2]*=l,o[u+3]*=h;i.putImageData(n,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(ot.Z),Ln=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Mn=function(t){function e(e){var n=this,o=e||{},s=void 0!==o.opacity?o.opacity:1,a=void 0!==o.rotation?o.rotation:0,h=void 0!==o.scale?o.scale:1,u=void 0!==o.rotateWithView&&o.rotateWithView;(n=t.call(this,{opacity:s,rotation:a,scale:h,displacement:void 0!==o.displacement?o.displacement:[0,0],rotateWithView:u})||this).anchor_=void 0!==o.anchor?o.anchor:[.5,.5],n.normalizedAnchor_=null,n.anchorOrigin_=void 0!==o.anchorOrigin?o.anchorOrigin:En,n.anchorXUnits_=void 0!==o.anchorXUnits?o.anchorXUnits:yn,n.anchorYUnits_=void 0!==o.anchorYUnits?o.anchorYUnits:yn,n.crossOrigin_=void 0!==o.crossOrigin?o.crossOrigin:null;var c=void 0!==o.img?o.img:null,p=void 0!==o.imgSize?o.imgSize:null,f=o.src;(0,x.h)(!(void 0!==f&&c),4),(0,x.h)(!c||c&&p,5),void 0!==f&&0!==f.length||!c||(f=c.src||(0,i.sq)(c)),(0,x.h)(void 0!==f&&f.length>0,6);var d=void 0!==o.src?ni.Z.IDLE:ni.Z.LOADED;return n.color_=void 0!==o.color?(0,r._2)(o.color):null,n.iconImage_=function(t,e,i,n,o,r){var s=l.get(e,n,r);return s||(s=new Rn(t,e,i,n,o,r),l.set(e,n,r,s)),s}(c,f,p,n.crossOrigin_,d,n.color_),n.offset_=void 0!==o.offset?o.offset:[0,0],n.offsetOrigin_=void 0!==o.offsetOrigin?o.offsetOrigin:En,n.origin_=null,n.size_=void 0!==o.size?o.size:null,n}return Ln(e,t),e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==yn||this.anchorYUnits_==yn){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==yn&&(t[0]*=e[0]),this.anchorYUnits_==yn&&(t[1]*=e[1])}if(this.anchorOrigin_!=En){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=Cn&&this.anchorOrigin_!=xn||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=mn&&this.anchorOrigin_!=xn||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_,e=this.getDisplacement();if(this.offsetOrigin_!=En){var i=this.getSize(),n=this.iconImage_.getSize();if(!i||!n)return null;t=t.slice(),this.offsetOrigin_!=Cn&&this.offsetOrigin_!=xn||(t[0]=n[0]-i[0]-t[0]),this.offsetOrigin_!=mn&&this.offsetOrigin_!=xn||(t[1]=n[1]-i[1]-t[1])}return t[0]+=e[0],t[1]+=e[1],this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(w.Z.CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(w.Z.CHANGE,t)},e}(Sn.Z);var An={Point:function(t,e,i,n,o){var r,s=i.getImage(),a=i.getText();if(o&&(t=o,r=s&&a&&a.getText()?{}:void 0),s){if(s.getImageState()!=ni.Z.LOADED)return;var l=t.getBuilder(i.getZIndex(),Ui);l.setImageStyle(s,r),l.drawPoint(e,n)}if(a&&a.getText()){var h=t.getBuilder(i.getZIndex(),Ji);h.setTextStyle(a,r),h.drawText(e,n)}},LineString:function(t,e,i,n,o){var r=i.getStroke();if(r){var s=t.getBuilder(i.getZIndex(),qi);s.setFillStrokeStyle(null,r),s.drawLineString(e,n)}var a=i.getText();if(a&&a.getText()){var l=(o||t).getBuilder(i.getZIndex(),Ji);l.setTextStyle(a),l.drawText(e,n)}},Polygon:function(t,e,i,n,o){var r=i.getFill(),s=i.getStroke();if(r||s){var a=t.getBuilder(i.getZIndex(),Hi);a.setFillStrokeStyle(r,s),a.drawPolygon(e,n)}var l=i.getText();if(l&&l.getText()){var h=(o||t).getBuilder(i.getZIndex(),Ji);h.setTextStyle(l),h.drawText(e,n)}},MultiPoint:function(t,e,i,n,o){var r,s=i.getImage(),a=i.getText();if(o&&(t=o,r=s&&a&&a.getText()?{}:void 0),s){if(s.getImageState()!=ni.Z.LOADED)return;var l=t.getBuilder(i.getZIndex(),Ui);l.setImageStyle(s,r),l.drawMultiPoint(e,n)}if(a&&a.getText()){var h=(o||t).getBuilder(i.getZIndex(),Ji);h.setTextStyle(a,r),h.drawText(e,n)}},MultiLineString:function(t,e,i,n,o){var r=i.getStroke();if(r){var s=t.getBuilder(i.getZIndex(),qi);s.setFillStrokeStyle(null,r),s.drawMultiLineString(e,n)}var a=i.getText();if(a&&a.getText()){var l=(o||t).getBuilder(i.getZIndex(),Ji);l.setTextStyle(a),l.drawText(e,n)}},MultiPolygon:function(t,e,i,n,o){var r=i.getFill(),s=i.getStroke();if(s||r){var a=t.getBuilder(i.getZIndex(),Hi);a.setFillStrokeStyle(r,s),a.drawMultiPolygon(e,n)}var l=i.getText();if(l&&l.getText()){var h=(o||t).getBuilder(i.getZIndex(),Ji);h.setTextStyle(l),h.drawText(e,n)}},GeometryCollection:function(t,e,i,n,o){var r,s,a=e.getGeometriesArray();for(r=0,s=a.length;r<s;++r)(0,An[a[r].getType()])(t,a[r],i,n,o)},Circle:function(t,e,i,n,o){var r=i.getFill(),s=i.getStroke();if(r||s){var a=t.getBuilder(i.getZIndex(),Bi);a.setFillStrokeStyle(r,s),a.drawCircle(e,n)}var l=i.getText();if(l&&l.getText()){var h=(o||t).getBuilder(i.getZIndex(),Ji);h.setTextStyle(l),h.drawText(e,n)}}};function Fn(t,e){return parseInt((0,i.sq)(t),10)-parseInt((0,i.sq)(e),10)}function Zn(t,e){return.5*t/e}function Dn(t,e,i,n,o,r,s){var a=!1,l=i.getImage();if(l){var h=l.getImageState();h==ni.Z.LOADED||h==ni.Z.ERROR?l.unlistenImageChange(o):(h==ni.Z.IDLE&&l.load(),h=l.getImageState(),l.listenImageChange(o),a=!0)}return function(t,e,i,n,o,r){var s=i.getGeometryFunction()(e);if(s){var a=s.simplifyTransformed(n,o);i.getRenderer()?kn(t,a,i,e):(0,An[a.getType()])(t,a,i,e,r)}}(t,e,i,n,r,s),a}function kn(t,e,i,n){if(e.getType()!=mt.Z.GEOMETRY_COLLECTION)t.getBuilder(i.getZIndex(),Vi).drawCustom(e,n,i.getRenderer());else for(var o=e.getGeometries(),r=0,s=o.length;r<s;++r)kn(t,o[r],i,n)}var jn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Nn=function(t){function e(e){var i=t.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.animatingOrInteracting_,i.dirty_=!1,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=(0,o.lJ)(),i.renderedRotation_,i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i}return jn(e,t),e.prototype.useContainer=function(e,i,n){n<1&&(e=null),t.prototype.useContainer.call(this,e,i,n)},e.prototype.renderWorlds=function(t,e,i){var n=e.extent,r=e.viewState,s=r.center,a=r.resolution,l=r.projection,h=r.rotation,u=l.getExtent(),c=this.getLayer().getSource(),p=e.pixelRatio,f=e.viewHints,d=!(f[0]||f[1]),_=this.context,g=Math.round(e.size[0]*p),y=Math.round(e.size[1]*p),v=c.getWrapX()&&l.canWrapX(),m=v?(0,o.dz)(u):null,x=v?Math.ceil((n[2]-u[2])/m)+1:1,E=v?Math.floor((n[0]-u[0])/m):0;do{var C=this.getRenderTransform(s,a,h,p,g,y,E*m);t.execute(_,1,C,h,d,void 0,i)}while(++E<x)},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},e.prototype.renderFrame=function(t,e){var i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];(0,n.n3)(this.pixelTransform,1/i,1/i),(0,n.nb)(this.inversePixelTransform,this.pixelTransform);var s=(0,n.BB)(this.pixelTransform);this.useContainer(e,s,r.opacity);var a=this.context,l=a.canvas,h=this.replayGroup_,u=this.declutterExecutorGroup;if((!h||h.isEmpty())&&(!u||u.isEmpty()))return!this.containerReused&&l.width>0&&(l.width=0),this.container;var c=Math.round(t.size[0]*i),p=Math.round(t.size[1]*i);l.width!=c||l.height!=p?(l.width=c,l.height=p,l.style.transform!==s&&(l.style.transform=s)):this.containerReused||a.clearRect(0,0,c,p),this.preRender(a,t);var f=t.viewState,d=f.projection,_=!1;if(r.extent&&this.clipping){var g=(0,Ot.dY)(r.extent,d);(_=!(0,o.r4)(g,t.extent)&&(0,o.kK)(g,t.extent))&&this.clipUnrotated(a,t,g)}this.renderWorlds(h,t),_&&a.restore(),this.postRender(a,t);var y=r.opacity,v=this.container;return y!==parseFloat(v.style.opacity)&&(v.style.opacity=1===y?"":String(y)),this.renderedRotation_!==f.rotation&&(this.renderedRotation_=f.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var i=[this.context.canvas.width,this.context.canvas.height];(0,n.nn)(this.pixelTransform,i);var r=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,l=this.renderedProjection_,h=this.renderedExtent_,u=this.getLayer(),c=[],p=i[0]/2,f=i[1]/2;c.push(this.getRenderTransform(r,s,a,.5,p,f,0).slice());var d=u.getSource(),_=l.getExtent();if(d.getWrapX()&&l.canWrapX()&&!(0,o.r4)(_,h)){for(var g=h[0],y=(0,o.dz)(_),v=0,m=void 0;g<_[0];)m=y*--v,c.push(this.getRenderTransform(r,s,a,.5,p,f,m).slice()),g+=y;for(v=0,g=h[2];g>_[2];)m=y*++v,c.push(this.getRenderTransform(r,s,a,.5,p,f,m).slice()),g-=y}this.hitDetectionImageData_=function(t,e,i,n,r,s,a){var l=t[0]/2,h=t[1]/2,u=(0,B.E4)(l,h);u.imageSmoothingEnabled=!1;for(var c=u.canvas,p=new gn(u,.5,r,null,a),f=i.length,d=Math.floor(16777215/f),_={},g=1;g<=f;++g){var y=i[g-1],v=y.getStyleFunction()||n;if(n){var m=v(y,s);if(m){Array.isArray(m)||(m=[m]);for(var x="#"+("000000"+(g*d).toString(16)).slice(-6),E=0,C=m.length;E<C;++E){var S=m[E],O=S.clone(),w=O.getFill();w&&w.setColor(x);var T=O.getStroke();T&&T.setColor(x),O.setText(void 0);var b=S.getImage();if(b){var I=b.getImageSize();if(!I)continue;var P=document.createElement("canvas");P.width=I[0],P.height=I[1];var R=P.getContext("2d",{alpha:!1});R.fillStyle=x;var L=R.canvas;R.fillRect(0,0,L.width,L.height);var M=I?I[0]:L.width,A=I?I[1]:L.height;(0,B.E4)(M,A).drawImage(L,0,0),O.setImage(new Mn({img:L,imgSize:I,anchor:b.getAnchor(),anchorXUnits:vn,anchorYUnits:vn,offset:b.getOrigin(),size:b.getSize(),opacity:b.getOpacity(),scale:b.getScale(),rotation:b.getRotation(),rotateWithView:b.getRotateWithView()}))}var F=Number(O.getZIndex());(j=_[F])||(j={},_[F]=j,j[mt.Z.POLYGON]=[],j[mt.Z.CIRCLE]=[],j[mt.Z.LINE_STRING]=[],j[mt.Z.POINT]=[]);var Z=O.getGeometryFunction()(y);Z&&(0,o.kK)(r,Z.getExtent())&&j[Z.getType().replace("Multi","")].push(Z,O)}}}}for(var D=Object.keys(_).map(Number).sort(bt.kK),k=(g=0,D.length);g<k;++g){var j=_[D[g]];for(var N in j){var G=j[N];for(E=0,C=G.length;E<C;E+=2){p.setStyle(G[E+1]);for(var z=0,W=e.length;z<W;++z)p.setTransform(e[z]),p.drawGeometry(G[E])}}}return u.getImageData(0,0,c.width,c.height)}(i,c,this.renderedFeatures_,u.getStyleFunction(),h,s,a)}e(function(t,e,i){var n=[];if(i){var o=4*(Math.round(t[0]/2)+Math.round(t[1]/2)*i.width),r=i.data[o],s=i.data[o+1],a=i.data[o+2]+256*(s+256*r),l=Math.floor(16777215/e.length);a&&a%l==0&&n.push(e[a/l-1])}return n}(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,o,r){var s=this;if(this.replayGroup_){var a,l=e.viewState.resolution,h=e.viewState.rotation,u=this.getLayer(),c={},p=function(t,e,n){var s=(0,i.sq)(t),a=c[s];if(a){if(!0!==a&&n<a.distanceSq){if(0===n)return c[s]=!0,r.splice(r.lastIndexOf(a),1),o(t,u,e);a.geometry=e,a.distanceSq=n}}else{if(0===n)return c[s]=!0,o(t,u,e);r.push(c[s]={feature:t,layer:u,geometry:e,distanceSq:n,callback:o})}},f=[this.replayGroup_];return this.declutterExecutorGroup&&f.push(this.declutterExecutorGroup),f.some((function(i){return a=i.forEachFeatureAtCoordinate(t,l,h,n,p,i===s.declutterExecutorGroup?e.declutterTree.all().map((function(t){return t.value})):null)})),a}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),i=e.getSource();if(!i)return!1;var n=t.viewHints[0],r=t.viewHints[1],s=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(!this.dirty_&&!s&&n||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var l=t.extent,h=t.viewState,u=h.projection,c=h.resolution,p=t.pixelRatio,f=e.getRevision(),d=e.getRenderBuffer(),_=e.getRenderOrder();void 0===_&&(_=Fn);var g=h.center.slice(),y=(0,o.f3)(l,d*c),v=[y.slice()],m=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!(0,o.r4)(m,t.extent)){var x=(0,o.dz)(m),E=Math.max((0,o.dz)(y)/2,x);y[0]=m[0]-E,y[2]=m[2]+E,D(g,u);var C=(0,o.Cf)(v[0],u);C[0]<m[0]&&C[2]<m[2]?v.push([C[0]+x,C[1],C[2]+x,C[3]]):C[0]>m[0]&&C[2]>m[2]&&v.push([C[0]-x,C[1],C[2]-x,C[3]])}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==f&&this.renderedRenderOrder_==_&&(0,o.r4)(this.renderedExtent_,y))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var S,O=new Ki(Zn(c,p),y,c,p);this.getLayer().getDeclutter()&&(S=new Ki(Zn(c,p),y,c,p));var w,T=(0,Ot.Cs)();if(T){for(var b=0,I=v.length;b<I;++b)i.loadFeatures((0,Ot.Fj)(v[b],u),c,T);w=(0,Ot.WO)(T,u)}else for(b=0,I=v.length;b<I;++b)i.loadFeatures(v[b],c,u);var P=function(t,e){var i=Zn(t,e);return i*i}(c,p),R=function(t){var i,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(i=n(t,c)),i){var o=this.renderFeature(t,P,i,O,w,S);this.dirty_=this.dirty_||o}}.bind(this),L=(0,Ot.Fj)(y,u),M=i.getFeaturesInExtent(L);for(_&&M.sort(_),b=0,I=M.length;b<I;++b)R(M[b]);this.renderedFeatures_=M;var A=O.finish(),F=new dn(y,c,p,i.getOverlaps(),A,e.getRenderBuffer());return S&&(this.declutterExecutorGroup=new dn(y,c,p,i.getOverlaps(),S.finish(),e.getRenderBuffer())),this.renderedResolution_=c,this.renderedRevision_=f,this.renderedRenderOrder_=_,this.renderedExtent_=y,this.renderedCenter_=g,this.renderedProjection_=u,this.replayGroup_=F,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,n,o,r){if(!i)return!1;var s=!1;if(Array.isArray(i))for(var a=0,l=i.length;a<l;++a)s=Dn(n,t,i[a],e,this.boundHandleStyleImageChange_,o,r)||s;else s=Dn(n,t,i,e,this.boundHandleStyleImageChange_,o,r);return s},e}(li);var Gn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const zn=function(t){function e(e){return t.call(this,e)||this}return Gn(e,t),e.prototype.createRenderer=function(){return new Nn(this)},e}(Ci),Wn=function(){function t(t){this.rbush_=new(vi())(t),this.items_={}}return t.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[(0,i.sq)(e)]=n},t.prototype.load=function(t,e){for(var n=new Array(e.length),o=0,r=e.length;o<r;o++){var s=t[o],a=e[o],l={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};n[o]=l,this.items_[(0,i.sq)(a)]=l}this.rbush_.load(n)},t.prototype.remove=function(t){var e=(0,i.sq)(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)},t.prototype.update=function(t,e){var n=this.items_[(0,i.sq)(e)],r=[n.minX,n.minY,n.maxX,n.maxY];(0,o.fS)(r,t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var i,n=0,o=t.length;n<o;n++)if(i=e(t[n]))return i;return i},t.prototype.isEmpty=function(){return(0,E.xb)(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return(0,o.T9)(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}();var Yn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function Xn(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const Kn=function(t){function e(e){var i=t.call(this)||this;return i.projection_=(0,Ot.U2)(e.projection),i.attributions_=Xn(e.attributions),i.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,i.loading=!1,i.state_=void 0!==e.state?e.state:P,i.wrapX_=void 0!==e.wrapX&&e.wrapX,i}return Yn(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return(0,i.O3)()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getContextOptions=function(){},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Xn(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(h.ZP),Bn="addfeature",Vn="removefeature";function Un(t,e){return[[-1/0,-1/0,1/0,1/0]]}const qn="arraybuffer";function Hn(t,i){return function(n,o,r,s,a){var l=this;!function(t,e,i,n,o,r,s){var a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(i,n,o):t,!0),e.getType()==qn&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){var n=e.getType(),l=void 0;"json"==n||"text"==n?l=a.responseText:"xml"==n?(l=a.responseXML)||(l=(new DOMParser).parseFromString(a.responseText,"application/xml")):n==qn&&(l=a.response),l?r(e.readFeatures(l,{extent:i,featureProjection:o}),e.readProjection(l)):s()}else s()},a.onerror=s,a.send()}(t,i,n,o,r,(function(t,e){void 0!==s&&s(t),l.addFeatures(t)}),a||e.Zn)}}var Jn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$n=function(t){function e(e,i,n){var o=t.call(this,e)||this;return o.feature=i,o.features=n,o}return Jn(e,t),e}(z.ZP);const Qn=function(t){function n(i){var n=this,o=i||{};(n=t.call(this,{attributions:o.attributions,projection:void 0,state:P,wrapX:void 0===o.wrapX||o.wrapX})||this).loader_=e.Zn,n.format_=o.format,n.overlaps_=void 0===o.overlaps||o.overlaps,n.url_=o.url,void 0!==o.loader?n.loader_=o.loader:void 0!==n.url_&&((0,x.h)(n.format_,7),n.loader_=Hn(n.url_,n.format_)),n.strategy_=void 0!==o.strategy?o.strategy:Un;var r,s,a=void 0===o.useSpatialIndex||o.useSpatialIndex;return n.featuresRtree_=a?new Wn:null,n.loadedExtentsRtree_=new Wn,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null,Array.isArray(o.features)?s=o.features:o.features&&(s=(r=o.features).getArray()),a||void 0!==r||(r=new q.Z(s)),void 0!==s&&n.addFeaturesInternal(s),void 0!==r&&n.bindFeaturesCollection_(r),n}return Jn(n,t),n.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},n.prototype.addFeatureInternal=function(t){var e=(0,i.sq)(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var n=t.getGeometry();if(n){var o=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new $n(Bn,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},n.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[(0,R.oL)(e,w.Z.CHANGE,this.handleFeatureChange_,this),(0,R.oL)(e,G.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]},n.prototype.addToIndex_=function(t,e){var i=!0,n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e),i&&((0,x.h)(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i},n.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},n.prototype.addFeaturesInternal=function(t){for(var e=[],n=[],o=[],r=0,s=t.length;r<s;r++){var a=t[r],l=(0,i.sq)(a);this.addToIndex_(l,a)&&n.push(a)}r=0;for(var h=n.length;r<h;r++){a=n[r],l=(0,i.sq)(a),this.setupChangeEvents_(l,a);var u=a.getGeometry();if(u){var c=u.getExtent();e.push(c),o.push(a)}else this.nullGeometryFeatures_[l]=a}this.featuresRtree_&&this.featuresRtree_.load(e,o),r=0;for(var p=n.length;r<p;r++)this.dispatchEvent(new $n(Bn,n[r]))},n.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(Bn,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(Vn,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener(H.Z.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(H.Z.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},n.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(R.bN);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new $n("clear");this.dispatchEvent(n),this.changed()},n.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},n.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){return i.getGeometry().intersectsCoordinate(t)?e(i):void 0}))},n.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},n.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(i){if(i.getGeometry().intersectsExtent(t)){var n=e(i);if(n)return n}}))},n.prototype.getFeaturesCollection=function(){return this.featuresCollection_},n.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,E.xb)(this.nullGeometryFeatures_)||(0,bt.l7)(t,(0,E.KX)(this.nullGeometryFeatures_))),t},n.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},n.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray():[]},n.prototype.getClosestFeatureToCoordinate=function(t,i){var n=t[0],o=t[1],r=null,s=[NaN,NaN],a=1/0,l=[-1/0,-1/0,1/0,1/0],h=i||e.uX;return this.featuresRtree_.forEachInExtent(l,(function(t){if(h(t)){var e=t.getGeometry(),i=a;if((a=e.closestPointXY(n,o,s,a))<i){r=t;var u=Math.sqrt(a);l[0]=n-u,l[1]=o-u,l[2]=n+u,l[3]=o+u}}})),r},n.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},n.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},n.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},n.prototype.getFormat=function(){return this.format_},n.prototype.getOverlaps=function(){return this.overlaps_},n.prototype.getUrl=function(){return this.url_},n.prototype.handleFeatureChange_=function(t){var e=t.target,n=(0,i.sq)(e),o=e.getGeometry();if(o){var r=o.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(r,e)):this.featuresRtree_&&this.featuresRtree_.update(r,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);var s=e.getId();if(void 0!==s){var a=s.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new $n("changefeature",e))},n.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:(0,i.sq)(t)in this.uidIndex_},n.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&(0,E.xb)(this.nullGeometryFeatures_)},n.prototype.loadFeatures=function(t,i,n){var r=this.loadedExtentsRtree_,s=this.strategy_(t,i);this.loading=!1;for(var a=function(t,a){var h=s[t];r.forEachInExtent(h,(function(t){return(0,o.r4)(t.extent,h)}))||(l.dispatchEvent(new $n("featuresloadstart")),l.loader_.call(l,h,i,n,function(t){this.dispatchEvent(new $n("featuresloadend",void 0,t))}.bind(l),function(){this.dispatchEvent(new $n("featuresloaderror"))}.bind(l)),r.insert(h,{extent:h.slice()}),l.loading=l.loader_!==e.Zn)},l=this,h=0,u=s.length;h<u;++h)a(h)},n.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},n.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,(function(i){if((0,o.fS)(i.extent,t))return e=i,!0})),e&&i.remove(e)},n.prototype.removeFeature=function(t){var e=(0,i.sq)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},n.prototype.removeFeatureInternal=function(t){var e=(0,i.sq)(t);this.featureChangeKeys_[e].forEach(R.bN),delete this.featureChangeKeys_[e];var n=t.getId();void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.dispatchEvent(new $n(Vn,t))},n.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},n.prototype.setLoader=function(t){this.loader_=t},n.prototype.setUrl=function(t){(0,x.h)(this.format_,7),this.setLoader(Hn(t,this.format_))},n}(Kn);var to=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const eo=function(t){function e(e,i,n){var o=t.call(this)||this,r=n||{};return o.tileCoord=e,o.state=i,o.interimTile=null,o.hifi=!0,o.key="",o.transition_=void 0===r.transition?250:r.transition,o.transitionStarts_={},o}return to(e,t),e.prototype.changed=function(){this.dispatchEvent(w.Z.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){(0,i.O3)()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var n=e-i+1e3/60;return n>=this.transition_?1:(0,At.YQ)(n/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(ot.Z);var io=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const no=function(t){function e(e,i,n,o,r,s){var a=t.call(this,e,i,s)||this;return a.crossOrigin_=o,a.src_=n,a.key=n,a.image_=new Image,null!==o&&(a.image_.crossOrigin=o),a.unlisten_=null,a.tileLoadFunction_=r,a}return io(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){var t;this.state=3,this.unlistenImage_(),this.image_=((t=(0,B.E4)(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=2:this.state=4,this.unlistenImage_(),this.changed()},e.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=bn(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(eo),oo=function(){function t(t,e,i,n,r,s){this.sourceProj_=t,this.targetProj_=e;var a={},l=(0,Ot.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return a[e]||(a[e]=l(t)),a[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&(0,o.dz)(n)==(0,o.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,o.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,o.dz)(this.targetProj_.getExtent()):null;var h=(0,o.rL)(i),u=(0,o.Xv)(i),c=(0,o.w$)(i),p=(0,o.hC)(i),f=this.transformInv_(h),d=this.transformInv_(u),_=this.transformInv_(c),g=this.transformInv_(p),y=10+(s?Math.max(0,Math.ceil((0,C.k3)((0,o.bg)(i)/(s*s*256*256)))):0);if(this.addQuad_(h,u,c,p,f,d,_,g,y),this.wrapsXInSource_){var v=1/0;this.triangles_.forEach((function(t,e,i){v=Math.min(v,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-v>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-v>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-v>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-v>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}a={}}return t.prototype.addTriangle_=function(t,e,i,n,o,r){this.triangles_.push({source:[n,o,r],target:[t,e,i]})},t.prototype.addQuad_=function(t,e,i,n,r,s,a,l,h){var u=(0,o.hI)([r,s,a,l]),c=this.sourceWorldWidth_?(0,o.dz)(u)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&c>.5&&c<1,d=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var _=(0,o.hI)([t,e,i,n]);d=(0,o.dz)(_)/this.targetWorldWidth_>.25||d}!f&&this.sourceProj_.isGlobal()&&c&&(d=c>.25||d)}if(!(!d&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3]))||(0,o.kK)(u,this.maxSourceExtent_)){var g=0;if(!(d||isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])))if(h>0)d=!0;else if(1!=(g=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(s[0])&&isFinite(s[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(l[0])&&isFinite(l[1])?0:1))&&2!=g&&4!=g&&8!=g)return;if(h>0){if(!d){var y=[(t[0]+i[0])/2,(t[1]+i[1])/2],v=this.transformInv_(y),m=void 0;m=f?((0,C.$W)(r[0],p)+(0,C.$W)(a[0],p))/2-(0,C.$W)(v[0],p):(r[0]+a[0])/2-v[0];var x=(r[1]+a[1])/2-v[1];d=m*m+x*x>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var E=[(e[0]+i[0])/2,(e[1]+i[1])/2],S=this.transformInv_(E),O=[(n[0]+t[0])/2,(n[1]+t[1])/2],w=this.transformInv_(O);this.addQuad_(t,e,E,O,r,s,S,w,h-1),this.addQuad_(O,E,i,n,w,S,a,l,h-1)}else{var T=[(t[0]+e[0])/2,(t[1]+e[1])/2],b=this.transformInv_(T),I=[(i[0]+n[0])/2,(i[1]+n[1])/2],P=this.transformInv_(I);this.addQuad_(t,T,I,n,r,b,P,l,h-1),this.addQuad_(T,e,i,I,b,s,a,P,h-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&g)&&this.addTriangle_(t,i,n,r,a,l),0==(14&g)&&this.addTriangle_(t,i,e,r,a,s),g&&(0==(13&g)&&this.addTriangle_(e,n,t,s,l,r),0==(7&g)&&this.addTriangle_(e,n,i,s,l,a))}},t.prototype.calculateSourceExtent=function(){var t=(0,o.lJ)();return this.triangles_.forEach((function(e,i,n){var r=e.source;(0,o.Wj)(t,r[0]),(0,o.Wj)(t,r[1]),(0,o.Wj)(t,r[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}();var ro,so={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};function ao(t,e,i,n,o){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(n,o),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(i,o)),t.restore()}function lo(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function ho(t,e,i,n){var r=(0,Ot.vs)(i,e,t),s=(0,Ot._Q)(e,n,i),a=e.getMetersPerUnit();void 0!==a&&(s*=a);var l=t.getMetersPerUnit();void 0!==l&&(s/=l);var h=t.getExtent();if(!h||(0,o.b8)(h,r)){var u=(0,Ot._Q)(t,s,r)/s;isFinite(u)&&u>0&&(s/=u)}return s}var uo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const co=function(t){function e(e,i,n,r,s,a,l,h,u,c,p,f){var d=t.call(this,s,0)||this;d.renderEdges_=void 0!==p&&p,d.contextOptions_=f,d.pixelRatio_=l,d.gutter_=h,d.canvas_=null,d.sourceTileGrid_=i,d.targetTileGrid_=r,d.wrappedTileCoord_=a||s,d.sourceTiles_=[],d.sourcesListenerKeys_=null,d.sourceZ_=0;var _=r.getTileCoordExtent(d.wrappedTileCoord_),g=d.targetTileGrid_.getExtent(),y=d.sourceTileGrid_.getExtent(),v=g?(0,o.Ed)(_,g):_;if(0===(0,o.bg)(v))return d.state=4,d;var m=e.getExtent();m&&(y=y?(0,o.Ed)(y,m):m);var x=r.getResolution(d.wrappedTileCoord_[0]),E=function(t,e,i,n){var r=(0,o.qg)(i),s=ho(t,e,r,n);return(!isFinite(s)||s<=0)&&(0,o.H6)(i,(function(i){return s=ho(t,e,i,n),isFinite(s)&&s>0})),s}(e,n,v,x);if(!isFinite(E)||E<=0)return d.state=4,d;var S=void 0!==c?c:.5;if(d.triangulation_=new oo(e,n,v,y,E*S,x),0===d.triangulation_.getTriangles().length)return d.state=4,d;d.sourceZ_=i.getZForResolution(E);var O=d.triangulation_.calculateSourceExtent();if(y&&(e.canWrapX()?(O[1]=(0,C.uZ)(O[1],y[1],y[3]),O[3]=(0,C.uZ)(O[3],y[1],y[3])):O=(0,o.Ed)(O,y)),(0,o.bg)(O)){for(var w=i.getTileRangeForExtentAndZ(O,d.sourceZ_),T=w.minX;T<=w.maxX;T++)for(var b=w.minY;b<=w.maxY;b++){var I=u(d.sourceZ_,T,b,l);I&&d.sourceTiles_.push(I)}0===d.sourceTiles_.length&&(d.state=4)}else d.state=4;return d}return uo(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,i,n){e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],s=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(t,e,i,n,r,s,a,l,h,u,c,p){var f=(0,B.E4)(Math.round(i*t),Math.round(i*e));if((0,E.f0)(f,p),0===h.length)return f.canvas;function d(t){return Math.round(t*i)/i}f.scale(i,i),f.globalCompositeOperation="lighter";var _=(0,o.lJ)();h.forEach((function(t,e,i){(0,o.l7)(_,t.extent)}));var g=(0,o.dz)(_),y=(0,o.Cr)(_),v=(0,B.E4)(Math.round(i*g/n),Math.round(i*y/n));(0,E.f0)(v,p);var m=i/n;h.forEach((function(t,e,i){var n=t.extent[0]-_[0],r=-(t.extent[3]-_[3]),s=(0,o.dz)(t.extent),a=(0,o.Cr)(t.extent);t.image.width>0&&t.image.height>0&&v.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,n*m,r*m,s*m,a*m)}));var x=(0,o.rL)(a);return l.getTriangles().forEach((function(t,e,o){var r=t.source,a=t.target,l=r[0][0],h=r[0][1],u=r[1][0],c=r[1][1],g=r[2][0],y=r[2][1],m=d((a[0][0]-x[0])/s),E=d(-(a[0][1]-x[1])/s),S=d((a[1][0]-x[0])/s),O=d(-(a[1][1]-x[1])/s),w=d((a[2][0]-x[0])/s),T=d(-(a[2][1]-x[1])/s),b=l,I=h;l=0,h=0;var P=[[u-=b,c-=I,0,0,S-m],[g-=b,y-=I,0,0,w-m],[0,0,u,c,O-E],[0,0,g,y,T-E]],R=(0,C.SV)(P);if(R){if(f.save(),f.beginPath(),function(){if(void 0===ro){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",ao(t,4,5,4,0),ao(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;ro=lo(e,0)||lo(e,4)||lo(e,8)}return ro}()||p===so){f.moveTo(S,O);for(var L=m-S,M=E-O,A=0;A<4;A++)f.lineTo(S+d((A+1)*L/4),O+d(A*M/3)),3!=A&&f.lineTo(S+d((A+1)*L/4),O+d((A+1)*M/3));f.lineTo(w,T)}else f.moveTo(S,O),f.lineTo(m,E),f.lineTo(w,T);f.clip(),f.transform(R[0],R[2],R[1],R[3],m,E),f.translate(_[0]-b,_[3]-I),f.scale(n/i,-n/i),f.drawImage(v.canvas,0,0),f.restore()}})),c&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,l.getTriangles().forEach((function(t,e,i){var n=t.target,o=(n[0][0]-x[0])/s,r=-(n[0][1]-x[1])/s,a=(n[1][0]-x[0])/s,l=-(n[1][1]-x[1])/s,h=(n[2][0]-x[0])/s,u=-(n[2][1]-x[1])/s;f.beginPath(),f.moveTo(a,l),f.lineTo(o,r),f.lineTo(h,u),f.closePath(),f.stroke()})),f.restore()),f.canvas}(n,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=2}this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,n){var o=e.getState();if(0==o||1==o){t++;var r=(0,R.oL)(e,w.Z.CHANGE,(function(i){var n=e.getState();2!=n&&3!=n&&4!=n||((0,R.bN)(r),0==--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(r)}}.bind(this)),this.sourceTiles_.forEach((function(t,e,i){0==t.getState()&&t.load()})),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(R.bN),this.sourcesListenerKeys_=null},e}(eo),po=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var i=this.entries_[t];return(0,x.h)(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_},t.prototype.remove=function(t){var e=this.entries_[t];return(0,x.h)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){(0,x.h)(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function fo(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function _o(t,e,i){return t+"/"+e+"/"+i}function go(t){return _o(t[0],t[1],t[2])}var yo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const vo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yo(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=(e=this.peekFirstKey(),e.split("/").map(Number))[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(go(e.tileCoord)),e.release())}.bind(this))}var e},e}(po);var mo=s(1748),xo=[0,0,0];const Eo=function(){function t(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,(0,x.h)((0,bt.pT)(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(var i=0,n=this.resolutions_.length-1;i<n;++i)if(e){if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}else e=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,(0,x.h)(this.origins_.length==this.resolutions_.length,20));var r=t.extent;void 0===r||this.origin_||this.origins_||(this.origin_=(0,o.rL)(r)),(0,x.h)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,(0,x.h)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,(0,x.h)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==r?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){var i=new ci(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(r){var n=this.getTileRangeForExtentAndZ(r,e);i.minX=Math.max(n.minX,i.minX),i.maxX=Math.min(n.maxX,i.maxX),i.minY=Math.max(n.minY,i.minY),i.maxY=Math.min(n.maxY,i.maxY)}return i}),this):r&&this.calculateTileRanges_(r)}return t.prototype.forEachTileCoord=function(t,e,i){for(var n=this.getTileRangeForExtentAndZ(t,e),o=n.minX,r=n.maxX;o<=r;++o)for(var s=n.minY,a=n.maxY;s<=a;++s)i([e,o,s])},t.prototype.forEachTileCoordParentTileRange=function(t,e,i,n){var o,r,s=null,a=t[0]-1;for(2===this.zoomFactor_?(o=t[1],r=t[2]):s=this.getTileCoordExtent(t,n);a>=this.minZoom;){if(e(a,2===this.zoomFactor_?ui(o=Math.floor(o/2),o,r=Math.floor(r/2),r,i):this.getTileRangeForExtentAndZ(s,a,i)))return!0;--a}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],o=2*t[2];return ui(n,n+1,o,o+1,e)}var r=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null},t.prototype.getTileRangeExtent=function(t,e,i){var n=this.getOrigin(t),r=this.getResolution(t),s=(0,ce.Pq)(this.getTileSize(t),this.tmpSize_),a=n[0]+e.minX*s[0]*r,l=n[0]+(e.maxX+1)*s[0]*r,h=n[1]+e.minY*s[1]*r,u=n[1]+(e.maxY+1)*s[1]*r;return(0,o.T9)(a,h,l,u,i)},t.prototype.getTileRangeForExtentAndZ=function(t,e,i){var n=xo;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);var o=n[1],r=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),ui(o,n[1],r,n[2],i)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=(0,ce.Pq)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]},t.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=(0,ce.Pq)(this.getTileSize(t[0]),this.tmpSize_),s=i[0]+t[1]*r[0]*n,a=i[1]-(t[2]+1)*r[1]*n,l=s+r[0]*n,h=a+r[1]*n;return(0,o.T9)(s,a,l,h,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,i,n,o){var r=this.getZForResolution(i),s=i/this.getResolution(r),a=this.getOrigin(r),l=(0,ce.Pq)(this.getTileSize(r),this.tmpSize_),h=n?.5:0,u=n?.5:0,c=Math.floor((t-a[0])/i+h),p=Math.floor((a[1]-e)/i+u),f=s*c/l[0],d=s*p/l[1];return n?(f=Math.ceil(f)-1,d=Math.ceil(d)-1):(f=Math.floor(f),d=Math.floor(d)),fo(r,f,d,o)},t.prototype.getTileCoordForXYAndZ_=function(t,e,i,n,o){var r=this.getOrigin(i),s=this.getResolution(i),a=(0,ce.Pq)(this.getTileSize(i),this.tmpSize_),l=n?.5:0,h=n?.5:0,u=Math.floor((t-r[0])/s+l),c=Math.floor((r[1]-e)/s+h),p=u/a[0],f=c/a[1];return n?(p=Math.ceil(p)-1,f=Math.ceil(f)-1):(p=Math.floor(p),f=Math.floor(f)),fo(i,p,f,o)},t.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},t.prototype.getZForResolution=function(t,e){var i=(0,bt.h7)(this.resolutions_,t,e||0);return(0,C.uZ)(i,this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i},t}();function Co(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,i,n){return function(t,e,i,n){var r=mo.Z.TOP_LEFT,s=So(t,undefined,i);return new Eo({extent:t,origin:(0,o.g0)(t,r),resolutions:s,tileSize:i})}(Oo(t),0,void 0)}(t),t.setDefaultTileGrid(e)),e}function So(t,e,i,n){for(var r=void 0!==e?e:42,s=(0,o.Cr)(t),a=(0,o.dz)(t),l=(0,ce.Pq)(void 0!==i?i:256),h=n>0?n:Math.max(a/l[0],s/l[1]),u=r+1,c=new Array(u),p=0;p<u;++p)c[p]=h/Math.pow(2,p);return c}function Oo(t){var e=(t=(0,Ot.U2)(t)).getExtent();if(!e){var i=180*Ot.Wm[xt.Z.DEGREES]/t.getMetersPerUnit();e=(0,o.T9)(-i,-i,i,i)}return e}var wo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),To=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;i.opaque_=void 0!==e.opaque&&e.opaque,i.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,i.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var n=e.tileGrid;return n&&(0,ce.Pq)(n.getTileSize(n.getMinZoom()),[256,256]),i.tileCache=new vo(e.cacheSize||0),i.tmpSize=[0,0],i.key_=e.key||"",i.tileOptions={transition:e.transition},i.zDirection=e.zDirection?e.zDirection:0,i}return wo(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,i,n){var o=this.getTileCacheForProjection(t);if(!o)return!1;for(var r,s,a,l=!0,h=i.minX;h<=i.maxX;++h)for(var u=i.minY;u<=i.maxY;++u)s=_o(e,h,u),a=!1,o.containsKey(s)&&(a=2===(r=o.get(s)).getState())&&(a=!1!==n(r)),a||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,n,o,r){return(0,i.O3)()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Co(t)},e.prototype.getTileCacheForProjection=function(t){return(0,x.h)((0,Ot.OP)(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,i){var n=this.getTileGridForProjection(i),o=this.getTilePixelRatio(e),r=(0,ce.Pq)(n.getTileSize(t),this.tmpSize);return 1==o?r:(0,ce.bA)(r,o,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=function(t,e,i){var n=e[0],r=t.getTileCoordCenter(e),s=Oo(i);if((0,o.b8)(s,r))return e;var a=(0,o.dz)(s),l=Math.ceil((s[0]-r[0])/a);return r[0]+=a*l,t.getTileCoordForCoordAndZ(r,n)}(n,t,i)),function(t,e){var i=t[0],n=t[1],o=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;var r=e.getFullTileRange(i);return!r||r.containsXY(n,o)}(t,n)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)},e.prototype.useTile=function(t,e,i,n){},e}(Kn),bo=function(t){function e(e,i){var n=t.call(this,e)||this;return n.tile=i,n}return wo(e,t),e}(z.ZP);const Io=To;function Po(t,e){var i=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,r=/\{-y\}/g;return function(s,a,l){return s?t.replace(i,s[0].toString()).replace(n,s[1].toString()).replace(o,s[2].toString()).replace(r,(function(){var t=s[0],i=e.getFullTileRange(t);return(0,x.h)(i,55),(i.getHeight()-s[2]-1).toString()})):void 0}}var Ro=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Lo=function(t){function e(i){var n=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,opaque:i.opaque,projection:i.projection,state:i.state,tileGrid:i.tileGrid,tilePixelRatio:i.tilePixelRatio,wrapX:i.wrapX,transition:i.transition,key:i.key,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===e.prototype.tileUrlFunction,n.tileLoadFunction=i.tileLoadFunction,i.tileUrlFunction&&(n.tileUrlFunction=i.tileUrlFunction),n.urls=null,i.urls?n.setUrls(i.urls):i.url&&n.setUrl(i.url),n.tileLoadingKeys_={},n}return Ro(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,o=(0,i.sq)(n),r=n.getState();1==r?(this.tileLoadingKeys_[o]=!0,e="tileloadstart"):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],e=3==r?"tileloaderror":2==r?"tileloadend":void 0),null!=e&&this.dispatchEvent(new bo(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=function(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var n=i[1].charCodeAt(0),o=i[2].charCodeAt(0),r=void 0;for(r=n;r<=o;++r)e.push(t.replace(i[0],String.fromCharCode(r)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(i[2],10),a=parseInt(i[1],10);a<=s;a++)e.push(t.replace(i[0],a.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(t,e){for(var i=t.length,n=new Array(i),o=0;o<i;++o)n[o]=Po(t[o],e);return function(t){return 1===t.length?t[0]:function(e,i,n){if(e){var o=function(t){return(t[1]<<t[0])+t[2]}(e),r=(0,C.$W)(o,t.length);return t[r](e,i,n)}}}(n)}(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,i){},e.prototype.useTile=function(t,e,i){var n=_o(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(Io);var Mo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function Ao(t,e){t.getImage().src=e}const Fo=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Ao,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return i.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,i.tileClass=void 0!==e.tileClass?e.tileClass:no,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,i.contextOptions_=!1===e.imageSmoothing?so:void 0,i.renderReprojectionEdges_=!1,i}return Mo(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==i?e:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[n];o.expireCache(o==i?e:{})}},e.prototype.getContextOptions=function(){return this.contextOptions_},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!(0,Ot.OP)(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){return t.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!(0,Ot.OP)(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!(0,Ot.OP)(e,t)){var n=(0,i.sq)(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Co(t)),this.tileGridForProjection[n]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||(0,Ot.OP)(e,t))return this.tileCache;var n=(0,i.sq)(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new vo(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.createTile_=function(t,e,i,n,o,r){var s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,o),l=a?this.tileUrlFunction(a,n,o):void 0,h=new this.tileClass(s,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=r,h.addEventListener(w.Z.CHANGE,this.handleTileChange.bind(this)),h},e.prototype.getTile=function(t,e,i,n,o){var r=this.getProjection();if(r&&o&&!(0,Ot.OP)(r,o)){var s=this.getTileCacheForProjection(o),a=[t,e,i],l=void 0,h=go(a);s.containsKey(h)&&(l=s.get(h));var u=this.getKey();if(l&&l.key==u)return l;var c=this.getTileGridForProjection(r),p=this.getTileGridForProjection(o),f=this.getTileCoordForTileUrlFunction(a,o),d=new co(r,c,o,p,a,f,this.getTilePixelRatio(n),this.getGutter(),function(t,e,i,n){return this.getTileInternal(t,e,i,n,r)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return d.key=u,l?(d.interimTile=l,d.refreshInterimChain(),s.replace(h,d)):s.set(h,d),d}return this.getTileInternal(t,e,i,n,r||o)},e.prototype.getTileInternal=function(t,e,i,n,o){var r=null,s=_o(t,e,i),a=this.getKey();if(this.tileCache.containsKey(s)){if((r=this.tileCache.get(s)).key!=a){var l=r;r=this.createTile_(t,e,i,n,o,a),0==l.getState()?r.interimTile=l.interimTile:r.interimTile=l,r.refreshInterimChain(),this.tileCache.replace(s,r)}}else r=this.createTile_(t,e,i,n,o,a),this.tileCache.set(s,r);return r},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var n=(0,Ot.U2)(t);if(n){var o=(0,i.sq)(n);o in this.tileGridForProjection||(this.tileGridForProjection[o]=e)}},e}(Lo);var Zo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Do=function(t){function e(e){var i=e||{},n=void 0!==i.projection?i.projection:"EPSG:3857",o=void 0!==i.tileGrid?i.tileGrid:function(t){var e=t||{},i=e.extent||(0,Ot.U2)("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:So(i,e.maxZoom,e.tileSize,e.maxResolution)};return new Eo(n)}({extent:Oo(n),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,imageSmoothing:i.imageSmoothing,opaque:i.opaque,projection:n,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this}return Zo(e,t),e}(Fo);var ko=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const jo=function(t){function e(e){var i,n=e||{};i=void 0!==n.attributions?n.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];var o=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",r=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:i,attributionsCollapsible:!1,cacheSize:n.cacheSize,crossOrigin:o,imageSmoothing:n.imageSmoothing,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,opaque:void 0===n.opaque||n.opaque,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,transition:n.transition,url:r,wrapX:n.wrapX})||this}return ko(e,t),e}(Do);var No=s(1978),Go=s(9882);function zo(t){return(0,Go.v)({primary:t.dataset.colorPrimary,secondary:t.dataset.colorSecondary},((t,e)=>e))}const Wo=new URLSearchParams(window.location.search),Yo=Wo.get("markers"),Xo=window.parent!==window||Wo.has("noedit"),Ko=document.getElementById("map");function Bo(t,e){return Wo.get(t)||(Xo?e:"")}Object.assign(Ko.style,{width:Bo("width","100vw"),height:Bo("height","100vh")});const Vo=Yo?JSON.parse(Yo):Array.from(document.querySelectorAll(".marker"),(t=>{var e,i,n;return{location:(n=t,[Number(n.dataset.lon),Number(n.dataset.lat)]),color:zo(t),name:null===(e=t.content.querySelector(".name"))||void 0===e?void 0:e.textContent,info:null===(i=t.content.querySelector(".info"))||void 0===i?void 0:i.cloneNode(!0)}})),{markerLayer:Uo,markerSelect:qo}=function(t,e){const i=e.length?e[0].location:[180*Math.random(),90*Math.random()],n=new Je({target:t,layers:[new gi({source:new jo})],view:new ue({center:(0,Ot.mi)(i),zoom:e.length?15:5})}),o=new zn({source:new Qn({features:e.map((t=>new No.J(t)))}),style:t=>(0,No.q)(t)}),r=new $e.Z({condition:Te.V4,style:t=>(0,No.q)(t,!0)});return n.addLayer(o),n.addInteraction(r),{markerLayer:o,markerSelect:r}}(Ko,Vo),Ho=qo.getMap(),Jo=Ho.getView();qo.on("select",(t=>{const[e]=t.selected;t.selected.forEach((t=>{t.showInfo(Ho)})),t.deselected.forEach((t=>{t.hideInfo(Ho)})),e&&!e.hasInfo&&Jo.animate({center:e.get("geometry").getCoordinates(),duration:200})})),Xo||s.e(301).then(s.bind(s,3301)).then((({initControls:t})=>{const e=document.getElementById("controls");e.style.display="",t(e,Uo,qo)})).catch(console.error)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYXAtbWFya2Vycy93ZWJwYWNrL3J1bnRpbWUvbG9hZCBzY3JpcHQiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvd2VicGFjay9ydW50aW1lL2NzcyBsb2FkaW5nIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL0Fzc2VydGlvbkVycm9yLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL0NvbGxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvQ29sbGVjdGlvbkV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9EaXNwb3NhYmxlLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL0ltYWdlU3RhdGUuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlckV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9NYXBFdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvT2JqZWN0LmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL09iamVjdEV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9PYnNlcnZhYmxlLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2FycmF5LmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2Fzc2VydHMuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvY29sb3IuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvY29sb3JsaWtlLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2Nzcy5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9kb20uanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvZWFzaW5nLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvRXZlbnQuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL0V2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvVGFyZ2V0LmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy9jb25kaXRpb24uanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvZXh0ZW50LmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2V4dGVudC9Db3JuZXIuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvZXh0ZW50L1JlbGF0aW9uc2hpcC5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9mdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9HZW9tZXRyeUxheW91dC5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL0dlb21ldHJ5VHlwZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL1BvaW50LmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vR2VvbWV0cnkuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9TaW1wbGVHZW9tZXRyeS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvZGVmbGF0ZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvdHJhbnNmb3JtLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2hhcy5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9Qb2ludGVyLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1Byb3BlcnR5LmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1NlbGVjdC5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9tYXRoLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL29iai5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL1Byb2plY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvcHJvai9lcHNnMzg1Ny5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL2Vwc2c0MzI2LmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovcHJvamVjdGlvbnMuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvcHJvai90cmFuc2Zvcm1zLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3NwaGVyZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9wcm9qLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovVW5pdHMuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9zaXplLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3N0eWxlL1JlZ3VsYXJTaGFwZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9zdHlsZS9DaXJjbGUuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvc3R5bGUvRmlsbC5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9zdHlsZS9JbWFnZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9zdHlsZS9TdHJva2UuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvc3R5bGUvU3R5bGUuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvc3R5bGUvVGV4dFBsYWNlbWVudC5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC90cmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvdXRpbC5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9yYnVzaC9yYnVzaC5taW4uanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvRmVhdHVyZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9PdmVybGF5UG9zaXRpb25pbmcuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvT3ZlcmxheS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9zdHlsZS9UZXh0LmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vc3JjL21hcmtlci50cyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL3NyYy91dGlsLnRzIiwid2VicGFjazovL21hcC1tYXJrZXJzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21hcC1tYXJrZXJzL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL21hcC1tYXJrZXJzL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy93ZWJwYWNrL3J1bnRpbWUvZW5zdXJlIGNodW5rIiwid2VicGFjazovL21hcC1tYXJrZXJzL3dlYnBhY2svcnVudGltZS9nZXQgamF2YXNjcmlwdCBjaHVuayBmaWxlbmFtZSIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy93ZWJwYWNrL3J1bnRpbWUvZ2V0IG1pbmktY3NzIGNodW5rIGZpbGVuYW1lIiwid2VicGFjazovL21hcC1tYXJrZXJzL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL21hcC1tYXJrZXJzL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL21hcC1tYXJrZXJzL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3N0eWxlL0ljb25JbWFnZUNhY2hlLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL1Byb3BlcnR5LmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL0Jhc2UuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL0V2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvU3RhdGUuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvY29vcmRpbmF0ZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9NYXAuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL0V2ZW50LmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL0NvbXBvc2l0ZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9Hcm91cC5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9NYXBFdmVudC5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9NYXBCcm93c2VyRXZlbnQuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvcG9pbnRlci9FdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlckV2ZW50SGFuZGxlci5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9NYXBQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9zdHJ1Y3RzL1ByaW9yaXR5UXVldWUuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvVGlsZVF1ZXVlLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL1RpbGVTdGF0ZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9WaWV3SGludC5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9WaWV3UHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQvY29tbW9uLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2NlbnRlcmNvbnN0cmFpbnQuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvcmVzb2x1dGlvbmNvbnN0cmFpbnQuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvcm90YXRpb25jb25zdHJhaW50LmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9jbG9zZXN0LmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9zaW1wbGlmeS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvaW5mbGF0ZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvYXJlYS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL0xpbmVhclJpbmcuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2NvbnRhaW5zLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9pbnRlcnNlY3RzZXh0ZW50LmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9zZWdtZW50cy5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvcmV2ZXJzZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvb3JpZW50LmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vUG9seWdvbi5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvaW50ZXJpb3Jwb2ludC5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9WaWV3LmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL1BsdWdnYWJsZU1hcC5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sL0NvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9BdHRyaWJ1dGlvbi5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sL1JvdGF0ZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sL1pvb20uanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdQYW4uanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvQm94LmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdCb3guanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRHJhZ1pvb20uanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW4uanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL0tleUNvZGUuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL0tpbmV0aWMuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb20uanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vUGluY2hSb3RhdGUuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vUGluY2hab29tLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL01hcC5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL1RpbGVQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9CYXNlVGlsZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9MYXllci5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9jYW52YXMvTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvVGlsZVJhbmdlLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL2NhbnZhcy9UaWxlTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvVGlsZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9CYXNlVmVjdG9yLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9jYW52YXMvSW5zdHJ1Y3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL1ZlY3RvckNvbnRleHQuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy9CdWlsZGVyLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9jYW52YXMvSW1hZ2VCdWlsZGVyLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9jYW52YXMvTGluZVN0cmluZ0J1aWxkZXIuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy9Qb2x5Z29uQnVpbGRlci5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvc3RyYWlnaHRjaHVuay5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvY2FudmFzL1RleHRCdWlsZGVyLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9jYW52YXMvQnVpbGRlckdyb3VwLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9jYW52YXMvQnVpbGRlclR5cGUuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3RleHRwYXRoLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9sZW5ndGguanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy9FeGVjdXRvci5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvY2FudmFzL0V4ZWN1dG9yR3JvdXAuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy9JbW1lZGlhdGUuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvc3R5bGUvSWNvbkFuY2hvclVuaXRzLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3N0eWxlL0ljb25PcmlnaW4uanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2VCYXNlLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL0ltYWdlLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3N0eWxlL0ljb25JbWFnZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9zdHlsZS9JY29uLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL3ZlY3Rvci5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9jYW52YXMvVmVjdG9yTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy9oaXRkZXRlY3QuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvVmVjdG9yLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3N0cnVjdHMvUkJ1c2guanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1NvdXJjZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVmVjdG9yRXZlbnRUeXBlLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL2xvYWRpbmdzdHJhdGVneS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9mb3JtYXQvRm9ybWF0VHlwZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9mZWF0dXJlbG9hZGVyLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9WZWN0b3IuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvVGlsZS5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9JbWFnZVRpbGUuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qL1RyaWFuZ3VsYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL2NvbW1vbi5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9yZXByb2ouanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qL1RpbGUuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qL2NvbW1vbi5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9zdHJ1Y3RzL0xSVUNhY2hlLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3RpbGVjb29yZC5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9UaWxlQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQvVGlsZUdyaWQuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1RpbGUuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvdGlsZXVybGZ1bmN0aW9uLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9VcmxUaWxlLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9UaWxlRXZlbnRUeXBlLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9UaWxlSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWFwLW1hcmtlcnMvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1hZWi5qcyIsIndlYnBhY2s6Ly9tYXAtbWFya2Vycy8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvT1NNLmpzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL21hcC1tYXJrZXJzLy4vc3JjL21hcC50cyJdLCJuYW1lcyI6WyJpblByb2dyZXNzIiwiZGF0YVdlYnBhY2tQcmVmaXgiLCJsb2FkU3R5bGVzaGVldCIsImluc3RhbGxlZENzc0NodW5rcyIsImV4dGVuZFN0YXRpY3MiLCJfX2V4dGVuZHMiLCJkIiwiYiIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiX18iLCJ0aGlzIiwiY29uc3RydWN0b3IiLCJjcmVhdGUiLCJfc3VwZXIiLCJBc3NlcnRpb25FcnJvciIsImNvZGUiLCJfdGhpcyIsIm1lc3NhZ2UiLCJuYW1lIiwiRXJyb3IiLCJQcm9wZXJ0eSIsIkNvbGxlY3Rpb25FdmVudCIsInR5cGUiLCJvcHRfZWxlbWVudCIsIm9wdF9pbmRleCIsImVsZW1lbnQiLCJpbmRleCIsIkNvbGxlY3Rpb24iLCJvcHRfYXJyYXkiLCJvcHRfb3B0aW9ucyIsIm9wdGlvbnMiLCJ1bmlxdWVfIiwidW5pcXVlIiwiYXJyYXlfIiwiaSIsImlpIiwibGVuZ3RoIiwiYXNzZXJ0VW5pcXVlXyIsInVwZGF0ZUxlbmd0aF8iLCJjbGVhciIsImdldExlbmd0aCIsInBvcCIsImV4dGVuZCIsImFyciIsInB1c2giLCJmb3JFYWNoIiwiZiIsImFycmF5IiwiZ2V0QXJyYXkiLCJpdGVtIiwiZ2V0IiwiaW5zZXJ0QXQiLCJlbGVtIiwic3BsaWNlIiwiZGlzcGF0Y2hFdmVudCIsInJlbW92ZUF0IiwibiIsInJlbW92ZSIsInByZXYiLCJzZXRBdCIsImoiLCJ1bmRlZmluZWQiLCJzZXQiLCJvcHRfZXhjZXB0IiwiQUREIiwiUkVNT1ZFIiwiRGlzcG9zYWJsZSIsImRpc3Bvc2VkIiwiZGlzcG9zZSIsImRpc3Bvc2VJbnRlcm5hbCIsIklETEUiLCJMT0FESU5HIiwiTE9BREVEIiwiRVJST1IiLCJFTVBUWSIsIlNJTkdMRUNMSUNLIiwiQ0xJQ0siLCJEQkxDTElDSyIsIlBPSU5URVJEUkFHIiwiUE9JTlRFUk1PVkUiLCJQT0lOVEVSRE9XTiIsIlBPSU5URVJVUCIsIlBPSU5URVJPVkVSIiwiUE9JTlRFUk9VVCIsIlBPSU5URVJFTlRFUiIsIlBPSU5URVJMRUFWRSIsIlBPSU5URVJDQU5DRUwiLCJQT1NUUkVOREVSIiwiTU9WRVNUQVJUIiwiTU9WRUVORCIsIk9iamVjdEV2ZW50Iiwia2V5Iiwib2xkVmFsdWUiLCJCYXNlT2JqZWN0Iiwib3B0X3ZhbHVlcyIsInZhbHVlc18iLCJzZXRQcm9wZXJ0aWVzIiwidmFsdWUiLCJnZXRLZXlzIiwia2V5cyIsImdldFByb3BlcnRpZXMiLCJoYXNQcm9wZXJ0aWVzIiwibm90aWZ5IiwiZXZlbnRUeXBlIiwiZ2V0Q2hhbmdlRXZlbnRUeXBlIiwib3B0X3NpbGVudCIsInZhbHVlcyIsImFwcGx5UHJvcGVydGllcyIsInNvdXJjZSIsInVuc2V0IiwiY2hhbmdlRXZlbnRUeXBlQ2FjaGUiLCJQUk9QRVJUWUNIQU5HRSIsIk9ic2VydmFibGUiLCJyZXZpc2lvbl8iLCJjaGFuZ2VkIiwiZ2V0UmV2aXNpb24iLCJvbiIsImxpc3RlbmVyIiwiaXNBcnJheSIsImxlbiIsIm9uY2UiLCJvbF9rZXkiLCJ1biIsInVuQnlLZXkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwibnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbiIsImEiLCJpbmNsdWRlcyIsIm9iaiIsImluZGV4T2YiLCJsaW5lYXJGaW5kTmVhcmVzdCIsInRhcmdldCIsImRpcmVjdGlvbiIsInJldmVyc2VTdWJBcnJheSIsImJlZ2luIiwiZW5kIiwidG1wIiwiZGF0YSIsImV4dGVuc2lvbiIsImVxdWFscyIsImFycjEiLCJhcnIyIiwibGVuMSIsImlzU29ydGVkIiwib3B0X2Z1bmMiLCJvcHRfc3RyaWN0IiwiY29tcGFyZSIsImV2ZXJ5IiwiY3VycmVudFZhbCIsInJlcyIsImFzc2VydCIsImFzc2VydGlvbiIsImVycm9yQ29kZSIsIkhFWF9DT0xPUl9SRV8iLCJOQU1FRF9DT0xPUl9SRV8iLCJhc1N0cmluZyIsImNvbG9yIiwidG9TdHJpbmciLCJjYWNoZSIsImNhY2hlU2l6ZSIsImZyb21TdHJpbmciLCJzIiwiciIsImciLCJleGVjIiwiZWwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInJnYiIsImdldENvbXB1dGVkU3R5bGUiLCJyZW1vdmVDaGlsZCIsImZyb21OYW1lZCIsImhhc0FscGhhIiwicGFyc2VJbnQiLCJzdWJzdHIiLCJub3JtYWxpemUiLCJzbGljZSIsInNwbGl0IiwibWFwIiwiTnVtYmVyIiwiZnJvbVN0cmluZ0ludGVybmFsXyIsImFzQXJyYXkiLCJhc0NvbG9yTGlrZSIsIkNMQVNTX0hJRERFTiIsIkNMQVNTX1NFTEVDVEFCTEUiLCJDTEFTU19VTlNFTEVDVEFCTEUiLCJDTEFTU19DT05UUk9MIiwiQ0xBU1NfQ09MTEFQU0VEIiwiZm9udFJlZ0V4IiwiUmVnRXhwIiwiam9pbiIsImZvbnRSZWdFeE1hdGNoSW5kZXgiLCJnZXRGb250UGFyYW1ldGVycyIsImZvbnRTcGVjIiwibWF0Y2giLCJsaW5lSGVpZ2h0Iiwic2l6ZSIsIndlaWdodCIsInZhcmlhbnQiLCJmYW1pbGllcyIsImZhbWlseSIsImNyZWF0ZUNhbnZhc0NvbnRleHQyRCIsIm9wdF93aWR0aCIsIm9wdF9oZWlnaHQiLCJvcHRfY2FudmFzUG9vbCIsImNhbnZhcyIsInNoaWZ0IiwiT2Zmc2NyZWVuQ2FudmFzIiwid2lkdGgiLCJoZWlnaHQiLCJnZXRDb250ZXh0Iiwib3V0ZXJXaWR0aCIsIm9mZnNldFdpZHRoIiwibWFyZ2luTGVmdCIsIm1hcmdpblJpZ2h0Iiwib3V0ZXJIZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJtYXJnaW5Ub3AiLCJtYXJnaW5Cb3R0b20iLCJyZXBsYWNlTm9kZSIsIm5ld05vZGUiLCJvbGROb2RlIiwicGFyZW50IiwicGFyZW50Tm9kZSIsInJlcGxhY2VDaGlsZCIsInJlbW92ZU5vZGUiLCJub2RlIiwicmVtb3ZlQ2hpbGRyZW4iLCJsYXN0Q2hpbGQiLCJyZXBsYWNlQ2hpbGRyZW4iLCJjaGlsZHJlbiIsIm9sZENoaWxkcmVuIiwiY2hpbGROb2RlcyIsIm9sZENoaWxkIiwibmV3Q2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJlYXNlSW4iLCJ0IiwiTWF0aCIsInBvdyIsImVhc2VPdXQiLCJpbkFuZE91dCIsImxpbmVhciIsImxpc3RlbiIsIm9wdF90aGlzIiwib3B0X29uY2UiLCJiaW5kIiwib3JpZ2luYWxMaXN0ZW5lcl8xIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJldmVudHNLZXkiLCJhZGRFdmVudExpc3RlbmVyIiwibGlzdGVuT25jZSIsInVubGlzdGVuQnlLZXkiLCJCYXNlRXZlbnQiLCJwcm9wYWdhdGlvblN0b3BwZWQiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsIkNIQU5HRSIsIkJMVVIiLCJDTEVBUiIsIkNPTlRFWFRNRU5VIiwiRFJBR0VOVEVSIiwiRFJBR09WRVIiLCJEUk9QIiwiRk9DVVMiLCJLRVlET1dOIiwiS0VZUFJFU1MiLCJMT0FEIiwiUkVTSVpFIiwiVE9VQ0hNT1ZFIiwiV0hFRUwiLCJUYXJnZXQiLCJvcHRfdGFyZ2V0IiwiZXZlbnRUYXJnZXRfIiwicGVuZGluZ1JlbW92YWxzXyIsImRpc3BhdGNoaW5nXyIsImxpc3RlbmVyc18iLCJsaXN0ZW5lcnMiLCJsaXN0ZW5lcnNGb3JUeXBlIiwiZXZlbnQiLCJldnQiLCJwcm9wYWdhdGUiLCJkaXNwYXRjaGluZyIsInBlbmRpbmdSZW1vdmFscyIsImhhbmRsZUV2ZW50IiwicHIiLCJnZXRMaXN0ZW5lcnMiLCJoYXNMaXN0ZW5lciIsIm9wdF90eXBlIiwiYWxsIiwidmFyX2FyZ3MiLCJjb25kaXRpb25zIiwicGFzcyIsImFsdFNoaWZ0S2V5c09ubHkiLCJtYXBCcm93c2VyRXZlbnQiLCJvcmlnaW5hbEV2ZW50IiwiYWx0S2V5IiwibWV0YUtleSIsImN0cmxLZXkiLCJzaGlmdEtleSIsImZvY3VzV2l0aFRhYmluZGV4IiwiZ2V0VGFyZ2V0RWxlbWVudCIsImhhc0F0dHJpYnV0ZSIsImNvbnRhaW5zIiwiYWN0aXZlRWxlbWVudCIsImZvY3VzIiwiYWx3YXlzIiwiY2xpY2siLCJtb3VzZUFjdGlvbkJ1dHRvbiIsImJ1dHRvbiIsIm5ldmVyIiwic2luZ2xlQ2xpY2siLCJub01vZGlmaWVyS2V5cyIsInNoaWZ0S2V5T25seSIsInRhcmdldE5vdEVkaXRhYmxlIiwidGFnTmFtZSIsIm1vdXNlT25seSIsInBvaW50ZXJFdmVudCIsInBvaW50ZXJUeXBlIiwicHJpbWFyeUFjdGlvbiIsImlzUHJpbWFyeSIsImJvdW5kaW5nRXh0ZW50IiwiY29vcmRpbmF0ZXMiLCJleHRlbnQiLCJJbmZpbml0eSIsImV4dGVuZENvb3JkaW5hdGUiLCJidWZmZXIiLCJvcHRfZXh0ZW50IiwiY2xvbmUiLCJjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFkiLCJ4IiwieSIsImR4IiwiZHkiLCJjb250YWluc0Nvb3JkaW5hdGUiLCJjb29yZGluYXRlIiwiY29udGFpbnNYWSIsImNvbnRhaW5zRXh0ZW50IiwiZXh0ZW50MSIsImV4dGVudDIiLCJjb29yZGluYXRlUmVsYXRpb25zaGlwIiwibWluWCIsIm1pblkiLCJtYXhYIiwibWF4WSIsInJlbGF0aW9uc2hpcCIsImNyZWF0ZUVtcHR5IiwiY3JlYXRlT3JVcGRhdGUiLCJjcmVhdGVPclVwZGF0ZUVtcHR5IiwiY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZSIsImNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGVzIiwiZXh0ZW5kQ29vcmRpbmF0ZXMiLCJjcmVhdGVPclVwZGF0ZUZyb21GbGF0Q29vcmRpbmF0ZXMiLCJmbGF0Q29vcmRpbmF0ZXMiLCJvZmZzZXQiLCJzdHJpZGUiLCJleHRlbmRGbGF0Q29vcmRpbmF0ZXMiLCJleHRlbmRYWSIsIm1pbiIsIm1heCIsImZvckVhY2hDb3JuZXIiLCJjYWxsYmFjayIsInZhbCIsImdldEJvdHRvbUxlZnQiLCJnZXRCb3R0b21SaWdodCIsImdldFRvcFJpZ2h0IiwiZ2V0VG9wTGVmdCIsImdldEFyZWEiLCJhcmVhIiwiaXNFbXB0eSIsImdldFdpZHRoIiwiZ2V0SGVpZ2h0IiwiZ2V0Q2VudGVyIiwiZ2V0Q29ybmVyIiwiY29ybmVyIiwiZ2V0Rm9yVmlld0FuZFNpemUiLCJjZW50ZXIiLCJyZXNvbHV0aW9uIiwicm90YXRpb24iLCJjb3NSb3RhdGlvbiIsImNvcyIsInNpblJvdGF0aW9uIiwic2luIiwieENvcyIsInhTaW4iLCJ5Q29zIiwieVNpbiIsIngwIiwieDEiLCJ4MiIsIngzIiwieTAiLCJ5MSIsInkyIiwieTMiLCJnZXRJbnRlcnNlY3Rpb24iLCJpbnRlcnNlY3Rpb24iLCJpbnRlcnNlY3RzIiwicmV0dXJuT3JVcGRhdGUiLCJzY2FsZUZyb21DZW50ZXIiLCJkZWx0YVgiLCJkZWx0YVkiLCJpbnRlcnNlY3RzU2VnbWVudCIsInN0YXJ0Iiwic3RhcnRSZWwiLCJlbmRSZWwiLCJzdGFydFgiLCJzdGFydFkiLCJlbmRYIiwiZW5kWSIsInNsb3BlIiwiYXBwbHlUcmFuc2Zvcm0iLCJ0cmFuc2Zvcm1GbiIsIm9wdF9zdG9wcyIsInhzIiwieXMiLCJsIiwiX2JvdW5kaW5nRXh0ZW50WFlzIiwid3JhcFgiLCJwcm9qZWN0aW9uIiwicHJvamVjdGlvbkV4dGVudCIsImdldEV4dGVudCIsImNhbldyYXBYIiwid29ybGRXaWR0aCIsImZsb29yIiwiQk9UVE9NX0xFRlQiLCJCT1RUT01fUklHSFQiLCJUT1BfTEVGVCIsIlRPUF9SSUdIVCIsIlVOS05PV04iLCJJTlRFUlNFQ1RJTkciLCJBQk9WRSIsIlJJR0hUIiwiQkVMT1ciLCJMRUZUIiwiVFJVRSIsIkZBTFNFIiwiVk9JRCIsIm1lbW9pemVPbmUiLCJmbiIsImxhc3RSZXN1bHQiLCJsYXN0QXJncyIsImxhc3RUaGlzIiwiY2FsbGVkIiwibmV4dEFyZ3MiLCJYWSIsIlhZWiIsIlhZTSIsIlhZWk0iLCJQT0lOVCIsIkxJTkVfU1RSSU5HIiwiTElORUFSX1JJTkciLCJQT0xZR09OIiwiTVVMVElfUE9JTlQiLCJNVUxUSV9MSU5FX1NUUklORyIsIk1VTFRJX1BPTFlHT04iLCJHRU9NRVRSWV9DT0xMRUNUSU9OIiwiQ0lSQ0xFIiwiUG9pbnQiLCJvcHRfbGF5b3V0Iiwic2V0Q29vcmRpbmF0ZXMiLCJwb2ludCIsImxheW91dCIsImNsb3Nlc3RQb2ludFhZIiwiY2xvc2VzdFBvaW50IiwibWluU3F1YXJlZERpc3RhbmNlIiwic3F1YXJlZERpc3RhbmNlIiwiZ2V0Q29vcmRpbmF0ZXMiLCJjb21wdXRlRXh0ZW50IiwiZ2V0VHlwZSIsImludGVyc2VjdHNFeHRlbnQiLCJzZXRMYXlvdXQiLCJ0bXBUcmFuc2Zvcm0iLCJHZW9tZXRyeSIsImV4dGVudF8iLCJleHRlbnRSZXZpc2lvbl8iLCJzaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlIiwic2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24iLCJzaW1wbGlmeVRyYW5zZm9ybWVkSW50ZXJuYWwiLCJyZXZpc2lvbiIsInNxdWFyZWRUb2xlcmFuY2UiLCJvcHRfdHJhbnNmb3JtIiwiZ2V0U2ltcGxpZmllZEdlb21ldHJ5Iiwic2ltcGxpZnlUcmFuc2Zvcm1lZCIsImNvb3JkIiwiZ2V0Q2xvc2VzdFBvaW50Iiwib3B0X2Nsb3Nlc3RQb2ludCIsIk5hTiIsImludGVyc2VjdHNDb29yZGluYXRlIiwiaXNOYU4iLCJyb3RhdGUiLCJhbmdsZSIsImFuY2hvciIsInNjYWxlIiwic3giLCJvcHRfc3kiLCJvcHRfYW5jaG9yIiwic2ltcGxpZnkiLCJ0b2xlcmFuY2UiLCJ0cmFuc2xhdGUiLCJ0cmFuc2Zvcm0iLCJkZXN0aW5hdGlvbiIsInNvdXJjZVByb2oiLCJnZXRVbml0cyIsIlVuaXRzIiwiaW5Db29yZGluYXRlcyIsIm91dENvb3JkaW5hdGVzIiwicGl4ZWxFeHRlbnQiLCJwcm9qZWN0ZWRFeHRlbnQiLCJnZXRXb3JsZEV4dGVudCIsImdldFN0cmlkZUZvckxheW91dCIsIkdlb21ldHJ5TGF5b3V0IiwidHJhbnNmb3JtR2VvbTJEIiwic2ltcGxlR2VvbWV0cnkiLCJvcHRfZGVzdCIsImdldEZsYXRDb29yZGluYXRlcyIsImdldFN0cmlkZSIsIlNpbXBsZUdlb21ldHJ5IiwiZ2V0Rmlyc3RDb29yZGluYXRlIiwiZ2V0TGFzdENvb3JkaW5hdGUiLCJnZXRMYXlvdXQiLCJzaW1wbGlmaWVkR2VvbWV0cnkiLCJnZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbCIsInNldEZsYXRDb29yZGluYXRlcyIsIm5lc3RpbmciLCJnZXRMYXlvdXRGb3JTdHJpZGUiLCJzeSIsImRlZmxhdGVDb29yZGluYXRlIiwiZGVmbGF0ZUNvb3JkaW5hdGVzIiwiZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkiLCJjb29yZGluYXRlc3MiLCJvcHRfZW5kcyIsImVuZHMiLCJqaiIsInRyYW5zZm9ybTJEIiwiZGVzdCIsImFuY2hvclgiLCJhbmNob3JZIiwiayIsInVhIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJGSVJFRk9YIiwiV0VCS0lUIiwiTUFDIiwiREVWSUNFX1BJWEVMX1JBVElPIiwiZGV2aWNlUGl4ZWxSYXRpbyIsIldPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTIiwiV29ya2VyR2xvYmFsU2NvcGUiLCJzZWxmIiwiSU1BR0VfREVDT0RFIiwiSW1hZ2UiLCJkZWNvZGUiLCJQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyIsInBhc3NpdmUiLCJkZWZpbmVQcm9wZXJ0eSIsIndpbmRvdyIsImVycm9yIiwicGFuIiwidmlldyIsImRlbHRhIiwib3B0X2R1cmF0aW9uIiwiY3VycmVudENlbnRlciIsImdldENlbnRlckludGVybmFsIiwiYW5pbWF0ZUludGVybmFsIiwiZHVyYXRpb24iLCJlYXNpbmciLCJnZXRDb25zdHJhaW5lZENlbnRlciIsInpvb21CeURlbHRhIiwiY3VycmVudFpvb20iLCJnZXRab29tIiwibmV3Wm9vbSIsImdldENvbnN0cmFpbmVkWm9vbSIsIm5ld1Jlc29sdXRpb24iLCJnZXRSZXNvbHV0aW9uRm9yWm9vbSIsImdldEFuaW1hdGluZyIsImNhbmNlbEFuaW1hdGlvbnMiLCJhbmltYXRlIiwiSW50ZXJhY3Rpb24iLCJtYXBfIiwic2V0QWN0aXZlIiwiZ2V0QWN0aXZlIiwiZ2V0TWFwIiwiYWN0aXZlIiwic2V0TWFwIiwiY2VudHJvaWQiLCJwb2ludGVyRXZlbnRzIiwiY2xpZW50WCIsImNsaWVudFkiLCJQb2ludGVySW50ZXJhY3Rpb24iLCJoYW5kbGVEb3duRXZlbnQiLCJoYW5kbGVEcmFnRXZlbnQiLCJoYW5kbGVNb3ZlRXZlbnQiLCJoYW5kbGVVcEV2ZW50Iiwic3RvcERvd24iLCJoYW5kbGluZ0Rvd25VcFNlcXVlbmNlIiwidHJhY2tlZFBvaW50ZXJzXyIsInRhcmdldFBvaW50ZXJzIiwiZ2V0UG9pbnRlckNvdW50Iiwic3RvcEV2ZW50IiwidXBkYXRlVHJhY2tlZFBvaW50ZXJzXyIsImhhbmRsZWRVcCIsImhhbmRsZWQiLCJpc1BvaW50ZXJEcmFnZ2luZ0V2ZW50IiwiZXZlbnRfMSIsImlkIiwicG9pbnRlcklkIiwiQUNUSVZFIiwiU2VsZWN0RXZlbnQiLCJzZWxlY3RlZCIsImRlc2VsZWN0ZWQiLCJvcmlnaW5hbEZlYXR1cmVTdHlsZXMiLCJTZWxlY3QiLCJzdHlsZXMiLCJsYXllckZpbHRlciIsImJvdW5kQWRkRmVhdHVyZV8iLCJhZGRGZWF0dXJlXyIsImJvdW5kUmVtb3ZlRmVhdHVyZV8iLCJyZW1vdmVGZWF0dXJlXyIsImNvbmRpdGlvbl8iLCJjb25kaXRpb24iLCJhZGRDb25kaXRpb25fIiwiYWRkQ29uZGl0aW9uIiwicmVtb3ZlQ29uZGl0aW9uXyIsInJlbW92ZUNvbmRpdGlvbiIsInRvZ2dsZUNvbmRpdGlvbl8iLCJ0b2dnbGVDb25kaXRpb24iLCJtdWx0aV8iLCJtdWx0aSIsImZpbHRlcl8iLCJmaWx0ZXIiLCJoaXRUb2xlcmFuY2VfIiwiaGl0VG9sZXJhbmNlIiwic3R5bGVfIiwiZmVhdHVyZSIsImdldEdlb21ldHJ5IiwiZmVhdHVyZXNfIiwiZmVhdHVyZXMiLCJsYXllcnMiLCJsYXllcnNfMSIsImxheWVyIiwibGF5ZXJGaWx0ZXJfIiwiZmVhdHVyZUxheWVyQXNzb2NpYXRpb25fIiwiYWRkRmVhdHVyZUxheWVyQXNzb2NpYXRpb25fIiwiZ2V0RmVhdHVyZXMiLCJnZXRIaXRUb2xlcmFuY2UiLCJnZXRMYXllciIsInNldEhpdFRvbGVyYW5jZSIsInJlc3RvcmVQcmV2aW91c1N0eWxlXyIsImFwcGx5U2VsZWN0ZWRTdHlsZV8iLCJnZXRTdHlsZSIsInNldFN0eWxlIiwiaW50ZXJhY3Rpb25zIiwiZ2V0SW50ZXJhY3Rpb25zIiwiaW50ZXJhY3Rpb24iLCJsYXN0SW5kZXhPZiIsInJlbW92ZUZlYXR1cmVMYXllckFzc29jaWF0aW9uXyIsImFkZCIsInRvZ2dsZSIsImZvckVhY2hGZWF0dXJlQXRQaXhlbCIsInBpeGVsIiwiY2xhbXAiLCJjb3NoIiwiZXhwIiwibG9nMiIsImxvZyIsIkxPRzJFIiwic3F1YXJlZFNlZ21lbnREaXN0YW5jZSIsInNvbHZlTGluZWFyU3lzdGVtIiwibWF0IiwibWF4Um93IiwibWF4RWwiLCJhYnMiLCJhYnNWYWx1ZSIsImNvZWYiLCJtIiwidG9SYWRpYW5zIiwiYW5nbGVJbkRlZ3JlZXMiLCJQSSIsIm1vZHVsbyIsImxlcnAiLCJhc3NpZ24iLCJ2YXJfc291cmNlcyIsIlR5cGVFcnJvciIsIm91dHB1dCIsIm9iamVjdCIsInByb3BlcnR5IiwiZ2V0VmFsdWVzIiwiUHJvamVjdGlvbiIsImNvZGVfIiwidW5pdHNfIiwid29ybGRFeHRlbnRfIiwid29ybGRFeHRlbnQiLCJheGlzT3JpZW50YXRpb25fIiwiYXhpc09yaWVudGF0aW9uIiwiZ2xvYmFsXyIsImdsb2JhbCIsImNhbldyYXBYXyIsImdldFBvaW50UmVzb2x1dGlvbkZ1bmNfIiwiZ2V0UG9pbnRSZXNvbHV0aW9uIiwiZGVmYXVsdFRpbGVHcmlkXyIsIm1ldGVyc1BlclVuaXRfIiwibWV0ZXJzUGVyVW5pdCIsImdldENvZGUiLCJnZXRNZXRlcnNQZXJVbml0IiwiZ2V0QXhpc09yaWVudGF0aW9uIiwiaXNHbG9iYWwiLCJzZXRHbG9iYWwiLCJnZXREZWZhdWx0VGlsZUdyaWQiLCJzZXREZWZhdWx0VGlsZUdyaWQiLCJ0aWxlR3JpZCIsInNldEV4dGVudCIsInNldFdvcmxkRXh0ZW50Iiwic2V0R2V0UG9pbnRSZXNvbHV0aW9uIiwiZnVuYyIsImdldFBvaW50UmVzb2x1dGlvbkZ1bmMiLCJSQURJVVMiLCJIQUxGX1NJWkUiLCJFWFRFTlQiLCJXT1JMRF9FWFRFTlQiLCJNQVhfU0FGRV9ZIiwidGFuIiwiRVBTRzM4NTdQcm9qZWN0aW9uIiwidW5pdHMiLCJQUk9KRUNUSU9OUyIsIk1FVEVSU19QRVJfVU5JVCIsIkVQU0c0MzI2UHJvamVjdGlvbiIsIm9wdF9heGlzT3JpZW50YXRpb24iLCJ0cmFuc2Zvcm1zIiwic291cmNlQ29kZSIsImRlc3RpbmF0aW9uQ29kZSIsImdldERpc3RhbmNlIiwiYzEiLCJjMiIsIm9wdF9yYWRpdXMiLCJyYWRpdXMiLCJsYXQxIiwibGF0MiIsImRlbHRhTGF0QnkyIiwiZGVsdGFMb25CeTIiLCJhdGFuMiIsInNxcnQiLCJjbG9uZVRyYW5zZm9ybSIsImlucHV0Iiwib3B0X291dHB1dCIsIm9wdF9kaW1lbnNpb24iLCJpZGVudGl0eVRyYW5zZm9ybSIsImFkZFByb2plY3Rpb24iLCJwcm9qZWN0aW9uTGlrZSIsInJlcGxhY2UiLCJvcHRfdW5pdHMiLCJwb2ludFJlc29sdXRpb24iLCJnZXR0ZXIiLCJ0b0VQU0c0MzI2XzEiLCJnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMiLCJ2ZXJ0aWNlcyIsImFkZEVxdWl2YWxlbnRQcm9qZWN0aW9ucyIsInByb2plY3Rpb25zIiwiYWRkUHJvamVjdGlvbnMiLCJjcmVhdGVQcm9qZWN0aW9uIiwiZGVmYXVsdENvZGUiLCJmcm9tTG9uTGF0Iiwib3B0X3Byb2plY3Rpb24iLCJ0b0xvbkxhdCIsImxvbkxhdCIsImxvbiIsImVxdWl2YWxlbnQiLCJwcm9qZWN0aW9uMSIsInByb2plY3Rpb24yIiwiZXF1YWxVbml0cyIsInNvdXJjZVByb2plY3Rpb24iLCJkZXN0aW5hdGlvblByb2plY3Rpb24iLCJ0cmFuc2Zvcm1GdW5jIiwiZ2V0VHJhbnNmb3JtIiwicHJvamVjdGlvbnMyIiwiZm9yd2FyZFRyYW5zZm9ybSIsImludmVyc2VUcmFuc2Zvcm0iLCJ1c2VyUHJvamVjdGlvbiIsImdldFVzZXJQcm9qZWN0aW9uIiwidG9Vc2VyQ29vcmRpbmF0ZSIsImZyb21Vc2VyQ29vcmRpbmF0ZSIsImRlc3RQcm9qZWN0aW9uIiwidG9Vc2VyRXh0ZW50IiwiZnJvbVVzZXJFeHRlbnQiLCJkaW1lbnNpb24iLCJhdGFuIiwiREVHUkVFUyIsIkZFRVQiLCJNRVRFUlMiLCJQSVhFTFMiLCJUSUxFX1BJWEVMUyIsIlVTRkVFVCIsImRlZmF1bHRGb250IiwiZGVmYXVsdEZpbGxTdHlsZSIsImRlZmF1bHRMaW5lQ2FwIiwiZGVmYXVsdExpbmVEYXNoIiwiZGVmYXVsdExpbmVEYXNoT2Zmc2V0IiwiZGVmYXVsdExpbmVKb2luIiwiZGVmYXVsdE1pdGVyTGltaXQiLCJkZWZhdWx0U3Ryb2tlU3R5bGUiLCJkZWZhdWx0VGV4dEFsaWduIiwiZGVmYXVsdFRleHRCYXNlbGluZSIsImRlZmF1bHRQYWRkaW5nIiwiZGVmYXVsdExpbmVXaWR0aCIsImNoZWNrZWRGb250cyIsInNldFNpemUiLCJjb25zb2xlIiwid2FybiIsIm1lYXN1cmVGb250IiwiZGl2IiwibWVhc3VyZUNvbnRleHQiLCJ0ZXh0SGVpZ2h0cyIsInJlZ2lzdGVyRm9udCIsImludGVydmFsIiwicmVmZXJlbmNlV2lkdGgiLCJyZWZlcmVuY2VGb250cyIsInRleHQiLCJpc0F2YWlsYWJsZSIsImZvbnRTdHlsZSIsImZvbnRXZWlnaHQiLCJmb250RmFtaWx5IiwiYXZhaWxhYmxlIiwicmVmZXJlbmNlRm9udCIsIm1lYXN1cmVUZXh0V2lkdGgiLCJjaGVjayIsImRvbmUiLCJmb250cyIsImZvbnQiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJtZWFzdXJlVGV4dEhlaWdodCIsIm1ldHJpY3MiLCJtZWFzdXJlVGV4dCIsImFjdHVhbEJvdW5kaW5nQm94QXNjZW50IiwiYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50IiwiaW5uZXJIVE1MIiwibWFyZ2luIiwicGFkZGluZyIsInBvc2l0aW9uIiwibGVmdCIsIm1lYXN1cmVBbmRDYWNoZVRleHRXaWR0aCIsIm1lYXN1cmVUZXh0V2lkdGhzIiwibGluZXMiLCJ3aWR0aHMiLCJudW1MaW5lcyIsImN1cnJlbnRXaWR0aCIsInJvdGF0ZUF0T2Zmc2V0IiwiY29udGV4dCIsIm9mZnNldFgiLCJvZmZzZXRZIiwiZHJhd0ltYWdlT3JMYWJlbCIsIm9wYWNpdHkiLCJsYWJlbE9ySW1hZ2UiLCJvcmlnaW5YIiwib3JpZ2luWSIsInciLCJoIiwic2F2ZSIsImdsb2JhbEFscGhhIiwic2V0VHJhbnNmb3JtIiwiY29udGV4dEluc3RydWN0aW9ucyIsImxhYmVsIiwiZXhlY3V0ZUxhYmVsSW5zdHJ1Y3Rpb25zIiwiZHJhd0ltYWdlIiwicmVzdG9yZSIsImNyZWF0ZVRyYW5zZm9ybVN0cmluZ0NhbnZhcyIsImNyZWF0ZVRyYW5zZm9ybVN0cmluZyIsImhhc0FyZWEiLCJyYXRpbyIsIm9wdF9zaXplIiwidG9TaXplIiwiUmVndWxhclNoYXBlIiwicm90YXRlV2l0aFZpZXciLCJkaXNwbGFjZW1lbnQiLCJjYW52YXNfIiwiaGl0RGV0ZWN0aW9uQ2FudmFzXyIsImZpbGxfIiwiZmlsbCIsIm9yaWdpbl8iLCJwb2ludHNfIiwicG9pbnRzIiwicmFkaXVzXyIsInJhZGl1czEiLCJyYWRpdXMyXyIsInJhZGl1czIiLCJhbmdsZV8iLCJzdHJva2VfIiwic3Ryb2tlIiwiYW5jaG9yXyIsInNpemVfIiwiaW1hZ2VTaXplXyIsImhpdERldGVjdGlvbkltYWdlU2l6ZV8iLCJyZW5kZXIiLCJnZXRTY2FsZSIsImdldEZpbGwiLCJnZXRQb2ludHMiLCJnZXRSYWRpdXMiLCJnZXRSYWRpdXMyIiwiZ2V0QW5nbGUiLCJnZXRTdHJva2UiLCJnZXRSb3RhdGlvbiIsImdldFJvdGF0ZVdpdGhWaWV3IiwiZ2V0RGlzcGxhY2VtZW50Iiwic2V0T3BhY2l0eSIsImdldE9wYWNpdHkiLCJnZXRBbmNob3IiLCJnZXRIaXREZXRlY3Rpb25JbWFnZSIsInJlbmRlck9wdGlvbnMiLCJjcmVhdGVSZW5kZXJPcHRpb25zIiwiY3JlYXRlSGl0RGV0ZWN0aW9uQ2FudmFzXyIsImdldEltYWdlIiwicGl4ZWxSYXRpbyIsImRyYXdfIiwiZ2V0UGl4ZWxSYXRpbyIsImdldEltYWdlU2l6ZSIsImdldEhpdERldGVjdGlvbkltYWdlU2l6ZSIsImdldEltYWdlU3RhdGUiLCJJbWFnZVN0YXRlIiwiZ2V0T3JpZ2luIiwiZ2V0U2l6ZSIsImxpc3RlbkltYWdlQ2hhbmdlIiwibG9hZCIsInVubGlzdGVuSW1hZ2VDaGFuZ2UiLCJzdHJva2VTdHlsZSIsImxpbmVDYXAiLCJsaW5lSm9pbiIsIm1pdGVyTGltaXQiLCJsaW5lRGFzaCIsImxpbmVEYXNoT2Zmc2V0Iiwic3Ryb2tlV2lkdGgiLCJnZXRDb2xvciIsImdldExpbmVEYXNoIiwiZ2V0TGluZURhc2hPZmZzZXQiLCJnZXRMaW5lSm9pbiIsImdldExpbmVDYXAiLCJnZXRNaXRlckxpbWl0IiwiaW1hZ2VTaXplIiwiYW5nbGUwIiwicmFkaXVzQyIsImJlZ2luUGF0aCIsImFyYyIsImxpbmVUbyIsImZpbGxTdHlsZSIsImxpbmVXaWR0aCIsInNldExpbmVEYXNoIiwiY2xvc2VQYXRoIiwiZHJhd0hpdERldGVjdGlvbkNhbnZhc18iLCJDaXJjbGVTdHlsZSIsInNldFJhZGl1cyIsIkZpbGwiLCJjb2xvcl8iLCJzZXRDb2xvciIsIkltYWdlU3R5bGUiLCJvcGFjaXR5XyIsInJvdGF0ZVdpdGhWaWV3XyIsInJvdGF0aW9uXyIsInNjYWxlXyIsInNjYWxlQXJyYXlfIiwiZGlzcGxhY2VtZW50XyIsImdldFNjYWxlQXJyYXkiLCJzZXRSb3RhdGVXaXRoVmlldyIsInNldFJvdGF0aW9uIiwic2V0U2NhbGUiLCJTdHJva2UiLCJsaW5lQ2FwXyIsImxpbmVEYXNoXyIsImxpbmVEYXNoT2Zmc2V0XyIsImxpbmVKb2luXyIsIm1pdGVyTGltaXRfIiwid2lkdGhfIiwic2V0TGluZUNhcCIsInNldExpbmVEYXNoT2Zmc2V0Iiwic2V0TGluZUpvaW4iLCJzZXRNaXRlckxpbWl0Iiwic2V0V2lkdGgiLCJTdHlsZSIsImdlb21ldHJ5XyIsImdlb21ldHJ5RnVuY3Rpb25fIiwiZGVmYXVsdEdlb21ldHJ5RnVuY3Rpb24iLCJnZW9tZXRyeSIsInNldEdlb21ldHJ5IiwiaW1hZ2VfIiwiaW1hZ2UiLCJyZW5kZXJlcl8iLCJyZW5kZXJlciIsInRleHRfIiwiekluZGV4XyIsInpJbmRleCIsImdldFRleHQiLCJnZXRaSW5kZXgiLCJnZXRSZW5kZXJlciIsInNldFJlbmRlcmVyIiwiZ2V0R2VvbWV0cnlGdW5jdGlvbiIsInNldEZpbGwiLCJzZXRJbWFnZSIsInNldFN0cm9rZSIsInNldFRleHQiLCJzZXRaSW5kZXgiLCJ0b0Z1bmN0aW9uIiwic3R5bGVGdW5jdGlvbiIsInN0eWxlc18xIiwiZGVmYXVsdFN0eWxlcyIsImNyZWF0ZURlZmF1bHRTdHlsZSIsImNyZWF0ZUVkaXRpbmdTdHlsZSIsIndoaXRlIiwiYmx1ZSIsImNvbmNhdCIsIkxJTkUiLCJzZXRGcm9tQXJyYXkiLCJ0cmFuc2Zvcm0xIiwidHJhbnNmb3JtMiIsIm1ha2VTY2FsZSIsImMiLCJlIiwiY29tcG9zZSIsImR4MSIsImR5MSIsImR4MiIsImR5MiIsIm1ha2VJbnZlcnNlIiwiZGV0IiwiYWJzdHJhY3QiLCJ1aWRDb3VudGVyXyIsImdldFVpZCIsIm9sX3VpZCIsIlN0cmluZyIsIlZFUlNJT04iLCJtb2R1bGUiLCJleHBvcnRzIiwibyIsInUiLCJfbWF4RW50cmllcyIsIl9taW5FbnRyaWVzIiwiY2VpbCIsImxlYWYiLCJfYWxsIiwic2VhcmNoIiwidG9CQm94IiwiY29sbGlkZXMiLCJpbnNlcnQiLCJfYnVpbGQiLCJfc3BsaXRSb290IiwiX2luc2VydCIsIl9jb25kZW5zZSIsImNvbXBhcmVNaW5YIiwiY29tcGFyZU1pblkiLCJ0b0pTT04iLCJmcm9tSlNPTiIsIl9jaG9vc2VTdWJ0cmVlIiwiX3NwbGl0IiwiX2FkanVzdFBhcmVudEJCb3hlcyIsIl9jaG9vc2VTcGxpdEF4aXMiLCJfY2hvb3NlU3BsaXRJbmRleCIsInYiLCJNIiwiX2FsbERpc3RNYXJnaW4iLCJzb3J0IiwiRmVhdHVyZSIsIm9wdF9nZW9tZXRyeU9yUHJvcGVydGllcyIsImlkXyIsImdlb21ldHJ5TmFtZV8iLCJzdHlsZUZ1bmN0aW9uXyIsImdlb21ldHJ5Q2hhbmdlS2V5XyIsImhhbmRsZUdlb21ldHJ5Q2hhbmdlZF8iLCJwcm9wZXJ0aWVzIiwic2V0R2VvbWV0cnlOYW1lIiwiZ2V0R2VvbWV0cnlOYW1lIiwiZ2V0SWQiLCJnZXRTdHlsZUZ1bmN0aW9uIiwiaGFuZGxlR2VvbWV0cnlDaGFuZ2VfIiwiRXZlbnRUeXBlIiwib3B0X3N0eWxlIiwic2V0SWQiLCJPdmVybGF5IiwiaW5zZXJ0Rmlyc3QiLCJjbGFzc05hbWUiLCJhdXRvUGFuIiwiYW5pbWF0aW9uIiwiYXV0b1BhbkFuaW1hdGlvbiIsImF1dG9QYW5NYXJnaW4iLCJyZW5kZXJlZCIsInRyYW5zZm9ybV8iLCJ2aXNpYmxlIiwibWFwUG9zdHJlbmRlckxpc3RlbmVyS2V5IiwiaGFuZGxlRWxlbWVudENoYW5nZWQiLCJoYW5kbGVNYXBDaGFuZ2VkIiwiaGFuZGxlT2Zmc2V0Q2hhbmdlZCIsImhhbmRsZVBvc2l0aW9uQ2hhbmdlZCIsImhhbmRsZVBvc2l0aW9uaW5nQ2hhbmdlZCIsInNldEVsZW1lbnQiLCJzZXRPZmZzZXQiLCJzZXRQb3NpdGlvbmluZyIsInBvc2l0aW9uaW5nIiwic2V0UG9zaXRpb24iLCJnZXRFbGVtZW50IiwiZ2V0T2Zmc2V0IiwiZ2V0UG9zaXRpb24iLCJnZXRQb3NpdGlvbmluZyIsIk1hcEV2ZW50VHlwZSIsInVwZGF0ZVBpeGVsUG9zaXRpb24iLCJjb250YWluZXIiLCJnZXRPdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50IiwiZ2V0T3ZlcmxheUNvbnRhaW5lciIsInBlcmZvcm1BdXRvUGFuIiwicGFuSW50b1ZpZXciLCJvcHRfcGFuSW50b1ZpZXdPcHRpb25zIiwibWFwUmVjdCIsImdldFJlY3QiLCJvdmVybGF5UmVjdCIsInBhbkludG9WaWV3T3B0aW9ucyIsIm15TWFyZ2luIiwib2Zmc2V0TGVmdCIsIm9mZnNldFJpZ2h0Iiwib2Zmc2V0VG9wIiwib2Zmc2V0Qm90dG9tIiwiZ2V0VmlldyIsImNlbnRlclB4IiwiZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZUludGVybmFsIiwibmV3Q2VudGVyUHgiLCJwYW5PcHRpb25zIiwiZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsIiwiYm94IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicGFnZVhPZmZzZXQiLCJ0b3AiLCJwYWdlWU9mZnNldCIsInNldFZpc2libGUiLCJkaXNwbGF5IiwiaXNSZW5kZXJlZCIsImdldFBpeGVsRnJvbUNvb3JkaW5hdGUiLCJtYXBTaXplIiwidXBkYXRlUmVuZGVyZWRQb3NpdGlvbiIsInJvdW5kIiwicG9zWCIsInBvc1kiLCJPdmVybGF5UG9zaXRpb25pbmciLCJtc1RyYW5zZm9ybSIsImdldE9wdGlvbnMiLCJUZXh0IiwiZm9udF8iLCJ0ZXh0QWxpZ25fIiwidGV4dEFsaWduIiwidGV4dEJhc2VsaW5lXyIsInRleHRCYXNlbGluZSIsIm1heEFuZ2xlXyIsIm1heEFuZ2xlIiwicGxhY2VtZW50XyIsInBsYWNlbWVudCIsIlRleHRQbGFjZW1lbnQiLCJvdmVyZmxvd18iLCJvdmVyZmxvdyIsIm9mZnNldFhfIiwib2Zmc2V0WV8iLCJiYWNrZ3JvdW5kRmlsbF8iLCJiYWNrZ3JvdW5kRmlsbCIsImJhY2tncm91bmRTdHJva2VfIiwiYmFja2dyb3VuZFN0cm9rZSIsInBhZGRpbmdfIiwiZ2V0Rm9udCIsImdldFBsYWNlbWVudCIsImdldE1heEFuZ2xlIiwiZ2V0T3ZlcmZsb3ciLCJnZXRUZXh0QWxpZ24iLCJnZXRUZXh0QmFzZWxpbmUiLCJnZXRPZmZzZXRYIiwiZ2V0T2Zmc2V0WSIsImdldEJhY2tncm91bmRGaWxsIiwiZ2V0QmFja2dyb3VuZFN0cm9rZSIsImdldFBhZGRpbmciLCJzZXRPdmVyZmxvdyIsInNldEZvbnQiLCJzZXRNYXhBbmdsZSIsInNldE9mZnNldFgiLCJzZXRPZmZzZXRZIiwic2V0UGxhY2VtZW50Iiwic2V0VGV4dEFsaWduIiwic2V0VGV4dEJhc2VsaW5lIiwic2V0QmFja2dyb3VuZEZpbGwiLCJzZXRCYWNrZ3JvdW5kU3Ryb2tlIiwic2V0UGFkZGluZyIsIkNPTE9SX0RFRkFVTFRTIiwicHJpbWFyeSIsInNlY29uZGFyeSIsIk1hcmtlciIsImxvY2F0aW9uIiwiaW5mbyIsImluZm9IVE1MIiwic3VwZXIiLCJHZW9tZXRyeVR5cGUiLCJwb3B1cCIsImhhbmRsZUNoYW5nZSIsImNyZWF0ZUluZm9FbGVtZW50IiwiaW5pdFBvcHVwIiwidHJpbSIsImhhc0luZm8iLCJhZGRPdmVybGF5IiwicmVtb3ZlT3ZlcmxheSIsInNob3dJbmZvIiwiaGlkZUluZm8iLCJtYXJrZXJTdHlsZSIsIkNpcmNsZSIsImZpbHRlck9iamVjdCIsInByZWRpY2F0ZSIsImVudHJpZXMiLCJyZWR1Y2UiLCJyZXN1bHQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiX19lc01vZHVsZSIsImRlZmluaXRpb24iLCJlbnVtZXJhYmxlIiwiY2h1bmtJZCIsIlByb21pc2UiLCJwcm9taXNlcyIsIm1pbmlDc3NGIiwiZ2xvYmFsVGhpcyIsIkZ1bmN0aW9uIiwicHJvcCIsInVybCIsInNjcmlwdCIsIm5lZWRBdHRhY2giLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJnZXRBdHRyaWJ1dGUiLCJjaGFyc2V0IiwidGltZW91dCIsIm5jIiwic2V0QXR0cmlidXRlIiwic3JjIiwib25TY3JpcHRDb21wbGV0ZSIsIm9uZXJyb3IiLCJvbmxvYWQiLCJjbGVhclRpbWVvdXQiLCJkb25lRm5zIiwic2V0VGltZW91dCIsImhlYWQiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJjdXJyZW50U2NyaXB0IiwicmVzb2x2ZSIsInJlamVjdCIsImhyZWYiLCJmdWxsaHJlZiIsImV4aXN0aW5nTGlua1RhZ3MiLCJkYXRhSHJlZiIsInRhZyIsInJlbCIsImV4aXN0aW5nU3R5bGVUYWdzIiwiZmluZFN0eWxlc2hlZXQiLCJsaW5rVGFnIiwiZXJyb3JUeXBlIiwicmVhbEhyZWYiLCJlcnIiLCJyZXF1ZXN0IiwiY3JlYXRlU3R5bGVzaGVldCIsIjE3OSIsIm1pbmlDc3MiLCJ0aGVuIiwiaW5zdGFsbGVkQ2h1bmtzIiwiaW5zdGFsbGVkQ2h1bmtEYXRhIiwicHJvbWlzZSIsInJlYWxTcmMiLCJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJyZXNvbHZlcyIsImNodW5rTG9hZGluZ0dsb2JhbCIsImdldEtleSIsImNyb3NzT3JpZ2luIiwic2hhcmVkIiwiSWNvbkltYWdlQ2FjaGUiLCJjYWNoZV8iLCJjYWNoZVNpemVfIiwibWF4Q2FjaGVTaXplXyIsImNhbkV4cGlyZUNhY2hlIiwiZXhwaXJlIiwiaWNvbkltYWdlIiwibWF4Q2FjaGVTaXplIiwiQmFzZUxheWVyIiwibWF4UmVzb2x1dGlvbiIsIm1pblJlc29sdXRpb24iLCJtaW5ab29tIiwibWF4Wm9vbSIsImNsYXNzTmFtZV8iLCJzdGF0ZV8iLCJnZXRDbGFzc05hbWUiLCJnZXRMYXllclN0YXRlIiwib3B0X21hbmFnZWQiLCJzdGF0ZSIsIm1hbmFnZWQiLCJzb3VyY2VTdGF0ZSIsImdldFNvdXJjZVN0YXRlIiwiZ2V0VmlzaWJsZSIsImdldE1heFJlc29sdXRpb24iLCJnZXRNaW5SZXNvbHV0aW9uIiwiZ2V0TWluWm9vbSIsImdldE1heFpvb20iLCJnZXRMYXllcnNBcnJheSIsImdldExheWVyU3RhdGVzQXJyYXkiLCJvcHRfc3RhdGVzIiwic2V0TWF4UmVzb2x1dGlvbiIsInNldE1pblJlc29sdXRpb24iLCJzZXRNYXhab29tIiwic2V0TWluWm9vbSIsInppbmRleCIsImluVmlldyIsImxheWVyU3RhdGUiLCJ2aWV3U3RhdGUiLCJ6b29tIiwiTGF5ZXIiLCJiYXNlT3B0aW9ucyIsIm1hcFByZWNvbXBvc2VLZXlfIiwibWFwUmVuZGVyS2V5XyIsInNvdXJjZUNoYW5nZUtleV8iLCJoYW5kbGVTb3VyY2VQcm9wZXJ0eUNoYW5nZV8iLCJzZXRTb3VyY2UiLCJzdGF0ZXMiLCJnZXRTb3VyY2UiLCJnZXRTdGF0ZSIsImhhbmRsZVNvdXJjZUNoYW5nZV8iLCJmcmFtZVN0YXRlIiwibGF5ZXJSZW5kZXJlciIsInByZXBhcmVGcmFtZSIsInJlbmRlckZyYW1lIiwibGF5ZXJTdGF0ZXNBcnJheSIsInNvbWUiLCJhcnJheUxheWVyU3RhdGUiLCJjcmVhdGVSZW5kZXJlciIsImhhc1JlbmRlcmVyIiwiQmFzZSIsImNvb3JkaW5hdGUxIiwiY29vcmRpbmF0ZTIiLCJjb3NBbmdsZSIsInNpbkFuZ2xlIiwid29ybGRzQXdheSIsIm9wdF9zb3VyY2VFeHRlbnRXaWR0aCIsInNvdXJjZUV4dGVudFdpZHRoIiwiZ2V0V29ybGRzQXdheSIsImV4cGlyZUljb25DYWNoZSIsIk1hcFJlbmRlcmVyIiwiZGlzcGF0Y2hSZW5kZXJFdmVudCIsImNhbGN1bGF0ZU1hdHJpY2VzMkQiLCJjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSIsInBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtIiwiZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUiLCJjaGVja1dyYXBwZWQiLCJ0aGlzQXJnIiwidGhpc0FyZzIiLCJ0cmFuc2xhdGVkQ29vcmRpbmF0ZSIsIm9mZnNldHMiLCJsYXllclN0YXRlcyIsIm51bUxheWVycyIsIm1hdGNoZXMiLCJ0bXBDb29yZCIsImdldFdyYXBYIiwiY2FsbGJhY2tfMSIsIm9yZGVyIiwiZGlzdGFuY2VTcSIsImZvckVhY2hMYXllckF0UGl4ZWwiLCJoYXNGZWF0dXJlQXRDb29yZGluYXRlIiwic2NoZWR1bGVFeHBpcmVJY29uQ2FjaGUiLCJwb3N0UmVuZGVyRnVuY3Rpb25zIiwiUmVuZGVyRXZlbnQiLCJvcHRfaW52ZXJzZVBpeGVsVHJhbnNmb3JtIiwib3B0X2ZyYW1lU3RhdGUiLCJvcHRfY29udGV4dCIsImludmVyc2VQaXhlbFRyYW5zZm9ybSIsIkV2ZW50IiwiQ29tcG9zaXRlTWFwUmVuZGVyZXIiLCJmb250Q2hhbmdlTGlzdGVuZXJLZXlfIiwiT2JqZWN0RXZlbnRUeXBlIiwicmVkcmF3VGV4dCIsImVsZW1lbnRfIiwiZ2V0Vmlld3BvcnQiLCJmaXJzdENoaWxkIiwiY2hpbGRyZW5fIiwicmVuZGVyZWRWaXNpYmxlXyIsImRlY2x1dHRlckxheWVycyIsInByZXZpb3VzRWxlbWVudCIsImxheWVySW5kZXgiLCJyZW5kZXJEZWNsdXR0ZXIiLCJnZXREYXRhQXRQaXhlbCIsIk1hcCIsIkxheWVyR3JvdXAiLCJsYXllcnNMaXN0ZW5lcktleXNfIiwibGlzdGVuZXJLZXlzXyIsImhhbmRsZUxheWVyc0NoYW5nZWRfIiwic2V0TGF5ZXJzIiwiaGFuZGxlTGF5ZXJDaGFuZ2VfIiwiZ2V0TGF5ZXJzIiwiQ29sbGVjdGlvbkV2ZW50VHlwZSIsImhhbmRsZUxheWVyc0FkZF8iLCJoYW5kbGVMYXllcnNSZW1vdmVfIiwibGF5ZXJzQXJyYXkiLCJjb2xsZWN0aW9uRXZlbnQiLCJwb3MiLCJvd25MYXllclN0YXRlIiwiTWFwRXZlbnQiLCJNYXBCcm93c2VyRXZlbnQiLCJvcHRfZHJhZ2dpbmciLCJwaXhlbF8iLCJjb29yZGluYXRlXyIsImRyYWdnaW5nIiwiZ2V0RXZlbnRQaXhlbCIsImNvbmZpZ3VyYWJsZSIsImdldENvb3JkaW5hdGVGcm9tUGl4ZWwiLCJNYXBCcm93c2VyRXZlbnRIYW5kbGVyIiwibW92ZVRvbGVyYW5jZSIsImNsaWNrVGltZW91dElkXyIsImVtdWxhdGVDbGlja3NfIiwiZHJhZ2dpbmdfIiwiZHJhZ0xpc3RlbmVyS2V5c18iLCJtb3ZlVG9sZXJhbmNlXyIsImRvd25fIiwiYWN0aXZlUG9pbnRlcnNfIiwidHJhY2tlZFRvdWNoZXNfIiwicG9pbnRlcmRvd25MaXN0ZW5lcktleV8iLCJoYW5kbGVQb2ludGVyRG93bl8iLCJvcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfIiwicmVsYXllZExpc3RlbmVyS2V5XyIsInJlbGF5RXZlbnRfIiwiYm91bmRIYW5kbGVUb3VjaE1vdmVfIiwiaGFuZGxlVG91Y2hNb3ZlXyIsImVtdWxhdGVDbGlja18iLCJuZXdFdmVudCIsIk1hcEJyb3dzZXJFdmVudFR5cGUiLCJ1cGRhdGVBY3RpdmVQb2ludGVyc18iLCJoYW5kbGVQb2ludGVyVXBfIiwiaXNNb3VzZUFjdGlvbkJ1dHRvbl8iLCJkb2MiLCJnZXRPd25lckRvY3VtZW50IiwiaGFuZGxlUG9pbnRlck1vdmVfIiwiZ2V0Um9vdE5vZGUiLCJpc01vdmluZ18iLCJkZWZhdWx0UHJldmVudGVkIiwiUHJpb3JpdHlRdWV1ZSIsInByaW9yaXR5RnVuY3Rpb24iLCJrZXlGdW5jdGlvbiIsInByaW9yaXR5RnVuY3Rpb25fIiwia2V5RnVuY3Rpb25fIiwiZWxlbWVudHNfIiwicHJpb3JpdGllc18iLCJxdWV1ZWRFbGVtZW50c18iLCJkZXF1ZXVlIiwiZWxlbWVudHMiLCJwcmlvcml0aWVzIiwic2lmdFVwXyIsImVsZW1lbnRLZXkiLCJlbnF1ZXVlIiwicHJpb3JpdHkiLCJzaWZ0RG93bl8iLCJnZXRDb3VudCIsImdldExlZnRDaGlsZEluZGV4XyIsImdldFJpZ2h0Q2hpbGRJbmRleF8iLCJnZXRQYXJlbnRJbmRleF8iLCJoZWFwaWZ5XyIsImlzS2V5UXVldWVkIiwiaXNRdWV1ZWQiLCJjb3VudCIsInN0YXJ0SW5kZXgiLCJsSW5kZXgiLCJySW5kZXgiLCJzbWFsbGVyQ2hpbGRJbmRleCIsInBhcmVudEluZGV4IiwicmVwcmlvcml0aXplIiwiVGlsZVF1ZXVlIiwidGlsZVByaW9yaXR5RnVuY3Rpb24iLCJ0aWxlQ2hhbmdlQ2FsbGJhY2siLCJib3VuZEhhbmRsZVRpbGVDaGFuZ2VfIiwiaGFuZGxlVGlsZUNoYW5nZSIsInRpbGVDaGFuZ2VDYWxsYmFja18iLCJ0aWxlc0xvYWRpbmdfIiwidGlsZXNMb2FkaW5nS2V5c18iLCJhZGRlZCIsImdldFRpbGVzTG9hZGluZyIsInRpbGUiLCJoaWZpIiwidGlsZUtleSIsImxvYWRNb3JlVGlsZXMiLCJtYXhUb3RhbExvYWRpbmciLCJtYXhOZXdMb2FkcyIsIm5ld0xvYWRzIiwiY3JlYXRlRXh0ZW50Iiwib25seUNlbnRlciIsInNtb290aCIsIm9wdF9pc01vdmluZyIsIm9wdF9jZW50ZXJTaGlmdCIsInZpZXdXaWR0aCIsInZpZXdIZWlnaHQiLCJzaGlmdFgiLCJzaGlmdFkiLCJub25lIiwiZ2V0Vmlld3BvcnRDbGFtcGVkUmVzb2x1dGlvbiIsIm1heEV4dGVudCIsInZpZXdwb3J0U2l6ZSIsInNob3dGdWxsRXh0ZW50IiwieFJlc29sdXRpb24iLCJ5UmVzb2x1dGlvbiIsImdldFNtb290aENsYW1wZWRSZXNvbHV0aW9uIiwiY3JlYXRlTWluTWF4UmVzb2x1dGlvbiIsIm9wdF9zbW9vdGgiLCJvcHRfbWF4RXh0ZW50Iiwib3B0X3Nob3dGdWxsRXh0ZW50IiwiY2FwcGVkTWF4UmVzIiwiZGlzYWJsZSIsImFzc2lnbkNsb3Nlc3QiLCJvZmZzZXQxIiwib2Zmc2V0MiIsIm1heFNxdWFyZWREZWx0YSIsInNxdWFyZWREZWx0YSIsImFzc2lnbkNsb3Nlc3RQb2ludCIsIm1heERlbHRhIiwiaXNSaW5nIiwib3B0X3RtcFBvaW50IiwidG1wUG9pbnQiLCJzbmFwIiwicXVhbnRpemUiLCJzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIiwic2ltcGxpZmllZE9mZnNldCIsImluZmxhdGVDb29yZGluYXRlcyIsIm9wdF9jb29yZGluYXRlcyIsImluZmxhdGVDb29yZGluYXRlc0FycmF5Iiwib3B0X2Nvb3JkaW5hdGVzcyIsImluZmxhdGVNdWx0aUNvb3JkaW5hdGVzQXJyYXkiLCJlbmRzcyIsIm9wdF9jb29yZGluYXRlc3NzIiwiY29vcmRpbmF0ZXNzcyIsImxpbmVhclJpbmciLCJ0d2ljZUFyZWEiLCJMaW5lYXJSaW5nIiwibWF4RGVsdGFfIiwibWF4RGVsdGFSZXZpc2lvbl8iLCJtYXJrZXJzIiwic3RhY2siLCJsYXN0IiwiZmlyc3QiLCJtYXhTcXVhcmVkRGlzdGFuY2UiLCJzcXVhcmVkRGlzdGFuY2VfMSIsImRvdWdsYXNQZXVja2VyIiwiZGVmbGF0ZSIsImxpbmVhclJpbmdDb250YWluc0V4dGVudCIsImxpbmVhclJpbmdDb250YWluc1hZIiwid24iLCJsaW5lYXJSaW5nc0NvbnRhaW5zWFkiLCJpbnRlcnNlY3RzTGluZVN0cmluZyIsImNvb3JkaW5hdGVzRXh0ZW50IiwicmV0IiwicG9pbnQxIiwicG9pbnQyIiwibGluZWFyUmluZ0lzQ2xvY2t3aXNlIiwiZWRnZSIsIm9yaWVudExpbmVhclJpbmdzIiwib3B0X3JpZ2h0IiwicmlnaHQiLCJpc0Nsb2Nrd2lzZSIsIlBvbHlnb24iLCJlbmRzXyIsImZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fIiwiZmxhdEludGVyaW9yUG9pbnRfIiwib3JpZW50ZWRSZXZpc2lvbl8iLCJvcmllbnRlZEZsYXRDb29yZGluYXRlc18iLCJhcHBlbmRMaW5lYXJSaW5nIiwicG9seWdvbiIsImFycmF5TWF4U3F1YXJlZERlbHRhIiwiYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQiLCJnZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcyIsImxpbmVhclJpbmdzIiwiZ2V0RW5kcyIsImdldEZsYXRJbnRlcmlvclBvaW50IiwiZmxhdENlbnRlciIsImZsYXRDZW50ZXJzIiwiZmxhdENlbnRlcnNPZmZzZXQiLCJpbnRlcnNlY3Rpb25zIiwicnIiLCJwb2ludFgiLCJtYXhTZWdtZW50TGVuZ3RoIiwic2VnbWVudExlbmd0aCIsImdldEludGVyaW9yUG9pbnRPZkFycmF5IiwiZ2V0SW50ZXJpb3JQb2ludCIsImdldExpbmVhclJpbmdDb3VudCIsImdldExpbmVhclJpbmciLCJnZXRMaW5lYXJSaW5ncyIsImxpbmVhclJpbmdzQXJlT3JpZW50ZWQiLCJzaW1wbGlmaWVkRW5kcyIsInF1YW50aXplQXJyYXkiLCJpbnRlcnNlY3RzTGluZWFyUmluZyIsImludGVyc2VjdHNMaW5lYXJSaW5nQXJyYXkiLCJmcm9tRXh0ZW50IiwiYW5pbWF0aW9uQ2FsbGJhY2siLCJyZXR1cm5WYWx1ZSIsImlzTm9vcEFuaW1hdGlvbiIsInNvdXJjZUNlbnRlciIsInRhcmdldENlbnRlciIsInNvdXJjZVJlc29sdXRpb24iLCJ0YXJnZXRSZXNvbHV0aW9uIiwic291cmNlUm90YXRpb24iLCJ0YXJnZXRSb3RhdGlvbiIsImNhbGN1bGF0ZUNlbnRlck9uIiwicm90WCIsInJvdFkiLCJWaWV3IiwiaGludHNfIiwiYW5pbWF0aW9uc18iLCJ1cGRhdGVBbmltYXRpb25LZXlfIiwicHJvamVjdGlvbl8iLCJ2aWV3cG9ydFNpemVfIiwidGFyZ2V0Q2VudGVyXyIsInRhcmdldFJlc29sdXRpb25fIiwidGFyZ2V0Um90YXRpb25fIiwiY2FuY2VsQW5jaG9yXyIsImFwcGx5T3B0aW9uc18iLCJyZXNvbHV0aW9uQ29uc3RyYWludEluZm8iLCJyZXNvbHV0aW9uQ29uc3RyYWludCIsInpvb21GYWN0b3IiLCJtdWx0aVdvcmxkIiwic21vb3RoUmVzb2x1dGlvbkNvbnN0cmFpbnQiLCJwcm9qRXh0ZW50IiwiY29uc3RyYWluT25seUNlbnRlciIsInJlc29sdXRpb25zIiwiY29uc3RyYWluUmVzb2x1dGlvbiIsImNhcHBlZCIsInoiLCJjcmVhdGVTbmFwVG9SZXNvbHV0aW9ucyIsImRlZmF1bHRNYXhSZXNvbHV0aW9uIiwiZGVmYXVsdE1pblJlc29sdXRpb24iLCJkZWZhdWx0TWF4Wm9vbSIsInBvd2VyIiwib3B0X21pblJlc29sdXRpb24iLCJtaW5ab29tTGV2ZWwiLCJjYXBwZWRab29tTGV2ZWwiLCJ6b29tTGV2ZWwiLCJjcmVhdGVTbmFwVG9Qb3dlciIsImNvbnN0cmFpbnQiLCJjcmVhdGVSZXNvbHV0aW9uQ29uc3RyYWludCIsIm1heFJlc29sdXRpb25fIiwibWluUmVzb2x1dGlvbl8iLCJ6b29tRmFjdG9yXyIsInJlc29sdXRpb25zXyIsIm1pblpvb21fIiwiY2VudGVyQ29uc3RyYWludCIsInNtb290aEV4dGVudENvbnN0cmFpbnQiLCJjcmVhdGVDZW50ZXJDb25zdHJhaW50Iiwicm90YXRpb25Db25zdHJhaW50IiwiZW5hYmxlUm90YXRpb24iLCJjb25zdHJhaW5Sb3RhdGlvbiIsInRoZXRhIiwiY3JlYXRlUm90YXRpb25Db25zdHJhaW50IiwiY29uc3RyYWludHNfIiwic2V0Q2VudGVySW50ZXJuYWwiLCJzZXRSZXNvbHV0aW9uIiwic2V0Wm9vbSIsIm9wdGlvbnNfIiwiZ2V0VXBkYXRlZE9wdGlvbnNfIiwibmV3T3B0aW9ucyIsImdldFJlc29sdXRpb24iLCJpc0RlZiIsInJlc29sdmVDb25zdHJhaW50cyIsImFyZ3MiLCJnZXRQcm9qZWN0aW9uIiwiYW5pbWF0aW9uQ291bnQiLCJEYXRlIiwibm93Iiwic2VyaWVzIiwiY29tcGxldGUiLCJzZXRIaW50IiwidXBkYXRlQW5pbWF0aW9uc18iLCJnZXRJbnRlcmFjdGluZyIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwibW9yZSIsInNlcmllc0NvbXBsZXRlIiwiZWxhcHNlZCIsImZyYWN0aW9uIiwicHJvZ3Jlc3MiLCJnZXRWaWV3cG9ydFNpemVfIiwiY29uc3RyYWluZWRSZXNvbHV0aW9uIiwiY2FsY3VsYXRlQ2VudGVyWm9vbSIsImFwcGx5VGFyZ2V0U3RhdGVfIiwiY29uc3RyYWluZWRSb3RhdGlvbiIsImNhbGN1bGF0ZUNlbnRlclJvdGF0ZSIsIkJvb2xlYW4iLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjdXJyZW50UmVzb2x1dGlvbiIsIm9wdF9yb3RhdGlvbiIsInNldFZpZXdwb3J0U2l6ZSIsIlZpZXdQcm9wZXJ0eSIsImdldENvbnN0cmFpbnRzIiwiZ2V0Q29uc3RyYWluUmVzb2x1dGlvbiIsImdldEhpbnRzIiwib3B0X2hpbnRzIiwiY2FsY3VsYXRlRXh0ZW50IiwiY2FsY3VsYXRlRXh0ZW50SW50ZXJuYWwiLCJnZXRab29tRm9yUmVzb2x1dGlvbiIsInNldENvbnN0cmFpblJlc29sdXRpb24iLCJlbmFibGVkIiwiZ2V0UmVzb2x1dGlvbnMiLCJnZXRSZXNvbHV0aW9uRm9yRXh0ZW50IiwiZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsIiwiZ2V0UmVzb2x1dGlvbkZvclZhbHVlRnVuY3Rpb24iLCJvcHRfcG93ZXIiLCJnZXRDb25zdHJhaW5lZFJlc29sdXRpb24iLCJnZXRWYWx1ZUZvclJlc29sdXRpb25GdW5jdGlvbiIsImxvZ1Bvd2VyIiwiZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXyIsInJlZHVjZWRTaXplIiwibmVhcmVzdCIsImJhc2VMZXZlbCIsImZpdCIsImdlb21ldHJ5T3JFeHRlbnQiLCJmaXRJbnRlcm5hbCIsImNvb3JkcyIsIm1pblJvdFgiLCJtaW5Sb3RZIiwibWF4Um90WCIsIm1heFJvdFkiLCJjZW50ZXJSb3RYIiwiY2VudGVyUm90WSIsImNlbnRlclgiLCJjZW50ZXJZIiwiY2VudGVyT24iLCJjZW50ZXJPbkludGVybmFsIiwiY2FsY3VsYXRlQ2VudGVyU2hpZnQiLCJjZW50ZXJTaGlmdCIsInNoaWZ0ZWRDZW50ZXIiLCJhZGp1c3RDZW50ZXIiLCJkZWx0YUNvb3JkaW5hdGVzIiwic2V0Q2VudGVyIiwiYWRqdXN0Q2VudGVySW50ZXJuYWwiLCJhZGp1c3RSZXNvbHV0aW9uIiwiYWRqdXN0UmVzb2x1dGlvbkludGVybmFsIiwiaXNNb3ZpbmciLCJhZGp1c3Rab29tIiwiYWRqdXN0Um90YXRpb24iLCJhZGp1c3RSb3RhdGlvbkludGVybmFsIiwibmV3Um90YXRpb24iLCJoaW50Iiwib3B0X2RvTm90Q2FuY2VsQW5pbXMiLCJvcHRfZm9yY2VNb3ZpbmciLCJuZXdDZW50ZXIiLCJvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbiIsImJlZ2luSW50ZXJhY3Rpb24iLCJlbmRJbnRlcmFjdGlvbiIsImVuZEludGVyYWN0aW9uSW50ZXJuYWwiLCJvcHRfdGFyZ2V0UmVzb2x1dGlvbiIsInRhcmdldFpvb20iLCJvcHRfZGlyZWN0aW9uIiwidGFyZ2V0UmVzIiwiUGx1Z2dhYmxlTWFwIiwib3B0aW9uc0ludGVybmFsIiwia2V5Ym9hcmRFdmVudFRhcmdldCIsImdldEVsZW1lbnRCeUlkIiwiY29udHJvbHMiLCJvdmVybGF5cyIsImxheWVyR3JvdXAiLCJjcmVhdGVPcHRpb25zSW50ZXJuYWwiLCJib3VuZEhhbmRsZUJyb3dzZXJFdmVudF8iLCJoYW5kbGVCcm93c2VyRXZlbnQiLCJtYXhUaWxlc0xvYWRpbmdfIiwibWF4VGlsZXNMb2FkaW5nIiwicGl4ZWxSYXRpb18iLCJwb3N0UmVuZGVyVGltZW91dEhhbmRsZV8iLCJhbmltYXRpb25EZWxheUtleV8iLCJhbmltYXRpb25EZWxheV8iLCJyZW5kZXJGcmFtZV8iLCJjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybV8iLCJwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybV8iLCJmcmFtZUluZGV4XyIsImZyYW1lU3RhdGVfIiwicHJldmlvdXNFeHRlbnRfIiwidmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfIiwidmlld0NoYW5nZUxpc3RlbmVyS2V5XyIsImxheWVyR3JvdXBQcm9wZXJ0eUxpc3RlbmVyS2V5c18iLCJ2aWV3cG9ydF8iLCJvdmVybGF5Q29udGFpbmVyXyIsIm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfIiwibWFwQnJvd3NlckV2ZW50SGFuZGxlcl8iLCJrZXlib2FyZEV2ZW50VGFyZ2V0XyIsImtleUhhbmRsZXJLZXlzXyIsIm92ZXJsYXlzXyIsIm92ZXJsYXlJZEluZGV4XyIsImhhbmRsZVJlc2l6ZV8iLCJwb3N0UmVuZGVyRnVuY3Rpb25zXyIsInRpbGVRdWV1ZV8iLCJnZXRUaWxlUHJpb3JpdHkiLCJoYW5kbGVUaWxlQ2hhbmdlXyIsIk1hcFByb3BlcnR5IiwiaGFuZGxlTGF5ZXJHcm91cENoYW5nZWRfIiwiaGFuZGxlVmlld0NoYW5nZWRfIiwiaGFuZGxlU2l6ZUNoYW5nZWRfIiwiaGFuZGxlVGFyZ2V0Q2hhbmdlZF8iLCJjb250cm9sIiwiYWRkT3ZlcmxheUludGVybmFsXyIsImFkZENvbnRyb2wiLCJnZXRDb250cm9scyIsImFkZEludGVyYWN0aW9uIiwiYWRkTGF5ZXIiLCJnZXRMYXllckdyb3VwIiwib3ZlcmxheSIsImdldE92ZXJsYXlzIiwic2V0VGFyZ2V0IiwiZ2V0RmVhdHVyZXNBdFBpeGVsIiwiaGFzRmVhdHVyZUF0UGl4ZWwiLCJnZXRFdmVudENvb3JkaW5hdGUiLCJnZXRFdmVudENvb3JkaW5hdGVJbnRlcm5hbCIsInZpZXdwb3J0UG9zaXRpb24iLCJldmVudFBvc2l0aW9uIiwiY2hhbmdlZFRvdWNoZXMiLCJnZXRUYXJnZXQiLCJnZXRPdmVybGF5QnlJZCIsImdldExvYWRpbmciLCJsb2FkaW5nIiwidmlld0Nvb3JkaW5hdGUiLCJvd25lckRvY3VtZW50IiwidGlsZVNvdXJjZUtleSIsInRpbGVDZW50ZXIiLCJ0aWxlUmVzb2x1dGlvbiIsIndhbnRlZFRpbGVzIiwiYnJvd3NlckV2ZW50IiwiaGFuZGxlTWFwQnJvd3NlckV2ZW50Iiwicm9vdE5vZGUiLCJlbGVtZW50RnJvbVBvaW50IiwiZG9jdW1lbnRFbGVtZW50IiwiaW50ZXJhY3Rpb25zQXJyYXkiLCJoYW5kbGVQb3N0UmVuZGVyIiwidGlsZVF1ZXVlIiwiaGludHMiLCJ2aWV3SGludHMiLCJsb3dPbkZyYW1lQnVkZ2V0IiwidGltZSIsInRhcmdldEVsZW1lbnQiLCJ1cGRhdGVTaXplIiwiaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8iLCJ1cGRhdGVWaWV3cG9ydFNpemVfIiwicmVuZGVyU3luYyIsImhhbmRsZUZvbnRzQ2hhbmdlZCIsInJlbW92ZUNvbnRyb2wiLCJyZW1vdmVJbnRlcmFjdGlvbiIsInJlbW92ZUxheWVyIiwicHJldmlvdXNGcmFtZVN0YXRlIiwiZGVjbHV0dGVyVHJlZSIsInVzZWRUaWxlcyIsInNldExheWVyR3JvdXAiLCJzZXRWaWV3IiwiY29tcHV0ZWRTdHlsZSIsInBhcnNlRmxvYXQiLCJDb250cm9sIiwidGFyZ2V0XyIsImxpc3RlbmVyS2V5cyIsIm1hcEV2ZW50IiwiQXR0cmlidXRpb24iLCJ1bEVsZW1lbnRfIiwiY29sbGFwc2VkXyIsImNvbGxhcHNlZCIsInVzZXJDb2xsYXBzZWRfIiwib3ZlcnJpZGVDb2xsYXBzaWJsZV8iLCJjb2xsYXBzaWJsZSIsImNvbGxhcHNpYmxlXyIsInRpcExhYmVsIiwiZXhwYW5kQ2xhc3NOYW1lIiwiY29sbGFwc2VMYWJlbCIsImNvbGxhcHNlQ2xhc3NOYW1lIiwiY29sbGFwc2VMYWJlbF8iLCJ0ZXh0Q29udGVudCIsImxhYmVsXyIsImFjdGl2ZUxhYmVsIiwidGl0bGUiLCJoYW5kbGVDbGlja18iLCJjc3NDbGFzc2VzIiwicmVuZGVyZWRBdHRyaWJ1dGlvbnNfIiwiY29sbGVjdFNvdXJjZUF0dHJpYnV0aW9uc18iLCJsb29rdXAiLCJ2aXNpYmxlQXR0cmlidXRpb25zIiwiYXR0cmlidXRpb25HZXR0ZXIiLCJnZXRBdHRyaWJ1dGlvbnMiLCJhdHRyaWJ1dGlvbnMiLCJnZXRBdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSIsInNldENvbGxhcHNpYmxlIiwidXBkYXRlRWxlbWVudF8iLCJoYW5kbGVUb2dnbGVfIiwiY2xhc3NMaXN0IiwiZ2V0Q29sbGFwc2libGUiLCJzZXRDb2xsYXBzZWQiLCJnZXRDb2xsYXBzZWQiLCJSb3RhdGUiLCJjb21wYXNzQ2xhc3NOYW1lIiwiY2FsbFJlc2V0Tm9ydGhfIiwicmVzZXROb3J0aCIsImR1cmF0aW9uXyIsImF1dG9IaWRlXyIsImF1dG9IaWRlIiwicmVzZXROb3J0aF8iLCJab29tIiwiem9vbUluQ2xhc3NOYW1lIiwiem9vbU91dENsYXNzTmFtZSIsInpvb21JbkxhYmVsIiwiem9vbU91dExhYmVsIiwiem9vbUluVGlwTGFiZWwiLCJ6b29tT3V0VGlwTGFiZWwiLCJpbkVsZW1lbnQiLCJjcmVhdGVUZXh0Tm9kZSIsIm91dEVsZW1lbnQiLCJ6b29tQnlEZWx0YV8iLCJEb3VibGVDbGlja1pvb20iLCJkZWx0YV8iLCJEcmFnUGFuIiwia2luZXRpY18iLCJraW5ldGljIiwibGFzdENlbnRyb2lkIiwibGFzdFBvaW50ZXJzQ291bnRfIiwicGFubmluZ18iLCJvbkZvY3VzT25seSIsIm5vS2luZXRpY18iLCJ1cGRhdGUiLCJkaXN0YW5jZSIsImNlbnRlcnB4IiwiUG9pbnRlciIsIkRyYWdSb3RhdGUiLCJsYXN0QW5nbGVfIiwiUmVuZGVyQm94Iiwic3RhcnRQaXhlbF8iLCJlbmRQaXhlbF8iLCJyZW5kZXJfIiwic3RhcnRQaXhlbCIsImVuZFBpeGVsIiwicHgiLCJzZXRQaXhlbHMiLCJjcmVhdGVPclVwZGF0ZUdlb21ldHJ5IiwiRHJhZ0JveEV2ZW50IiwiRHJhZ0JveCIsImJveF8iLCJtaW5BcmVhXyIsIm1pbkFyZWEiLCJvbkJveEVuZCIsImJveEVuZENvbmRpdGlvbl8iLCJib3hFbmRDb25kaXRpb24iLCJkZWZhdWx0Qm94RW5kQ29uZGl0aW9uIiwiY29tcGxldGVCb3giLCJEcmFnWm9vbSIsIm91dF8iLCJvdXQiLCJtYXBFeHRlbnQiLCJib3hQaXhlbEV4dGVudCIsImZhY3RvciIsIktleWJvYXJkUGFuIiwiZGVmYXVsdENvbmRpdGlvbl8iLCJwaXhlbERlbHRhXyIsInBpeGVsRGVsdGEiLCJrZXlFdmVudCIsImtleUNvZGUiLCJtYXBVbml0c0RlbHRhIiwiS2V5Ym9hcmRab29tIiwiY2hhckNvZGUiLCJjaGFyQ29kZUF0IiwiS2luZXRpYyIsImRlY2F5IiwibWluVmVsb2NpdHkiLCJkZWxheSIsImRlY2F5XyIsIm1pblZlbG9jaXR5XyIsImRlbGF5XyIsImluaXRpYWxWZWxvY2l0eV8iLCJsYXN0SW5kZXgiLCJmaXJzdEluZGV4IiwiTW9kZSIsIk1vdXNlV2hlZWxab29tIiwidG90YWxEZWx0YV8iLCJsYXN0RGVsdGFfIiwidGltZW91dF8iLCJ1c2VBbmNob3JfIiwidXNlQW5jaG9yIiwiY29uc3RyYWluUmVzb2x1dGlvbl8iLCJsYXN0QW5jaG9yXyIsInN0YXJ0VGltZV8iLCJ0aW1lb3V0SWRfIiwibW9kZV8iLCJ0cmFja3BhZEV2ZW50R2FwXyIsInRyYWNrcGFkVGltZW91dElkXyIsImRlbHRhUGVyWm9vbV8iLCJlbmRJbnRlcmFjdGlvbl8iLCJ3aGVlbEV2ZW50IiwiZGVsdGFNb2RlIiwiV2hlZWxFdmVudCIsIkRPTV9ERUxUQV9QSVhFTCIsIkRPTV9ERUxUQV9MSU5FIiwidGltZUxlZnQiLCJoYW5kbGVXaGVlbFpvb21fIiwic2V0TW91c2VBbmNob3IiLCJQaW5jaFJvdGF0ZSIsInBvaW50ZXJPcHRpb25zIiwicm90YXRpbmdfIiwicm90YXRpb25EZWx0YV8iLCJ0aHJlc2hvbGRfIiwidGhyZXNob2xkIiwicm90YXRpb25EZWx0YSIsInRvdWNoMCIsInRvdWNoMSIsIlBpbmNoWm9vbSIsImxhc3REaXN0YW5jZV8iLCJsYXN0U2NhbGVEZWx0YV8iLCJzY2FsZURlbHRhIiwiem9vbU9wdGlvbnMiLCJyb3RhdGVPcHRpb25zIiwiYXR0cmlidXRpb24iLCJhdHRyaWJ1dGlvbk9wdGlvbnMiLCJhbHRTaGlmdERyYWdSb3RhdGUiLCJkb3VibGVDbGlja1pvb20iLCJ6b29tRGVsdGEiLCJ6b29tRHVyYXRpb24iLCJkcmFnUGFuIiwicGluY2hSb3RhdGUiLCJwaW5jaFpvb20iLCJrZXlib2FyZCIsIm1vdXNlV2hlZWxab29tIiwic2hpZnREcmFnWm9vbSIsIkNvbXBvc2l0ZSIsIkJhc2VUaWxlTGF5ZXIiLCJwcmVsb2FkIiwidXNlSW50ZXJpbVRpbGVzT25FcnJvciIsInNldFByZWxvYWQiLCJzZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yIiwiZ2V0UHJlbG9hZCIsIlRpbGVQcm9wZXJ0eSIsImdldFVzZUludGVyaW1UaWxlc09uRXJyb3IiLCJMYXllclJlbmRlcmVyIiwiYm91bmRIYW5kbGVJbWFnZUNoYW5nZV8iLCJoYW5kbGVJbWFnZUNoYW5nZV8iLCJsYXllcl8iLCJkZWNsdXR0ZXJFeGVjdXRvckdyb3VwIiwibG9hZGVkVGlsZUNhbGxiYWNrIiwidGlsZXMiLCJ0aWxlQ29vcmQiLCJjcmVhdGVMb2FkZWRUaWxlRmluZGVyIiwidGlsZVJhbmdlIiwiZm9yRWFjaExvYWRlZFRpbGUiLCJyZW5kZXJJZlJlYWR5QW5kVmlzaWJsZSIsImxvYWRJbWFnZSIsImltYWdlU3RhdGUiLCJDYW52YXNMYXllclJlbmRlcmVyIiwicmVuZGVyZWRSZXNvbHV0aW9uIiwidGVtcFRyYW5zZm9ybSIsInBpeGVsVHJhbnNmb3JtIiwiY29udGFpbmVyUmV1c2VkIiwidXNlQ29udGFpbmVyIiwibGF5ZXJDbGFzc05hbWUiLCJmaXJzdEVsZW1lbnRDaGlsZCIsIkhUTUxDYW52YXNFbGVtZW50IiwidHJhbnNmb3JtT3JpZ2luIiwiY2xpcCIsImhhbGZXaWR0aCIsImhhbGZIZWlnaHQiLCJ0b3BMZWZ0IiwidG9wUmlnaHQiLCJib3R0b21SaWdodCIsImJvdHRvbUxlZnQiLCJtb3ZlVG8iLCJjbGlwVW5yb3RhdGVkIiwiaW52ZXJ0ZWQiLCJkaXNwYXRjaFJlbmRlckV2ZW50XyIsInByZVJlbmRlciIsInBvc3RSZW5kZXIiLCJnZXRSZW5kZXJUcmFuc2Zvcm0iLCJyZW5kZXJQaXhlbCIsImxheWVyRXh0ZW50IiwicmVuZGVyQ29vcmRpbmF0ZSIsIm5ld0NhbnZhcyIsIm5ld0NvbnRleHQiLCJjbGVhclJlY3QiLCJnZXRJbWFnZURhdGEiLCJVaW50OEFycmF5IiwiVGlsZVJhbmdlIiwiY29udGFpbnNUaWxlUmFuZ2UiLCJDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciIsInRpbGVMYXllciIsImV4dGVudENoYW5nZWQiLCJyZW5kZXJlZEV4dGVudF8iLCJyZW5kZXJlZFBpeGVsUmF0aW8iLCJyZW5kZXJlZFByb2plY3Rpb24iLCJyZW5kZXJlZFJldmlzaW9uIiwicmVuZGVyZWRUaWxlcyIsIm5ld1RpbGVzXyIsInRtcEV4dGVudCIsInRtcFRpbGVSYW5nZV8iLCJpc0RyYXdhYmxlVGlsZSIsInRpbGVTdGF0ZSIsImdldFRpbGUiLCJzZXRTdGF0ZSIsImdldEludGVyaW1UaWxlIiwidmlld1Jlc29sdXRpb24iLCJ2aWV3Q2VudGVyIiwidGlsZVNvdXJjZSIsInNvdXJjZVJldmlzaW9uIiwiZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uIiwiZ2V0WkZvclJlc29sdXRpb24iLCJ6RGlyZWN0aW9uIiwidGlsZVBpeGVsUmF0aW8iLCJnZXRUaWxlUGl4ZWxSYXRpbyIsImNhbnZhc0V4dGVudCIsImdldFRpbGVSYW5nZUZvckV4dGVudEFuZFoiLCJ0aWxlc1RvRHJhd0J5WiIsImZpbmRMb2FkZWRUaWxlcyIsInRtcFRpbGVSYW5nZSIsInVpZCIsImluVHJhbnNpdGlvbiIsImdldEFscGhhIiwiY2hpbGRUaWxlUmFuZ2UiLCJnZXRUaWxlQ29vcmRDaGlsZFRpbGVSYW5nZSIsImNvdmVyZWQiLCJmb3JFYWNoVGlsZUNvb3JkUGFyZW50VGlsZVJhbmdlIiwiY2FudmFzU2NhbGUiLCJjYW52YXNUcmFuc2Zvcm0iLCJnZXRDb250ZXh0T3B0aW9ucyIsImNsaXBzIiwiY2xpcFpzIiwiY3VycmVudENsaXAiLCJ6cyIsImdldE9wYXF1ZSIsInJldmVyc2UiLCJjdXJyZW50WiIsImN1cnJlbnRUaWxlUGl4ZWxTaXplIiwiZ2V0VGlsZVBpeGVsU2l6ZSIsImN1cnJlbnRTY2FsZSIsImR4XzEiLCJkeV8xIiwib3JpZ2luVGlsZUNvb3JkIiwiZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRaIiwib3JpZ2luVGlsZUV4dGVudCIsImdldFRpbGVDb29yZEV4dGVudCIsIm9yaWdpbl8xIiwidGlsZUd1dHRlciIsImdldEd1dHRlckZvclByb2plY3Rpb24iLCJ0aWxlc1RvRHJhdyIsInRpbGVDb29yZEtleSIsImZsb2F0WCIsIm5leHRYIiwiZmxvYXRZIiwibmV4dFkiLCJ0cmFuc2l0aW9uIiwiaV8xIiwiZHJhd1RpbGVJbWFnZSIsInVwZGF0ZVVzZWRUaWxlcyIsIm1hbmFnZVRpbGVQeXJhbWlkIiwic2NoZWR1bGVFeHBpcmVDYWNoZSIsImd1dHRlciIsImdldFRpbGVJbWFnZSIsInRpbGVBbHBoYSIsImFscGhhIiwiYWxwaGFDaGFuZ2VkIiwiZW5kVHJhbnNpdGlvbiIsInBvc3RSZW5kZXJGdW5jdGlvbiIsImV4cGlyZUNhY2hlIiwib3B0X3RpbGVDYWxsYmFjayIsInRpbGVDb3VudCIsImdldFRpbGVDb29yZENlbnRlciIsInVzZVRpbGUiLCJ1cGRhdGVDYWNoZVNpemUiLCJUaWxlTGF5ZXIiLCJCYXNlVGlsZSIsIkJhc2VWZWN0b3JMYXllciIsInJlbmRlckJ1ZmZlciIsInVwZGF0ZVdoaWxlQW5pbWF0aW5nIiwidXBkYXRlV2hpbGVJbnRlcmFjdGluZyIsImRlY2x1dHRlcl8iLCJkZWNsdXR0ZXIiLCJyZW5kZXJCdWZmZXJfIiwidXBkYXRlV2hpbGVBbmltYXRpbmdfIiwidXBkYXRlV2hpbGVJbnRlcmFjdGluZ18iLCJnZXREZWNsdXR0ZXIiLCJnZXRSZW5kZXJCdWZmZXIiLCJnZXRSZW5kZXJPcmRlciIsImdldFVwZGF0ZVdoaWxlQW5pbWF0aW5nIiwiZ2V0VXBkYXRlV2hpbGVJbnRlcmFjdGluZyIsInNldFJlbmRlck9yZGVyIiwicmVuZGVyT3JkZXIiLCJJbnN0cnVjdGlvbiIsIkJFR0lOX0dFT01FVFJZIiwiQkVHSU5fUEFUSCIsIkNMT1NFX1BBVEgiLCJDVVNUT00iLCJEUkFXX0NIQVJTIiwiRFJBV19JTUFHRSIsIkVORF9HRU9NRVRSWSIsIkZJTEwiLCJNT1ZFX1RPX0xJTkVfVE8iLCJTRVRfRklMTF9TVFlMRSIsIlNFVF9TVFJPS0VfU1RZTEUiLCJTVFJPS0UiLCJmaWxsSW5zdHJ1Y3Rpb24iLCJzdHJva2VJbnN0cnVjdGlvbiIsImJlZ2luUGF0aEluc3RydWN0aW9uIiwiY2xvc2VQYXRoSW5zdHJ1Y3Rpb24iLCJWZWN0b3JDb250ZXh0IiwiZHJhd0N1c3RvbSIsImRyYXdHZW9tZXRyeSIsImRyYXdDaXJjbGUiLCJjaXJjbGVHZW9tZXRyeSIsImRyYXdGZWF0dXJlIiwiZHJhd0dlb21ldHJ5Q29sbGVjdGlvbiIsImdlb21ldHJ5Q29sbGVjdGlvbkdlb21ldHJ5IiwiZHJhd0xpbmVTdHJpbmciLCJsaW5lU3RyaW5nR2VvbWV0cnkiLCJkcmF3TXVsdGlMaW5lU3RyaW5nIiwibXVsdGlMaW5lU3RyaW5nR2VvbWV0cnkiLCJkcmF3TXVsdGlQb2ludCIsIm11bHRpUG9pbnRHZW9tZXRyeSIsImRyYXdNdWx0aVBvbHlnb24iLCJtdWx0aVBvbHlnb25HZW9tZXRyeSIsImRyYXdQb2ludCIsInBvaW50R2VvbWV0cnkiLCJkcmF3UG9seWdvbiIsInBvbHlnb25HZW9tZXRyeSIsImRyYXdUZXh0Iiwic2V0RmlsbFN0cm9rZVN0eWxlIiwic2V0SW1hZ2VTdHlsZSIsImltYWdlU3R5bGUiLCJvcHRfZGVjbHV0dGVySW1hZ2VXaXRoVGV4dCIsInNldFRleHRTdHlsZSIsInRleHRTdHlsZSIsIkNhbnZhc0J1aWxkZXIiLCJtYXhMaW5lV2lkdGgiLCJiZWdpbkdlb21ldHJ5SW5zdHJ1Y3Rpb24xXyIsImJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjJfIiwiYnVmZmVyZWRNYXhFeHRlbnRfIiwiaW5zdHJ1Y3Rpb25zIiwidG1wQ29vcmRpbmF0ZV8iLCJoaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMiLCJhcHBseVBpeGVsUmF0aW8iLCJkYXNoQXJyYXkiLCJkYXNoIiwiYXBwZW5kRmxhdFBvaW50Q29vcmRpbmF0ZXMiLCJnZXRCdWZmZXJlZE1heEV4dGVudCIsIm15RW5kIiwiYXBwZW5kRmxhdExpbmVDb29yZGluYXRlcyIsImNsb3NlZCIsInNraXBGaXJzdCIsImxhc3RSZWwiLCJuZXh0UmVsIiwibGFzdFhDb29yZCIsImxhc3RZQ29vcmQiLCJuZXh0Q29vcmQiLCJza2lwcGVkIiwiUmVsYXRpb25zaGlwIiwiZHJhd0N1c3RvbUNvb3JkaW5hdGVzXyIsImJ1aWxkZXJFbmRzIiwiYnVpbGRlckVuZCIsImJlZ2luR2VvbWV0cnkiLCJidWlsZGVyRW5kc3MiLCJidWlsZGVyQmVnaW4iLCJnZXRFbmRzcyIsIm15RW5kcyIsImVuZEdlb21ldHJ5IiwiZmluaXNoIiwicmV2ZXJzZUhpdERldGVjdGlvbkluc3RydWN0aW9ucyIsImluc3RydWN0aW9uIiwiZmlsbFN0eWxlQ29sb3IiLCJzdHJva2VTdHlsZUNvbG9yIiwic3Ryb2tlU3R5bGVMaW5lQ2FwIiwic3Ryb2tlU3R5bGVMaW5lRGFzaCIsInN0cm9rZVN0eWxlTGluZURhc2hPZmZzZXQiLCJzdHJva2VTdHlsZUxpbmVKb2luIiwic3Ryb2tlU3R5bGVXaWR0aCIsInN0cm9rZVN0eWxlTWl0ZXJMaW1pdCIsImNyZWF0ZUZpbGwiLCJhcHBseVN0cm9rZSIsImNyZWF0ZVN0cm9rZSIsInVwZGF0ZUZpbGxTdHlsZSIsImN1cnJlbnRGaWxsU3R5bGUiLCJ1cGRhdGVTdHJva2VTdHlsZSIsImN1cnJlbnRTdHJva2VTdHlsZSIsImN1cnJlbnRMaW5lQ2FwIiwiY3VycmVudExpbmVEYXNoIiwiY3VycmVudExpbmVEYXNoT2Zmc2V0IiwiY3VycmVudExpbmVKb2luIiwiY3VycmVudExpbmVXaWR0aCIsImN1cnJlbnRNaXRlckxpbWl0IiwiZW5kR2VvbWV0cnlJbnN0cnVjdGlvbiIsIkNhbnZhc0ltYWdlQnVpbGRlciIsImhpdERldGVjdGlvbkltYWdlXyIsImltYWdlUGl4ZWxSYXRpb18iLCJhbmNob3JYXyIsImFuY2hvcllfIiwiaGVpZ2h0XyIsIm9yaWdpblhfIiwib3JpZ2luWV8iLCJkZWNsdXR0ZXJJbWFnZVdpdGhUZXh0XyIsIm15QmVnaW4iLCJvcHRfc2hhcmVkRGF0YSIsImhpdERldGVjdGlvbkltYWdlIiwib3JpZ2luIiwiQ2FudmFzTGluZVN0cmluZ0J1aWxkZXIiLCJkcmF3RmxhdENvb3JkaW5hdGVzXyIsIm1vdmVUb0xpbmVUb0luc3RydWN0aW9uIiwibGFzdFN0cm9rZSIsIkNhbnZhc1BvbHlnb25CdWlsZGVyIiwiZHJhd0ZsYXRDb29yZGluYXRlc3NfIiwibnVtRW5kcyIsInNldEZpbGxTdHJva2VTdHlsZXNfIiwiY2lyY2xlSW5zdHJ1Y3Rpb24iLCJtYXRjaGluZ0NodW5rIiwibTEyIiwibTIzIiwieDEyIiwieTEyIiwieDIzIiwieTIzIiwiY2h1bmtTdGFydCIsImNodW5rRW5kIiwiY2h1bmtNIiwiYWNvcyIsIlRFWFRfQUxJR04iLCJCQVRDSF9DT05TVFJVQ1RPUlMiLCJQb2x5Z29uQnVpbGRlciIsIkJ1aWxkZXIiLCJJbWFnZUJ1aWxkZXIiLCJMaW5lU3RyaW5nQnVpbGRlciIsIkNhbnZhc1RleHRCdWlsZGVyIiwibGFiZWxzXyIsInRleHRPZmZzZXRYXyIsInRleHRPZmZzZXRZXyIsInRleHRSb3RhdGVXaXRoVmlld18iLCJ0ZXh0Um90YXRpb25fIiwidGV4dEZpbGxTdGF0ZV8iLCJmaWxsU3RhdGVzIiwidGV4dFN0cm9rZVN0YXRlXyIsInN0cm9rZVN0YXRlcyIsInRleHRTdGF0ZV8iLCJ0ZXh0U3RhdGVzIiwidGV4dEtleV8iLCJmaWxsS2V5XyIsInN0cm9rZUtleV8iLCJmaWxsU3RhdGUiLCJzdHJva2VTdGF0ZSIsInRleHRTdGF0ZSIsImdlb21ldHJ5VHlwZSIsImdlb21ldHJ5V2lkdGhzIiwiZ2V0RmxhdE1pZHBvaW50IiwiZ2V0RmxhdE1pZHBvaW50cyIsImludGVyaW9yUG9pbnRzIiwiZ2V0RmxhdEludGVyaW9yUG9pbnRzIiwic2F2ZVRleHRTdGF0ZXNfIiwicDAiLCJwMSIsInAyIiwicDMiLCJwaXhlbFJhdGlvXzEiLCJmbGF0T2Zmc2V0IiwiZmxhdEVuZCIsIm9vIiwicmFuZ2UiLCJkcmF3Q2hhcnNfIiwic3Ryb2tlS2V5IiwidGV4dEtleSIsImZpbGxLZXkiLCJiYXNlbGluZSIsInRleHRGaWxsU3R5bGUiLCJ0ZXh0U3Ryb2tlU3R5bGUiLCJ0ZXh0U2NhbGUiLCJ0ZXh0T2Zmc2V0WCIsInRleHRPZmZzZXRZIiwidGV4dFJvdGF0ZVdpdGhWaWV3IiwidGV4dFJvdGF0aW9uIiwiQnVpbGRlckdyb3VwIiwidG9sZXJhbmNlXyIsIm1heEV4dGVudF8iLCJyZXNvbHV0aW9uXyIsImJ1aWxkZXJzQnlaSW5kZXhfIiwiYnVpbGRlckluc3RydWN0aW9ucyIsInpLZXkiLCJidWlsZGVycyIsImJ1aWxkZXJLZXkiLCJidWlsZGVySW5zdHJ1Y3Rpb24iLCJnZXRCdWlsZGVyIiwiYnVpbGRlclR5cGUiLCJ6SW5kZXhLZXkiLCJyZXBsYXlzIiwicmVwbGF5IiwiQ29uc3RydWN0b3IiLCJkcmF3VGV4dE9uUGF0aCIsInN0YXJ0TSIsInNlZ21lbnRNIiwiYWR2YW5jZSIsImludGVycG9sYXRlIiwiYmVnaW5YIiwiYmVnaW5ZIiwic3RhcnRPZmZzZXQiLCJzdGFydExlbmd0aCIsImVuZE0iLCJmbGF0IiwicHJldmlvdXNBbmdsZSIsInNpbmdsZVNlZ21lbnQiLCJwcmV2aW91c0FuZ2xlXzEiLCJpU3RhcnQiLCJjaGFyTGVuZ3RoIiwiY2hhcnMiLCJzdWJzdHJpbmciLCJsaW5lU3RyaW5nTGVuZ3RoIiwicDQiLCJnZXREZWNsdXR0ZXJCb3giLCJyZXBsYXlJbWFnZU9yTGFiZWxBcmdzIiwiZGVjbHV0dGVyQm94IiwicnRsUmVnRXgiLCJmcm9tQ2hhckNvZGUiLCJob3Jpem9udGFsVGV4dEFsaWduIiwiYWxpZ24iLCJ0ZXN0IiwiRXhlY3V0b3IiLCJvdmVybGFwcyIsImFsaWduRmlsbF8iLCJjb29yZGluYXRlQ2FjaGVfIiwicmVuZGVyZWRUcmFuc2Zvcm1fIiwicGl4ZWxDb29yZGluYXRlc18iLCJ2aWV3Um90YXRpb25fIiwid2lkdGhzXyIsImNyZWF0ZUxhYmVsIiwicmVuZGVyV2lkdGgiLCJPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQiLCJDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQiLCJsZWZ0UmlnaHQiLCJyZXBsYXlUZXh0QmFja2dyb3VuZF8iLCJzZXRTdHJva2VTdHlsZV8iLCJjYWxjdWxhdGVJbWFnZU9yTGFiZWxEaW1lbnNpb25zXyIsInNoZWV0V2lkdGgiLCJzaGVldEhlaWdodCIsInNuYXBUb1BpeGVsIiwiZmlsbFN0cm9rZSIsImJveFciLCJib3hIIiwiYm94WCIsImJveFkiLCJkcmF3SW1hZ2VYIiwiZHJhd0ltYWdlWSIsImRyYXdJbWFnZVciLCJkcmF3SW1hZ2VIIiwicmVwbGF5SW1hZ2VPckxhYmVsXyIsImNvbnRleHRTY2FsZSIsImltYWdlT3JMYWJlbCIsImRpbWVuc2lvbnMiLCJzdHJva2VQYWRkaW5nIiwicmVwZWF0U2l6ZSIsImRyYXdMYWJlbFdpdGhQb2ludFBsYWNlbWVudF8iLCJleGVjdXRlXyIsIm9wdF9mZWF0dXJlQ2FsbGJhY2siLCJvcHRfaGl0RXh0ZW50Iiwib3B0X2RlY2x1dHRlclRyZWUiLCJwaXhlbENvb3JkaW5hdGVzIiwiZGQiLCJwcmV2WCIsInByZXZZIiwicm91bmRYIiwicm91bmRZIiwiY3VycmVudEdlb21ldHJ5IiwicGVuZGluZ0ZpbGwiLCJwZW5kaW5nU3Ryb2tlIiwibGFzdEZpbGxJbnN0cnVjdGlvbiIsImxhc3RTdHJva2VJbnN0cnVjdGlvbiIsImNvb3JkaW5hdGVDYWNoZSIsInZpZXdSb3RhdGlvbiIsInZpZXdSb3RhdGlvbkZyb21UcmFuc2Zvcm0iLCJiYXRjaFNpemUiLCJkZWNsdXR0ZXJJbWFnZVdpdGhUZXh0IiwibGFiZWxXaXRoQW5jaG9yIiwid2lkdGhJbmRleCIsImltYWdlQXJncyIsImltYWdlRGVjbHV0dGVyQm94IiwibWVhc3VyZVBpeGVsUmF0aW8iLCJwaXhlbFJhdGlvU2NhbGUiLCJjYWNoZWRXaWR0aHMiLCJwYXRoTGVuZ3RoIiwidGV4dExlbmd0aCIsInBhcnRzIiwiZHJhd0NoYXJzIiwiY2MiLCJwYXJ0IiwiaWlfMSIsImV4ZWN1dGUiLCJleGVjdXRlSGl0RGV0ZWN0aW9uIiwiT1JERVIiLCJCdWlsZGVyVHlwZSIsIkV4ZWN1dG9yR3JvdXAiLCJhbGxJbnN0cnVjdGlvbnMiLCJvcHRfcmVuZGVyQnVmZmVyIiwib3ZlcmxhcHNfIiwiZXhlY3V0b3JzQnlaSW5kZXhfIiwiaGl0RGV0ZWN0aW9uQ29udGV4dF8iLCJoaXREZXRlY3Rpb25UcmFuc2Zvcm1fIiwiY3JlYXRlRXhlY3V0b3JzXyIsImZsYXRDbGlwQ29vcmRzIiwiZ2V0Q2xpcENvb3JkcyIsImV4ZWN1dG9ycyIsImluc3RydWN0aW9uQnlaaW5kZXgiLCJoYXNFeGVjdXRvcnMiLCJjYW5kaWRhdGVzIiwiZGVjbHV0dGVyZWRGZWF0dXJlcyIsImNvbnRleHRTaXplIiwiaGl0RXh0ZW50IiwiaW5kZXhlcyIsImNpcmNsZVBpeGVsSW5kZXhBcnJheUNhY2hlIiwibWF4RGlzdGFuY2VTcSIsImRpc3RhbmNlcyIsInBpeGVsSW5kZXgiLCJnZXRQaXhlbEluZGV4QXJyYXkiLCJmZWF0dXJlQ2FsbGJhY2siLCJpbWFnZURhdGEiLCJpZHgiLCJyZXN1bHRfMSIsImV4ZWN1dG9yIiwib3B0X2J1aWxkZXJUeXBlcyIsImJ1aWxkZXJUeXBlcyIsIkNhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyIiwib3B0X3NxdWFyZWRUb2xlcmFuY2UiLCJvcHRfdXNlclRyYW5zZm9ybSIsImNvbnRleHRfIiwic3F1YXJlZFRvbGVyYW5jZV8iLCJ1c2VyVHJhbnNmb3JtXyIsImNvbnRleHRGaWxsU3RhdGVfIiwiY29udGV4dFN0cm9rZVN0YXRlXyIsImNvbnRleHRUZXh0U3RhdGVfIiwiZmlsbFN0YXRlXyIsInN0cm9rZVN0YXRlXyIsImltYWdlQW5jaG9yWF8iLCJpbWFnZUFuY2hvcllfIiwiaW1hZ2VIZWlnaHRfIiwiaW1hZ2VPcGFjaXR5XyIsImltYWdlT3JpZ2luWF8iLCJpbWFnZU9yaWdpbllfIiwiaW1hZ2VSb3RhdGVXaXRoVmlld18iLCJpbWFnZVJvdGF0aW9uXyIsImltYWdlU2NhbGVfIiwiaW1hZ2VXaWR0aF8iLCJ0ZXh0U2NhbGVfIiwidG1wTG9jYWxUcmFuc2Zvcm1fIiwiZHJhd0ltYWdlc18iLCJsb2NhbFRyYW5zZm9ybSIsImRyYXdUZXh0XyIsInNldENvbnRleHRGaWxsU3RhdGVfIiwic2V0Q29udGV4dFN0cm9rZVN0YXRlXyIsInNldENvbnRleHRUZXh0U3RhdGVfIiwic3Ryb2tlVGV4dCIsImZpbGxUZXh0IiwibW92ZVRvTGluZVRvXyIsImNsb3NlIiwiZHJhd1JpbmdzXyIsImdlb21ldHJpZXMiLCJnZXRHZW9tZXRyaWVzQXJyYXkiLCJmbGF0TWlkcG9pbnQiLCJnZW9tZXRyeUV4dGVudCIsImZsYXRNaWRwb2ludHMiLCJmbGF0SW50ZXJpb3JQb2ludCIsImZsYXRJbnRlcmlvclBvaW50cyIsImNvbnRleHRGaWxsU3RhdGUiLCJjb250ZXh0U3Ryb2tlU3RhdGUiLCJjb250ZXh0VGV4dFN0YXRlIiwiaW1hZ2VBbmNob3IiLCJpbWFnZUltYWdlIiwiaW1hZ2VPcmlnaW4iLCJpbWFnZVNjYWxlIiwidGV4dEZpbGxTdHlsZUNvbG9yIiwidGV4dFN0cm9rZVN0eWxlQ29sb3IiLCJ0ZXh0U3Ryb2tlU3R5bGVMaW5lQ2FwIiwidGV4dFN0cm9rZVN0eWxlTGluZURhc2giLCJ0ZXh0U3Ryb2tlU3R5bGVMaW5lRGFzaE9mZnNldCIsInRleHRTdHJva2VTdHlsZUxpbmVKb2luIiwidGV4dFN0cm9rZVN0eWxlV2lkdGgiLCJ0ZXh0U3Ryb2tlU3R5bGVNaXRlckxpbWl0IiwidGV4dEZvbnQiLCJ0ZXh0VGV4dCIsInRleHRUZXh0QWxpZ24iLCJ0ZXh0VGV4dEJhc2VsaW5lIiwiSW1hZ2VCYXNlIiwibGlzdGVuSW1hZ2UiLCJsb2FkSGFuZGxlciIsImVycm9ySGFuZGxlciIsImltZyIsImxpc3RlbmluZ18xIiwiY2F0Y2giLCJJbWFnZVdyYXBwZXIiLCJpbWFnZUxvYWRGdW5jdGlvbiIsInNyY18iLCJ1bmxpc3Rlbl8iLCJpbWFnZUxvYWRGdW5jdGlvbl8iLCJoYW5kbGVJbWFnZUVycm9yXyIsInVubGlzdGVuSW1hZ2VfIiwiaGFuZGxlSW1hZ2VMb2FkXyIsInRhaW50ZWRUZXN0Q29udGV4dCIsIkljb25JbWFnZSIsImltYWdlU3RhdGVfIiwidGFpbnRlZF8iLCJpc1RhaW50ZWRfIiwiZGlzcGF0Y2hDaGFuZ2VFdmVudF8iLCJyZXBsYWNlQ29sb3JfIiwiZmlsbFJlY3QiLCJnZXRTcmMiLCJjdHgiLCJnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24iLCJpbWdEYXRhIiwicHV0SW1hZ2VEYXRhIiwiSWNvbiIsIm5vcm1hbGl6ZWRBbmNob3JfIiwiYW5jaG9yT3JpZ2luXyIsImFuY2hvck9yaWdpbiIsIkljb25PcmlnaW4iLCJhbmNob3JYVW5pdHNfIiwiYW5jaG9yWFVuaXRzIiwiSWNvbkFuY2hvclVuaXRzIiwiYW5jaG9yWVVuaXRzXyIsImFuY2hvcllVbml0cyIsImNyb3NzT3JpZ2luXyIsImltZ1NpemUiLCJpY29uSW1hZ2VfIiwib2Zmc2V0XyIsIm9mZnNldE9yaWdpbl8iLCJvZmZzZXRPcmlnaW4iLCJzZXRBbmNob3IiLCJpY29uSW1hZ2VTaXplIiwiR0VPTUVUUllfUkVOREVSRVJTIiwiYnVpbGRlckdyb3VwIiwib3B0X2RlY2x1dHRlckJ1aWxkZXJHcm91cCIsImltYWdlUmVwbGF5IiwidGV4dFJlcGxheSIsImxpbmVTdHJpbmdSZXBsYXkiLCJwb2x5Z29uUmVwbGF5IiwicmVwbGF5R3JvdXAiLCJnZW9tZXRyeVJlbmRlcmVyIiwiY2lyY2xlUmVwbGF5IiwiZGVmYXVsdE9yZGVyIiwiZmVhdHVyZTEiLCJmZWF0dXJlMiIsImdldFRvbGVyYW5jZSIsInJlbmRlckZlYXR1cmUiLCJyZW5kZXJHZW9tZXRyeSIsInJlbmRlckZlYXR1cmVJbnRlcm5hbCIsImdldEdlb21ldHJpZXMiLCJDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyIiwidmVjdG9yTGF5ZXIiLCJib3VuZEhhbmRsZVN0eWxlSW1hZ2VDaGFuZ2VfIiwiaGFuZGxlU3R5bGVJbWFnZUNoYW5nZV8iLCJhbmltYXRpbmdPckludGVyYWN0aW5nXyIsImRpcnR5XyIsImhpdERldGVjdGlvbkltYWdlRGF0YV8iLCJyZW5kZXJlZEZlYXR1cmVzXyIsInJlbmRlcmVkUmV2aXNpb25fIiwicmVuZGVyZWRSZXNvbHV0aW9uXyIsInJlbmRlcmVkUm90YXRpb25fIiwicmVuZGVyZWRDZW50ZXJfIiwicmVuZGVyZWRQcm9qZWN0aW9uXyIsInJlbmRlcmVkUmVuZGVyT3JkZXJfIiwicmVwbGF5R3JvdXBfIiwicmVwbGF5R3JvdXBDaGFuZ2VkIiwiY2xpcHBpbmciLCJyZW5kZXJXb3JsZHMiLCJleGVjdXRvckdyb3VwIiwidmVjdG9yU291cmNlIiwiZW5kV29ybGQiLCJ3b3JsZCIsImNsaXBwZWQiLCJpbWFnZVNtb290aGluZ0VuYWJsZWQiLCJmZWF0dXJlQ291bnQiLCJpbmRleEZhY3RvciIsImZlYXR1cmVzQnlaSW5kZXgiLCJmZWF0dXJlU3R5bGVGdW5jdGlvbiIsIm9yaWdpbmFsU3R5bGUiLCJjYW52YXNfMSIsImltZ0NvbnRleHQiLCJ3aWR0aF8xIiwiaGVpZ2h0XzEiLCJieUdlb21ldHJ5VHlwZSIsInpJbmRleEtleXMiLCJnZW9tQW5kU3R5bGUiLCJrayIsImNyZWF0ZUhpdERldGVjdGlvbkltYWdlRGF0YSIsInJlc3VsdEZlYXR1cmVzIiwiaGl0RGV0ZWN0IiwiZXhlY3V0b3JHcm91cHMiLCJhbmltYXRpbmciLCJpbnRlcmFjdGluZyIsImZyYW1lU3RhdGVFeHRlbnQiLCJ2ZWN0b3JMYXllclJldmlzaW9uIiwidmVjdG9yTGF5ZXJSZW5kZXJCdWZmZXIiLCJ2ZWN0b3JMYXllclJlbmRlck9yZGVyIiwibG9hZEV4dGVudHMiLCJsb2FkRXh0ZW50IiwiZGVjbHV0dGVyQnVpbGRlckdyb3VwIiwidXNlclRyYW5zZm9ybSIsImxvYWRGZWF0dXJlcyIsImRpcnR5IiwidXNlckV4dGVudCIsImdldEZlYXR1cmVzSW5FeHRlbnQiLCJyZXBsYXlHcm91cEluc3RydWN0aW9ucyIsImdldE92ZXJsYXBzIiwiVmVjdG9yTGF5ZXIiLCJCYXNlVmVjdG9yIiwiUkJ1c2giLCJvcHRfbWF4RW50cmllcyIsInJidXNoXyIsIml0ZW1zXyIsImV4dGVudHMiLCJpdGVtcyIsImJib3giLCJnZXRBbGwiLCJnZXRJbkV4dGVudCIsImZvckVhY2hfIiwiZm9yRWFjaEluRXh0ZW50IiwicmJ1c2giLCJhZGFwdEF0dHJpYnV0aW9ucyIsImF0dHJpYnV0aW9uTGlrZSIsIlNvdXJjZSIsImF0dHJpYnV0aW9uc18iLCJhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZV8iLCJhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSIsIndyYXBYXyIsInJlZnJlc2giLCJzZXRBdHRyaWJ1dGlvbnMiLCJ4aHIiLCJmb3JtYXQiLCJzdWNjZXNzIiwiZmFpbHVyZSIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIkZvcm1hdFR5cGUiLCJyZXNwb25zZVR5cGUiLCJ3aXRoQ3JlZGVudGlhbHMiLCJzdGF0dXMiLCJyZXNwb25zZVRleHQiLCJyZXNwb25zZVhNTCIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsInJlYWRGZWF0dXJlcyIsImZlYXR1cmVQcm9qZWN0aW9uIiwicmVhZFByb2plY3Rpb24iLCJzZW5kIiwibG9hZEZlYXR1cmVzWGhyIiwiZGF0YVByb2plY3Rpb24iLCJhZGRGZWF0dXJlcyIsIlZlY3RvclNvdXJjZUV2ZW50Iiwib3B0X2ZlYXR1cmUiLCJvcHRfZmVhdHVyZXMiLCJWZWN0b3JTb3VyY2UiLCJsb2FkZXJfIiwiZm9ybWF0XyIsInVybF8iLCJsb2FkZXIiLCJzdHJhdGVneV8iLCJzdHJhdGVneSIsImNvbGxlY3Rpb24iLCJ1c2VTcGF0aWFsSW5kZXgiLCJmZWF0dXJlc1J0cmVlXyIsImxvYWRlZEV4dGVudHNSdHJlZV8iLCJudWxsR2VvbWV0cnlGZWF0dXJlc18iLCJpZEluZGV4XyIsInVpZEluZGV4XyIsImZlYXR1cmVDaGFuZ2VLZXlzXyIsImZlYXR1cmVzQ29sbGVjdGlvbl8iLCJhZGRGZWF0dXJlc0ludGVybmFsIiwiYmluZEZlYXR1cmVzQ29sbGVjdGlvbl8iLCJhZGRGZWF0dXJlIiwiYWRkRmVhdHVyZUludGVybmFsIiwiZmVhdHVyZUtleSIsImFkZFRvSW5kZXhfIiwic2V0dXBDaGFuZ2VFdmVudHNfIiwiVmVjdG9yRXZlbnRUeXBlIiwiaGFuZGxlRmVhdHVyZUNoYW5nZV8iLCJ2YWxpZCIsIm5ld0ZlYXR1cmVzIiwiZ2VvbWV0cnlGZWF0dXJlcyIsImxlbmd0aF8xIiwibGVuZ3RoXzIiLCJsZW5ndGhfMyIsIm1vZGlmeWluZ0NvbGxlY3Rpb24iLCJyZW1vdmVGZWF0dXJlIiwib3B0X2Zhc3QiLCJmZWF0dXJlSWQiLCJyZW1vdmVGZWF0dXJlSW50ZXJuYWwiLCJjbGVhckV2ZW50IiwiZm9yRWFjaEZlYXR1cmUiLCJmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZURpcmVjdCIsImZvckVhY2hGZWF0dXJlSW5FeHRlbnQiLCJmb3JFYWNoRmVhdHVyZUludGVyc2VjdGluZ0V4dGVudCIsImdldEZlYXR1cmVzQ29sbGVjdGlvbiIsImdldEZlYXR1cmVzQXRDb29yZGluYXRlIiwiZ2V0Q2xvc2VzdEZlYXR1cmVUb0Nvb3JkaW5hdGUiLCJvcHRfZmlsdGVyIiwiY2xvc2VzdEZlYXR1cmUiLCJwcmV2aW91c01pblNxdWFyZWREaXN0YW5jZSIsIm1pbkRpc3RhbmNlIiwiZ2V0RmVhdHVyZUJ5SWQiLCJnZXRGZWF0dXJlQnlVaWQiLCJnZXRGb3JtYXQiLCJnZXRVcmwiLCJzaWQiLCJyZW1vdmVGcm9tSWRJbmRleF8iLCJoYXNGZWF0dXJlIiwibG9hZGVkRXh0ZW50c1J0cmVlIiwiZXh0ZW50c1RvTG9hZCIsIl9sb29wXzEiLCJleHRlbnRUb0xvYWQiLCJ0aGlzXzEiLCJyZW1vdmVMb2FkZWRFeHRlbnQiLCJyZW1vdmVkIiwic2V0TG9hZGVyIiwic2V0VXJsIiwiVGlsZSIsImludGVyaW1UaWxlIiwidHJhbnNpdGlvbl8iLCJ0cmFuc2l0aW9uU3RhcnRzXyIsInJlbGVhc2UiLCJyZWZyZXNoSW50ZXJpbUNoYWluIiwiZ2V0VGlsZUNvb3JkIiwiSW1hZ2VUaWxlIiwidGlsZUxvYWRGdW5jdGlvbiIsInRpbGVMb2FkRnVuY3Rpb25fIiwibmF0dXJhbFdpZHRoIiwibmF0dXJhbEhlaWdodCIsIlRyaWFuZ3VsYXRpb24iLCJ0YXJnZXRQcm9qIiwidGFyZ2V0RXh0ZW50IiwibWF4U291cmNlRXh0ZW50IiwiZXJyb3JUaHJlc2hvbGQiLCJvcHRfZGVzdGluYXRpb25SZXNvbHV0aW9uIiwic291cmNlUHJval8iLCJ0YXJnZXRQcm9qXyIsInRyYW5zZm9ybUludkNhY2hlIiwidHJhbnNmb3JtSW52IiwidHJhbnNmb3JtSW52XyIsIm1heFNvdXJjZUV4dGVudF8iLCJlcnJvclRocmVzaG9sZFNxdWFyZWRfIiwidHJpYW5nbGVzXyIsIndyYXBzWEluU291cmNlXyIsImNhbldyYXBYSW5Tb3VyY2VfIiwic291cmNlV29ybGRXaWR0aF8iLCJ0YXJnZXRXb3JsZFdpZHRoXyIsImRlc3RpbmF0aW9uVG9wTGVmdCIsImRlc3RpbmF0aW9uVG9wUmlnaHQiLCJkZXN0aW5hdGlvbkJvdHRvbVJpZ2h0IiwiZGVzdGluYXRpb25Cb3R0b21MZWZ0Iiwic291cmNlVG9wTGVmdCIsInNvdXJjZVRvcFJpZ2h0Iiwic291cmNlQm90dG9tUmlnaHQiLCJzb3VyY2VCb3R0b21MZWZ0IiwibWF4U3ViZGl2aXNpb24iLCJhZGRRdWFkXyIsImxlZnRCb3VuZF8xIiwidHJpYW5nbGUiLCJuZXdUcmlhbmdsZSIsImFkZFRyaWFuZ2xlXyIsImFTcmMiLCJiU3JjIiwiY1NyYyIsImRTcmMiLCJzb3VyY2VRdWFkRXh0ZW50Iiwic291cmNlQ292ZXJhZ2VYIiwic291cmNlV29ybGRXaWR0aCIsIndyYXBzWCIsIm5lZWRzU3ViZGl2aXNpb24iLCJ0YXJnZXRRdWFkRXh0ZW50IiwiaXNGaW5pdGUiLCJpc05vdEZpbml0ZSIsImNlbnRlclNyYyIsImJjIiwiYmNTcmMiLCJkYSIsImRhU3JjIiwiYWIiLCJhYlNyYyIsImNkIiwiY2RTcmMiLCJjYWxjdWxhdGVTb3VyY2VFeHRlbnQiLCJnZXRUcmlhbmdsZXMiLCJicm9rZW5EaWFnb25hbFJlbmRlcmluZ18iLCJJTUFHRV9TTU9PVEhJTkdfRElTQUJMRUQiLCJtc0ltYWdlU21vb3RoaW5nRW5hYmxlZCIsImRyYXdUZXN0VHJpYW5nbGUiLCJ1MSIsInYxIiwidTIiLCJ2MiIsInZlcmlmeUJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nIiwiY2FsY3VsYXRlU291cmNlUmVzb2x1dGlvbiIsInRhcmdldE1ldGVyc1BlclVuaXQiLCJzb3VyY2VNZXRlcnNQZXJVbml0Iiwic291cmNlRXh0ZW50IiwiY29tcGVuc2F0aW9uRmFjdG9yIiwiUmVwcm9qVGlsZSIsInNvdXJjZVRpbGVHcmlkIiwidGFyZ2V0VGlsZUdyaWQiLCJ3cmFwcGVkVGlsZUNvb3JkIiwiZ2V0VGlsZUZ1bmN0aW9uIiwib3B0X2Vycm9yVGhyZXNob2xkIiwib3B0X3JlbmRlckVkZ2VzIiwib3B0X2NvbnRleHRPcHRpb25zIiwicmVuZGVyRWRnZXNfIiwiY29udGV4dE9wdGlvbnNfIiwiZ3V0dGVyXyIsInNvdXJjZVRpbGVHcmlkXyIsInRhcmdldFRpbGVHcmlkXyIsIndyYXBwZWRUaWxlQ29vcmRfIiwic291cmNlVGlsZXNfIiwic291cmNlc0xpc3RlbmVyS2V5c18iLCJzb3VyY2VaXyIsIm1heFRhcmdldEV4dGVudCIsImxpbWl0ZWRUYXJnZXRFeHRlbnQiLCJzb3VyY2VQcm9qRXh0ZW50IiwiY2FsY3VsYXRlU291cmNlRXh0ZW50UmVzb2x1dGlvbiIsImVycm9yVGhyZXNob2xkSW5QaXhlbHMiLCJ0cmlhbmd1bGF0aW9uXyIsInNvdXJjZVJhbmdlIiwic3JjWCIsInNyY1kiLCJyZXByb2plY3RfIiwic291cmNlcyIsImdldFRpbGVTaXplIiwidHJpYW5ndWxhdGlvbiIsInBpeGVsUm91bmQiLCJzb3VyY2VEYXRhRXh0ZW50IiwiY2FudmFzV2lkdGhJblVuaXRzIiwiY2FudmFzSGVpZ2h0SW5Vbml0cyIsInN0aXRjaENvbnRleHQiLCJzdGl0Y2hTY2FsZSIsInhQb3MiLCJ5UG9zIiwic3JjV2lkdGgiLCJzcmNIZWlnaHQiLCJ0YXJnZXRUb3BMZWZ0IiwidTAiLCJ2MCIsInNvdXJjZU51bWVyaWNhbFNoaWZ0WCIsInNvdXJjZU51bWVyaWNhbFNoaWZ0WSIsImF1Z21lbnRlZE1hdHJpeCIsImFmZmluZUNvZWZzIiwiaXNCcm9rZW5EaWFnb25hbFJlbmRlcmluZyIsInVkIiwidmQiLCJzdGVwIiwic3RlcHMiLCJsZWZ0VG9Mb2FkXzEiLCJzb3VyY2VMaXN0ZW5LZXlfMSIsInVubGlzdGVuU291cmNlc18iLCJMUlVDYWNoZSIsIm9wdF9oaWdoV2F0ZXJNYXJrIiwiaGlnaFdhdGVyTWFyayIsImNvdW50XyIsImVudHJpZXNfIiwib2xkZXN0XyIsIm5ld2VzdF8iLCJjb250YWluc0tleSIsImVudHJ5IiwidmFsdWVfIiwia2V5XyIsIm5ld2VyIiwib2xkZXIiLCJwZWVrTGFzdCIsInBlZWtMYXN0S2V5IiwicGVla0ZpcnN0S2V5Iiwib3B0X3RpbGVDb29yZCIsImdldEtleVpYWSIsIlRpbGVDYWNoZSIsInBydW5lRXhjZXB0TmV3ZXN0WiIsInRtcFRpbGVDb29yZCIsIlRpbGVHcmlkIiwib3JpZ2lucyIsIm9yaWdpbnNfIiwidGlsZVNpemVzXyIsInRpbGVTaXplcyIsInRpbGVTaXplXyIsInRpbGVTaXplIiwiZnVsbFRpbGVSYW5nZXNfIiwidG1wU2l6ZV8iLCJzaXplcyIsInJlc3RyaWN0ZWRUaWxlUmFuZ2UiLCJjYWxjdWxhdGVUaWxlUmFuZ2VzXyIsImZvckVhY2hUaWxlQ29vcmQiLCJvcHRfdGlsZVJhbmdlIiwidGlsZUNvb3JkRXh0ZW50IiwiZ2V0VGlsZVJhbmdlRXh0ZW50IiwiZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyIsImdldFRpbGVDb29yZEZvckNvb3JkQW5kUmVzb2x1dGlvbiIsImdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl8iLCJyZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5IiwiYWRqdXN0WCIsImFkanVzdFkiLCJ4RnJvbU9yaWdpbiIsInlGcm9tT3JpZ2luIiwidGlsZUNvb3JkWCIsInRpbGVDb29yZFkiLCJnZXRUaWxlQ29vcmRSZXNvbHV0aW9uIiwiZ2V0RnVsbFRpbGVSYW5nZSIsImZ1bGxUaWxlUmFuZ2VzIiwiZ2V0Rm9yUHJvamVjdGlvbiIsIm9wdF9tYXhab29tIiwib3B0X3RpbGVTaXplIiwib3B0X2Nvcm5lciIsIkNvcm5lciIsInJlc29sdXRpb25zRnJvbUV4dGVudCIsImNyZWF0ZUZvckV4dGVudCIsImV4dGVudEZyb21Qcm9qZWN0aW9uIiwiY3JlYXRlRm9yUHJvamVjdGlvbiIsIm9wdF9tYXhSZXNvbHV0aW9uIiwiaGFsZiIsIlRpbGVTb3VyY2UiLCJvcGFxdWVfIiwib3BhcXVlIiwidGlsZVBpeGVsUmF0aW9fIiwidGlsZUNhY2hlIiwidG1wU2l6ZSIsInRpbGVPcHRpb25zIiwiZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbiIsImxvYWRlZCIsInNldEtleSIsImdldFRpbGVHcmlkIiwiZ2V0VGlsZUNvb3JkRm9yVGlsZVVybEZ1bmN0aW9uIiwid2l0aGluRXh0ZW50QW5kWiIsIlRpbGVTb3VyY2VFdmVudCIsImNyZWF0ZUZyb21UZW1wbGF0ZSIsInRlbXBsYXRlIiwielJlZ0V4IiwieFJlZ0V4IiwieVJlZ0V4IiwiZGFzaFlSZWdFeCIsIlVybFRpbGUiLCJnZW5lcmF0ZVRpbGVVcmxGdW5jdGlvbl8iLCJ0aWxlVXJsRnVuY3Rpb24iLCJ1cmxzIiwic2V0VXJscyIsInRpbGVMb2FkaW5nS2V5c18iLCJnZXRUaWxlTG9hZEZ1bmN0aW9uIiwiZ2V0VGlsZVVybEZ1bmN0aW9uIiwiZ2V0UHJvdG90eXBlT2YiLCJnZXRVcmxzIiwic2V0VGlsZUxvYWRGdW5jdGlvbiIsInNldFRpbGVVcmxGdW5jdGlvbiIsInN0YXJ0Q2hhckNvZGUiLCJzdG9wQ2hhckNvZGUiLCJzdG9wXzEiLCJleHBhbmRVcmwiLCJ0ZW1wbGF0ZXMiLCJ0aWxlVXJsRnVuY3Rpb25zIiwiY3JlYXRlRnJvbVRpbGVVcmxGdW5jdGlvbnMiLCJjcmVhdGVGcm9tVGVtcGxhdGVzIiwiZGVmYXVsdFRpbGVMb2FkRnVuY3Rpb24iLCJpbWFnZVRpbGUiLCJUaWxlSW1hZ2UiLCJ0aWxlQ2xhc3MiLCJ0aWxlQ2FjaGVGb3JQcm9qZWN0aW9uIiwidGlsZUdyaWRGb3JQcm9qZWN0aW9uIiwicmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGRfIiwicmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQiLCJpbWFnZVNtb290aGluZyIsInJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXyIsInVzZWRUaWxlQ2FjaGUiLCJnZXRHdXR0ZXIiLCJKU09OIiwic3RyaW5naWZ5IiwidGhpc1Byb2oiLCJwcm9qS2V5IiwiY3JlYXRlVGlsZV8iLCJ1cmxUaWxlQ29vcmQiLCJ0aWxlVXJsIiwibmV3VGlsZSIsImdldFRpbGVJbnRlcm5hbCIsInNldFJlbmRlclJlcHJvamVjdGlvbkVkZ2VzIiwic2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uIiwidGlsZWdyaWQiLCJwcm9qIiwieHl6T3B0aW9ucyIsImdyaWRPcHRpb25zIiwiY3JlYXRlWFlaIiwiT1NNIiwiZGF0YXNldCIsImNvbG9yUHJpbWFyeSIsImNvbG9yU2Vjb25kYXJ5IiwicGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwibWFya2VyUGFyYW0iLCJpc1ZpZXdNb2RlIiwiaGFzIiwiZ2V0Vmlld1BhcmFtIiwidmlld0RlZmF1bHQiLCJwYXJzZSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwibGF0IiwiY29udGVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjbG9uZU5vZGUiLCJtYXJrZXJMYXllciIsIm1hcmtlclNlbGVjdCIsInJhbmRvbSIsIlZlY3RvciIsIm1hcmtlciIsImluaXRNYXJrZXJNYXAiLCJjdXJyZW50IiwiaW5pdENvbnRyb2xzIiwiY29udHJvbEZvcm0iXSwibWFwcGluZ3MiOiJVQUFJQSxFQUNBQyxFQ3dDQUMsRUFTQUMsRSxvRENqRElDLEUsVUFESkMsR0FDSUQsRUFBZ0IsU0FBVUUsRUFBR0MsR0FJN0IsT0FIQUgsRUFBZ0JJLE9BQU9DLGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVMLEVBQUdDLEdBQUtELEVBQUVJLFVBQVlILElBQ3ZFLFNBQVVELEVBQUdDLEdBQUssSUFBSyxJQUFJSyxLQUFLTCxFQUFPQyxPQUFPSyxVQUFVQyxlQUFlQyxLQUFLUixFQUFHSyxLQUFJTixFQUFFTSxHQUFLTCxFQUFFSyxNQUMzRU4sRUFBR0MsSUFFckIsU0FBVUQsRUFBR0MsR0FFaEIsU0FBU1MsSUFBT0MsS0FBS0MsWUFBY1osRUFEbkNGLEVBQWNFLEVBQUdDLEdBRWpCRCxFQUFFTyxVQUFrQixPQUFOTixFQUFhQyxPQUFPVyxPQUFP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TWdPLEVBQVFuK0MsT0FBUyxHQUFLLE1BSTFCZy9GLEVBQWMsSUFBSUcsR0FBWSxDQUNsQzM2RixPQUFRLElBQUksR0FBYSxDQUN2QnNoQixTQUFVcTRCLEVBQVFsMUMsS0FBSTVDLEdBQVEsSUFBSSxLQUFPQSxPQUUzQytCLE1BQU91ZCxJQUFXLEVBQUF5NUUsR0FBQSxHQUFZejVFLEtBRzFCczVFLEVBQWUsSUFBSTU2RSxHQUFBLEVBQU8sQ0FDOUJRLFVBQVcsTUFDWHpjLE1BQU91ZCxJQUFXLEVBQUF5NUUsR0FBQSxHQUFZejVFLEdBQVMsS0FNekMsT0FIQTFjLEVBQUl3bEQsU0FBU3V3QyxHQUNiLzFGLEVBQUl1bEQsZUFBZXl3QyxHQUVaLENBQUVELGNBQWFDLGdCRFVjSSxDQUFjdDVGLEdBQVFvNEMsSUFDdERsMUMsR0FBTWcyRixHQUFhMThFLFNBQ25CdkIsR0FBTy9YLEdBQUkyNkIsVUFFakJxN0QsR0FBYWo2RixHQUFHLFVBQVV1SyxJQUN4QixNQUFPK3ZGLEdBQVcvdkYsRUFBTTJVLFNBRXhCM1UsRUFBTTJVLFNBQVN6akIsU0FBUzIrRixJQUN0QkEsRUFBT3QyRCxTQUFTNy9CLE9BR2xCc0csRUFBTTRVLFdBQVcxakIsU0FBUzIrRixJQUN4QkEsRUFBT3IyRCxTQUFTOS9CLE9BR2RxMkYsSUFBWUEsRUFBUTMyRCxTQUN0QjNuQixHQUFLa0IsUUFBUSxDQUNYMU0sT0FBUThwRixFQUFReCtGLElBQUksWUFBWXFhLGlCQUNoQ21HLFNBQVUsU0FLWCs4RSxJQUNILDhCQUF5QnZ4RCxNQUFLLEVBQUd5eUQsbUJBQy9CLE1BQU1DLEVBQWN0M0YsU0FBUzBqRCxlQUFlLFlBRTVDNHpDLEVBQVlwM0YsTUFBTW84QixRQUFVLEdBQzVCKzZELEVBQWFDLEVBQWdDUixHQUFhQyxPQUN6RDlmLE1BQU01dUQsUUFBUXpQLFEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBpblByb2dyZXNzID0ge307XG52YXIgZGF0YVdlYnBhY2tQcmVmaXggPSBcIm1hcC1tYXJrZXJzOlwiO1xuLy8gbG9hZFNjcmlwdCBmdW5jdGlvbiB0byBsb2FkIGEgc2NyaXB0IHZpYSBzY3JpcHQgdGFnXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmwgPSAodXJsLCBkb25lLCBrZXksIGNodW5rSWQpID0+IHtcblx0aWYoaW5Qcm9ncmVzc1t1cmxdKSB7IGluUHJvZ3Jlc3NbdXJsXS5wdXNoKGRvbmUpOyByZXR1cm47IH1cblx0dmFyIHNjcmlwdCwgbmVlZEF0dGFjaDtcblx0aWYoa2V5ICE9PSB1bmRlZmluZWQpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzY3JpcHRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgcyA9IHNjcmlwdHNbaV07XG5cdFx0XHRpZihzLmdldEF0dHJpYnV0ZShcInNyY1wiKSA9PSB1cmwgfHwgcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLXdlYnBhY2tcIikgPT0gZGF0YVdlYnBhY2tQcmVmaXggKyBrZXkpIHsgc2NyaXB0ID0gczsgYnJlYWs7IH1cblx0XHR9XG5cdH1cblx0aWYoIXNjcmlwdCkge1xuXHRcdG5lZWRBdHRhY2ggPSB0cnVlO1xuXHRcdHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXG5cdFx0c2NyaXB0LmNoYXJzZXQgPSAndXRmLTgnO1xuXHRcdHNjcmlwdC50aW1lb3V0ID0gMTIwO1xuXHRcdGlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLm5jKSB7XG5cdFx0XHRzY3JpcHQuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgX193ZWJwYWNrX3JlcXVpcmVfXy5uYyk7XG5cdFx0fVxuXHRcdHNjcmlwdC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXdlYnBhY2tcIiwgZGF0YVdlYnBhY2tQcmVmaXggKyBrZXkpO1xuXHRcdHNjcmlwdC5zcmMgPSB1cmw7XG5cdH1cblx0aW5Qcm9ncmVzc1t1cmxdID0gW2RvbmVdO1xuXHR2YXIgb25TY3JpcHRDb21wbGV0ZSA9IChwcmV2LCBldmVudCkgPT4ge1xuXHRcdC8vIGF2b2lkIG1lbSBsZWFrcyBpbiBJRS5cblx0XHRzY3JpcHQub25lcnJvciA9IHNjcmlwdC5vbmxvYWQgPSBudWxsO1xuXHRcdGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0XHR2YXIgZG9uZUZucyA9IGluUHJvZ3Jlc3NbdXJsXTtcblx0XHRkZWxldGUgaW5Qcm9ncmVzc1t1cmxdO1xuXHRcdHNjcmlwdC5wYXJlbnROb2RlICYmIHNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG5cdFx0ZG9uZUZucyAmJiBkb25lRm5zLmZvckVhY2goKGZuKSA9PiAoZm4oZXZlbnQpKSk7XG5cdFx0aWYocHJldikgcmV0dXJuIHByZXYoZXZlbnQpO1xuXHR9XG5cdDtcblx0dmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCB1bmRlZmluZWQsIHsgdHlwZTogJ3RpbWVvdXQnLCB0YXJnZXQ6IHNjcmlwdCB9KSwgMTIwMDAwKTtcblx0c2NyaXB0Lm9uZXJyb3IgPSBvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgc2NyaXB0Lm9uZXJyb3IpO1xuXHRzY3JpcHQub25sb2FkID0gb25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHNjcmlwdC5vbmxvYWQpO1xuXHRuZWVkQXR0YWNoICYmIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbn07IiwidmFyIGNyZWF0ZVN0eWxlc2hlZXQgPSAoY2h1bmtJZCwgZnVsbGhyZWYsIHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHR2YXIgbGlua1RhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuXG5cdGxpbmtUYWcucmVsID0gXCJzdHlsZXNoZWV0XCI7XG5cdGxpbmtUYWcudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0dmFyIG9uTGlua0NvbXBsZXRlID0gKGV2ZW50KSA9PiB7XG5cdFx0Ly8gYXZvaWQgbWVtIGxlYWtzLlxuXHRcdGxpbmtUYWcub25lcnJvciA9IGxpbmtUYWcub25sb2FkID0gbnVsbDtcblx0XHRpZiAoZXZlbnQudHlwZSA9PT0gJ2xvYWQnKSB7XG5cdFx0XHRyZXNvbHZlKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBlcnJvclR5cGUgPSBldmVudCAmJiAoZXZlbnQudHlwZSA9PT0gJ2xvYWQnID8gJ21pc3NpbmcnIDogZXZlbnQudHlwZSk7XG5cdFx0XHR2YXIgcmVhbEhyZWYgPSBldmVudCAmJiBldmVudC50YXJnZXQgJiYgZXZlbnQudGFyZ2V0LmhyZWYgfHwgZnVsbGhyZWY7XG5cdFx0XHR2YXIgZXJyID0gbmV3IEVycm9yKFwiTG9hZGluZyBDU1MgY2h1bmsgXCIgKyBjaHVua0lkICsgXCIgZmFpbGVkLlxcbihcIiArIHJlYWxIcmVmICsgXCIpXCIpO1xuXHRcdFx0ZXJyLmNvZGUgPSBcIkNTU19DSFVOS19MT0FEX0ZBSUxFRFwiO1xuXHRcdFx0ZXJyLnR5cGUgPSBlcnJvclR5cGU7XG5cdFx0XHRlcnIucmVxdWVzdCA9IHJlYWxIcmVmO1xuXHRcdFx0bGlua1RhZy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGxpbmtUYWcpXG5cdFx0XHRyZWplY3QoZXJyKTtcblx0XHR9XG5cdH1cblx0bGlua1RhZy5vbmVycm9yID0gbGlua1RhZy5vbmxvYWQgPSBvbkxpbmtDb21wbGV0ZTtcblx0bGlua1RhZy5ocmVmID0gZnVsbGhyZWY7XG5cblx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rVGFnKTtcblx0cmV0dXJuIGxpbmtUYWc7XG59O1xudmFyIGZpbmRTdHlsZXNoZWV0ID0gKGhyZWYsIGZ1bGxocmVmKSA9PiB7XG5cdHZhciBleGlzdGluZ0xpbmtUYWdzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJsaW5rXCIpO1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgZXhpc3RpbmdMaW5rVGFncy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciB0YWcgPSBleGlzdGluZ0xpbmtUYWdzW2ldO1xuXHRcdHZhciBkYXRhSHJlZiA9IHRhZy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWhyZWZcIikgfHwgdGFnLmdldEF0dHJpYnV0ZShcImhyZWZcIik7XG5cdFx0aWYodGFnLnJlbCA9PT0gXCJzdHlsZXNoZWV0XCIgJiYgKGRhdGFIcmVmID09PSBocmVmIHx8IGRhdGFIcmVmID09PSBmdWxsaHJlZikpIHJldHVybiB0YWc7XG5cdH1cblx0dmFyIGV4aXN0aW5nU3R5bGVUYWdzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdHlsZVwiKTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IGV4aXN0aW5nU3R5bGVUYWdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIHRhZyA9IGV4aXN0aW5nU3R5bGVUYWdzW2ldO1xuXHRcdHZhciBkYXRhSHJlZiA9IHRhZy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWhyZWZcIik7XG5cdFx0aWYoZGF0YUhyZWYgPT09IGhyZWYgfHwgZGF0YUhyZWYgPT09IGZ1bGxocmVmKSByZXR1cm4gdGFnO1xuXHR9XG59O1xudmFyIGxvYWRTdHlsZXNoZWV0ID0gKGNodW5rSWQpID0+IHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHR2YXIgaHJlZiA9IF9fd2VicGFja19yZXF1aXJlX18ubWluaUNzc0YoY2h1bmtJZCk7XG5cdFx0dmFyIGZ1bGxocmVmID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgaHJlZjtcblx0XHRpZihmaW5kU3R5bGVzaGVldChocmVmLCBmdWxsaHJlZikpIHJldHVybiByZXNvbHZlKCk7XG5cdFx0Y3JlYXRlU3R5bGVzaGVldChjaHVua0lkLCBmdWxsaHJlZiwgcmVzb2x2ZSwgcmVqZWN0KTtcblx0fSk7XG59XG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIENTUyBjaHVua3NcbnZhciBpbnN0YWxsZWRDc3NDaHVua3MgPSB7XG5cdDE3OTogMFxufTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5mLm1pbmlDc3MgPSAoY2h1bmtJZCwgcHJvbWlzZXMpID0+IHtcblx0dmFyIGNzc0NodW5rcyA9IHtcIjMwMVwiOjF9O1xuXHRpZihpbnN0YWxsZWRDc3NDaHVua3NbY2h1bmtJZF0pIHByb21pc2VzLnB1c2goaW5zdGFsbGVkQ3NzQ2h1bmtzW2NodW5rSWRdKTtcblx0ZWxzZSBpZihpbnN0YWxsZWRDc3NDaHVua3NbY2h1bmtJZF0gIT09IDAgJiYgY3NzQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDc3NDaHVua3NbY2h1bmtJZF0gPSBsb2FkU3R5bGVzaGVldChjaHVua0lkKS50aGVuKCgpID0+IHtcblx0XHRcdGluc3RhbGxlZENzc0NodW5rc1tjaHVua0lkXSA9IDA7XG5cdFx0fSwgKGUpID0+IHtcblx0XHRcdGRlbGV0ZSBpbnN0YWxsZWRDc3NDaHVua3NbY2h1bmtJZF07XG5cdFx0XHR0aHJvdyBlO1xuXHRcdH0pKTtcblx0fVxufTtcblxuLy8gbm8gaG1yIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9Bc3NlcnRpb25FcnJvclxuICovXG5pbXBvcnQgeyBWRVJTSU9OIH0gZnJvbSAnLi91dGlsLmpzJztcbi8qKlxuICogRXJyb3Igb2JqZWN0IHRocm93biB3aGVuIGFuIGFzc2VydGlvbiBmYWlsZWQuIFRoaXMgaXMgYW4gRUNNQS0yNjIgRXJyb3IsXG4gKiBleHRlbmRlZCB3aXRoIGEgYGNvZGVgIHByb3BlcnR5LlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yLlxuICovXG52YXIgQXNzZXJ0aW9uRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFzc2VydGlvbkVycm9yLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb2RlIEVycm9yIGNvZGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQXNzZXJ0aW9uRXJyb3IoY29kZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgcGF0aCA9IFZFUlNJT04gPT09ICdsYXRlc3QnID8gVkVSU0lPTiA6ICd2JyArIFZFUlNJT04uc3BsaXQoJy0nKVswXTtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSAnQXNzZXJ0aW9uIGZhaWxlZC4gU2VlIGh0dHBzOi8vb3BlbmxheWVycy5vcmcvZW4vJyArXG4gICAgICAgICAgICBwYXRoICtcbiAgICAgICAgICAgICcvZG9jL2Vycm9ycy8jJyArXG4gICAgICAgICAgICBjb2RlICtcbiAgICAgICAgICAgICcgZm9yIGRldGFpbHMuJztcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogRXJyb3IgY29kZS4gVGhlIG1lYW5pbmcgb2YgdGhlIGNvZGUgY2FuIGJlIGZvdW5kIG9uXG4gICAgICAgICAqIGh0dHBzOi8vb3BlbmxheWVycy5vcmcvZW4vbGF0ZXN0L2RvYy9lcnJvcnMvIChyZXBsYWNlIGBsYXRlc3RgIHdpdGhcbiAgICAgICAgICogdGhlIHZlcnNpb24gZm91bmQgaW4gdGhlIE9wZW5MYXllcnMgc2NyaXB0J3MgaGVhZGVyIGNvbW1lbnQgaWYgYSB2ZXJzaW9uXG4gICAgICAgICAqIG90aGVyIHRoYW4gdGhlIGxhdGVzdCBpcyB1c2VkKS5cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29kZSA9IGNvZGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubmFtZSA9ICdBc3NlcnRpb25FcnJvcic7XG4gICAgICAgIC8vIFJlLWFzc2lnbiBtZXNzYWdlLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL1JpY2gtSGFycmlzL2J1YmxlL2lzc3Vlcy80MFxuICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gQXNzZXJ0aW9uRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnQgZGVmYXVsdCBBc3NlcnRpb25FcnJvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFzc2VydGlvbkVycm9yLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvQ29sbGVjdGlvblxuICovXG5pbXBvcnQgQXNzZXJ0aW9uRXJyb3IgZnJvbSAnLi9Bc3NlcnRpb25FcnJvci5qcyc7XG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuL09iamVjdC5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbkV2ZW50VHlwZSBmcm9tICcuL0NvbGxlY3Rpb25FdmVudFR5cGUuanMnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vZXZlbnRzL0V2ZW50LmpzJztcbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBQcm9wZXJ0eSA9IHtcbiAgICBMRU5HVEg6ICdsZW5ndGgnLFxufTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259IGluc3RhbmNlcyBhcmUgaW5zdGFuY2VzIG9mIHRoaXNcbiAqIHR5cGUuXG4gKi9cbnZhciBDb2xsZWN0aW9uRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbGxlY3Rpb25FdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbkV2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHsqPX0gb3B0X2VsZW1lbnQgRWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9pbmRleCBUaGUgaW5kZXggb2YgdGhlIGFkZGVkIG9yIHJlbW92ZWQgZWxlbWVudC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDb2xsZWN0aW9uRXZlbnQodHlwZSwgb3B0X2VsZW1lbnQsIG9wdF9pbmRleCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGVsZW1lbnQgdGhhdCBpcyBhZGRlZCB0byBvciByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgICAgICAqIEB0eXBlIHsqfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5lbGVtZW50ID0gb3B0X2VsZW1lbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW5kZXggb2YgdGhlIGFkZGVkIG9yIHJlbW92ZWQgZWxlbWVudC5cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW5kZXggPSBvcHRfaW5kZXg7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIENvbGxlY3Rpb25FdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCB7IENvbGxlY3Rpb25FdmVudCB9O1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1bmlxdWU9ZmFsc2VdIERpc2FsbG93IHRoZSBzYW1lIGl0ZW0gZnJvbSBiZWluZyBhZGRlZCB0b1xuICogdGhlIGNvbGxlY3Rpb24gdHdpY2UuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQW4gZXhwYW5kZWQgdmVyc2lvbiBvZiBzdGFuZGFyZCBKUyBBcnJheSwgYWRkaW5nIGNvbnZlbmllbmNlIG1ldGhvZHMgZm9yXG4gKiBtYW5pcHVsYXRpb24uIEFkZCBhbmQgcmVtb3ZlIGNoYW5nZXMgdG8gdGhlIENvbGxlY3Rpb24gdHJpZ2dlciBhIENvbGxlY3Rpb25cbiAqIGV2ZW50LiBOb3RlIHRoYXQgdGhpcyBkb2VzIG5vdCBjb3ZlciBjaGFuZ2VzIHRvIHRoZSBvYmplY3RzIF93aXRoaW5fIHRoZVxuICogQ29sbGVjdGlvbjsgdGhleSB0cmlnZ2VyIGV2ZW50cyBvbiB0aGUgYXBwcm9wcmlhdGUgb2JqZWN0LCBub3Qgb24gdGhlXG4gKiBDb2xsZWN0aW9uIGFzIGEgd2hvbGUuXG4gKlxuICogQGZpcmVzIENvbGxlY3Rpb25FdmVudFxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAYXBpXG4gKi9cbnZhciBDb2xsZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb2xsZWN0aW9uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8VD49fSBvcHRfYXJyYXkgQXJyYXkuXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgQ29sbGVjdGlvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENvbGxlY3Rpb24ob3B0X2FycmF5LCBvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bmlxdWVfID0gISFvcHRpb25zLnVuaXF1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshQXJyYXk8VD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hcnJheV8gPSBvcHRfYXJyYXkgPyBvcHRfYXJyYXkgOiBbXTtcbiAgICAgICAgaWYgKF90aGlzLnVuaXF1ZV8pIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IF90aGlzLmFycmF5Xy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYXNzZXJ0VW5pcXVlXyhfdGhpcy5hcnJheV9baV0sIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIF90aGlzLnVwZGF0ZUxlbmd0aF8oKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYWxsIGVsZW1lbnRzIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aGlsZSAodGhpcy5nZXRMZW5ndGgoKSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucG9wKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZCBlbGVtZW50cyB0byB0aGUgY29sbGVjdGlvbi4gIFRoaXMgcHVzaGVzIGVhY2ggaXRlbSBpbiB0aGUgcHJvdmlkZWQgYXJyYXlcbiAgICAgKiB0byB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7IUFycmF5PFQ+fSBhcnIgQXJyYXkuXG4gICAgICogQHJldHVybiB7Q29sbGVjdGlvbjxUPn0gVGhpcyBjb2xsZWN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbiAoYXJyKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGFyci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLnB1c2goYXJyW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEl0ZXJhdGUgb3ZlciBlYWNoIGVsZW1lbnQsIGNhbGxpbmcgdGhlIHByb3ZpZGVkIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oVCwgbnVtYmVyLCBBcnJheTxUPik6ICp9IGYgVGhlIGZ1bmN0aW9uIHRvIGNhbGxcbiAgICAgKiAgICAgZm9yIGV2ZXJ5IGVsZW1lbnQuIFRoaXMgZnVuY3Rpb24gdGFrZXMgMyBhcmd1bWVudHMgKHRoZSBlbGVtZW50LCB0aGVcbiAgICAgKiAgICAgaW5kZXggYW5kIHRoZSBhcnJheSkuIFRoZSByZXR1cm4gdmFsdWUgaXMgaWdub3JlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHZhciBhcnJheSA9IHRoaXMuYXJyYXlfO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhcnJheS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBmKGFycmF5W2ldLCBpLCBhcnJheSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIHJlZmVyZW5jZSB0byB0aGUgdW5kZXJseWluZyBBcnJheSBvYmplY3QuIFdhcm5pbmc6IGlmIHRoZSBhcnJheVxuICAgICAqIGlzIG11dGF0ZWQsIG5vIGV2ZW50cyB3aWxsIGJlIGRpc3BhdGNoZWQgYnkgdGhlIGNvbGxlY3Rpb24sIGFuZCB0aGVcbiAgICAgKiBjb2xsZWN0aW9uJ3MgXCJsZW5ndGhcIiBwcm9wZXJ0eSB3b24ndCBiZSBpbiBzeW5jIHdpdGggdGhlIGFjdHVhbCBsZW5ndGhcbiAgICAgKiBvZiB0aGUgYXJyYXkuXG4gICAgICogQHJldHVybiB7IUFycmF5PFQ+fSBBcnJheS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0QXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFycmF5XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgICAqIEByZXR1cm4ge1R9IEVsZW1lbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLml0ZW0gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlfW2luZGV4XTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGVuZ3RoIG9mIHRoaXMgY29sbGVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBsZW5ndGggb2YgdGhlIGFycmF5LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmdldExlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KFByb3BlcnR5LkxFTkdUSCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbnNlcnQgYW4gZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5pbnNlcnRBdCA9IGZ1bmN0aW9uIChpbmRleCwgZWxlbSkge1xuICAgICAgICBpZiAodGhpcy51bmlxdWVfKSB7XG4gICAgICAgICAgICB0aGlzLmFzc2VydFVuaXF1ZV8oZWxlbSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hcnJheV8uc3BsaWNlKGluZGV4LCAwLCBlbGVtKTtcbiAgICAgICAgdGhpcy51cGRhdGVMZW5ndGhfKCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBlbGVtLCBpbmRleCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBsYXN0IGVsZW1lbnQgb2YgdGhlIGNvbGxlY3Rpb24gYW5kIHJldHVybiBpdC5cbiAgICAgKiBSZXR1cm4gYHVuZGVmaW5lZGAgaWYgdGhlIGNvbGxlY3Rpb24gaXMgZW1wdHkuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IEVsZW1lbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlQXQodGhpcy5nZXRMZW5ndGgoKSAtIDEpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW5zZXJ0IHRoZSBwcm92aWRlZCBlbGVtZW50IGF0IHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBOZXcgbGVuZ3RoIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgaWYgKHRoaXMudW5pcXVlXykge1xuICAgICAgICAgICAgdGhpcy5hc3NlcnRVbmlxdWVfKGVsZW0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuID0gdGhpcy5nZXRMZW5ndGgoKTtcbiAgICAgICAgdGhpcy5pbnNlcnRBdChuLCBlbGVtKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGVuZ3RoKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudCBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBUaGUgcmVtb3ZlZCBlbGVtZW50IG9yIHVuZGVmaW5lZCBpZiBub25lIGZvdW5kLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICB2YXIgYXJyID0gdGhpcy5hcnJheV87XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGFyci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBpZiAoYXJyW2ldID09PSBlbGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlQXQoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXggYW5kIHJldHVybiBpdC5cbiAgICAgKiBSZXR1cm4gYHVuZGVmaW5lZGAgaWYgdGhlIGNvbGxlY3Rpb24gZG9lcyBub3QgY29udGFpbiB0aGlzIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gVmFsdWUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHZhciBwcmV2ID0gdGhpcy5hcnJheV9baW5kZXhdO1xuICAgICAgICB0aGlzLmFycmF5Xy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB0aGlzLnVwZGF0ZUxlbmd0aF8oKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIHByZXYsIGluZGV4KSk7XG4gICAgICAgIHJldHVybiBwcmV2O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBlbGVtZW50IGF0IHRoZSBwcm92aWRlZCBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnNldEF0ID0gZnVuY3Rpb24gKGluZGV4LCBlbGVtKSB7XG4gICAgICAgIHZhciBuID0gdGhpcy5nZXRMZW5ndGgoKTtcbiAgICAgICAgaWYgKGluZGV4IDwgbikge1xuICAgICAgICAgICAgaWYgKHRoaXMudW5pcXVlXykge1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0VW5pcXVlXyhlbGVtLCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJldiA9IHRoaXMuYXJyYXlfW2luZGV4XTtcbiAgICAgICAgICAgIHRoaXMuYXJyYXlfW2luZGV4XSA9IGVsZW07XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IENvbGxlY3Rpb25FdmVudChDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSwgcHJldiwgaW5kZXgpKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBlbGVtLCBpbmRleCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IG47IGogPCBpbmRleDsgKytqKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRBdChqLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbnNlcnRBdChpbmRleCwgZWxlbSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlTGVuZ3RoXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuTEVOR1RILCB0aGlzLmFycmF5Xy5sZW5ndGgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9leGNlcHQgT3B0aW9uYWwgaW5kZXggdG8gaWdub3JlLlxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmFzc2VydFVuaXF1ZV8gPSBmdW5jdGlvbiAoZWxlbSwgb3B0X2V4Y2VwdCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmFycmF5Xy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hcnJheV9baV0gPT09IGVsZW0gJiYgaSAhPT0gb3B0X2V4Y2VwdCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBc3NlcnRpb25FcnJvcig1OCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBDb2xsZWN0aW9uO1xufShCYXNlT2JqZWN0KSk7XG5leHBvcnQgZGVmYXVsdCBDb2xsZWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29sbGVjdGlvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvQ29sbGVjdGlvbkV2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhbiBpdGVtIGlzIGFkZGVkIHRvIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvQ29sbGVjdGlvbi5Db2xsZWN0aW9uRXZlbnQjYWRkXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEFERDogJ2FkZCcsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYW4gaXRlbSBpcyByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9Db2xsZWN0aW9uLkNvbGxlY3Rpb25FdmVudCNyZW1vdmVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUkVNT1ZFOiAncmVtb3ZlJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db2xsZWN0aW9uRXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9EaXNwb3NhYmxlXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogT2JqZWN0cyB0aGF0IG5lZWQgdG8gY2xlYW4gdXAgYWZ0ZXIgdGhlbXNlbHZlcy5cbiAqL1xudmFyIERpc3Bvc2FibGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGlzcG9zYWJsZSgpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvYmplY3QgaGFzIGFscmVhZHkgYmVlbiBkaXNwb3NlZC5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzcG9zZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZUludGVybmFsKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEV4dGVuc2lvbiBwb2ludCBmb3IgZGlzcG9zYWJsZSBvYmplY3RzLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgcmV0dXJuIERpc3Bvc2FibGU7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgRGlzcG9zYWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURpc3Bvc2FibGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0ltYWdlU3RhdGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgSURMRTogMCxcbiAgICBMT0FESU5HOiAxLFxuICAgIExPQURFRDogMixcbiAgICBFUlJPUjogMyxcbiAgICBFTVBUWTogNCxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZVN0YXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBCcm93c2VyRXZlbnRUeXBlXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbi8qKlxuICogQ29uc3RhbnRzIGZvciBldmVudCBuYW1lcy5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBBIHRydWUgc2luZ2xlIGNsaWNrIHdpdGggbm8gZHJhZ2dpbmcgYW5kIG5vIGRvdWJsZSBjbGljay4gTm90ZSB0aGF0IHRoaXNcbiAgICAgKiBldmVudCBpcyBkZWxheWVkIGJ5IDI1MCBtcyB0byBlbnN1cmUgdGhhdCBpdCBpcyBub3QgYSBkb3VibGUgY2xpY2suXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I3NpbmdsZWNsaWNrXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNJTkdMRUNMSUNLOiAnc2luZ2xlY2xpY2snLFxuICAgIC8qKlxuICAgICAqIEEgY2xpY2sgd2l0aCBubyBkcmFnZ2luZy4gQSBkb3VibGUgY2xpY2sgd2lsbCBmaXJlIHR3byBvZiB0aGlzLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCNjbGlja1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDTElDSzogRXZlbnRUeXBlLkNMSUNLLFxuICAgIC8qKlxuICAgICAqIEEgdHJ1ZSBkb3VibGUgY2xpY2ssIHdpdGggbm8gZHJhZ2dpbmcuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I2RibGNsaWNrXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIERCTENMSUNLOiBFdmVudFR5cGUuREJMQ0xJQ0ssXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSBwb2ludGVyIGlzIGRyYWdnZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I3BvaW50ZXJkcmFnXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBPSU5URVJEUkFHOiAncG9pbnRlcmRyYWcnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgcG9pbnRlciBpcyBtb3ZlZC4gTm90ZSB0aGF0IG9uIHRvdWNoIGRldmljZXMgdGhpcyBpc1xuICAgICAqIHRyaWdnZXJlZCB3aGVuIHRoZSBtYXAgaXMgcGFubmVkLCBzbyBpcyBub3QgdGhlIHNhbWUgYXMgbW91c2Vtb3ZlLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCNwb2ludGVybW92ZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQT0lOVEVSTU9WRTogJ3BvaW50ZXJtb3ZlJyxcbiAgICBQT0lOVEVSRE9XTjogJ3BvaW50ZXJkb3duJyxcbiAgICBQT0lOVEVSVVA6ICdwb2ludGVydXAnLFxuICAgIFBPSU5URVJPVkVSOiAncG9pbnRlcm92ZXInLFxuICAgIFBPSU5URVJPVVQ6ICdwb2ludGVyb3V0JyxcbiAgICBQT0lOVEVSRU5URVI6ICdwb2ludGVyZW50ZXInLFxuICAgIFBPSU5URVJMRUFWRTogJ3BvaW50ZXJsZWF2ZScsXG4gICAgUE9JTlRFUkNBTkNFTDogJ3BvaW50ZXJjYW5jZWwnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcEJyb3dzZXJFdmVudFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcEV2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgYSBtYXAgZnJhbWUgaXMgcmVuZGVyZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBFdmVudH5NYXBFdmVudCNwb3N0cmVuZGVyXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBPU1RSRU5ERVI6ICdwb3N0cmVuZGVyJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiB0aGUgbWFwIHN0YXJ0cyBtb3ZpbmcuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBFdmVudH5NYXBFdmVudCNtb3Zlc3RhcnRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTU9WRVNUQVJUOiAnbW92ZXN0YXJ0JyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIG1hcCBpcyBtb3ZlZC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEV2ZW50fk1hcEV2ZW50I21vdmVlbmRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTU9WRUVORDogJ21vdmVlbmQnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcEV2ZW50VHlwZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL09iamVjdFxuICovXG5pbXBvcnQgRXZlbnQgZnJvbSAnLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IE9iamVjdEV2ZW50VHlwZSBmcm9tICcuL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgT2JzZXJ2YWJsZSBmcm9tICcuL09ic2VydmFibGUuanMnO1xuaW1wb3J0IHsgYXNzaWduLCBpc0VtcHR5IH0gZnJvbSAnLi9vYmouanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi91dGlsLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdH0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXMgb2YgdGhpcyB0eXBlLlxuICovXG52YXIgT2JqZWN0RXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE9iamVjdEV2ZW50LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSBldmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIHByb3BlcnR5IG5hbWUuXG4gICAgICogQHBhcmFtIHsqfSBvbGRWYWx1ZSBUaGUgb2xkIHZhbHVlIGZvciBga2V5YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBPYmplY3RFdmVudCh0eXBlLCBrZXksIG9sZFZhbHVlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHR5cGUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgd2hvc2UgdmFsdWUgaXMgY2hhbmdpbmcuXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmtleSA9IGtleTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvbGQgdmFsdWUuIFRvIGdldCB0aGUgbmV3IHZhbHVlIHVzZSBgZS50YXJnZXQuZ2V0KGUua2V5KWAgd2hlcmVcbiAgICAgICAgICogYGVgIGlzIHRoZSBldmVudCBvYmplY3QuXG4gICAgICAgICAqIEB0eXBlIHsqfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbGRWYWx1ZSA9IG9sZFZhbHVlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3RFdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCB7IE9iamVjdEV2ZW50IH07XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIE1vc3Qgbm9uLXRyaXZpYWwgY2xhc3NlcyBpbmhlcml0IGZyb20gdGhpcy5cbiAqXG4gKiBUaGlzIGV4dGVuZHMge0BsaW5rIG1vZHVsZTpvbC9PYnNlcnZhYmxlfSB3aXRoIG9ic2VydmFibGVcbiAqIHByb3BlcnRpZXMsIHdoZXJlIGVhY2ggcHJvcGVydHkgaXMgb2JzZXJ2YWJsZSBhcyB3ZWxsIGFzIHRoZSBvYmplY3QgYXMgYVxuICogd2hvbGUuXG4gKlxuICogQ2xhc3NlcyB0aGF0IGluaGVyaXQgZnJvbSB0aGlzIGhhdmUgcHJlLWRlZmluZWQgcHJvcGVydGllcywgdG8gd2hpY2ggeW91IGNhblxuICogYWRkIHlvdXIgb3ducy4gVGhlIHByZS1kZWZpbmVkIHByb3BlcnRpZXMgYXJlIGxpc3RlZCBpbiB0aGlzIGRvY3VtZW50YXRpb24gYXNcbiAqICdPYnNlcnZhYmxlIFByb3BlcnRpZXMnLCBhbmQgaGF2ZSB0aGVpciBvd24gYWNjZXNzb3JzOyBmb3IgZXhhbXBsZSxcbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH0gaGFzIGEgYHRhcmdldGAgcHJvcGVydHksIGFjY2Vzc2VkIHdpdGhcbiAqIGBnZXRUYXJnZXQoKWAgYW5kIGNoYW5nZWQgd2l0aCBgc2V0VGFyZ2V0KClgLiBOb3QgYWxsIHByb3BlcnRpZXMgYXJlIGhvd2V2ZXJcbiAqIHNldHRhYmxlLiBUaGVyZSBhcmUgYWxzbyBnZW5lcmFsLXB1cnBvc2UgYWNjZXNzb3JzIGBnZXQoKWAgYW5kIGBzZXQoKWAuIEZvclxuICogZXhhbXBsZSwgYGdldCgndGFyZ2V0JylgIGlzIGVxdWl2YWxlbnQgdG8gYGdldFRhcmdldCgpYC5cbiAqXG4gKiBUaGUgYHNldGAgYWNjZXNzb3JzIHRyaWdnZXIgYSBjaGFuZ2UgZXZlbnQsIGFuZCB5b3UgY2FuIG1vbml0b3IgdGhpcyBieVxuICogcmVnaXN0ZXJpbmcgYSBsaXN0ZW5lci4gRm9yIGV4YW1wbGUsIHtAbGluayBtb2R1bGU6b2wvVmlld35WaWV3fSBoYXMgYVxuICogYGNlbnRlcmAgcHJvcGVydHksIHNvIGB2aWV3Lm9uKCdjaGFuZ2U6Y2VudGVyJywgZnVuY3Rpb24oZXZ0KSB7Li4ufSk7YCB3b3VsZFxuICogY2FsbCB0aGUgZnVuY3Rpb24gd2hlbmV2ZXIgdGhlIHZhbHVlIG9mIHRoZSBjZW50ZXIgcHJvcGVydHkgY2hhbmdlcy4gV2l0aGluXG4gKiB0aGUgZnVuY3Rpb24sIGBldnQudGFyZ2V0YCB3b3VsZCBiZSB0aGUgdmlldywgc28gYGV2dC50YXJnZXQuZ2V0Q2VudGVyKClgXG4gKiB3b3VsZCByZXR1cm4gdGhlIG5ldyBjZW50ZXIuXG4gKlxuICogWW91IGNhbiBhZGQgeW91ciBvd24gb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzIHdpdGhcbiAqIGBvYmplY3Quc2V0KCdwcm9wJywgJ3ZhbHVlJylgLCBhbmQgcmV0cmlldmUgdGhhdCB3aXRoIGBvYmplY3QuZ2V0KCdwcm9wJylgLlxuICogWW91IGNhbiBsaXN0ZW4gZm9yIGNoYW5nZXMgb24gdGhhdCBwcm9wZXJ0eSB2YWx1ZSB3aXRoXG4gKiBgb2JqZWN0Lm9uKCdjaGFuZ2U6cHJvcCcsIGxpc3RlbmVyKWAuIFlvdSBjYW4gZ2V0IGEgbGlzdCBvZiBhbGxcbiAqIHByb3BlcnRpZXMgd2l0aCB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0I2dldFByb3BlcnRpZXN9LlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzIGFyZSBzZXBhcmF0ZSBmcm9tIHN0YW5kYXJkIEpTIHByb3BlcnRpZXMuXG4gKiBZb3UgY2FuLCBmb3IgZXhhbXBsZSwgZ2l2ZSB5b3VyIG1hcCBvYmplY3QgYSB0aXRsZSB3aXRoXG4gKiBgbWFwLnRpdGxlPSdOZXcgdGl0bGUnYCBhbmQgd2l0aCBgbWFwLnNldCgndGl0bGUnLCAnQW5vdGhlciB0aXRsZScpYC4gVGhlXG4gKiBmaXJzdCB3aWxsIGJlIGEgYGhhc093blByb3BlcnR5YDsgdGhlIHNlY29uZCB3aWxsIGFwcGVhciBpblxuICogYGdldFByb3BlcnRpZXMoKWAuIE9ubHkgdGhlIHNlY29uZCBpcyBvYnNlcnZhYmxlLlxuICpcbiAqIFByb3BlcnRpZXMgY2FuIGJlIGRlbGV0ZWQgYnkgdXNpbmcgdGhlIHVuc2V0IG1ldGhvZC4gRS5nLlxuICogb2JqZWN0LnVuc2V0KCdmb28nKS5cbiAqXG4gKiBAZmlyZXMgT2JqZWN0RXZlbnRcbiAqIEBhcGlcbiAqL1xudmFyIEJhc2VPYmplY3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJhc2VPYmplY3QsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCAqPj19IG9wdF92YWx1ZXMgQW4gb2JqZWN0IHdpdGgga2V5LXZhbHVlIHBhaXJzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEJhc2VPYmplY3Qob3B0X3ZhbHVlcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvLyBDYWxsIHtAbGluayBtb2R1bGU6b2wvdXRpbH5nZXRVaWR9IHRvIGVuc3VyZSB0aGF0IHRoZSBvcmRlciBvZiBvYmplY3RzJyBpZHMgaXNcbiAgICAgICAgLy8gdGhlIHNhbWUgYXMgdGhlIG9yZGVyIGluIHdoaWNoIHRoZXkgd2VyZSBjcmVhdGVkLiAgVGhpcyBhbHNvIGhlbHBzIHRvXG4gICAgICAgIC8vIGVuc3VyZSB0aGF0IG9iamVjdCBwcm9wZXJ0aWVzIGFyZSBhbHdheXMgYWRkZWQgaW4gdGhlIHNhbWUgb3JkZXIsIHdoaWNoXG4gICAgICAgIC8vIGhlbHBzIG1hbnkgSmF2YVNjcmlwdCBlbmdpbmVzIGdlbmVyYXRlIGZhc3RlciBjb2RlLlxuICAgICAgICBnZXRVaWQoX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsICo+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmFsdWVzXyA9IG51bGw7XG4gICAgICAgIGlmIChvcHRfdmFsdWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFByb3BlcnRpZXMob3B0X3ZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgdmFsdWUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICAgKiBAcmV0dXJuIHsqfSBWYWx1ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlc18gJiYgdGhpcy52YWx1ZXNfLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy52YWx1ZXNfW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgbGlzdCBvZiBvYmplY3QgcHJvcGVydHkgbmFtZXMuXG4gICAgICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gTGlzdCBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuZ2V0S2V5cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnZhbHVlc18gJiYgT2JqZWN0LmtleXModGhpcy52YWx1ZXNfKSkgfHwgW107XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYW4gb2JqZWN0IG9mIGFsbCBwcm9wZXJ0eSBuYW1lcyBhbmQgdmFsdWVzLlxuICAgICAqIEByZXR1cm4ge09iamVjdDxzdHJpbmcsICo+fSBPYmplY3QuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLmdldFByb3BlcnRpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy52YWx1ZXNfICYmIGFzc2lnbih7fSwgdGhpcy52YWx1ZXNfKSkgfHwge307XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgb2JqZWN0IGhhcyBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLmhhc1Byb3BlcnRpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMudmFsdWVzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAgICogQHBhcmFtIHsqfSBvbGRWYWx1ZSBPbGQgdmFsdWUuXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gKGtleSwgb2xkVmFsdWUpIHtcbiAgICAgICAgdmFyIGV2ZW50VHlwZTtcbiAgICAgICAgZXZlbnRUeXBlID0gZ2V0Q2hhbmdlRXZlbnRUeXBlKGtleSk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgT2JqZWN0RXZlbnQoZXZlbnRUeXBlLCBrZXksIG9sZFZhbHVlKSk7XG4gICAgICAgIGV2ZW50VHlwZSA9IE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBPYmplY3RFdmVudChldmVudFR5cGUsIGtleSwgb2xkVmFsdWUpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgYSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUuXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3NpbGVudCBVcGRhdGUgd2l0aG91dCB0cmlnZ2VyaW5nIGFuIGV2ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgb3B0X3NpbGVudCkge1xuICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy52YWx1ZXNfIHx8ICh0aGlzLnZhbHVlc18gPSB7fSk7XG4gICAgICAgIGlmIChvcHRfc2lsZW50KSB7XG4gICAgICAgICAgICB2YWx1ZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIG9sZFZhbHVlID0gdmFsdWVzW2tleV07XG4gICAgICAgICAgICB2YWx1ZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKG9sZFZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGtleSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIGEgY29sbGVjdGlvbiBvZiBrZXktdmFsdWUgcGFpcnMuICBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIGFueSBleGlzdGluZ1xuICAgICAqIHByb3BlcnRpZXMgYW5kIGFkZHMgbmV3IG9uZXMgKGl0IGRvZXMgbm90IHJlbW92ZSBhbnkgZXhpc3RpbmcgcHJvcGVydGllcykuXG4gICAgICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCAqPn0gdmFsdWVzIFZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfc2lsZW50IFVwZGF0ZSB3aXRob3V0IHRyaWdnZXJpbmcgYW4gZXZlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLnNldFByb3BlcnRpZXMgPSBmdW5jdGlvbiAodmFsdWVzLCBvcHRfc2lsZW50KSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KGtleSwgdmFsdWVzW2tleV0sIG9wdF9zaWxlbnQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBcHBseSBhbnkgcHJvcGVydGllcyBmcm9tIGFub3RoZXIgb2JqZWN0IHdpdGhvdXQgdHJpZ2dlcmluZyBldmVudHMuXG4gICAgICogQHBhcmFtIHtCYXNlT2JqZWN0fSBzb3VyY2UgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLmFwcGx5UHJvcGVydGllcyA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgaWYgKCFzb3VyY2UudmFsdWVzXykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFzc2lnbih0aGlzLnZhbHVlc18gfHwgKHRoaXMudmFsdWVzXyA9IHt9KSwgc291cmNlLnZhbHVlc18pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVW5zZXRzIGEgcHJvcGVydHkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfc2lsZW50IFVuc2V0IHdpdGhvdXQgdHJpZ2dlcmluZyBhbiBldmVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoa2V5LCBvcHRfc2lsZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlc18gJiYga2V5IGluIHRoaXMudmFsdWVzXykge1xuICAgICAgICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZXNfW2tleV07XG4gICAgICAgICAgICBkZWxldGUgdGhpcy52YWx1ZXNfW2tleV07XG4gICAgICAgICAgICBpZiAoaXNFbXB0eSh0aGlzLnZhbHVlc18pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNfID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghb3B0X3NpbGVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGtleSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQmFzZU9iamVjdDtcbn0oT2JzZXJ2YWJsZSkpO1xuLyoqXG4gKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAqL1xudmFyIGNoYW5nZUV2ZW50VHlwZUNhY2hlID0ge307XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IENoYW5nZSBuYW1lLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2hhbmdlRXZlbnRUeXBlKGtleSkge1xuICAgIHJldHVybiBjaGFuZ2VFdmVudFR5cGVDYWNoZS5oYXNPd25Qcm9wZXJ0eShrZXkpXG4gICAgICAgID8gY2hhbmdlRXZlbnRUeXBlQ2FjaGVba2V5XVxuICAgICAgICA6IChjaGFuZ2VFdmVudFR5cGVDYWNoZVtrZXldID0gJ2NoYW5nZTonICsga2V5KTtcbn1cbmV4cG9ydCBkZWZhdWx0IEJhc2VPYmplY3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYmplY3QuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL09iamVjdEV2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHByb3BlcnR5IGlzIGNoYW5nZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9PYmplY3QuT2JqZWN0RXZlbnQjcHJvcGVydHljaGFuZ2VcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUFJPUEVSVFlDSEFOR0U6ICdwcm9wZXJ0eWNoYW5nZScsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JqZWN0RXZlbnRUeXBlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvT2JzZXJ2YWJsZVxuICovXG5pbXBvcnQgRXZlbnRUYXJnZXQgZnJvbSAnLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgbGlzdGVuT25jZSwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4vZXZlbnRzLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQW4gZXZlbnQgdGFyZ2V0IHByb3ZpZGluZyBjb252ZW5pZW50IG1ldGhvZHMgZm9yIGxpc3RlbmVyIHJlZ2lzdHJhdGlvblxuICogYW5kIHVucmVnaXN0cmF0aW9uLiBBIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgaXMgYWx3YXlzIGF2YWlsYWJsZSB0aHJvdWdoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL09ic2VydmFibGV+T2JzZXJ2YWJsZSNjaGFuZ2VkfS5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdFxuICogQGFwaVxuICovXG52YXIgT2JzZXJ2YWJsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBPYnNlcnZhYmxlKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJldmlzaW9uXyA9IDA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5jcmVhc2VzIHRoZSByZXZpc2lvbiBjb3VudGVyIGFuZCBkaXNwYXRjaGVzIGEgJ2NoYW5nZScgZXZlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLmNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICsrdGhpcy5yZXZpc2lvbl87XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChFdmVudFR5cGUuQ0hBTkdFKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmVyc2lvbiBudW1iZXIgZm9yIHRoaXMgb2JqZWN0LiAgRWFjaCB0aW1lIHRoZSBvYmplY3QgaXMgbW9kaWZpZWQsXG4gICAgICogaXRzIHZlcnNpb24gbnVtYmVyIHdpbGwgYmUgaW5jcmVtZW50ZWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBSZXZpc2lvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuZ2V0UmV2aXNpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJldmlzaW9uXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExpc3RlbiBmb3IgYSBjZXJ0YWluIHR5cGUgb2YgZXZlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUaGUgZXZlbnQgdHlwZSBvciBhcnJheSBvZiBldmVudCB0eXBlcy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKD8pOiA/fSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IFVuaXF1ZSBrZXkgZm9yIHRoZSBsaXN0ZW5lci4gSWZcbiAgICAgKiAgICAgY2FsbGVkIHdpdGggYW4gYXJyYXkgb2YgZXZlbnQgdHlwZXMgYXMgdGhlIGZpcnN0IGFyZ3VtZW50LCB0aGUgcmV0dXJuXG4gICAgICogICAgIHdpbGwgYmUgYW4gYXJyYXkgb2Yga2V5cy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodHlwZSkpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSB0eXBlLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBrZXlzID0gbmV3IEFycmF5KGxlbik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAga2V5c1tpXSA9IGxpc3Rlbih0aGlzLCB0eXBlW2ldLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBsaXN0ZW4odGhpcywgLyoqIEB0eXBlIHtzdHJpbmd9ICovICh0eXBlKSwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMaXN0ZW4gb25jZSBmb3IgYSBjZXJ0YWluIHR5cGUgb2YgZXZlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUaGUgZXZlbnQgdHlwZSBvciBhcnJheSBvZiBldmVudCB0eXBlcy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKD8pOiA/fSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IFVuaXF1ZSBrZXkgZm9yIHRoZSBsaXN0ZW5lci4gSWZcbiAgICAgKiAgICAgY2FsbGVkIHdpdGggYW4gYXJyYXkgb2YgZXZlbnQgdHlwZXMgYXMgdGhlIGZpcnN0IGFyZ3VtZW50LCB0aGUgcmV0dXJuXG4gICAgICogICAgIHdpbGwgYmUgYW4gYXJyYXkgb2Yga2V5cy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSkge1xuICAgICAgICAgICAgdmFyIGxlbiA9IHR5cGUubGVuZ3RoO1xuICAgICAgICAgICAga2V5ID0gbmV3IEFycmF5KGxlbik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAga2V5W2ldID0gbGlzdGVuT25jZSh0aGlzLCB0eXBlW2ldLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBrZXkgPSBsaXN0ZW5PbmNlKHRoaXMsIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodHlwZSksIGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogQHR5cGUge09iamVjdH0gKi8gKGxpc3RlbmVyKS5vbF9rZXkgPSBrZXk7XG4gICAgICAgIHJldHVybiBrZXk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVbmxpc3RlbiBmb3IgYSBjZXJ0YWluIHR5cGUgb2YgZXZlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUaGUgZXZlbnQgdHlwZSBvciBhcnJheSBvZiBldmVudCB0eXBlcy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKD8pOiA/fSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnVuID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBrZXkgPSAvKiogQHR5cGUge09iamVjdH0gKi8gKGxpc3RlbmVyKS5vbF9rZXk7XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgIHVuQnlLZXkoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0eXBlLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZVtpXSwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE9ic2VydmFibGU7XG59KEV2ZW50VGFyZ2V0KSk7XG4vKipcbiAqIFJlbW92ZXMgYW4gZXZlbnQgbGlzdGVuZXIgdXNpbmcgdGhlIGtleSByZXR1cm5lZCBieSBgb24oKWAgb3IgYG9uY2UoKWAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleXxBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fSBrZXkgVGhlIGtleSByZXR1cm5lZCBieSBgb24oKWBcbiAqICAgICBvciBgb25jZSgpYCAob3IgYW4gYXJyYXkgb2Yga2V5cykuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bkJ5S2V5KGtleSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGtleSkpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0ga2V5Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkoa2V5W2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdW5saXN0ZW5CeUtleSgvKiogQHR5cGUge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX0gKi8gKGtleSkpO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IE9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZhYmxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9hcnJheVxuICovXG4vKipcbiAqIFBlcmZvcm1zIGEgYmluYXJ5IHNlYXJjaCBvbiB0aGUgcHJvdmlkZWQgc29ydGVkIGxpc3QgYW5kIHJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBpdGVtIGlmIGZvdW5kLiBJZiBpdCBjYW4ndCBiZSBmb3VuZCBpdCdsbCByZXR1cm4gLTEuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZGFya3NreWFwcC9iaW5hcnktc2VhcmNoXG4gKlxuICogQHBhcmFtIHtBcnJheTwqPn0gaGF5c3RhY2sgSXRlbXMgdG8gc2VhcmNoIHRocm91Z2guXG4gKiBAcGFyYW0geyp9IG5lZWRsZSBUaGUgaXRlbSB0byBsb29rIGZvci5cbiAqIEBwYXJhbSB7RnVuY3Rpb249fSBvcHRfY29tcGFyYXRvciBDb21wYXJhdG9yIGZ1bmN0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIGl0ZW0gaWYgZm91bmQsIC0xIGlmIG5vdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJpbmFyeVNlYXJjaChoYXlzdGFjaywgbmVlZGxlLCBvcHRfY29tcGFyYXRvcikge1xuICAgIHZhciBtaWQsIGNtcDtcbiAgICB2YXIgY29tcGFyYXRvciA9IG9wdF9jb21wYXJhdG9yIHx8IG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb247XG4gICAgdmFyIGxvdyA9IDA7XG4gICAgdmFyIGhpZ2ggPSBoYXlzdGFjay5sZW5ndGg7XG4gICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAgICAgLyogTm90ZSB0aGF0IFwiKGxvdyArIGhpZ2gpID4+PiAxXCIgbWF5IG92ZXJmbG93LCBhbmQgcmVzdWx0cyBpbiBhIHR5cGVjYXN0XG4gICAgICAgICAqIHRvIGRvdWJsZSAod2hpY2ggZ2l2ZXMgdGhlIHdyb25nIHJlc3VsdHMpLiAqL1xuICAgICAgICBtaWQgPSBsb3cgKyAoKGhpZ2ggLSBsb3cpID4+IDEpO1xuICAgICAgICBjbXAgPSArY29tcGFyYXRvcihoYXlzdGFja1ttaWRdLCBuZWVkbGUpO1xuICAgICAgICBpZiAoY21wIDwgMC4wKSB7XG4gICAgICAgICAgICAvKiBUb28gbG93LiAqL1xuICAgICAgICAgICAgbG93ID0gbWlkICsgMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8qIEtleSBmb3VuZCBvciB0b28gaGlnaCAqL1xuICAgICAgICAgICAgaGlnaCA9IG1pZDtcbiAgICAgICAgICAgIGZvdW5kID0gIWNtcDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiBLZXkgbm90IGZvdW5kLiAqL1xuICAgIHJldHVybiBmb3VuZCA/IGxvdyA6IH5sb3c7XG59XG4vKipcbiAqIENvbXBhcmUgZnVuY3Rpb24gZm9yIGFycmF5IHNvcnQgdGhhdCBpcyBzYWZlIGZvciBudW1iZXJzLlxuICogQHBhcmFtIHsqfSBhIFRoZSBmaXJzdCBvYmplY3QgdG8gYmUgY29tcGFyZWQuXG4gKiBAcGFyYW0geyp9IGIgVGhlIHNlY29uZCBvYmplY3QgdG8gYmUgY29tcGFyZWQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgbmVnYXRpdmUgbnVtYmVyLCB6ZXJvLCBvciBhIHBvc2l0aXZlIG51bWJlciBhcyB0aGUgZmlyc3RcbiAqICAgICBhcmd1bWVudCBpcyBsZXNzIHRoYW4sIGVxdWFsIHRvLCBvciBncmVhdGVyIHRoYW4gdGhlIHNlY29uZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBhID4gYiA/IDEgOiBhIDwgYiA/IC0xIDogMDtcbn1cbi8qKlxuICogV2hldGhlciB0aGUgYXJyYXkgY29udGFpbnMgdGhlIGdpdmVuIG9iamVjdC5cbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBUaGUgYXJyYXkgdG8gdGVzdCBmb3IgdGhlIHByZXNlbmNlIG9mIHRoZSBlbGVtZW50LlxuICogQHBhcmFtIHsqfSBvYmogVGhlIG9iamVjdCBmb3Igd2hpY2ggdG8gdGVzdC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBvYmplY3QgaXMgaW4gdGhlIGFycmF5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5jbHVkZXMoYXJyLCBvYmopIHtcbiAgICByZXR1cm4gYXJyLmluZGV4T2Yob2JqKSA+PSAwO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGFyciBBcnJheS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXQgVGFyZ2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGRpcmVjdGlvbiAwIG1lYW5zIHJldHVybiB0aGUgbmVhcmVzdCwgPiAwXG4gKiAgICBtZWFucyByZXR1cm4gdGhlIGxhcmdlc3QgbmVhcmVzdCwgPCAwIG1lYW5zIHJldHVybiB0aGVcbiAqICAgIHNtYWxsZXN0IG5lYXJlc3QuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEluZGV4LlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyRmluZE5lYXJlc3QoYXJyLCB0YXJnZXQsIGRpcmVjdGlvbikge1xuICAgIHZhciBuID0gYXJyLmxlbmd0aDtcbiAgICBpZiAoYXJyWzBdIDw9IHRhcmdldCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZWxzZSBpZiAodGFyZ2V0IDw9IGFycltuIC0gMV0pIHtcbiAgICAgICAgcmV0dXJuIG4gLSAxO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIGkgPSB2b2lkIDA7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAxOyBpIDwgbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFycltpXSA8IHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA8IDApIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJyW2ldIDw9IHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAxOyBpIDwgbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFycltpXSA9PSB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFycltpXSA8IHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJyW2kgLSAxXSAtIHRhcmdldCA8IHRhcmdldCAtIGFycltpXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgLSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG4gLSAxO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIEFycmF5LlxuICogQHBhcmFtIHtudW1iZXJ9IGJlZ2luIEJlZ2luIGluZGV4LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQgaW5kZXguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXZlcnNlU3ViQXJyYXkoYXJyLCBiZWdpbiwgZW5kKSB7XG4gICAgd2hpbGUgKGJlZ2luIDwgZW5kKSB7XG4gICAgICAgIHZhciB0bXAgPSBhcnJbYmVnaW5dO1xuICAgICAgICBhcnJbYmVnaW5dID0gYXJyW2VuZF07XG4gICAgICAgIGFycltlbmRdID0gdG1wO1xuICAgICAgICArK2JlZ2luO1xuICAgICAgICAtLWVuZDtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8VkFMVUU+fSBhcnIgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7IUFycmF5PFZBTFVFPnxWQUxVRX0gZGF0YSBUaGUgZWxlbWVudHMgb3IgYXJyYXlzIG9mIGVsZW1lbnRzIHRvIGFkZCB0byBhcnIuXG4gKiBAdGVtcGxhdGUgVkFMVUVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZChhcnIsIGRhdGEpIHtcbiAgICB2YXIgZXh0ZW5zaW9uID0gQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbZGF0YV07XG4gICAgdmFyIGxlbmd0aCA9IGV4dGVuc2lvbi5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBhcnJbYXJyLmxlbmd0aF0gPSBleHRlbnNpb25baV07XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFZBTFVFPn0gYXJyIFRoZSBhcnJheSB0byBtb2RpZnkuXG4gKiBAcGFyYW0ge1ZBTFVFfSBvYmogVGhlIGVsZW1lbnQgdG8gcmVtb3ZlLlxuICogQHRlbXBsYXRlIFZBTFVFXG4gKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZWxlbWVudCB3YXMgcmVtb3ZlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZShhcnIsIG9iaikge1xuICAgIHZhciBpID0gYXJyLmluZGV4T2Yob2JqKTtcbiAgICB2YXIgZm91bmQgPSBpID4gLTE7XG4gICAgaWYgKGZvdW5kKSB7XG4gICAgICAgIGFyci5zcGxpY2UoaSwgMSk7XG4gICAgfVxuICAgIHJldHVybiBmb3VuZDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxWQUxVRT59IGFyciBUaGUgYXJyYXkgdG8gc2VhcmNoIGluLlxuICogQHBhcmFtIHtmdW5jdGlvbihWQUxVRSwgbnVtYmVyLCA/KSA6IGJvb2xlYW59IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNvbXBhcmUuXG4gKiBAdGVtcGxhdGUgVkFMVUVcbiAqIEByZXR1cm4ge1ZBTFVFfG51bGx9IFRoZSBlbGVtZW50IGZvdW5kIG9yIG51bGwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kKGFyciwgZnVuYykge1xuICAgIHZhciBsZW5ndGggPSBhcnIubGVuZ3RoID4+PiAwO1xuICAgIHZhciB2YWx1ZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlID0gYXJyW2ldO1xuICAgICAgICBpZiAoZnVuYyh2YWx1ZSwgaSwgYXJyKSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5fFVpbnQ4Q2xhbXBlZEFycmF5fSBhcnIxIFRoZSBmaXJzdCBhcnJheSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtBcnJheXxVaW50OENsYW1wZWRBcnJheX0gYXJyMiBUaGUgc2Vjb25kIGFycmF5IHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSB0d28gYXJyYXlzIGFyZSBlcXVhbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhhcnIxLCBhcnIyKSB7XG4gICAgdmFyIGxlbjEgPSBhcnIxLmxlbmd0aDtcbiAgICBpZiAobGVuMSAhPT0gYXJyMi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjE7IGkrKykge1xuICAgICAgICBpZiAoYXJyMVtpXSAhPT0gYXJyMltpXSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBTb3J0IHRoZSBwYXNzZWQgYXJyYXkgc3VjaCB0aGF0IHRoZSByZWxhdGl2ZSBvcmRlciBvZiBlcXVhbCBlbGVtZW50cyBpcyBwcmV2ZXJ2ZWQuXG4gKiBTZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU29ydGluZ19hbGdvcml0aG0jU3RhYmlsaXR5IGZvciBkZXRhaWxzLlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIFRoZSBhcnJheSB0byBzb3J0IChtb2RpZmllcyBvcmlnaW5hbCkuXG4gKiBAcGFyYW0geyFmdW5jdGlvbigqLCAqKTogbnVtYmVyfSBjb21wYXJlRm5jIENvbXBhcmlzb24gZnVuY3Rpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFibGVTb3J0KGFyciwgY29tcGFyZUZuYykge1xuICAgIHZhciBsZW5ndGggPSBhcnIubGVuZ3RoO1xuICAgIHZhciB0bXAgPSBBcnJheShhcnIubGVuZ3RoKTtcbiAgICB2YXIgaTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdG1wW2ldID0geyBpbmRleDogaSwgdmFsdWU6IGFycltpXSB9O1xuICAgIH1cbiAgICB0bXAuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gY29tcGFyZUZuYyhhLnZhbHVlLCBiLnZhbHVlKSB8fCBhLmluZGV4IC0gYi5pbmRleDtcbiAgICB9KTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFycltpXSA9IHRtcFtpXS52YWx1ZTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBUaGUgYXJyYXkgdG8gc2VhcmNoIGluLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBDb21wYXJpc29uIGZ1bmN0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBSZXR1cm4gaW5kZXguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kSW5kZXgoYXJyLCBmdW5jKSB7XG4gICAgdmFyIGluZGV4O1xuICAgIHZhciBmb3VuZCA9ICFhcnIuZXZlcnkoZnVuY3Rpb24gKGVsLCBpZHgpIHtcbiAgICAgICAgaW5kZXggPSBpZHg7XG4gICAgICAgIHJldHVybiAhZnVuYyhlbCwgaWR4LCBhcnIpO1xuICAgIH0pO1xuICAgIHJldHVybiBmb3VuZCA/IGluZGV4IDogLTE7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBUaGUgYXJyYXkgdG8gdGVzdC5cbiAqIEBwYXJhbSB7RnVuY3Rpb249fSBvcHRfZnVuYyBDb21wYXJpc29uIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3N0cmljdCBTdHJpY3RseSBzb3J0ZWQgKGRlZmF1bHQgZmFsc2UpLlxuICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJuIGluZGV4LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTb3J0ZWQoYXJyLCBvcHRfZnVuYywgb3B0X3N0cmljdCkge1xuICAgIHZhciBjb21wYXJlID0gb3B0X2Z1bmMgfHwgbnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbjtcbiAgICByZXR1cm4gYXJyLmV2ZXJ5KGZ1bmN0aW9uIChjdXJyZW50VmFsLCBpbmRleCkge1xuICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXMgPSBjb21wYXJlKGFycltpbmRleCAtIDFdLCBjdXJyZW50VmFsKTtcbiAgICAgICAgcmV0dXJuICEocmVzID4gMCB8fCAob3B0X3N0cmljdCAmJiByZXMgPT09IDApKTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFycmF5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9hc3NlcnRzXG4gKi9cbmltcG9ydCBBc3NlcnRpb25FcnJvciBmcm9tICcuL0Fzc2VydGlvbkVycm9yLmpzJztcbi8qKlxuICogQHBhcmFtIHsqfSBhc3NlcnRpb24gQXNzZXJ0aW9uIHdlIGV4cGVjdGVkIHRvIGJlIHRydXRoeS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlcnJvckNvZGUgRXJyb3IgY29kZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydChhc3NlcnRpb24sIGVycm9yQ29kZSkge1xuICAgIGlmICghYXNzZXJ0aW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBBc3NlcnRpb25FcnJvcihlcnJvckNvZGUpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzc2VydHMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NvbG9yXG4gKi9cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4vbWF0aC5qcyc7XG4vKipcbiAqIEEgY29sb3IgcmVwcmVzZW50ZWQgYXMgYSBzaG9ydCBhcnJheSBbcmVkLCBncmVlbiwgYmx1ZSwgYWxwaGFdLlxuICogcmVkLCBncmVlbiwgYW5kIGJsdWUgc2hvdWxkIGJlIGludGVnZXJzIGluIHRoZSByYW5nZSAwLi4yNTUgaW5jbHVzaXZlLlxuICogYWxwaGEgc2hvdWxkIGJlIGEgZmxvYXQgaW4gdGhlIHJhbmdlIDAuLjEgaW5jbHVzaXZlLiBJZiBubyBhbHBoYSB2YWx1ZSBpc1xuICogZ2l2ZW4gdGhlbiBgMWAgd2lsbCBiZSB1c2VkLlxuICogQHR5cGVkZWYge0FycmF5PG51bWJlcj59IENvbG9yXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogVGhpcyBSZWdFeHAgbWF0Y2hlcyAjIGZvbGxvd2VkIGJ5IDMsIDQsIDYsIG9yIDggaGV4IGRpZ2l0cy5cbiAqIEBjb25zdFxuICogQHR5cGUge1JlZ0V4cH1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBIRVhfQ09MT1JfUkVfID0gL14jKFthLWYwLTldezN9fFthLWYwLTldezR9KD86W2EtZjAtOV17Mn0pezAsMn0pJC9pO1xuLyoqXG4gKiBSZWd1bGFyIGV4cHJlc3Npb24gZm9yIG1hdGNoaW5nIHBvdGVudGlhbCBuYW1lZCBjb2xvciBzdHlsZSBzdHJpbmdzLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQHByaXZhdGVcbiAqL1xudmFyIE5BTUVEX0NPTE9SX1JFXyA9IC9eKFthLXpdKikkfF5oc2xhP1xcKC4qXFwpJC9pO1xuLyoqXG4gKiBSZXR1cm4gdGhlIGNvbG9yIGFzIGFuIHJnYmEgc3RyaW5nLlxuICogQHBhcmFtIHtDb2xvcnxzdHJpbmd9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7c3RyaW5nfSBSZ2JhIHN0cmluZy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzU3RyaW5nKGNvbG9yKSB7XG4gICAgaWYgKHR5cGVvZiBjb2xvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nKGNvbG9yKTtcbiAgICB9XG59XG4vKipcbiAqIFJldHVybiBuYW1lZCBjb2xvciBhcyBhbiByZ2JhIHN0cmluZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvciBOYW1lZCBjb2xvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gUmdiIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gZnJvbU5hbWVkKGNvbG9yKSB7XG4gICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWwuc3R5bGUuY29sb3IgPSBjb2xvcjtcbiAgICBpZiAoZWwuc3R5bGUuY29sb3IgIT09ICcnKSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB2YXIgcmdiID0gZ2V0Q29tcHV0ZWRTdHlsZShlbCkuY29sb3I7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWwpO1xuICAgICAgICByZXR1cm4gcmdiO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHMgU3RyaW5nLlxuICogQHJldHVybiB7Q29sb3J9IENvbG9yLlxuICovXG5leHBvcnQgdmFyIGZyb21TdHJpbmcgPSAoZnVuY3Rpb24gKCkge1xuICAgIC8vIFdlIG1haW50YWluIGEgc21hbGwgY2FjaGUgb2YgcGFyc2VkIHN0cmluZ3MuICBUbyBwcm92aWRlIGNoZWFwIExSVS1saWtlXG4gICAgLy8gc2VtYW50aWNzLCB3aGVuZXZlciB0aGUgY2FjaGUgZ3Jvd3MgdG9vIGxhcmdlIHdlIHNpbXBseSBkZWxldGUgYW5cbiAgICAvLyBhcmJpdHJhcnkgMjUlIG9mIHRoZSBlbnRyaWVzLlxuICAgIC8qKlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdmFyIE1BWF9DQUNIRV9TSVpFID0gMTAyNDtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgQ29sb3I+fVxuICAgICAqL1xuICAgIHZhciBjYWNoZSA9IHt9O1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdmFyIGNhY2hlU2l6ZSA9IDA7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcyBTdHJpbmcuXG4gICAgICogQHJldHVybiB7Q29sb3J9IENvbG9yLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHZhciBjb2xvcjtcbiAgICAgICAgaWYgKGNhY2hlLmhhc093blByb3BlcnR5KHMpKSB7XG4gICAgICAgICAgICBjb2xvciA9IGNhY2hlW3NdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNhY2hlU2l6ZSA+PSBNQVhfQ0FDSEVfU0laRSkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gY2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChpKysgJiAzKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNhY2hlW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAtLWNhY2hlU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbG9yID0gZnJvbVN0cmluZ0ludGVybmFsXyhzKTtcbiAgICAgICAgICAgIGNhY2hlW3NdID0gY29sb3I7XG4gICAgICAgICAgICArK2NhY2hlU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sb3I7XG4gICAgfSk7XG59KSgpO1xuLyoqXG4gKiBSZXR1cm4gdGhlIGNvbG9yIGFzIGFuIGFycmF5LiBUaGlzIGZ1bmN0aW9uIG1haW50YWlucyBhIGNhY2hlIG9mIGNhbGN1bGF0ZWRcbiAqIGFycmF5cyB3aGljaCBtZWFucyB0aGUgcmVzdWx0IHNob3VsZCBub3QgYmUgbW9kaWZpZWQuXG4gKiBAcGFyYW0ge0NvbG9yfHN0cmluZ30gY29sb3IgQ29sb3IuXG4gKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc0FycmF5KGNvbG9yKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY29sb3IpKSB7XG4gICAgICAgIHJldHVybiBjb2xvcjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBmcm9tU3RyaW5nKGNvbG9yKTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZy5cbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gKi9cbmZ1bmN0aW9uIGZyb21TdHJpbmdJbnRlcm5hbF8ocykge1xuICAgIHZhciByLCBnLCBiLCBhLCBjb2xvcjtcbiAgICBpZiAoTkFNRURfQ09MT1JfUkVfLmV4ZWMocykpIHtcbiAgICAgICAgcyA9IGZyb21OYW1lZChzKTtcbiAgICB9XG4gICAgaWYgKEhFWF9DT0xPUl9SRV8uZXhlYyhzKSkge1xuICAgICAgICAvLyBoZXhcbiAgICAgICAgdmFyIG4gPSBzLmxlbmd0aCAtIDE7IC8vIG51bWJlciBvZiBoZXggZGlnaXRzXG4gICAgICAgIHZhciBkID0gLy8gbnVtYmVyIG9mIGRpZ2l0cyBwZXIgY2hhbm5lbFxuICAgICAgICAgdm9pZCAwOyAvLyBudW1iZXIgb2YgZGlnaXRzIHBlciBjaGFubmVsXG4gICAgICAgIGlmIChuIDw9IDQpIHtcbiAgICAgICAgICAgIGQgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZCA9IDI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhhc0FscGhhID0gbiA9PT0gNCB8fCBuID09PSA4O1xuICAgICAgICByID0gcGFyc2VJbnQocy5zdWJzdHIoMSArIDAgKiBkLCBkKSwgMTYpO1xuICAgICAgICBnID0gcGFyc2VJbnQocy5zdWJzdHIoMSArIDEgKiBkLCBkKSwgMTYpO1xuICAgICAgICBiID0gcGFyc2VJbnQocy5zdWJzdHIoMSArIDIgKiBkLCBkKSwgMTYpO1xuICAgICAgICBpZiAoaGFzQWxwaGEpIHtcbiAgICAgICAgICAgIGEgPSBwYXJzZUludChzLnN1YnN0cigxICsgMyAqIGQsIGQpLCAxNik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhID0gMjU1O1xuICAgICAgICB9XG4gICAgICAgIGlmIChkID09IDEpIHtcbiAgICAgICAgICAgIHIgPSAociA8PCA0KSArIHI7XG4gICAgICAgICAgICBnID0gKGcgPDwgNCkgKyBnO1xuICAgICAgICAgICAgYiA9IChiIDw8IDQpICsgYjtcbiAgICAgICAgICAgIGlmIChoYXNBbHBoYSkge1xuICAgICAgICAgICAgICAgIGEgPSAoYSA8PCA0KSArIGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29sb3IgPSBbciwgZywgYiwgYSAvIDI1NV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHMuaW5kZXhPZigncmdiYSgnKSA9PSAwKSB7XG4gICAgICAgIC8vIHJnYmEoKVxuICAgICAgICBjb2xvciA9IHMuc2xpY2UoNSwgLTEpLnNwbGl0KCcsJykubWFwKE51bWJlcik7XG4gICAgICAgIG5vcm1hbGl6ZShjb2xvcik7XG4gICAgfVxuICAgIGVsc2UgaWYgKHMuaW5kZXhPZigncmdiKCcpID09IDApIHtcbiAgICAgICAgLy8gcmdiKClcbiAgICAgICAgY29sb3IgPSBzLnNsaWNlKDQsIC0xKS5zcGxpdCgnLCcpLm1hcChOdW1iZXIpO1xuICAgICAgICBjb2xvci5wdXNoKDEpO1xuICAgICAgICBub3JtYWxpemUoY29sb3IpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXNzZXJ0KGZhbHNlLCAxNCk7IC8vIEludmFsaWQgY29sb3JcbiAgICB9XG4gICAgcmV0dXJuIGNvbG9yO1xufVxuLyoqXG4gKiBUT0RPIHRoaXMgZnVuY3Rpb24gaXMgb25seSB1c2VkIGluIHRoZSB0ZXN0LCB3ZSBwcm9iYWJseSBzaG91bGRuJ3QgZXhwb3J0IGl0XG4gKiBAcGFyYW0ge0NvbG9yfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge0NvbG9yfSBDbGFtcGVkIGNvbG9yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKGNvbG9yKSB7XG4gICAgY29sb3JbMF0gPSBjbGFtcCgoY29sb3JbMF0gKyAwLjUpIHwgMCwgMCwgMjU1KTtcbiAgICBjb2xvclsxXSA9IGNsYW1wKChjb2xvclsxXSArIDAuNSkgfCAwLCAwLCAyNTUpO1xuICAgIGNvbG9yWzJdID0gY2xhbXAoKGNvbG9yWzJdICsgMC41KSB8IDAsIDAsIDI1NSk7XG4gICAgY29sb3JbM10gPSBjbGFtcChjb2xvclszXSwgMCwgMSk7XG4gICAgcmV0dXJuIGNvbG9yO1xufVxuLyoqXG4gKiBAcGFyYW0ge0NvbG9yfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gU3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9TdHJpbmcoY29sb3IpIHtcbiAgICB2YXIgciA9IGNvbG9yWzBdO1xuICAgIGlmIChyICE9IChyIHwgMCkpIHtcbiAgICAgICAgciA9IChyICsgMC41KSB8IDA7XG4gICAgfVxuICAgIHZhciBnID0gY29sb3JbMV07XG4gICAgaWYgKGcgIT0gKGcgfCAwKSkge1xuICAgICAgICBnID0gKGcgKyAwLjUpIHwgMDtcbiAgICB9XG4gICAgdmFyIGIgPSBjb2xvclsyXTtcbiAgICBpZiAoYiAhPSAoYiB8IDApKSB7XG4gICAgICAgIGIgPSAoYiArIDAuNSkgfCAwO1xuICAgIH1cbiAgICB2YXIgYSA9IGNvbG9yWzNdID09PSB1bmRlZmluZWQgPyAxIDogY29sb3JbM107XG4gICAgcmV0dXJuICdyZ2JhKCcgKyByICsgJywnICsgZyArICcsJyArIGIgKyAnLCcgKyBhICsgJyknO1xufVxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcyBTdHJpbmcuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBzdHJpbmcgaXMgYWN0dWFsbHkgYSB2YWxpZCBjb2xvclxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmdDb2xvcihzKSB7XG4gICAgaWYgKE5BTUVEX0NPTE9SX1JFXy50ZXN0KHMpKSB7XG4gICAgICAgIHMgPSBmcm9tTmFtZWQocyk7XG4gICAgfVxuICAgIHJldHVybiAoSEVYX0NPTE9SX1JFXy50ZXN0KHMpIHx8IHMuaW5kZXhPZigncmdiYSgnKSA9PT0gMCB8fCBzLmluZGV4T2YoJ3JnYignKSA9PT0gMCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb2xvci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY29sb3JsaWtlXG4gKi9cbmltcG9ydCB7IHRvU3RyaW5nIH0gZnJvbSAnLi9jb2xvci5qcyc7XG4vKipcbiAqIEEgdHlwZSBhY2NlcHRlZCBieSBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQuZmlsbFN0eWxlXG4gKiBvciBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQuc3Ryb2tlU3R5bGUuXG4gKiBSZXByZXNlbnRzIGEgY29sb3IsIHBhdHRlcm4sIG9yIGdyYWRpZW50LiBUaGUgb3JpZ2luIGZvciBwYXR0ZXJucyBhbmRcbiAqIGdyYWRpZW50cyBhcyBmaWxsIHN0eWxlIGlzIGFuIGluY3JlbWVudCBvZiA1MTIgY3NzIHBpeGVscyBmcm9tIG1hcCBjb29yZGluYXRlXG4gKiBgWzAsIDBdYC4gRm9yIHNlYW1sZXNzIHJlcGVhdCBwYXR0ZXJucywgd2lkdGggYW5kIGhlaWdodCBvZiB0aGUgcGF0dGVybiBpbWFnZVxuICogbXVzdCBiZSBhIGZhY3RvciBvZiB0d28gKDIsIDQsIDgsIC4uLiwgNTEyKS5cbiAqXG4gKiBAdHlwZWRlZiB7c3RyaW5nfENhbnZhc1BhdHRlcm58Q2FudmFzR3JhZGllbnR9IENvbG9yTGlrZVxuICogQGFwaVxuICovXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb2xvci5qc1wiKS5Db2xvcnxDb2xvckxpa2V9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7Q29sb3JMaWtlfSBUaGUgY29sb3IgYXMgYW4ge0BsaW5rIG9sL2NvbG9ybGlrZX5Db2xvckxpa2V9LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNDb2xvckxpa2UoY29sb3IpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb2xvcikpIHtcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nKGNvbG9yKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBjb2xvcjtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb2xvcmxpa2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2Nzc1xuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEZvbnRQYXJhbWV0ZXJzXG4gKiBAcHJvcGVydHkge3N0cmluZ30gc3R5bGVcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB2YXJpYW50XG4gKiBAcHJvcGVydHkge3N0cmluZ30gd2VpZ2h0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gc2l6ZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IGxpbmVIZWlnaHRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBmYW1pbHlcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gZmFtaWxpZXNcbiAqL1xuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIGZvciBoaWRkZW4gZmVhdHVyZS5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgQ0xBU1NfSElEREVOID0gJ29sLWhpZGRlbic7XG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgdGhhdCB3ZSdsbCBnaXZlIHRoZSBET00gZWxlbWVudHMgdG8gaGF2ZSB0aGVtIHNlbGVjdGFibGUuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX1NFTEVDVEFCTEUgPSAnb2wtc2VsZWN0YWJsZSc7XG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgdGhhdCB3ZSdsbCBnaXZlIHRoZSBET00gZWxlbWVudHMgdG8gaGF2ZSB0aGVtIHVuc2VsZWN0YWJsZS5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgQ0xBU1NfVU5TRUxFQ1RBQkxFID0gJ29sLXVuc2VsZWN0YWJsZSc7XG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgZm9yIHVuc3VwcG9ydGVkIGZlYXR1cmUuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX1VOU1VQUE9SVEVEID0gJ29sLXVuc3VwcG9ydGVkJztcbi8qKlxuICogVGhlIENTUyBjbGFzcyBmb3IgY29udHJvbHMuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX0NPTlRST0wgPSAnb2wtY29udHJvbCc7XG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgdGhhdCB3ZSdsbCBnaXZlIHRoZSBET00gZWxlbWVudHMgdGhhdCBhcmUgY29sbGFwc2VkLCBpLmUuXG4gKiB0byB0aG9zZSBlbGVtZW50cyB3aGljaCB1c3VhbGx5IGNhbiBiZSBleHBhbmRlZC5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgQ0xBU1NfQ09MTEFQU0VEID0gJ29sLWNvbGxhcHNlZCc7XG4vKipcbiAqIEZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDEzNTY5Ny9yZWdleC10by1wYXJzZS1hbnktY3NzLWZvbnRcbiAqIEB0eXBlIHtSZWdFeHB9XG4gKi9cbnZhciBmb250UmVnRXggPSBuZXcgUmVnRXhwKFtcbiAgICAnXlxcXFxzKig/PSg/Oig/OlstYS16XStcXFxccyopezAsMn0oaXRhbGljfG9ibGlxdWUpKT8pJyxcbiAgICAnKD89KD86KD86Wy1hLXpdK1xcXFxzKil7MCwyfShzbWFsbC1jYXBzKSk/KScsXG4gICAgJyg/PSg/Oig/OlstYS16XStcXFxccyopezAsMn0oYm9sZCg/OmVyKT98bGlnaHRlcnxbMS05XTAwICkpPyknLFxuICAgICcoPzooPzpub3JtYWx8XFxcXDF8XFxcXDJ8XFxcXDMpXFxcXHMqKXswLDN9KCg/Onh4Py0pPycsXG4gICAgJyg/OnNtYWxsfGxhcmdlKXxtZWRpdW18c21hbGxlcnxsYXJnZXJ8W1xcXFwuXFxcXGRdKyg/OlxcXFwlfGlufFtjZW1dbXxleHxwW2N0eF0pKScsXG4gICAgJyg/OlxcXFxzKlxcXFwvXFxcXHMqKG5vcm1hbHxbXFxcXC5cXFxcZF0rKD86XFxcXCV8aW58W2NlbV1tfGV4fHBbY3R4XSk/KSknLFxuICAgICc/XFxcXHMqKFstLFxcXFxcIlxcXFxcXCdcXFxcc2Etel0rPylcXFxccyokJyxcbl0uam9pbignJyksICdpJyk7XG52YXIgZm9udFJlZ0V4TWF0Y2hJbmRleCA9IFtcbiAgICAnc3R5bGUnLFxuICAgICd2YXJpYW50JyxcbiAgICAnd2VpZ2h0JyxcbiAgICAnc2l6ZScsXG4gICAgJ2xpbmVIZWlnaHQnLFxuICAgICdmYW1pbHknLFxuXTtcbi8qKlxuICogR2V0IHRoZSBsaXN0IG9mIGZvbnQgZmFtaWxpZXMgZnJvbSBhIGZvbnQgc3BlYy4gIE5vdGUgdGhhdCB0aGlzIGRvZXNuJ3Qgd29ya1xuICogZm9yIGZvbnQgZmFtaWxpZXMgdGhhdCBoYXZlIGNvbW1hcyBpbiB0aGVtLlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnRTcGVjIFRoZSBDU1MgZm9udCBwcm9wZXJ0eS5cbiAqIEByZXR1cm4ge0ZvbnRQYXJhbWV0ZXJzfSBUaGUgZm9udCBwYXJhbWV0ZXJzIChvciBudWxsIGlmIHRoZSBpbnB1dCBzcGVjIGlzIGludmFsaWQpLlxuICovXG5leHBvcnQgdmFyIGdldEZvbnRQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKGZvbnRTcGVjKSB7XG4gICAgdmFyIG1hdGNoID0gZm9udFNwZWMubWF0Y2goZm9udFJlZ0V4KTtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgc3R5bGUgPSAvKiogQHR5cGUge0ZvbnRQYXJhbWV0ZXJzfSAqLyAoe1xuICAgICAgICBsaW5lSGVpZ2h0OiAnbm9ybWFsJyxcbiAgICAgICAgc2l6ZTogJzEuMmVtJyxcbiAgICAgICAgc3R5bGU6ICdub3JtYWwnLFxuICAgICAgICB3ZWlnaHQ6ICdub3JtYWwnLFxuICAgICAgICB2YXJpYW50OiAnbm9ybWFsJyxcbiAgICB9KTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBmb250UmVnRXhNYXRjaEluZGV4Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gbWF0Y2hbaSArIDFdO1xuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3R5bGVbZm9udFJlZ0V4TWF0Y2hJbmRleFtpXV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdHlsZS5mYW1pbGllcyA9IHN0eWxlLmZhbWlseS5zcGxpdCgvLFxccz8vKTtcbiAgICByZXR1cm4gc3R5bGU7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3NzLmpzLm1hcCIsImltcG9ydCB7IFdPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTIH0gZnJvbSAnLi9oYXMuanMnO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2RvbVxuICovXG4vL0ZJWE1FIE1vdmUgdGhpcyBmdW5jdGlvbiB0byB0aGUgY2FudmFzIG1vZHVsZVxuLyoqXG4gKiBDcmVhdGUgYW4gaHRtbCBjYW52YXMgZWxlbWVudCBhbmQgcmV0dXJucyBpdHMgMmQgY29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3dpZHRoIENhbnZhcyB3aWR0aC5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2hlaWdodCBDYW52YXMgaGVpZ2h0LlxuICogQHBhcmFtIHtBcnJheTxIVE1MQ2FudmFzRWxlbWVudD49fSBvcHRfY2FudmFzUG9vbCBDYW52YXMgcG9vbCB0byB0YWtlIGV4aXN0aW5nIGNhbnZhcyBmcm9tLlxuICogQHJldHVybiB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBUaGUgY29udGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhbnZhc0NvbnRleHQyRChvcHRfd2lkdGgsIG9wdF9oZWlnaHQsIG9wdF9jYW52YXNQb29sKSB7XG4gICAgdmFyIGNhbnZhcyA9IG9wdF9jYW52YXNQb29sICYmIG9wdF9jYW52YXNQb29sLmxlbmd0aFxuICAgICAgICA/IG9wdF9jYW52YXNQb29sLnNoaWZ0KClcbiAgICAgICAgOiBXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBU1xuICAgICAgICAgICAgPyBuZXcgT2Zmc2NyZWVuQ2FudmFzKG9wdF93aWR0aCB8fCAzMDAsIG9wdF9oZWlnaHQgfHwgMzAwKVxuICAgICAgICAgICAgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBpZiAob3B0X3dpZHRoKSB7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IG9wdF93aWR0aDtcbiAgICB9XG4gICAgaWYgKG9wdF9oZWlnaHQpIHtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IG9wdF9oZWlnaHQ7XG4gICAgfVxuICAgIC8vRklYTUUgQWxsb3cgT2Zmc2NyZWVuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIGFzIHJldHVybiB0eXBlXG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSAqLyAoY2FudmFzLmdldENvbnRleHQoJzJkJykpO1xufVxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgY29tcHV0ZWQgd2lkdGggZm9yIHRoZSBnaXZlbiBlbGVtZW50IGluY2x1ZGluZyBtYXJnaW4sXG4gKiBwYWRkaW5nIGFuZCBib3JkZXIuXG4gKiBFcXVpdmFsZW50IHRvIGpRdWVyeSdzIGAkKGVsKS5vdXRlcldpZHRoKHRydWUpYC5cbiAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBlbGVtZW50IEVsZW1lbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSB3aWR0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG91dGVyV2lkdGgoZWxlbWVudCkge1xuICAgIHZhciB3aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICB3aWR0aCArPSBwYXJzZUludChzdHlsZS5tYXJnaW5MZWZ0LCAxMCkgKyBwYXJzZUludChzdHlsZS5tYXJnaW5SaWdodCwgMTApO1xuICAgIHJldHVybiB3aWR0aDtcbn1cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGNvbXB1dGVkIGhlaWdodCBmb3IgdGhlIGdpdmVuIGVsZW1lbnQgaW5jbHVkaW5nIG1hcmdpbixcbiAqIHBhZGRpbmcgYW5kIGJvcmRlci5cbiAqIEVxdWl2YWxlbnQgdG8galF1ZXJ5J3MgYCQoZWwpLm91dGVySGVpZ2h0KHRydWUpYC5cbiAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBlbGVtZW50IEVsZW1lbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBoZWlnaHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvdXRlckhlaWdodChlbGVtZW50KSB7XG4gICAgdmFyIGhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgaGVpZ2h0ICs9IHBhcnNlSW50KHN0eWxlLm1hcmdpblRvcCwgMTApICsgcGFyc2VJbnQoc3R5bGUubWFyZ2luQm90dG9tLCAxMCk7XG4gICAgcmV0dXJuIGhlaWdodDtcbn1cbi8qKlxuICogQHBhcmFtIHtOb2RlfSBuZXdOb2RlIE5vZGUgdG8gcmVwbGFjZSBvbGQgbm9kZVxuICogQHBhcmFtIHtOb2RlfSBvbGROb2RlIFRoZSBub2RlIHRvIGJlIHJlcGxhY2VkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlTm9kZShuZXdOb2RlLCBvbGROb2RlKSB7XG4gICAgdmFyIHBhcmVudCA9IG9sZE5vZGUucGFyZW50Tm9kZTtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgb2xkTm9kZSk7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIG5vZGUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge05vZGV9IFRoZSBub2RlIHRoYXQgd2FzIHJlbW92ZWQgb3IgbnVsbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSkge1xuICAgIHJldHVybiBub2RlICYmIG5vZGUucGFyZW50Tm9kZSA/IG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKSA6IG51bGw7XG59XG4vKipcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZSBUaGUgbm9kZSB0byByZW1vdmUgdGhlIGNoaWxkcmVuIGZyb20uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDaGlsZHJlbihub2RlKSB7XG4gICAgd2hpbGUgKG5vZGUubGFzdENoaWxkKSB7XG4gICAgICAgIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5sYXN0Q2hpbGQpO1xuICAgIH1cbn1cbi8qKlxuICogVHJhbnNmb3JtIHRoZSBjaGlsZHJlbiBvZiBhIHBhcmVudCBub2RlIHNvIHRoZXkgbWF0Y2ggdGhlXG4gKiBwcm92aWRlZCBsaXN0IG9mIGNoaWxkcmVuLiAgVGhpcyBmdW5jdGlvbiBhaW1zIHRvIGVmZmljaWVudGx5XG4gKiByZW1vdmUsIGFkZCwgYW5kIHJlb3JkZXIgY2hpbGQgbm9kZXMgd2hpbGUgbWFpbnRhaW5pbmcgYSBzaW1wbGVcbiAqIGltcGxlbWVudGF0aW9uIChpdCBpcyBub3QgZ3VhcmFudGVlZCB0byBtaW5pbWl6ZSBET00gb3BlcmF0aW9ucykuXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIHBhcmVudCBub2RlIHdob3NlIGNoaWxkcmVuIG5lZWQgcmV3b3JraW5nLlxuICogQHBhcmFtIHtBcnJheTxOb2RlPn0gY2hpbGRyZW4gVGhlIGRlc2lyZWQgY2hpbGRyZW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlQ2hpbGRyZW4obm9kZSwgY2hpbGRyZW4pIHtcbiAgICB2YXIgb2xkQ2hpbGRyZW4gPSBub2RlLmNoaWxkTm9kZXM7XG4gICAgZm9yICh2YXIgaSA9IDA7IHRydWU7ICsraSkge1xuICAgICAgICB2YXIgb2xkQ2hpbGQgPSBvbGRDaGlsZHJlbltpXTtcbiAgICAgICAgdmFyIG5ld0NoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgIC8vIGNoZWNrIGlmIG91ciB3b3JrIGlzIGRvbmVcbiAgICAgICAgaWYgKCFvbGRDaGlsZCAmJiAhbmV3Q2hpbGQpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIGlmIGNoaWxkcmVuIG1hdGNoXG4gICAgICAgIGlmIChvbGRDaGlsZCA9PT0gbmV3Q2hpbGQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIGlmIGEgbmV3IGNoaWxkIG5lZWRzIHRvIGJlIGFkZGVkXG4gICAgICAgIGlmICghb2xkQ2hpbGQpIHtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQobmV3Q2hpbGQpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2hlY2sgaWYgYW4gb2xkIGNoaWxkIG5lZWRzIHRvIGJlIHJlbW92ZWRcbiAgICAgICAgaWYgKCFuZXdDaGlsZCkge1xuICAgICAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChvbGRDaGlsZCk7XG4gICAgICAgICAgICAtLWk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZW9yZGVyXG4gICAgICAgIG5vZGUuaW5zZXJ0QmVmb3JlKG5ld0NoaWxkLCBvbGRDaGlsZCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZG9tLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9lYXNpbmdcbiAqL1xuLyoqXG4gKiBTdGFydCBzbG93IGFuZCBzcGVlZCB1cC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVhc2VJbih0KSB7XG4gICAgcmV0dXJuIE1hdGgucG93KHQsIDMpO1xufVxuLyoqXG4gKiBTdGFydCBmYXN0IGFuZCBzbG93IGRvd24uXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlYXNlT3V0KHQpIHtcbiAgICByZXR1cm4gMSAtIGVhc2VJbigxIC0gdCk7XG59XG4vKipcbiAqIFN0YXJ0IHNsb3csIHNwZWVkIHVwLCBhbmQgdGhlbiBzbG93IGRvd24gYWdhaW4uXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbkFuZE91dCh0KSB7XG4gICAgcmV0dXJuIDMgKiB0ICogdCAtIDIgKiB0ICogdCAqIHQ7XG59XG4vKipcbiAqIE1haW50YWluIGEgY29uc3RhbnQgc3BlZWQgb3ZlciB0aW1lLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyKHQpIHtcbiAgICByZXR1cm4gdDtcbn1cbi8qKlxuICogU3RhcnQgc2xvdywgc3BlZWQgdXAsIGFuZCBhdCB0aGUgdmVyeSBlbmQgc2xvdyBkb3duIGFnYWluLiAgVGhpcyBoYXMgdGhlXG4gKiBzYW1lIGdlbmVyYWwgYmVoYXZpb3IgYXMge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmd+aW5BbmRPdXR9LCBidXQgdGhlIGZpbmFsXG4gKiBzbG93ZG93biBpcyBkZWxheWVkLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXBBbmREb3duKHQpIHtcbiAgICBpZiAodCA8IDAuNSkge1xuICAgICAgICByZXR1cm4gaW5BbmRPdXQoMiAqIHQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIDEgLSBpbkFuZE91dCgyICogKHQgLSAwLjUpKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lYXNpbmcuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50c1xuICovXG5pbXBvcnQgeyBjbGVhciB9IGZyb20gJy4vb2JqLmpzJztcbi8qKlxuICogS2V5IHRvIHVzZSB3aXRoIHtAbGluayBtb2R1bGU6b2wvT2JzZXJ2YWJsZX5PYnNlcnZhYmxlI3VuQnlLZXl9LlxuICogQHR5cGVkZWYge09iamVjdH0gRXZlbnRzS2V5XG4gKiBAcHJvcGVydHkge0xpc3RlbmVyRnVuY3Rpb259IGxpc3RlbmVyXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXZlbnRzL1RhcmdldC5qc1wiKS5FdmVudFRhcmdldExpa2V9IHRhcmdldFxuICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGVcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBMaXN0ZW5lciBmdW5jdGlvbi4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCBhbiBldmVudCBvYmplY3QgYXMgYXJndW1lbnQuXG4gKiBXaGVuIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAsIGV2ZW50IHByb3BhZ2F0aW9uIHdpbGwgc3RvcC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQpKTogKHZvaWR8Ym9vbGVhbil9IExpc3RlbmVyRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBMaXN0ZW5lck9iamVjdFxuICogQHByb3BlcnR5IHtMaXN0ZW5lckZ1bmN0aW9ufSBoYW5kbGVFdmVudFxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtMaXN0ZW5lckZ1bmN0aW9ufExpc3RlbmVyT2JqZWN0fSBMaXN0ZW5lclxuICovXG4vKipcbiAqIFJlZ2lzdGVycyBhbiBldmVudCBsaXN0ZW5lciBvbiBhbiBldmVudCB0YXJnZXQuIEluc3BpcmVkIGJ5XG4gKiBodHRwczovL2dvb2dsZS5naXRodWIuaW8vY2xvc3VyZS1saWJyYXJ5L2FwaS9zb3VyY2UvY2xvc3VyZS9nb29nL2V2ZW50cy9ldmVudHMuanMuc3JjLmh0bWxcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGVmZmljaWVudGx5IGJpbmRzIGEgYGxpc3RlbmVyYCB0byBhIGB0aGlzYCBvYmplY3QsIGFuZCByZXR1cm5zXG4gKiBhIGtleSBmb3IgdXNlIHdpdGgge0BsaW5rIG1vZHVsZTpvbC9ldmVudHN+dW5saXN0ZW5CeUtleX0uXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuRXZlbnRUYXJnZXRMaWtlfSB0YXJnZXQgRXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAqIEBwYXJhbSB7TGlzdGVuZXJGdW5jdGlvbn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdF90aGlzIE9iamVjdCByZWZlcmVuY2VkIGJ5IHRoZSBgdGhpc2Aga2V5d29yZCBpbiB0aGVcbiAqICAgICBsaXN0ZW5lci4gRGVmYXVsdCBpcyB0aGUgYHRhcmdldGAuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfb25jZSBJZiB0cnVlLCBhZGQgdGhlIGxpc3RlbmVyIGFzIG9uZS1vZmYgbGlzdGVuZXIuXG4gKiBAcmV0dXJuIHtFdmVudHNLZXl9IFVuaXF1ZSBrZXkgZm9yIHRoZSBsaXN0ZW5lci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3Rlbih0YXJnZXQsIHR5cGUsIGxpc3RlbmVyLCBvcHRfdGhpcywgb3B0X29uY2UpIHtcbiAgICBpZiAob3B0X3RoaXMgJiYgb3B0X3RoaXMgIT09IHRhcmdldCkge1xuICAgICAgICBsaXN0ZW5lciA9IGxpc3RlbmVyLmJpbmQob3B0X3RoaXMpO1xuICAgIH1cbiAgICBpZiAob3B0X29uY2UpIHtcbiAgICAgICAgdmFyIG9yaWdpbmFsTGlzdGVuZXJfMSA9IGxpc3RlbmVyO1xuICAgICAgICBsaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIG9yaWdpbmFsTGlzdGVuZXJfMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICB2YXIgZXZlbnRzS2V5ID0ge1xuICAgICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgbGlzdGVuZXI6IGxpc3RlbmVyLFxuICAgIH07XG4gICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpO1xuICAgIHJldHVybiBldmVudHNLZXk7XG59XG4vKipcbiAqIFJlZ2lzdGVycyBhIG9uZS1vZmYgZXZlbnQgbGlzdGVuZXIgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogVGhpcyBmdW5jdGlvbiBlZmZpY2llbnRseSBiaW5kcyBhIGBsaXN0ZW5lcmAgYXMgc2VsZi11bnJlZ2lzdGVyaW5nIGxpc3RlbmVyXG4gKiB0byBhIGB0aGlzYCBvYmplY3QsIGFuZCByZXR1cm5zIGEga2V5IGZvciB1c2Ugd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHN+dW5saXN0ZW5CeUtleX0gaW4gY2FzZSB0aGUgbGlzdGVuZXIgbmVlZHMgdG8gYmVcbiAqIHVucmVnaXN0ZXJlZCBiZWZvcmUgaXQgaXMgY2FsbGVkLlxuICpcbiAqIFdoZW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHN+bGlzdGVufSBpcyBjYWxsZWQgd2l0aCB0aGUgc2FtZSBhcmd1bWVudHMgYWZ0ZXIgdGhpc1xuICogZnVuY3Rpb24sIHRoZSBzZWxmLXVucmVnaXN0ZXJpbmcgbGlzdGVuZXIgd2lsbCBiZSB0dXJuZWQgaW50byBhIHBlcm1hbmVudFxuICogbGlzdGVuZXIuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuRXZlbnRUYXJnZXRMaWtlfSB0YXJnZXQgRXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAqIEBwYXJhbSB7TGlzdGVuZXJGdW5jdGlvbn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdF90aGlzIE9iamVjdCByZWZlcmVuY2VkIGJ5IHRoZSBgdGhpc2Aga2V5d29yZCBpbiB0aGVcbiAqICAgICBsaXN0ZW5lci4gRGVmYXVsdCBpcyB0aGUgYHRhcmdldGAuXG4gKiBAcmV0dXJuIHtFdmVudHNLZXl9IEtleSBmb3IgdW5saXN0ZW5CeUtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3Rlbk9uY2UodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgb3B0X3RoaXMpIHtcbiAgICByZXR1cm4gbGlzdGVuKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIG9wdF90aGlzLCB0cnVlKTtcbn1cbi8qKlxuICogVW5yZWdpc3RlcnMgZXZlbnQgbGlzdGVuZXJzIG9uIGFuIGV2ZW50IHRhcmdldC4gSW5zcGlyZWQgYnlcbiAqIGh0dHBzOi8vZ29vZ2xlLmdpdGh1Yi5pby9jbG9zdXJlLWxpYnJhcnkvYXBpL3NvdXJjZS9jbG9zdXJlL2dvb2cvZXZlbnRzL2V2ZW50cy5qcy5zcmMuaHRtbFxuICpcbiAqIFRoZSBhcmd1bWVudCBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBpcyB0aGUga2V5IHJldHVybmVkIGZyb21cbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzfmxpc3Rlbn0gb3Ige0BsaW5rIG1vZHVsZTpvbC9ldmVudHN+bGlzdGVuT25jZX0uXG4gKlxuICogQHBhcmFtIHtFdmVudHNLZXl9IGtleSBUaGUga2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5saXN0ZW5CeUtleShrZXkpIHtcbiAgICBpZiAoa2V5ICYmIGtleS50YXJnZXQpIHtcbiAgICAgICAga2V5LnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGtleS50eXBlLCBrZXkubGlzdGVuZXIpO1xuICAgICAgICBjbGVhcihrZXkpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50cy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL0V2ZW50XG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogU3RyaXBwZWQgZG93biBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVzNDIERPTSBMZXZlbCAyIEV2ZW50IGludGVyZmFjZS5cbiAqIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTItRXZlbnRzL2V2ZW50cy5odG1sI0V2ZW50cy1pbnRlcmZhY2UuXG4gKlxuICogVGhpcyBpbXBsZW1lbnRhdGlvbiBvbmx5IHByb3ZpZGVzIGB0eXBlYCBhbmQgYHRhcmdldGAgcHJvcGVydGllcywgYW5kXG4gKiBgc3RvcFByb3BhZ2F0aW9uYCBhbmQgYHByZXZlbnREZWZhdWx0YCBtZXRob2RzLiBJdCBpcyBtZWFudCBhcyBiYXNlIGNsYXNzXG4gKiBmb3IgaGlnaGVyIGxldmVsIGV2ZW50cyBkZWZpbmVkIGluIHRoZSBsaWJyYXJ5LCBhbmQgd29ya3Mgd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvVGFyZ2V0flRhcmdldH0uXG4gKi9cbnZhciBCYXNlRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBCYXNlRXZlbnQodHlwZSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBldmVudCB0eXBlLlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGV2ZW50IHRhcmdldC5cbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YXJnZXQgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlRXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlO1xuICAgIH07XG4gICAgcmV0dXJuIEJhc2VFdmVudDtcbn0oKSk7XG4vKipcbiAqIEBwYXJhbSB7RXZlbnR8aW1wb3J0KFwiLi9FdmVudC5qc1wiKS5kZWZhdWx0fSBldnQgRXZlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbihldnQpIHtcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG59XG4vKipcbiAqIEBwYXJhbSB7RXZlbnR8aW1wb3J0KFwiLi9FdmVudC5qc1wiKS5kZWZhdWx0fSBldnQgRXZlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xufVxuZXhwb3J0IGRlZmF1bHQgQmFzZUV2ZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9FdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQGNvbnN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBHZW5lcmljIGNoYW5nZSBldmVudC4gVHJpZ2dlcmVkIHdoZW4gdGhlIHJldmlzaW9uIGNvdW50ZXIgaXMgaW5jcmVhc2VkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvZXZlbnRzL0V2ZW50fkJhc2VFdmVudCNjaGFuZ2VcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ0hBTkdFOiAnY2hhbmdlJyxcbiAgICAvKipcbiAgICAgKiBHZW5lcmljIGVycm9yIGV2ZW50LiBUcmlnZ2VyZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9ldmVudHMvRXZlbnR+QmFzZUV2ZW50I2Vycm9yXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEVSUk9SOiAnZXJyb3InLFxuICAgIEJMVVI6ICdibHVyJyxcbiAgICBDTEVBUjogJ2NsZWFyJyxcbiAgICBDT05URVhUTUVOVTogJ2NvbnRleHRtZW51JyxcbiAgICBDTElDSzogJ2NsaWNrJyxcbiAgICBEQkxDTElDSzogJ2RibGNsaWNrJyxcbiAgICBEUkFHRU5URVI6ICdkcmFnZW50ZXInLFxuICAgIERSQUdPVkVSOiAnZHJhZ292ZXInLFxuICAgIERST1A6ICdkcm9wJyxcbiAgICBGT0NVUzogJ2ZvY3VzJyxcbiAgICBLRVlET1dOOiAna2V5ZG93bicsXG4gICAgS0VZUFJFU1M6ICdrZXlwcmVzcycsXG4gICAgTE9BRDogJ2xvYWQnLFxuICAgIFJFU0laRTogJ3Jlc2l6ZScsXG4gICAgVE9VQ0hNT1ZFOiAndG91Y2htb3ZlJyxcbiAgICBXSEVFTDogJ3doZWVsJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudFR5cGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvVGFyZ2V0XG4gKi9cbmltcG9ydCBEaXNwb3NhYmxlIGZyb20gJy4uL0Rpc3Bvc2FibGUuanMnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vRXZlbnQuanMnO1xuaW1wb3J0IHsgVk9JRCB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBjbGVhciB9IGZyb20gJy4uL29iai5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtFdmVudFRhcmdldHxUYXJnZXR9IEV2ZW50VGFyZ2V0TGlrZVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgc2ltcGxpZmllZCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVzNDIERPTSBMZXZlbCAyIEV2ZW50VGFyZ2V0IGludGVyZmFjZS5cbiAqIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwMC9SRUMtRE9NLUxldmVsLTItRXZlbnRzLTIwMDAxMTEzL2V2ZW50cy5odG1sI0V2ZW50cy1FdmVudFRhcmdldC5cbiAqXG4gKiBUaGVyZSBhcmUgdHdvIGltcG9ydGFudCBzaW1wbGlmaWNhdGlvbnMgY29tcGFyZWQgdG8gdGhlIHNwZWNpZmljYXRpb246XG4gKlxuICogMS4gVGhlIGhhbmRsaW5nIG9mIGB1c2VDYXB0dXJlYCBpbiBgYWRkRXZlbnRMaXN0ZW5lcmAgYW5kXG4gKiAgICBgcmVtb3ZlRXZlbnRMaXN0ZW5lcmAuIFRoZXJlIGlzIG5vIHJlYWwgY2FwdHVyZSBtb2RlbC5cbiAqIDIuIFRoZSBoYW5kbGluZyBvZiBgc3RvcFByb3BhZ2F0aW9uYCBhbmQgYHByZXZlbnREZWZhdWx0YCBvbiBgZGlzcGF0Y2hFdmVudGAuXG4gKiAgICBUaGVyZSBpcyBubyBldmVudCB0YXJnZXQgaGllcmFyY2h5LiBXaGVuIGEgbGlzdGVuZXIgY2FsbHNcbiAqICAgIGBzdG9wUHJvcGFnYXRpb25gIG9yIGBwcmV2ZW50RGVmYXVsdGAgb24gYW4gZXZlbnQgb2JqZWN0LCBpdCBtZWFucyB0aGF0IG5vXG4gKiAgICBtb3JlIGxpc3RlbmVycyBhZnRlciB0aGlzIG9uZSB3aWxsIGJlIGNhbGxlZC4gU2FtZSBhcyB3aGVuIHRoZSBsaXN0ZW5lclxuICogICAgcmV0dXJucyBmYWxzZS5cbiAqL1xudmFyIFRhcmdldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGFyZ2V0LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Kj19IG9wdF90YXJnZXQgRGVmYXVsdCBldmVudCB0YXJnZXQgZm9yIGRpc3BhdGNoZWQgZXZlbnRzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRhcmdldChvcHRfdGFyZ2V0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Kn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmV2ZW50VGFyZ2V0XyA9IG9wdF90YXJnZXQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgbnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBlbmRpbmdSZW1vdmFsc18gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kaXNwYXRjaGluZ18gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIEFycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcj4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGlzdGVuZXJzXyA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAgICovXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIGlmICghdHlwZSB8fCAhbGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNfIHx8ICh0aGlzLmxpc3RlbmVyc18gPSB7fSk7XG4gICAgICAgIHZhciBsaXN0ZW5lcnNGb3JUeXBlID0gbGlzdGVuZXJzW3R5cGVdIHx8IChsaXN0ZW5lcnNbdHlwZV0gPSBbXSk7XG4gICAgICAgIGlmIChsaXN0ZW5lcnNGb3JUeXBlLmluZGV4T2YobGlzdGVuZXIpID09PSAtMSkge1xuICAgICAgICAgICAgbGlzdGVuZXJzRm9yVHlwZS5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRGlzcGF0Y2hlcyBhbiBldmVudCBhbmQgY2FsbHMgYWxsIGxpc3RlbmVycyBsaXN0ZW5pbmcgZm9yIGV2ZW50c1xuICAgICAqIG9mIHRoaXMgdHlwZS4gVGhlIGV2ZW50IHBhcmFtZXRlciBjYW4gZWl0aGVyIGJlIGEgc3RyaW5nIG9yIGFuXG4gICAgICogT2JqZWN0IHdpdGggYSBgdHlwZWAgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vRXZlbnQuanNcIikuZGVmYXVsdHxzdHJpbmd9IGV2ZW50IEV2ZW50IG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufHVuZGVmaW5lZH0gYGZhbHNlYCBpZiBhbnlvbmUgY2FsbGVkIHByZXZlbnREZWZhdWx0IG9uIHRoZVxuICAgICAqICAgICBldmVudCBvYmplY3Qgb3IgaWYgYW55IG9mIHRoZSBsaXN0ZW5lcnMgcmV0dXJuZWQgZmFsc2UuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRhcmdldC5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vRXZlbnQuanNcIikuZGVmYXVsdHxFdmVudH0gKi9cbiAgICAgICAgdmFyIGV2dCA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZycgPyBuZXcgRXZlbnQoZXZlbnQpIDogZXZlbnQ7XG4gICAgICAgIHZhciB0eXBlID0gZXZ0LnR5cGU7XG4gICAgICAgIGlmICghZXZ0LnRhcmdldCkge1xuICAgICAgICAgICAgZXZ0LnRhcmdldCA9IHRoaXMuZXZlbnRUYXJnZXRfIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzXyAmJiB0aGlzLmxpc3RlbmVyc19bdHlwZV07XG4gICAgICAgIHZhciBwcm9wYWdhdGU7XG4gICAgICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIHZhciBkaXNwYXRjaGluZyA9IHRoaXMuZGlzcGF0Y2hpbmdfIHx8ICh0aGlzLmRpc3BhdGNoaW5nXyA9IHt9KTtcbiAgICAgICAgICAgIHZhciBwZW5kaW5nUmVtb3ZhbHMgPSB0aGlzLnBlbmRpbmdSZW1vdmFsc18gfHwgKHRoaXMucGVuZGluZ1JlbW92YWxzXyA9IHt9KTtcbiAgICAgICAgICAgIGlmICghKHR5cGUgaW4gZGlzcGF0Y2hpbmcpKSB7XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2hpbmdbdHlwZV0gPSAwO1xuICAgICAgICAgICAgICAgIHBlbmRpbmdSZW1vdmFsc1t0eXBlXSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICArK2Rpc3BhdGNoaW5nW3R5cGVdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoJ2hhbmRsZUV2ZW50JyBpbiBsaXN0ZW5lcnNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGFnYXRlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXJPYmplY3R9ICovIChsaXN0ZW5lcnNbaV0pLmhhbmRsZUV2ZW50KGV2dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwcm9wYWdhdGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lckZ1bmN0aW9ufSAqLyAobGlzdGVuZXJzW2ldKS5jYWxsKHRoaXMsIGV2dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwcm9wYWdhdGUgPT09IGZhbHNlIHx8IGV2dC5wcm9wYWdhdGlvblN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGFnYXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC0tZGlzcGF0Y2hpbmdbdHlwZV07XG4gICAgICAgICAgICBpZiAoZGlzcGF0Y2hpbmdbdHlwZV0gPT09IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgcHIgPSBwZW5kaW5nUmVtb3ZhbHNbdHlwZV07XG4gICAgICAgICAgICAgICAgZGVsZXRlIHBlbmRpbmdSZW1vdmFsc1t0eXBlXTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocHItLSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgVk9JRCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBkaXNwYXRjaGluZ1t0eXBlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwcm9wYWdhdGU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIFRhcmdldC5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVyc18gJiYgY2xlYXIodGhpcy5saXN0ZW5lcnNfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGlzdGVuZXJzIGZvciBhIHNwZWNpZmllZCBldmVudCB0eXBlLiBMaXN0ZW5lcnMgYXJlIHJldHVybmVkIGluIHRoZVxuICAgICAqIG9yZGVyIHRoYXQgdGhleSB3aWxsIGJlIGNhbGxlZCBpbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyPnx1bmRlZmluZWR9IExpc3RlbmVycy5cbiAgICAgKi9cbiAgICBUYXJnZXQucHJvdG90eXBlLmdldExpc3RlbmVycyA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5saXN0ZW5lcnNfICYmIHRoaXMubGlzdGVuZXJzX1t0eXBlXSkgfHwgdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfdHlwZSBUeXBlLiBJZiBub3QgcHJvdmlkZWQsXG4gICAgICogICAgIGB0cnVlYCB3aWxsIGJlIHJldHVybmVkIGlmIHRoaXMgZXZlbnQgdGFyZ2V0IGhhcyBhbnkgbGlzdGVuZXJzLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IEhhcyBsaXN0ZW5lcnMuXG4gICAgICovXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5oYXNMaXN0ZW5lciA9IGZ1bmN0aW9uIChvcHRfdHlwZSkge1xuICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzXykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcHRfdHlwZVxuICAgICAgICAgICAgPyBvcHRfdHlwZSBpbiB0aGlzLmxpc3RlbmVyc19cbiAgICAgICAgICAgIDogT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnNfKS5sZW5ndGggPiAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAgICovXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc18gJiYgdGhpcy5saXN0ZW5lcnNfW3R5cGVdO1xuICAgICAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGVuZGluZ1JlbW92YWxzXyAmJiB0eXBlIGluIHRoaXMucGVuZGluZ1JlbW92YWxzXykge1xuICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIGxpc3RlbmVyIGEgbm8tb3AsIGFuZCByZW1vdmUgbGF0ZXIgaW4gI2Rpc3BhdGNoRXZlbnQoKVxuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnNbaW5kZXhdID0gVk9JRDtcbiAgICAgICAgICAgICAgICAgICAgKyt0aGlzLnBlbmRpbmdSZW1vdmFsc19bdHlwZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyc19bdHlwZV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBUYXJnZXQ7XG59KERpc3Bvc2FibGUpKTtcbmV4cG9ydCBkZWZhdWx0IFRhcmdldDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRhcmdldC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL2NvbmRpdGlvblxuICovXG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50VHlwZSBmcm9tICcuLi9NYXBCcm93c2VyRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IEZBTFNFLCBUUlVFIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IE1BQywgV0VCS0lUIH0gZnJvbSAnLi4vaGFzLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGB7Ym9vbGVhbn1gLiBJZiB0aGUgY29uZGl0aW9uIGlzIG1ldCwgdHJ1ZSBzaG91bGQgYmUgcmV0dXJuZWQuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKHRoaXM6ID8sIGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gQ29uZGl0aW9uXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIGNvbmRpdGlvbiBmdW5jdGlvbiB0aGF0IHBhc3NlcyB3aGVuIGFsbCBwcm92aWRlZCBjb25kaXRpb25zIHBhc3MuXG4gKiBAcGFyYW0gey4uLkNvbmRpdGlvbn0gdmFyX2FyZ3MgQ29uZGl0aW9ucyB0byBjaGVjay5cbiAqIEByZXR1cm4ge0NvbmRpdGlvbn0gQ29uZGl0aW9uIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWxsKHZhcl9hcmdzKSB7XG4gICAgdmFyIGNvbmRpdGlvbnMgPSBhcmd1bWVudHM7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQWxsIGNvbmRpdGlvbnMgcGFzc2VkLlxuICAgICAqL1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHBhc3MgPSB0cnVlO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb25kaXRpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHBhc3MgPSBwYXNzICYmIGNvbmRpdGlvbnNbaV0oZXZlbnQpO1xuICAgICAgICAgICAgaWYgKCFwYXNzKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhc3M7XG4gICAgfTtcbn1cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBvbmx5IHRoZSBhbHQta2V5IGlzIHByZXNzZWQsIGBmYWxzZWAgb3RoZXJ3aXNlIChlLmcuIHdoZW5cbiAqIGFkZGl0aW9uYWxseSB0aGUgc2hpZnQta2V5IGlzIHByZXNzZWQpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgb25seSB0aGUgYWx0IGtleSBpcyBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGFsdEtleU9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHJldHVybiAob3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAgICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgICAhb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG9ubHkgdGhlIGFsdC1rZXkgYW5kIHNoaWZ0LWtleSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZVxuICogKGUuZy4gd2hlbiBhZGRpdGlvbmFsbHkgdGhlIHBsYXRmb3JtLW1vZGlmaWVyLWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIGFsdCBhbmQgc2hpZnQga2V5cyBhcmUgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBhbHRTaGlmdEtleXNPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gKG9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmXG4gICAgICAgICEob3JpZ2luYWxFdmVudC5tZXRhS2V5IHx8IG9yaWdpbmFsRXZlbnQuY3RybEtleSkgJiZcbiAgICAgICAgb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBtYXAgaGFzIHRoZSBmb2N1cy4gVGhpcyBjb25kaXRpb24gcmVxdWlyZXMgYSBtYXAgdGFyZ2V0XG4gKiBlbGVtZW50IHdpdGggYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSwgZS5nLiBgPGRpdiBpZD1cIm1hcFwiIHRhYmluZGV4PVwiMVwiPmAuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbWFwIGhhcyB0aGUgZm9jdXMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgZm9jdXMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gZXZlbnQudGFyZ2V0LmdldFRhcmdldEVsZW1lbnQoKS5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIG1hcCBoYXMgdGhlIGZvY3VzIG9yIG5vICd0YWJpbmRleCcgYXR0cmlidXRlIHNldC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBtYXAgY29udGFpbmVyIGhhcyB0aGUgZm9jdXMgb3Igbm8gJ3RhYmluZGV4JyBhdHRyaWJ1dGUuXG4gKi9cbmV4cG9ydCB2YXIgZm9jdXNXaXRoVGFiaW5kZXggPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gZXZlbnQubWFwLmdldFRhcmdldEVsZW1lbnQoKS5oYXNBdHRyaWJ1dGUoJ3RhYmluZGV4JylcbiAgICAgICAgPyBmb2N1cyhldmVudClcbiAgICAgICAgOiB0cnVlO1xufTtcbi8qKlxuICogUmV0dXJuIGFsd2F5cyB0cnVlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgYWx3YXlzID0gVFJVRTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaXMgYSBgY2xpY2tgIGV2ZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgY2xpY2tgIGV2ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGNsaWNrID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLkNMSUNLO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaGFzIGFuIFwiYWN0aW9uXCItcHJvZHVjaW5nIG1vdXNlIGJ1dHRvbi5cbiAqXG4gKiBCeSBkZWZpbml0aW9uLCB0aGlzIGluY2x1ZGVzIGxlZnQtY2xpY2sgb24gd2luZG93cy9saW51eCwgYW5kIGxlZnQtY2xpY2tcbiAqIHdpdGhvdXQgdGhlIGN0cmwga2V5IG9uIE1hY3MuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHJlc3VsdC5cbiAqL1xuZXhwb3J0IHZhciBtb3VzZUFjdGlvbkJ1dHRvbiA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7TW91c2VFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gb3JpZ2luYWxFdmVudC5idXR0b24gPT0gMCAmJiAhKFdFQktJVCAmJiBNQUMgJiYgb3JpZ2luYWxFdmVudC5jdHJsS2V5KTtcbn07XG4vKipcbiAqIFJldHVybiBhbHdheXMgZmFsc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gRmFsc2UuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgbmV2ZXIgPSBGQUxTRTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgYnJvd3NlciBldmVudCBpcyBhIGBwb2ludGVybW92ZWAgZXZlbnQsIGBmYWxzZWBcbiAqIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBicm93c2VyIGV2ZW50IGlzIGEgYHBvaW50ZXJtb3ZlYCBldmVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBwb2ludGVyTW92ZSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICByZXR1cm4gbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gJ3BvaW50ZXJtb3ZlJztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgc2luZ2xlQ2xpY2sgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgcmV0dXJuIG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuU0lOR0xFQ0xJQ0s7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgZGJsY2xpY2tgIGV2ZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgZGJsY2xpY2tgIGV2ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGRvdWJsZUNsaWNrID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLkRCTENMSUNLO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBubyBtb2RpZmllciBrZXkgKGFsdC0sIHNoaWZ0LSBvciBwbGF0Zm9ybS1tb2RpZmllci1rZXkpIGlzXG4gKiBwcmVzc2VkLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgb25seSBpZiB0aGVyZSBubyBtb2RpZmllciBrZXlzIGFyZSBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIG5vTW9kaWZpZXJLZXlzID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gKCFvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgICAhKG9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgICAgICFvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5KTtcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgcGxhdGZvcm0tbW9kaWZpZXIta2V5ICh0aGUgbWV0YS1rZXkgb24gTWFjLFxuICogY3RybC1rZXkgb3RoZXJ3aXNlKSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZSAoZS5nLiB3aGVuIGFkZGl0aW9uYWxseVxuICogdGhlIHNoaWZ0LWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIHBsYXRmb3JtIG1vZGlmaWVyIGtleSBpcyBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHBsYXRmb3JtTW9kaWZpZXJLZXlPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gKCFvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgICAoTUFDID8gb3JpZ2luYWxFdmVudC5tZXRhS2V5IDogb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgICAhb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG9ubHkgdGhlIHNoaWZ0LWtleSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZSAoZS5nLiB3aGVuXG4gKiBhZGRpdGlvbmFsbHkgdGhlIGFsdC1rZXkgaXMgcHJlc3NlZCkuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBvbmx5IHRoZSBzaGlmdCBrZXkgaXMgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBzaGlmdEtleU9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHJldHVybiAoIW9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmXG4gICAgICAgICEob3JpZ2luYWxFdmVudC5tZXRhS2V5IHx8IG9yaWdpbmFsRXZlbnQuY3RybEtleSkgJiZcbiAgICAgICAgb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSB0YXJnZXQgZWxlbWVudCBpcyBub3QgZWRpdGFibGUsIGkuZS4gbm90IGEgYDxpbnB1dD5gLSxcbiAqIGA8c2VsZWN0PmAtIG9yIGA8dGV4dGFyZWE+YC1lbGVtZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIG9ubHkgaWYgdGhlIHRhcmdldCBlbGVtZW50IGlzIG5vdCBlZGl0YWJsZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciB0YXJnZXROb3RFZGl0YWJsZSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7S2V5Ym9hcmRFdmVudHxNb3VzZUV2ZW50fFRvdWNoRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgdmFyIHRhZ05hbWUgPSAvKiogQHR5cGUge0VsZW1lbnR9ICovIChvcmlnaW5hbEV2ZW50LnRhcmdldCkudGFnTmFtZTtcbiAgICByZXR1cm4gdGFnTmFtZSAhPT0gJ0lOUFVUJyAmJiB0YWdOYW1lICE9PSAnU0VMRUNUJyAmJiB0YWdOYW1lICE9PSAnVEVYVEFSRUEnO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgbW91c2UgZGV2aWNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIG1vdXNlIGRldmljZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBtb3VzZU9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHBvaW50ZXJFdmVudCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50XCIpLmRlZmF1bHR9ICovIChtYXBCcm93c2VyRXZlbnQpXG4gICAgICAgIC5vcmlnaW5hbEV2ZW50O1xuICAgIGFzc2VydChwb2ludGVyRXZlbnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgICAvLyBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jd2lkbC1Qb2ludGVyRXZlbnQtcG9pbnRlclR5cGVcbiAgICByZXR1cm4gcG9pbnRlckV2ZW50LnBvaW50ZXJUeXBlID09ICdtb3VzZSc7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSB0b3VjaGFibGUgZGV2aWNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIHRvdWNoYWJsZSBkZXZpY2UuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgdG91Y2hPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBwb2ludGVyRXZ0ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnRcIikuZGVmYXVsdH0gKi8gKG1hcEJyb3dzZXJFdmVudClcbiAgICAgICAgLm9yaWdpbmFsRXZlbnQ7XG4gICAgYXNzZXJ0KHBvaW50ZXJFdnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgICAvLyBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jd2lkbC1Qb2ludGVyRXZlbnQtcG9pbnRlclR5cGVcbiAgICByZXR1cm4gcG9pbnRlckV2dC5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIGRpZ2l0YWwgcGVuLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIGRpZ2l0YWwgcGVuLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHBlbk9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHBvaW50ZXJFdnQgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudFwiKS5kZWZhdWx0fSAqLyAobWFwQnJvd3NlckV2ZW50KVxuICAgICAgICAub3JpZ2luYWxFdmVudDtcbiAgICBhc3NlcnQocG9pbnRlckV2dCAhPT0gdW5kZWZpbmVkLCA1Nik7IC8vIG1hcEJyb3dzZXJFdmVudCBtdXN0IG9yaWdpbmF0ZSBmcm9tIGEgcG9pbnRlciBldmVudFxuICAgIC8vIHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9wb2ludGVyZXZlbnRzLyN3aWRsLVBvaW50ZXJFdmVudC1wb2ludGVyVHlwZVxuICAgIHJldHVybiBwb2ludGVyRXZ0LnBvaW50ZXJUeXBlID09PSAncGVuJztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIHByaW1hcnkgcG9pbnRlciBpblxuICogY29udGFjdCB3aXRoIHRoZSBzdXJmYWNlIG9yIGlmIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbiBpcyBwcmVzc2VkLlxuICogU2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI2J1dHRvbi1zdGF0ZXMuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgcHJpbWFyeSBwb2ludGVyLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHByaW1hcnlBY3Rpb24gPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHBvaW50ZXJFdmVudCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50XCIpLmRlZmF1bHR9ICovIChtYXBCcm93c2VyRXZlbnQpXG4gICAgICAgIC5vcmlnaW5hbEV2ZW50O1xuICAgIGFzc2VydChwb2ludGVyRXZlbnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgICByZXR1cm4gcG9pbnRlckV2ZW50LmlzUHJpbWFyeSAmJiBwb2ludGVyRXZlbnQuYnV0dG9uID09PSAwO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmRpdGlvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXh0ZW50XG4gKi9cbmltcG9ydCBDb3JuZXIgZnJvbSAnLi9leHRlbnQvQ29ybmVyLmpzJztcbmltcG9ydCBSZWxhdGlvbnNoaXAgZnJvbSAnLi9leHRlbnQvUmVsYXRpb25zaGlwLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG4vKipcbiAqIEFuIGFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGFuIGV4dGVudDogYFttaW54LCBtaW55LCBtYXh4LCBtYXh5XWAuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gRXh0ZW50XG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQnVpbGQgYW4gZXh0ZW50IHRoYXQgaW5jbHVkZXMgYWxsIGdpdmVuIGNvb3JkaW5hdGVzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAqIEByZXR1cm4ge0V4dGVudH0gQm91bmRpbmcgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYm91bmRpbmdFeHRlbnQoY29vcmRpbmF0ZXMpIHtcbiAgICB2YXIgZXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBjb29yZGluYXRlc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBleHRlbnQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geHMgWHMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHlzIFlzLlxuICogQHBhcmFtIHtFeHRlbnQ9fSBvcHRfZXh0ZW50IERlc3RpbmF0aW9uIGV4dGVudC5cbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZnVuY3Rpb24gX2JvdW5kaW5nRXh0ZW50WFlzKHhzLCB5cywgb3B0X2V4dGVudCkge1xuICAgIHZhciBtaW5YID0gTWF0aC5taW4uYXBwbHkobnVsbCwgeHMpO1xuICAgIHZhciBtaW5ZID0gTWF0aC5taW4uYXBwbHkobnVsbCwgeXMpO1xuICAgIHZhciBtYXhYID0gTWF0aC5tYXguYXBwbHkobnVsbCwgeHMpO1xuICAgIHZhciBtYXhZID0gTWF0aC5tYXguYXBwbHkobnVsbCwgeXMpO1xuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCBvcHRfZXh0ZW50KTtcbn1cbi8qKlxuICogUmV0dXJuIGV4dGVudCBpbmNyZWFzZWQgYnkgdGhlIHByb3ZpZGVkIHZhbHVlLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVGhlIGFtb3VudCBieSB3aGljaCB0aGUgZXh0ZW50IHNob3VsZCBiZSBidWZmZXJlZC5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlcihleHRlbnQsIHZhbHVlLCBvcHRfZXh0ZW50KSB7XG4gICAgaWYgKG9wdF9leHRlbnQpIHtcbiAgICAgICAgb3B0X2V4dGVudFswXSA9IGV4dGVudFswXSAtIHZhbHVlO1xuICAgICAgICBvcHRfZXh0ZW50WzFdID0gZXh0ZW50WzFdIC0gdmFsdWU7XG4gICAgICAgIG9wdF9leHRlbnRbMl0gPSBleHRlbnRbMl0gKyB2YWx1ZTtcbiAgICAgICAgb3B0X2V4dGVudFszXSA9IGV4dGVudFszXSArIHZhbHVlO1xuICAgICAgICByZXR1cm4gb3B0X2V4dGVudDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBleHRlbnRbMF0gLSB2YWx1ZSxcbiAgICAgICAgICAgIGV4dGVudFsxXSAtIHZhbHVlLFxuICAgICAgICAgICAgZXh0ZW50WzJdICsgdmFsdWUsXG4gICAgICAgICAgICBleHRlbnRbM10gKyB2YWx1ZSxcbiAgICAgICAgXTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSBjbG9uZSBvZiBhbiBleHRlbnQuXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQgdG8gY2xvbmUuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBUaGUgY2xvbmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShleHRlbnQsIG9wdF9leHRlbnQpIHtcbiAgICBpZiAob3B0X2V4dGVudCkge1xuICAgICAgICBvcHRfZXh0ZW50WzBdID0gZXh0ZW50WzBdO1xuICAgICAgICBvcHRfZXh0ZW50WzFdID0gZXh0ZW50WzFdO1xuICAgICAgICBvcHRfZXh0ZW50WzJdID0gZXh0ZW50WzJdO1xuICAgICAgICBvcHRfZXh0ZW50WzNdID0gZXh0ZW50WzNdO1xuICAgICAgICByZXR1cm4gb3B0X2V4dGVudDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBleHRlbnQuc2xpY2UoKTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IENsb3Nlc3Qgc3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWShleHRlbnQsIHgsIHkpIHtcbiAgICB2YXIgZHgsIGR5O1xuICAgIGlmICh4IDwgZXh0ZW50WzBdKSB7XG4gICAgICAgIGR4ID0gZXh0ZW50WzBdIC0geDtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXh0ZW50WzJdIDwgeCkge1xuICAgICAgICBkeCA9IHggLSBleHRlbnRbMl07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkeCA9IDA7XG4gICAgfVxuICAgIGlmICh5IDwgZXh0ZW50WzFdKSB7XG4gICAgICAgIGR5ID0gZXh0ZW50WzFdIC0geTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXh0ZW50WzNdIDwgeSkge1xuICAgICAgICBkeSA9IHkgLSBleHRlbnRbM107XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkeSA9IDA7XG4gICAgfVxuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cbi8qKlxuICogQ2hlY2sgaWYgdGhlIHBhc3NlZCBjb29yZGluYXRlIGlzIGNvbnRhaW5lZCBvciBvbiB0aGUgZWRnZSBvZiB0aGUgZXh0ZW50LlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGNvb3JkaW5hdGUgaXMgY29udGFpbmVkIGluIHRoZSBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250YWluc0Nvb3JkaW5hdGUoZXh0ZW50LCBjb29yZGluYXRlKSB7XG4gICAgcmV0dXJuIGNvbnRhaW5zWFkoZXh0ZW50LCBjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdKTtcbn1cbi8qKlxuICogQ2hlY2sgaWYgb25lIGV4dGVudCBjb250YWlucyBhbm90aGVyLlxuICpcbiAqIEFuIGV4dGVudCBpcyBkZWVtZWQgY29udGFpbmVkIGlmIGl0IGxpZXMgY29tcGxldGVseSB3aXRoaW4gdGhlIG90aGVyIGV4dGVudCxcbiAqIGluY2x1ZGluZyBpZiB0aGV5IHNoYXJlIG9uZSBvciBtb3JlIGVkZ2VzLlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgc2Vjb25kIGV4dGVudCBpcyBjb250YWluZWQgYnkgb3Igb24gdGhlIGVkZ2Ugb2YgdGhlXG4gKiAgICAgZmlyc3QuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250YWluc0V4dGVudChleHRlbnQxLCBleHRlbnQyKSB7XG4gICAgcmV0dXJuIChleHRlbnQxWzBdIDw9IGV4dGVudDJbMF0gJiZcbiAgICAgICAgZXh0ZW50MlsyXSA8PSBleHRlbnQxWzJdICYmXG4gICAgICAgIGV4dGVudDFbMV0gPD0gZXh0ZW50MlsxXSAmJlxuICAgICAgICBleHRlbnQyWzNdIDw9IGV4dGVudDFbM10pO1xufVxuLyoqXG4gKiBDaGVjayBpZiB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgaXMgY29udGFpbmVkIG9yIG9uIHRoZSBlZGdlIG9mIHRoZSBleHRlbnQuXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0geSBZIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgeCwgeSB2YWx1ZXMgYXJlIGNvbnRhaW5lZCBpbiB0aGUgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnNYWShleHRlbnQsIHgsIHkpIHtcbiAgICByZXR1cm4gZXh0ZW50WzBdIDw9IHggJiYgeCA8PSBleHRlbnRbMl0gJiYgZXh0ZW50WzFdIDw9IHkgJiYgeSA8PSBleHRlbnRbM107XG59XG4vKipcbiAqIEdldCB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gYSBjb29yZGluYXRlIGFuZCBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQvUmVsYXRpb25zaGlwLmpzXCIpLmRlZmF1bHR9IFRoZSByZWxhdGlvbnNoaXAgKGJpdHdpc2UgY29tcGFyZSB3aXRoXG4gKiAgICAgaW1wb3J0KFwiLi9leHRlbnQvUmVsYXRpb25zaGlwLmpzXCIpLlJlbGF0aW9uc2hpcCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb29yZGluYXRlUmVsYXRpb25zaGlwKGV4dGVudCwgY29vcmRpbmF0ZSkge1xuICAgIHZhciBtaW5YID0gZXh0ZW50WzBdO1xuICAgIHZhciBtaW5ZID0gZXh0ZW50WzFdO1xuICAgIHZhciBtYXhYID0gZXh0ZW50WzJdO1xuICAgIHZhciBtYXhZID0gZXh0ZW50WzNdO1xuICAgIHZhciB4ID0gY29vcmRpbmF0ZVswXTtcbiAgICB2YXIgeSA9IGNvb3JkaW5hdGVbMV07XG4gICAgdmFyIHJlbGF0aW9uc2hpcCA9IFJlbGF0aW9uc2hpcC5VTktOT1dOO1xuICAgIGlmICh4IDwgbWluWCkge1xuICAgICAgICByZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXAgfCBSZWxhdGlvbnNoaXAuTEVGVDtcbiAgICB9XG4gICAgZWxzZSBpZiAoeCA+IG1heFgpIHtcbiAgICAgICAgcmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwIHwgUmVsYXRpb25zaGlwLlJJR0hUO1xuICAgIH1cbiAgICBpZiAoeSA8IG1pblkpIHtcbiAgICAgICAgcmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwIHwgUmVsYXRpb25zaGlwLkJFTE9XO1xuICAgIH1cbiAgICBlbHNlIGlmICh5ID4gbWF4WSkge1xuICAgICAgICByZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXAgfCBSZWxhdGlvbnNoaXAuQUJPVkU7XG4gICAgfVxuICAgIGlmIChyZWxhdGlvbnNoaXAgPT09IFJlbGF0aW9uc2hpcC5VTktOT1dOKSB7XG4gICAgICAgIHJlbGF0aW9uc2hpcCA9IFJlbGF0aW9uc2hpcC5JTlRFUlNFQ1RJTkc7XG4gICAgfVxuICAgIHJldHVybiByZWxhdGlvbnNoaXA7XG59XG4vKipcbiAqIENyZWF0ZSBhbiBlbXB0eSBleHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEVtcHR5IGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVtcHR5KCkge1xuICAgIHJldHVybiBbSW5maW5pdHksIEluZmluaXR5LCAtSW5maW5pdHksIC1JbmZpbml0eV07XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBleHRlbnQgb3IgdXBkYXRlIHRoZSBwcm92aWRlZCBleHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWCBNaW5pbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWSBNaW5pbXVtIFkuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WCBNYXhpbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WSBNYXhpbXVtIFkuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCBvcHRfZXh0ZW50KSB7XG4gICAgaWYgKG9wdF9leHRlbnQpIHtcbiAgICAgICAgb3B0X2V4dGVudFswXSA9IG1pblg7XG4gICAgICAgIG9wdF9leHRlbnRbMV0gPSBtaW5ZO1xuICAgICAgICBvcHRfZXh0ZW50WzJdID0gbWF4WDtcbiAgICAgICAgb3B0X2V4dGVudFszXSA9IG1heFk7XG4gICAgICAgIHJldHVybiBvcHRfZXh0ZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFttaW5YLCBtaW5ZLCBtYXhYLCBtYXhZXTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBlbXB0eSBleHRlbnQgb3IgbWFrZSB0aGUgcHJvdmlkZWQgb25lIGVtcHR5LlxuICogQHBhcmFtIHtFeHRlbnQ9fSBvcHRfZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVFbXB0eShvcHRfZXh0ZW50KSB7XG4gICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlKEluZmluaXR5LCBJbmZpbml0eSwgLUluZmluaXR5LCAtSW5maW5pdHksIG9wdF9leHRlbnQpO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlKGNvb3JkaW5hdGUsIG9wdF9leHRlbnQpIHtcbiAgICB2YXIgeCA9IGNvb3JkaW5hdGVbMF07XG4gICAgdmFyIHkgPSBjb29yZGluYXRlWzFdO1xuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZSh4LCB5LCB4LCB5LCBvcHRfZXh0ZW50KTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtFeHRlbnQ9fSBvcHRfZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMsIG9wdF9leHRlbnQpIHtcbiAgICB2YXIgZXh0ZW50ID0gY3JlYXRlT3JVcGRhdGVFbXB0eShvcHRfZXh0ZW50KTtcbiAgICByZXR1cm4gZXh0ZW5kQ29vcmRpbmF0ZXMoZXh0ZW50LCBjb29yZGluYXRlcyk7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUZyb21GbGF0Q29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBvcHRfZXh0ZW50KSB7XG4gICAgdmFyIGV4dGVudCA9IGNyZWF0ZU9yVXBkYXRlRW1wdHkob3B0X2V4dGVudCk7XG4gICAgcmV0dXJuIGV4dGVuZEZsYXRDb29yZGluYXRlcyhleHRlbnQsIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gcmluZ3MgUmluZ3MuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUZyb21SaW5ncyhyaW5ncywgb3B0X2V4dGVudCkge1xuICAgIHZhciBleHRlbnQgPSBjcmVhdGVPclVwZGF0ZUVtcHR5KG9wdF9leHRlbnQpO1xuICAgIHJldHVybiBleHRlbmRSaW5ncyhleHRlbnQsIHJpbmdzKTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHR3byBleHRlbnRzIGFyZSBlcXVpdmFsZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gZXh0ZW50cyBhcmUgZXF1aXZhbGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhleHRlbnQxLCBleHRlbnQyKSB7XG4gICAgcmV0dXJuIChleHRlbnQxWzBdID09IGV4dGVudDJbMF0gJiZcbiAgICAgICAgZXh0ZW50MVsyXSA9PSBleHRlbnQyWzJdICYmXG4gICAgICAgIGV4dGVudDFbMV0gPT0gZXh0ZW50MlsxXSAmJlxuICAgICAgICBleHRlbnQxWzNdID09IGV4dGVudDJbM10pO1xufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdHdvIGV4dGVudHMgYXJlIGFwcHJveGltYXRlbHkgZXF1aXZhbGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZSBpbiBleHRlbnQgY29vcmRpbmF0ZSB1bml0cy5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gZXh0ZW50cyBkaWZmZXIgYnkgbGVzcyB0aGFuIHRoZSB0b2xlcmFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHByb3hpbWF0ZWx5RXF1YWxzKGV4dGVudDEsIGV4dGVudDIsIHRvbGVyYW5jZSkge1xuICAgIHJldHVybiAoTWF0aC5hYnMoZXh0ZW50MVswXSAtIGV4dGVudDJbMF0pIDwgdG9sZXJhbmNlICYmXG4gICAgICAgIE1hdGguYWJzKGV4dGVudDFbMl0gLSBleHRlbnQyWzJdKSA8IHRvbGVyYW5jZSAmJlxuICAgICAgICBNYXRoLmFicyhleHRlbnQxWzFdIC0gZXh0ZW50MlsxXSkgPCB0b2xlcmFuY2UgJiZcbiAgICAgICAgTWF0aC5hYnMoZXh0ZW50MVszXSAtIGV4dGVudDJbM10pIDwgdG9sZXJhbmNlKTtcbn1cbi8qKlxuICogTW9kaWZ5IGFuIGV4dGVudCB0byBpbmNsdWRlIGFub3RoZXIgZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgVGhlIGV4dGVudCB0byBiZSBtb2RpZmllZC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIFRoZSBleHRlbnQgdGhhdCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSBmaXJzdC5cbiAqIEByZXR1cm4ge0V4dGVudH0gQSByZWZlcmVuY2UgdG8gdGhlIGZpcnN0IChleHRlbmRlZCkgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgICBpZiAoZXh0ZW50MlswXSA8IGV4dGVudDFbMF0pIHtcbiAgICAgICAgZXh0ZW50MVswXSA9IGV4dGVudDJbMF07XG4gICAgfVxuICAgIGlmIChleHRlbnQyWzJdID4gZXh0ZW50MVsyXSkge1xuICAgICAgICBleHRlbnQxWzJdID0gZXh0ZW50MlsyXTtcbiAgICB9XG4gICAgaWYgKGV4dGVudDJbMV0gPCBleHRlbnQxWzFdKSB7XG4gICAgICAgIGV4dGVudDFbMV0gPSBleHRlbnQyWzFdO1xuICAgIH1cbiAgICBpZiAoZXh0ZW50MlszXSA+IGV4dGVudDFbM10pIHtcbiAgICAgICAgZXh0ZW50MVszXSA9IGV4dGVudDJbM107XG4gICAgfVxuICAgIHJldHVybiBleHRlbnQxO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBjb29yZGluYXRlKSB7XG4gICAgaWYgKGNvb3JkaW5hdGVbMF0gPCBleHRlbnRbMF0pIHtcbiAgICAgICAgZXh0ZW50WzBdID0gY29vcmRpbmF0ZVswXTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVbMF0gPiBleHRlbnRbMl0pIHtcbiAgICAgICAgZXh0ZW50WzJdID0gY29vcmRpbmF0ZVswXTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVbMV0gPCBleHRlbnRbMV0pIHtcbiAgICAgICAgZXh0ZW50WzFdID0gY29vcmRpbmF0ZVsxXTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVbMV0gPiBleHRlbnRbM10pIHtcbiAgICAgICAgZXh0ZW50WzNdID0gY29vcmRpbmF0ZVsxXTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRDb29yZGluYXRlcyhleHRlbnQsIGNvb3JkaW5hdGVzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBleHRlbmRDb29yZGluYXRlKGV4dGVudCwgY29vcmRpbmF0ZXNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW50O1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZEZsYXRDb29yZGluYXRlcyhleHRlbnQsIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgZXh0ZW5kWFkoZXh0ZW50LCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdKTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVudDtcbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IHJpbmdzIFJpbmdzLlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRSaW5ncyhleHRlbnQsIHJpbmdzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcmluZ3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBleHRlbmRDb29yZGluYXRlcyhleHRlbnQsIHJpbmdzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVudDtcbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZFhZKGV4dGVudCwgeCwgeSkge1xuICAgIGV4dGVudFswXSA9IE1hdGgubWluKGV4dGVudFswXSwgeCk7XG4gICAgZXh0ZW50WzFdID0gTWF0aC5taW4oZXh0ZW50WzFdLCB5KTtcbiAgICBleHRlbnRbMl0gPSBNYXRoLm1heChleHRlbnRbMl0sIHgpO1xuICAgIGV4dGVudFszXSA9IE1hdGgubWF4KGV4dGVudFszXSwgeSk7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gY2FsbHMgYGNhbGxiYWNrYCBmb3IgZWFjaCBjb3JuZXIgb2YgdGhlIGV4dGVudC4gSWYgdGhlXG4gKiBjYWxsYmFjayByZXR1cm5zIGEgdHJ1dGh5IHZhbHVlIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRoYXQgdmFsdWVcbiAqIGltbWVkaWF0ZWx5LiBPdGhlcndpc2UgdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IFN9IGNhbGxiYWNrIENhbGxiYWNrLlxuICogQHJldHVybiB7U3xib29sZWFufSBWYWx1ZS5cbiAqIEB0ZW1wbGF0ZSBTXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoQ29ybmVyKGV4dGVudCwgY2FsbGJhY2spIHtcbiAgICB2YXIgdmFsO1xuICAgIHZhbCA9IGNhbGxiYWNrKGdldEJvdHRvbUxlZnQoZXh0ZW50KSk7XG4gICAgaWYgKHZhbCkge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cbiAgICB2YWwgPSBjYWxsYmFjayhnZXRCb3R0b21SaWdodChleHRlbnQpKTtcbiAgICBpZiAodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICAgIHZhbCA9IGNhbGxiYWNrKGdldFRvcFJpZ2h0KGV4dGVudCkpO1xuICAgIGlmICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gICAgdmFsID0gY2FsbGJhY2soZ2V0VG9wTGVmdChleHRlbnQpKTtcbiAgICBpZiAodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogR2V0IHRoZSBzaXplIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJlYShleHRlbnQpIHtcbiAgICB2YXIgYXJlYSA9IDA7XG4gICAgaWYgKCFpc0VtcHR5KGV4dGVudCkpIHtcbiAgICAgICAgYXJlYSA9IGdldFdpZHRoKGV4dGVudCkgKiBnZXRIZWlnaHQoZXh0ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIGFyZWE7XG59XG4vKipcbiAqIEdldCB0aGUgYm90dG9tIGxlZnQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBCb3R0b20gbGVmdCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm90dG9tTGVmdChleHRlbnQpIHtcbiAgICByZXR1cm4gW2V4dGVudFswXSwgZXh0ZW50WzFdXTtcbn1cbi8qKlxuICogR2V0IHRoZSBib3R0b20gcmlnaHQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBCb3R0b20gcmlnaHQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJvdHRvbVJpZ2h0KGV4dGVudCkge1xuICAgIHJldHVybiBbZXh0ZW50WzJdLCBleHRlbnRbMV1dO1xufVxuLyoqXG4gKiBHZXQgdGhlIGNlbnRlciBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENlbnRlci5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENlbnRlcihleHRlbnQpIHtcbiAgICByZXR1cm4gWyhleHRlbnRbMF0gKyBleHRlbnRbMl0pIC8gMiwgKGV4dGVudFsxXSArIGV4dGVudFszXSkgLyAyXTtcbn1cbi8qKlxuICogR2V0IGEgY29ybmVyIGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50L0Nvcm5lci5qc1wiKS5kZWZhdWx0fSBjb3JuZXIgQ29ybmVyLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvcm5lciBjb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29ybmVyKGV4dGVudCwgY29ybmVyKSB7XG4gICAgdmFyIGNvb3JkaW5hdGU7XG4gICAgaWYgKGNvcm5lciA9PT0gQ29ybmVyLkJPVFRPTV9MRUZUKSB7XG4gICAgICAgIGNvb3JkaW5hdGUgPSBnZXRCb3R0b21MZWZ0KGV4dGVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvcm5lciA9PT0gQ29ybmVyLkJPVFRPTV9SSUdIVCkge1xuICAgICAgICBjb29yZGluYXRlID0gZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29ybmVyID09PSBDb3JuZXIuVE9QX0xFRlQpIHtcbiAgICAgICAgY29vcmRpbmF0ZSA9IGdldFRvcExlZnQoZXh0ZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29ybmVyID09PSBDb3JuZXIuVE9QX1JJR0hUKSB7XG4gICAgICAgIGNvb3JkaW5hdGUgPSBnZXRUb3BSaWdodChleHRlbnQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXNzZXJ0KGZhbHNlLCAxMyk7IC8vIEludmFsaWQgY29ybmVyXG4gICAgfVxuICAgIHJldHVybiBjb29yZGluYXRlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7bnVtYmVyfSBFbmxhcmdlZCBhcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW5sYXJnZWRBcmVhKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgICB2YXIgbWluWCA9IE1hdGgubWluKGV4dGVudDFbMF0sIGV4dGVudDJbMF0pO1xuICAgIHZhciBtaW5ZID0gTWF0aC5taW4oZXh0ZW50MVsxXSwgZXh0ZW50MlsxXSk7XG4gICAgdmFyIG1heFggPSBNYXRoLm1heChleHRlbnQxWzJdLCBleHRlbnQyWzJdKTtcbiAgICB2YXIgbWF4WSA9IE1hdGgubWF4KGV4dGVudDFbM10sIGV4dGVudDJbM10pO1xuICAgIHJldHVybiAobWF4WCAtIG1pblgpICogKG1heFkgLSBtaW5ZKTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFNpemUuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JWaWV3QW5kU2l6ZShjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBzaXplLCBvcHRfZXh0ZW50KSB7XG4gICAgdmFyIGR4ID0gKHJlc29sdXRpb24gKiBzaXplWzBdKSAvIDI7XG4gICAgdmFyIGR5ID0gKHJlc29sdXRpb24gKiBzaXplWzFdKSAvIDI7XG4gICAgdmFyIGNvc1JvdGF0aW9uID0gTWF0aC5jb3Mocm90YXRpb24pO1xuICAgIHZhciBzaW5Sb3RhdGlvbiA9IE1hdGguc2luKHJvdGF0aW9uKTtcbiAgICB2YXIgeENvcyA9IGR4ICogY29zUm90YXRpb247XG4gICAgdmFyIHhTaW4gPSBkeCAqIHNpblJvdGF0aW9uO1xuICAgIHZhciB5Q29zID0gZHkgKiBjb3NSb3RhdGlvbjtcbiAgICB2YXIgeVNpbiA9IGR5ICogc2luUm90YXRpb247XG4gICAgdmFyIHggPSBjZW50ZXJbMF07XG4gICAgdmFyIHkgPSBjZW50ZXJbMV07XG4gICAgdmFyIHgwID0geCAtIHhDb3MgKyB5U2luO1xuICAgIHZhciB4MSA9IHggLSB4Q29zIC0geVNpbjtcbiAgICB2YXIgeDIgPSB4ICsgeENvcyAtIHlTaW47XG4gICAgdmFyIHgzID0geCArIHhDb3MgKyB5U2luO1xuICAgIHZhciB5MCA9IHkgLSB4U2luIC0geUNvcztcbiAgICB2YXIgeTEgPSB5IC0geFNpbiArIHlDb3M7XG4gICAgdmFyIHkyID0geSArIHhTaW4gKyB5Q29zO1xuICAgIHZhciB5MyA9IHkgKyB4U2luIC0geUNvcztcbiAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUoTWF0aC5taW4oeDAsIHgxLCB4MiwgeDMpLCBNYXRoLm1pbih5MCwgeTEsIHkyLCB5MyksIE1hdGgubWF4KHgwLCB4MSwgeDIsIHgzKSwgTWF0aC5tYXgoeTAsIHkxLCB5MiwgeTMpLCBvcHRfZXh0ZW50KTtcbn1cbi8qKlxuICogR2V0IHRoZSBoZWlnaHQgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEhlaWdodC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEhlaWdodChleHRlbnQpIHtcbiAgICByZXR1cm4gZXh0ZW50WzNdIC0gZXh0ZW50WzFdO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7bnVtYmVyfSBJbnRlcnNlY3Rpb24gYXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyc2VjdGlvbkFyZWEoZXh0ZW50MSwgZXh0ZW50Mikge1xuICAgIHZhciBpbnRlcnNlY3Rpb24gPSBnZXRJbnRlcnNlY3Rpb24oZXh0ZW50MSwgZXh0ZW50Mik7XG4gICAgcmV0dXJuIGdldEFyZWEoaW50ZXJzZWN0aW9uKTtcbn1cbi8qKlxuICogR2V0IHRoZSBpbnRlcnNlY3Rpb24gb2YgdHdvIGV4dGVudHMuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHBhcmFtIHtFeHRlbnQ9fSBvcHRfZXh0ZW50IE9wdGlvbmFsIGV4dGVudCB0byBwb3B1bGF0ZSB3aXRoIGludGVyc2VjdGlvbi5cbiAqIEByZXR1cm4ge0V4dGVudH0gSW50ZXJzZWN0aW5nIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyc2VjdGlvbihleHRlbnQxLCBleHRlbnQyLCBvcHRfZXh0ZW50KSB7XG4gICAgdmFyIGludGVyc2VjdGlvbiA9IG9wdF9leHRlbnQgPyBvcHRfZXh0ZW50IDogY3JlYXRlRW1wdHkoKTtcbiAgICBpZiAoaW50ZXJzZWN0cyhleHRlbnQxLCBleHRlbnQyKSkge1xuICAgICAgICBpZiAoZXh0ZW50MVswXSA+IGV4dGVudDJbMF0pIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblswXSA9IGV4dGVudDFbMF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bMF0gPSBleHRlbnQyWzBdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHRlbnQxWzFdID4gZXh0ZW50MlsxXSkge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzFdID0gZXh0ZW50MVsxXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblsxXSA9IGV4dGVudDJbMV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4dGVudDFbMl0gPCBleHRlbnQyWzJdKSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bMl0gPSBleHRlbnQxWzJdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzJdID0gZXh0ZW50MlsyXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXh0ZW50MVszXSA8IGV4dGVudDJbM10pIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblszXSA9IGV4dGVudDFbM107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bM10gPSBleHRlbnQyWzNdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjcmVhdGVPclVwZGF0ZUVtcHR5KGludGVyc2VjdGlvbik7XG4gICAgfVxuICAgIHJldHVybiBpbnRlcnNlY3Rpb247XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBNYXJnaW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXJnaW4oZXh0ZW50KSB7XG4gICAgcmV0dXJuIGdldFdpZHRoKGV4dGVudCkgKyBnZXRIZWlnaHQoZXh0ZW50KTtcbn1cbi8qKlxuICogR2V0IHRoZSBzaXplICh3aWR0aCwgaGVpZ2h0KSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gVGhlIGV4dGVudCBzaXplLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2l6ZShleHRlbnQpIHtcbiAgICByZXR1cm4gW2V4dGVudFsyXSAtIGV4dGVudFswXSwgZXh0ZW50WzNdIC0gZXh0ZW50WzFdXTtcbn1cbi8qKlxuICogR2V0IHRoZSB0b3AgbGVmdCBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRvcCBsZWZ0IGNvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb3BMZWZ0KGV4dGVudCkge1xuICAgIHJldHVybiBbZXh0ZW50WzBdLCBleHRlbnRbM11dO1xufVxuLyoqXG4gKiBHZXQgdGhlIHRvcCByaWdodCBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRvcCByaWdodCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9wUmlnaHQoZXh0ZW50KSB7XG4gICAgcmV0dXJuIFtleHRlbnRbMl0sIGV4dGVudFszXV07XG59XG4vKipcbiAqIEdldCB0aGUgd2lkdGggb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFdpZHRoLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2lkdGgoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGV4dGVudFsyXSAtIGV4dGVudFswXTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lIGlmIG9uZSBleHRlbnQgaW50ZXJzZWN0cyBhbm90aGVyLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdHdvIGV4dGVudHMgaW50ZXJzZWN0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0cyhleHRlbnQxLCBleHRlbnQyKSB7XG4gICAgcmV0dXJuIChleHRlbnQxWzBdIDw9IGV4dGVudDJbMl0gJiZcbiAgICAgICAgZXh0ZW50MVsyXSA+PSBleHRlbnQyWzBdICYmXG4gICAgICAgIGV4dGVudDFbMV0gPD0gZXh0ZW50MlszXSAmJlxuICAgICAgICBleHRlbnQxWzNdID49IGV4dGVudDJbMV0pO1xufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYW4gZXh0ZW50IGlzIGVtcHR5LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBJcyBlbXB0eS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHkoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGV4dGVudFsyXSA8IGV4dGVudFswXSB8fCBleHRlbnRbM10gPCBleHRlbnRbMV07XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnQ9fSBvcHRfZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmV0dXJuT3JVcGRhdGUoZXh0ZW50LCBvcHRfZXh0ZW50KSB7XG4gICAgaWYgKG9wdF9leHRlbnQpIHtcbiAgICAgICAgb3B0X2V4dGVudFswXSA9IGV4dGVudFswXTtcbiAgICAgICAgb3B0X2V4dGVudFsxXSA9IGV4dGVudFsxXTtcbiAgICAgICAgb3B0X2V4dGVudFsyXSA9IGV4dGVudFsyXTtcbiAgICAgICAgb3B0X2V4dGVudFszXSA9IGV4dGVudFszXTtcbiAgICAgICAgcmV0dXJuIG9wdF9leHRlbnQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZXh0ZW50O1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZUZyb21DZW50ZXIoZXh0ZW50LCB2YWx1ZSkge1xuICAgIHZhciBkZWx0YVggPSAoKGV4dGVudFsyXSAtIGV4dGVudFswXSkgLyAyKSAqICh2YWx1ZSAtIDEpO1xuICAgIHZhciBkZWx0YVkgPSAoKGV4dGVudFszXSAtIGV4dGVudFsxXSkgLyAyKSAqICh2YWx1ZSAtIDEpO1xuICAgIGV4dGVudFswXSAtPSBkZWx0YVg7XG4gICAgZXh0ZW50WzJdICs9IGRlbHRhWDtcbiAgICBleHRlbnRbMV0gLT0gZGVsdGFZO1xuICAgIGV4dGVudFszXSArPSBkZWx0YVk7XG59XG4vKipcbiAqIERldGVybWluZSBpZiB0aGUgc2VnbWVudCBiZXR3ZWVuIHR3byBjb29yZGluYXRlcyBpbnRlcnNlY3RzIChjcm9zc2VzLFxuICogdG91Y2hlcywgb3IgaXMgY29udGFpbmVkIGJ5KSB0aGUgcHJvdmlkZWQgZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBUaGUgZXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gc3RhcnQgU2VnbWVudCBzdGFydCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZW5kIFNlZ21lbnQgZW5kIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgc2VnbWVudCBpbnRlcnNlY3RzIHRoZSBleHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzU2VnbWVudChleHRlbnQsIHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgaW50ZXJzZWN0cyA9IGZhbHNlO1xuICAgIHZhciBzdGFydFJlbCA9IGNvb3JkaW5hdGVSZWxhdGlvbnNoaXAoZXh0ZW50LCBzdGFydCk7XG4gICAgdmFyIGVuZFJlbCA9IGNvb3JkaW5hdGVSZWxhdGlvbnNoaXAoZXh0ZW50LCBlbmQpO1xuICAgIGlmIChzdGFydFJlbCA9PT0gUmVsYXRpb25zaGlwLklOVEVSU0VDVElORyB8fFxuICAgICAgICBlbmRSZWwgPT09IFJlbGF0aW9uc2hpcC5JTlRFUlNFQ1RJTkcpIHtcbiAgICAgICAgaW50ZXJzZWN0cyA9IHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgbWluWCA9IGV4dGVudFswXTtcbiAgICAgICAgdmFyIG1pblkgPSBleHRlbnRbMV07XG4gICAgICAgIHZhciBtYXhYID0gZXh0ZW50WzJdO1xuICAgICAgICB2YXIgbWF4WSA9IGV4dGVudFszXTtcbiAgICAgICAgdmFyIHN0YXJ0WCA9IHN0YXJ0WzBdO1xuICAgICAgICB2YXIgc3RhcnRZID0gc3RhcnRbMV07XG4gICAgICAgIHZhciBlbmRYID0gZW5kWzBdO1xuICAgICAgICB2YXIgZW5kWSA9IGVuZFsxXTtcbiAgICAgICAgdmFyIHNsb3BlID0gKGVuZFkgLSBzdGFydFkpIC8gKGVuZFggLSBzdGFydFgpO1xuICAgICAgICB2YXIgeCA9IHZvaWQgMCwgeSA9IHZvaWQgMDtcbiAgICAgICAgaWYgKCEhKGVuZFJlbCAmIFJlbGF0aW9uc2hpcC5BQk9WRSkgJiYgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5BQk9WRSkpIHtcbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgdG9wXG4gICAgICAgICAgICB4ID0gZW5kWCAtIChlbmRZIC0gbWF4WSkgLyBzbG9wZTtcbiAgICAgICAgICAgIGludGVyc2VjdHMgPSB4ID49IG1pblggJiYgeCA8PSBtYXhYO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaW50ZXJzZWN0cyAmJlxuICAgICAgICAgICAgISEoZW5kUmVsICYgUmVsYXRpb25zaGlwLlJJR0hUKSAmJlxuICAgICAgICAgICAgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5SSUdIVCkpIHtcbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgcmlnaHRcbiAgICAgICAgICAgIHkgPSBlbmRZIC0gKGVuZFggLSBtYXhYKSAqIHNsb3BlO1xuICAgICAgICAgICAgaW50ZXJzZWN0cyA9IHkgPj0gbWluWSAmJiB5IDw9IG1heFk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbnRlcnNlY3RzICYmXG4gICAgICAgICAgICAhIShlbmRSZWwgJiBSZWxhdGlvbnNoaXAuQkVMT1cpICYmXG4gICAgICAgICAgICAhKHN0YXJ0UmVsICYgUmVsYXRpb25zaGlwLkJFTE9XKSkge1xuICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyBib3R0b21cbiAgICAgICAgICAgIHggPSBlbmRYIC0gKGVuZFkgLSBtaW5ZKSAvIHNsb3BlO1xuICAgICAgICAgICAgaW50ZXJzZWN0cyA9IHggPj0gbWluWCAmJiB4IDw9IG1heFg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbnRlcnNlY3RzICYmXG4gICAgICAgICAgICAhIShlbmRSZWwgJiBSZWxhdGlvbnNoaXAuTEVGVCkgJiZcbiAgICAgICAgICAgICEoc3RhcnRSZWwgJiBSZWxhdGlvbnNoaXAuTEVGVCkpIHtcbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgbGVmdFxuICAgICAgICAgICAgeSA9IGVuZFkgLSAoZW5kWCAtIG1pblgpICogc2xvcGU7XG4gICAgICAgICAgICBpbnRlcnNlY3RzID0geSA+PSBtaW5ZICYmIHkgPD0gbWF4WTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaW50ZXJzZWN0cztcbn1cbi8qKlxuICogQXBwbHkgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gdGhlIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqIENhbGxlZCB3aXRoIGBbbWluWCwgbWluWSwgbWF4WCwgbWF4WV1gIGV4dGVudCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBEZXN0aW5hdGlvbiBleHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9zdG9wcyBOdW1iZXIgb2Ygc3RvcHMgcGVyIHNpZGUgdXNlZCBmb3IgdGhlIHRyYW5zZm9ybS5cbiAqIEJ5IGRlZmF1bHQgb25seSB0aGUgY29ybmVycyBhcmUgdXNlZC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlUcmFuc2Zvcm0oZXh0ZW50LCB0cmFuc2Zvcm1Gbiwgb3B0X2V4dGVudCwgb3B0X3N0b3BzKSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gW107XG4gICAgaWYgKG9wdF9zdG9wcyA+IDEpIHtcbiAgICAgICAgdmFyIHdpZHRoID0gZXh0ZW50WzJdIC0gZXh0ZW50WzBdO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gZXh0ZW50WzNdIC0gZXh0ZW50WzFdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wdF9zdG9wczsgKytpKSB7XG4gICAgICAgICAgICBjb29yZGluYXRlcy5wdXNoKGV4dGVudFswXSArICh3aWR0aCAqIGkpIC8gb3B0X3N0b3BzLCBleHRlbnRbMV0sIGV4dGVudFsyXSwgZXh0ZW50WzFdICsgKGhlaWdodCAqIGkpIC8gb3B0X3N0b3BzLCBleHRlbnRbMl0gLSAod2lkdGggKiBpKSAvIG9wdF9zdG9wcywgZXh0ZW50WzNdLCBleHRlbnRbMF0sIGV4dGVudFszXSAtIChoZWlnaHQgKiBpKSAvIG9wdF9zdG9wcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvb3JkaW5hdGVzID0gW1xuICAgICAgICAgICAgZXh0ZW50WzBdLFxuICAgICAgICAgICAgZXh0ZW50WzFdLFxuICAgICAgICAgICAgZXh0ZW50WzJdLFxuICAgICAgICAgICAgZXh0ZW50WzFdLFxuICAgICAgICAgICAgZXh0ZW50WzJdLFxuICAgICAgICAgICAgZXh0ZW50WzNdLFxuICAgICAgICAgICAgZXh0ZW50WzBdLFxuICAgICAgICAgICAgZXh0ZW50WzNdLFxuICAgICAgICBdO1xuICAgIH1cbiAgICB0cmFuc2Zvcm1Gbihjb29yZGluYXRlcywgY29vcmRpbmF0ZXMsIDIpO1xuICAgIHZhciB4cyA9IFtdO1xuICAgIHZhciB5cyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7XG4gICAgICAgIHhzLnB1c2goY29vcmRpbmF0ZXNbaV0pO1xuICAgICAgICB5cy5wdXNoKGNvb3JkaW5hdGVzW2kgKyAxXSk7XG4gICAgfVxuICAgIHJldHVybiBfYm91bmRpbmdFeHRlbnRYWXMoeHMsIHlzLCBvcHRfZXh0ZW50KTtcbn1cbi8qKlxuICogTW9kaWZpZXMgdGhlIHByb3ZpZGVkIGV4dGVudCBpbi1wbGFjZSB0byBiZSB3aXRoaW4gdGhlIHJlYWwgd29ybGRcbiAqIGV4dGVudC5cbiAqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uXG4gKiBAcmV0dXJuIHtFeHRlbnR9IFRoZSBleHRlbnQgd2l0aGluIHRoZSByZWFsIHdvcmxkIGV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdyYXBYKGV4dGVudCwgcHJvamVjdGlvbikge1xuICAgIHZhciBwcm9qZWN0aW9uRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICB2YXIgY2VudGVyID0gZ2V0Q2VudGVyKGV4dGVudCk7XG4gICAgaWYgKHByb2plY3Rpb24uY2FuV3JhcFgoKSAmJlxuICAgICAgICAoY2VudGVyWzBdIDwgcHJvamVjdGlvbkV4dGVudFswXSB8fCBjZW50ZXJbMF0gPj0gcHJvamVjdGlvbkV4dGVudFsyXSkpIHtcbiAgICAgICAgdmFyIHdvcmxkV2lkdGggPSBnZXRXaWR0aChwcm9qZWN0aW9uRXh0ZW50KTtcbiAgICAgICAgdmFyIHdvcmxkc0F3YXkgPSBNYXRoLmZsb29yKChjZW50ZXJbMF0gLSBwcm9qZWN0aW9uRXh0ZW50WzBdKSAvIHdvcmxkV2lkdGgpO1xuICAgICAgICB2YXIgb2Zmc2V0ID0gd29ybGRzQXdheSAqIHdvcmxkV2lkdGg7XG4gICAgICAgIGV4dGVudFswXSAtPSBvZmZzZXQ7XG4gICAgICAgIGV4dGVudFsyXSAtPSBvZmZzZXQ7XG4gICAgfVxuICAgIHJldHVybiBleHRlbnQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1leHRlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V4dGVudC9Db3JuZXJcbiAqL1xuLyoqXG4gKiBFeHRlbnQgY29ybmVyLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIEJPVFRPTV9MRUZUOiAnYm90dG9tLWxlZnQnLFxuICAgIEJPVFRPTV9SSUdIVDogJ2JvdHRvbS1yaWdodCcsXG4gICAgVE9QX0xFRlQ6ICd0b3AtbGVmdCcsXG4gICAgVE9QX1JJR0hUOiAndG9wLXJpZ2h0Jyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db3JuZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V4dGVudC9SZWxhdGlvbnNoaXBcbiAqL1xuLyoqXG4gKiBSZWxhdGlvbnNoaXAgdG8gYW4gZXh0ZW50LlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIFVOS05PV046IDAsXG4gICAgSU5URVJTRUNUSU5HOiAxLFxuICAgIEFCT1ZFOiAyLFxuICAgIFJJR0hUOiA0LFxuICAgIEJFTE9XOiA4LFxuICAgIExFRlQ6IDE2LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlbGF0aW9uc2hpcC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZnVuY3Rpb25zXG4gKi9cbmltcG9ydCB7IGVxdWFscyBhcyBhcnJheUVxdWFscyB9IGZyb20gJy4vYXJyYXkuanMnO1xuLyoqXG4gKiBBbHdheXMgcmV0dXJucyB0cnVlLlxuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBUUlVFKCkge1xuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBBbHdheXMgcmV0dXJucyBmYWxzZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBmYWxzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEZBTFNFKCkge1xuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogQSByZXVzYWJsZSBmdW5jdGlvbiwgdXNlZCBlLmcuIGFzIGEgZGVmYXVsdCBmb3IgY2FsbGJhY2tzLlxuICpcbiAqIEByZXR1cm4ge3ZvaWR9IE5vdGhpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBWT0lEKCkgeyB9XG4vKipcbiAqIFdyYXAgYSBmdW5jdGlvbiBpbiBhbm90aGVyIGZ1bmN0aW9uIHRoYXQgcmVtZW1iZXJzIHRoZSBsYXN0IHJldHVybi4gIElmIHRoZVxuICogcmV0dXJuZWQgZnVuY3Rpb24gaXMgY2FsbGVkIHR3aWNlIGluIGEgcm93IHdpdGggdGhlIHNhbWUgYXJndW1lbnRzIGFuZCB0aGUgc2FtZVxuICogdGhpcyBvYmplY3QsIGl0IHdpbGwgcmV0dXJuIHRoZSB2YWx1ZSBmcm9tIHRoZSBmaXJzdCBjYWxsIGluIHRoZSBzZWNvbmQgY2FsbC5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLmFueSk6IFJldHVyblR5cGV9IGZuIFRoZSBmdW5jdGlvbiB0byBtZW1vaXplLlxuICogQHJldHVybiB7ZnVuY3Rpb24oLi4uYW55KTogUmV0dXJuVHlwZX0gVGhlIG1lbW9pemVkIGZ1bmN0aW9uLlxuICogQHRlbXBsYXRlIFJldHVyblR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lbW9pemVPbmUoZm4pIHtcbiAgICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gICAgLyoqIEB0eXBlIHtSZXR1cm5UeXBlfSAqL1xuICAgIHZhciBsYXN0UmVzdWx0O1xuICAgIC8qKiBAdHlwZSB7QXJyYXk8YW55Pn0gKi9cbiAgICB2YXIgbGFzdEFyZ3M7XG4gICAgdmFyIGxhc3RUaGlzO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBuZXh0QXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICAgIGlmICghY2FsbGVkIHx8IHRoaXMgIT09IGxhc3RUaGlzIHx8ICFhcnJheUVxdWFscyhuZXh0QXJncywgbGFzdEFyZ3MpKSB7XG4gICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgICAgICAgICAgbGFzdEFyZ3MgPSBuZXh0QXJncztcbiAgICAgICAgICAgIGxhc3RSZXN1bHQgPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mdW5jdGlvbnMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vR2VvbWV0cnlMYXlvdXRcbiAqL1xuLyoqXG4gKiBUaGUgY29vcmRpbmF0ZSBsYXlvdXQgZm9yIGdlb21ldHJpZXMsIGluZGljYXRpbmcgd2hldGhlciBhIDNyZCBvciA0dGggeiAoJ1onKVxuICogb3IgbWVhc3VyZSAoJ00nKSBjb29yZGluYXRlIGlzIGF2YWlsYWJsZS4gU3VwcG9ydGVkIHZhbHVlcyBhcmUgYCdYWSdgLFxuICogYCdYWVonYCwgYCdYWU0nYCwgYCdYWVpNJ2AuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgWFk6ICdYWScsXG4gICAgWFlaOiAnWFlaJyxcbiAgICBYWU06ICdYWU0nLFxuICAgIFhZWk06ICdYWVpNJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1HZW9tZXRyeUxheW91dC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9HZW9tZXRyeVR5cGVcbiAqL1xuLyoqXG4gKiBUaGUgZ2VvbWV0cnkgdHlwZS4gT25lIG9mIGAnUG9pbnQnYCwgYCdMaW5lU3RyaW5nJ2AsIGAnTGluZWFyUmluZydgLFxuICogYCdQb2x5Z29uJ2AsIGAnTXVsdGlQb2ludCdgLCBgJ011bHRpTGluZVN0cmluZydgLCBgJ011bHRpUG9seWdvbidgLFxuICogYCdHZW9tZXRyeUNvbGxlY3Rpb24nYCwgYCdDaXJjbGUnYC5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBQT0lOVDogJ1BvaW50JyxcbiAgICBMSU5FX1NUUklORzogJ0xpbmVTdHJpbmcnLFxuICAgIExJTkVBUl9SSU5HOiAnTGluZWFyUmluZycsXG4gICAgUE9MWUdPTjogJ1BvbHlnb24nLFxuICAgIE1VTFRJX1BPSU5UOiAnTXVsdGlQb2ludCcsXG4gICAgTVVMVElfTElORV9TVFJJTkc6ICdNdWx0aUxpbmVTdHJpbmcnLFxuICAgIE1VTFRJX1BPTFlHT046ICdNdWx0aVBvbHlnb24nLFxuICAgIEdFT01FVFJZX0NPTExFQ1RJT046ICdHZW9tZXRyeUNvbGxlY3Rpb24nLFxuICAgIENJUkNMRTogJ0NpcmNsZScsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R2VvbWV0cnlUeXBlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9Qb2ludFxuICovXG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBTaW1wbGVHZW9tZXRyeSBmcm9tICcuL1NpbXBsZUdlb21ldHJ5LmpzJztcbmltcG9ydCB7IGNvbnRhaW5zWFksIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZGVmbGF0ZUNvb3JkaW5hdGUgfSBmcm9tICcuL2ZsYXQvZGVmbGF0ZS5qcyc7XG5pbXBvcnQgeyBzcXVhcmVkRGlzdGFuY2UgYXMgc3F1YXJlZER4IH0gZnJvbSAnLi4vbWF0aC5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFBvaW50IGdlb21ldHJ5LlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFBvaW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQb2ludCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHQ9fSBvcHRfbGF5b3V0IExheW91dC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQb2ludChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zZXRDb29yZGluYXRlcyhjb29yZGluYXRlcywgb3B0X2xheW91dCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZSBhIGNvbXBsZXRlIGNvcHkgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4geyFQb2ludH0gQ2xvbmUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBvaW50ID0gbmV3IFBvaW50KHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCksIHRoaXMubGF5b3V0KTtcbiAgICAgICAgcG9pbnQuYXBwbHlQcm9wZXJ0aWVzKHRoaXMpO1xuICAgICAgICByZXR1cm4gcG9pbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5jbG9zZXN0UG9pbnRYWSA9IGZ1bmN0aW9uICh4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgICAgIHZhciBzcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRHgoeCwgeSwgZmxhdENvb3JkaW5hdGVzWzBdLCBmbGF0Q29vcmRpbmF0ZXNbMV0pO1xuICAgICAgICBpZiAoc3F1YXJlZERpc3RhbmNlIDwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgICAgICB2YXIgc3RyaWRlID0gdGhpcy5zdHJpZGU7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgICAgICAgIHJldHVybiBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5nZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmZsYXRDb29yZGluYXRlcyA/IFtdIDogdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKi9cbiAgICBQb2ludC5wcm90b3R5cGUuY29tcHV0ZUV4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIGV4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHR5cGUgb2YgdGhpcyBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5VHlwZS5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeSB0eXBlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2ludC5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEdlb21ldHJ5VHlwZS5QT0lOVDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRlc3QgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgcGFzc2VkIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2ludC5wcm90b3R5cGUuaW50ZXJzZWN0c0V4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5zWFkoZXh0ZW50LCB0aGlzLmZsYXRDb29yZGluYXRlc1swXSwgdGhpcy5mbGF0Q29vcmRpbmF0ZXNbMV0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshQXJyYXk8Kj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0PX0gb3B0X2xheW91dCBMYXlvdXQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgICAgICB0aGlzLnNldExheW91dChvcHRfbGF5b3V0LCBjb29yZGluYXRlcywgMCk7XG4gICAgICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZGVmbGF0ZUNvb3JkaW5hdGUodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIGNvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgcmV0dXJuIFBvaW50O1xufShTaW1wbGVHZW9tZXRyeSkpO1xuZXhwb3J0IGRlZmF1bHQgUG9pbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb2ludC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vR2VvbWV0cnlcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBVbml0cyBmcm9tICcuLi9wcm9qL1VuaXRzLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIH0gZnJvbSAnLi4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IGNyZWF0ZUVtcHR5LCBjcmVhdGVPclVwZGF0ZUVtcHR5LCBnZXRIZWlnaHQsIHJldHVybk9yVXBkYXRlLCB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBnZXQgYXMgZ2V0UHJvamVjdGlvbiwgZ2V0VHJhbnNmb3JtIH0gZnJvbSAnLi4vcHJvai5qcyc7XG5pbXBvcnQgeyBtZW1vaXplT25lIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybTJEIH0gZnJvbSAnLi9mbGF0L3RyYW5zZm9ybS5qcyc7XG4vKipcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICovXG52YXIgdG1wVHJhbnNmb3JtID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEJhc2UgY2xhc3MgZm9yIHZlY3RvciBnZW9tZXRyaWVzLlxuICpcbiAqIFRvIGdldCBub3RpZmllZCBvZiBjaGFuZ2VzIHRvIHRoZSBnZW9tZXRyeSwgcmVnaXN0ZXIgYSBsaXN0ZW5lciBmb3IgdGhlXG4gKiBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IG9uIHlvdXIgZ2VvbWV0cnkgaW5zdGFuY2UuXG4gKlxuICogQGFic3RyYWN0XG4gKiBAYXBpXG4gKi9cbnZhciBHZW9tZXRyeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR2VvbWV0cnksIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gR2VvbWV0cnkoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmV4dGVudF8gPSBjcmVhdGVFbXB0eSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmV4dGVudFJldmlzaW9uXyA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlSZXZpc2lvbiA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgYSB0cmFuc2Zvcm1lZCBhbmQgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgICAgICogQGFic3RyYWN0XG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXZpc2lvbiBUaGUgZ2VvbWV0cnkgcmV2aXNpb24uXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IFtvcHRfdHJhbnNmb3JtXSBPcHRpb25hbCB0cmFuc2Zvcm0gZnVuY3Rpb24uXG4gICAgICAgICAqIEByZXR1cm4ge0dlb21ldHJ5fSBTaW1wbGlmaWVkIGdlb21ldHJ5LlxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc2ltcGxpZnlUcmFuc2Zvcm1lZEludGVybmFsID0gbWVtb2l6ZU9uZShmdW5jdGlvbiAocmV2aXNpb24sIHNxdWFyZWRUb2xlcmFuY2UsIG9wdF90cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGlmICghb3B0X3RyYW5zZm9ybSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNpbXBsaWZpZWRHZW9tZXRyeShzcXVhcmVkVG9sZXJhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjbG9uZSA9IHRoaXMuY2xvbmUoKTtcbiAgICAgICAgICAgIGNsb25lLmFwcGx5VHJhbnNmb3JtKG9wdF90cmFuc2Zvcm0pO1xuICAgICAgICAgICAgcmV0dXJuIGNsb25lLmdldFNpbXBsaWZpZWRHZW9tZXRyeShzcXVhcmVkVG9sZXJhbmNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGEgdHJhbnNmb3JtZWQgYW5kIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSBbb3B0X3RyYW5zZm9ybV0gT3B0aW9uYWwgdHJhbnNmb3JtIGZ1bmN0aW9uLlxuICAgICAqIEByZXR1cm4ge0dlb21ldHJ5fSBTaW1wbGlmaWVkIGdlb21ldHJ5LlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5zaW1wbGlmeVRyYW5zZm9ybWVkID0gZnVuY3Rpb24gKHNxdWFyZWRUb2xlcmFuY2UsIG9wdF90cmFuc2Zvcm0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2ltcGxpZnlUcmFuc2Zvcm1lZEludGVybmFsKHRoaXMuZ2V0UmV2aXNpb24oKSwgc3F1YXJlZFRvbGVyYW5jZSwgb3B0X3RyYW5zZm9ybSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7IUdlb21ldHJ5fSBDbG9uZS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluU3F1YXJlZERpc3RhbmNlIE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5jb250YWluc1hZID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgdmFyIGNvb3JkID0gdGhpcy5nZXRDbG9zZXN0UG9pbnQoW3gsIHldKTtcbiAgICAgICAgcmV0dXJuIGNvb3JkWzBdID09PSB4ICYmIGNvb3JkWzFdID09PSB5O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBjbG9zZXN0IHBvaW50IG9mIHRoZSBnZW9tZXRyeSB0byB0aGUgcGFzc2VkIHBvaW50IGFzXG4gICAgICoge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGUgY29vcmRpbmF0ZX0uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50IFBvaW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gb3B0X2Nsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ2xvc2VzdCBwb2ludC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmdldENsb3Nlc3RQb2ludCA9IGZ1bmN0aW9uIChwb2ludCwgb3B0X2Nsb3Nlc3RQb2ludCkge1xuICAgICAgICB2YXIgY2xvc2VzdFBvaW50ID0gb3B0X2Nsb3Nlc3RQb2ludCA/IG9wdF9jbG9zZXN0UG9pbnQgOiBbTmFOLCBOYU5dO1xuICAgICAgICB0aGlzLmNsb3Nlc3RQb2ludFhZKHBvaW50WzBdLCBwb2ludFsxXSwgY2xvc2VzdFBvaW50LCBJbmZpbml0eSk7XG4gICAgICAgIHJldHVybiBjbG9zZXN0UG9pbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBnZW9tZXRyeSBpbmNsdWRlcyB0aGUgc3BlY2lmaWVkIGNvb3JkaW5hdGUuIElmIHRoZVxuICAgICAqIGNvb3JkaW5hdGUgaXMgb24gdGhlIGJvdW5kYXJ5IG9mIHRoZSBnZW9tZXRyeSwgcmV0dXJucyBmYWxzZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIGNvb3JkaW5hdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5pbnRlcnNlY3RzQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5zWFkoY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmNvbXB1dGVFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBleHRlbnQgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudD19IG9wdF9leHRlbnQgRXh0ZW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5nZXRFeHRlbnQgPSBmdW5jdGlvbiAob3B0X2V4dGVudCkge1xuICAgICAgICBpZiAodGhpcy5leHRlbnRSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICAgICAgICB2YXIgZXh0ZW50ID0gdGhpcy5jb21wdXRlRXh0ZW50KHRoaXMuZXh0ZW50Xyk7XG4gICAgICAgICAgICBpZiAoaXNOYU4oZXh0ZW50WzBdKSB8fCBpc05hTihleHRlbnRbMV0pKSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlT3JVcGRhdGVFbXB0eShleHRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5leHRlbnRSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldHVybk9yVXBkYXRlKHRoaXMuZXh0ZW50Xywgb3B0X2V4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSb3RhdGUgdGhlIGdlb21ldHJ5IGFyb3VuZCBhIGdpdmVuIGNvb3JkaW5hdGUuIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5XG4gICAgICogY29vcmRpbmF0ZXMgaW4gcGxhY2UuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIGFuZ2xlIGluIHJhZGlhbnMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFuY2hvciBUaGUgcm90YXRpb24gY2VudGVyLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUucm90YXRlID0gZnVuY3Rpb24gKGFuZ2xlLCBhbmNob3IpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNjYWxlIHRoZSBnZW9tZXRyeSAod2l0aCBhbiBvcHRpb25hbCBvcmlnaW4pLiAgVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnlcbiAgICAgKiBjb29yZGluYXRlcyBpbiBwbGFjZS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3ggVGhlIHNjYWxpbmcgZmFjdG9yIGluIHRoZSB4LWRpcmVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9zeSBUaGUgc2NhbGluZyBmYWN0b3IgaW4gdGhlIHktZGlyZWN0aW9uIChkZWZhdWx0cyB0byBzeCkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU9fSBvcHRfYW5jaG9yIFRoZSBzY2FsZSBvcmlnaW4gKGRlZmF1bHRzIHRvIHRoZSBjZW50ZXJcbiAgICAgKiAgICAgb2YgdGhlIGdlb21ldHJ5IGV4dGVudCkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5zY2FsZSA9IGZ1bmN0aW9uIChzeCwgb3B0X3N5LCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhpcyBnZW9tZXRyeS4gIEZvciBsaW5lc3RyaW5ncywgdGhpcyB1c2VzXG4gICAgICogdGhlIFtEb3VnbGFzIFBldWNrZXJdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1JhbWVyLURvdWdsYXMtUGV1Y2tlcl9hbGdvcml0aG0pXG4gICAgICogYWxnb3JpdGhtLiAgRm9yIHBvbHlnb25zLCBhIHF1YW50aXphdGlvbi1iYXNlZFxuICAgICAqIHNpbXBsaWZpY2F0aW9uIGlzIHVzZWQgdG8gcHJlc2VydmUgdG9wb2xvZ3kuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUaGUgdG9sZXJhbmNlIGRpc3RhbmNlIGZvciBzaW1wbGlmaWNhdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gQSBuZXcsIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGUgb3JpZ2luYWwgZ2VvbWV0cnkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5zaW1wbGlmeSA9IGZ1bmN0aW9uICh0b2xlcmFuY2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2ltcGxpZmllZEdlb21ldHJ5KHRvbGVyYW5jZSAqIHRvbGVyYW5jZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhpcyBnZW9tZXRyeSB1c2luZyB0aGUgRG91Z2xhcyBQZXVja2VyXG4gICAgICogYWxnb3JpdGhtLlxuICAgICAqIFNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9SYW1lci1Eb3VnbGFzLVBldWNrZXJfYWxnb3JpdGhtLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAqIEByZXR1cm4ge0dlb21ldHJ5fSBTaW1wbGlmaWVkIGdlb21ldHJ5LlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnkgPSBmdW5jdGlvbiAoc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdHlwZSBvZiB0aGlzIGdlb21ldHJ5LlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vR2VvbWV0cnlUeXBlLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5IHR5cGUuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQXBwbHkgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBUaGUgZ2VvbWV0cnkgaXMgbW9kaWZpZWQgaW4gcGxhY2UuXG4gICAgICogSWYgeW91IGRvIG5vdCB3YW50IHRoZSBnZW9tZXRyeSBtb2RpZmllZCBpbiBwbGFjZSwgZmlyc3QgYGNsb25lKClgIGl0IGFuZFxuICAgICAqIHRoZW4gdXNlIHRoaXMgZnVuY3Rpb24gb24gdGhlIGNsb25lLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gdHJhbnNmb3JtRm4gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICAgICAqIENhbGxlZCB3aXRoIGEgZmxhdCBhcnJheSBvZiBnZW9tZXRyeSBjb29yZGluYXRlcy5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuYXBwbHlUcmFuc2Zvcm0gPSBmdW5jdGlvbiAodHJhbnNmb3JtRm4pIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRlc3QgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgcGFzc2VkIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5pbnRlcnNlY3RzRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0ZSB0aGUgZ2VvbWV0cnkuICBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeSBjb29yZGluYXRlcyBpbiBwbGFjZS4gIElmXG4gICAgICogaW5zdGVhZCB5b3Ugd2FudCBhIG5ldyBnZW9tZXRyeSwgZmlyc3QgYGNsb25lKClgIHRoaXMgZ2VvbWV0cnkuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWCBEZWx0YSBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVkgRGVsdGEgWS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uIChkZWx0YVgsIGRlbHRhWSkge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIGVhY2ggY29vcmRpbmF0ZSBvZiB0aGUgZ2VvbWV0cnkgZnJvbSBvbmUgY29vcmRpbmF0ZSByZWZlcmVuY2VcbiAgICAgKiBzeXN0ZW0gdG8gYW5vdGhlci4gVGhlIGdlb21ldHJ5IGlzIG1vZGlmaWVkIGluIHBsYWNlLlxuICAgICAqIEZvciBleGFtcGxlLCBhIGxpbmUgd2lsbCBiZSB0cmFuc2Zvcm1lZCB0byBhIGxpbmUgYW5kIGEgY2lyY2xlIHRvIGEgY2lyY2xlLlxuICAgICAqIElmIHlvdSBkbyBub3Qgd2FudCB0aGUgZ2VvbWV0cnkgbW9kaWZpZWQgaW4gcGxhY2UsIGZpcnN0IGBjbG9uZSgpYCBpdCBhbmRcbiAgICAgKiB0aGVuIHVzZSB0aGlzIGZ1bmN0aW9uIG9uIHRoZSBjbG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gc291cmNlIFRoZSBjdXJyZW50IHByb2plY3Rpb24uICBDYW4gYmUgYVxuICAgICAqICAgICBzdHJpbmcgaWRlbnRpZmllciBvciBhIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb259IG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIFRoZSBkZXNpcmVkIHByb2plY3Rpb24uICBDYW4gYmUgYVxuICAgICAqICAgICBzdHJpbmcgaWRlbnRpZmllciBvciBhIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb259IG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gVGhpcyBnZW9tZXRyeS4gIE5vdGUgdGhhdCBvcmlnaW5hbCBnZW9tZXRyeSBpc1xuICAgICAqICAgICBtb2RpZmllZCBpbiBwbGFjZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLnRyYW5zZm9ybSA9IGZ1bmN0aW9uIChzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovXG4gICAgICAgIHZhciBzb3VyY2VQcm9qID0gZ2V0UHJvamVjdGlvbihzb3VyY2UpO1xuICAgICAgICB2YXIgdHJhbnNmb3JtRm4gPSBzb3VyY2VQcm9qLmdldFVuaXRzKCkgPT0gVW5pdHMuVElMRV9QSVhFTFNcbiAgICAgICAgICAgID8gZnVuY3Rpb24gKGluQ29vcmRpbmF0ZXMsIG91dENvb3JkaW5hdGVzLCBzdHJpZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGl4ZWxFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICAgICAgICAgICAgICAgIHZhciBwcm9qZWN0ZWRFeHRlbnQgPSBzb3VyY2VQcm9qLmdldFdvcmxkRXh0ZW50KCk7XG4gICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZ2V0SGVpZ2h0KHByb2plY3RlZEV4dGVudCkgLyBnZXRIZWlnaHQocGl4ZWxFeHRlbnQpO1xuICAgICAgICAgICAgICAgIGNvbXBvc2VUcmFuc2Zvcm0odG1wVHJhbnNmb3JtLCBwcm9qZWN0ZWRFeHRlbnRbMF0sIHByb2plY3RlZEV4dGVudFszXSwgc2NhbGUsIC1zY2FsZSwgMCwgMCwgMCk7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtMkQoaW5Db29yZGluYXRlcywgMCwgaW5Db29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSwgdG1wVHJhbnNmb3JtLCBvdXRDb29yZGluYXRlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFRyYW5zZm9ybShzb3VyY2VQcm9qLCBkZXN0aW5hdGlvbikoaW5Db29yZGluYXRlcywgb3V0Q29vcmRpbmF0ZXMsIHN0cmlkZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IGdldFRyYW5zZm9ybShzb3VyY2VQcm9qLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuYXBwbHlUcmFuc2Zvcm0odHJhbnNmb3JtRm4pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBHZW9tZXRyeTtcbn0oQmFzZU9iamVjdCkpO1xuZXhwb3J0IGRlZmF1bHQgR2VvbWV0cnk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1HZW9tZXRyeS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vU2ltcGxlR2VvbWV0cnlcbiAqL1xuaW1wb3J0IEdlb21ldHJ5IGZyb20gJy4vR2VvbWV0cnkuanMnO1xuaW1wb3J0IEdlb21ldHJ5TGF5b3V0IGZyb20gJy4vR2VvbWV0cnlMYXlvdXQuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7IGNyZWF0ZU9yVXBkYXRlRnJvbUZsYXRDb29yZGluYXRlcywgZ2V0Q2VudGVyIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IHJvdGF0ZSwgc2NhbGUsIHRyYW5zZm9ybTJELCB0cmFuc2xhdGUgfSBmcm9tICcuL2ZsYXQvdHJhbnNmb3JtLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzOyBkbyBub3QgaW5zdGFudGlhdGVcbiAqIGluIGFwcHMsIGFzIGNhbm5vdCBiZSByZW5kZXJlZC5cbiAqXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xudmFyIFNpbXBsZUdlb21ldHJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTaW1wbGVHZW9tZXRyeSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTaW1wbGVHZW9tZXRyeSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxheW91dCA9IEdlb21ldHJ5TGF5b3V0LlhZO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RyaWRlID0gMjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuY29tcHV0ZUV4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlRnJvbUZsYXRDb29yZGluYXRlcyh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSwgZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge0FycmF5PCo+fSBDb29yZGluYXRlcy5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBmaXJzdCBjb29yZGluYXRlIG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IEZpcnN0IGNvb3JkaW5hdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRGaXJzdENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSgwLCB0aGlzLnN0cmlkZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBGbGF0IGNvb3JkaW5hdGVzLlxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRGbGF0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbGFzdCBjb29yZGluYXRlIG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IExhc3QgcG9pbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRMYXN0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCAtIHRoaXMuc3RyaWRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUge0BsaW5rIG1vZHVsZTpvbC9nZW9tL0dlb21ldHJ5TGF5b3V0IGxheW91dH0gb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gTGF5b3V0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0TGF5b3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXlvdXQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhpcyBnZW9tZXRyeSB1c2luZyB0aGUgRG91Z2xhcyBQZXVja2VyIGFsZ29yaXRobS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgKiBAcmV0dXJuIHtTaW1wbGVHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0U2ltcGxpZmllZEdlb21ldHJ5ID0gZnVuY3Rpb24gKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgaWYgKHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24gIT09IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgICAgICAgdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlID0gMDtcbiAgICAgICAgICAgIHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgc3F1YXJlZFRvbGVyYW5jZSBpcyBuZWdhdGl2ZSBvciBpZiB3ZSBrbm93IHRoYXQgc2ltcGxpZmljYXRpb24gd2lsbCBub3RcbiAgICAgICAgLy8gaGF2ZSBhbnkgZWZmZWN0IHRoZW4ganVzdCByZXR1cm4gdGhpcy5cbiAgICAgICAgaWYgKHNxdWFyZWRUb2xlcmFuY2UgPCAwIHx8XG4gICAgICAgICAgICAodGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlICE9PSAwICYmXG4gICAgICAgICAgICAgICAgc3F1YXJlZFRvbGVyYW5jZSA8PSB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2ltcGxpZmllZEdlb21ldHJ5ID0gdGhpcy5nZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbChzcXVhcmVkVG9sZXJhbmNlKTtcbiAgICAgICAgdmFyIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBzaW1wbGlmaWVkR2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIGlmIChzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA8IHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHNpbXBsaWZpZWRHZW9tZXRyeTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNpbXBsaWZpY2F0aW9uIGRpZCBub3QgYWN0dWFsbHkgcmVtb3ZlIGFueSBjb29yZGluYXRlcy4gIFdlIG5vdyBrbm93XG4gICAgICAgICAgICAvLyB0aGF0IGFueSBjYWxscyB0byBnZXRTaW1wbGlmaWVkR2VvbWV0cnkgd2l0aCBhIHNxdWFyZWRUb2xlcmFuY2UgbGVzc1xuICAgICAgICAgICAgLy8gdGhhbiBvciBlcXVhbCB0byB0aGUgY3VycmVudCBzcXVhcmVkVG9sZXJhbmNlIHdpbGwgYWxzbyBub3QgaGF2ZSBhbnlcbiAgICAgICAgICAgIC8vIGVmZmVjdC4gIFRoaXMgYWxsb3dzIHVzIHRvIHNob3J0IGNpcmN1aXQgc2ltcGxpZmljYXRpb24gKHNhdmluZyBDUFVcbiAgICAgICAgICAgIC8vIGN5Y2xlcykgYW5kIHByZXZlbnRzIHRoZSBjYWNoZSBvZiBzaW1wbGlmaWVkIGdlb21ldHJpZXMgZnJvbSBmaWxsaW5nXG4gICAgICAgICAgICAvLyB1cCB3aXRoIHVzZWxlc3MgaWRlbnRpY2FsIGNvcGllcyBvZiB0aGlzIGdlb21ldHJ5IChzYXZpbmcgbWVtb3J5KS5cbiAgICAgICAgICAgIHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSA9IHNxdWFyZWRUb2xlcmFuY2U7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gICAgICogQHJldHVybiB7U2ltcGxlR2VvbWV0cnl9IFNpbXBsaWZpZWQgZ2VvbWV0cnkuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbCA9IGZ1bmN0aW9uIChzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBTdHJpZGUuXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldFN0cmlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyaWRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IGxheW91dCBMYXlvdXQuXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuc2V0RmxhdENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKGxheW91dCwgZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgIHRoaXMuc3RyaWRlID0gZ2V0U3RyaWRlRm9yTGF5b3V0KGxheW91dCk7XG4gICAgICAgIHRoaXMubGF5b3V0ID0gbGF5b3V0O1xuICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IGZsYXRDb29yZGluYXRlcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7IUFycmF5PCo+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdD19IG9wdF9sYXlvdXQgTGF5b3V0LlxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBsYXlvdXQgTGF5b3V0LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8Kj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuZXN0aW5nIE5lc3RpbmcuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5zZXRMYXlvdXQgPSBmdW5jdGlvbiAobGF5b3V0LCBjb29yZGluYXRlcywgbmVzdGluZykge1xuICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICAgICAgdmFyIHN0cmlkZTtcbiAgICAgICAgaWYgKGxheW91dCkge1xuICAgICAgICAgICAgc3RyaWRlID0gZ2V0U3RyaWRlRm9yTGF5b3V0KGxheW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5lc3Rpbmc7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXlvdXQgPSBHZW9tZXRyeUxheW91dC5YWTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHJpZGUgPSAyO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7QXJyYXl9ICovIChjb29yZGluYXRlc1swXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RyaWRlID0gY29vcmRpbmF0ZXMubGVuZ3RoO1xuICAgICAgICAgICAgbGF5b3V0ID0gZ2V0TGF5b3V0Rm9yU3RyaWRlKHN0cmlkZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXlvdXQgPSBsYXlvdXQ7XG4gICAgICAgIHRoaXMuc3RyaWRlID0gc3RyaWRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQXBwbHkgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBUaGUgZ2VvbWV0cnkgaXMgbW9kaWZpZWQgaW4gcGxhY2UuXG4gICAgICogSWYgeW91IGRvIG5vdCB3YW50IHRoZSBnZW9tZXRyeSBtb2RpZmllZCBpbiBwbGFjZSwgZmlyc3QgYGNsb25lKClgIGl0IGFuZFxuICAgICAqIHRoZW4gdXNlIHRoaXMgZnVuY3Rpb24gb24gdGhlIGNsb25lLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gdHJhbnNmb3JtRm4gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICAgICAqIENhbGxlZCB3aXRoIGEgZmxhdCBhcnJheSBvZiBnZW9tZXRyeSBjb29yZGluYXRlcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmFwcGx5VHJhbnNmb3JtID0gZnVuY3Rpb24gKHRyYW5zZm9ybUZuKSB7XG4gICAgICAgIGlmICh0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgICAgICAgdHJhbnNmb3JtRm4odGhpcy5mbGF0Q29vcmRpbmF0ZXMsIHRoaXMuZmxhdENvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUm90YXRlIHRoZSBnZW9tZXRyeSBhcm91bmQgYSBnaXZlbiBjb29yZGluYXRlLiBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeVxuICAgICAqIGNvb3JkaW5hdGVzIGluIHBsYWNlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBSb3RhdGlvbiBhbmdsZSBpbiBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhbmNob3IgVGhlIHJvdGF0aW9uIGNlbnRlci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLnJvdGF0ZSA9IGZ1bmN0aW9uIChhbmdsZSwgYW5jaG9yKSB7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICBpZiAoZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB2YXIgc3RyaWRlID0gdGhpcy5nZXRTdHJpZGUoKTtcbiAgICAgICAgICAgIHJvdGF0ZShmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSwgYW5nbGUsIGFuY2hvciwgZmxhdENvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTY2FsZSB0aGUgZ2VvbWV0cnkgKHdpdGggYW4gb3B0aW9uYWwgb3JpZ2luKS4gIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5XG4gICAgICogY29vcmRpbmF0ZXMgaW4gcGxhY2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN4IFRoZSBzY2FsaW5nIGZhY3RvciBpbiB0aGUgeC1kaXJlY3Rpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfc3kgVGhlIHNjYWxpbmcgZmFjdG9yIGluIHRoZSB5LWRpcmVjdGlvbiAoZGVmYXVsdHMgdG8gc3gpLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gb3B0X2FuY2hvciBUaGUgc2NhbGUgb3JpZ2luIChkZWZhdWx0cyB0byB0aGUgY2VudGVyXG4gICAgICogICAgIG9mIHRoZSBnZW9tZXRyeSBleHRlbnQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuc2NhbGUgPSBmdW5jdGlvbiAoc3gsIG9wdF9zeSwgb3B0X2FuY2hvcikge1xuICAgICAgICB2YXIgc3kgPSBvcHRfc3k7XG4gICAgICAgIGlmIChzeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzeSA9IHN4O1xuICAgICAgICB9XG4gICAgICAgIHZhciBhbmNob3IgPSBvcHRfYW5jaG9yO1xuICAgICAgICBpZiAoIWFuY2hvcikge1xuICAgICAgICAgICAgYW5jaG9yID0gZ2V0Q2VudGVyKHRoaXMuZ2V0RXh0ZW50KCkpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICBpZiAoZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB2YXIgc3RyaWRlID0gdGhpcy5nZXRTdHJpZGUoKTtcbiAgICAgICAgICAgIHNjYWxlKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlLCBzeCwgc3ksIGFuY2hvciwgZmxhdENvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGUgdGhlIGdlb21ldHJ5LiAgVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnkgY29vcmRpbmF0ZXMgaW4gcGxhY2UuICBJZlxuICAgICAqIGluc3RlYWQgeW91IHdhbnQgYSBuZXcgZ2VvbWV0cnksIGZpcnN0IGBjbG9uZSgpYCB0aGlzIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVggRGVsdGEgWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGFZIERlbHRhIFkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS50cmFuc2xhdGUgPSBmdW5jdGlvbiAoZGVsdGFYLCBkZWx0YVkpIHtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIGlmIChmbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHZhciBzdHJpZGUgPSB0aGlzLmdldFN0cmlkZSgpO1xuICAgICAgICAgICAgdHJhbnNsYXRlKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlLCBkZWx0YVgsIGRlbHRhWSwgZmxhdENvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU2ltcGxlR2VvbWV0cnk7XG59KEdlb21ldHJ5KSk7XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBsYXlvdXQgTGF5b3V0LlxuICovXG5mdW5jdGlvbiBnZXRMYXlvdXRGb3JTdHJpZGUoc3RyaWRlKSB7XG4gICAgdmFyIGxheW91dDtcbiAgICBpZiAoc3RyaWRlID09IDIpIHtcbiAgICAgICAgbGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHN0cmlkZSA9PSAzKSB7XG4gICAgICAgIGxheW91dCA9IEdlb21ldHJ5TGF5b3V0LlhZWjtcbiAgICB9XG4gICAgZWxzZSBpZiAoc3RyaWRlID09IDQpIHtcbiAgICAgICAgbGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFlaTTtcbiAgICB9XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSAqLyAobGF5b3V0KTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IGxheW91dCBMYXlvdXQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFN0cmlkZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN0cmlkZUZvckxheW91dChsYXlvdXQpIHtcbiAgICB2YXIgc3RyaWRlO1xuICAgIGlmIChsYXlvdXQgPT0gR2VvbWV0cnlMYXlvdXQuWFkpIHtcbiAgICAgICAgc3RyaWRlID0gMjtcbiAgICB9XG4gICAgZWxzZSBpZiAobGF5b3V0ID09IEdlb21ldHJ5TGF5b3V0LlhZWiB8fCBsYXlvdXQgPT0gR2VvbWV0cnlMYXlvdXQuWFlNKSB7XG4gICAgICAgIHN0cmlkZSA9IDM7XG4gICAgfVxuICAgIGVsc2UgaWYgKGxheW91dCA9PSBHZW9tZXRyeUxheW91dC5YWVpNKSB7XG4gICAgICAgIHN0cmlkZSA9IDQ7XG4gICAgfVxuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHN0cmlkZSk7XG59XG4vKipcbiAqIEBwYXJhbSB7U2ltcGxlR2VvbWV0cnl9IHNpbXBsZUdlb21ldHJ5IFNpbXBsZSBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9kZXN0IERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgZmxhdCBjb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybUdlb20yRChzaW1wbGVHZW9tZXRyeSwgdHJhbnNmb3JtLCBvcHRfZGVzdCkge1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBzaW1wbGVHZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICBpZiAoIWZsYXRDb29yZGluYXRlcykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciBzdHJpZGUgPSBzaW1wbGVHZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybTJEKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlLCB0cmFuc2Zvcm0sIG9wdF9kZXN0KTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBTaW1wbGVHZW9tZXRyeTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNpbXBsZUdlb21ldHJ5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvZGVmbGF0ZVxuICovXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVDb29yZGluYXRlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlLCBzdHJpZGUpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCsrXSA9IGNvb3JkaW5hdGVbaV07XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZXMsIHN0cmlkZSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGNvb3JkaW5hdGUgPSBjb29yZGluYXRlc1tpXTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdHJpZGU7ICsraikge1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCsrXSA9IGNvb3JkaW5hdGVbal07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9mZnNldDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gY29vcmRpbmF0ZXNzIENvb3JkaW5hdGVzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X2VuZHMgRW5kcy5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEVuZHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZXNzLCBzdHJpZGUsIG9wdF9lbmRzKSB7XG4gICAgdmFyIGVuZHMgPSBvcHRfZW5kcyA/IG9wdF9lbmRzIDogW107XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGNvb3JkaW5hdGVzcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgIHZhciBlbmQgPSBkZWZsYXRlQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGVzc1tqXSwgc3RyaWRlKTtcbiAgICAgICAgZW5kc1tpKytdID0gZW5kO1xuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIGVuZHMubGVuZ3RoID0gaTtcbiAgICByZXR1cm4gZW5kcztcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pj59IGNvb3JkaW5hdGVzc3MgQ29vcmRpbmF0ZXNzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pj19IG9wdF9lbmRzcyBFbmRzcy5cbiAqIEByZXR1cm4ge0FycmF5PEFycmF5PG51bWJlcj4+fSBFbmRzcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVNdWx0aUNvb3JkaW5hdGVzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGVzc3MsIHN0cmlkZSwgb3B0X2VuZHNzKSB7XG4gICAgdmFyIGVuZHNzID0gb3B0X2VuZHNzID8gb3B0X2VuZHNzIDogW107XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGNvb3JkaW5hdGVzc3MubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICB2YXIgZW5kcyA9IGRlZmxhdGVDb29yZGluYXRlc0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlc3NzW2pdLCBzdHJpZGUsIGVuZHNzW2ldKTtcbiAgICAgICAgZW5kc3NbaSsrXSA9IGVuZHM7XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgZW5kc3MubGVuZ3RoID0gaTtcbiAgICByZXR1cm4gZW5kc3M7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZsYXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvdHJhbnNmb3JtXG4gKi9cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9kZXN0IERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm0yRChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHRyYW5zZm9ybSwgb3B0X2Rlc3QpIHtcbiAgICB2YXIgZGVzdCA9IG9wdF9kZXN0ID8gb3B0X2Rlc3QgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IG9mZnNldDsgaiA8IGVuZDsgaiArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIHggPSBmbGF0Q29vcmRpbmF0ZXNbal07XG4gICAgICAgIHZhciB5ID0gZmxhdENvb3JkaW5hdGVzW2ogKyAxXTtcbiAgICAgICAgZGVzdFtpKytdID0gdHJhbnNmb3JtWzBdICogeCArIHRyYW5zZm9ybVsyXSAqIHkgKyB0cmFuc2Zvcm1bNF07XG4gICAgICAgIGRlc3RbaSsrXSA9IHRyYW5zZm9ybVsxXSAqIHggKyB0cmFuc2Zvcm1bM10gKiB5ICsgdHJhbnNmb3JtWzVdO1xuICAgIH1cbiAgICBpZiAob3B0X2Rlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgICAgICBkZXN0Lmxlbmd0aCA9IGk7XG4gICAgfVxuICAgIHJldHVybiBkZXN0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIEFuZ2xlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBhbmNob3IgUm90YXRpb24gYW5jaG9yIHBvaW50LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X2Rlc3QgRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1lZCBjb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGFuZ2xlLCBhbmNob3IsIG9wdF9kZXN0KSB7XG4gICAgdmFyIGRlc3QgPSBvcHRfZGVzdCA/IG9wdF9kZXN0IDogW107XG4gICAgdmFyIGNvcyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICB2YXIgc2luID0gTWF0aC5zaW4oYW5nbGUpO1xuICAgIHZhciBhbmNob3JYID0gYW5jaG9yWzBdO1xuICAgIHZhciBhbmNob3JZID0gYW5jaG9yWzFdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgICAgICB2YXIgZGVsdGFYID0gZmxhdENvb3JkaW5hdGVzW2pdIC0gYW5jaG9yWDtcbiAgICAgICAgdmFyIGRlbHRhWSA9IGZsYXRDb29yZGluYXRlc1tqICsgMV0gLSBhbmNob3JZO1xuICAgICAgICBkZXN0W2krK10gPSBhbmNob3JYICsgZGVsdGFYICogY29zIC0gZGVsdGFZICogc2luO1xuICAgICAgICBkZXN0W2krK10gPSBhbmNob3JZICsgZGVsdGFYICogc2luICsgZGVsdGFZICogY29zO1xuICAgICAgICBmb3IgKHZhciBrID0gaiArIDI7IGsgPCBqICsgc3RyaWRlOyArK2spIHtcbiAgICAgICAgICAgIGRlc3RbaSsrXSA9IGZsYXRDb29yZGluYXRlc1trXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAob3B0X2Rlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgICAgICBkZXN0Lmxlbmd0aCA9IGk7XG4gICAgfVxuICAgIHJldHVybiBkZXN0O1xufVxuLyoqXG4gKiBTY2FsZSB0aGUgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHN4IFNjYWxlIGZhY3RvciBpbiB0aGUgeC1kaXJlY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gc3kgU2NhbGUgZmFjdG9yIGluIHRoZSB5LWRpcmVjdGlvbi5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYW5jaG9yIFNjYWxlIGFuY2hvciBwb2ludC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9kZXN0IERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHN4LCBzeSwgYW5jaG9yLCBvcHRfZGVzdCkge1xuICAgIHZhciBkZXN0ID0gb3B0X2Rlc3QgPyBvcHRfZGVzdCA6IFtdO1xuICAgIHZhciBhbmNob3JYID0gYW5jaG9yWzBdO1xuICAgIHZhciBhbmNob3JZID0gYW5jaG9yWzFdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgICAgICB2YXIgZGVsdGFYID0gZmxhdENvb3JkaW5hdGVzW2pdIC0gYW5jaG9yWDtcbiAgICAgICAgdmFyIGRlbHRhWSA9IGZsYXRDb29yZGluYXRlc1tqICsgMV0gLSBhbmNob3JZO1xuICAgICAgICBkZXN0W2krK10gPSBhbmNob3JYICsgc3ggKiBkZWx0YVg7XG4gICAgICAgIGRlc3RbaSsrXSA9IGFuY2hvclkgKyBzeSAqIGRlbHRhWTtcbiAgICAgICAgZm9yICh2YXIgayA9IGogKyAyOyBrIDwgaiArIHN0cmlkZTsgKytrKSB7XG4gICAgICAgICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNba107XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdF9kZXN0ICYmIGRlc3QubGVuZ3RoICE9IGkpIHtcbiAgICAgICAgZGVzdC5sZW5ndGggPSBpO1xuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVggRGVsdGEgWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVkgRGVsdGEgWS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9kZXN0IERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBkZWx0YVgsIGRlbHRhWSwgb3B0X2Rlc3QpIHtcbiAgICB2YXIgZGVzdCA9IG9wdF9kZXN0ID8gb3B0X2Rlc3QgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IG9mZnNldDsgaiA8IGVuZDsgaiArPSBzdHJpZGUpIHtcbiAgICAgICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2pdICsgZGVsdGFYO1xuICAgICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNbaiArIDFdICsgZGVsdGFZO1xuICAgICAgICBmb3IgKHZhciBrID0gaiArIDI7IGsgPCBqICsgc3RyaWRlOyArK2spIHtcbiAgICAgICAgICAgIGRlc3RbaSsrXSA9IGZsYXRDb29yZGluYXRlc1trXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAob3B0X2Rlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgICAgICBkZXN0Lmxlbmd0aCA9IGk7XG4gICAgfVxuICAgIHJldHVybiBkZXN0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNmb3JtLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9oYXNcbiAqL1xudmFyIHVhID0gdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG5hdmlnYXRvci51c2VyQWdlbnQgIT09ICd1bmRlZmluZWQnXG4gICAgPyBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKClcbiAgICA6ICcnO1xuLyoqXG4gKiBVc2VyIGFnZW50IHN0cmluZyBzYXlzIHdlIGFyZSBkZWFsaW5nIHdpdGggRmlyZWZveCBhcyBicm93c2VyLlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgRklSRUZPWCA9IHVhLmluZGV4T2YoJ2ZpcmVmb3gnKSAhPT0gLTE7XG4vKipcbiAqIFVzZXIgYWdlbnQgc3RyaW5nIHNheXMgd2UgYXJlIGRlYWxpbmcgd2l0aCBTYWZhcmkgYXMgYnJvd3Nlci5cbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIFNBRkFSSSA9IHVhLmluZGV4T2YoJ3NhZmFyaScpICE9PSAtMSAmJiB1YS5pbmRleE9mKCdjaHJvbScpID09IC0xO1xuLyoqXG4gKiBVc2VyIGFnZW50IHN0cmluZyBzYXlzIHdlIGFyZSBkZWFsaW5nIHdpdGggYSBXZWJLaXQgZW5naW5lLlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgV0VCS0lUID0gdWEuaW5kZXhPZignd2Via2l0JykgIT09IC0xICYmIHVhLmluZGV4T2YoJ2VkZ2UnKSA9PSAtMTtcbi8qKlxuICogVXNlciBhZ2VudCBzdHJpbmcgc2F5cyB3ZSBhcmUgZGVhbGluZyB3aXRoIGEgTWFjIGFzIHBsYXRmb3JtLlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgTUFDID0gdWEuaW5kZXhPZignbWFjaW50b3NoJykgIT09IC0xO1xuLyoqXG4gKiBUaGUgcmF0aW8gYmV0d2VlbiBwaHlzaWNhbCBwaXhlbHMgYW5kIGRldmljZS1pbmRlcGVuZGVudCBwaXhlbHNcbiAqIChkaXBzKSBvbiB0aGUgZGV2aWNlIChgd2luZG93LmRldmljZVBpeGVsUmF0aW9gKS5cbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBERVZJQ0VfUElYRUxfUkFUSU8gPSB0eXBlb2YgZGV2aWNlUGl4ZWxSYXRpbyAhPT0gJ3VuZGVmaW5lZCcgPyBkZXZpY2VQaXhlbFJhdGlvIDogMTtcbi8qKlxuICogVGhlIGV4ZWN1dGlvbiBjb250ZXh0IGlzIGEgd29ya2VyIHdpdGggT2Zmc2NyZWVuQ2FudmFzIGF2YWlsYWJsZS5cbiAqIEBjb25zdFxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgV09SS0VSX09GRlNDUkVFTl9DQU5WQVMgPSB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIE9mZnNjcmVlbkNhbnZhcyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGU7IC8vZXNsaW50LWRpc2FibGUtbGluZVxuLyoqXG4gKiBJbWFnZS5wcm90b3R5cGUuZGVjb2RlKCkgaXMgc3VwcG9ydGVkLlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgSU1BR0VfREVDT0RFID0gdHlwZW9mIEltYWdlICE9PSAndW5kZWZpbmVkJyAmJiBJbWFnZS5wcm90b3R5cGUuZGVjb2RlO1xuLyoqXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBhc3NpdmUgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3Bhc3NpdmUnLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBwYXNzaXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignXycsIG51bGwsIG9wdGlvbnMpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignXycsIG51bGwsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gcGFzc2l2ZSBub3Qgc3VwcG9ydGVkXG4gICAgfVxuICAgIHJldHVybiBwYXNzaXZlO1xufSkoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhcy5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb25Qcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCB7IGVhc2VPdXQsIGxpbmVhciB9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggY29uZmlnIG9wdGlvbnMgZm9yIGludGVyYWN0aW9ucy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEludGVyYWN0aW9uT3B0aW9uc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gaGFuZGxlRXZlbnRcbiAqIE1ldGhvZCBjYWxsZWQgYnkgdGhlIG1hcCB0byBub3RpZnkgdGhlIGludGVyYWN0aW9uIHRoYXQgYSBicm93c2VyIGV2ZW50IHdhc1xuICogZGlzcGF0Y2hlZCB0byB0aGUgbWFwLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBwcm9wYWdhdGlvbiBvZlxuICogdGhlIGV2ZW50IHRvIG90aGVyIGludGVyYWN0aW9ucyBpbiB0aGUgbWFwJ3MgaW50ZXJhY3Rpb25zIGNoYWluIHdpbGwgYmVcbiAqIHByZXZlbnRlZCAodGhpcyBpbmNsdWRlcyBmdW5jdGlvbnMgd2l0aCBubyBleHBsaWNpdCByZXR1cm4pLiBUaGUgaW50ZXJhY3Rpb25zXG4gKiBhcmUgdHJhdmVyc2VkIGluIHJldmVyc2Ugb3JkZXIgb2YgdGhlIGludGVyYWN0aW9ucyBjb2xsZWN0aW9uIG9mIHRoZSBtYXAuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogVXNlciBhY3Rpb25zIHRoYXQgY2hhbmdlIHRoZSBzdGF0ZSBvZiB0aGUgbWFwLiBTb21lIGFyZSBzaW1pbGFyIHRvIGNvbnRyb2xzLFxuICogYnV0IGFyZSBub3QgYXNzb2NpYXRlZCB3aXRoIGEgRE9NIGVsZW1lbnQuXG4gKiBGb3IgZXhhbXBsZSwge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21+S2V5Ym9hcmRab29tfSBpc1xuICogZnVuY3Rpb25hbGx5IHRoZSBzYW1lIGFzIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9ab29tflpvb219LCBidXQgdHJpZ2dlcmVkXG4gKiBieSBhIGtleWJvYXJkIGV2ZW50IG5vdCBhIGJ1dHRvbiBlbGVtZW50IGV2ZW50LlxuICogQWx0aG91Z2ggaW50ZXJhY3Rpb25zIGRvIG5vdCBoYXZlIGEgRE9NIGVsZW1lbnQsIHNvbWUgb2YgdGhlbSBkbyByZW5kZXJcbiAqIHZlY3RvcnMgYW5kIHNvIGFyZSB2aXNpYmxlIG9uIHRoZSBzY3JlZW4uXG4gKiBAYXBpXG4gKi9cbnZhciBJbnRlcmFjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW50ZXJhY3Rpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtJbnRlcmFjdGlvbk9wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEludGVyYWN0aW9uKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIGlmIChvcHRfb3B0aW9ucyAmJiBvcHRfb3B0aW9ucy5oYW5kbGVFdmVudCkge1xuICAgICAgICAgICAgX3RoaXMuaGFuZGxlRXZlbnQgPSBvcHRfb3B0aW9ucy5oYW5kbGVFdmVudDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwXyA9IG51bGw7XG4gICAgICAgIF90aGlzLnNldEFjdGl2ZSh0cnVlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGUgaW50ZXJhY3Rpb24gaXMgY3VycmVudGx5IGFjdGl2ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGludGVyYWN0aW9uIGlzIGFjdGl2ZSwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLmdldEFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHRoaXMuZ2V0KEludGVyYWN0aW9uUHJvcGVydHkuQUNUSVZFKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hcCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnRlcmFjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gTWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbnRlcmFjdGlvbi5wcm90b3R5cGUuZ2V0TWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXBfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBY3RpdmF0ZSBvciBkZWFjdGl2YXRlIHRoZSBpbnRlcmFjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFjdGl2ZSBBY3RpdmUuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLnNldEFjdGl2ZSA9IGZ1bmN0aW9uIChhY3RpdmUpIHtcbiAgICAgICAgdGhpcy5zZXQoSW50ZXJhY3Rpb25Qcm9wZXJ0eS5BQ1RJVkUsIGFjdGl2ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGludGVyYWN0aW9uIGZyb20gaXRzIGN1cnJlbnQgbWFwIGFuZCBhdHRhY2ggaXQgdG8gdGhlIG5ldyBtYXAuXG4gICAgICogU3ViY2xhc3NlcyBtYXkgc2V0IHVwIGV2ZW50IGhhbmRsZXJzIHRvIGdldCBub3RpZmllZCBhYm91dCBjaGFuZ2VzIHRvXG4gICAgICogdGhlIG1hcCBoZXJlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICovXG4gICAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgdGhpcy5tYXBfID0gbWFwO1xuICAgIH07XG4gICAgcmV0dXJuIEludGVyYWN0aW9uO1xufShCYXNlT2JqZWN0KSk7XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5kZWZhdWx0fSB2aWV3IFZpZXcuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZGVsdGEgRGVsdGEuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9kdXJhdGlvbiBEdXJhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhbih2aWV3LCBkZWx0YSwgb3B0X2R1cmF0aW9uKSB7XG4gICAgdmFyIGN1cnJlbnRDZW50ZXIgPSB2aWV3LmdldENlbnRlckludGVybmFsKCk7XG4gICAgaWYgKGN1cnJlbnRDZW50ZXIpIHtcbiAgICAgICAgdmFyIGNlbnRlciA9IFtjdXJyZW50Q2VudGVyWzBdICsgZGVsdGFbMF0sIGN1cnJlbnRDZW50ZXJbMV0gKyBkZWx0YVsxXV07XG4gICAgICAgIHZpZXcuYW5pbWF0ZUludGVybmFsKHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRfZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9kdXJhdGlvbiA6IDI1MCxcbiAgICAgICAgICAgIGVhc2luZzogbGluZWFyLFxuICAgICAgICAgICAgY2VudGVyOiB2aWV3LmdldENvbnN0cmFpbmVkQ2VudGVyKGNlbnRlciksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9IHZpZXcgVmlldy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBEZWx0YSBmcm9tIHByZXZpb3VzIHpvb20gbGV2ZWwuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IG9wdF9hbmNob3IgQW5jaG9yIGNvb3JkaW5hdGUgaW4gdGhlIHVzZXIgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2R1cmF0aW9uIER1cmF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gem9vbUJ5RGVsdGEodmlldywgZGVsdGEsIG9wdF9hbmNob3IsIG9wdF9kdXJhdGlvbikge1xuICAgIHZhciBjdXJyZW50Wm9vbSA9IHZpZXcuZ2V0Wm9vbSgpO1xuICAgIGlmIChjdXJyZW50Wm9vbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIG5ld1pvb20gPSB2aWV3LmdldENvbnN0cmFpbmVkWm9vbShjdXJyZW50Wm9vbSArIGRlbHRhKTtcbiAgICB2YXIgbmV3UmVzb2x1dGlvbiA9IHZpZXcuZ2V0UmVzb2x1dGlvbkZvclpvb20obmV3Wm9vbSk7XG4gICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgfVxuICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgIHJlc29sdXRpb246IG5ld1Jlc29sdXRpb24sXG4gICAgICAgIGFuY2hvcjogb3B0X2FuY2hvcixcbiAgICAgICAgZHVyYXRpb246IG9wdF9kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X2R1cmF0aW9uIDogMjUwLFxuICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgfSk7XG59XG5leHBvcnQgZGVmYXVsdCBJbnRlcmFjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUludGVyYWN0aW9uLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUG9pbnRlclxuICovXG5pbXBvcnQgSW50ZXJhY3Rpb24gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50VHlwZSBmcm9tICcuLi9NYXBCcm93c2VyRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IGdldFZhbHVlcyB9IGZyb20gJy4uL29iai5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQpOmJvb2xlYW59IFtoYW5kbGVEb3duRXZlbnRdXG4gKiBGdW5jdGlvbiBoYW5kbGluZyBcImRvd25cIiBldmVudHMuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYCB0aGVuIGEgZHJhZ1xuICogc2VxdWVuY2UgaXMgc3RhcnRlZC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtoYW5kbGVEcmFnRXZlbnRdXG4gKiBGdW5jdGlvbiBoYW5kbGluZyBcImRyYWdcIiBldmVudHMuIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIFwibW92ZVwiIGV2ZW50c1xuICogZHVyaW5nIGEgZHJhZyBzZXF1ZW5jZS5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQpOmJvb2xlYW59IFtoYW5kbGVFdmVudF1cbiAqIE1ldGhvZCBjYWxsZWQgYnkgdGhlIG1hcCB0byBub3RpZnkgdGhlIGludGVyYWN0aW9uIHRoYXQgYSBicm93c2VyIGV2ZW50IHdhc1xuICogZGlzcGF0Y2hlZCB0byB0aGUgbWFwLiBUaGUgZnVuY3Rpb24gbWF5IHJldHVybiBgZmFsc2VgIHRvIHByZXZlbnQgdGhlXG4gKiBwcm9wYWdhdGlvbiBvZiB0aGUgZXZlbnQgdG8gb3RoZXIgaW50ZXJhY3Rpb25zIGluIHRoZSBtYXAncyBpbnRlcmFjdGlvbnNcbiAqIGNoYWluLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW2hhbmRsZU1vdmVFdmVudF1cbiAqIEZ1bmN0aW9uIGhhbmRsaW5nIFwibW92ZVwiIGV2ZW50cy4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb24gXCJtb3ZlXCIgZXZlbnRzLlxuICogVGhpcyBmdW5jdGlvbnMgaXMgYWxzbyBjYWxsZWQgZHVyaW5nIGEgZHJhZyBzZXF1ZW5jZSwgc28gZHVyaW5nIGEgZHJhZ1xuICogc2VxdWVuY2UgYm90aCB0aGUgYGhhbmRsZURyYWdFdmVudGAgZnVuY3Rpb24gYW5kIHRoaXMgZnVuY3Rpb24gYXJlIGNhbGxlZC5cbiAqIElmIGBoYW5kbGVEb3duRXZlbnRgIGlzIGRlZmluZWQgYW5kIGl0IHJldHVybnMgdHJ1ZSB0aGlzIGZ1bmN0aW9uIHdpbGwgbm90XG4gKiBiZSBjYWxsZWQgZHVyaW5nIGEgZHJhZyBzZXF1ZW5jZS5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQpOmJvb2xlYW59IFtoYW5kbGVVcEV2ZW50XVxuICogIEZ1bmN0aW9uIGhhbmRsaW5nIFwidXBcIiBldmVudHMuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAgdGhlbiB0aGVcbiAqIGN1cnJlbnQgZHJhZyBzZXF1ZW5jZSBpcyBzdG9wcGVkLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihib29sZWFuKTpib29sZWFufSBbc3RvcERvd25dXG4gKiBTaG91bGQgdGhlIGRvd24gZXZlbnQgYmUgcHJvcGFnYXRlZCB0byBvdGhlciBpbnRlcmFjdGlvbnMsIG9yIHNob3VsZCBiZVxuICogc3RvcHBlZD9cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIHRoYXQgY2FsbHMgdXNlci1kZWZpbmVkIGZ1bmN0aW9ucyBvbiBgZG93bmAsIGBtb3ZlYCBhbmQgYHVwYFxuICogZXZlbnRzLiBUaGlzIGNsYXNzIGFsc28gbWFuYWdlcyBcImRyYWcgc2VxdWVuY2VzXCIuXG4gKlxuICogV2hlbiB0aGUgYGhhbmRsZURvd25FdmVudGAgdXNlciBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYCBhIGRyYWcgc2VxdWVuY2UgaXNcbiAqIHN0YXJ0ZWQuIER1cmluZyBhIGRyYWcgc2VxdWVuY2UgdGhlIGBoYW5kbGVEcmFnRXZlbnRgIHVzZXIgZnVuY3Rpb24gaXNcbiAqIGNhbGxlZCBvbiBgbW92ZWAgZXZlbnRzLiBUaGUgZHJhZyBzZXF1ZW5jZSBlbmRzIHdoZW4gdGhlIGBoYW5kbGVVcEV2ZW50YFxuICogdXNlciBmdW5jdGlvbiBpcyBjYWxsZWQgYW5kIHJldHVybnMgYGZhbHNlYC5cbiAqIEBhcGlcbiAqL1xudmFyIFBvaW50ZXJJbnRlcmFjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUG9pbnRlckludGVyYWN0aW9uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUG9pbnRlckludGVyYWN0aW9uKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFxuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vSW50ZXJhY3Rpb24uanNcIikuSW50ZXJhY3Rpb25PcHRpb25zfSAqLyAob3B0aW9ucykpIHx8IHRoaXM7XG4gICAgICAgIGlmIChvcHRpb25zLmhhbmRsZURvd25FdmVudCkge1xuICAgICAgICAgICAgX3RoaXMuaGFuZGxlRG93bkV2ZW50ID0gb3B0aW9ucy5oYW5kbGVEb3duRXZlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuaGFuZGxlRHJhZ0V2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVEcmFnRXZlbnQgPSBvcHRpb25zLmhhbmRsZURyYWdFdmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5oYW5kbGVNb3ZlRXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZU1vdmVFdmVudCA9IG9wdGlvbnMuaGFuZGxlTW92ZUV2ZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmhhbmRsZVVwRXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZVVwRXZlbnQgPSBvcHRpb25zLmhhbmRsZVVwRXZlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgICAgICAgIF90aGlzLnN0b3BEb3duID0gb3B0aW9ucy5zdG9wRG93bjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgUG9pbnRlckV2ZW50Pn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyYWNrZWRQb2ludGVyc18gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxQb2ludGVyRXZlbnQ+fVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRQb2ludGVycyA9IFtdO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgbnVtYmVyIG9mIHBvaW50ZXJzIGludm9sdmVkIGluIHRoZSBpbnRlcmFjdGlvbixcbiAgICAgKiBlLmcuIGAyYCB3aGVuIHR3byBmaW5nZXJzIGFyZSB1c2VkLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG51bWJlciBvZiBwb2ludGVycy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5nZXRQb2ludGVyQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHsgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gYW5kIG1heSBjYWxsIGludG9cbiAgICAgKiBvdGhlciBmdW5jdGlvbnMsIGlmIGV2ZW50IHNlcXVlbmNlcyBsaWtlIGUuZy4gJ2RyYWcnIG9yICdkb3duLXVwJyBldGMuIGFyZVxuICAgICAqIGRldGVjdGVkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy51cGRhdGVUcmFja2VkUG9pbnRlcnNfKG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgIGlmICh0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UpIHtcbiAgICAgICAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJEUkFHKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVEcmFnRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgICAgICAgICAvLyBwcmV2ZW50IHBhZ2Ugc2Nyb2xsaW5nIGR1cmluZyBkcmFnZ2luZ1xuICAgICAgICAgICAgICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCkge1xuICAgICAgICAgICAgICAgIHZhciBoYW5kbGVkVXAgPSB0aGlzLmhhbmRsZVVwRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPVxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVkVXAgJiYgdGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04pIHtcbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlZCA9IHRoaXMuaGFuZGxlRG93bkV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGluZ0Rvd25VcFNlcXVlbmNlID0gaGFuZGxlZDtcbiAgICAgICAgICAgICAgICBzdG9wRXZlbnQgPSB0aGlzLnN0b3BEb3duKGhhbmRsZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSTU9WRSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTW92ZUV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICFzdG9wRXZlbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBtb3ZlIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlTW92ZUV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkgeyB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIFwiZG93blwiIGV2ZW50cyBzaG91bGQgYmUgcHJvcGFnYXRlZFxuICAgICAqIHRvIG90aGVyIGludGVyYWN0aW9ucyBvciBzaG91bGQgYmUgc3RvcHBlZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGhhbmRsZWQgV2FzIHRoZSBldmVudCBoYW5kbGVkIGJ5IHRoZSBpbnRlcmFjdGlvbj9cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBTaG91bGQgdGhlIGBkb3duYCBldmVudCBiZSBzdG9wcGVkP1xuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuc3RvcERvd24gPSBmdW5jdGlvbiAoaGFuZGxlZCkge1xuICAgICAgICByZXR1cm4gaGFuZGxlZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUudXBkYXRlVHJhY2tlZFBvaW50ZXJzXyA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKGlzUG9pbnRlckRyYWdnaW5nRXZlbnQobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50XzEgPSBtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudDtcbiAgICAgICAgICAgIHZhciBpZCA9IGV2ZW50XzEucG9pbnRlcklkLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVApIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy50cmFja2VkUG9pbnRlcnNfW2lkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWNrZWRQb2ludGVyc19baWRdID0gZXZlbnRfMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlkIGluIHRoaXMudHJhY2tlZFBvaW50ZXJzXykge1xuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBvbmx5IHdoZW4gdGhlcmUgd2FzIGEgcG9pbnRlcmRvd24gZXZlbnQgZm9yIHRoaXMgcG9pbnRlclxuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tlZFBvaW50ZXJzX1tpZF0gPSBldmVudF8xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50YXJnZXRQb2ludGVycyA9IGdldFZhbHVlcyh0aGlzLnRyYWNrZWRQb2ludGVyc18pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUG9pbnRlckludGVyYWN0aW9uO1xufShJbnRlcmFjdGlvbikpO1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFBvaW50ZXJFdmVudD59IHBvaW50ZXJFdmVudHMgTGlzdCBvZiBldmVudHMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gQ2VudHJvaWQgcGl4ZWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjZW50cm9pZChwb2ludGVyRXZlbnRzKSB7XG4gICAgdmFyIGxlbmd0aCA9IHBvaW50ZXJFdmVudHMubGVuZ3RoO1xuICAgIHZhciBjbGllbnRYID0gMDtcbiAgICB2YXIgY2xpZW50WSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBjbGllbnRYICs9IHBvaW50ZXJFdmVudHNbaV0uY2xpZW50WDtcbiAgICAgICAgY2xpZW50WSArPSBwb2ludGVyRXZlbnRzW2ldLmNsaWVudFk7XG4gICAgfVxuICAgIHJldHVybiBbY2xpZW50WCAvIGxlbmd0aCwgY2xpZW50WSAvIGxlbmd0aF07XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGV2ZW50IGlzIGEgcG9pbnRlcmRvd24sIHBvaW50ZXJkcmFnXG4gKiAgICAgb3IgcG9pbnRlcnVwIGV2ZW50LlxuICovXG5mdW5jdGlvbiBpc1BvaW50ZXJEcmFnZ2luZ0V2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciB0eXBlID0gbWFwQnJvd3NlckV2ZW50LnR5cGU7XG4gICAgcmV0dXJuICh0eXBlID09PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOIHx8XG4gICAgICAgIHR5cGUgPT09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRSQUcgfHxcbiAgICAgICAgdHlwZSA9PT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVApO1xufVxuZXhwb3J0IGRlZmF1bHQgUG9pbnRlckludGVyYWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9pbnRlci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUHJvcGVydHlcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgQUNUSVZFOiAnYWN0aXZlJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9wZXJ0eS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL1NlbGVjdFxuICovXG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuLi9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uRXZlbnRUeXBlIGZyb20gJy4uL0NvbGxlY3Rpb25FdmVudFR5cGUuanMnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4uL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvbiBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCB7IFRSVUUgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgY2xlYXIgfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHsgY3JlYXRlRWRpdGluZ1N0eWxlIH0gZnJvbSAnLi4vc3R5bGUvU3R5bGUuanMnO1xuaW1wb3J0IHsgZXh0ZW5kLCBpbmNsdWRlcyB9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgbmV2ZXIsIHNoaWZ0S2V5T25seSwgc2luZ2xlQ2xpY2sgfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xudmFyIFNlbGVjdEV2ZW50VHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBmZWF0dXJlKHMpIGhhcyBiZWVuIChkZSlzZWxlY3RlZC5cbiAgICAgKiBAZXZlbnQgU2VsZWN0RXZlbnQjc2VsZWN0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNFTEVDVDogJ3NlbGVjdCcsXG59O1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9GZWF0dXJlfSBvclxuICoge0BsaW5rIG1vZHVsZTpvbC9yZW5kZXIvRmVhdHVyZX0gYW5kIGFuXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyfSBhbmQgcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGZlYXR1cmUgbWF5IGJlXG4gKiBzZWxlY3RlZCBvciBgZmFsc2VgIG90aGVyd2lzZS5cbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlLCBpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTpib29sZWFufSBGaWx0ZXJGdW5jdGlvblxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFthZGRDb25kaXRpb25dIEEgZnVuY3Rpb25cbiAqIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIEJ5IGRlZmF1bHQsIHRoaXMgaXMge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufm5ldmVyfS4gVXNlIHRoaXMgaWYgeW91XG4gKiB3YW50IHRvIHVzZSBkaWZmZXJlbnQgZXZlbnRzIGZvciBhZGQgYW5kIHJlbW92ZSBpbnN0ZWFkIG9mIGB0b2dnbGVgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0XG4gKiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGJvb2xlYW4gdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLiBUaGlzIGlzIHRoZSBldmVudFxuICogZm9yIHRoZSBzZWxlY3RlZCBmZWF0dXJlcyBhcyBhIHdob2xlLiBCeSBkZWZhdWx0LCB0aGlzIGlzXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb25+c2luZ2xlQ2xpY2t9LiBDbGlja2luZyBvbiBhIGZlYXR1cmUgc2VsZWN0cyB0aGF0XG4gKiBmZWF0dXJlIGFuZCByZW1vdmVzIGFueSB0aGF0IHdlcmUgaW4gdGhlIHNlbGVjdGlvbi4gQ2xpY2tpbmcgb3V0c2lkZSBhbnlcbiAqIGZlYXR1cmUgcmVtb3ZlcyBhbGwgZnJvbSB0aGUgc2VsZWN0aW9uLlxuICogU2VlIGB0b2dnbGVgLCBgYWRkYCwgYHJlbW92ZWAgb3B0aW9ucyBmb3IgYWRkaW5nL3JlbW92aW5nIGV4dHJhIGZlYXR1cmVzIHRvL1xuICogZnJvbSB0aGUgc2VsZWN0aW9uLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0PnxmdW5jdGlvbihpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gW2xheWVyc11cbiAqIEEgbGlzdCBvZiBsYXllcnMgZnJvbSB3aGljaCBmZWF0dXJlcyBzaG91bGQgYmUgc2VsZWN0ZWQuIEFsdGVybmF0aXZlbHksIGFcbiAqIGZpbHRlciBmdW5jdGlvbiBjYW4gYmUgcHJvdmlkZWQuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaCBsYXllclxuICogaW4gdGhlIG1hcCBhbmQgc2hvdWxkIHJldHVybiBgdHJ1ZWAgZm9yIGxheWVycyB0aGF0IHlvdSB3YW50IHRvIGJlXG4gKiBzZWxlY3RhYmxlLiBJZiB0aGUgb3B0aW9uIGlzIGFic2VudCwgYWxsIHZpc2libGUgbGF5ZXJzIHdpbGwgYmUgY29uc2lkZXJlZFxuICogc2VsZWN0YWJsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVMaWtlfG51bGx9IFtzdHlsZV1cbiAqIFN0eWxlIGZvciB0aGUgc2VsZWN0ZWQgZmVhdHVyZXMuIEJ5IGRlZmF1bHQgdGhlIGRlZmF1bHQgZWRpdCBzdHlsZSBpcyB1c2VkXG4gKiAoc2VlIHtAbGluayBtb2R1bGU6b2wvc3R5bGV9KS4gU2V0IHRvIGBudWxsYCBpZiB0aGlzIGludGVyYWN0aW9uIHNob3VsZCBub3QgYXBwbHlcbiAqIGFueSBzdHlsZSBjaGFuZ2VzIGZvciBzZWxlY3RlZCBmZWF0dXJlcy5cbiAqIElmIHNldCB0byBhIGZhbHNleSB2YWx1ZSwgdGhlIHNlbGVjdGVkIGZlYXR1cmUncyBzdHlsZSB3aWxsIG5vdCBjaGFuZ2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbcmVtb3ZlQ29uZGl0aW9uXSBBIGZ1bmN0aW9uXG4gKiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gKiBCeSBkZWZhdWx0LCB0aGlzIGlzIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn5uZXZlcn0uIFVzZSB0aGlzIGlmIHlvdVxuICogd2FudCB0byB1c2UgZGlmZmVyZW50IGV2ZW50cyBmb3IgYWRkIGFuZCByZW1vdmUgaW5zdGVhZCBvZiBgdG9nZ2xlYC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFt0b2dnbGVDb25kaXRpb25dIEEgZnVuY3Rpb25cbiAqIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC4gVGhpcyBpcyBpbiBhZGRpdGlvblxuICogdG8gdGhlIGBjb25kaXRpb25gIGV2ZW50LiBCeSBkZWZhdWx0LFxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufnNoaWZ0S2V5T25seX0sIGkuZS4gcHJlc3NpbmcgYHNoaWZ0YCBhc1xuICogd2VsbCBhcyB0aGUgYGNvbmRpdGlvbmAgZXZlbnQsIGFkZHMgdGhhdCBmZWF0dXJlIHRvIHRoZSBjdXJyZW50IHNlbGVjdGlvbiBpZlxuICogaXQgaXMgbm90IGN1cnJlbnRseSBzZWxlY3RlZCwgYW5kIHJlbW92ZXMgaXQgaWYgaXQgaXMuIFNlZSBgYWRkYCBhbmQgYHJlbW92ZWBcbiAqIGlmIHlvdSB3YW50IHRvIHVzZSBkaWZmZXJlbnQgZXZlbnRzIGluc3RlYWQgb2YgYSB0b2dnbGUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFttdWx0aT1mYWxzZV0gQSBib29sZWFuIHRoYXQgZGV0ZXJtaW5lcyBpZiB0aGUgZGVmYXVsdFxuICogYmVoYXZpb3VyIHNob3VsZCBzZWxlY3Qgb25seSBzaW5nbGUgZmVhdHVyZXMgb3IgYWxsIChvdmVybGFwcGluZykgZmVhdHVyZXMgYXRcbiAqIHRoZSBjbGlja2VkIG1hcCBwb3NpdGlvbi4gVGhlIGRlZmF1bHQgb2YgYGZhbHNlYCBtZWFucyBzaW5nbGUgc2VsZWN0LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0Pn0gW2ZlYXR1cmVzXVxuICogQ29sbGVjdGlvbiB3aGVyZSB0aGUgaW50ZXJhY3Rpb24gd2lsbCBwbGFjZSBzZWxlY3RlZCBmZWF0dXJlcy4gT3B0aW9uYWwuIElmXG4gKiBub3Qgc2V0IHRoZSBpbnRlcmFjdGlvbiB3aWxsIGNyZWF0ZSBhIGNvbGxlY3Rpb24uIEluIGFueSBjYXNlIHRoZSBjb2xsZWN0aW9uXG4gKiB1c2VkIGJ5IHRoZSBpbnRlcmFjdGlvbiBpcyByZXR1cm5lZCBieVxuICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9TZWxlY3R+U2VsZWN0I2dldEZlYXR1cmVzfS5cbiAqIEBwcm9wZXJ0eSB7RmlsdGVyRnVuY3Rpb259IFtmaWx0ZXJdIEEgZnVuY3Rpb25cbiAqIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9GZWF0dXJlfSBhbmQgYW5cbiAqIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ9IGFuZCByZXR1cm5zIGB0cnVlYCBpZiB0aGUgZmVhdHVyZSBtYXkgYmVcbiAqIHNlbGVjdGVkIG9yIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtoaXRUb2xlcmFuY2U9MF0gSGl0LWRldGVjdGlvbiB0b2xlcmFuY2UuIFBpeGVscyBpbnNpZGVcbiAqIHRoZSByYWRpdXMgYXJvdW5kIHRoZSBnaXZlbiBwb3NpdGlvbiB3aWxsIGJlIGNoZWNrZWQgZm9yIGZlYXR1cmVzLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vU2VsZWN0flNlbGVjdH0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXMgb2ZcbiAqIHRoaXMgdHlwZS5cbiAqL1xudmFyIFNlbGVjdEV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTZWxlY3RFdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1NlbGVjdEV2ZW50VHlwZX0gdHlwZSBUaGUgZXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD59IHNlbGVjdGVkIFNlbGVjdGVkIGZlYXR1cmVzLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0Pn0gZGVzZWxlY3RlZCBEZXNlbGVjdGVkIGZlYXR1cmVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBBc3NvY2lhdGVkXG4gICAgICogICAgIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTZWxlY3RFdmVudCh0eXBlLCBzZWxlY3RlZCwgZGVzZWxlY3RlZCwgbWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHR5cGUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZWxlY3RlZCBmZWF0dXJlcyBhcnJheS5cbiAgICAgICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXNlbGVjdGVkIGZlYXR1cmVzIGFycmF5LlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGVzZWxlY3RlZCA9IGRlc2VsZWN0ZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBc3NvY2lhdGVkIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fS5cbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBCcm93c2VyRXZlbnQgPSBtYXBCcm93c2VyRXZlbnQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFNlbGVjdEV2ZW50O1xufShFdmVudCkpO1xuZXhwb3J0IHsgU2VsZWN0RXZlbnQgfTtcbi8qKlxuICogT3JpZ2luYWwgZmVhdHVyZSBzdHlsZXMgdG8gcmVzZXQgdG8gd2hlbiBmZWF0dXJlcyBhcmUgbm8gbG9uZ2VyIHNlbGVjdGVkLlxuICogQHR5cGUge09iamVjdC48bnVtYmVyLCBpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fEFycmF5LjxpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0PnxpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUZ1bmN0aW9uPn1cbiAqL1xudmFyIG9yaWdpbmFsRmVhdHVyZVN0eWxlcyA9IHt9O1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBJbnRlcmFjdGlvbiBmb3Igc2VsZWN0aW5nIHZlY3RvciBmZWF0dXJlcy4gQnkgZGVmYXVsdCwgc2VsZWN0ZWQgZmVhdHVyZXMgYXJlXG4gKiBzdHlsZWQgZGlmZmVyZW50bHksIHNvIHRoaXMgaW50ZXJhY3Rpb24gY2FuIGJlIHVzZWQgZm9yIHZpc3VhbCBoaWdobGlnaHRpbmcsXG4gKiBhcyB3ZWxsIGFzIHNlbGVjdGluZyBmZWF0dXJlcyBmb3Igb3RoZXIgYWN0aW9ucywgc3VjaCBhcyBtb2RpZmljYXRpb24gb3JcbiAqIG91dHB1dC4gVGhlcmUgYXJlIHRocmVlIHdheXMgb2YgY29udHJvbGxpbmcgd2hpY2ggZmVhdHVyZXMgYXJlIHNlbGVjdGVkOlxuICogdXNpbmcgdGhlIGJyb3dzZXIgZXZlbnQgYXMgZGVmaW5lZCBieSB0aGUgYGNvbmRpdGlvbmAgYW5kIG9wdGlvbmFsbHkgdGhlXG4gKiBgdG9nZ2xlYCwgYGFkZGAvYHJlbW92ZWAsIGFuZCBgbXVsdGlgIG9wdGlvbnM7IGEgYGxheWVyc2AgZmlsdGVyOyBhbmQgYVxuICogZnVydGhlciBmZWF0dXJlIGZpbHRlciB1c2luZyB0aGUgYGZpbHRlcmAgb3B0aW9uLlxuICpcbiAqIFNlbGVjdGVkIGZlYXR1cmVzIGFyZSBhZGRlZCB0byBhbiBpbnRlcm5hbCB1bm1hbmFnZWQgbGF5ZXIuXG4gKlxuICogQGZpcmVzIFNlbGVjdEV2ZW50XG4gKiBAYXBpXG4gKi9cbnZhciBTZWxlY3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNlbGVjdCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFNlbGVjdChvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ib3VuZEFkZEZlYXR1cmVfID0gX3RoaXMuYWRkRmVhdHVyZV8uYmluZChfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYm91bmRSZW1vdmVGZWF0dXJlXyA9IF90aGlzLnJlbW92ZUZlYXR1cmVfLmJpbmQoX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBzaW5nbGVDbGljaztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFkZENvbmRpdGlvbl8gPSBvcHRpb25zLmFkZENvbmRpdGlvbiA/IG9wdGlvbnMuYWRkQ29uZGl0aW9uIDogbmV2ZXI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW1vdmVDb25kaXRpb25fID0gb3B0aW9ucy5yZW1vdmVDb25kaXRpb25cbiAgICAgICAgICAgID8gb3B0aW9ucy5yZW1vdmVDb25kaXRpb25cbiAgICAgICAgICAgIDogbmV2ZXI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50b2dnbGVDb25kaXRpb25fID0gb3B0aW9ucy50b2dnbGVDb25kaXRpb25cbiAgICAgICAgICAgID8gb3B0aW9ucy50b2dnbGVDb25kaXRpb25cbiAgICAgICAgICAgIDogc2hpZnRLZXlPbmx5O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tdWx0aV8gPSBvcHRpb25zLm11bHRpID8gb3B0aW9ucy5tdWx0aSA6IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0ZpbHRlckZ1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZmlsdGVyXyA9IG9wdGlvbnMuZmlsdGVyID8gb3B0aW9ucy5maWx0ZXIgOiBUUlVFO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmhpdFRvbGVyYW5jZV8gPSBvcHRpb25zLmhpdFRvbGVyYW5jZSA/IG9wdGlvbnMuaGl0VG9sZXJhbmNlIDogMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fEFycmF5LjxpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0PnxpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUZ1bmN0aW9ufG51bGx9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdHlsZV8gPVxuICAgICAgICAgICAgb3B0aW9ucy5zdHlsZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zdHlsZSA6IGdldERlZmF1bHRTdHlsZUZ1bmN0aW9uKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZmVhdHVyZXNfID0gb3B0aW9ucy5mZWF0dXJlcyB8fCBuZXcgQ29sbGVjdGlvbigpO1xuICAgICAgICAvKiogQHR5cGUge2Z1bmN0aW9uKGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSAqL1xuICAgICAgICB2YXIgbGF5ZXJGaWx0ZXI7XG4gICAgICAgIGlmIChvcHRpb25zLmxheWVycykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmxheWVycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGxheWVyRmlsdGVyID0gb3B0aW9ucy5sYXllcnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXJzXzEgPSBvcHRpb25zLmxheWVycztcbiAgICAgICAgICAgICAgICBsYXllckZpbHRlciA9IGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5jbHVkZXMobGF5ZXJzXzEsIGxheWVyKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGF5ZXJGaWx0ZXIgPSBUUlVFO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXllckZpbHRlcl8gPSBsYXllckZpbHRlcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGFzc29jaWF0aW9uIGJldHdlZW4gc2VsZWN0ZWQgZmVhdHVyZSAoa2V5KVxuICAgICAgICAgKiBhbmQgbGF5ZXIgKHZhbHVlKVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mZWF0dXJlTGF5ZXJBc3NvY2lhdGlvbl8gPSB7fTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgU2VsZWN0LnByb3RvdHlwZS5hZGRGZWF0dXJlTGF5ZXJBc3NvY2lhdGlvbl8gPSBmdW5jdGlvbiAoZmVhdHVyZSwgbGF5ZXIpIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlTGF5ZXJBc3NvY2lhdGlvbl9bZ2V0VWlkKGZlYXR1cmUpXSA9IGxheWVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzZWxlY3RlZCBmZWF0dXJlcy5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0Pn0gRmVhdHVyZXMgY29sbGVjdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2VsZWN0LnByb3RvdHlwZS5nZXRGZWF0dXJlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZXNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgSGl0LWRldGVjdGlvbiB0b2xlcmFuY2UuXG4gICAgICogQHJldHVybnMge251bWJlcn0gSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNlbGVjdC5wcm90b3R5cGUuZ2V0SGl0VG9sZXJhbmNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaXRUb2xlcmFuY2VfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYXNzb2NpYXRlZCB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL1ZlY3Rvcn5WZWN0b3IgdmVjdG9ybGF5ZXJ9IG9mXG4gICAgICogdGhlIChsYXN0KSBzZWxlY3RlZCBmZWF0dXJlLiBOb3RlIHRoYXQgdGhpcyB3aWxsIG5vdCB3b3JrIHdpdGggYW55XG4gICAgICogcHJvZ3JhbW1hdGljIG1ldGhvZCBsaWtlIHB1c2hpbmcgZmVhdHVyZXMgdG9cbiAgICAgKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL1NlbGVjdH5TZWxlY3QjZ2V0RmVhdHVyZXMgY29sbGVjdGlvbn0uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmVcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoJy4uL2xheWVyL1ZlY3Rvci5qcycpLmRlZmF1bHR9IExheWVyLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTZWxlY3QucHJvdG90eXBlLmdldExheWVyID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KCcuLi9sYXllci9WZWN0b3IuanMnKS5kZWZhdWx0fSAqLyAodGhpc1xuICAgICAgICAgICAgLmZlYXR1cmVMYXllckFzc29jaWF0aW9uX1tnZXRVaWQoZmVhdHVyZSldKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhpdC1kZXRlY3Rpb24gdG9sZXJhbmNlLiBQaXhlbHMgaW5zaWRlIHRoZSByYWRpdXMgYXJvdW5kIHRoZSBnaXZlbiBwb3NpdGlvblxuICAgICAqIHdpbGwgYmUgY2hlY2tlZCBmb3IgZmVhdHVyZXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2VsZWN0LnByb3RvdHlwZS5zZXRIaXRUb2xlcmFuY2UgPSBmdW5jdGlvbiAoaGl0VG9sZXJhbmNlKSB7XG4gICAgICAgIHRoaXMuaGl0VG9sZXJhbmNlXyA9IGhpdFRvbGVyYW5jZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgaW50ZXJhY3Rpb24gZnJvbSBpdHMgY3VycmVudCBtYXAsIGlmIGFueSwgIGFuZCBhdHRhY2ggaXQgdG8gYSBuZXdcbiAgICAgKiBtYXAsIGlmIGFueS4gUGFzcyBgbnVsbGAgdG8ganVzdCByZW1vdmUgdGhlIGludGVyYWN0aW9uIGZyb20gdGhlIGN1cnJlbnQgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNlbGVjdC5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICB2YXIgY3VycmVudE1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgICAgIGlmIChjdXJyZW50TWFwICYmIHRoaXMuc3R5bGVfKSB7XG4gICAgICAgICAgICB0aGlzLmZlYXR1cmVzXy5mb3JFYWNoKHRoaXMucmVzdG9yZVByZXZpb3VzU3R5bGVfLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuc2V0TWFwLmNhbGwodGhpcywgbWFwKTtcbiAgICAgICAgaWYgKG1hcCkge1xuICAgICAgICAgICAgdGhpcy5mZWF0dXJlc18uYWRkRXZlbnRMaXN0ZW5lcihDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgdGhpcy5ib3VuZEFkZEZlYXR1cmVfKTtcbiAgICAgICAgICAgIHRoaXMuZmVhdHVyZXNfLmFkZEV2ZW50TGlzdGVuZXIoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIHRoaXMuYm91bmRSZW1vdmVGZWF0dXJlXyk7XG4gICAgICAgICAgICBpZiAodGhpcy5zdHlsZV8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZlYXR1cmVzXy5mb3JFYWNoKHRoaXMuYXBwbHlTZWxlY3RlZFN0eWxlXy5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZmVhdHVyZXNfLnJlbW92ZUV2ZW50TGlzdGVuZXIoQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIHRoaXMuYm91bmRBZGRGZWF0dXJlXyk7XG4gICAgICAgICAgICB0aGlzLmZlYXR1cmVzXy5yZW1vdmVFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCB0aGlzLmJvdW5kUmVtb3ZlRmVhdHVyZV8pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldnQgRXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBTZWxlY3QucHJvdG90eXBlLmFkZEZlYXR1cmVfID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICB2YXIgZmVhdHVyZSA9IGV2dC5lbGVtZW50O1xuICAgICAgICBpZiAodGhpcy5zdHlsZV8pIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlTZWxlY3RlZFN0eWxlXyhmZWF0dXJlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZ0IEV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgU2VsZWN0LnByb3RvdHlwZS5yZW1vdmVGZWF0dXJlXyA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgdmFyIGZlYXR1cmUgPSBldnQuZWxlbWVudDtcbiAgICAgICAgaWYgKHRoaXMuc3R5bGVfKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3RvcmVQcmV2aW91c1N0eWxlXyhmZWF0dXJlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVMaWtlfG51bGx9IFNlbGVjdCBzdHlsZS5cbiAgICAgKi9cbiAgICBTZWxlY3QucHJvdG90eXBlLmdldFN0eWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHlsZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBTZWxlY3QucHJvdG90eXBlLmFwcGx5U2VsZWN0ZWRTdHlsZV8gPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICB2YXIga2V5ID0gZ2V0VWlkKGZlYXR1cmUpO1xuICAgICAgICBpZiAoIShrZXkgaW4gb3JpZ2luYWxGZWF0dXJlU3R5bGVzKSkge1xuICAgICAgICAgICAgb3JpZ2luYWxGZWF0dXJlU3R5bGVzW2tleV0gPSBmZWF0dXJlLmdldFN0eWxlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZmVhdHVyZS5zZXRTdHlsZSh0aGlzLnN0eWxlXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBTZWxlY3QucHJvdG90eXBlLnJlc3RvcmVQcmV2aW91c1N0eWxlXyA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgIHZhciBpbnRlcmFjdGlvbnMgPSB0aGlzLmdldE1hcCgpLmdldEludGVyYWN0aW9ucygpLmdldEFycmF5KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSBpbnRlcmFjdGlvbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgIHZhciBpbnRlcmFjdGlvbiA9IGludGVyYWN0aW9uc1tpXTtcbiAgICAgICAgICAgIGlmIChpbnRlcmFjdGlvbiAhPT0gdGhpcyAmJlxuICAgICAgICAgICAgICAgIGludGVyYWN0aW9uIGluc3RhbmNlb2YgU2VsZWN0ICYmXG4gICAgICAgICAgICAgICAgaW50ZXJhY3Rpb24uZ2V0U3R5bGUoKSAmJlxuICAgICAgICAgICAgICAgIGludGVyYWN0aW9uLmdldEZlYXR1cmVzKCkuZ2V0QXJyYXkoKS5sYXN0SW5kZXhPZihmZWF0dXJlKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBmZWF0dXJlLnNldFN0eWxlKGludGVyYWN0aW9uLmdldFN0eWxlKCkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIga2V5ID0gZ2V0VWlkKGZlYXR1cmUpO1xuICAgICAgICBmZWF0dXJlLnNldFN0eWxlKG9yaWdpbmFsRmVhdHVyZVN0eWxlc1trZXldKTtcbiAgICAgICAgZGVsZXRlIG9yaWdpbmFsRmVhdHVyZVN0eWxlc1trZXldO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBTZWxlY3QucHJvdG90eXBlLnJlbW92ZUZlYXR1cmVMYXllckFzc29jaWF0aW9uXyA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmZlYXR1cmVMYXllckFzc29jaWF0aW9uX1tnZXRVaWQoZmVhdHVyZSldO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IGFuZCBtYXkgY2hhbmdlIHRoZVxuICAgICAqIHNlbGVjdGVkIHN0YXRlIG9mIGZlYXR1cmVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICogQHRoaXMge1NlbGVjdH1cbiAgICAgKi9cbiAgICBTZWxlY3QucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYWRkID0gdGhpcy5hZGRDb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgIHZhciByZW1vdmUgPSB0aGlzLnJlbW92ZUNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgdmFyIHRvZ2dsZSA9IHRoaXMudG9nZ2xlQ29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICB2YXIgc2V0ID0gIWFkZCAmJiAhcmVtb3ZlICYmICF0b2dnbGU7XG4gICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICB2YXIgZmVhdHVyZXMgPSB0aGlzLmdldEZlYXR1cmVzKCk7XG4gICAgICAgIHZhciBkZXNlbGVjdGVkID0gW107XG4gICAgICAgIHZhciBzZWxlY3RlZCA9IFtdO1xuICAgICAgICBpZiAoc2V0KSB7XG4gICAgICAgICAgICAvLyBSZXBsYWNlIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgZmVhdHVyZShzKSB3aXRoIHRoZSBmZWF0dXJlKHMpIGF0IHRoZVxuICAgICAgICAgICAgLy8gcGl4ZWwsIG9yIGNsZWFyIHRoZSBzZWxlY3RlZCBmZWF0dXJlKHMpIGlmIHRoZXJlIGlzIG5vIGZlYXR1cmUgYXRcbiAgICAgICAgICAgIC8vIHRoZSBwaXhlbC5cbiAgICAgICAgICAgIGNsZWFyKHRoaXMuZmVhdHVyZUxheWVyQXNzb2NpYXRpb25fKTtcbiAgICAgICAgICAgIG1hcC5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwobWFwQnJvd3NlckV2ZW50LnBpeGVsLCBcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICAgICAgICAgICAgICogQHJldHVybiB7Ym9vbGVhbnx1bmRlZmluZWR9IENvbnRpbnVlIHRvIGl0ZXJhdGUgb3ZlciB0aGUgZmVhdHVyZXMuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIChmZWF0dXJlLCBsYXllcikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlcl8oZmVhdHVyZSwgbGF5ZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkLnB1c2goZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRmVhdHVyZUxheWVyQXNzb2NpYXRpb25fKGZlYXR1cmUsIGxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF0aGlzLm11bHRpXztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LmJpbmQodGhpcyksIHtcbiAgICAgICAgICAgICAgICBsYXllckZpbHRlcjogdGhpcy5sYXllckZpbHRlcl8sXG4gICAgICAgICAgICAgICAgaGl0VG9sZXJhbmNlOiB0aGlzLmhpdFRvbGVyYW5jZV8sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBmZWF0dXJlcy5nZXRMZW5ndGgoKSAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZlYXR1cmUgPSBmZWF0dXJlcy5pdGVtKGkpO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHNlbGVjdGVkLmluZGV4T2YoZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZmVhdHVyZSBpcyBhbHJlYWR5IHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlcy5yZW1vdmUoZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgICAgIGRlc2VsZWN0ZWQucHVzaChmZWF0dXJlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgZmVhdHVyZXMuZXh0ZW5kKHNlbGVjdGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIE1vZGlmeSB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGZlYXR1cmUocykuXG4gICAgICAgICAgICBtYXAuZm9yRWFjaEZlYXR1cmVBdFBpeGVsKG1hcEJyb3dzZXJFdmVudC5waXhlbCwgXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAgICAgICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW58dW5kZWZpbmVkfSBDb250aW51ZSB0byBpdGVyYXRlIG92ZXIgdGhlIGZlYXR1cmVzLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiAoZmVhdHVyZSwgbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJfKGZlYXR1cmUsIGxheWVyKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGFkZCB8fCB0b2dnbGUpICYmICFpbmNsdWRlcyhmZWF0dXJlcy5nZXRBcnJheSgpLCBmZWF0dXJlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQucHVzaChmZWF0dXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRmVhdHVyZUxheWVyQXNzb2NpYXRpb25fKGZlYXR1cmUsIGxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgocmVtb3ZlIHx8IHRvZ2dsZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVzKGZlYXR1cmVzLmdldEFycmF5KCksIGZlYXR1cmUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNlbGVjdGVkLnB1c2goZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZlYXR1cmVMYXllckFzc29jaWF0aW9uXyhmZWF0dXJlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXRoaXMubXVsdGlfO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSwge1xuICAgICAgICAgICAgICAgIGxheWVyRmlsdGVyOiB0aGlzLmxheWVyRmlsdGVyXyxcbiAgICAgICAgICAgICAgICBoaXRUb2xlcmFuY2U6IHRoaXMuaGl0VG9sZXJhbmNlXyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRlc2VsZWN0ZWQubGVuZ3RoIC0gMTsgaiA+PSAwOyAtLWopIHtcbiAgICAgICAgICAgICAgICBmZWF0dXJlcy5yZW1vdmUoZGVzZWxlY3RlZFtqXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmZWF0dXJlcy5leHRlbmQoc2VsZWN0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxlY3RlZC5sZW5ndGggPiAwIHx8IGRlc2VsZWN0ZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBTZWxlY3RFdmVudChTZWxlY3RFdmVudFR5cGUuU0VMRUNULCBzZWxlY3RlZCwgZGVzZWxlY3RlZCwgbWFwQnJvd3NlckV2ZW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICByZXR1cm4gU2VsZWN0O1xufShJbnRlcmFjdGlvbikpO1xuLyoqXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUZ1bmN0aW9ufSBTdHlsZXMuXG4gKi9cbmZ1bmN0aW9uIGdldERlZmF1bHRTdHlsZUZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHlsZXMgPSBjcmVhdGVFZGl0aW5nU3R5bGUoKTtcbiAgICBleHRlbmQoc3R5bGVzW0dlb21ldHJ5VHlwZS5QT0xZR09OXSwgc3R5bGVzW0dlb21ldHJ5VHlwZS5MSU5FX1NUUklOR10pO1xuICAgIGV4dGVuZChzdHlsZXNbR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT05dLCBzdHlsZXNbR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HXSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgIGlmICghZmVhdHVyZS5nZXRHZW9tZXRyeSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3R5bGVzW2ZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRUeXBlKCldO1xuICAgIH07XG59XG5leHBvcnQgZGVmYXVsdCBTZWxlY3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TZWxlY3QuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL21hdGhcbiAqL1xuLyoqXG4gKiBUYWtlcyBhIG51bWJlciBhbmQgY2xhbXBzIGl0IHRvIHdpdGhpbiB0aGUgcHJvdmlkZWQgYm91bmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFRoZSBpbnB1dCBudW1iZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gbWluIFRoZSBtaW5pbXVtIHZhbHVlIHRvIHJldHVybi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggVGhlIG1heGltdW0gdmFsdWUgdG8gcmV0dXJuLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5wdXQgbnVtYmVyIGlmIGl0IGlzIHdpdGhpbiBib3VuZHMsIG9yIHRoZSBuZWFyZXN0XG4gKiAgICAgbnVtYmVyIHdpdGhpbiB0aGUgYm91bmRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAodmFsdWUsIG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHZhbHVlLCBtaW4pLCBtYXgpO1xufVxuLyoqXG4gKiBSZXR1cm4gdGhlIGh5cGVyYm9saWMgY29zaW5lIG9mIGEgZ2l2ZW4gbnVtYmVyLiBUaGUgbWV0aG9kIHdpbGwgdXNlIHRoZVxuICogbmF0aXZlIGBNYXRoLmNvc2hgIGZ1bmN0aW9uIGlmIGl0IGlzIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHRoZSBoeXBlcmJvbGljXG4gKiBjb3NpbmUgd2lsbCBiZSBjYWxjdWxhdGVkIHZpYSB0aGUgcmVmZXJlbmNlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBNb3ppbGxhXG4gKiBkZXZlbG9wZXIgbmV0d29yay5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHJldHVybiB7bnVtYmVyfSBIeXBlcmJvbGljIGNvc2luZSBvZiB4LlxuICovXG5leHBvcnQgdmFyIGNvc2ggPSAoZnVuY3Rpb24gKCkge1xuICAgIC8vIFdyYXBwZWQgaW4gYSBpaWZlLCB0byBzYXZlIHRoZSBvdmVyaGVhZCBvZiBjaGVja2luZyBmb3IgdGhlIG5hdGl2ZVxuICAgIC8vIGltcGxlbWVudGF0aW9uIG9uIGV2ZXJ5IGludm9jYXRpb24uXG4gICAgdmFyIGNvc2g7XG4gICAgaWYgKCdjb3NoJyBpbiBNYXRoKSB7XG4gICAgICAgIC8vIFRoZSBlbnZpcm9ubWVudCBzdXBwb3J0cyB0aGUgbmF0aXZlIE1hdGguY29zaCBmdW5jdGlvbiwgdXNlIGl04oCmXG4gICAgICAgIGNvc2ggPSBNYXRoLmNvc2g7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyDigKYgZWxzZSwgdXNlIHRoZSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24gb2YgTUROOlxuICAgICAgICBjb3NoID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHZhciB5ID0gLyoqIEB0eXBlIHtNYXRofSAqLyAoTWF0aCkuZXhwKHgpO1xuICAgICAgICAgICAgcmV0dXJuICh5ICsgMSAvIHkpIC8gMjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGNvc2g7XG59KSgpO1xuLyoqXG4gKiBSZXR1cm4gdGhlIGJhc2UgMiBsb2dhcml0aG0gb2YgYSBnaXZlbiBudW1iZXIuIFRoZSBtZXRob2Qgd2lsbCB1c2UgdGhlXG4gKiBuYXRpdmUgYE1hdGgubG9nMmAgZnVuY3Rpb24gaWYgaXQgaXMgYXZhaWxhYmxlLCBvdGhlcndpc2UgdGhlIGJhc2UgMlxuICogbG9nYXJpdGhtIHdpbGwgYmUgY2FsY3VsYXRlZCB2aWEgdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGVcbiAqIE1vemlsbGEgZGV2ZWxvcGVyIG5ldHdvcmsuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEByZXR1cm4ge251bWJlcn0gQmFzZSAyIGxvZ2FyaXRobSBvZiB4LlxuICovXG5leHBvcnQgdmFyIGxvZzIgPSAoZnVuY3Rpb24gKCkge1xuICAgIC8vIFdyYXBwZWQgaW4gYSBpaWZlLCB0byBzYXZlIHRoZSBvdmVyaGVhZCBvZiBjaGVja2luZyBmb3IgdGhlIG5hdGl2ZVxuICAgIC8vIGltcGxlbWVudGF0aW9uIG9uIGV2ZXJ5IGludm9jYXRpb24uXG4gICAgdmFyIGxvZzI7XG4gICAgaWYgKCdsb2cyJyBpbiBNYXRoKSB7XG4gICAgICAgIC8vIFRoZSBlbnZpcm9ubWVudCBzdXBwb3J0cyB0aGUgbmF0aXZlIE1hdGgubG9nMiBmdW5jdGlvbiwgdXNlIGl04oCmXG4gICAgICAgIGxvZzIgPSBNYXRoLmxvZzI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyDigKYgZWxzZSwgdXNlIHRoZSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24gb2YgTUROOlxuICAgICAgICBsb2cyID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmxvZyh4KSAqIE1hdGguTE9HMkU7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBsb2cyO1xufSkoKTtcbi8qKlxuICogUmV0dXJucyB0aGUgc3F1YXJlIG9mIHRoZSBjbG9zZXN0IGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50ICh4LCB5KSBhbmQgdGhlXG4gKiBsaW5lIHNlZ21lbnQgKHgxLCB5MSkgdG8gKHgyLCB5MikuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MSBYMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MSBZMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MiBYMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MiBZMi5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWRTZWdtZW50RGlzdGFuY2UoeCwgeSwgeDEsIHkxLCB4MiwgeTIpIHtcbiAgICB2YXIgZHggPSB4MiAtIHgxO1xuICAgIHZhciBkeSA9IHkyIC0geTE7XG4gICAgaWYgKGR4ICE9PSAwIHx8IGR5ICE9PSAwKSB7XG4gICAgICAgIHZhciB0ID0gKCh4IC0geDEpICogZHggKyAoeSAtIHkxKSAqIGR5KSAvIChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgICAgIGlmICh0ID4gMSkge1xuICAgICAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgICAgIHkxID0geTI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodCA+IDApIHtcbiAgICAgICAgICAgIHgxICs9IGR4ICogdDtcbiAgICAgICAgICAgIHkxICs9IGR5ICogdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3F1YXJlZERpc3RhbmNlKHgsIHksIHgxLCB5MSk7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHNxdWFyZSBvZiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgcG9pbnRzICh4MSwgeTEpIGFuZCAoeDIsIHkyKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MSBYMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MSBZMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MiBYMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MiBZMi5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZSh4MSwgeTEsIHgyLCB5Mikge1xuICAgIHZhciBkeCA9IHgyIC0geDE7XG4gICAgdmFyIGR5ID0geTIgLSB5MTtcbiAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XG59XG4vKipcbiAqIFNvbHZlcyBzeXN0ZW0gb2YgbGluZWFyIGVxdWF0aW9ucyB1c2luZyBHYXVzc2lhbiBlbGltaW5hdGlvbiBtZXRob2QuXG4gKlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gbWF0IEF1Z21lbnRlZCBtYXRyaXggKG4geCBuICsgMSBjb2x1bW4pXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiByb3ctbWFqb3Igb3JkZXIuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUaGUgcmVzdWx0aW5nIHZlY3Rvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvbHZlTGluZWFyU3lzdGVtKG1hdCkge1xuICAgIHZhciBuID0gbWF0Lmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICAvLyBGaW5kIG1heCBpbiB0aGUgaS10aCBjb2x1bW4gKGlnbm9yaW5nIGkgLSAxIGZpcnN0IHJvd3MpXG4gICAgICAgIHZhciBtYXhSb3cgPSBpO1xuICAgICAgICB2YXIgbWF4RWwgPSBNYXRoLmFicyhtYXRbaV1baV0pO1xuICAgICAgICBmb3IgKHZhciByID0gaSArIDE7IHIgPCBuOyByKyspIHtcbiAgICAgICAgICAgIHZhciBhYnNWYWx1ZSA9IE1hdGguYWJzKG1hdFtyXVtpXSk7XG4gICAgICAgICAgICBpZiAoYWJzVmFsdWUgPiBtYXhFbCkge1xuICAgICAgICAgICAgICAgIG1heEVsID0gYWJzVmFsdWU7XG4gICAgICAgICAgICAgICAgbWF4Um93ID0gcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF4RWwgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBtYXRyaXggaXMgc2luZ3VsYXJcbiAgICAgICAgfVxuICAgICAgICAvLyBTd2FwIG1heCByb3cgd2l0aCBpLXRoIChjdXJyZW50KSByb3dcbiAgICAgICAgdmFyIHRtcCA9IG1hdFttYXhSb3ddO1xuICAgICAgICBtYXRbbWF4Um93XSA9IG1hdFtpXTtcbiAgICAgICAgbWF0W2ldID0gdG1wO1xuICAgICAgICAvLyBTdWJ0cmFjdCB0aGUgaS10aCByb3cgdG8gbWFrZSBhbGwgdGhlIHJlbWFpbmluZyByb3dzIDAgaW4gdGhlIGktdGggY29sdW1uXG4gICAgICAgIGZvciAodmFyIGogPSBpICsgMTsgaiA8IG47IGorKykge1xuICAgICAgICAgICAgdmFyIGNvZWYgPSAtbWF0W2pdW2ldIC8gbWF0W2ldW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgayA9IGk7IGsgPCBuICsgMTsgaysrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT0gaykge1xuICAgICAgICAgICAgICAgICAgICBtYXRbal1ba10gPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0W2pdW2tdICs9IGNvZWYgKiBtYXRbaV1ba107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFNvbHZlIEF4PWIgZm9yIHVwcGVyIHRyaWFuZ3VsYXIgbWF0cml4IEEgKG1hdClcbiAgICB2YXIgeCA9IG5ldyBBcnJheShuKTtcbiAgICBmb3IgKHZhciBsID0gbiAtIDE7IGwgPj0gMDsgbC0tKSB7XG4gICAgICAgIHhbbF0gPSBtYXRbbF1bbl0gLyBtYXRbbF1bbF07XG4gICAgICAgIGZvciAodmFyIG0gPSBsIC0gMTsgbSA+PSAwOyBtLS0pIHtcbiAgICAgICAgICAgIG1hdFttXVtuXSAtPSBtYXRbbV1bbF0gKiB4W2xdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB4O1xufVxuLyoqXG4gKiBDb252ZXJ0cyByYWRpYW5zIHRvIHRvIGRlZ3JlZXMuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlSW5SYWRpYW5zIEFuZ2xlIGluIHJhZGlhbnMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFuZ2xlIGluIGRlZ3JlZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0RlZ3JlZXMoYW5nbGVJblJhZGlhbnMpIHtcbiAgICByZXR1cm4gKGFuZ2xlSW5SYWRpYW5zICogMTgwKSAvIE1hdGguUEk7XG59XG4vKipcbiAqIENvbnZlcnRzIGRlZ3JlZXMgdG8gcmFkaWFucy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGVJbkRlZ3JlZXMgQW5nbGUgaW4gZGVncmVlcy5cbiAqIEByZXR1cm4ge251bWJlcn0gQW5nbGUgaW4gcmFkaWFucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvUmFkaWFucyhhbmdsZUluRGVncmVlcykge1xuICAgIHJldHVybiAoYW5nbGVJbkRlZ3JlZXMgKiBNYXRoLlBJKSAvIDE4MDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbW9kdWxvIG9mIGEgLyBiLCBkZXBlbmRpbmcgb24gdGhlIHNpZ24gb2YgYi5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYSBEaXZpZGVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiIERpdmlzb3IuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1vZHVsby5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1vZHVsbyhhLCBiKSB7XG4gICAgdmFyIHIgPSBhICUgYjtcbiAgICByZXR1cm4gciAqIGIgPCAwID8gciArIGIgOiByO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsaW5lYXJseSBpbnRlcnBvbGF0ZWQgdmFsdWUgb2YgeCBiZXR3ZWVuIGEgYW5kIGIuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGEgTnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gYiBOdW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFZhbHVlIHRvIGJlIGludGVycG9sYXRlZC5cbiAqIEByZXR1cm4ge251bWJlcn0gSW50ZXJwb2xhdGVkIHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGVycChhLCBiLCB4KSB7XG4gICAgcmV0dXJuIGEgKyB4ICogKGIgLSBhKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hdGguanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL29ialxuICovXG4vKipcbiAqIFBvbHlmaWxsIGZvciBPYmplY3QuYXNzaWduKCkuICBBc3NpZ25zIGVudW1lcmFibGUgYW5kIG93biBwcm9wZXJ0aWVzIGZyb21cbiAqIG9uZSBvciBtb3JlIHNvdXJjZSBvYmplY3RzIHRvIGEgdGFyZ2V0IG9iamVjdC5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduLlxuICpcbiAqIEBwYXJhbSB7IU9iamVjdH0gdGFyZ2V0IFRoZSB0YXJnZXQgb2JqZWN0LlxuICogQHBhcmFtIHsuLi5PYmplY3R9IHZhcl9zb3VyY2VzIFRoZSBzb3VyY2Ugb2JqZWN0KHMpLlxuICogQHJldHVybiB7IU9iamVjdH0gVGhlIG1vZGlmaWVkIHRhcmdldCBvYmplY3QuXG4gKi9cbmV4cG9ydCB2YXIgYXNzaWduID0gdHlwZW9mIE9iamVjdC5hc3NpZ24gPT09ICdmdW5jdGlvbidcbiAgICA/IE9iamVjdC5hc3NpZ25cbiAgICA6IGZ1bmN0aW9uICh0YXJnZXQsIHZhcl9zb3VyY2VzKSB7XG4gICAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCB8fCB0YXJnZXQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXRwdXQgPSBPYmplY3QodGFyZ2V0KTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDEsIGlpID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBpZiAoc291cmNlICE9PSB1bmRlZmluZWQgJiYgc291cmNlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9O1xuLyoqXG4gKiBSZW1vdmVzIGFsbCBwcm9wZXJ0aWVzIGZyb20gYW4gb2JqZWN0LlxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNsZWFyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXIob2JqZWN0KSB7XG4gICAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqZWN0KSB7XG4gICAgICAgIGRlbGV0ZSBvYmplY3RbcHJvcGVydHldO1xuICAgIH1cbn1cbi8qKlxuICogUG9seWZpbGwgZm9yIE9iamVjdC52YWx1ZXMoKS4gIEdldCBhbiBhcnJheSBvZiBwcm9wZXJ0eSB2YWx1ZXMgZnJvbSBhbiBvYmplY3QuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L3ZhbHVlc1xuICpcbiAqIEBwYXJhbSB7IU9iamVjdDxLLFY+fSBvYmplY3QgVGhlIG9iamVjdCBmcm9tIHdoaWNoIHRvIGdldCB0aGUgdmFsdWVzLlxuICogQHJldHVybiB7IUFycmF5PFY+fSBUaGUgcHJvcGVydHkgdmFsdWVzLlxuICogQHRlbXBsYXRlIEssVlxuICovXG5leHBvcnQgdmFyIGdldFZhbHVlcyA9IHR5cGVvZiBPYmplY3QudmFsdWVzID09PSAnZnVuY3Rpb24nXG4gICAgPyBPYmplY3QudmFsdWVzXG4gICAgOiBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICB2YWx1ZXMucHVzaChvYmplY3RbcHJvcGVydHldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgIH07XG4vKipcbiAqIERldGVybWluZSBpZiBhbiBvYmplY3QgaGFzIGFueSBwcm9wZXJ0aWVzLlxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNoZWNrLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIG9iamVjdCBpcyBlbXB0eS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHkob2JqZWN0KSB7XG4gICAgdmFyIHByb3BlcnR5O1xuICAgIGZvciAocHJvcGVydHkgaW4gb2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuICFwcm9wZXJ0eTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9iai5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai9Qcm9qZWN0aW9uXG4gKi9cbmltcG9ydCB7IE1FVEVSU19QRVJfVU5JVCB9IGZyb20gJy4vVW5pdHMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gY29kZSBUaGUgU1JTIGlkZW50aWZpZXIgY29kZSwgZS5nLiBgRVBTRzo0MzI2YC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5kZWZhdWx0fHN0cmluZ30gW3VuaXRzXSBVbml0cy4gUmVxdWlyZWQgdW5sZXNzIGFcbiAqIHByb2o0IHByb2plY3Rpb24gaXMgZGVmaW5lZCBmb3IgYGNvZGVgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgdmFsaWRpdHkgZXh0ZW50IGZvciB0aGUgU1JTLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtheGlzT3JpZW50YXRpb249J2VudSddIFRoZSBheGlzIG9yaWVudGF0aW9uIGFzIHNwZWNpZmllZCBpbiBQcm9qNC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2dsb2JhbD1mYWxzZV0gV2hldGhlciB0aGUgcHJvamVjdGlvbiBpcyB2YWxpZCBmb3IgdGhlIHdob2xlIGdsb2JlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttZXRlcnNQZXJVbml0XSBUaGUgbWV0ZXJzIHBlciB1bml0IGZvciB0aGUgU1JTLlxuICogSWYgbm90IHByb3ZpZGVkLCB0aGUgYHVuaXRzYCBhcmUgdXNlZCB0byBnZXQgdGhlIG1ldGVycyBwZXIgdW5pdCBmcm9tIHRoZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovVW5pdHN+TUVURVJTX1BFUl9VTklUfVxuICogbG9va3VwIHRhYmxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbd29ybGRFeHRlbnRdIFRoZSB3b3JsZCBleHRlbnQgZm9yIHRoZSBTUlMuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ9IFtnZXRQb2ludFJlc29sdXRpb25dXG4gKiBGdW5jdGlvbiB0byBkZXRlcm1pbmUgcmVzb2x1dGlvbiBhdCBhIHBvaW50LiBUaGUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYVxuICogYHtudW1iZXJ9YCB2aWV3IHJlc29sdXRpb24gYW5kIGFuIGB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfWAgYXMgYXJndW1lbnRzLCBhbmQgcmV0dXJuc1xuICogdGhlIGB7bnVtYmVyfWAgcmVzb2x1dGlvbiBpbiBwcm9qZWN0aW9uIHVuaXRzIGF0IHRoZSBwYXNzZWQgY29vcmRpbmF0ZS4gSWYgdGhpcyBpcyBgdW5kZWZpbmVkYCxcbiAqIHRoZSBkZWZhdWx0IHtAbGluayBtb2R1bGU6b2wvcHJvaiNnZXRQb2ludFJlc29sdXRpb259IGZ1bmN0aW9uIHdpbGwgYmUgdXNlZC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQcm9qZWN0aW9uIGRlZmluaXRpb24gY2xhc3MuIE9uZSBvZiB0aGVzZSBpcyBjcmVhdGVkIGZvciBlYWNoIHByb2plY3Rpb25cbiAqIHN1cHBvcnRlZCBpbiB0aGUgYXBwbGljYXRpb24gYW5kIHN0b3JlZCBpbiB0aGUge0BsaW5rIG1vZHVsZTpvbC9wcm9qfSBuYW1lc3BhY2UuXG4gKiBZb3UgY2FuIHVzZSB0aGVzZSBpbiBhcHBsaWNhdGlvbnMsIGJ1dCB0aGlzIGlzIG5vdCByZXF1aXJlZCwgYXMgQVBJIHBhcmFtc1xuICogYW5kIG9wdGlvbnMgdXNlIHtAbGluayBtb2R1bGU6b2wvcHJvan5Qcm9qZWN0aW9uTGlrZX0gd2hpY2ggbWVhbnMgdGhlIHNpbXBsZSBzdHJpbmdcbiAqIGNvZGUgd2lsbCBzdWZmaWNlLlxuICpcbiAqIFlvdSBjYW4gdXNlIHtAbGluayBtb2R1bGU6b2wvcHJvan5nZXR9IHRvIHJldHJpZXZlIHRoZSBvYmplY3QgZm9yIGEgcGFydGljdWxhclxuICogcHJvamVjdGlvbi5cbiAqXG4gKiBUaGUgbGlicmFyeSBpbmNsdWRlcyBkZWZpbml0aW9ucyBmb3IgYEVQU0c6NDMyNmAgYW5kIGBFUFNHOjM4NTdgLCB0b2dldGhlclxuICogd2l0aCB0aGUgZm9sbG93aW5nIGFsaWFzZXM6XG4gKiAqIGBFUFNHOjQzMjZgOiBDUlM6ODQsIHVybjpvZ2M6ZGVmOmNyczpFUFNHOjYuNjo0MzI2LFxuICogICAgIHVybjpvZ2M6ZGVmOmNyczpPR0M6MS4zOkNSUzg0LCB1cm46b2djOmRlZjpjcnM6T0dDOjI6ODQsXG4gKiAgICAgaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzQzMjYsXG4gKiAgICAgdXJuOngtb2djOmRlZjpjcnM6RVBTRzo0MzI2XG4gKiAqIGBFUFNHOjM4NTdgOiBFUFNHOjEwMjEwMCwgRVBTRzoxMDIxMTMsIEVQU0c6OTAwOTEzLFxuICogICAgIHVybjpvZ2M6ZGVmOmNyczpFUFNHOjYuMTg6MzozODU3LFxuICogICAgIGh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCMzODU3XG4gKlxuICogSWYgeW91IHVzZSBbcHJvajRqc10oaHR0cHM6Ly9naXRodWIuY29tL3Byb2o0anMvcHJvajRqcyksIGFsaWFzZXMgY2FuXG4gKiBiZSBhZGRlZCB1c2luZyBgcHJvajQuZGVmcygpYC4gQWZ0ZXIgYWxsIHJlcXVpcmVkIHByb2plY3Rpb24gZGVmaW5pdGlvbnMgYXJlXG4gKiBhZGRlZCwgY2FsbCB0aGUge0BsaW5rIG1vZHVsZTpvbC9wcm9qL3Byb2o0fnJlZ2lzdGVyfSBmdW5jdGlvbi5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBQcm9qZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBQcm9qZWN0aW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUHJvamVjdGlvbihvcHRpb25zKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb2RlXyA9IG9wdGlvbnMuY29kZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVuaXRzIG9mIHByb2plY3RlZCBjb29yZGluYXRlcy4gV2hlbiBzZXQgdG8gYFRJTEVfUElYRUxTYCwgYVxuICAgICAgICAgKiBgdGhpcy5leHRlbnRfYCBhbmQgYHRoaXMud29ybGRFeHRlbnRfYCBtdXN0IGJlIGNvbmZpZ3VyZWQgcHJvcGVybHkgZm9yIGVhY2hcbiAgICAgICAgICogdGlsZS5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vVW5pdHMuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudW5pdHNfID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1VuaXRzLmpzXCIpLmRlZmF1bHR9ICovIChvcHRpb25zLnVuaXRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZhbGlkaXR5IGV4dGVudCBvZiB0aGUgcHJvamVjdGlvbiBpbiBwcm9qZWN0ZWQgY29vcmRpbmF0ZXMuIEZvciBwcm9qZWN0aW9uc1xuICAgICAgICAgKiB3aXRoIGBUSUxFX1BJWEVMU2AgdW5pdHMsIHRoaXMgaXMgdGhlIGV4dGVudCBvZiB0aGUgdGlsZSBpblxuICAgICAgICAgKiB0aWxlIHBpeGVsIHNwYWNlLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZXh0ZW50XyA9IG9wdGlvbnMuZXh0ZW50ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmV4dGVudCA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFeHRlbnQgb2YgdGhlIHdvcmxkIGluIEVQU0c6NDMyNi4gRm9yIHByb2plY3Rpb25zIHdpdGhcbiAgICAgICAgICogYFRJTEVfUElYRUxTYCB1bml0cywgdGhpcyBpcyB0aGUgZXh0ZW50IG9mIHRoZSB0aWxlIGluXG4gICAgICAgICAqIHByb2plY3RlZCBjb29yZGluYXRlIHNwYWNlLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud29ybGRFeHRlbnRfID1cbiAgICAgICAgICAgIG9wdGlvbnMud29ybGRFeHRlbnQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMud29ybGRFeHRlbnQgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYXhpc09yaWVudGF0aW9uXyA9XG4gICAgICAgICAgICBvcHRpb25zLmF4aXNPcmllbnRhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5heGlzT3JpZW50YXRpb24gOiAnZW51JztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5nbG9iYWxfID0gb3B0aW9ucy5nbG9iYWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZ2xvYmFsIDogZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2FuV3JhcFhfID0gISEodGhpcy5nbG9iYWxfICYmIHRoaXMuZXh0ZW50Xyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOm51bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfID0gb3B0aW9ucy5nZXRQb2ludFJlc29sdXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVmYXVsdFRpbGVHcmlkXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWV0ZXJzUGVyVW5pdF8gPSBvcHRpb25zLm1ldGVyc1BlclVuaXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBwcm9qZWN0aW9uIGlzIHN1aXRhYmxlIGZvciB3cmFwcGluZyB0aGUgeC1heGlzXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuY2FuV3JhcFggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbldyYXBYXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29kZSBmb3IgdGhpcyBwcm9qZWN0aW9uLCBlLmcuICdFUFNHOjQzMjYnLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gQ29kZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0Q29kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29kZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZhbGlkaXR5IGV4dGVudCBmb3IgdGhpcyBwcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5leHRlbnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB1bml0cyBvZiB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5kZWZhdWx0fSBVbml0cy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0VW5pdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaXRzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYW1vdW50IG9mIG1ldGVycyBwZXIgdW5pdCBvZiB0aGlzIHByb2plY3Rpb24uICBJZiB0aGUgcHJvamVjdGlvbiBpc1xuICAgICAqIG5vdCBjb25maWd1cmVkIHdpdGggYG1ldGVyc1BlclVuaXRgIG9yIGEgdW5pdHMgaWRlbnRpZmllciwgdGhlIHJldHVybiBpc1xuICAgICAqIGB1bmRlZmluZWRgLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IE1ldGVycy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0TWV0ZXJzUGVyVW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWV0ZXJzUGVyVW5pdF8gfHwgTUVURVJTX1BFUl9VTklUW3RoaXMudW5pdHNfXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgd29ybGQgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRXb3JsZEV4dGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud29ybGRFeHRlbnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBheGlzIG9yaWVudGF0aW9uIG9mIHRoaXMgcHJvamVjdGlvbi5cbiAgICAgKiBFeGFtcGxlIHZhbHVlcyBhcmU6XG4gICAgICogZW51IC0gdGhlIGRlZmF1bHQgZWFzdGluZywgbm9ydGhpbmcsIGVsZXZhdGlvbi5cbiAgICAgKiBuZXUgLSBub3J0aGluZywgZWFzdGluZywgdXAgLSB1c2VmdWwgZm9yIFwibGF0L2xvbmdcIiBnZW9ncmFwaGljIGNvb3JkaW5hdGVzLFxuICAgICAqICAgICBvciBzb3V0aCBvcmllbnRhdGVkIHRyYW5zdmVyc2UgbWVyY2F0b3IuXG4gICAgICogd251IC0gd2VzdGluZywgbm9ydGhpbmcsIHVwIC0gc29tZSBwbGFuZXRhcnkgY29vcmRpbmF0ZSBzeXN0ZW1zIGhhdmVcbiAgICAgKiAgICAgXCJ3ZXN0IHBvc2l0aXZlXCIgY29vcmRpbmF0ZSBzeXN0ZW1zXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBBeGlzIG9yaWVudGF0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRBeGlzT3JpZW50YXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF4aXNPcmllbnRhdGlvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJcyB0aGlzIHByb2plY3Rpb24gYSBnbG9iYWwgcHJvamVjdGlvbiB3aGljaCBzcGFucyB0aGUgd2hvbGUgd29ybGQ/XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgcHJvamVjdGlvbiBpcyBnbG9iYWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmlzR2xvYmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nbG9iYWxfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IGlmIHRoZSBwcm9qZWN0aW9uIGlzIGEgZ2xvYmFsIHByb2plY3Rpb24gd2hpY2ggc3BhbnMgdGhlIHdob2xlIHdvcmxkXG4gICAgICogQHBhcmFtIHtib29sZWFufSBnbG9iYWwgV2hldGhlciB0aGUgcHJvamVjdGlvbiBpcyBnbG9iYWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLnNldEdsb2JhbCA9IGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgICAgICAgdGhpcy5nbG9iYWxfID0gZ2xvYmFsO1xuICAgICAgICB0aGlzLmNhbldyYXBYXyA9ICEhKGdsb2JhbCAmJiB0aGlzLmV4dGVudF8pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gVGhlIGRlZmF1bHQgdGlsZSBncmlkLlxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmdldERlZmF1bHRUaWxlR3JpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFRpbGVHcmlkXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGhlIGRlZmF1bHQgdGlsZSBncmlkLlxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLnNldERlZmF1bHRUaWxlR3JpZCA9IGZ1bmN0aW9uICh0aWxlR3JpZCkge1xuICAgICAgICB0aGlzLmRlZmF1bHRUaWxlR3JpZF8gPSB0aWxlR3JpZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdmFsaWRpdHkgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5zZXRFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHRoaXMuZXh0ZW50XyA9IGV4dGVudDtcbiAgICAgICAgdGhpcy5jYW5XcmFwWF8gPSAhISh0aGlzLmdsb2JhbF8gJiYgZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgd29ybGQgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSB3b3JsZEV4dGVudCBXb3JsZCBleHRlbnRcbiAgICAgKiAgICAgW21pbmxvbiwgbWlubGF0LCBtYXhsb24sIG1heGxhdF0uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLnNldFdvcmxkRXh0ZW50ID0gZnVuY3Rpb24gKHdvcmxkRXh0ZW50KSB7XG4gICAgICAgIHRoaXMud29ybGRFeHRlbnRfID0gd29ybGRFeHRlbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGdldFBvaW50UmVzb2x1dGlvbiBmdW5jdGlvbiAoc2VlIHtAbGluayBtb2R1bGU6b2wvcHJvan5nZXRQb2ludFJlc29sdXRpb259XG4gICAgICogZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ9IGZ1bmMgRnVuY3Rpb25cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuc2V0R2V0UG9pbnRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICAgICAgdGhpcy5nZXRQb2ludFJlc29sdXRpb25GdW5jXyA9IGZ1bmM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1c3RvbSBwb2ludCByZXNvbHV0aW9uIGZ1bmN0aW9uIGZvciB0aGlzIHByb2plY3Rpb24gKGlmIHNldCkuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOm51bWJlcnx1bmRlZmluZWR9IFRoZSBjdXN0b20gcG9pbnRcbiAgICAgKiByZXNvbHV0aW9uIGZ1bmN0aW9uIChpZiBzZXQpLlxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmdldFBvaW50UmVzb2x1dGlvbkZ1bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfO1xuICAgIH07XG4gICAgcmV0dXJuIFByb2plY3Rpb247XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgUHJvamVjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb2plY3Rpb24uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9wcm9qL2Vwc2czODU3XG4gKi9cbmltcG9ydCBQcm9qZWN0aW9uIGZyb20gJy4vUHJvamVjdGlvbi5qcyc7XG5pbXBvcnQgVW5pdHMgZnJvbSAnLi9Vbml0cy5qcyc7XG5pbXBvcnQgeyBjb3NoIH0gZnJvbSAnLi4vbWF0aC5qcyc7XG4vKipcbiAqIFJhZGl1cyBvZiBXR1M4NCBzcGhlcmVcbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgUkFESVVTID0gNjM3ODEzNztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIEhBTEZfU0laRSA9IE1hdGguUEkgKiBSQURJVVM7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gKi9cbmV4cG9ydCB2YXIgRVhURU5UID0gWy1IQUxGX1NJWkUsIC1IQUxGX1NJWkUsIEhBTEZfU0laRSwgSEFMRl9TSVpFXTtcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IHZhciBXT1JMRF9FWFRFTlQgPSBbLTE4MCwgLTg1LCAxODAsIDg1XTtcbi8qKlxuICogTWF4aW11bSBzYWZlIHZhbHVlIGluIHkgZGlyZWN0aW9uXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgTUFYX1NBRkVfWSA9IFJBRElVUyAqIE1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkgLyAyKSk7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByb2plY3Rpb24gb2JqZWN0IGZvciB3ZWIvc3BoZXJpY2FsIE1lcmNhdG9yIChFUFNHOjM4NTcpLlxuICovXG52YXIgRVBTRzM4NTdQcm9qZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFUFNHMzg1N1Byb2plY3Rpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgQ29kZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBFUFNHMzg1N1Byb2plY3Rpb24oY29kZSkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgY29kZTogY29kZSxcbiAgICAgICAgICAgIHVuaXRzOiBVbml0cy5NRVRFUlMsXG4gICAgICAgICAgICBleHRlbnQ6IEVYVEVOVCxcbiAgICAgICAgICAgIGdsb2JhbDogdHJ1ZSxcbiAgICAgICAgICAgIHdvcmxkRXh0ZW50OiBXT1JMRF9FWFRFTlQsXG4gICAgICAgICAgICBnZXRQb2ludFJlc29sdXRpb246IGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBwb2ludCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHV0aW9uIC8gY29zaChwb2ludFsxXSAvIFJBRElVUyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gRVBTRzM4NTdQcm9qZWN0aW9uO1xufShQcm9qZWN0aW9uKSk7XG4vKipcbiAqIFByb2plY3Rpb25zIGVxdWFsIHRvIEVQU0c6Mzg1Ny5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKi9cbmV4cG9ydCB2YXIgUFJPSkVDVElPTlMgPSBbXG4gICAgbmV3IEVQU0czODU3UHJvamVjdGlvbignRVBTRzozODU3JyksXG4gICAgbmV3IEVQU0czODU3UHJvamVjdGlvbignRVBTRzoxMDIxMDAnKSxcbiAgICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdFUFNHOjEwMjExMycpLFxuICAgIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ0VQU0c6OTAwOTEzJyksXG4gICAgbmV3IEVQU0czODU3UHJvamVjdGlvbignaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzM4NTcnKSxcbl07XG4vKipcbiAqIFRyYW5zZm9ybWF0aW9uIGZyb20gRVBTRzo0MzI2IHRvIEVQU0c6Mzg1Ny5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGlucHV0IElucHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X291dHB1dCBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9kaW1lbnNpb24gRGltZW5zaW9uIChkZWZhdWx0IGlzIGAyYCkuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRVBTRzQzMjYoaW5wdXQsIG9wdF9vdXRwdXQsIG9wdF9kaW1lbnNpb24pIHtcbiAgICB2YXIgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgIHZhciBkaW1lbnNpb24gPSBvcHRfZGltZW5zaW9uID4gMSA/IG9wdF9kaW1lbnNpb24gOiAyO1xuICAgIHZhciBvdXRwdXQgPSBvcHRfb3V0cHV0O1xuICAgIGlmIChvdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoZGltZW5zaW9uID4gMikge1xuICAgICAgICAgICAgLy8gcHJlc2VydmUgdmFsdWVzIGJleW9uZCBzZWNvbmQgZGltZW5zaW9uXG4gICAgICAgICAgICBvdXRwdXQgPSBpbnB1dC5zbGljZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3V0cHV0ID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gZGltZW5zaW9uKSB7XG4gICAgICAgIG91dHB1dFtpXSA9IChIQUxGX1NJWkUgKiBpbnB1dFtpXSkgLyAxODA7XG4gICAgICAgIHZhciB5ID0gUkFESVVTICogTWF0aC5sb2coTWF0aC50YW4oKE1hdGguUEkgKiAoK2lucHV0W2kgKyAxXSArIDkwKSkgLyAzNjApKTtcbiAgICAgICAgaWYgKHkgPiBNQVhfU0FGRV9ZKSB7XG4gICAgICAgICAgICB5ID0gTUFYX1NBRkVfWTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh5IDwgLU1BWF9TQUZFX1kpIHtcbiAgICAgICAgICAgIHkgPSAtTUFYX1NBRkVfWTtcbiAgICAgICAgfVxuICAgICAgICBvdXRwdXRbaSArIDFdID0geTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbn1cbi8qKlxuICogVHJhbnNmb3JtYXRpb24gZnJvbSBFUFNHOjM4NTcgdG8gRVBTRzo0MzI2LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gaW5wdXQgSW5wdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfb3V0cHV0IE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2RpbWVuc2lvbiBEaW1lbnNpb24gKGRlZmF1bHQgaXMgYDJgKS5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRVBTRzQzMjYoaW5wdXQsIG9wdF9vdXRwdXQsIG9wdF9kaW1lbnNpb24pIHtcbiAgICB2YXIgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgIHZhciBkaW1lbnNpb24gPSBvcHRfZGltZW5zaW9uID4gMSA/IG9wdF9kaW1lbnNpb24gOiAyO1xuICAgIHZhciBvdXRwdXQgPSBvcHRfb3V0cHV0O1xuICAgIGlmIChvdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoZGltZW5zaW9uID4gMikge1xuICAgICAgICAgICAgLy8gcHJlc2VydmUgdmFsdWVzIGJleW9uZCBzZWNvbmQgZGltZW5zaW9uXG4gICAgICAgICAgICBvdXRwdXQgPSBpbnB1dC5zbGljZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3V0cHV0ID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gZGltZW5zaW9uKSB7XG4gICAgICAgIG91dHB1dFtpXSA9ICgxODAgKiBpbnB1dFtpXSkgLyBIQUxGX1NJWkU7XG4gICAgICAgIG91dHB1dFtpICsgMV0gPVxuICAgICAgICAgICAgKDM2MCAqIE1hdGguYXRhbihNYXRoLmV4cChpbnB1dFtpICsgMV0gLyBSQURJVVMpKSkgLyBNYXRoLlBJIC0gOTA7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcHNnMzg1Ny5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovZXBzZzQzMjZcbiAqL1xuaW1wb3J0IFByb2plY3Rpb24gZnJvbSAnLi9Qcm9qZWN0aW9uLmpzJztcbmltcG9ydCBVbml0cyBmcm9tICcuL1VuaXRzLmpzJztcbi8qKlxuICogU2VtaS1tYWpvciByYWRpdXMgb2YgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgUkFESVVTID0gNjM3ODEzNztcbi8qKlxuICogRXh0ZW50IG9mIHRoZSBFUFNHOjQzMjYgcHJvamVjdGlvbiB3aGljaCBpcyB0aGUgd2hvbGUgd29ybGQuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IHZhciBFWFRFTlQgPSBbLTE4MCwgLTkwLCAxODAsIDkwXTtcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIE1FVEVSU19QRVJfVU5JVCA9IChNYXRoLlBJICogUkFESVVTKSAvIDE4MDtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogUHJvamVjdGlvbiBvYmplY3QgZm9yIFdHUzg0IGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMgKEVQU0c6NDMyNikuXG4gKlxuICogTm90ZSB0aGF0IE9wZW5MYXllcnMgZG9lcyBub3Qgc3RyaWN0bHkgY29tcGx5IHdpdGggdGhlIEVQU0cgZGVmaW5pdGlvbi5cbiAqIFRoZSBFUFNHIHJlZ2lzdHJ5IGRlZmluZXMgNDMyNiBhcyBhIENSUyBmb3IgTGF0aXR1ZGUsTG9uZ2l0dWRlICh5LHgpLlxuICogT3BlbkxheWVycyB0cmVhdHMgRVBTRzo0MzI2IGFzIGEgcHNldWRvLXByb2plY3Rpb24sIHdpdGggeCx5IGNvb3JkaW5hdGVzLlxuICovXG52YXIgRVBTRzQzMjZQcm9qZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFUFNHNDMyNlByb2plY3Rpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgQ29kZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9heGlzT3JpZW50YXRpb24gQXhpcyBvcmllbnRhdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBFUFNHNDMyNlByb2plY3Rpb24oY29kZSwgb3B0X2F4aXNPcmllbnRhdGlvbikge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgY29kZTogY29kZSxcbiAgICAgICAgICAgIHVuaXRzOiBVbml0cy5ERUdSRUVTLFxuICAgICAgICAgICAgZXh0ZW50OiBFWFRFTlQsXG4gICAgICAgICAgICBheGlzT3JpZW50YXRpb246IG9wdF9heGlzT3JpZW50YXRpb24sXG4gICAgICAgICAgICBnbG9iYWw6IHRydWUsXG4gICAgICAgICAgICBtZXRlcnNQZXJVbml0OiBNRVRFUlNfUEVSX1VOSVQsXG4gICAgICAgICAgICB3b3JsZEV4dGVudDogRVhURU5ULFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gRVBTRzQzMjZQcm9qZWN0aW9uO1xufShQcm9qZWN0aW9uKSk7XG4vKipcbiAqIFByb2plY3Rpb25zIGVxdWFsIHRvIEVQU0c6NDMyNi5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKi9cbmV4cG9ydCB2YXIgUFJPSkVDVElPTlMgPSBbXG4gICAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbignQ1JTOjg0JyksXG4gICAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbignRVBTRzo0MzI2JywgJ25ldScpLFxuICAgIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ3VybjpvZ2M6ZGVmOmNyczpPR0M6MS4zOkNSUzg0JyksXG4gICAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbigndXJuOm9nYzpkZWY6Y3JzOk9HQzoyOjg0JyksXG4gICAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbignaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzQzMjYnLCAnbmV1JyksXG5dO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXBzZzQzMjYuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovcHJvamVjdGlvbnNcbiAqL1xuLyoqXG4gKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHQ+fVxuICovXG52YXIgY2FjaGUgPSB7fTtcbi8qKlxuICogQ2xlYXIgdGhlIHByb2plY3Rpb25zIGNhY2hlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgY2FjaGUgPSB7fTtcbn1cbi8qKlxuICogR2V0IGEgY2FjaGVkIHByb2plY3Rpb24gYnkgY29kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIFRoZSBjb2RlIGZvciB0aGUgcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBUaGUgcHJvamVjdGlvbiAoaWYgY2FjaGVkKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldChjb2RlKSB7XG4gICAgcmV0dXJuIChjYWNoZVtjb2RlXSB8fFxuICAgICAgICBjYWNoZVtjb2RlLnJlcGxhY2UoL3VybjooeC0pP29nYzpkZWY6Y3JzOkVQU0c6KC4qOik/KFxcdyspJC8sICdFUFNHOiQzJyldIHx8XG4gICAgICAgIG51bGwpO1xufVxuLyoqXG4gKiBBZGQgYSBwcm9qZWN0aW9uIHRvIHRoZSBjYWNoZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIFRoZSBwcm9qZWN0aW9uIGNvZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFRoZSBwcm9qZWN0aW9uIHRvIGNhY2hlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkKGNvZGUsIHByb2plY3Rpb24pIHtcbiAgICBjYWNoZVtjb2RlXSA9IHByb2plY3Rpb247XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9qZWN0aW9ucy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai90cmFuc2Zvcm1zXG4gKi9cbmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICcuLi9vYmouanMnO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9uPj59XG4gKi9cbnZhciB0cmFuc2Zvcm1zID0ge307XG4vKipcbiAqIENsZWFyIHRoZSB0cmFuc2Zvcm0gY2FjaGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICB0cmFuc2Zvcm1zID0ge307XG59XG4vKipcbiAqIFJlZ2lzdGVycyBhIGNvbnZlcnNpb24gZnVuY3Rpb24gdG8gY29udmVydCBjb29yZGluYXRlcyBmcm9tIHRoZSBzb3VyY2VcbiAqIHByb2plY3Rpb24gdG8gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlIFNvdXJjZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSB0cmFuc2Zvcm1GbiBUcmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGQoc291cmNlLCBkZXN0aW5hdGlvbiwgdHJhbnNmb3JtRm4pIHtcbiAgICB2YXIgc291cmNlQ29kZSA9IHNvdXJjZS5nZXRDb2RlKCk7XG4gICAgdmFyIGRlc3RpbmF0aW9uQ29kZSA9IGRlc3RpbmF0aW9uLmdldENvZGUoKTtcbiAgICBpZiAoIShzb3VyY2VDb2RlIGluIHRyYW5zZm9ybXMpKSB7XG4gICAgICAgIHRyYW5zZm9ybXNbc291cmNlQ29kZV0gPSB7fTtcbiAgICB9XG4gICAgdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXVtkZXN0aW5hdGlvbkNvZGVdID0gdHJhbnNmb3JtRm47XG59XG4vKipcbiAqIFVucmVnaXN0ZXJzIHRoZSBjb252ZXJzaW9uIGZ1bmN0aW9uIHRvIGNvbnZlcnQgY29vcmRpbmF0ZXMgZnJvbSB0aGUgc291cmNlXG4gKiBwcm9qZWN0aW9uIHRvIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLiAgVGhpcyBtZXRob2QgaXMgdXNlZCB0byBjbGVhbiB1cFxuICogY2FjaGVkIHRyYW5zZm9ybXMgZHVyaW5nIHRlc3RpbmcuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRoZSB1bnJlZ2lzdGVyZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKHNvdXJjZSwgZGVzdGluYXRpb24pIHtcbiAgICB2YXIgc291cmNlQ29kZSA9IHNvdXJjZS5nZXRDb2RlKCk7XG4gICAgdmFyIGRlc3RpbmF0aW9uQ29kZSA9IGRlc3RpbmF0aW9uLmdldENvZGUoKTtcbiAgICB2YXIgdHJhbnNmb3JtID0gdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXVtkZXN0aW5hdGlvbkNvZGVdO1xuICAgIGRlbGV0ZSB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdW2Rlc3RpbmF0aW9uQ29kZV07XG4gICAgaWYgKGlzRW1wdHkodHJhbnNmb3Jtc1tzb3VyY2VDb2RlXSkpIHtcbiAgICAgICAgZGVsZXRlIHRyYW5zZm9ybXNbc291cmNlQ29kZV07XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm07XG59XG4vKipcbiAqIEdldCBhIHRyYW5zZm9ybSBnaXZlbiBhIHNvdXJjZSBjb2RlIGFuZCBhIGRlc3RpbmF0aW9uIGNvZGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gc291cmNlQ29kZSBUaGUgY29kZSBmb3IgdGhlIHNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtzdHJpbmd9IGRlc3RpbmF0aW9uQ29kZSBUaGUgY29kZSBmb3IgdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufHVuZGVmaW5lZH0gVGhlIHRyYW5zZm9ybSBmdW5jdGlvbiAoaWYgZm91bmQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0KHNvdXJjZUNvZGUsIGRlc3RpbmF0aW9uQ29kZSkge1xuICAgIHZhciB0cmFuc2Zvcm07XG4gICAgaWYgKHNvdXJjZUNvZGUgaW4gdHJhbnNmb3JtcyAmJiBkZXN0aW5hdGlvbkNvZGUgaW4gdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXSkge1xuICAgICAgICB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdW2Rlc3RpbmF0aW9uQ29kZV07XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2Zvcm1zLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zcGhlcmVcbiAqL1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCB7IHRvRGVncmVlcywgdG9SYWRpYW5zIH0gZnJvbSAnLi9tYXRoLmpzJztcbi8qKlxuICogT2JqZWN0IGxpdGVyYWwgd2l0aCBvcHRpb25zIGZvciB0aGUge0BsaW5rIGdldExlbmd0aH0gb3Ige0BsaW5rIGdldEFyZWF9XG4gKiBmdW5jdGlvbnMuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTcGhlcmVNZXRyaWNPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb249J0VQU0c6Mzg1NyddXG4gKiBQcm9qZWN0aW9uIG9mIHRoZSAgZ2VvbWV0cnkuICBCeSBkZWZhdWx0LCB0aGUgZ2VvbWV0cnkgaXMgYXNzdW1lZCB0byBiZSBpblxuICogV2ViIE1lcmNhdG9yLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyYWRpdXM9NjM3MTAwOC44XSBTcGhlcmUgcmFkaXVzLiAgQnkgZGVmYXVsdCwgdGhlXG4gKiBbbWVhbiBFYXJ0aCByYWRpdXNdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0VhcnRoX3JhZGl1cyNNZWFuX3JhZGl1cylcbiAqIGZvciB0aGUgV0dTODQgZWxsaXBzb2lkIGlzIHVzZWQuXG4gKi9cbi8qKlxuICogVGhlIG1lYW4gRWFydGggcmFkaXVzICgxLzMgKiAoMmEgKyBiKSkgZm9yIHRoZSBXR1M4NCBlbGxpcHNvaWQuXG4gKiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9FYXJ0aF9yYWRpdXMjTWVhbl9yYWRpdXNcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgREVGQVVMVF9SQURJVVMgPSA2MzcxMDA4Ljg7XG4vKipcbiAqIEdldCB0aGUgZ3JlYXQgY2lyY2xlIGRpc3RhbmNlIChpbiBtZXRlcnMpIGJldHdlZW4gdHdvIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0FycmF5fSBjMSBTdGFydGluZyBjb29yZGluYXRlLlxuICogQHBhcmFtIHtBcnJheX0gYzIgRW5kaW5nIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9yYWRpdXMgVGhlIHNwaGVyZSByYWRpdXMgdG8gdXNlLiAgRGVmYXVsdHMgdG8gdGhlIEVhcnRoJ3NcbiAqICAgICBtZWFuIHJhZGl1cyB1c2luZyB0aGUgV0dTODQgZWxsaXBzb2lkLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgZ3JlYXQgY2lyY2xlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50cyAoaW4gbWV0ZXJzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERpc3RhbmNlKGMxLCBjMiwgb3B0X3JhZGl1cykge1xuICAgIHZhciByYWRpdXMgPSBvcHRfcmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICAgIHZhciBsYXQxID0gdG9SYWRpYW5zKGMxWzFdKTtcbiAgICB2YXIgbGF0MiA9IHRvUmFkaWFucyhjMlsxXSk7XG4gICAgdmFyIGRlbHRhTGF0QnkyID0gKGxhdDIgLSBsYXQxKSAvIDI7XG4gICAgdmFyIGRlbHRhTG9uQnkyID0gdG9SYWRpYW5zKGMyWzBdIC0gYzFbMF0pIC8gMjtcbiAgICB2YXIgYSA9IE1hdGguc2luKGRlbHRhTGF0QnkyKSAqIE1hdGguc2luKGRlbHRhTGF0QnkyKSArXG4gICAgICAgIE1hdGguc2luKGRlbHRhTG9uQnkyKSAqXG4gICAgICAgICAgICBNYXRoLnNpbihkZWx0YUxvbkJ5MikgKlxuICAgICAgICAgICAgTWF0aC5jb3MobGF0MSkgKlxuICAgICAgICAgICAgTWF0aC5jb3MobGF0Mik7XG4gICAgcmV0dXJuIDIgKiByYWRpdXMgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEgLSBhKSk7XG59XG4vKipcbiAqIEdldCB0aGUgY3VtdWxhdGl2ZSBncmVhdCBjaXJjbGUgbGVuZ3RoIG9mIGxpbmVzdHJpbmcgY29vcmRpbmF0ZXMgKGdlb2dyYXBoaWMpLlxuICogQHBhcmFtIHtBcnJheX0gY29vcmRpbmF0ZXMgTGluZXN0cmluZyBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgVGhlIHNwaGVyZSByYWRpdXMgdG8gdXNlLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgbGVuZ3RoIChpbiBtZXRlcnMpLlxuICovXG5mdW5jdGlvbiBnZXRMZW5ndGhJbnRlcm5hbChjb29yZGluYXRlcywgcmFkaXVzKSB7XG4gICAgdmFyIGxlbmd0aCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWkgLSAxOyArK2kpIHtcbiAgICAgICAgbGVuZ3RoICs9IGdldERpc3RhbmNlKGNvb3JkaW5hdGVzW2ldLCBjb29yZGluYXRlc1tpICsgMV0sIHJhZGl1cyk7XG4gICAgfVxuICAgIHJldHVybiBsZW5ndGg7XG59XG4vKipcbiAqIEdldCB0aGUgc3BoZXJpY2FsIGxlbmd0aCBvZiBhIGdlb21ldHJ5LiAgVGhpcyBsZW5ndGggaXMgdGhlIHN1bSBvZiB0aGVcbiAqIGdyZWF0IGNpcmNsZSBkaXN0YW5jZXMgYmV0d2VlbiBjb29yZGluYXRlcy4gIEZvciBwb2x5Z29ucywgdGhlIGxlbmd0aCBpc1xuICogdGhlIHN1bSBvZiBhbGwgcmluZ3MuICBGb3IgcG9pbnRzLCB0aGUgbGVuZ3RoIGlzIHplcm8uICBGb3IgbXVsdGktcGFydFxuICogZ2VvbWV0cmllcywgdGhlIGxlbmd0aCBpcyB0aGUgc3VtIG9mIHRoZSBsZW5ndGggb2YgZWFjaCBwYXJ0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgQSBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7U3BoZXJlTWV0cmljT3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMgZm9yIHRoZVxuICogbGVuZ3RoIGNhbGN1bGF0aW9uLiAgQnkgZGVmYXVsdCwgZ2VvbWV0cmllcyBhcmUgYXNzdW1lZCB0byBiZSBpbiAnRVBTRzozODU3Jy5cbiAqIFlvdSBjYW4gY2hhbmdlIHRoaXMgYnkgcHJvdmlkaW5nIGEgYHByb2plY3Rpb25gIG9wdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHNwaGVyaWNhbCBsZW5ndGggKGluIG1ldGVycykuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMZW5ndGgoZ2VvbWV0cnksIG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgcmFkaXVzID0gb3B0aW9ucy5yYWRpdXMgfHwgREVGQVVMVF9SQURJVVM7XG4gICAgdmFyIHByb2plY3Rpb24gPSBvcHRpb25zLnByb2plY3Rpb24gfHwgJ0VQU0c6Mzg1Nyc7XG4gICAgdmFyIHR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XG4gICAgaWYgKHR5cGUgIT09IEdlb21ldHJ5VHlwZS5HRU9NRVRSWV9DT0xMRUNUSU9OKSB7XG4gICAgICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnkuY2xvbmUoKS50cmFuc2Zvcm0ocHJvamVjdGlvbiwgJ0VQU0c6NDMyNicpO1xuICAgIH1cbiAgICB2YXIgbGVuZ3RoID0gMDtcbiAgICB2YXIgY29vcmRpbmF0ZXMsIGNvb3JkcywgaSwgaWksIGosIGpqO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0lOVDpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6IHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5MSU5FQVJfUklORzoge1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICBsZW5ndGggPSBnZXRMZW5ndGhJbnRlcm5hbChjb29yZGluYXRlcywgcmFkaXVzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0xZR09OOiB7XG4gICAgICAgICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGxlbmd0aCArPSBnZXRMZW5ndGhJbnRlcm5hbChjb29yZGluYXRlc1tpXSwgcmFkaXVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT046IHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29vcmRzID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgICAgICAgICAgZm9yIChqID0gMCwgamogPSBjb29yZHMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgICAgICAgICBsZW5ndGggKz0gZ2V0TGVuZ3RoSW50ZXJuYWwoY29vcmRzW2pdLCByYWRpdXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT046IHtcbiAgICAgICAgICAgIHZhciBnZW9tZXRyaWVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0R2VvbWV0cmllcygpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBnZW9tZXRyaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBsZW5ndGggKz0gZ2V0TGVuZ3RoKGdlb21ldHJpZXNbaV0sIG9wdF9vcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZTogJyArIHR5cGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsZW5ndGg7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHNwaGVyaWNhbCBhcmVhIGZvciBhIGxpc3Qgb2YgY29vcmRpbmF0ZXMuXG4gKlxuICogW1JlZmVyZW5jZV0oaHR0cHM6Ly90cnMtbmV3LmpwbC5uYXNhLmdvdi9oYW5kbGUvMjAxNC80MDQwOSlcbiAqIFJvYmVydC4gRy4gQ2hhbWJlcmxhaW4gYW5kIFdpbGxpYW0gSC4gRHVxdWV0dGUsIFwiU29tZSBBbGdvcml0aG1zIGZvclxuICogUG9seWdvbnMgb24gYSBTcGhlcmVcIiwgSlBMIFB1YmxpY2F0aW9uIDA3LTAzLCBKZXQgUHJvcHVsc2lvblxuICogTGFib3JhdG9yeSwgUGFzYWRlbmEsIENBLCBKdW5lIDIwMDdcbiAqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgTGlzdCBvZiBjb29yZGluYXRlcyBvZiBhIGxpbmVhclxuICogcmluZy4gSWYgdGhlIHJpbmcgaXMgb3JpZW50ZWQgY2xvY2t3aXNlLCB0aGUgYXJlYSB3aWxsIGJlIHBvc2l0aXZlLFxuICogb3RoZXJ3aXNlIGl0IHdpbGwgYmUgbmVnYXRpdmUuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFRoZSBzcGhlcmUgcmFkaXVzLlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhIChpbiBzcXVhcmUgbWV0ZXJzKS5cbiAqL1xuZnVuY3Rpb24gZ2V0QXJlYUludGVybmFsKGNvb3JkaW5hdGVzLCByYWRpdXMpIHtcbiAgICB2YXIgYXJlYSA9IDA7XG4gICAgdmFyIGxlbiA9IGNvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICB2YXIgeDEgPSBjb29yZGluYXRlc1tsZW4gLSAxXVswXTtcbiAgICB2YXIgeTEgPSBjb29yZGluYXRlc1tsZW4gLSAxXVsxXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciB4MiA9IGNvb3JkaW5hdGVzW2ldWzBdO1xuICAgICAgICB2YXIgeTIgPSBjb29yZGluYXRlc1tpXVsxXTtcbiAgICAgICAgYXJlYSArPVxuICAgICAgICAgICAgdG9SYWRpYW5zKHgyIC0geDEpICpcbiAgICAgICAgICAgICAgICAoMiArIE1hdGguc2luKHRvUmFkaWFucyh5MSkpICsgTWF0aC5zaW4odG9SYWRpYW5zKHkyKSkpO1xuICAgICAgICB4MSA9IHgyO1xuICAgICAgICB5MSA9IHkyO1xuICAgIH1cbiAgICByZXR1cm4gKGFyZWEgKiByYWRpdXMgKiByYWRpdXMpIC8gMi4wO1xufVxuLyoqXG4gKiBHZXQgdGhlIHNwaGVyaWNhbCBhcmVhIG9mIGEgZ2VvbWV0cnkuICBUaGlzIGlzIHRoZSBhcmVhIChpbiBtZXRlcnMpIGFzc3VtaW5nXG4gKiB0aGF0IHBvbHlnb24gZWRnZXMgYXJlIHNlZ21lbnRzIG9mIGdyZWF0IGNpcmNsZXMgb24gYSBzcGhlcmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBBIGdlb21ldHJ5LlxuICogQHBhcmFtIHtTcGhlcmVNZXRyaWNPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucyBmb3IgdGhlIGFyZWFcbiAqICAgICBjYWxjdWxhdGlvbi4gIEJ5IGRlZmF1bHQsIGdlb21ldHJpZXMgYXJlIGFzc3VtZWQgdG8gYmUgaW4gJ0VQU0c6Mzg1NycuXG4gKiAgICAgWW91IGNhbiBjaGFuZ2UgdGhpcyBieSBwcm92aWRpbmcgYSBgcHJvamVjdGlvbmAgb3B0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgc3BoZXJpY2FsIGFyZWEgKGluIHNxdWFyZSBtZXRlcnMpLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJlYShnZW9tZXRyeSwgb3B0X29wdGlvbnMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgIHZhciByYWRpdXMgPSBvcHRpb25zLnJhZGl1cyB8fCBERUZBVUxUX1JBRElVUztcbiAgICB2YXIgcHJvamVjdGlvbiA9IG9wdGlvbnMucHJvamVjdGlvbiB8fCAnRVBTRzozODU3JztcbiAgICB2YXIgdHlwZSA9IGdlb21ldHJ5LmdldFR5cGUoKTtcbiAgICBpZiAodHlwZSAhPT0gR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT04pIHtcbiAgICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyeS5jbG9uZSgpLnRyYW5zZm9ybShwcm9qZWN0aW9uLCAnRVBTRzo0MzI2Jyk7XG4gICAgfVxuICAgIHZhciBhcmVhID0gMDtcbiAgICB2YXIgY29vcmRpbmF0ZXMsIGNvb3JkcywgaSwgaWksIGosIGpqO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0lOVDpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORzpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTElORUFSX1JJTkc6IHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLlBPTFlHT046IHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICBhcmVhID0gTWF0aC5hYnMoZ2V0QXJlYUludGVybmFsKGNvb3JkaW5hdGVzWzBdLCByYWRpdXMpKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDEsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGFyZWEgLT0gTWF0aC5hYnMoZ2V0QXJlYUludGVybmFsKGNvb3JkaW5hdGVzW2ldLCByYWRpdXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT046IHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29vcmRzID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgICAgICAgICAgYXJlYSArPSBNYXRoLmFicyhnZXRBcmVhSW50ZXJuYWwoY29vcmRzWzBdLCByYWRpdXMpKTtcbiAgICAgICAgICAgICAgICBmb3IgKGogPSAxLCBqaiA9IGNvb3Jkcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZWEgLT0gTWF0aC5hYnMoZ2V0QXJlYUludGVybmFsKGNvb3Jkc1tqXSwgcmFkaXVzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuR0VPTUVUUllfQ09MTEVDVElPTjoge1xuICAgICAgICAgICAgdmFyIGdlb21ldHJpZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeUNvbGxlY3Rpb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRHZW9tZXRyaWVzKCk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGdlb21ldHJpZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGFyZWEgKz0gZ2V0QXJlYShnZW9tZXRyaWVzW2ldLCBvcHRfb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGU6ICcgKyB0eXBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJlYTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgY29vcmRpbmF0ZSBhdCB0aGUgZ2l2ZW4gZGlzdGFuY2UgYW5kIGJlYXJpbmcgZnJvbSBgYzFgLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGMxIFRoZSBvcmlnaW4gcG9pbnQgKGBbbG9uLCBsYXRdYCBpbiBkZWdyZWVzKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXN0YW5jZSBUaGUgZ3JlYXQtY2lyY2xlIGRpc3RhbmNlIGJldHdlZW4gdGhlIG9yaWdpblxuICogICAgIHBvaW50IGFuZCB0aGUgdGFyZ2V0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IGJlYXJpbmcgVGhlIGJlYXJpbmcgKGluIHJhZGlhbnMpLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfcmFkaXVzIFRoZSBzcGhlcmUgcmFkaXVzIHRvIHVzZS4gIERlZmF1bHRzIHRvIHRoZSBFYXJ0aCdzXG4gKiAgICAgbWVhbiByYWRpdXMgdXNpbmcgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUaGUgdGFyZ2V0IHBvaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gb2Zmc2V0KGMxLCBkaXN0YW5jZSwgYmVhcmluZywgb3B0X3JhZGl1cykge1xuICAgIHZhciByYWRpdXMgPSBvcHRfcmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICAgIHZhciBsYXQxID0gdG9SYWRpYW5zKGMxWzFdKTtcbiAgICB2YXIgbG9uMSA9IHRvUmFkaWFucyhjMVswXSk7XG4gICAgdmFyIGRCeVIgPSBkaXN0YW5jZSAvIHJhZGl1cztcbiAgICB2YXIgbGF0ID0gTWF0aC5hc2luKE1hdGguc2luKGxhdDEpICogTWF0aC5jb3MoZEJ5UikgK1xuICAgICAgICBNYXRoLmNvcyhsYXQxKSAqIE1hdGguc2luKGRCeVIpICogTWF0aC5jb3MoYmVhcmluZykpO1xuICAgIHZhciBsb24gPSBsb24xICtcbiAgICAgICAgTWF0aC5hdGFuMihNYXRoLnNpbihiZWFyaW5nKSAqIE1hdGguc2luKGRCeVIpICogTWF0aC5jb3MobGF0MSksIE1hdGguY29zKGRCeVIpIC0gTWF0aC5zaW4obGF0MSkgKiBNYXRoLnNpbihsYXQpKTtcbiAgICByZXR1cm4gW3RvRGVncmVlcyhsb24pLCB0b0RlZ3JlZXMobGF0KV07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zcGhlcmUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2pcbiAqL1xuLyoqXG4gKiBUaGUgb2wvcHJvaiBtb2R1bGUgc3RvcmVzOlxuICogKiBhIGxpc3Qgb2Yge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb259XG4gKiBvYmplY3RzLCBvbmUgZm9yIGVhY2ggcHJvamVjdGlvbiBzdXBwb3J0ZWQgYnkgdGhlIGFwcGxpY2F0aW9uXG4gKiAqIGEgbGlzdCBvZiB0cmFuc2Zvcm0gZnVuY3Rpb25zIG5lZWRlZCB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGluIG9uZSBwcm9qZWN0aW9uXG4gKiBpbnRvIGFub3RoZXIuXG4gKlxuICogVGhlIHN0YXRpYyBmdW5jdGlvbnMgYXJlIHRoZSBtZXRob2RzIHVzZWQgdG8gbWFpbnRhaW4gdGhlc2UuXG4gKiBFYWNoIHRyYW5zZm9ybSBmdW5jdGlvbiBjYW4gaGFuZGxlIG5vdCBvbmx5IHNpbXBsZSBjb29yZGluYXRlIHBhaXJzLCBidXQgYWxzb1xuICogbGFyZ2UgYXJyYXlzIG9mIGNvb3JkaW5hdGVzIHN1Y2ggYXMgdmVjdG9yIGdlb21ldHJpZXMuXG4gKlxuICogV2hlbiBsb2FkZWQsIHRoZSBsaWJyYXJ5IGFkZHMgcHJvamVjdGlvbiBvYmplY3RzIGZvciBFUFNHOjQzMjYgKFdHUzg0XG4gKiBnZW9ncmFwaGljIGNvb3JkaW5hdGVzKSBhbmQgRVBTRzozODU3IChXZWIgb3IgU3BoZXJpY2FsIE1lcmNhdG9yLCBhcyB1c2VkXG4gKiBmb3IgZXhhbXBsZSBieSBCaW5nIE1hcHMgb3IgT3BlblN0cmVldE1hcCksIHRvZ2V0aGVyIHdpdGggdGhlIHJlbGV2YW50XG4gKiB0cmFuc2Zvcm0gZnVuY3Rpb25zLlxuICpcbiAqIEFkZGl0aW9uYWwgdHJhbnNmb3JtcyBtYXkgYmUgYWRkZWQgYnkgdXNpbmcgdGhlIGh0dHA6Ly9wcm9qNGpzLm9yZy9cbiAqIGxpYnJhcnkgKHZlcnNpb24gMi4yIG9yIGxhdGVyKS4gWW91IGNhbiB1c2UgdGhlIGZ1bGwgYnVpbGQgc3VwcGxpZWQgYnlcbiAqIFByb2o0anMsIG9yIGNyZWF0ZSBhIGN1c3RvbSBidWlsZCB0byBzdXBwb3J0IHRob3NlIHByb2plY3Rpb25zIHlvdSBuZWVkOyBzZWVcbiAqIHRoZSBQcm9qNGpzIHdlYnNpdGUgZm9yIGhvdyB0byBkbyB0aGlzLiBZb3UgYWxzbyBuZWVkIHRoZSBQcm9qNGpzIGRlZmluaXRpb25zXG4gKiBmb3IgdGhlIHJlcXVpcmVkIHByb2plY3Rpb25zLiBUaGVzZSBkZWZpbml0aW9ucyBjYW4gYmUgb2J0YWluZWQgZnJvbVxuICogaHR0cHM6Ly9lcHNnLmlvLywgYW5kIGFyZSBhIEpTIGZ1bmN0aW9uLCBzbyBjYW4gYmUgbG9hZGVkIGluIGEgc2NyaXB0XG4gKiB0YWcgKGFzIGluIHRoZSBleGFtcGxlcykgb3IgcGFzdGVkIGludG8geW91ciBhcHBsaWNhdGlvbi5cbiAqXG4gKiBBZnRlciBhbGwgcmVxdWlyZWQgcHJvamVjdGlvbiBkZWZpbml0aW9ucyBhcmUgYWRkZWQgdG8gcHJvajQncyByZWdpc3RyeSAoYnlcbiAqIHVzaW5nIGBwcm9qNC5kZWZzKClgKSwgc2ltcGx5IGNhbGwgYHJlZ2lzdGVyKHByb2o0KWAgZnJvbSB0aGUgYG9sL3Byb2ovcHJvajRgXG4gKiBwYWNrYWdlLiBFeGlzdGluZyB0cmFuc2Zvcm1zIGFyZSBub3QgY2hhbmdlZCBieSB0aGlzIGZ1bmN0aW9uLiBTZWVcbiAqIGV4YW1wbGVzL3dtcy1pbWFnZS1jdXN0b20tcHJvaiBmb3IgYW4gZXhhbXBsZSBvZiB0aGlzLlxuICpcbiAqIEFkZGl0aW9uYWwgcHJvamVjdGlvbiBkZWZpbml0aW9ucyBjYW4gYmUgcmVnaXN0ZXJlZCB3aXRoIGBwcm9qNC5kZWZzKClgIGFueVxuICogdGltZS4gSnVzdCBtYWtlIHN1cmUgdG8gY2FsbCBgcmVnaXN0ZXIocHJvajQpYCBhZ2FpbjsgZm9yIGV4YW1wbGUsIHdpdGggdXNlci1zdXBwbGllZCBkYXRhIHdoZXJlIHlvdSBkb24ndFxuICoga25vdyBpbiBhZHZhbmNlIHdoYXQgcHJvamVjdGlvbnMgYXJlIG5lZWRlZCwgeW91IGNhbiBpbml0aWFsbHkgbG9hZCBtaW5pbWFsXG4gKiBzdXBwb3J0IGFuZCB0aGVuIGxvYWQgd2hpY2hldmVyIGFyZSByZXF1ZXN0ZWQuXG4gKlxuICogTm90ZSB0aGF0IFByb2o0anMgZG9lcyBub3Qgc3VwcG9ydCBwcm9qZWN0aW9uIGV4dGVudHMuIElmIHlvdSB3YW50IHRvIGFkZFxuICogb25lIGZvciBjcmVhdGluZyBkZWZhdWx0IHRpbGUgZ3JpZHMsIHlvdSBjYW4gYWRkIGl0IGFmdGVyIHRoZSBQcm9qZWN0aW9uXG4gKiBvYmplY3QgaGFzIGJlZW4gY3JlYXRlZCB3aXRoIGBzZXRFeHRlbnRgLCBmb3IgZXhhbXBsZSxcbiAqIGBnZXQoJ0VQU0c6MTIzNCcpLnNldEV4dGVudChleHRlbnQpYC5cbiAqXG4gKiBJbiBhZGRpdGlvbiB0byBQcm9qNGpzIHN1cHBvcnQsIGFueSB0cmFuc2Zvcm0gZnVuY3Rpb25zIGNhbiBiZSBhZGRlZCB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2p+YWRkQ29vcmRpbmF0ZVRyYW5zZm9ybXN9LiBUbyB1c2UgdGhpcywgeW91IG11c3QgZmlyc3QgY3JlYXRlXG4gKiBhIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufSBvYmplY3QgZm9yIHRoZSBuZXcgcHJvamVjdGlvbiBhbmQgYWRkIGl0IHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvan5hZGRQcm9qZWN0aW9ufS4gWW91IGNhbiB0aGVuIGFkZCB0aGUgZm9yd2FyZCBhbmQgaW52ZXJzZVxuICogZnVuY3Rpb25zIHdpdGgge0BsaW5rIG1vZHVsZTpvbC9wcm9qfmFkZENvb3JkaW5hdGVUcmFuc2Zvcm1zfS4gU2VlXG4gKiBleGFtcGxlcy93bXMtY3VzdG9tLXByb2ogZm9yIGFuIGV4YW1wbGUgb2YgdGhpcy5cbiAqXG4gKiBOb3RlIHRoYXQgaWYgbm8gdHJhbnNmb3JtcyBhcmUgbmVlZGVkIGFuZCB5b3Ugb25seSBuZWVkIHRvIGRlZmluZSB0aGVcbiAqIHByb2plY3Rpb24sIGp1c3QgYWRkIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb259IHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvan5hZGRQcm9qZWN0aW9ufS4gU2VlIGV4YW1wbGVzL3dtcy1uby1wcm9qIGZvciBhbiBleGFtcGxlIG9mXG4gKiB0aGlzLlxuICovXG5pbXBvcnQgUHJvamVjdGlvbiBmcm9tICcuL3Byb2ovUHJvamVjdGlvbi5qcyc7XG5pbXBvcnQgVW5pdHMsIHsgTUVURVJTX1BFUl9VTklUIH0gZnJvbSAnLi9wcm9qL1VuaXRzLmpzJztcbmltcG9ydCB7IFBST0pFQ1RJT05TIGFzIEVQU0czODU3X1BST0pFQ1RJT05TLCBmcm9tRVBTRzQzMjYsIHRvRVBTRzQzMjYsIH0gZnJvbSAnLi9wcm9qL2Vwc2czODU3LmpzJztcbmltcG9ydCB7IFBST0pFQ1RJT05TIGFzIEVQU0c0MzI2X1BST0pFQ1RJT05TIH0gZnJvbSAnLi9wcm9qL2Vwc2c0MzI2LmpzJztcbmltcG9ydCB7IGFkZCBhcyBhZGRQcm9qLCBjbGVhciBhcyBjbGVhclByb2osIGdldCBhcyBnZXRQcm9qLCB9IGZyb20gJy4vcHJvai9wcm9qZWN0aW9ucy5qcyc7XG5pbXBvcnQgeyBhZGQgYXMgYWRkVHJhbnNmb3JtRnVuYywgY2xlYXIgYXMgY2xlYXJUcmFuc2Zvcm1GdW5jcywgZ2V0IGFzIGdldFRyYW5zZm9ybUZ1bmMsIH0gZnJvbSAnLi9wcm9qL3RyYW5zZm9ybXMuanMnO1xuaW1wb3J0IHsgYXBwbHlUcmFuc2Zvcm0sIGdldFdpZHRoIH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgY2xhbXAsIG1vZHVsbyB9IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQgeyBnZXREaXN0YW5jZSB9IGZyb20gJy4vc3BoZXJlLmpzJztcbmltcG9ydCB7IGdldFdvcmxkc0F3YXkgfSBmcm9tICcuL2Nvb3JkaW5hdGUuanMnO1xuLyoqXG4gKiBBIHByb2plY3Rpb24gYXMge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb259LCBTUlMgaWRlbnRpZmllclxuICogc3RyaW5nIG9yIHVuZGVmaW5lZC5cbiAqIEB0eXBlZGVmIHtQcm9qZWN0aW9ufHN0cmluZ3x1bmRlZmluZWR9IFByb2plY3Rpb25MaWtlXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQSB0cmFuc2Zvcm0gZnVuY3Rpb24gYWNjZXB0cyBhbiBhcnJheSBvZiBpbnB1dCBjb29yZGluYXRlIHZhbHVlcywgYW4gb3B0aW9uYWxcbiAqIG91dHB1dCBhcnJheSwgYW5kIGFuIG9wdGlvbmFsIGRpbWVuc2lvbiAoZGVmYXVsdCBzaG91bGQgYmUgMikuICBUaGUgZnVuY3Rpb25cbiAqIHRyYW5zZm9ybXMgdGhlIGlucHV0IGNvb3JkaW5hdGUgdmFsdWVzLCBwb3B1bGF0ZXMgdGhlIG91dHB1dCBhcnJheSwgYW5kXG4gKiByZXR1cm5zIHRoZSBvdXRwdXQgYXJyYXkuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKEFycmF5PG51bWJlcj4sIEFycmF5PG51bWJlcj49LCBudW1iZXI9KTogQXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHsgTUVURVJTX1BFUl9VTklUIH07XG5leHBvcnQgeyBQcm9qZWN0aW9uIH07XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gaW5wdXQgSW5wdXQgY29vcmRpbmF0ZSBhcnJheS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9vdXRwdXQgT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGltZW5zaW9uIERpbWVuc2lvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE91dHB1dCBjb29yZGluYXRlIGFycmF5IChuZXcgYXJyYXksIHNhbWUgY29vcmRpbmF0ZVxuICogICAgIHZhbHVlcykuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZVRyYW5zZm9ybShpbnB1dCwgb3B0X291dHB1dCwgb3B0X2RpbWVuc2lvbikge1xuICAgIHZhciBvdXRwdXQ7XG4gICAgaWYgKG9wdF9vdXRwdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnB1dC5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBvcHRfb3V0cHV0W2ldID0gaW5wdXRbaV07XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0ID0gb3B0X291dHB1dDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG91dHB1dCA9IGlucHV0LnNsaWNlKCk7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gaW5wdXQgSW5wdXQgY29vcmRpbmF0ZSBhcnJheS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9vdXRwdXQgT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGltZW5zaW9uIERpbWVuc2lvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IElucHV0IGNvb3JkaW5hdGUgYXJyYXkgKHNhbWUgYXJyYXkgYXMgaW5wdXQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHlUcmFuc2Zvcm0oaW5wdXQsIG9wdF9vdXRwdXQsIG9wdF9kaW1lbnNpb24pIHtcbiAgICBpZiAob3B0X291dHB1dCAhPT0gdW5kZWZpbmVkICYmIGlucHV0ICE9PSBvcHRfb3V0cHV0KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGlucHV0Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIG9wdF9vdXRwdXRbaV0gPSBpbnB1dFtpXTtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dCA9IG9wdF9vdXRwdXQ7XG4gICAgfVxuICAgIHJldHVybiBpbnB1dDtcbn1cbi8qKlxuICogQWRkIGEgUHJvamVjdGlvbiBvYmplY3QgdG8gdGhlIGxpc3Qgb2Ygc3VwcG9ydGVkIHByb2plY3Rpb25zIHRoYXQgY2FuIGJlXG4gKiBsb29rZWQgdXAgYnkgdGhlaXIgY29kZS5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHByb2plY3Rpb24gUHJvamVjdGlvbiBpbnN0YW5jZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICAgIGFkZFByb2oocHJvamVjdGlvbi5nZXRDb2RlKCksIHByb2plY3Rpb24pO1xuICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbiwgcHJvamVjdGlvbiwgY2xvbmVUcmFuc2Zvcm0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFByb2plY3Rpb24+fSBwcm9qZWN0aW9ucyBQcm9qZWN0aW9ucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFByb2plY3Rpb25zKHByb2plY3Rpb25zKSB7XG4gICAgcHJvamVjdGlvbnMuZm9yRWFjaChhZGRQcm9qZWN0aW9uKTtcbn1cbi8qKlxuICogRmV0Y2hlcyBhIFByb2plY3Rpb24gb2JqZWN0IGZvciB0aGUgY29kZSBzcGVjaWZpZWQuXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbkxpa2UgRWl0aGVyIGEgY29kZSBzdHJpbmcgd2hpY2ggaXNcbiAqICAgICBhIGNvbWJpbmF0aW9uIG9mIGF1dGhvcml0eSBhbmQgaWRlbnRpZmllciBzdWNoIGFzIFwiRVBTRzo0MzI2XCIsIG9yIGFuXG4gKiAgICAgZXhpc3RpbmcgcHJvamVjdGlvbiBvYmplY3QsIG9yIHVuZGVmaW5lZC5cbiAqIEByZXR1cm4ge1Byb2plY3Rpb259IFByb2plY3Rpb24gb2JqZWN0LCBvciBudWxsIGlmIG5vdCBpbiBsaXN0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0KHByb2plY3Rpb25MaWtlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBwcm9qZWN0aW9uTGlrZSA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBnZXRQcm9qKC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAocHJvamVjdGlvbkxpa2UpKVxuICAgICAgICA6IC8qKiBAdHlwZSB7UHJvamVjdGlvbn0gKi8gKHByb2plY3Rpb25MaWtlKSB8fCBudWxsO1xufVxuLyoqXG4gKiBHZXQgdGhlIHJlc29sdXRpb24gb2YgdGhlIHBvaW50IGluIGRlZ3JlZXMgb3IgZGlzdGFuY2UgdW5pdHMuXG4gKiBGb3IgcHJvamVjdGlvbnMgd2l0aCBkZWdyZWVzIGFzIHRoZSB1bml0IHRoaXMgd2lsbCBzaW1wbHkgcmV0dXJuIHRoZVxuICogcHJvdmlkZWQgcmVzb2x1dGlvbi4gRm9yIG90aGVyIHByb2plY3Rpb25zIHRoZSBwb2ludCByZXNvbHV0aW9uIGlzXG4gKiBieSBkZWZhdWx0IGVzdGltYXRlZCBieSB0cmFuc2Zvcm1pbmcgdGhlICdwb2ludCcgcGl4ZWwgdG8gRVBTRzo0MzI2LFxuICogbWVhc3VyaW5nIGl0cyB3aWR0aCBhbmQgaGVpZ2h0IG9uIHRoZSBub3JtYWwgc3BoZXJlLFxuICogYW5kIHRha2luZyB0aGUgYXZlcmFnZSBvZiB0aGUgd2lkdGggYW5kIGhlaWdodC5cbiAqIEEgY3VzdG9tIGZ1bmN0aW9uIGNhbiBiZSBwcm92aWRlZCBmb3IgYSBzcGVjaWZpYyBwcm9qZWN0aW9uLCBlaXRoZXJcbiAqIGJ5IHNldHRpbmcgdGhlIGBnZXRQb2ludFJlc29sdXRpb25gIG9wdGlvbiBpbiB0aGVcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb259IGNvbnN0cnVjdG9yIG9yIGJ5IHVzaW5nXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9uI3NldEdldFBvaW50UmVzb2x1dGlvbn0gdG8gY2hhbmdlIGFuIGV4aXN0aW5nXG4gKiBwcm9qZWN0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gVGhlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBOb21pbmFsIHJlc29sdXRpb24gaW4gcHJvamVjdGlvbiB1bml0cy5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50IFBvaW50IHRvIGZpbmQgYWRqdXN0ZWQgcmVzb2x1dGlvbiBhdC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1VuaXRzLmpzXCIpLmRlZmF1bHQ9fSBvcHRfdW5pdHMgVW5pdHMgdG8gZ2V0IHRoZSBwb2ludCByZXNvbHV0aW9uIGluLlxuICogRGVmYXVsdCBpcyB0aGUgcHJvamVjdGlvbidzIHVuaXRzLlxuICogQHJldHVybiB7bnVtYmVyfSBQb2ludCByZXNvbHV0aW9uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9pbnRSZXNvbHV0aW9uKHByb2plY3Rpb24sIHJlc29sdXRpb24sIHBvaW50LCBvcHRfdW5pdHMpIHtcbiAgICBwcm9qZWN0aW9uID0gZ2V0KHByb2plY3Rpb24pO1xuICAgIHZhciBwb2ludFJlc29sdXRpb247XG4gICAgdmFyIGdldHRlciA9IHByb2plY3Rpb24uZ2V0UG9pbnRSZXNvbHV0aW9uRnVuYygpO1xuICAgIGlmIChnZXR0ZXIpIHtcbiAgICAgICAgcG9pbnRSZXNvbHV0aW9uID0gZ2V0dGVyKHJlc29sdXRpb24sIHBvaW50KTtcbiAgICAgICAgaWYgKG9wdF91bml0cyAmJiBvcHRfdW5pdHMgIT09IHByb2plY3Rpb24uZ2V0VW5pdHMoKSkge1xuICAgICAgICAgICAgdmFyIG1ldGVyc1BlclVuaXQgPSBwcm9qZWN0aW9uLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgICAgICAgICAgIGlmIChtZXRlcnNQZXJVbml0KSB7XG4gICAgICAgICAgICAgICAgcG9pbnRSZXNvbHV0aW9uID1cbiAgICAgICAgICAgICAgICAgICAgKHBvaW50UmVzb2x1dGlvbiAqIG1ldGVyc1BlclVuaXQpIC8gTUVURVJTX1BFUl9VTklUW29wdF91bml0c107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciB1bml0cyA9IHByb2plY3Rpb24uZ2V0VW5pdHMoKTtcbiAgICAgICAgaWYgKCh1bml0cyA9PSBVbml0cy5ERUdSRUVTICYmICFvcHRfdW5pdHMpIHx8IG9wdF91bml0cyA9PSBVbml0cy5ERUdSRUVTKSB7XG4gICAgICAgICAgICBwb2ludFJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gRXN0aW1hdGUgcG9pbnQgcmVzb2x1dGlvbiBieSB0cmFuc2Zvcm1pbmcgdGhlIGNlbnRlciBwaXhlbCB0byBFUFNHOjQzMjYsXG4gICAgICAgICAgICAvLyBtZWFzdXJpbmcgaXRzIHdpZHRoIGFuZCBoZWlnaHQgb24gdGhlIG5vcm1hbCBzcGhlcmUsIGFuZCB0YWtpbmcgdGhlXG4gICAgICAgICAgICAvLyBhdmVyYWdlIG9mIHRoZSB3aWR0aCBhbmQgaGVpZ2h0LlxuICAgICAgICAgICAgdmFyIHRvRVBTRzQzMjZfMSA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhwcm9qZWN0aW9uLCBnZXQoJ0VQU0c6NDMyNicpKTtcbiAgICAgICAgICAgIGlmICh0b0VQU0c0MzI2XzEgPT09IGlkZW50aXR5VHJhbnNmb3JtICYmIHVuaXRzICE9PSBVbml0cy5ERUdSRUVTKSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gdHJhbnNmb3JtIGlzIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgIHBvaW50UmVzb2x1dGlvbiA9IHJlc29sdXRpb24gKiBwcm9qZWN0aW9uLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciB2ZXJ0aWNlcyA9IFtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRbMF0gLSByZXNvbHV0aW9uIC8gMixcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRbMV0sXG4gICAgICAgICAgICAgICAgICAgIHBvaW50WzBdICsgcmVzb2x1dGlvbiAvIDIsXG4gICAgICAgICAgICAgICAgICAgIHBvaW50WzFdLFxuICAgICAgICAgICAgICAgICAgICBwb2ludFswXSxcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRbMV0gLSByZXNvbHV0aW9uIC8gMixcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRbMF0sXG4gICAgICAgICAgICAgICAgICAgIHBvaW50WzFdICsgcmVzb2x1dGlvbiAvIDIsXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB2ZXJ0aWNlcyA9IHRvRVBTRzQzMjZfMSh2ZXJ0aWNlcywgdmVydGljZXMsIDIpO1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IGdldERpc3RhbmNlKHZlcnRpY2VzLnNsaWNlKDAsIDIpLCB2ZXJ0aWNlcy5zbGljZSgyLCA0KSk7XG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IGdldERpc3RhbmNlKHZlcnRpY2VzLnNsaWNlKDQsIDYpLCB2ZXJ0aWNlcy5zbGljZSg2LCA4KSk7XG4gICAgICAgICAgICAgICAgcG9pbnRSZXNvbHV0aW9uID0gKHdpZHRoICsgaGVpZ2h0KSAvIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbWV0ZXJzUGVyVW5pdCA9IG9wdF91bml0c1xuICAgICAgICAgICAgICAgID8gTUVURVJTX1BFUl9VTklUW29wdF91bml0c11cbiAgICAgICAgICAgICAgICA6IHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgICAgICAgaWYgKG1ldGVyc1BlclVuaXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHBvaW50UmVzb2x1dGlvbiAvPSBtZXRlcnNQZXJVbml0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwb2ludFJlc29sdXRpb247XG59XG4vKipcbiAqIFJlZ2lzdGVycyB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnMgdGhhdCBkb24ndCBhbHRlciBjb29yZGluYXRlcy4gVGhvc2UgYWxsb3dcbiAqIHRvIHRyYW5zZm9ybSBiZXR3ZWVuIHByb2plY3Rpb25zIHdpdGggZXF1YWwgbWVhbmluZy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PFByb2plY3Rpb24+fSBwcm9qZWN0aW9ucyBQcm9qZWN0aW9ucy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEVxdWl2YWxlbnRQcm9qZWN0aW9ucyhwcm9qZWN0aW9ucykge1xuICAgIGFkZFByb2plY3Rpb25zKHByb2plY3Rpb25zKTtcbiAgICBwcm9qZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgcHJvamVjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZGVzdGluYXRpb24pIHtcbiAgICAgICAgICAgIGlmIChzb3VyY2UgIT09IGRlc3RpbmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYWRkVHJhbnNmb3JtRnVuYyhzb3VyY2UsIGRlc3RpbmF0aW9uLCBjbG9uZVRyYW5zZm9ybSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLyoqXG4gKiBSZWdpc3RlcnMgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb25zIHRvIGNvbnZlcnQgY29vcmRpbmF0ZXMgaW4gYW55IHByb2plY3Rpb25cbiAqIGluIHByb2plY3Rpb24xIHRvIGFueSBwcm9qZWN0aW9uIGluIHByb2plY3Rpb24yLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8UHJvamVjdGlvbj59IHByb2plY3Rpb25zMSBQcm9qZWN0aW9ucyB3aXRoIGVxdWFsXG4gKiAgICAgbWVhbmluZy5cbiAqIEBwYXJhbSB7QXJyYXk8UHJvamVjdGlvbj59IHByb2plY3Rpb25zMiBQcm9qZWN0aW9ucyB3aXRoIGVxdWFsXG4gKiAgICAgbWVhbmluZy5cbiAqIEBwYXJhbSB7VHJhbnNmb3JtRnVuY3Rpb259IGZvcndhcmRUcmFuc2Zvcm0gVHJhbnNmb3JtYXRpb24gZnJvbSBhbnlcbiAqICAgcHJvamVjdGlvbiBpbiBwcm9qZWN0aW9uMSB0byBhbnkgcHJvamVjdGlvbiBpbiBwcm9qZWN0aW9uMi5cbiAqIEBwYXJhbSB7VHJhbnNmb3JtRnVuY3Rpb259IGludmVyc2VUcmFuc2Zvcm0gVHJhbnNmb3JtIGZyb20gYW55IHByb2plY3Rpb25cbiAqICAgaW4gcHJvamVjdGlvbjIgdG8gYW55IHByb2plY3Rpb24gaW4gcHJvamVjdGlvbjEuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRXF1aXZhbGVudFRyYW5zZm9ybXMocHJvamVjdGlvbnMxLCBwcm9qZWN0aW9uczIsIGZvcndhcmRUcmFuc2Zvcm0sIGludmVyc2VUcmFuc2Zvcm0pIHtcbiAgICBwcm9qZWN0aW9uczEuZm9yRWFjaChmdW5jdGlvbiAocHJvamVjdGlvbjEpIHtcbiAgICAgICAgcHJvamVjdGlvbnMyLmZvckVhY2goZnVuY3Rpb24gKHByb2plY3Rpb24yKSB7XG4gICAgICAgICAgICBhZGRUcmFuc2Zvcm1GdW5jKHByb2plY3Rpb24xLCBwcm9qZWN0aW9uMiwgZm9yd2FyZFRyYW5zZm9ybSk7XG4gICAgICAgICAgICBhZGRUcmFuc2Zvcm1GdW5jKHByb2plY3Rpb24yLCBwcm9qZWN0aW9uMSwgaW52ZXJzZVRyYW5zZm9ybSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLyoqXG4gKiBDbGVhciBhbGwgY2FjaGVkIHByb2plY3Rpb25zIGFuZCB0cmFuc2Zvcm1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJBbGxQcm9qZWN0aW9ucygpIHtcbiAgICBjbGVhclByb2ooKTtcbiAgICBjbGVhclRyYW5zZm9ybUZ1bmNzKCk7XG59XG4vKipcbiAqIEBwYXJhbSB7UHJvamVjdGlvbnxzdHJpbmd8dW5kZWZpbmVkfSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVmYXVsdENvZGUgRGVmYXVsdCBjb2RlLlxuICogQHJldHVybiB7UHJvamVjdGlvbn0gUHJvamVjdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb2plY3Rpb24ocHJvamVjdGlvbiwgZGVmYXVsdENvZGUpIHtcbiAgICBpZiAoIXByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGdldChkZWZhdWx0Q29kZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBwcm9qZWN0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gZ2V0KHByb2plY3Rpb24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7UHJvamVjdGlvbn0gKi8gKHByb2plY3Rpb24pO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBtb2R1bGU6b2wvcHJvan5UcmFuc2Zvcm1GdW5jdGlvbn0gZnJvbSBhIHNpbXBsZSAyRCBjb29yZGluYXRlIHRyYW5zZm9ybVxuICogZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkVHJhbnNmb3JtIENvb3JkaW5hdGVcbiAqICAgICB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHtUcmFuc2Zvcm1GdW5jdGlvbn0gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJhbnNmb3JtRnJvbUNvb3JkaW5hdGVUcmFuc2Zvcm0oY29vcmRUcmFuc2Zvcm0pIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gaW5wdXQgSW5wdXQuXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X291dHB1dCBPdXRwdXQuXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGltZW5zaW9uIERpbWVuc2lvbi5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPdXRwdXQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gICAgICAgIHZhciBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgICAgIHZhciBkaW1lbnNpb24gPSBvcHRfZGltZW5zaW9uICE9PSB1bmRlZmluZWQgPyBvcHRfZGltZW5zaW9uIDogMjtcbiAgICAgICAgdmFyIG91dHB1dCA9IG9wdF9vdXRwdXQgIT09IHVuZGVmaW5lZCA/IG9wdF9vdXRwdXQgOiBuZXcgQXJyYXkobGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gZGltZW5zaW9uKSB7XG4gICAgICAgICAgICB2YXIgcG9pbnQgPSBjb29yZFRyYW5zZm9ybShbaW5wdXRbaV0sIGlucHV0W2kgKyAxXV0pO1xuICAgICAgICAgICAgb3V0cHV0W2ldID0gcG9pbnRbMF07XG4gICAgICAgICAgICBvdXRwdXRbaSArIDFdID0gcG9pbnRbMV07XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSAyOyAtLWopIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRbaSArIGpdID0gaW5wdXRbaSArIGpdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfSk7XG59XG4vKipcbiAqIFJlZ2lzdGVycyBjb29yZGluYXRlIHRyYW5zZm9ybSBmdW5jdGlvbnMgdG8gY29udmVydCBjb29yZGluYXRlcyBiZXR3ZWVuIHRoZVxuICogc291cmNlIHByb2plY3Rpb24gYW5kIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogVGhlIGZvcndhcmQgYW5kIGludmVyc2UgZnVuY3Rpb25zIGNvbnZlcnQgY29vcmRpbmF0ZSBwYWlyczsgdGhpcyBmdW5jdGlvblxuICogY29udmVydHMgdGhlc2UgaW50byB0aGUgZnVuY3Rpb25zIHVzZWQgaW50ZXJuYWxseSB3aGljaCBhbHNvIGhhbmRsZVxuICogZXh0ZW50cyBhbmQgY29vcmRpbmF0ZSBhcnJheXMuXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZm9yd2FyZCBUaGUgZm9yd2FyZCB0cmFuc2Zvcm1cbiAqICAgICBmdW5jdGlvbiAodGhhdCBpcywgZnJvbSB0aGUgc291cmNlIHByb2plY3Rpb24gdG8gdGhlIGRlc3RpbmF0aW9uXG4gKiAgICAgcHJvamVjdGlvbikgdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfSBhcyBhcmd1bWVudCBhbmQgcmV0dXJuc1xuICogICAgIHRoZSB0cmFuc2Zvcm1lZCB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGludmVyc2UgVGhlIGludmVyc2UgdHJhbnNmb3JtXG4gKiAgICAgZnVuY3Rpb24gKHRoYXQgaXMsIGZyb20gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24gdG8gdGhlIHNvdXJjZVxuICogICAgIHByb2plY3Rpb24pIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0gYXMgYXJndW1lbnQgYW5kIHJldHVybnNcbiAqICAgICB0aGUgdHJhbnNmb3JtZWQge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29vcmRpbmF0ZVRyYW5zZm9ybXMoc291cmNlLCBkZXN0aW5hdGlvbiwgZm9yd2FyZCwgaW52ZXJzZSkge1xuICAgIHZhciBzb3VyY2VQcm9qID0gZ2V0KHNvdXJjZSk7XG4gICAgdmFyIGRlc3RQcm9qID0gZ2V0KGRlc3RpbmF0aW9uKTtcbiAgICBhZGRUcmFuc2Zvcm1GdW5jKHNvdXJjZVByb2osIGRlc3RQcm9qLCBjcmVhdGVUcmFuc2Zvcm1Gcm9tQ29vcmRpbmF0ZVRyYW5zZm9ybShmb3J3YXJkKSk7XG4gICAgYWRkVHJhbnNmb3JtRnVuYyhkZXN0UHJvaiwgc291cmNlUHJvaiwgY3JlYXRlVHJhbnNmb3JtRnJvbUNvb3JkaW5hdGVUcmFuc2Zvcm0oaW52ZXJzZSkpO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgY29vcmRpbmF0ZSBmcm9tIGxvbmdpdHVkZS9sYXRpdHVkZSB0byBhIGRpZmZlcmVudCBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlIGFzIGxvbmdpdHVkZSBhbmQgbGF0aXR1ZGUsIGkuZS5cbiAqICAgICBhbiBhcnJheSB3aXRoIGxvbmdpdHVkZSBhcyAxc3QgYW5kIGxhdGl0dWRlIGFzIDJuZCBlbGVtZW50LlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZT19IG9wdF9wcm9qZWN0aW9uIFRhcmdldCBwcm9qZWN0aW9uLiBUaGVcbiAqICAgICBkZWZhdWx0IGlzIFdlYiBNZXJjYXRvciwgaS5lLiAnRVBTRzozODU3Jy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlIHByb2plY3RlZCB0byB0aGUgdGFyZ2V0IHByb2plY3Rpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTG9uTGF0KGNvb3JkaW5hdGUsIG9wdF9wcm9qZWN0aW9uKSB7XG4gICAgcmV0dXJuIHRyYW5zZm9ybShjb29yZGluYXRlLCAnRVBTRzo0MzI2Jywgb3B0X3Byb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9wcm9qZWN0aW9uIDogJ0VQU0c6Mzg1NycpO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgY29vcmRpbmF0ZSB0byBsb25naXR1ZGUvbGF0aXR1ZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIFByb2plY3RlZCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZT19IG9wdF9wcm9qZWN0aW9uIFByb2plY3Rpb24gb2YgdGhlIGNvb3JkaW5hdGUuXG4gKiAgICAgVGhlIGRlZmF1bHQgaXMgV2ViIE1lcmNhdG9yLCBpLmUuICdFUFNHOjM4NTcnLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUgYXMgbG9uZ2l0dWRlIGFuZCBsYXRpdHVkZSwgaS5lLiBhbiBhcnJheVxuICogICAgIHdpdGggbG9uZ2l0dWRlIGFzIDFzdCBhbmQgbGF0aXR1ZGUgYXMgMm5kIGVsZW1lbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0xvbkxhdChjb29yZGluYXRlLCBvcHRfcHJvamVjdGlvbikge1xuICAgIHZhciBsb25MYXQgPSB0cmFuc2Zvcm0oY29vcmRpbmF0ZSwgb3B0X3Byb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9wcm9qZWN0aW9uIDogJ0VQU0c6Mzg1NycsICdFUFNHOjQzMjYnKTtcbiAgICB2YXIgbG9uID0gbG9uTGF0WzBdO1xuICAgIGlmIChsb24gPCAtMTgwIHx8IGxvbiA+IDE4MCkge1xuICAgICAgICBsb25MYXRbMF0gPSBtb2R1bG8obG9uICsgMTgwLCAzNjApIC0gMTgwO1xuICAgIH1cbiAgICByZXR1cm4gbG9uTGF0O1xufVxuLyoqXG4gKiBDaGVja3MgaWYgdHdvIHByb2plY3Rpb25zIGFyZSB0aGUgc2FtZSwgdGhhdCBpcyBldmVyeSBjb29yZGluYXRlIGluIG9uZVxuICogcHJvamVjdGlvbiBkb2VzIHJlcHJlc2VudCB0aGUgc2FtZSBnZW9ncmFwaGljIHBvaW50IGFzIHRoZSBzYW1lIGNvb3JkaW5hdGUgaW5cbiAqIHRoZSBvdGhlciBwcm9qZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gcHJvamVjdGlvbjEgUHJvamVjdGlvbiAxLlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBwcm9qZWN0aW9uMiBQcm9qZWN0aW9uIDIuXG4gKiBAcmV0dXJuIHtib29sZWFufSBFcXVpdmFsZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1aXZhbGVudChwcm9qZWN0aW9uMSwgcHJvamVjdGlvbjIpIHtcbiAgICBpZiAocHJvamVjdGlvbjEgPT09IHByb2plY3Rpb24yKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB2YXIgZXF1YWxVbml0cyA9IHByb2plY3Rpb24xLmdldFVuaXRzKCkgPT09IHByb2plY3Rpb24yLmdldFVuaXRzKCk7XG4gICAgaWYgKHByb2plY3Rpb24xLmdldENvZGUoKSA9PT0gcHJvamVjdGlvbjIuZ2V0Q29kZSgpKSB7XG4gICAgICAgIHJldHVybiBlcXVhbFVuaXRzO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybUZ1bmMgPSBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMocHJvamVjdGlvbjEsIHByb2plY3Rpb24yKTtcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUZ1bmMgPT09IGNsb25lVHJhbnNmb3JtICYmIGVxdWFsVW5pdHM7XG4gICAgfVxufVxuLyoqXG4gKiBTZWFyY2hlcyBpbiB0aGUgbGlzdCBvZiB0cmFuc2Zvcm0gZnVuY3Rpb25zIGZvciB0aGUgZnVuY3Rpb24gZm9yIGNvbnZlcnRpbmdcbiAqIGNvb3JkaW5hdGVzIGZyb20gdGhlIHNvdXJjZSBwcm9qZWN0aW9uIHRvIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gc291cmNlUHJvamVjdGlvbiBTb3VyY2UgUHJvamVjdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IGRlc3RpbmF0aW9uUHJvamVjdGlvbiBEZXN0aW5hdGlvbiBQcm9qZWN0aW9uXG4gKiAgICAgb2JqZWN0LlxuICogQHJldHVybiB7VHJhbnNmb3JtRnVuY3Rpb259IFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhzb3VyY2VQcm9qZWN0aW9uLCBkZXN0aW5hdGlvblByb2plY3Rpb24pIHtcbiAgICB2YXIgc291cmNlQ29kZSA9IHNvdXJjZVByb2plY3Rpb24uZ2V0Q29kZSgpO1xuICAgIHZhciBkZXN0aW5hdGlvbkNvZGUgPSBkZXN0aW5hdGlvblByb2plY3Rpb24uZ2V0Q29kZSgpO1xuICAgIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtRnVuYyhzb3VyY2VDb2RlLCBkZXN0aW5hdGlvbkNvZGUpO1xuICAgIGlmICghdHJhbnNmb3JtRnVuYykge1xuICAgICAgICB0cmFuc2Zvcm1GdW5jID0gaWRlbnRpdHlUcmFuc2Zvcm07XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm1GdW5jO1xufVxuLyoqXG4gKiBHaXZlbiB0aGUgcHJvamVjdGlvbi1saWtlIG9iamVjdHMsIHNlYXJjaGVzIGZvciBhIHRyYW5zZm9ybWF0aW9uXG4gKiBmdW5jdGlvbiB0byBjb252ZXJ0IGEgY29vcmRpbmF0ZXMgYXJyYXkgZnJvbSB0aGUgc291cmNlIHByb2plY3Rpb24gdG8gdGhlXG4gKiBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZSBTb3VyY2UuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge1RyYW5zZm9ybUZ1bmN0aW9ufSBUcmFuc2Zvcm0gZnVuY3Rpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2Zvcm0oc291cmNlLCBkZXN0aW5hdGlvbikge1xuICAgIHZhciBzb3VyY2VQcm9qZWN0aW9uID0gZ2V0KHNvdXJjZSk7XG4gICAgdmFyIGRlc3RpbmF0aW9uUHJvamVjdGlvbiA9IGdldChkZXN0aW5hdGlvbik7XG4gICAgcmV0dXJuIGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhzb3VyY2VQcm9qZWN0aW9uLCBkZXN0aW5hdGlvblByb2plY3Rpb24pO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgY29vcmRpbmF0ZSBmcm9tIHNvdXJjZSBwcm9qZWN0aW9uIHRvIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBUaGlzIHJldHVybnMgYSBuZXcgY29vcmRpbmF0ZSAoYW5kIGRvZXMgbm90IG1vZGlmeSB0aGUgb3JpZ2luYWwpLlxuICpcbiAqIFNlZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2p+dHJhbnNmb3JtRXh0ZW50fSBmb3IgZXh0ZW50IHRyYW5zZm9ybWF0aW9uLlxuICogU2VlIHRoZSB0cmFuc2Zvcm0gbWV0aG9kIG9mIHtAbGluayBtb2R1bGU6b2wvZ2VvbS9HZW9tZXRyeX5HZW9tZXRyeX0gYW5kIGl0c1xuICogc3ViY2xhc3NlcyBmb3IgZ2VvbWV0cnkgdHJhbnNmb3Jtcy5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2UgU291cmNlIHByb2plY3Rpb24tbGlrZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24tbGlrZS5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtKGNvb3JkaW5hdGUsIHNvdXJjZSwgZGVzdGluYXRpb24pIHtcbiAgICB2YXIgdHJhbnNmb3JtRnVuYyA9IGdldFRyYW5zZm9ybShzb3VyY2UsIGRlc3RpbmF0aW9uKTtcbiAgICByZXR1cm4gdHJhbnNmb3JtRnVuYyhjb29yZGluYXRlLCB1bmRlZmluZWQsIGNvb3JkaW5hdGUubGVuZ3RoKTtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyBhbiBleHRlbnQgZnJvbSBzb3VyY2UgcHJvamVjdGlvbiB0byBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLiAgVGhpc1xuICogcmV0dXJucyBhIG5ldyBleHRlbnQgKGFuZCBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQgdG8gdHJhbnNmb3JtLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZSBwcm9qZWN0aW9uLWxpa2UuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLWxpa2UuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9zdG9wcyBOdW1iZXIgb2Ygc3RvcHMgcGVyIHNpZGUgdXNlZCBmb3IgdGhlIHRyYW5zZm9ybS5cbiAqIEJ5IGRlZmF1bHQgb25seSB0aGUgY29ybmVycyBhcmUgdXNlZC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gVGhlIHRyYW5zZm9ybWVkIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybUV4dGVudChleHRlbnQsIHNvdXJjZSwgZGVzdGluYXRpb24sIG9wdF9zdG9wcykge1xuICAgIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtKHNvdXJjZSwgZGVzdGluYXRpb24pO1xuICAgIHJldHVybiBhcHBseVRyYW5zZm9ybShleHRlbnQsIHRyYW5zZm9ybUZ1bmMsIHVuZGVmaW5lZCwgb3B0X3N0b3BzKTtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgZ2l2ZW4gcG9pbnQgdG8gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcG9pbnQgUG9pbnQuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHNvdXJjZVByb2plY3Rpb24gU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IGRlc3RpbmF0aW9uUHJvamVjdGlvbiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFBvaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtV2l0aFByb2plY3Rpb25zKHBvaW50LCBzb3VyY2VQcm9qZWN0aW9uLCBkZXN0aW5hdGlvblByb2plY3Rpb24pIHtcbiAgICB2YXIgdHJhbnNmb3JtRnVuYyA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhzb3VyY2VQcm9qZWN0aW9uLCBkZXN0aW5hdGlvblByb2plY3Rpb24pO1xuICAgIHJldHVybiB0cmFuc2Zvcm1GdW5jKHBvaW50KTtcbn1cbi8qKlxuICogQHR5cGUgez9Qcm9qZWN0aW9ufVxuICovXG52YXIgdXNlclByb2plY3Rpb24gPSBudWxsO1xuLyoqXG4gKiBTZXQgdGhlIHByb2plY3Rpb24gZm9yIGNvb3JkaW5hdGVzIHN1cHBsaWVkIGZyb20gYW5kIHJldHVybmVkIGJ5IEFQSSBtZXRob2RzLlxuICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCB5ZXQgYSBwYXJ0IG9mIHRoZSBzdGFibGUgQVBJLiAgU3VwcG9ydCBmb3IgdXNlclxuICogcHJvamVjdGlvbnMgaXMgbm90IHlldCBjb21wbGV0ZSBhbmQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgZXhwZXJpbWVudGFsLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBUaGUgdXNlciBwcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0VXNlclByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICAgIHVzZXJQcm9qZWN0aW9uID0gZ2V0KHByb2plY3Rpb24pO1xufVxuLyoqXG4gKiBDbGVhciB0aGUgdXNlciBwcm9qZWN0aW9uIGlmIHNldC4gIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3QgeWV0IGEgcGFydCBvZlxuICogdGhlIHN0YWJsZSBBUEkuICBTdXBwb3J0IGZvciB1c2VyIHByb2plY3Rpb25zIGlzIG5vdCB5ZXQgY29tcGxldGUgYW5kIHNob3VsZFxuICogYmUgY29uc2lkZXJlZCBleHBlcmltZW50YWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclVzZXJQcm9qZWN0aW9uKCkge1xuICAgIHVzZXJQcm9qZWN0aW9uID0gbnVsbDtcbn1cbi8qKlxuICogR2V0IHRoZSBwcm9qZWN0aW9uIGZvciBjb29yZGluYXRlcyBzdXBwbGllZCBmcm9tIGFuZCByZXR1cm5lZCBieSBBUEkgbWV0aG9kcy5cbiAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3QgeWV0IGEgcGFydCBvZiB0aGUgc3RhYmxlIEFQSS4gIFN1cHBvcnQgZm9yIHVzZXJcbiAqIHByb2plY3Rpb25zIGlzIG5vdCB5ZXQgY29tcGxldGUgYW5kIHNob3VsZCBiZSBjb25zaWRlcmVkIGV4cGVyaW1lbnRhbC5cbiAqIEByZXR1cm5zIHs/UHJvamVjdGlvbn0gVGhlIHVzZXIgcHJvamVjdGlvbiAob3IgbnVsbCBpZiBub3Qgc2V0KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJQcm9qZWN0aW9uKCkge1xuICAgIHJldHVybiB1c2VyUHJvamVjdGlvbjtcbn1cbi8qKlxuICogVXNlIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMgKFdHUy04NCBkYXR1bSkgaW4gQVBJIG1ldGhvZHMuICBOb3RlIHRoYXQgdGhpc1xuICogbWV0aG9kIGlzIG5vdCB5ZXQgYSBwYXJ0IG9mIHRoZSBzdGFibGUgQVBJLiAgU3VwcG9ydCBmb3IgdXNlciBwcm9qZWN0aW9ucyBpc1xuICogbm90IHlldCBjb21wbGV0ZSBhbmQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgZXhwZXJpbWVudGFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlR2VvZ3JhcGhpYygpIHtcbiAgICBzZXRVc2VyUHJvamVjdGlvbignRVBTRzo0MzI2Jyk7XG59XG4vKipcbiAqIFJldHVybiBhIGNvb3JkaW5hdGUgdHJhbnNmb3JtZWQgaW50byB0aGUgdXNlciBwcm9qZWN0aW9uLiAgSWYgbm8gdXNlciBwcm9qZWN0aW9uXG4gKiBpcyBzZXQsIHRoZSBvcmlnaW5hbCBjb29yZGluYXRlIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlIElucHV0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2VQcm9qZWN0aW9uIFRoZSBpbnB1dCBjb29yZGluYXRlIHByb2plY3Rpb24uXG4gKiBAcmV0dXJucyB7QXJyYXk8bnVtYmVyPn0gVGhlIGlucHV0IGNvb3JkaW5hdGUgaW4gdGhlIHVzZXIgcHJvamVjdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvVXNlckNvb3JkaW5hdGUoY29vcmRpbmF0ZSwgc291cmNlUHJvamVjdGlvbikge1xuICAgIGlmICghdXNlclByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGNvb3JkaW5hdGU7XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm0oY29vcmRpbmF0ZSwgc291cmNlUHJvamVjdGlvbiwgdXNlclByb2plY3Rpb24pO1xufVxuLyoqXG4gKiBSZXR1cm4gYSBjb29yZGluYXRlIHRyYW5zZm9ybWVkIGZyb20gdGhlIHVzZXIgcHJvamVjdGlvbi4gIElmIG5vIHVzZXIgcHJvamVjdGlvblxuICogaXMgc2V0LCB0aGUgb3JpZ2luYWwgY29vcmRpbmF0ZSBpcyByZXR1cm5lZC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZSBJbnB1dCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdFByb2plY3Rpb24gVGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJucyB7QXJyYXk8bnVtYmVyPn0gVGhlIGlucHV0IGNvb3JkaW5hdGUgdHJhbnNmb3JtZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVXNlckNvb3JkaW5hdGUoY29vcmRpbmF0ZSwgZGVzdFByb2plY3Rpb24pIHtcbiAgICBpZiAoIXVzZXJQcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBjb29yZGluYXRlO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtKGNvb3JkaW5hdGUsIHVzZXJQcm9qZWN0aW9uLCBkZXN0UHJvamVjdGlvbik7XG59XG4vKipcbiAqIFJldHVybiBhbiBleHRlbnQgdHJhbnNmb3JtZWQgaW50byB0aGUgdXNlciBwcm9qZWN0aW9uLiAgSWYgbm8gdXNlciBwcm9qZWN0aW9uXG4gKiBpcyBzZXQsIHRoZSBvcmlnaW5hbCBleHRlbnQgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IElucHV0IGV4dGVudC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZVByb2plY3Rpb24gVGhlIGlucHV0IGV4dGVudCBwcm9qZWN0aW9uLlxuICogQHJldHVybnMge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gVGhlIGlucHV0IGV4dGVudCBpbiB0aGUgdXNlciBwcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9Vc2VyRXh0ZW50KGV4dGVudCwgc291cmNlUHJvamVjdGlvbikge1xuICAgIGlmICghdXNlclByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGV4dGVudDtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybUV4dGVudChleHRlbnQsIHNvdXJjZVByb2plY3Rpb24sIHVzZXJQcm9qZWN0aW9uKTtcbn1cbi8qKlxuICogUmV0dXJuIGFuIGV4dGVudCB0cmFuc2Zvcm1lZCBmcm9tIHRoZSB1c2VyIHByb2plY3Rpb24uICBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgdGhlIG9yaWdpbmFsIGV4dGVudCBpcyByZXR1cm5lZC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgSW5wdXQgZXh0ZW50LlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdFByb2plY3Rpb24gVGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJucyB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBUaGUgaW5wdXQgZXh0ZW50IHRyYW5zZm9ybWVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbVVzZXJFeHRlbnQoZXh0ZW50LCBkZXN0UHJvamVjdGlvbikge1xuICAgIGlmICghdXNlclByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGV4dGVudDtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybUV4dGVudChleHRlbnQsIHVzZXJQcm9qZWN0aW9uLCBkZXN0UHJvamVjdGlvbik7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBzYWZlIGNvb3JkaW5hdGUgdHJhbnNmb3JtIGZ1bmN0aW9uIGZyb20gYSBjb29yZGluYXRlIHRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqIFwiU2FmZVwiIG1lYW5zIHRoYXQgaXQgY2FuIGhhbmRsZSB3cmFwcGluZyBvZiB4LWNvb3JkaW5hdGVzIGZvciBnbG9iYWwgcHJvamVjdGlvbnMsXG4gKiBhbmQgdGhhdCBjb29yZGluYXRlcyBleGNlZWRpbmcgdGhlIHNvdXJjZSBwcm9qZWN0aW9uIHZhbGlkaXR5IGV4dGVudCdzIHJhbmdlIHdpbGwgYmVcbiAqIGNsYW1wZWQgdG8gdGhlIHZhbGlkaXR5IHJhbmdlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBzb3VyY2VQcm9qIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBkZXN0UHJvaiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSB0cmFuc2Zvcm0gVHJhbnNmb3JtIGZ1bmN0aW9uIChzb3VyY2UgdG8gZGVzdGlhdGlvbikuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBTYWZlIHRyYW5zZm9ybSBmdW5jdGlvbiAoc291cmNlIHRvIGRlc3RpYXRpb24pLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2FmZUNvb3JkaW5hdGVUcmFuc2Zvcm0oc291cmNlUHJvaiwgZGVzdFByb2osIHRyYW5zZm9ybSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoY29vcmQpIHtcbiAgICAgICAgdmFyIHNvdXJjZVggPSBjb29yZFswXTtcbiAgICAgICAgdmFyIHNvdXJjZVkgPSBjb29yZFsxXTtcbiAgICAgICAgdmFyIHRyYW5zZm9ybWVkLCB3b3JsZHNBd2F5O1xuICAgICAgICBpZiAoc291cmNlUHJvai5jYW5XcmFwWCgpKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlRXh0ZW50ID0gc291cmNlUHJvai5nZXRFeHRlbnQoKTtcbiAgICAgICAgICAgIHZhciBzb3VyY2VFeHRlbnRXaWR0aCA9IGdldFdpZHRoKHNvdXJjZUV4dGVudCk7XG4gICAgICAgICAgICB3b3JsZHNBd2F5ID0gZ2V0V29ybGRzQXdheShjb29yZCwgc291cmNlUHJvaiwgc291cmNlRXh0ZW50V2lkdGgpO1xuICAgICAgICAgICAgaWYgKHdvcmxkc0F3YXkpIHtcbiAgICAgICAgICAgICAgICAvLyBNb3ZlIHggdG8gdGhlIHJlYWwgd29ybGRcbiAgICAgICAgICAgICAgICBzb3VyY2VYID0gc291cmNlWCAtIHdvcmxkc0F3YXkgKiBzb3VyY2VFeHRlbnRXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNvdXJjZVggPSBjbGFtcChzb3VyY2VYLCBzb3VyY2VFeHRlbnRbMF0sIHNvdXJjZUV4dGVudFsyXSk7XG4gICAgICAgICAgICBzb3VyY2VZID0gY2xhbXAoc291cmNlWSwgc291cmNlRXh0ZW50WzFdLCBzb3VyY2VFeHRlbnRbM10pO1xuICAgICAgICAgICAgdHJhbnNmb3JtZWQgPSB0cmFuc2Zvcm0oW3NvdXJjZVgsIHNvdXJjZVldKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkID0gdHJhbnNmb3JtKGNvb3JkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod29ybGRzQXdheSAmJiBkZXN0UHJvai5jYW5XcmFwWCgpKSB7XG4gICAgICAgICAgICAvLyBNb3ZlIHRyYW5zZm9ybWVkIGNvb3JkaW5hdGUgYmFjayB0byB0aGUgb2Zmc2V0IHdvcmxkXG4gICAgICAgICAgICB0cmFuc2Zvcm1lZFswXSArPSB3b3JsZHNBd2F5ICogZ2V0V2lkdGgoZGVzdFByb2ouZ2V0RXh0ZW50KCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1lZDtcbiAgICB9O1xufVxuLyoqXG4gKiBBZGQgdHJhbnNmb3JtcyB0byBhbmQgZnJvbSBFUFNHOjQzMjYgYW5kIEVQU0c6Mzg1Ny4gIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkXG4gKiBieSB3aGVuIHRoaXMgbW9kdWxlIGlzIGV4ZWN1dGVkIGFuZCBzaG91bGQgb25seSBuZWVkIHRvIGJlIGNhbGxlZCBhZ2FpbiBhZnRlclxuICogYGNsZWFyQWxsUHJvamVjdGlvbnMoKWAgaXMgY2FsbGVkIChlLmcuIGluIHRlc3RzKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZENvbW1vbigpIHtcbiAgICAvLyBBZGQgdHJhbnNmb3JtYXRpb25zIHRoYXQgZG9uJ3QgYWx0ZXIgY29vcmRpbmF0ZXMgdG8gY29udmVydCB3aXRoaW4gc2V0IG9mXG4gICAgLy8gcHJvamVjdGlvbnMgd2l0aCBlcXVhbCBtZWFuaW5nLlxuICAgIGFkZEVxdWl2YWxlbnRQcm9qZWN0aW9ucyhFUFNHMzg1N19QUk9KRUNUSU9OUyk7XG4gICAgYWRkRXF1aXZhbGVudFByb2plY3Rpb25zKEVQU0c0MzI2X1BST0pFQ1RJT05TKTtcbiAgICAvLyBBZGQgdHJhbnNmb3JtYXRpb25zIHRvIGNvbnZlcnQgRVBTRzo0MzI2IGxpa2UgY29vcmRpbmF0ZXMgdG8gRVBTRzozODU3IGxpa2VcbiAgICAvLyBjb29yZGluYXRlcyBhbmQgYmFjay5cbiAgICBhZGRFcXVpdmFsZW50VHJhbnNmb3JtcyhFUFNHNDMyNl9QUk9KRUNUSU9OUywgRVBTRzM4NTdfUFJPSkVDVElPTlMsIGZyb21FUFNHNDMyNiwgdG9FUFNHNDMyNik7XG59XG5hZGRDb21tb24oKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb2ouanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovVW5pdHNcbiAqL1xuLyoqXG4gKiBQcm9qZWN0aW9uIHVuaXRzOiBgJ2RlZ3JlZXMnYCwgYCdmdCdgLCBgJ20nYCwgYCdwaXhlbHMnYCwgYCd0aWxlLXBpeGVscydgIG9yXG4gKiBgJ3VzLWZ0J2AuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG52YXIgVW5pdHMgPSB7XG4gICAgLyoqXG4gICAgICogRGVncmVlc1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBERUdSRUVTOiAnZGVncmVlcycsXG4gICAgLyoqXG4gICAgICogRmVldFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBGRUVUOiAnZnQnLFxuICAgIC8qKlxuICAgICAqIE1ldGVyc1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNRVRFUlM6ICdtJyxcbiAgICAvKipcbiAgICAgKiBQaXhlbHNcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUElYRUxTOiAncGl4ZWxzJyxcbiAgICAvKipcbiAgICAgKiBUaWxlIFBpeGVsc1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUSUxFX1BJWEVMUzogJ3RpbGUtcGl4ZWxzJyxcbiAgICAvKipcbiAgICAgKiBVUyBGZWV0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVTRkVFVDogJ3VzLWZ0Jyxcbn07XG4vKipcbiAqIE1ldGVycyBwZXIgdW5pdCBsb29rdXAgdGFibGUuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtPYmplY3Q8VW5pdHMsIG51bWJlcj59XG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgTUVURVJTX1BFUl9VTklUID0ge307XG4vLyB1c2UgdGhlIHJhZGl1cyBvZiB0aGUgTm9ybWFsIHNwaGVyZVxuTUVURVJTX1BFUl9VTklUW1VuaXRzLkRFR1JFRVNdID0gKDIgKiBNYXRoLlBJICogNjM3MDk5NykgLyAzNjA7XG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuRkVFVF0gPSAwLjMwNDg7XG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuTUVURVJTXSA9IDE7XG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuVVNGRUVUXSA9IDEyMDAgLyAzOTM3O1xuZXhwb3J0IGRlZmF1bHQgVW5pdHM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Vbml0cy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhc1xuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4uL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IHsgV09SS0VSX09GRlNDUkVFTl9DQU5WQVMgfSBmcm9tICcuLi9oYXMuanMnO1xuaW1wb3J0IHsgY2xlYXIgfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FudmFzQ29udGV4dDJEIH0gZnJvbSAnLi4vZG9tLmpzJztcbmltcG9ydCB7IGdldEZvbnRQYXJhbWV0ZXJzIH0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7IHRvU3RyaW5nIH0gZnJvbSAnLi4vdHJhbnNmb3JtLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRmlsbFN0YXRlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IGZpbGxTdHlsZVxuICovXG4vKipcbiAqIEB0eXBlZGVmIExhYmVsXG4gKiBAcHJvcGVydHkge251bWJlcn0gd2lkdGhcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBoZWlnaHRcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nfG51bWJlcj59IGNvbnRleHRJbnN0cnVjdGlvbnNcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGaWxsU3Ryb2tlU3RhdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gW2N1cnJlbnRGaWxsU3R5bGVdXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IFtjdXJyZW50U3Ryb2tlU3R5bGVdXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVDYXB9IFtjdXJyZW50TGluZUNhcF1cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gY3VycmVudExpbmVEYXNoXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2N1cnJlbnRMaW5lRGFzaE9mZnNldF1cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUpvaW59IFtjdXJyZW50TGluZUpvaW5dXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2N1cnJlbnRMaW5lV2lkdGhdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2N1cnJlbnRNaXRlckxpbWl0XVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtsYXN0U3Ryb2tlXVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbZmlsbFN0eWxlXVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbc3Ryb2tlU3R5bGVdXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVDYXB9IFtsaW5lQ2FwXVxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBsaW5lRGFzaFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtsaW5lRGFzaE9mZnNldF1cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUpvaW59IFtsaW5lSm9pbl1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbGluZVdpZHRoXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaXRlckxpbWl0XVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0cm9rZVN0YXRlXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVDYXB9IGxpbmVDYXBcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gbGluZURhc2hcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsaW5lRGFzaE9mZnNldFxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lSm9pbn0gbGluZUpvaW5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsaW5lV2lkdGhcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaXRlckxpbWl0XG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IHN0cm9rZVN0eWxlXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gVGV4dFN0YXRlXG4gKiBAcHJvcGVydHkge3N0cmluZ30gZm9udFxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0ZXh0QWxpZ25dXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdGV4dEJhc2VsaW5lXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3BsYWNlbWVudF1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4QW5nbGVdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvdmVyZmxvd11cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc3R5bGUvRmlsbC5qc1wiKS5kZWZhdWx0fSBbYmFja2dyb3VuZEZpbGxdXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL1N0cm9rZS5qc1wiKS5kZWZhdWx0fSBbYmFja2dyb3VuZFN0cm9rZV1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBbc2NhbGVdXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtwYWRkaW5nXVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFNlcmlhbGl6YWJsZUluc3RydWN0aW9uc1xuICogQHByb3BlcnR5IHtBcnJheTwqPn0gaW5zdHJ1Y3Rpb25zIFRoZSByZW5kZXJpbmcgaW5zdHJ1Y3Rpb25zLlxuICogQHByb3BlcnR5IHtBcnJheTwqPn0gaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zIFRoZSByZW5kZXJpbmcgaGl0IGRldGVjdGlvbiBpbnN0cnVjdGlvbnMuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGVzIFRoZSBhcnJheSBvZiBhbGwgY29vcmRpbmF0ZXMuXG4gKiBAcHJvcGVydHkgeyFPYmplY3Q8c3RyaW5nLCBUZXh0U3RhdGU+fSBbdGV4dFN0YXRlc10gVGhlIHRleHQgc3RhdGVzIChkZWNsdXR0ZXJpbmcpLlxuICogQHByb3BlcnR5IHshT2JqZWN0PHN0cmluZywgRmlsbFN0YXRlPn0gW2ZpbGxTdGF0ZXNdIFRoZSBmaWxsIHN0YXRlcyAoZGVjbHV0dGVyaW5nKS5cbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIFN0cm9rZVN0YXRlPn0gW3N0cm9rZVN0YXRlc10gVGhlIHN0cm9rZSBzdGF0ZXMgKGRlY2x1dHRlcmluZykuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdDxudW1iZXIsIGltcG9ydChcIi4vY2FudmFzL0V4ZWN1dG9yLmpzXCIpLlJlcGxheUltYWdlT3JMYWJlbEFyZ3M+fSBEZWNsdXR0ZXJJbWFnZVdpdGhUZXh0XG4gKi9cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRGb250ID0gJzEwcHggc2Fucy1zZXJpZic7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdEZpbGxTdHlsZSA9ICcjMDAwJztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7Q2FudmFzTGluZUNhcH1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZUNhcCA9ICdyb3VuZCc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdExpbmVEYXNoID0gW107XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZURhc2hPZmZzZXQgPSAwO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtDYW52YXNMaW5lSm9pbn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZUpvaW4gPSAncm91bmQnO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdE1pdGVyTGltaXQgPSAxMDtcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0U3Ryb2tlU3R5bGUgPSAnIzAwMCc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0VGV4dEFsaWduID0gJ2NlbnRlcic7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0VGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdFBhZGRpbmcgPSBbMCwgMCwgMCwgMF07XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZVdpZHRoID0gMTtcbi8qKlxuICogQHR5cGUge0Jhc2VPYmplY3R9XG4gKi9cbmV4cG9ydCB2YXIgY2hlY2tlZEZvbnRzID0gbmV3IEJhc2VPYmplY3QoKTtcbi8qKlxuICogVGhlIGxhYmVsIGNhY2hlIGZvciB0ZXh0IHJlbmRlcmluZy4gVG8gY2hhbmdlIHRoZSBkZWZhdWx0IGNhY2hlIHNpemUgb2YgMjA0OFxuICogZW50cmllcywgdXNlIHtAbGluayBtb2R1bGU6b2wvc3RydWN0cy9MUlVDYWNoZSNzZXRTaXplfS5cbiAqIERlcHJlY2F0ZWQgLSB0aGVyZSBpcyBubyBsYWJlbCBjYWNoZSBhbnkgbW9yZS5cbiAqIEB0eXBlIHs/fVxuICogQGFwaVxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBsYWJlbENhY2hlID0gbmV3IEV2ZW50VGFyZ2V0KCk7XG5sYWJlbENhY2hlLnNldFNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS53YXJuKCdsYWJlbENhY2hlIGlzIGRlcHJlY2F0ZWQuJyk7IC8vZXNsaW50LWRpc2FibGUtbGluZVxufTtcbi8qKlxuICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAqL1xudmFyIG1lYXN1cmVDb250ZXh0ID0gbnVsbDtcbi8qKlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xudmFyIG1lYXN1cmVGb250O1xuLyoqXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgdGV4dEhlaWdodHMgPSB7fTtcbi8qKlxuICogQ2xlYXJzIHRoZSBsYWJlbCBjYWNoZSB3aGVuIGEgZm9udCBiZWNvbWVzIGF2YWlsYWJsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250U3BlYyBDU1MgZm9udCBzcGVjLlxuICovXG5leHBvcnQgdmFyIHJlZ2lzdGVyRm9udCA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJldHJpZXMgPSAxMDA7XG4gICAgdmFyIHNpemUgPSAnMzJweCAnO1xuICAgIHZhciByZWZlcmVuY2VGb250cyA9IFsnbW9ub3NwYWNlJywgJ3NlcmlmJ107XG4gICAgdmFyIGxlbiA9IHJlZmVyZW5jZUZvbnRzLmxlbmd0aDtcbiAgICB2YXIgdGV4dCA9ICd3bXl0emlsV01ZVFpJTEAjLyY/JCUxMFxcdUYwMTMnO1xuICAgIHZhciBpbnRlcnZhbCwgcmVmZXJlbmNlV2lkdGg7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZvbnRTdHlsZSBDc3MgZm9udC1zdHlsZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmb250V2VpZ2h0IENzcyBmb250LXdlaWdodFxuICAgICAqIEBwYXJhbSB7Kn0gZm9udEZhbWlseSBDc3MgZm9udC1mYW1pbHlcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBGb250IHdpdGggc3R5bGUgYW5kIHdlaWdodCBpcyBhdmFpbGFibGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0F2YWlsYWJsZShmb250U3R5bGUsIGZvbnRXZWlnaHQsIGZvbnRGYW1pbHkpIHtcbiAgICAgICAgdmFyIGF2YWlsYWJsZSA9IHRydWU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHZhciByZWZlcmVuY2VGb250ID0gcmVmZXJlbmNlRm9udHNbaV07XG4gICAgICAgICAgICByZWZlcmVuY2VXaWR0aCA9IG1lYXN1cmVUZXh0V2lkdGgoZm9udFN0eWxlICsgJyAnICsgZm9udFdlaWdodCArICcgJyArIHNpemUgKyByZWZlcmVuY2VGb250LCB0ZXh0KTtcbiAgICAgICAgICAgIGlmIChmb250RmFtaWx5ICE9IHJlZmVyZW5jZUZvbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBtZWFzdXJlVGV4dFdpZHRoKGZvbnRTdHlsZSArXG4gICAgICAgICAgICAgICAgICAgICcgJyArXG4gICAgICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQgK1xuICAgICAgICAgICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgICAgICAgICBzaXplICtcbiAgICAgICAgICAgICAgICAgICAgZm9udEZhbWlseSArXG4gICAgICAgICAgICAgICAgICAgICcsJyArXG4gICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZUZvbnQsIHRleHQpO1xuICAgICAgICAgICAgICAgIC8vIElmIHdpZHRoIGFuZCByZWZlcmVuY2VXaWR0aCBhcmUgdGhlIHNhbWUsIHRoZW4gdGhlIGZhbGxiYWNrIHdhcyB1c2VkXG4gICAgICAgICAgICAgICAgLy8gaW5zdGVhZCBvZiB0aGUgZm9udCB3ZSB3YW50ZWQsIHNvIHRoZSBmb250IGlzIG5vdCBhdmFpbGFibGUuXG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlID0gYXZhaWxhYmxlICYmIHdpZHRoICE9IHJlZmVyZW5jZVdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChhdmFpbGFibGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hlY2soKSB7XG4gICAgICAgIHZhciBkb25lID0gdHJ1ZTtcbiAgICAgICAgdmFyIGZvbnRzID0gY2hlY2tlZEZvbnRzLmdldEtleXMoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZm9udHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGZvbnQgPSBmb250c1tpXTtcbiAgICAgICAgICAgIGlmIChjaGVja2VkRm9udHMuZ2V0KGZvbnQpIDwgcmV0cmllcykge1xuICAgICAgICAgICAgICAgIGlmIChpc0F2YWlsYWJsZS5hcHBseSh0aGlzLCBmb250LnNwbGl0KCdcXG4nKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXIodGV4dEhlaWdodHMpO1xuICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCBsb2FkZWQgZm9udHMgYXJlIHBpY2tlZCB1cCBieSBTYWZhcmlcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUNvbnRleHQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRm9udCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZEZvbnRzLnNldChmb250LCByZXRyaWVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWRGb250cy5zZXQoZm9udCwgY2hlY2tlZEZvbnRzLmdldChmb250KSArIDEsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBkb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgICAgIGludGVydmFsID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoZm9udFNwZWMpIHtcbiAgICAgICAgdmFyIGZvbnQgPSBnZXRGb250UGFyYW1ldGVycyhmb250U3BlYyk7XG4gICAgICAgIGlmICghZm9udCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmYW1pbGllcyA9IGZvbnQuZmFtaWxpZXM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZhbWlsaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBmYW1pbHkgPSBmYW1pbGllc1tpXTtcbiAgICAgICAgICAgIHZhciBrZXkgPSBmb250LnN0eWxlICsgJ1xcbicgKyBmb250LndlaWdodCArICdcXG4nICsgZmFtaWx5O1xuICAgICAgICAgICAgaWYgKGNoZWNrZWRGb250cy5nZXQoa2V5KSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tlZEZvbnRzLnNldChrZXksIHJldHJpZXMsIHRydWUpO1xuICAgICAgICAgICAgICAgIGlmICghaXNBdmFpbGFibGUoZm9udC5zdHlsZSwgZm9udC53ZWlnaHQsIGZhbWlseSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZEZvbnRzLnNldChrZXksIDAsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW50ZXJ2YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChjaGVjaywgMzIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IEZvbnQgdG8gdXNlIGZvciBtZWFzdXJpbmcuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IE1lYXN1cmVtZW50LlxuICovXG5leHBvcnQgdmFyIG1lYXN1cmVUZXh0SGVpZ2h0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9XG4gICAgICovXG4gICAgdmFyIGRpdjtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZvbnRTcGVjKSB7XG4gICAgICAgIHZhciBoZWlnaHQgPSB0ZXh0SGVpZ2h0c1tmb250U3BlY107XG4gICAgICAgIGlmIChoZWlnaHQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoV09SS0VSX09GRlNDUkVFTl9DQU5WQVMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZm9udCA9IGdldEZvbnRQYXJhbWV0ZXJzKGZvbnRTcGVjKTtcbiAgICAgICAgICAgICAgICB2YXIgbWV0cmljcyA9IG1lYXN1cmVUZXh0KGZvbnRTcGVjLCAnxb1nJyk7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmVIZWlnaHQgPSBpc05hTihOdW1iZXIoZm9udC5saW5lSGVpZ2h0KSlcbiAgICAgICAgICAgICAgICAgICAgPyAxLjJcbiAgICAgICAgICAgICAgICAgICAgOiBOdW1iZXIoZm9udC5saW5lSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBoZWlnaHQgPVxuICAgICAgICAgICAgICAgICAgICBsaW5lSGVpZ2h0ICpcbiAgICAgICAgICAgICAgICAgICAgICAgIChtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94QXNjZW50ICsgbWV0cmljcy5hY3R1YWxCb3VuZGluZ0JveERlc2NlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkaXYpIHtcbiAgICAgICAgICAgICAgICAgICAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSAnTSc7XG4gICAgICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5tYXJnaW4gPSAnMCAhaW1wb3J0YW50JztcbiAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLnBhZGRpbmcgPSAnMCAhaW1wb3J0YW50JztcbiAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlICFpbXBvcnRhbnQnO1xuICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUubGVmdCA9ICctOTk5OTlweCAhaW1wb3J0YW50JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGl2LnN0eWxlLmZvbnQgPSBmb250U3BlYztcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gZGl2Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZXh0SGVpZ2h0c1tmb250U3BlY10gPSBoZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhlaWdodDtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnQgRm9udC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRleHQuXG4gKiBAcmV0dXJuIHtUZXh0TWV0cmljc30gVGV4dCBtZXRyaWNzLlxuICovXG5mdW5jdGlvbiBtZWFzdXJlVGV4dChmb250LCB0ZXh0KSB7XG4gICAgaWYgKCFtZWFzdXJlQ29udGV4dCkge1xuICAgICAgICBtZWFzdXJlQ29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCgxLCAxKTtcbiAgICB9XG4gICAgaWYgKGZvbnQgIT0gbWVhc3VyZUZvbnQpIHtcbiAgICAgICAgbWVhc3VyZUNvbnRleHQuZm9udCA9IGZvbnQ7XG4gICAgICAgIG1lYXN1cmVGb250ID0gbWVhc3VyZUNvbnRleHQuZm9udDtcbiAgICB9XG4gICAgcmV0dXJuIG1lYXN1cmVDb250ZXh0Lm1lYXN1cmVUZXh0KHRleHQpO1xufVxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udCBGb250LlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGV4dC5cbiAqIEByZXR1cm4ge251bWJlcn0gV2lkdGguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZWFzdXJlVGV4dFdpZHRoKGZvbnQsIHRleHQpIHtcbiAgICByZXR1cm4gbWVhc3VyZVRleHQoZm9udCwgdGV4dCkud2lkdGg7XG59XG4vKipcbiAqIE1lYXN1cmUgdGV4dCB3aWR0aCB1c2luZyBhIGNhY2hlLlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnQgVGhlIGZvbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBtZWFzdXJlLlxuICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBudW1iZXI+fSBjYWNoZSBBIGxvb2t1cCBvZiBjYWNoZWQgd2lkdGhzIGJ5IHRleHQuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBUaGUgdGV4dCB3aWR0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lYXN1cmVBbmRDYWNoZVRleHRXaWR0aChmb250LCB0ZXh0LCBjYWNoZSkge1xuICAgIGlmICh0ZXh0IGluIGNhY2hlKSB7XG4gICAgICAgIHJldHVybiBjYWNoZVt0ZXh0XTtcbiAgICB9XG4gICAgdmFyIHdpZHRoID0gbWVhc3VyZVRleHRXaWR0aChmb250LCB0ZXh0KTtcbiAgICBjYWNoZVt0ZXh0XSA9IHdpZHRoO1xuICAgIHJldHVybiB3aWR0aDtcbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnQgRm9udCB0byB1c2UgZm9yIG1lYXN1cmluZy5cbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gbGluZXMgTGluZXMgdG8gbWVhc3VyZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gd2lkdGhzIEFycmF5IHdpbGwgYmUgcG9wdWxhdGVkIHdpdGggdGhlIHdpZHRocyBvZlxuICogZWFjaCBsaW5lLlxuICogQHJldHVybiB7bnVtYmVyfSBXaWR0aCBvZiB0aGUgd2hvbGUgdGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lYXN1cmVUZXh0V2lkdGhzKGZvbnQsIGxpbmVzLCB3aWR0aHMpIHtcbiAgICB2YXIgbnVtTGluZXMgPSBsaW5lcy5sZW5ndGg7XG4gICAgdmFyIHdpZHRoID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUxpbmVzOyArK2kpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRXaWR0aCA9IG1lYXN1cmVUZXh0V2lkdGgoZm9udCwgbGluZXNbaV0pO1xuICAgICAgICB3aWR0aCA9IE1hdGgubWF4KHdpZHRoLCBjdXJyZW50V2lkdGgpO1xuICAgICAgICB3aWR0aHMucHVzaChjdXJyZW50V2lkdGgpO1xuICAgIH1cbiAgICByZXR1cm4gd2lkdGg7XG59XG4vKipcbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WCBYIG9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRZIFkgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlQXRPZmZzZXQoY29udGV4dCwgcm90YXRpb24sIG9mZnNldFgsIG9mZnNldFkpIHtcbiAgICBpZiAocm90YXRpb24gIT09IDApIHtcbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUob2Zmc2V0WCwgb2Zmc2V0WSk7XG4gICAgICAgIGNvbnRleHQucm90YXRlKHJvdGF0aW9uKTtcbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUoLW9mZnNldFgsIC1vZmZzZXRZKTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm18bnVsbH0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IE9wYWNpdHkuXG4gKiBAcGFyYW0ge0xhYmVsfEhUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gbGFiZWxPckltYWdlIExhYmVsLlxuICogQHBhcmFtIHtudW1iZXJ9IG9yaWdpblggT3JpZ2luIFguXG4gKiBAcGFyYW0ge251bWJlcn0gb3JpZ2luWSBPcmlnaW4gWS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB3IFdpZHRoLlxuICogQHBhcmFtIHtudW1iZXJ9IGggSGVpZ2h0LlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gc2NhbGUgU2NhbGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkcmF3SW1hZ2VPckxhYmVsKGNvbnRleHQsIHRyYW5zZm9ybSwgb3BhY2l0eSwgbGFiZWxPckltYWdlLCBvcmlnaW5YLCBvcmlnaW5ZLCB3LCBoLCB4LCB5LCBzY2FsZSkge1xuICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgIGlmIChvcGFjaXR5ICE9PSAxKSB7XG4gICAgICAgIGNvbnRleHQuZ2xvYmFsQWxwaGEgKj0gb3BhY2l0eTtcbiAgICB9XG4gICAgaWYgKHRyYW5zZm9ybSkge1xuICAgICAgICBjb250ZXh0LnNldFRyYW5zZm9ybS5hcHBseShjb250ZXh0LCB0cmFuc2Zvcm0pO1xuICAgIH1cbiAgICBpZiAoIC8qKiBAdHlwZSB7Kn0gKi8obGFiZWxPckltYWdlKS5jb250ZXh0SW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgIC8vIGxhYmVsXG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKHgsIHkpO1xuICAgICAgICBjb250ZXh0LnNjYWxlKHNjYWxlWzBdLCBzY2FsZVsxXSk7XG4gICAgICAgIGV4ZWN1dGVMYWJlbEluc3RydWN0aW9ucygvKiogQHR5cGUge0xhYmVsfSAqLyAobGFiZWxPckltYWdlKSwgY29udGV4dCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjYWxlWzBdIDwgMCB8fCBzY2FsZVsxXSA8IDApIHtcbiAgICAgICAgLy8gZmxpcHBlZCBpbWFnZVxuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZSh4LCB5KTtcbiAgICAgICAgY29udGV4dC5zY2FsZShzY2FsZVswXSwgc2NhbGVbMV0pO1xuICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShcbiAgICAgICAgLyoqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9ICovIChsYWJlbE9ySW1hZ2UpLCBvcmlnaW5YLCBvcmlnaW5ZLCB3LCBoLCAwLCAwLCB3LCBoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIGlmIGltYWdlIG5vdCBmbGlwcGVkIHRyYW5zbGF0ZSBhbmQgc2NhbGUgY2FuIGJlIGF2b2lkZWRcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAgIC8qKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSAqLyAobGFiZWxPckltYWdlKSwgb3JpZ2luWCwgb3JpZ2luWSwgdywgaCwgeCwgeSwgdyAqIHNjYWxlWzBdLCBoICogc2NhbGVbMV0pO1xuICAgIH1cbiAgICBjb250ZXh0LnJlc3RvcmUoKTtcbn1cbi8qKlxuICogQHBhcmFtIHtMYWJlbH0gbGFiZWwgTGFiZWwuXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICovXG5mdW5jdGlvbiBleGVjdXRlTGFiZWxJbnN0cnVjdGlvbnMobGFiZWwsIGNvbnRleHQpIHtcbiAgICB2YXIgY29udGV4dEluc3RydWN0aW9ucyA9IGxhYmVsLmNvbnRleHRJbnN0cnVjdGlvbnM7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29udGV4dEluc3RydWN0aW9ucy5sZW5ndGg7IGkgPCBpaTsgaSArPSAyKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbnRleHRJbnN0cnVjdGlvbnNbaSArIDFdKSkge1xuICAgICAgICAgICAgY29udGV4dFtjb250ZXh0SW5zdHJ1Y3Rpb25zW2ldXS5hcHBseShjb250ZXh0LCBjb250ZXh0SW5zdHJ1Y3Rpb25zW2kgKyAxXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb250ZXh0W2NvbnRleHRJbnN0cnVjdGlvbnNbaV1dID0gY29udGV4dEluc3RydWN0aW9uc1tpICsgMV07XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudH1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBjcmVhdGVUcmFuc2Zvcm1TdHJpbmdDYW52YXMgPSBudWxsO1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHtzdHJpbmd9IENTUyB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUcmFuc2Zvcm1TdHJpbmcodHJhbnNmb3JtKSB7XG4gICAgaWYgKFdPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTKSB7XG4gICAgICAgIHJldHVybiB0b1N0cmluZyh0cmFuc2Zvcm0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKCFjcmVhdGVUcmFuc2Zvcm1TdHJpbmdDYW52YXMpIHtcbiAgICAgICAgICAgIGNyZWF0ZVRyYW5zZm9ybVN0cmluZ0NhbnZhcyA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCgxLCAxKS5jYW52YXM7XG4gICAgICAgIH1cbiAgICAgICAgY3JlYXRlVHJhbnNmb3JtU3RyaW5nQ2FudmFzLnN0eWxlLnRyYW5zZm9ybSA9IHRvU3RyaW5nKHRyYW5zZm9ybSk7XG4gICAgICAgIHJldHVybiBjcmVhdGVUcmFuc2Zvcm1TdHJpbmdDYW52YXMuc3R5bGUudHJhbnNmb3JtO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhbnZhcy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc2l6ZVxuICovXG4vKipcbiAqIEFuIGFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGEgc2l6ZTogYFt3aWR0aCwgaGVpZ2h0XWAuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gU2l6ZVxuICogQGFwaVxuICovXG4vKipcbiAqIFJldHVybnMgYSBidWZmZXJlZCBzaXplLlxuICogQHBhcmFtIHtTaXplfSBzaXplIFNpemUuXG4gKiBAcGFyYW0ge251bWJlcn0gbnVtIFRoZSBhbW91bnQgYnkgd2hpY2ggdG8gYnVmZmVyLlxuICogQHBhcmFtIHtTaXplPX0gb3B0X3NpemUgT3B0aW9uYWwgcmV1c2FibGUgc2l6ZSBhcnJheS5cbiAqIEByZXR1cm4ge1NpemV9IFRoZSBidWZmZXJlZCBzaXplLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVmZmVyKHNpemUsIG51bSwgb3B0X3NpemUpIHtcbiAgICBpZiAob3B0X3NpemUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBvcHRfc2l6ZSA9IFswLCAwXTtcbiAgICB9XG4gICAgb3B0X3NpemVbMF0gPSBzaXplWzBdICsgMiAqIG51bTtcbiAgICBvcHRfc2l6ZVsxXSA9IHNpemVbMV0gKyAyICogbnVtO1xuICAgIHJldHVybiBvcHRfc2l6ZTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiBhIHNpemUgaGFzIGEgcG9zaXRpdmUgYXJlYS5cbiAqIEBwYXJhbSB7U2l6ZX0gc2l6ZSBUaGUgc2l6ZSB0byB0ZXN0LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHNpemUgaGFzIGEgcG9zaXRpdmUgYXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc0FyZWEoc2l6ZSkge1xuICAgIHJldHVybiBzaXplWzBdID4gMCAmJiBzaXplWzFdID4gMDtcbn1cbi8qKlxuICogUmV0dXJucyBhIHNpemUgc2NhbGVkIGJ5IGEgcmF0aW8uIFRoZSByZXN1bHQgd2lsbCBiZSBhbiBhcnJheSBvZiBpbnRlZ2Vycy5cbiAqIEBwYXJhbSB7U2l6ZX0gc2l6ZSBTaXplLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvIFJhdGlvLlxuICogQHBhcmFtIHtTaXplPX0gb3B0X3NpemUgT3B0aW9uYWwgcmV1c2FibGUgc2l6ZSBhcnJheS5cbiAqIEByZXR1cm4ge1NpemV9IFRoZSBzY2FsZWQgc2l6ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKHNpemUsIHJhdGlvLCBvcHRfc2l6ZSkge1xuICAgIGlmIChvcHRfc2l6ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG9wdF9zaXplID0gWzAsIDBdO1xuICAgIH1cbiAgICBvcHRfc2l6ZVswXSA9IChzaXplWzBdICogcmF0aW8gKyAwLjUpIHwgMDtcbiAgICBvcHRfc2l6ZVsxXSA9IChzaXplWzFdICogcmF0aW8gKyAwLjUpIHwgMDtcbiAgICByZXR1cm4gb3B0X3NpemU7XG59XG4vKipcbiAqIFJldHVybnMgYW4gYFNpemVgIGFycmF5IGZvciB0aGUgcGFzc2VkIGluIG51bWJlciAobWVhbmluZzogc3F1YXJlKSBvclxuICogYFNpemVgIGFycmF5LlxuICogKG1lYW5pbmc6IG5vbi1zcXVhcmUpLFxuICogQHBhcmFtIHtudW1iZXJ8U2l6ZX0gc2l6ZSBXaWR0aCBhbmQgaGVpZ2h0LlxuICogQHBhcmFtIHtTaXplPX0gb3B0X3NpemUgT3B0aW9uYWwgcmV1c2FibGUgc2l6ZSBhcnJheS5cbiAqIEByZXR1cm4ge1NpemV9IFNpemUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1NpemUoc2l6ZSwgb3B0X3NpemUpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzaXplKSkge1xuICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChvcHRfc2l6ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRfc2l6ZSA9IFtzaXplLCBzaXplXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdF9zaXplWzBdID0gc2l6ZTtcbiAgICAgICAgICAgIG9wdF9zaXplWzFdID0gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3B0X3NpemU7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2l6ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3R5bGUvUmVndWxhclNoYXBlXG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgSW1hZ2VTdGF0ZSBmcm9tICcuLi9JbWFnZVN0YXRlLmpzJztcbmltcG9ydCBJbWFnZVN0eWxlIGZyb20gJy4vSW1hZ2UuanMnO1xuaW1wb3J0IHsgYXNBcnJheSB9IGZyb20gJy4uL2NvbG9yLmpzJztcbmltcG9ydCB7IGFzQ29sb3JMaWtlIH0gZnJvbSAnLi4vY29sb3JsaWtlLmpzJztcbmltcG9ydCB7IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCB9IGZyb20gJy4uL2RvbS5qcyc7XG5pbXBvcnQgeyBkZWZhdWx0RmlsbFN0eWxlLCBkZWZhdWx0TGluZUNhcCwgZGVmYXVsdExpbmVKb2luLCBkZWZhdWx0TGluZVdpZHRoLCBkZWZhdWx0TWl0ZXJMaW1pdCwgZGVmYXVsdFN0cm9rZVN0eWxlLCB9IGZyb20gJy4uL3JlbmRlci9jYW52YXMuanMnO1xuLyoqXG4gKiBTcGVjaWZ5IHJhZGl1cyBmb3IgcmVndWxhciBwb2x5Z29ucywgb3IgcmFkaXVzMSBhbmQgcmFkaXVzMiBmb3Igc3RhcnMuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vRmlsbC5qc1wiKS5kZWZhdWx0fSBbZmlsbF0gRmlsbCBzdHlsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBwb2ludHMgTnVtYmVyIG9mIHBvaW50cyBmb3Igc3RhcnMgYW5kIHJlZ3VsYXIgcG9seWdvbnMuIEluIGNhc2Ugb2YgYSBwb2x5Z29uLCB0aGUgbnVtYmVyIG9mIHBvaW50c1xuICogaXMgdGhlIG51bWJlciBvZiBzaWRlcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmFkaXVzXSBSYWRpdXMgb2YgYSByZWd1bGFyIHBvbHlnb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JhZGl1czFdIE91dGVyIHJhZGl1cyBvZiBhIHN0YXIuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JhZGl1czJdIElubmVyIHJhZGl1cyBvZiBhIHN0YXIuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2FuZ2xlPTBdIFNoYXBlJ3MgYW5nbGUgaW4gcmFkaWFucy4gQSB2YWx1ZSBvZiAwIHdpbGwgaGF2ZSBvbmUgb2YgdGhlIHNoYXBlJ3MgcG9pbnQgZmFjaW5nIHVwLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBbZGlzcGxhY2VtZW50PVswLDBdXSBEaXNwbGFjZW1lbnQgb2YgdGhlIHNoYXBlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU3Ryb2tlLmpzXCIpLmRlZmF1bHR9IFtzdHJva2VdIFN0cm9rZSBzdHlsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcm90YXRpb249MF0gUm90YXRpb24gaW4gcmFkaWFucyAocG9zaXRpdmUgcm90YXRpb24gY2xvY2t3aXNlKS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3JvdGF0ZVdpdGhWaWV3PWZhbHNlXSBXaGV0aGVyIHRvIHJvdGF0ZSB0aGUgc2hhcGUgd2l0aCB0aGUgdmlldy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gW3NjYWxlPTFdIFNjYWxlLiBVbmxlc3MgdHdvIGRpbWVuc2lvbmFsIHNjYWxpbmcgaXMgcmVxdWlyZWQgYSBiZXR0ZXJcbiAqIHJlc3VsdCBtYXkgYmUgb2J0YWluZWQgd2l0aCBhcHByb3ByaWF0ZSBzZXR0aW5ncyBmb3IgYHJhZGl1c2AsIGByYWRpdXMxYCBhbmQgYHJhZGl1czJgLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFJlbmRlck9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gW3N0cm9rZVN0eWxlXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IHN0cm9rZVdpZHRoXG4gKiBAcHJvcGVydHkge251bWJlcn0gc2l6ZVxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lQ2FwfSBsaW5lQ2FwXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IGxpbmVEYXNoXG4gKiBAcHJvcGVydHkge251bWJlcn0gbGluZURhc2hPZmZzZXRcbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUpvaW59IGxpbmVKb2luXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWl0ZXJMaW1pdFxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFNldCByZWd1bGFyIHNoYXBlIHN0eWxlIGZvciB2ZWN0b3IgZmVhdHVyZXMuIFRoZSByZXN1bHRpbmcgc2hhcGUgd2lsbCBiZVxuICogYSByZWd1bGFyIHBvbHlnb24gd2hlbiBgcmFkaXVzYCBpcyBwcm92aWRlZCwgb3IgYSBzdGFyIHdoZW4gYHJhZGl1czFgIGFuZFxuICogYHJhZGl1czJgIGFyZSBwcm92aWRlZC5cbiAqIEBhcGlcbiAqL1xudmFyIFJlZ3VsYXJTaGFwZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVndWxhclNoYXBlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJlZ3VsYXJTaGFwZShvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHZhciByb3RhdGVXaXRoVmlldyA9IG9wdGlvbnMucm90YXRlV2l0aFZpZXcgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucm90YXRlV2l0aFZpZXcgOiBmYWxzZTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgcm90YXRlV2l0aFZpZXc6IHJvdGF0ZVdpdGhWaWV3LFxuICAgICAgICAgICAgcm90YXRpb246IG9wdGlvbnMucm90YXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucm90YXRpb24gOiAwLFxuICAgICAgICAgICAgc2NhbGU6IG9wdGlvbnMuc2NhbGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc2NhbGUgOiAxLFxuICAgICAgICAgICAgZGlzcGxhY2VtZW50OiBvcHRpb25zLmRpc3BsYWNlbWVudCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kaXNwbGFjZW1lbnQgOiBbMCwgMF0sXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PG51bWJlciwgSFRNTENhbnZhc0VsZW1lbnQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2FudmFzXyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGl0RGV0ZWN0aW9uQ2FudmFzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9GaWxsLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5maWxsXyA9IG9wdGlvbnMuZmlsbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5maWxsIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3JpZ2luXyA9IFswLCAwXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wb2ludHNfID0gb3B0aW9ucy5wb2ludHM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yYWRpdXNfID1cbiAgICAgICAgICAgIG9wdGlvbnMucmFkaXVzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnJhZGl1cyA6IG9wdGlvbnMucmFkaXVzMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmFkaXVzMl8gPSBvcHRpb25zLnJhZGl1czI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5nbGVfID0gb3B0aW9ucy5hbmdsZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5hbmdsZSA6IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9TdHJva2UuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0cm9rZV8gPSBvcHRpb25zLnN0cm9rZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zdHJva2UgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmNob3JfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zaXplXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW1hZ2VTaXplXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VTaXplXyA9IG51bGw7XG4gICAgICAgIF90aGlzLnJlbmRlcigpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb25lcyB0aGUgc3R5bGUuXG4gICAgICogQHJldHVybiB7UmVndWxhclNoYXBlfSBUaGUgY2xvbmVkIHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBSZWd1bGFyU2hhcGUucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2NhbGUgPSB0aGlzLmdldFNjYWxlKCk7XG4gICAgICAgIHZhciBzdHlsZSA9IG5ldyBSZWd1bGFyU2hhcGUoe1xuICAgICAgICAgICAgZmlsbDogdGhpcy5nZXRGaWxsKCkgPyB0aGlzLmdldEZpbGwoKS5jbG9uZSgpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcG9pbnRzOiB0aGlzLmdldFBvaW50cygpLFxuICAgICAgICAgICAgcmFkaXVzOiB0aGlzLmdldFJhZGl1cygpLFxuICAgICAgICAgICAgcmFkaXVzMjogdGhpcy5nZXRSYWRpdXMyKCksXG4gICAgICAgICAgICBhbmdsZTogdGhpcy5nZXRBbmdsZSgpLFxuICAgICAgICAgICAgc3Ryb2tlOiB0aGlzLmdldFN0cm9rZSgpID8gdGhpcy5nZXRTdHJva2UoKS5jbG9uZSgpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcm90YXRpb246IHRoaXMuZ2V0Um90YXRpb24oKSxcbiAgICAgICAgICAgIHJvdGF0ZVdpdGhWaWV3OiB0aGlzLmdldFJvdGF0ZVdpdGhWaWV3KCksXG4gICAgICAgICAgICBzY2FsZTogQXJyYXkuaXNBcnJheShzY2FsZSkgPyBzY2FsZS5zbGljZSgpIDogc2NhbGUsXG4gICAgICAgICAgICBkaXNwbGFjZW1lbnQ6IHRoaXMuZ2V0RGlzcGxhY2VtZW50KCkuc2xpY2UoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHN0eWxlLnNldE9wYWNpdHkodGhpcy5nZXRPcGFjaXR5KCkpO1xuICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBpbiBwaXhlbHMuIFRoZSBhbmNob3IgZGV0ZXJtaW5lcyB0aGUgY2VudGVyIHBvaW50IGZvciB0aGVcbiAgICAgKiBzeW1ib2xpemVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEFuY2hvci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUmVndWxhclNoYXBlLnByb3RvdHlwZS5nZXRBbmNob3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFuY2hvcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGFuZ2xlIHVzZWQgaW4gZ2VuZXJhdGluZyB0aGUgc2hhcGUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBTaGFwZSdzIHJvdGF0aW9uIGluIHJhZGlhbnMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUuZ2V0QW5nbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFuZ2xlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZmlsbCBzdHlsZSBmb3IgdGhlIHNoYXBlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vRmlsbC5qc1wiKS5kZWZhdWx0fSBGaWxsIHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBSZWd1bGFyU2hhcGUucHJvdG90eXBlLmdldEZpbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbGxfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IEltYWdlIGVsZW1lbnQuXG4gICAgICovXG4gICAgUmVndWxhclNoYXBlLnByb3RvdHlwZS5nZXRIaXREZXRlY3Rpb25JbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhpdERldGVjdGlvbkNhbnZhc18pIHtcbiAgICAgICAgICAgIHZhciByZW5kZXJPcHRpb25zID0gdGhpcy5jcmVhdGVSZW5kZXJPcHRpb25zKCk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUhpdERldGVjdGlvbkNhbnZhc18ocmVuZGVyT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaGl0RGV0ZWN0aW9uQ2FudmFzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaW1hZ2UgaWNvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gSW1hZ2Ugb3IgQ2FudmFzIGVsZW1lbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAocGl4ZWxSYXRpbykge1xuICAgICAgICBpZiAoIXRoaXMuY2FudmFzX1twaXhlbFJhdGlvIHx8IDFdKSB7XG4gICAgICAgICAgICB2YXIgcmVuZGVyT3B0aW9ucyA9IHRoaXMuY3JlYXRlUmVuZGVyT3B0aW9ucygpO1xuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQocmVuZGVyT3B0aW9ucy5zaXplICogcGl4ZWxSYXRpbyB8fCAxLCByZW5kZXJPcHRpb25zLnNpemUgKiBwaXhlbFJhdGlvIHx8IDEpO1xuICAgICAgICAgICAgdGhpcy5kcmF3XyhyZW5kZXJPcHRpb25zLCBjb250ZXh0LCAwLCAwLCBwaXhlbFJhdGlvIHx8IDEpO1xuICAgICAgICAgICAgdGhpcy5jYW52YXNfW3BpeGVsUmF0aW8gfHwgMV0gPSBjb250ZXh0LmNhbnZhcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jYW52YXNfW3BpeGVsUmF0aW8gfHwgMV07XG4gICAgfTtcbiAgICAvKlxuICAgICAqIEdldCB0aGUgaW1hZ2UgcGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogKi9cbiAgICBSZWd1bGFyU2hhcGUucHJvdG90eXBlLmdldFBpeGVsUmF0aW8gPSBmdW5jdGlvbiAocGl4ZWxSYXRpbykge1xuICAgICAgICByZXR1cm4gcGl4ZWxSYXRpbztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gSW1hZ2Ugc2l6ZS5cbiAgICAgKi9cbiAgICBSZWd1bGFyU2hhcGUucHJvdG90eXBlLmdldEltYWdlU2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2VTaXplXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gU2l6ZSBvZiB0aGUgaGl0LWRldGVjdGlvbiBpbWFnZS5cbiAgICAgKi9cbiAgICBSZWd1bGFyU2hhcGUucHJvdG90eXBlLmdldEhpdERldGVjdGlvbkltYWdlU2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VTaXplXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL0ltYWdlU3RhdGUuanNcIikuZGVmYXVsdH0gSW1hZ2Ugc3RhdGUuXG4gICAgICovXG4gICAgUmVndWxhclNoYXBlLnByb3RvdHlwZS5nZXRJbWFnZVN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gSW1hZ2VTdGF0ZS5MT0FERUQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG9yaWdpbiBvZiB0aGUgc3ltYm9saXplci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPcmlnaW4uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUuZ2V0T3JpZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcmlnaW5fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBudW1iZXIgb2YgcG9pbnRzIGZvciBnZW5lcmF0aW5nIHRoZSBzaGFwZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE51bWJlciBvZiBwb2ludHMgZm9yIHN0YXJzIGFuZCByZWd1bGFyIHBvbHlnb25zLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBSZWd1bGFyU2hhcGUucHJvdG90eXBlLmdldFBvaW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9pbnRzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgKHByaW1hcnkpIHJhZGl1cyBmb3IgdGhlIHNoYXBlLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gUmFkaXVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBSZWd1bGFyU2hhcGUucHJvdG90eXBlLmdldFJhZGl1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFkaXVzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc2Vjb25kYXJ5IHJhZGl1cyBmb3IgdGhlIHNoYXBlLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJhZGl1czIuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUuZ2V0UmFkaXVzMiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFkaXVzMl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHNpemUgb2YgdGhlIHN5bWJvbGl6ZXIgKGluIHBpeGVscykuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBTaXplLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBSZWd1bGFyU2hhcGUucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzdHJva2Ugc3R5bGUgZm9yIHRoZSBzaGFwZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1N0cm9rZS5qc1wiKS5kZWZhdWx0fSBTdHJva2Ugc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUuZ2V0U3Ryb2tlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHJva2VfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCk6IHZvaWR9IGxpc3RlbmVyIExpc3RlbmVyIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUubGlzdGVuSW1hZ2VDaGFuZ2UgPSBmdW5jdGlvbiAobGlzdGVuZXIpIHsgfTtcbiAgICAvKipcbiAgICAgKiBMb2FkIG5vdCB5ZXQgbG9hZGVkIFVSSS5cbiAgICAgKi9cbiAgICBSZWd1bGFyU2hhcGUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCk6IHZvaWR9IGxpc3RlbmVyIExpc3RlbmVyIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUudW5saXN0ZW5JbWFnZUNoYW5nZSA9IGZ1bmN0aW9uIChsaXN0ZW5lcikgeyB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtSZW5kZXJPcHRpb25zfSAgVGhlIHJlbmRlciBvcHRpb25zXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUuY3JlYXRlUmVuZGVyT3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxpbmVDYXAgPSBkZWZhdWx0TGluZUNhcDtcbiAgICAgICAgdmFyIGxpbmVKb2luID0gZGVmYXVsdExpbmVKb2luO1xuICAgICAgICB2YXIgbWl0ZXJMaW1pdCA9IDA7XG4gICAgICAgIHZhciBsaW5lRGFzaCA9IG51bGw7XG4gICAgICAgIHZhciBsaW5lRGFzaE9mZnNldCA9IDA7XG4gICAgICAgIHZhciBzdHJva2VTdHlsZTtcbiAgICAgICAgdmFyIHN0cm9rZVdpZHRoID0gMDtcbiAgICAgICAgaWYgKHRoaXMuc3Ryb2tlXykge1xuICAgICAgICAgICAgc3Ryb2tlU3R5bGUgPSB0aGlzLnN0cm9rZV8uZ2V0Q29sb3IoKTtcbiAgICAgICAgICAgIGlmIChzdHJva2VTdHlsZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlID0gZGVmYXVsdFN0cm9rZVN0eWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3Ryb2tlU3R5bGUgPSBhc0NvbG9yTGlrZShzdHJva2VTdHlsZSk7XG4gICAgICAgICAgICBzdHJva2VXaWR0aCA9IHRoaXMuc3Ryb2tlXy5nZXRXaWR0aCgpO1xuICAgICAgICAgICAgaWYgKHN0cm9rZVdpZHRoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aCA9IGRlZmF1bHRMaW5lV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaW5lRGFzaCA9IHRoaXMuc3Ryb2tlXy5nZXRMaW5lRGFzaCgpO1xuICAgICAgICAgICAgbGluZURhc2hPZmZzZXQgPSB0aGlzLnN0cm9rZV8uZ2V0TGluZURhc2hPZmZzZXQoKTtcbiAgICAgICAgICAgIGxpbmVKb2luID0gdGhpcy5zdHJva2VfLmdldExpbmVKb2luKCk7XG4gICAgICAgICAgICBpZiAobGluZUpvaW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxpbmVKb2luID0gZGVmYXVsdExpbmVKb2luO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGluZUNhcCA9IHRoaXMuc3Ryb2tlXy5nZXRMaW5lQ2FwKCk7XG4gICAgICAgICAgICBpZiAobGluZUNhcCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbGluZUNhcCA9IGRlZmF1bHRMaW5lQ2FwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWl0ZXJMaW1pdCA9IHRoaXMuc3Ryb2tlXy5nZXRNaXRlckxpbWl0KCk7XG4gICAgICAgICAgICBpZiAobWl0ZXJMaW1pdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbWl0ZXJMaW1pdCA9IGRlZmF1bHRNaXRlckxpbWl0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBzaXplID0gMiAqICh0aGlzLnJhZGl1c18gKyBzdHJva2VXaWR0aCkgKyAxO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3Ryb2tlU3R5bGU6IHN0cm9rZVN0eWxlLFxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IHN0cm9rZVdpZHRoLFxuICAgICAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgICAgIGxpbmVDYXA6IGxpbmVDYXAsXG4gICAgICAgICAgICBsaW5lRGFzaDogbGluZURhc2gsXG4gICAgICAgICAgICBsaW5lRGFzaE9mZnNldDogbGluZURhc2hPZmZzZXQsXG4gICAgICAgICAgICBsaW5lSm9pbjogbGluZUpvaW4sXG4gICAgICAgICAgICBtaXRlckxpbWl0OiBtaXRlckxpbWl0LFxuICAgICAgICB9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVuZGVyT3B0aW9ucyA9IHRoaXMuY3JlYXRlUmVuZGVyT3B0aW9ucygpO1xuICAgICAgICB2YXIgY29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRChyZW5kZXJPcHRpb25zLnNpemUsIHJlbmRlck9wdGlvbnMuc2l6ZSk7XG4gICAgICAgIHRoaXMuZHJhd18ocmVuZGVyT3B0aW9ucywgY29udGV4dCwgMCwgMCwgMSk7XG4gICAgICAgIHRoaXMuY2FudmFzXyA9IHt9O1xuICAgICAgICB0aGlzLmNhbnZhc19bMV0gPSBjb250ZXh0LmNhbnZhcztcbiAgICAgICAgLy8gY2FudmFzLndpZHRoIGFuZCBoZWlnaHQgYXJlIHJvdW5kZWQgdG8gdGhlIGNsb3Nlc3QgaW50ZWdlclxuICAgICAgICB2YXIgc2l6ZSA9IGNvbnRleHQuY2FudmFzLndpZHRoO1xuICAgICAgICB2YXIgaW1hZ2VTaXplID0gc2l6ZTtcbiAgICAgICAgdmFyIGRpc3BsYWNlbWVudCA9IHRoaXMuZ2V0RGlzcGxhY2VtZW50KCk7XG4gICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VTaXplXyA9IFtyZW5kZXJPcHRpb25zLnNpemUsIHJlbmRlck9wdGlvbnMuc2l6ZV07XG4gICAgICAgIHRoaXMuY3JlYXRlSGl0RGV0ZWN0aW9uQ2FudmFzXyhyZW5kZXJPcHRpb25zKTtcbiAgICAgICAgdGhpcy5hbmNob3JfID0gW3NpemUgLyAyIC0gZGlzcGxhY2VtZW50WzBdLCBzaXplIC8gMiArIGRpc3BsYWNlbWVudFsxXV07XG4gICAgICAgIHRoaXMuc2l6ZV8gPSBbc2l6ZSwgc2l6ZV07XG4gICAgICAgIHRoaXMuaW1hZ2VTaXplXyA9IFtpbWFnZVNpemUsIGltYWdlU2l6ZV07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UmVuZGVyT3B0aW9uc30gcmVuZGVyT3B0aW9ucyBSZW5kZXIgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBUaGUgcmVuZGVyaW5nIGNvbnRleHQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGhlIG9yaWdpbiBmb3IgdGhlIHN5bWJvbCAoeCkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGhlIG9yaWdpbiBmb3IgdGhlIHN5bWJvbCAoeSkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gVGhlIHBpeGVsIHJhdGlvLlxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUuZHJhd18gPSBmdW5jdGlvbiAocmVuZGVyT3B0aW9ucywgY29udGV4dCwgeCwgeSwgcGl4ZWxSYXRpbykge1xuICAgICAgICB2YXIgaSwgYW5nbGUwLCByYWRpdXNDO1xuICAgICAgICAvLyByZXNldCB0cmFuc2Zvcm1cbiAgICAgICAgY29udGV4dC5zZXRUcmFuc2Zvcm0ocGl4ZWxSYXRpbywgMCwgMCwgcGl4ZWxSYXRpbywgMCwgMCk7XG4gICAgICAgIC8vIHRoZW4gbW92ZSB0byAoeCwgeSlcbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUoeCwgeSk7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIHZhciBwb2ludHMgPSB0aGlzLnBvaW50c187XG4gICAgICAgIGlmIChwb2ludHMgPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICBjb250ZXh0LmFyYyhyZW5kZXJPcHRpb25zLnNpemUgLyAyLCByZW5kZXJPcHRpb25zLnNpemUgLyAyLCB0aGlzLnJhZGl1c18sIDAsIDIgKiBNYXRoLlBJLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciByYWRpdXMyID0gdGhpcy5yYWRpdXMyXyAhPT0gdW5kZWZpbmVkID8gdGhpcy5yYWRpdXMyXyA6IHRoaXMucmFkaXVzXztcbiAgICAgICAgICAgIGlmIChyYWRpdXMyICE9PSB0aGlzLnJhZGl1c18pIHtcbiAgICAgICAgICAgICAgICBwb2ludHMgPSAyICogcG9pbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8PSBwb2ludHM7IGkrKykge1xuICAgICAgICAgICAgICAgIGFuZ2xlMCA9IChpICogMiAqIE1hdGguUEkpIC8gcG9pbnRzIC0gTWF0aC5QSSAvIDIgKyB0aGlzLmFuZ2xlXztcbiAgICAgICAgICAgICAgICByYWRpdXNDID0gaSAlIDIgPT09IDAgPyB0aGlzLnJhZGl1c18gOiByYWRpdXMyO1xuICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHJlbmRlck9wdGlvbnMuc2l6ZSAvIDIgKyByYWRpdXNDICogTWF0aC5jb3MoYW5nbGUwKSwgcmVuZGVyT3B0aW9ucy5zaXplIC8gMiArIHJhZGl1c0MgKiBNYXRoLnNpbihhbmdsZTApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5maWxsXykge1xuICAgICAgICAgICAgdmFyIGNvbG9yID0gdGhpcy5maWxsXy5nZXRDb2xvcigpO1xuICAgICAgICAgICAgaWYgKGNvbG9yID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29sb3IgPSBkZWZhdWx0RmlsbFN0eWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBhc0NvbG9yTGlrZShjb2xvcik7XG4gICAgICAgICAgICBjb250ZXh0LmZpbGwoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdHJva2VfKSB7XG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gcmVuZGVyT3B0aW9ucy5zdHJva2VTdHlsZTtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gcmVuZGVyT3B0aW9ucy5zdHJva2VXaWR0aDtcbiAgICAgICAgICAgIGlmIChjb250ZXh0LnNldExpbmVEYXNoICYmIHJlbmRlck9wdGlvbnMubGluZURhc2gpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnNldExpbmVEYXNoKHJlbmRlck9wdGlvbnMubGluZURhc2gpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQubGluZURhc2hPZmZzZXQgPSByZW5kZXJPcHRpb25zLmxpbmVEYXNoT2Zmc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGV4dC5saW5lQ2FwID0gcmVuZGVyT3B0aW9ucy5saW5lQ2FwO1xuICAgICAgICAgICAgY29udGV4dC5saW5lSm9pbiA9IHJlbmRlck9wdGlvbnMubGluZUpvaW47XG4gICAgICAgICAgICBjb250ZXh0Lm1pdGVyTGltaXQgPSByZW5kZXJPcHRpb25zLm1pdGVyTGltaXQ7XG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UmVuZGVyT3B0aW9uc30gcmVuZGVyT3B0aW9ucyBSZW5kZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBSZWd1bGFyU2hhcGUucHJvdG90eXBlLmNyZWF0ZUhpdERldGVjdGlvbkNhbnZhc18gPSBmdW5jdGlvbiAocmVuZGVyT3B0aW9ucykge1xuICAgICAgICB0aGlzLmhpdERldGVjdGlvbkNhbnZhc18gPSB0aGlzLmdldEltYWdlKDEpO1xuICAgICAgICBpZiAodGhpcy5maWxsXykge1xuICAgICAgICAgICAgdmFyIGNvbG9yID0gdGhpcy5maWxsXy5nZXRDb2xvcigpO1xuICAgICAgICAgICAgLy8gZGV0ZXJtaW5lIGlmIGZpbGwgaXMgdHJhbnNwYXJlbnQgKG9yIHBhdHRlcm4gb3IgZ3JhZGllbnQpXG4gICAgICAgICAgICB2YXIgb3BhY2l0eSA9IDA7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbG9yID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGNvbG9yID0gYXNBcnJheShjb2xvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sb3IgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5ID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY29sb3IpKSB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eSA9IGNvbG9yLmxlbmd0aCA9PT0gNCA/IGNvbG9yWzNdIDogMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcGFjaXR5ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgYSB0cmFuc3BhcmVudCBmaWxsIHN0eWxlIGlzIHNldCwgY3JlYXRlIGFuIGV4dHJhIGhpdC1kZXRlY3Rpb24gaW1hZ2VcbiAgICAgICAgICAgICAgICAvLyB3aXRoIGEgZGVmYXVsdCBmaWxsIHN0eWxlXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQocmVuZGVyT3B0aW9ucy5zaXplLCByZW5kZXJPcHRpb25zLnNpemUpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uQ2FudmFzXyA9IGNvbnRleHQuY2FudmFzO1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0hpdERldGVjdGlvbkNhbnZhc18ocmVuZGVyT3B0aW9ucywgY29udGV4dCwgMCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtSZW5kZXJPcHRpb25zfSByZW5kZXJPcHRpb25zIFJlbmRlciBvcHRpb25zLlxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IFRoZSBjb250ZXh0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRoZSBvcmlnaW4gZm9yIHRoZSBzeW1ib2wgKHgpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRoZSBvcmlnaW4gZm9yIHRoZSBzeW1ib2wgKHkpLlxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUuZHJhd0hpdERldGVjdGlvbkNhbnZhc18gPSBmdW5jdGlvbiAocmVuZGVyT3B0aW9ucywgY29udGV4dCwgeCwgeSkge1xuICAgICAgICAvLyBtb3ZlIHRvICh4LCB5KVxuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZSh4LCB5KTtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgdmFyIHBvaW50cyA9IHRoaXMucG9pbnRzXztcbiAgICAgICAgaWYgKHBvaW50cyA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgIGNvbnRleHQuYXJjKHJlbmRlck9wdGlvbnMuc2l6ZSAvIDIsIHJlbmRlck9wdGlvbnMuc2l6ZSAvIDIsIHRoaXMucmFkaXVzXywgMCwgMiAqIE1hdGguUEksIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHJhZGl1czIgPSB0aGlzLnJhZGl1czJfICE9PSB1bmRlZmluZWQgPyB0aGlzLnJhZGl1czJfIDogdGhpcy5yYWRpdXNfO1xuICAgICAgICAgICAgaWYgKHJhZGl1czIgIT09IHRoaXMucmFkaXVzXykge1xuICAgICAgICAgICAgICAgIHBvaW50cyA9IDIgKiBwb2ludHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaSA9IHZvaWQgMCwgcmFkaXVzQyA9IHZvaWQgMCwgYW5nbGUwID0gdm9pZCAwO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8PSBwb2ludHM7IGkrKykge1xuICAgICAgICAgICAgICAgIGFuZ2xlMCA9IChpICogMiAqIE1hdGguUEkpIC8gcG9pbnRzIC0gTWF0aC5QSSAvIDIgKyB0aGlzLmFuZ2xlXztcbiAgICAgICAgICAgICAgICByYWRpdXNDID0gaSAlIDIgPT09IDAgPyB0aGlzLnJhZGl1c18gOiByYWRpdXMyO1xuICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHJlbmRlck9wdGlvbnMuc2l6ZSAvIDIgKyByYWRpdXNDICogTWF0aC5jb3MoYW5nbGUwKSwgcmVuZGVyT3B0aW9ucy5zaXplIC8gMiArIHJhZGl1c0MgKiBNYXRoLnNpbihhbmdsZTApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGRlZmF1bHRGaWxsU3R5bGU7XG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xuICAgICAgICBpZiAodGhpcy5zdHJva2VfKSB7XG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gcmVuZGVyT3B0aW9ucy5zdHJva2VTdHlsZTtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gcmVuZGVyT3B0aW9ucy5zdHJva2VXaWR0aDtcbiAgICAgICAgICAgIGlmIChyZW5kZXJPcHRpb25zLmxpbmVEYXNoKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5zZXRMaW5lRGFzaChyZW5kZXJPcHRpb25zLmxpbmVEYXNoKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVEYXNoT2Zmc2V0ID0gcmVuZGVyT3B0aW9ucy5saW5lRGFzaE9mZnNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICB9O1xuICAgIHJldHVybiBSZWd1bGFyU2hhcGU7XG59KEltYWdlU3R5bGUpKTtcbmV4cG9ydCBkZWZhdWx0IFJlZ3VsYXJTaGFwZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlZ3VsYXJTaGFwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3R5bGUvQ2lyY2xlXG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgUmVndWxhclNoYXBlIGZyb20gJy4vUmVndWxhclNoYXBlLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0ZpbGwuanNcIikuZGVmYXVsdH0gW2ZpbGxdIEZpbGwgc3R5bGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gcmFkaXVzIENpcmNsZSByYWRpdXMuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU3Ryb2tlLmpzXCIpLmRlZmF1bHR9IFtzdHJva2VdIFN0cm9rZSBzdHlsZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gW2Rpc3BsYWNlbWVudD1bMCwwXV0gZGlzcGxhY2VtZW50XG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFtzY2FsZT0xXSBTY2FsZS4gQSB0d28gZGltZW5zaW9uYWwgc2NhbGUgd2lsbCBwcm9kdWNlIGFuIGVsbGlwc2UuXG4gKiBVbmxlc3MgdHdvIGRpbWVuc2lvbmFsIHNjYWxpbmcgaXMgcmVxdWlyZWQgYSBiZXR0ZXIgcmVzdWx0IG1heSBiZSBvYnRhaW5lZCB3aXRoIGFuIGFwcHJvcHJpYXRlIHNldHRpbmcgZm9yIGByYWRpdXNgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyb3RhdGlvbj0wXSBSb3RhdGlvbiBpbiByYWRpYW5zXG4gKiAocG9zaXRpdmUgcm90YXRpb24gY2xvY2t3aXNlLCBtZWFuaW5nZnVsIG9ubHkgd2hlbiB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYSB0d28gZGltZW5zaW9uYWwgc2NhbGUpLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbcm90YXRlV2l0aFZpZXc9ZmFsc2VdIFdoZXRoZXIgdG8gcm90YXRlIHRoZSBzaGFwZSB3aXRoIHRoZSB2aWV3XG4gKiAobWVhbmluZ2Z1bCBvbmx5IHdoZW4gdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGEgdHdvIGRpbWVuc2lvbmFsIHNjYWxlKS5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBTZXQgY2lyY2xlIHN0eWxlIGZvciB2ZWN0b3IgZmVhdHVyZXMuXG4gKiBAYXBpXG4gKi9cbnZhciBDaXJjbGVTdHlsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2lyY2xlU3R5bGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDaXJjbGVTdHlsZShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBwb2ludHM6IEluZmluaXR5LFxuICAgICAgICAgICAgZmlsbDogb3B0aW9ucy5maWxsLFxuICAgICAgICAgICAgcmFkaXVzOiBvcHRpb25zLnJhZGl1cyxcbiAgICAgICAgICAgIHN0cm9rZTogb3B0aW9ucy5zdHJva2UsXG4gICAgICAgICAgICBzY2FsZTogb3B0aW9ucy5zY2FsZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zY2FsZSA6IDEsXG4gICAgICAgICAgICByb3RhdGlvbjogb3B0aW9ucy5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yb3RhdGlvbiA6IDAsXG4gICAgICAgICAgICByb3RhdGVXaXRoVmlldzogb3B0aW9ucy5yb3RhdGVXaXRoVmlldyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yb3RhdGVXaXRoVmlldyA6IGZhbHNlLFxuICAgICAgICAgICAgZGlzcGxhY2VtZW50OiBvcHRpb25zLmRpc3BsYWNlbWVudCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kaXNwbGFjZW1lbnQgOiBbMCwgMF0sXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvbmVzIHRoZSBzdHlsZS5cbiAgICAgKiBAcmV0dXJuIHtDaXJjbGVTdHlsZX0gVGhlIGNsb25lZCBzdHlsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ2lyY2xlU3R5bGUucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2NhbGUgPSB0aGlzLmdldFNjYWxlKCk7XG4gICAgICAgIHZhciBzdHlsZSA9IG5ldyBDaXJjbGVTdHlsZSh7XG4gICAgICAgICAgICBmaWxsOiB0aGlzLmdldEZpbGwoKSA/IHRoaXMuZ2V0RmlsbCgpLmNsb25lKCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzdHJva2U6IHRoaXMuZ2V0U3Ryb2tlKCkgPyB0aGlzLmdldFN0cm9rZSgpLmNsb25lKCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByYWRpdXM6IHRoaXMuZ2V0UmFkaXVzKCksXG4gICAgICAgICAgICBzY2FsZTogQXJyYXkuaXNBcnJheShzY2FsZSkgPyBzY2FsZS5zbGljZSgpIDogc2NhbGUsXG4gICAgICAgICAgICByb3RhdGlvbjogdGhpcy5nZXRSb3RhdGlvbigpLFxuICAgICAgICAgICAgcm90YXRlV2l0aFZpZXc6IHRoaXMuZ2V0Um90YXRlV2l0aFZpZXcoKSxcbiAgICAgICAgICAgIGRpc3BsYWNlbWVudDogdGhpcy5nZXREaXNwbGFjZW1lbnQoKS5zbGljZSgpLFxuICAgICAgICB9KTtcbiAgICAgICAgc3R5bGUuc2V0T3BhY2l0eSh0aGlzLmdldE9wYWNpdHkoKSk7XG4gICAgICAgIHJldHVybiBzdHlsZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY2lyY2xlIHJhZGl1cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgQ2lyY2xlIHJhZGl1cy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ2lyY2xlU3R5bGUucHJvdG90eXBlLnNldFJhZGl1cyA9IGZ1bmN0aW9uIChyYWRpdXMpIHtcbiAgICAgICAgdGhpcy5yYWRpdXNfID0gcmFkaXVzO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH07XG4gICAgcmV0dXJuIENpcmNsZVN0eWxlO1xufShSZWd1bGFyU2hhcGUpKTtcbmV4cG9ydCBkZWZhdWx0IENpcmNsZVN0eWxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2lyY2xlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zdHlsZS9GaWxsXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcnxpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbY29sb3I9bnVsbF0gQSBjb2xvciwgZ3JhZGllbnQgb3IgcGF0dGVybi5cbiAqIFNlZSB7QGxpbmsgbW9kdWxlOm9sL2NvbG9yfkNvbG9yfSBhbmQge0BsaW5rIG1vZHVsZTpvbC9jb2xvcmxpa2V+Q29sb3JMaWtlfSBmb3IgcG9zc2libGUgZm9ybWF0cy5cbiAqIERlZmF1bHQgbnVsbDsgaWYgbnVsbCwgdGhlIENhbnZhcy9yZW5kZXJlciBkZWZhdWx0IGJsYWNrIHdpbGwgYmUgdXNlZC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBTZXQgZmlsbCBzdHlsZSBmb3IgdmVjdG9yIGZlYXR1cmVzLlxuICogQGFwaVxuICovXG52YXIgRmlsbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEZpbGwob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcnxpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb2xvcl8gPSBvcHRpb25zLmNvbG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbG9yIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvbmVzIHRoZSBzdHlsZS4gVGhlIGNvbG9yIGlzIG5vdCBjbG9uZWQgaWYgaXQgaXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9jb2xvcmxpa2V+Q29sb3JMaWtlfS5cbiAgICAgKiBAcmV0dXJuIHtGaWxsfSBUaGUgY2xvbmVkIHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBGaWxsLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbG9yID0gdGhpcy5nZXRDb2xvcigpO1xuICAgICAgICByZXR1cm4gbmV3IEZpbGwoe1xuICAgICAgICAgICAgY29sb3I6IEFycmF5LmlzQXJyYXkoY29sb3IpID8gY29sb3Iuc2xpY2UoKSA6IGNvbG9yIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGZpbGwgY29sb3IuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J8aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gQ29sb3IuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEZpbGwucHJvdG90eXBlLmdldENvbG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xvcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNvbG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcnxpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBjb2xvciBDb2xvci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgRmlsbC5wcm90b3R5cGUuc2V0Q29sb3IgPSBmdW5jdGlvbiAoY29sb3IpIHtcbiAgICAgICAgdGhpcy5jb2xvcl8gPSBjb2xvcjtcbiAgICB9O1xuICAgIHJldHVybiBGaWxsO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IEZpbGw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1GaWxsLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zdHlsZS9JbWFnZVxuICovXG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgdG9TaXplIH0gZnJvbSAnLi4vc2l6ZS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBvcGFjaXR5XG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHJvdGF0ZVdpdGhWaWV3XG4gKiBAcHJvcGVydHkge251bWJlcn0gcm90YXRpb25cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gc2NhbGVcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gZGlzcGxhY2VtZW50XG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBiYXNlIGNsYXNzIHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdCBpbnN0YW50aWF0ZWQgaW5cbiAqIGFwcHMuIEJhc2UgY2xhc3MgZm9yIHtAbGluayBtb2R1bGU6b2wvc3R5bGUvSWNvbn5JY29ufSwge0BsaW5rIG1vZHVsZTpvbC9zdHlsZS9DaXJjbGV+Q2lyY2xlU3R5bGV9IGFuZFxuICoge0BsaW5rIG1vZHVsZTpvbC9zdHlsZS9SZWd1bGFyU2hhcGV+UmVndWxhclNoYXBlfS5cbiAqIEBhYnN0cmFjdFxuICogQGFwaVxuICovXG52YXIgSW1hZ2VTdHlsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBJbWFnZVN0eWxlKG9wdGlvbnMpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9wYWNpdHlfID0gb3B0aW9ucy5vcGFjaXR5O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJvdGF0ZVdpdGhWaWV3XyA9IG9wdGlvbnMucm90YXRlV2l0aFZpZXc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yb3RhdGlvbl8gPSBvcHRpb25zLnJvdGF0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNjYWxlXyA9IG9wdGlvbnMuc2NhbGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zY2FsZUFycmF5XyA9IHRvU2l6ZShvcHRpb25zLnNjYWxlKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kaXNwbGFjZW1lbnRfID0gb3B0aW9ucy5kaXNwbGFjZW1lbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb25lcyB0aGUgc3R5bGUuXG4gICAgICogQHJldHVybiB7SW1hZ2VTdHlsZX0gVGhlIGNsb25lZCBzdHlsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW1hZ2VTdHlsZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzY2FsZSA9IHRoaXMuZ2V0U2NhbGUoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBJbWFnZVN0eWxlKHtcbiAgICAgICAgICAgIG9wYWNpdHk6IHRoaXMuZ2V0T3BhY2l0eSgpLFxuICAgICAgICAgICAgc2NhbGU6IEFycmF5LmlzQXJyYXkoc2NhbGUpID8gc2NhbGUuc2xpY2UoKSA6IHNjYWxlLFxuICAgICAgICAgICAgcm90YXRpb246IHRoaXMuZ2V0Um90YXRpb24oKSxcbiAgICAgICAgICAgIHJvdGF0ZVdpdGhWaWV3OiB0aGlzLmdldFJvdGF0ZVdpdGhWaWV3KCksXG4gICAgICAgICAgICBkaXNwbGFjZW1lbnQ6IHRoaXMuZ2V0RGlzcGxhY2VtZW50KCkuc2xpY2UoKSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHN5bWJvbGl6ZXIgb3BhY2l0eS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE9wYWNpdHkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLmdldE9wYWNpdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wYWNpdHlfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHN5bWJvbGl6ZXIgcm90YXRlcyB3aXRoIHRoZSBtYXAuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gUm90YXRlIHdpdGggbWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVN0eWxlLnByb3RvdHlwZS5nZXRSb3RhdGVXaXRoVmlldyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm90YXRlV2l0aFZpZXdfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzeW1vYmxpemVyIHJvdGF0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gUm90YXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLmdldFJvdGF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb3RhdGlvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHN5bWJvbGl6ZXIgc2NhbGUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gU2NhbGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLmdldFNjYWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2FsZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHN5bWJvbGl6ZXIgc2NhbGUgYXJyYXkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBTY2FsZSBhcnJheS5cbiAgICAgKi9cbiAgICBJbWFnZVN0eWxlLnByb3RvdHlwZS5nZXRTY2FsZUFycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2FsZUFycmF5XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZGlzcGxhY2VtZW50IG9mIHRoZSBzaGFwZVxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFNoYXBlJ3MgY2VudGVyIGRpc3BsYWNlbWVudFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVN0eWxlLnByb3RvdHlwZS5nZXREaXNwbGFjZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc3BsYWNlbWVudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBpbiBwaXhlbHMuIFRoZSBhbmNob3IgZGV0ZXJtaW5lcyB0aGUgY2VudGVyIHBvaW50IGZvciB0aGVcbiAgICAgKiBzeW1ib2xpemVyLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEFuY2hvci5cbiAgICAgKi9cbiAgICBJbWFnZVN0eWxlLnByb3RvdHlwZS5nZXRBbmNob3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpbWFnZSBlbGVtZW50IGZvciB0aGUgc3ltYm9saXplci5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR9IEltYWdlIGVsZW1lbnQuXG4gICAgICovXG4gICAgSW1hZ2VTdHlsZS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAocGl4ZWxSYXRpbykge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudH0gSW1hZ2UgZWxlbWVudC5cbiAgICAgKi9cbiAgICBJbWFnZVN0eWxlLnByb3RvdHlwZS5nZXRIaXREZXRlY3Rpb25JbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKlxuICAgICAqIEdldCB0aGUgaW1hZ2UgcGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogKi9cbiAgICBJbWFnZVN0eWxlLnByb3RvdHlwZS5nZXRQaXhlbFJhdGlvID0gZnVuY3Rpb24gKHBpeGVsUmF0aW8pIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9IEltYWdlIHN0YXRlLlxuICAgICAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLmdldEltYWdlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBJbWFnZSBzaXplLlxuICAgICAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLmdldEltYWdlU2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFNpemUgb2YgdGhlIGhpdC1kZXRlY3Rpb24gaW1hZ2UuXG4gICAgICovXG4gICAgSW1hZ2VTdHlsZS5wcm90b3R5cGUuZ2V0SGl0RGV0ZWN0aW9uSW1hZ2VTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgb3JpZ2luIG9mIHRoZSBzeW1ib2xpemVyLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE9yaWdpbi5cbiAgICAgKi9cbiAgICBJbWFnZVN0eWxlLnByb3RvdHlwZS5nZXRPcmlnaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzaXplIG9mIHRoZSBzeW1ib2xpemVyIChpbiBwaXhlbHMpLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gU2l6ZS5cbiAgICAgKi9cbiAgICBJbWFnZVN0eWxlLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgb3BhY2l0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IE9wYWNpdHkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLnNldE9wYWNpdHkgPSBmdW5jdGlvbiAob3BhY2l0eSkge1xuICAgICAgICB0aGlzLm9wYWNpdHlfID0gb3BhY2l0eTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRvIHJvdGF0ZSB0aGUgc3R5bGUgd2l0aCB0aGUgdmlldy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcm90YXRlV2l0aFZpZXcgUm90YXRlIHdpdGggbWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVN0eWxlLnByb3RvdHlwZS5zZXRSb3RhdGVXaXRoVmlldyA9IGZ1bmN0aW9uIChyb3RhdGVXaXRoVmlldykge1xuICAgICAgICB0aGlzLnJvdGF0ZVdpdGhWaWV3XyA9IHJvdGF0ZVdpdGhWaWV3O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW1hZ2VTdHlsZS5wcm90b3R5cGUuc2V0Um90YXRpb24gPSBmdW5jdGlvbiAocm90YXRpb24pIHtcbiAgICAgICAgdGhpcy5yb3RhdGlvbl8gPSByb3RhdGlvbjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc2NhbGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IHNjYWxlIFNjYWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVN0eWxlLnByb3RvdHlwZS5zZXRTY2FsZSA9IGZ1bmN0aW9uIChzY2FsZSkge1xuICAgICAgICB0aGlzLnNjYWxlXyA9IHNjYWxlO1xuICAgICAgICB0aGlzLnNjYWxlQXJyYXlfID0gdG9TaXplKHNjYWxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQpOiB2b2lkfSBsaXN0ZW5lciBMaXN0ZW5lciBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBJbWFnZVN0eWxlLnByb3RvdHlwZS5saXN0ZW5JbWFnZUNoYW5nZSA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZCBub3QgeWV0IGxvYWRlZCBVUkkuXG4gICAgICogQGFic3RyYWN0XG4gICAgICovXG4gICAgSW1hZ2VTdHlsZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQpOiB2b2lkfSBsaXN0ZW5lciBMaXN0ZW5lciBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBJbWFnZVN0eWxlLnByb3RvdHlwZS51bmxpc3RlbkltYWdlQ2hhbmdlID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICByZXR1cm4gSW1hZ2VTdHlsZTtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBJbWFnZVN0eWxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW1hZ2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0eWxlL1N0cm9rZVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J8aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gW2NvbG9yXSBBIGNvbG9yLCBncmFkaWVudCBvciBwYXR0ZXJuLlxuICogU2VlIHtAbGluayBtb2R1bGU6b2wvY29sb3J+Q29sb3J9IGFuZCB7QGxpbmsgbW9kdWxlOm9sL2NvbG9ybGlrZX5Db2xvckxpa2V9IGZvciBwb3NzaWJsZSBmb3JtYXRzLlxuICogRGVmYXVsdCBudWxsOyBpZiBudWxsLCB0aGUgQ2FudmFzL3JlbmRlcmVyIGRlZmF1bHQgYmxhY2sgd2lsbCBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lQ2FwfSBbbGluZUNhcD0ncm91bmQnXSBMaW5lIGNhcCBzdHlsZTogYGJ1dHRgLCBgcm91bmRgLCBvciBgc3F1YXJlYC5cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUpvaW59IFtsaW5lSm9pbj0ncm91bmQnXSBMaW5lIGpvaW4gc3R5bGU6IGBiZXZlbGAsIGByb3VuZGAsIG9yIGBtaXRlcmAuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtsaW5lRGFzaF0gTGluZSBkYXNoIHBhdHRlcm4uIERlZmF1bHQgaXMgYG51bGxgIChubyBkYXNoKS5cbiAqIFBsZWFzZSBub3RlIHRoYXQgSW50ZXJuZXQgRXhwbG9yZXIgMTAgYW5kIGxvd2VyIGRvIG5vdCBzdXBwb3J0IHRoZSBgc2V0TGluZURhc2hgIG1ldGhvZCBvblxuICogdGhlIGBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkRgIGFuZCB0aGVyZWZvcmUgdGhpcyBvcHRpb24gd2lsbCBoYXZlIG5vIHZpc3VhbCBlZmZlY3QgaW4gdGhlc2UgYnJvd3NlcnMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2xpbmVEYXNoT2Zmc2V0PTBdIExpbmUgZGFzaCBvZmZzZXQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pdGVyTGltaXQ9MTBdIE1pdGVyIGxpbWl0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt3aWR0aF0gV2lkdGguXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogU2V0IHN0cm9rZSBzdHlsZSBmb3IgdmVjdG9yIGZlYXR1cmVzLlxuICogTm90ZSB0aGF0IHRoZSBkZWZhdWx0cyBnaXZlbiBhcmUgdGhlIENhbnZhcyBkZWZhdWx0cywgd2hpY2ggd2lsbCBiZSB1c2VkIGlmXG4gKiBvcHRpb24gaXMgbm90IGRlZmluZWQuIFRoZSBgZ2V0YCBmdW5jdGlvbnMgcmV0dXJuIHdoYXRldmVyIHdhcyBlbnRlcmVkIGluXG4gKiB0aGUgb3B0aW9uczsgdGhleSB3aWxsIG5vdCByZXR1cm4gdGhlIGRlZmF1bHQuXG4gKiBAYXBpXG4gKi9cbnZhciBTdHJva2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTdHJva2Uob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcnxpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb2xvcl8gPSBvcHRpb25zLmNvbG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbG9yIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtDYW52YXNMaW5lQ2FwfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGluZUNhcF8gPSBvcHRpb25zLmxpbmVDYXA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGluZURhc2hfID0gb3B0aW9ucy5saW5lRGFzaCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5saW5lRGFzaCA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGluZURhc2hPZmZzZXRfID0gb3B0aW9ucy5saW5lRGFzaE9mZnNldDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtDYW52YXNMaW5lSm9pbnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxpbmVKb2luXyA9IG9wdGlvbnMubGluZUpvaW47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWl0ZXJMaW1pdF8gPSBvcHRpb25zLm1pdGVyTGltaXQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud2lkdGhfID0gb3B0aW9ucy53aWR0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvbmVzIHRoZSBzdHlsZS5cbiAgICAgKiBAcmV0dXJuIHtTdHJva2V9IFRoZSBjbG9uZWQgc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0cm9rZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb2xvciA9IHRoaXMuZ2V0Q29sb3IoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBTdHJva2Uoe1xuICAgICAgICAgICAgY29sb3I6IEFycmF5LmlzQXJyYXkoY29sb3IpID8gY29sb3Iuc2xpY2UoKSA6IGNvbG9yIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGxpbmVDYXA6IHRoaXMuZ2V0TGluZUNhcCgpLFxuICAgICAgICAgICAgbGluZURhc2g6IHRoaXMuZ2V0TGluZURhc2goKSA/IHRoaXMuZ2V0TGluZURhc2goKS5zbGljZSgpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbGluZURhc2hPZmZzZXQ6IHRoaXMuZ2V0TGluZURhc2hPZmZzZXQoKSxcbiAgICAgICAgICAgIGxpbmVKb2luOiB0aGlzLmdldExpbmVKb2luKCksXG4gICAgICAgICAgICBtaXRlckxpbWl0OiB0aGlzLmdldE1pdGVyTGltaXQoKSxcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLmdldFdpZHRoKCksXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzdHJva2UgY29sb3IuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J8aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gQ29sb3IuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0cm9rZS5wcm90b3R5cGUuZ2V0Q29sb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGluZSBjYXAgdHlwZSBmb3IgdGhlIHN0cm9rZS5cbiAgICAgKiBAcmV0dXJuIHtDYW52YXNMaW5lQ2FwfHVuZGVmaW5lZH0gTGluZSBjYXAuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0cm9rZS5wcm90b3R5cGUuZ2V0TGluZUNhcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGluZUNhcF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxpbmUgZGFzaCBzdHlsZSBmb3IgdGhlIHN0cm9rZS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBMaW5lIGRhc2guXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0cm9rZS5wcm90b3R5cGUuZ2V0TGluZURhc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpbmVEYXNoXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGluZSBkYXNoIG9mZnNldCBmb3IgdGhlIHN0cm9rZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBMaW5lIGRhc2ggb2Zmc2V0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHJva2UucHJvdG90eXBlLmdldExpbmVEYXNoT2Zmc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5saW5lRGFzaE9mZnNldF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxpbmUgam9pbiB0eXBlIGZvciB0aGUgc3Ryb2tlLlxuICAgICAqIEByZXR1cm4ge0NhbnZhc0xpbmVKb2lufHVuZGVmaW5lZH0gTGluZSBqb2luLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHJva2UucHJvdG90eXBlLmdldExpbmVKb2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5saW5lSm9pbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1pdGVyIGxpbWl0IGZvciB0aGUgc3Ryb2tlLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IE1pdGVyIGxpbWl0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHJva2UucHJvdG90eXBlLmdldE1pdGVyTGltaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pdGVyTGltaXRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzdHJva2Ugd2lkdGguXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gV2lkdGguXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0cm9rZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpZHRoXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29sb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfGltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IGNvbG9yIENvbG9yLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHJva2UucHJvdG90eXBlLnNldENvbG9yID0gZnVuY3Rpb24gKGNvbG9yKSB7XG4gICAgICAgIHRoaXMuY29sb3JfID0gY29sb3I7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxpbmUgY2FwLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDYW52YXNMaW5lQ2FwfHVuZGVmaW5lZH0gbGluZUNhcCBMaW5lIGNhcC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU3Ryb2tlLnByb3RvdHlwZS5zZXRMaW5lQ2FwID0gZnVuY3Rpb24gKGxpbmVDYXApIHtcbiAgICAgICAgdGhpcy5saW5lQ2FwXyA9IGxpbmVDYXA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxpbmUgZGFzaC5cbiAgICAgKlxuICAgICAqIFBsZWFzZSBub3RlIHRoYXQgSW50ZXJuZXQgRXhwbG9yZXIgMTAgYW5kIGxvd2VyIFtkbyBub3Qgc3VwcG9ydF1bbWRuXSB0aGVcbiAgICAgKiBgc2V0TGluZURhc2hgIG1ldGhvZCBvbiB0aGUgYENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRGAgYW5kIHRoZXJlZm9yZSB0aGlzXG4gICAgICogcHJvcGVydHkgd2lsbCBoYXZlIG5vIHZpc3VhbCBlZmZlY3QgaW4gdGhlc2UgYnJvd3NlcnMuXG4gICAgICpcbiAgICAgKiBbbWRuXTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC9zZXRMaW5lRGFzaCNCcm93c2VyX2NvbXBhdGliaWxpdHlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gbGluZURhc2ggTGluZSBkYXNoLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHJva2UucHJvdG90eXBlLnNldExpbmVEYXNoID0gZnVuY3Rpb24gKGxpbmVEYXNoKSB7XG4gICAgICAgIHRoaXMubGluZURhc2hfID0gbGluZURhc2g7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxpbmUgZGFzaCBvZmZzZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IGxpbmVEYXNoT2Zmc2V0IExpbmUgZGFzaCBvZmZzZXQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0cm9rZS5wcm90b3R5cGUuc2V0TGluZURhc2hPZmZzZXQgPSBmdW5jdGlvbiAobGluZURhc2hPZmZzZXQpIHtcbiAgICAgICAgdGhpcy5saW5lRGFzaE9mZnNldF8gPSBsaW5lRGFzaE9mZnNldDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbGluZSBqb2luLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDYW52YXNMaW5lSm9pbnx1bmRlZmluZWR9IGxpbmVKb2luIExpbmUgam9pbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU3Ryb2tlLnByb3RvdHlwZS5zZXRMaW5lSm9pbiA9IGZ1bmN0aW9uIChsaW5lSm9pbikge1xuICAgICAgICB0aGlzLmxpbmVKb2luXyA9IGxpbmVKb2luO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBtaXRlciBsaW1pdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gbWl0ZXJMaW1pdCBNaXRlciBsaW1pdC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU3Ryb2tlLnByb3RvdHlwZS5zZXRNaXRlckxpbWl0ID0gZnVuY3Rpb24gKG1pdGVyTGltaXQpIHtcbiAgICAgICAgdGhpcy5taXRlckxpbWl0XyA9IG1pdGVyTGltaXQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHdpZHRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSB3aWR0aCBXaWR0aC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU3Ryb2tlLnByb3RvdHlwZS5zZXRXaWR0aCA9IGZ1bmN0aW9uICh3aWR0aCkge1xuICAgICAgICB0aGlzLndpZHRoXyA9IHdpZHRoO1xuICAgIH07XG4gICAgcmV0dXJuIFN0cm9rZTtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBTdHJva2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdHJva2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0eWxlL1N0eWxlXG4gKi9cbmltcG9ydCBDaXJjbGVTdHlsZSBmcm9tICcuL0NpcmNsZS5qcyc7XG5pbXBvcnQgRmlsbCBmcm9tICcuL0ZpbGwuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuLi9nZW9tL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgU3Ryb2tlIGZyb20gJy4vU3Ryb2tlLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9GZWF0dXJlfSBhbmQgYSBge251bWJlcn1gXG4gKiByZXByZXNlbnRpbmcgdGhlIHZpZXcncyByZXNvbHV0aW9uLiBUaGUgZnVuY3Rpb24gc2hvdWxkIHJldHVybiBhXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlL1N0eWxlfSBvciBhbiBhcnJheSBvZiB0aGVtLiBUaGlzIHdheSBlLmcuIGFcbiAqIHZlY3RvciBsYXllciBjYW4gYmUgc3R5bGVkLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBgdW5kZWZpbmVkYCwgdGhlXG4gKiBmZWF0dXJlIHdpbGwgbm90IGJlIHJlbmRlcmVkLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlLCBudW1iZXIpOihTdHlsZXxBcnJheTxTdHlsZT58dm9pZCl9IFN0eWxlRnVuY3Rpb25cbiAqL1xuLyoqXG4gKiBBIHtAbGluayBTdHlsZX0sIGFuIGFycmF5IG9mIHtAbGluayBTdHlsZX0sIG9yIGEge0BsaW5rIFN0eWxlRnVuY3Rpb259LlxuICogQHR5cGVkZWYge1N0eWxlfEFycmF5PFN0eWxlPnxTdHlsZUZ1bmN0aW9ufSBTdHlsZUxpa2VcbiAqL1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9GZWF0dXJlfSBhcyBhcmd1bWVudCBhbmQgcmV0dXJucyBhblxuICoge0BsaW5rIG1vZHVsZTpvbC9nZW9tL0dlb21ldHJ5fSB0aGF0IHdpbGwgYmUgcmVuZGVyZWQgYW5kIHN0eWxlZCBmb3IgdGhlIGZlYXR1cmUuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2UpOlxuICogICAgIChpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vcmVuZGVyL0ZlYXR1cmUuanNcIikuZGVmYXVsdHx1bmRlZmluZWQpfSBHZW9tZXRyeUZ1bmN0aW9uXG4gKi9cbi8qKlxuICogQ3VzdG9tIHJlbmRlcmVyIGZ1bmN0aW9uLiBUYWtlcyB0d28gYXJndW1lbnRzOlxuICpcbiAqIDEuIFRoZSBwaXhlbCBjb29yZGluYXRlcyBvZiB0aGUgZ2VvbWV0cnkgaW4gR2VvSlNPTiBub3RhdGlvbi5cbiAqIDIuIFRoZSB7QGxpbmsgbW9kdWxlOm9sL3JlbmRlcn5TdGF0ZX0gb2YgdGhlIGxheWVyIHJlbmRlcmVyLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigoaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT58QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4pLGltcG9ydChcIi4uL3JlbmRlci5qc1wiKS5TdGF0ZSk6IHZvaWR9XG4gKiBSZW5kZXJGdW5jdGlvblxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfGltcG9ydChcIi4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxHZW9tZXRyeUZ1bmN0aW9ufSBbZ2VvbWV0cnldIEZlYXR1cmUgcHJvcGVydHkgb3IgZ2VvbWV0cnlcbiAqIG9yIGZ1bmN0aW9uIHJldHVybmluZyBhIGdlb21ldHJ5IHRvIHJlbmRlciBmb3IgdGhpcyBzdHlsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9GaWxsLmpzXCIpLmRlZmF1bHR9IFtmaWxsXSBGaWxsIHN0eWxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0ltYWdlLmpzXCIpLmRlZmF1bHR9IFtpbWFnZV0gSW1hZ2Ugc3R5bGUuXG4gKiBAcHJvcGVydHkge1JlbmRlckZ1bmN0aW9ufSBbcmVuZGVyZXJdIEN1c3RvbSByZW5kZXJlci4gV2hlbiBjb25maWd1cmVkLCBgZmlsbGAsIGBzdHJva2VgIGFuZCBgaW1hZ2VgIHdpbGwgYmVcbiAqIGlnbm9yZWQsIGFuZCB0aGUgcHJvdmlkZWQgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgd2l0aCBlYWNoIHJlbmRlciBmcmFtZSBmb3IgZWFjaCBnZW9tZXRyeS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdHJva2UuanNcIikuZGVmYXVsdH0gW3N0cm9rZV0gU3Ryb2tlIHN0eWxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1RleHQuanNcIikuZGVmYXVsdH0gW3RleHRdIFRleHQgc3R5bGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleF0gWiBpbmRleC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDb250YWluZXIgZm9yIHZlY3RvciBmZWF0dXJlIHJlbmRlcmluZyBzdHlsZXMuIEFueSBjaGFuZ2VzIG1hZGUgdG8gdGhlIHN0eWxlXG4gKiBvciBpdHMgY2hpbGRyZW4gdGhyb3VnaCBgc2V0KigpYCBtZXRob2RzIHdpbGwgbm90IHRha2UgZWZmZWN0IHVudGlsIHRoZVxuICogZmVhdHVyZSBvciBsYXllciB0aGF0IHVzZXMgdGhlIHN0eWxlIGlzIHJlLXJlbmRlcmVkLlxuICpcbiAqICMjIEZlYXR1cmUgc3R5bGVzXG4gKlxuICogSWYgbm8gc3R5bGUgaXMgZGVmaW5lZCwgdGhlIGZvbGxvd2luZyBkZWZhdWx0IHN0eWxlIGlzIHVzZWQ6XG4gKiBgYGBqc1xuICogIGltcG9ydCB7RmlsbCwgU3Ryb2tlLCBDaXJjbGUsIFN0eWxlfSBmcm9tICdvbC9zdHlsZSc7XG4gKlxuICogIHZhciBmaWxsID0gbmV3IEZpbGwoe1xuICogICAgY29sb3I6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuNCknXG4gKiAgfSk7XG4gKiAgdmFyIHN0cm9rZSA9IG5ldyBTdHJva2Uoe1xuICogICAgY29sb3I6ICcjMzM5OUNDJyxcbiAqICAgIHdpZHRoOiAxLjI1XG4gKiAgfSk7XG4gKiAgdmFyIHN0eWxlcyA9IFtcbiAqICAgIG5ldyBTdHlsZSh7XG4gKiAgICAgIGltYWdlOiBuZXcgQ2lyY2xlKHtcbiAqICAgICAgICBmaWxsOiBmaWxsLFxuICogICAgICAgIHN0cm9rZTogc3Ryb2tlLFxuICogICAgICAgIHJhZGl1czogNVxuICogICAgICB9KSxcbiAqICAgICAgZmlsbDogZmlsbCxcbiAqICAgICAgc3Ryb2tlOiBzdHJva2VcbiAqICAgIH0pXG4gKiAgXTtcbiAqIGBgYFxuICpcbiAqIEEgc2VwYXJhdGUgZWRpdGluZyBzdHlsZSBoYXMgdGhlIGZvbGxvd2luZyBkZWZhdWx0czpcbiAqIGBgYGpzXG4gKiAgaW1wb3J0IHtGaWxsLCBTdHJva2UsIENpcmNsZSwgU3R5bGV9IGZyb20gJ29sL3N0eWxlJztcbiAqICBpbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJ29sL2dlb20vR2VvbWV0cnlUeXBlJztcbiAqXG4gKiAgdmFyIHdoaXRlID0gWzI1NSwgMjU1LCAyNTUsIDFdO1xuICogIHZhciBibHVlID0gWzAsIDE1MywgMjU1LCAxXTtcbiAqICB2YXIgd2lkdGggPSAzO1xuICogIHN0eWxlc1tHZW9tZXRyeVR5cGUuUE9MWUdPTl0gPSBbXG4gKiAgICBuZXcgU3R5bGUoe1xuICogICAgICBmaWxsOiBuZXcgRmlsbCh7XG4gKiAgICAgICAgY29sb3I6IFsyNTUsIDI1NSwgMjU1LCAwLjVdXG4gKiAgICAgIH0pXG4gKiAgICB9KVxuICogIF07XG4gKiAgc3R5bGVzW0dlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OXSA9XG4gKiAgICAgIHN0eWxlc1tHZW9tZXRyeVR5cGUuUE9MWUdPTl07XG4gKiAgc3R5bGVzW0dlb21ldHJ5VHlwZS5MSU5FX1NUUklOR10gPSBbXG4gKiAgICBuZXcgU3R5bGUoe1xuICogICAgICBzdHJva2U6IG5ldyBTdHJva2Uoe1xuICogICAgICAgIGNvbG9yOiB3aGl0ZSxcbiAqICAgICAgICB3aWR0aDogd2lkdGggKyAyXG4gKiAgICAgIH0pXG4gKiAgICB9KSxcbiAqICAgIG5ldyBTdHlsZSh7XG4gKiAgICAgIHN0cm9rZTogbmV3IFN0cm9rZSh7XG4gKiAgICAgICAgY29sb3I6IGJsdWUsXG4gKiAgICAgICAgd2lkdGg6IHdpZHRoXG4gKiAgICAgIH0pXG4gKiAgICB9KVxuICogIF07XG4gKiAgc3R5bGVzW0dlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklOR10gPVxuICogICAgICBzdHlsZXNbR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HXTtcbiAqICBzdHlsZXNbR2VvbWV0cnlUeXBlLlBPSU5UXSA9IFtcbiAqICAgIG5ldyBTdHlsZSh7XG4gKiAgICAgIGltYWdlOiBuZXcgQ2lyY2xlKHtcbiAqICAgICAgICByYWRpdXM6IHdpZHRoICogMixcbiAqICAgICAgICBmaWxsOiBuZXcgRmlsbCh7XG4gKiAgICAgICAgICBjb2xvcjogYmx1ZVxuICogICAgICAgIH0pLFxuICogICAgICAgIHN0cm9rZTogbmV3IFN0cm9rZSh7XG4gKiAgICAgICAgICBjb2xvcjogd2hpdGUsXG4gKiAgICAgICAgICB3aWR0aDogd2lkdGggLyAyXG4gKiAgICAgICAgfSlcbiAqICAgICAgfSksXG4gKiAgICAgIHpJbmRleDogSW5maW5pdHlcbiAqICAgIH0pXG4gKiAgXTtcbiAqICBzdHlsZXNbR2VvbWV0cnlUeXBlLk1VTFRJX1BPSU5UXSA9XG4gKiAgICAgIHN0eWxlc1tHZW9tZXRyeVR5cGUuUE9JTlRdO1xuICogIHN0eWxlc1tHZW9tZXRyeVR5cGUuR0VPTUVUUllfQ09MTEVDVElPTl0gPVxuICogICAgICBzdHlsZXNbR2VvbWV0cnlUeXBlLlBPTFlHT05dLmNvbmNhdChcbiAqICAgICAgICAgIHN0eWxlc1tHZW9tZXRyeVR5cGUuTElORV9TVFJJTkddLFxuICogICAgICAgICAgc3R5bGVzW0dlb21ldHJ5VHlwZS5QT0lOVF1cbiAqICAgICAgKTtcbiAqIGBgYFxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFN0eWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIFN0eWxlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gU3R5bGUob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd8aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fEdlb21ldHJ5RnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdlb21ldHJ5XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUdlb21ldHJ5RnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdlb21ldHJ5RnVuY3Rpb25fID0gZGVmYXVsdEdlb21ldHJ5RnVuY3Rpb247XG4gICAgICAgIGlmIChvcHRpb25zLmdlb21ldHJ5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0R2VvbWV0cnkob3B0aW9ucy5nZW9tZXRyeSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0ZpbGwuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmlsbF8gPSBvcHRpb25zLmZpbGwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZmlsbCA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9JbWFnZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbWFnZV8gPSBvcHRpb25zLmltYWdlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmltYWdlIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtSZW5kZXJGdW5jdGlvbnxudWxsfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZW5kZXJlcl8gPSBvcHRpb25zLnJlbmRlcmVyICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnJlbmRlcmVyIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1N0cm9rZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdHJva2VfID0gb3B0aW9ucy5zdHJva2UgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc3Ryb2tlIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1RleHQuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGV4dF8gPSBvcHRpb25zLnRleHQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGV4dCA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuekluZGV4XyA9IG9wdGlvbnMuekluZGV4O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9uZXMgdGhlIHN0eWxlLlxuICAgICAqIEByZXR1cm4ge1N0eWxlfSBUaGUgY2xvbmVkIHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHlsZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBnZW9tZXRyeSA9IHRoaXMuZ2V0R2VvbWV0cnkoKTtcbiAgICAgICAgaWYgKGdlb21ldHJ5ICYmIHR5cGVvZiBnZW9tZXRyeSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGdlb21ldHJ5ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuY2xvbmUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFN0eWxlKHtcbiAgICAgICAgICAgIGdlb21ldHJ5OiBnZW9tZXRyeSxcbiAgICAgICAgICAgIGZpbGw6IHRoaXMuZ2V0RmlsbCgpID8gdGhpcy5nZXRGaWxsKCkuY2xvbmUoKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGltYWdlOiB0aGlzLmdldEltYWdlKCkgPyB0aGlzLmdldEltYWdlKCkuY2xvbmUoKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHN0cm9rZTogdGhpcy5nZXRTdHJva2UoKSA/IHRoaXMuZ2V0U3Ryb2tlKCkuY2xvbmUoKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRleHQ6IHRoaXMuZ2V0VGV4dCgpID8gdGhpcy5nZXRUZXh0KCkuY2xvbmUoKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHpJbmRleDogdGhpcy5nZXRaSW5kZXgoKSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1c3RvbSByZW5kZXJlciBmdW5jdGlvbiB0aGF0IHdhcyBjb25maWd1cmVkIHdpdGhcbiAgICAgKiB7QGxpbmsgI3NldFJlbmRlcmVyfSBvciB0aGUgYHJlbmRlcmVyYCBjb25zdHJ1Y3RvciBvcHRpb24uXG4gICAgICogQHJldHVybiB7UmVuZGVyRnVuY3Rpb258bnVsbH0gQ3VzdG9tIHJlbmRlcmVyIGZ1bmN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHlsZS5wcm90b3R5cGUuZ2V0UmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgYSBjdXN0b20gcmVuZGVyZXIgZnVuY3Rpb24gZm9yIHRoaXMgc3R5bGUuIFdoZW4gc2V0LCBgZmlsbGAsIGBzdHJva2VgXG4gICAgICogYW5kIGBpbWFnZWAgb3B0aW9ucyBvZiB0aGUgc3R5bGUgd2lsbCBiZSBpZ25vcmVkLlxuICAgICAqIEBwYXJhbSB7UmVuZGVyRnVuY3Rpb258bnVsbH0gcmVuZGVyZXIgQ3VzdG9tIHJlbmRlcmVyIGZ1bmN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHlsZS5wcm90b3R5cGUuc2V0UmVuZGVyZXIgPSBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlcl8gPSByZW5kZXJlcjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZ2VvbWV0cnkgdG8gYmUgcmVuZGVyZWQuXG4gICAgICogQHJldHVybiB7c3RyaW5nfGltcG9ydChcIi4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxHZW9tZXRyeUZ1bmN0aW9ufVxuICAgICAqIEZlYXR1cmUgcHJvcGVydHkgb3IgZ2VvbWV0cnkgb3IgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBnZW9tZXRyeSB0aGF0IHdpbGxcbiAgICAgKiBiZSByZW5kZXJlZCB3aXRoIHRoaXMgc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0eWxlLnByb3RvdHlwZS5nZXRHZW9tZXRyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VvbWV0cnlfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBmdW5jdGlvbiB1c2VkIHRvIGdlbmVyYXRlIGEgZ2VvbWV0cnkgZm9yIHJlbmRlcmluZy5cbiAgICAgKiBAcmV0dXJuIHshR2VvbWV0cnlGdW5jdGlvbn0gRnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2l0aCBhIGZlYXR1cmVcbiAgICAgKiBhbmQgcmV0dXJucyB0aGUgZ2VvbWV0cnkgdG8gcmVuZGVyIGluc3RlYWQgb2YgdGhlIGZlYXR1cmUncyBnZW9tZXRyeS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU3R5bGUucHJvdG90eXBlLmdldEdlb21ldHJ5RnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlb21ldHJ5RnVuY3Rpb25fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBmaWxsIHN0eWxlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vRmlsbC5qc1wiKS5kZWZhdWx0fSBGaWxsIHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHlsZS5wcm90b3R5cGUuZ2V0RmlsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsbF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGZpbGwgc3R5bGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0ZpbGwuanNcIikuZGVmYXVsdH0gZmlsbCBGaWxsIHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHlsZS5wcm90b3R5cGUuc2V0RmlsbCA9IGZ1bmN0aW9uIChmaWxsKSB7XG4gICAgICAgIHRoaXMuZmlsbF8gPSBmaWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpbWFnZSBzdHlsZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0ltYWdlLmpzXCIpLmRlZmF1bHR9IEltYWdlIHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHlsZS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmltYWdlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgaW1hZ2Ugc3R5bGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0ltYWdlLmpzXCIpLmRlZmF1bHR9IGltYWdlIEltYWdlIHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHlsZS5wcm90b3R5cGUuc2V0SW1hZ2UgPSBmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgICAgdGhpcy5pbWFnZV8gPSBpbWFnZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc3Ryb2tlIHN0eWxlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vU3Ryb2tlLmpzXCIpLmRlZmF1bHR9IFN0cm9rZSBzdHlsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU3R5bGUucHJvdG90eXBlLmdldFN0cm9rZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Ryb2tlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc3Ryb2tlIHN0eWxlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9TdHJva2UuanNcIikuZGVmYXVsdH0gc3Ryb2tlIFN0cm9rZSBzdHlsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU3R5bGUucHJvdG90eXBlLnNldFN0cm9rZSA9IGZ1bmN0aW9uIChzdHJva2UpIHtcbiAgICAgICAgdGhpcy5zdHJva2VfID0gc3Ryb2tlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0ZXh0IHN0eWxlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vVGV4dC5qc1wiKS5kZWZhdWx0fSBUZXh0IHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHlsZS5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHRleHQgc3R5bGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1RleHQuanNcIikuZGVmYXVsdH0gdGV4dCBUZXh0IHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHlsZS5wcm90b3R5cGUuc2V0VGV4dCA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICAgIHRoaXMudGV4dF8gPSB0ZXh0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB6LWluZGV4IGZvciB0aGUgc3R5bGUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gWkluZGV4LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHlsZS5wcm90b3R5cGUuZ2V0WkluZGV4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy56SW5kZXhfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IGEgZ2VvbWV0cnkgdGhhdCBpcyByZW5kZXJlZCBpbnN0ZWFkIG9mIHRoZSBmZWF0dXJlJ3MgZ2VvbWV0cnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR8R2VvbWV0cnlGdW5jdGlvbn0gZ2VvbWV0cnlcbiAgICAgKiAgICAgRmVhdHVyZSBwcm9wZXJ0eSBvciBnZW9tZXRyeSBvciBmdW5jdGlvbiByZXR1cm5pbmcgYSBnZW9tZXRyeSB0byByZW5kZXJcbiAgICAgKiAgICAgZm9yIHRoaXMgc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0eWxlLnByb3RvdHlwZS5zZXRHZW9tZXRyeSA9IGZ1bmN0aW9uIChnZW9tZXRyeSkge1xuICAgICAgICBpZiAodHlwZW9mIGdlb21ldHJ5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5RnVuY3Rpb25fID0gZ2VvbWV0cnk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGdlb21ldHJ5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhpcy5nZW9tZXRyeUZ1bmN0aW9uXyA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoZmVhdHVyZS5nZXQoZ2VvbWV0cnkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWdlb21ldHJ5KSB7XG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5RnVuY3Rpb25fID0gZGVmYXVsdEdlb21ldHJ5RnVuY3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZ2VvbWV0cnkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5nZW9tZXRyeUZ1bmN0aW9uXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ2VvbWV0cnlfID0gZ2VvbWV0cnk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHotaW5kZXguXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHpJbmRleCBaSW5kZXguXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0eWxlLnByb3RvdHlwZS5zZXRaSW5kZXggPSBmdW5jdGlvbiAoekluZGV4KSB7XG4gICAgICAgIHRoaXMuekluZGV4XyA9IHpJbmRleDtcbiAgICB9O1xuICAgIHJldHVybiBTdHlsZTtcbn0oKSk7XG4vKipcbiAqIENvbnZlcnQgdGhlIHByb3ZpZGVkIG9iamVjdCBpbnRvIGEgc3R5bGUgZnVuY3Rpb24uICBGdW5jdGlvbnMgcGFzc2VkIHRocm91Z2hcbiAqIHVuY2hhbmdlZC4gIEFycmF5cyBvZiBTdHlsZSBvciBzaW5nbGUgc3R5bGUgb2JqZWN0cyB3cmFwcGVkIGluIGFcbiAqIG5ldyBzdHlsZSBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7U3R5bGVGdW5jdGlvbnxBcnJheTxTdHlsZT58U3R5bGV9IG9ialxuICogICAgIEEgc3R5bGUgZnVuY3Rpb24sIGEgc2luZ2xlIHN0eWxlLCBvciBhbiBhcnJheSBvZiBzdHlsZXMuXG4gKiBAcmV0dXJuIHtTdHlsZUZ1bmN0aW9ufSBBIHN0eWxlIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9GdW5jdGlvbihvYmopIHtcbiAgICB2YXIgc3R5bGVGdW5jdGlvbjtcbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBzdHlsZUZ1bmN0aW9uID0gb2JqO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxTdHlsZT59XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgc3R5bGVzXzE7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgICAgIHN0eWxlc18xID0gb2JqO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiAoIC8qKiBAdHlwZSB7P30gKi8ob2JqKS5nZXRaSW5kZXgpID09PSAnZnVuY3Rpb24nLCA0MSk7IC8vIEV4cGVjdGVkIGFuIGBTdHlsZWAgb3IgYW4gYXJyYXkgb2YgYFN0eWxlYFxuICAgICAgICAgICAgdmFyIHN0eWxlID0gLyoqIEB0eXBlIHtTdHlsZX0gKi8gKG9iaik7XG4gICAgICAgICAgICBzdHlsZXNfMSA9IFtzdHlsZV07XG4gICAgICAgIH1cbiAgICAgICAgc3R5bGVGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHlsZXNfMTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHN0eWxlRnVuY3Rpb247XG59XG4vKipcbiAqIEB0eXBlIHtBcnJheTxTdHlsZT59XG4gKi9cbnZhciBkZWZhdWx0U3R5bGVzID0gbnVsbDtcbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHJldHVybiB7QXJyYXk8U3R5bGU+fSBTdHlsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRTdHlsZShmZWF0dXJlLCByZXNvbHV0aW9uKSB7XG4gICAgLy8gV2UgZG9uJ3QgdXNlIGFuIGltbWVkaWF0ZWx5LWludm9rZWQgZnVuY3Rpb25cbiAgICAvLyBhbmQgYSBjbG9zdXJlIHNvIHdlIGRvbid0IGdldCBhbiBlcnJvciBhdCBzY3JpcHQgZXZhbHVhdGlvbiB0aW1lIGluXG4gICAgLy8gYnJvd3NlcnMgdGhhdCBkbyBub3Qgc3VwcG9ydCBDYW52YXMuIChpbXBvcnQoXCIuL0NpcmNsZS5qc1wiKS5DaXJjbGVTdHlsZSBkb2VzXG4gICAgLy8gY2FudmFzLmdldENvbnRleHQoJzJkJykgYXQgY29uc3RydWN0aW9uIHRpbWUsIHdoaWNoIHdpbGwgY2F1c2UgYW4uZXJyb3JcbiAgICAvLyBpbiBzdWNoIGJyb3dzZXJzLilcbiAgICBpZiAoIWRlZmF1bHRTdHlsZXMpIHtcbiAgICAgICAgdmFyIGZpbGwgPSBuZXcgRmlsbCh7XG4gICAgICAgICAgICBjb2xvcjogJ3JnYmEoMjU1LDI1NSwyNTUsMC40KScsXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgc3Ryb2tlID0gbmV3IFN0cm9rZSh7XG4gICAgICAgICAgICBjb2xvcjogJyMzMzk5Q0MnLFxuICAgICAgICAgICAgd2lkdGg6IDEuMjUsXG4gICAgICAgIH0pO1xuICAgICAgICBkZWZhdWx0U3R5bGVzID0gW1xuICAgICAgICAgICAgbmV3IFN0eWxlKHtcbiAgICAgICAgICAgICAgICBpbWFnZTogbmV3IENpcmNsZVN0eWxlKHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogZmlsbCxcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBzdHJva2UsXG4gICAgICAgICAgICAgICAgICAgIHJhZGl1czogNSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBmaWxsOiBmaWxsLFxuICAgICAgICAgICAgICAgIHN0cm9rZTogc3Ryb2tlLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIF07XG4gICAgfVxuICAgIHJldHVybiBkZWZhdWx0U3R5bGVzO1xufVxuLyoqXG4gKiBEZWZhdWx0IHN0eWxlcyBmb3IgZWRpdGluZyBmZWF0dXJlcy5cbiAqIEByZXR1cm4ge09iamVjdDxpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5VHlwZS5qc1wiKS5kZWZhdWx0LCBBcnJheTxTdHlsZT4+fSBTdHlsZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVkaXRpbmdTdHlsZSgpIHtcbiAgICAvKiogQHR5cGUge09iamVjdDxpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5VHlwZS5qc1wiKS5kZWZhdWx0LCBBcnJheTxTdHlsZT4+fSAqL1xuICAgIHZhciBzdHlsZXMgPSB7fTtcbiAgICB2YXIgd2hpdGUgPSBbMjU1LCAyNTUsIDI1NSwgMV07XG4gICAgdmFyIGJsdWUgPSBbMCwgMTUzLCAyNTUsIDFdO1xuICAgIHZhciB3aWR0aCA9IDM7XG4gICAgc3R5bGVzW0dlb21ldHJ5VHlwZS5QT0xZR09OXSA9IFtcbiAgICAgICAgbmV3IFN0eWxlKHtcbiAgICAgICAgICAgIGZpbGw6IG5ldyBGaWxsKHtcbiAgICAgICAgICAgICAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDAuNV0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgXTtcbiAgICBzdHlsZXNbR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT05dID0gc3R5bGVzW0dlb21ldHJ5VHlwZS5QT0xZR09OXTtcbiAgICBzdHlsZXNbR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HXSA9IFtcbiAgICAgICAgbmV3IFN0eWxlKHtcbiAgICAgICAgICAgIHN0cm9rZTogbmV3IFN0cm9rZSh7XG4gICAgICAgICAgICAgICAgY29sb3I6IHdoaXRlLFxuICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCArIDIsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgICAgIG5ldyBTdHlsZSh7XG4gICAgICAgICAgICBzdHJva2U6IG5ldyBTdHJva2Uoe1xuICAgICAgICAgICAgICAgIGNvbG9yOiBibHVlLFxuICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICBdO1xuICAgIHN0eWxlc1tHZW9tZXRyeVR5cGUuTVVMVElfTElORV9TVFJJTkddID0gc3R5bGVzW0dlb21ldHJ5VHlwZS5MSU5FX1NUUklOR107XG4gICAgc3R5bGVzW0dlb21ldHJ5VHlwZS5DSVJDTEVdID0gc3R5bGVzW0dlb21ldHJ5VHlwZS5QT0xZR09OXS5jb25jYXQoc3R5bGVzW0dlb21ldHJ5VHlwZS5MSU5FX1NUUklOR10pO1xuICAgIHN0eWxlc1tHZW9tZXRyeVR5cGUuUE9JTlRdID0gW1xuICAgICAgICBuZXcgU3R5bGUoe1xuICAgICAgICAgICAgaW1hZ2U6IG5ldyBDaXJjbGVTdHlsZSh7XG4gICAgICAgICAgICAgICAgcmFkaXVzOiB3aWR0aCAqIDIsXG4gICAgICAgICAgICAgICAgZmlsbDogbmV3IEZpbGwoe1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogYmx1ZSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBzdHJva2U6IG5ldyBTdHJva2Uoe1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogd2hpdGUsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCAvIDIsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHpJbmRleDogSW5maW5pdHksXG4gICAgICAgIH0pLFxuICAgIF07XG4gICAgc3R5bGVzW0dlb21ldHJ5VHlwZS5NVUxUSV9QT0lOVF0gPSBzdHlsZXNbR2VvbWV0cnlUeXBlLlBPSU5UXTtcbiAgICBzdHlsZXNbR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT05dID0gc3R5bGVzW0dlb21ldHJ5VHlwZS5QT0xZR09OXS5jb25jYXQoc3R5bGVzW0dlb21ldHJ5VHlwZS5MSU5FX1NUUklOR10sIHN0eWxlc1tHZW9tZXRyeVR5cGUuUE9JTlRdKTtcbiAgICByZXR1cm4gc3R5bGVzO1xufVxuLyoqXG4gKiBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aXRoIGEgZmVhdHVyZSBhbmQgcmV0dXJucyBpdHMgZGVmYXVsdCBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlIHRvIGdldCB0aGUgZ2VvbWV0cnkgZm9yLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL3JlbmRlci9GZWF0dXJlLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBHZW9tZXRyeSB0byByZW5kZXIuXG4gKi9cbmZ1bmN0aW9uIGRlZmF1bHRHZW9tZXRyeUZ1bmN0aW9uKGZlYXR1cmUpIHtcbiAgICByZXR1cm4gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xufVxuZXhwb3J0IGRlZmF1bHQgU3R5bGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdHlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3R5bGUvVGV4dFBsYWNlbWVudFxuICovXG4vKipcbiAqIFRleHQgcGxhY2VtZW50LiBPbmUgb2YgYCdwb2ludCdgLCBgJ2xpbmUnYC4gRGVmYXVsdCBpcyBgJ3BvaW50J2AuIE5vdGUgdGhhdFxuICogYCdsaW5lJ2AgcmVxdWlyZXMgdGhlIHVuZGVybHlpbmcgZ2VvbWV0cnkgdG8gYmUgYSB7QGxpbmsgbW9kdWxlOm9sL2dlb20vTGluZVN0cmluZ35MaW5lU3RyaW5nfSxcbiAqIHtAbGluayBtb2R1bGU6b2wvZ2VvbS9Qb2x5Z29uflBvbHlnb259LCB7QGxpbmsgbW9kdWxlOm9sL2dlb20vTXVsdGlMaW5lU3RyaW5nfk11bHRpTGluZVN0cmluZ30gb3JcbiAqIHtAbGluayBtb2R1bGU6b2wvZ2VvbS9NdWx0aVBvbHlnb25+TXVsdGlQb2x5Z29ufS5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBQT0lOVDogJ3BvaW50JyxcbiAgICBMSU5FOiAnbGluZScsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGV4dFBsYWNlbWVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdHJhbnNmb3JtXG4gKi9cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG4vKipcbiAqIEFuIGFycmF5IHJlcHJlc2VudGluZyBhbiBhZmZpbmUgMmQgdHJhbnNmb3JtYXRpb24gZm9yIHVzZSB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3RyYW5zZm9ybX0gZnVuY3Rpb25zLiBUaGUgYXJyYXkgaGFzIDYgZWxlbWVudHMuXG4gKiBAdHlwZWRlZiB7IUFycmF5PG51bWJlcj59IFRyYW5zZm9ybVxuICogQGFwaVxuICovXG4vKipcbiAqIENvbGxlY3Rpb24gb2YgYWZmaW5lIDJkIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9ucy4gVGhlIGZ1bmN0aW9ucyB3b3JrIG9uIGFuXG4gKiBhcnJheSBvZiA2IGVsZW1lbnRzLiBUaGUgZWxlbWVudCBvcmRlciBpcyBjb21wYXRpYmxlIHdpdGggdGhlIFtTVkdNYXRyaXhcbiAqIGludGVyZmFjZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NWR01hdHJpeCkgYW5kIGlzXG4gKiBhIHN1YnNldCAoZWxlbWVudHMgYSB0byBmKSBvZiBhIDPDlzMgbWF0cml4OlxuICogYGBgXG4gKiBbIGEgYyBlIF1cbiAqIFsgYiBkIGYgXVxuICogWyAwIDAgMSBdXG4gKiBgYGBcbiAqL1xuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHR5cGUge1RyYW5zZm9ybX1cbiAqL1xudmFyIHRtcF8gPSBuZXcgQXJyYXkoNik7XG4vKipcbiAqIENyZWF0ZSBhbiBpZGVudGl0eSB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBJZGVudGl0eSB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgcmV0dXJuIFsxLCAwLCAwLCAxLCAwLCAwXTtcbn1cbi8qKlxuICogUmVzZXRzIHRoZSBnaXZlbiB0cmFuc2Zvcm0gdG8gYW4gaWRlbnRpdHkgdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXQodHJhbnNmb3JtKSB7XG4gICAgcmV0dXJuIHNldCh0cmFuc2Zvcm0sIDEsIDAsIDAsIDEsIDAsIDApO1xufVxuLyoqXG4gKiBNdWx0aXBseSB0aGUgdW5kZXJseWluZyBtYXRyaWNlcyBvZiB0d28gdHJhbnNmb3JtcyBhbmQgcmV0dXJuIHRoZSByZXN1bHQgaW5cbiAqIHRoZSBmaXJzdCB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTEgVHJhbnNmb3JtIHBhcmFtZXRlcnMgb2YgbWF0cml4IDEuXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTIgVHJhbnNmb3JtIHBhcmFtZXRlcnMgb2YgbWF0cml4IDIuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0xIG11bHRpcGxpZWQgd2l0aCB0cmFuc2Zvcm0yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkodHJhbnNmb3JtMSwgdHJhbnNmb3JtMikge1xuICAgIHZhciBhMSA9IHRyYW5zZm9ybTFbMF07XG4gICAgdmFyIGIxID0gdHJhbnNmb3JtMVsxXTtcbiAgICB2YXIgYzEgPSB0cmFuc2Zvcm0xWzJdO1xuICAgIHZhciBkMSA9IHRyYW5zZm9ybTFbM107XG4gICAgdmFyIGUxID0gdHJhbnNmb3JtMVs0XTtcbiAgICB2YXIgZjEgPSB0cmFuc2Zvcm0xWzVdO1xuICAgIHZhciBhMiA9IHRyYW5zZm9ybTJbMF07XG4gICAgdmFyIGIyID0gdHJhbnNmb3JtMlsxXTtcbiAgICB2YXIgYzIgPSB0cmFuc2Zvcm0yWzJdO1xuICAgIHZhciBkMiA9IHRyYW5zZm9ybTJbM107XG4gICAgdmFyIGUyID0gdHJhbnNmb3JtMls0XTtcbiAgICB2YXIgZjIgPSB0cmFuc2Zvcm0yWzVdO1xuICAgIHRyYW5zZm9ybTFbMF0gPSBhMSAqIGEyICsgYzEgKiBiMjtcbiAgICB0cmFuc2Zvcm0xWzFdID0gYjEgKiBhMiArIGQxICogYjI7XG4gICAgdHJhbnNmb3JtMVsyXSA9IGExICogYzIgKyBjMSAqIGQyO1xuICAgIHRyYW5zZm9ybTFbM10gPSBiMSAqIGMyICsgZDEgKiBkMjtcbiAgICB0cmFuc2Zvcm0xWzRdID0gYTEgKiBlMiArIGMxICogZjIgKyBlMTtcbiAgICB0cmFuc2Zvcm0xWzVdID0gYjEgKiBlMiArIGQxICogZjIgKyBmMTtcbiAgICByZXR1cm4gdHJhbnNmb3JtMTtcbn1cbi8qKlxuICogU2V0IHRoZSB0cmFuc2Zvcm0gY29tcG9uZW50cyBhLWYgb24gYSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gYSBUaGUgYSBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiIFRoZSBiIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGMgVGhlIGMgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gZCBUaGUgZCBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlIFRoZSBlIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGYgVGhlIGYgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBNYXRyaXggd2l0aCB0cmFuc2Zvcm0gYXBwbGllZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldCh0cmFuc2Zvcm0sIGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICB0cmFuc2Zvcm1bMF0gPSBhO1xuICAgIHRyYW5zZm9ybVsxXSA9IGI7XG4gICAgdHJhbnNmb3JtWzJdID0gYztcbiAgICB0cmFuc2Zvcm1bM10gPSBkO1xuICAgIHRyYW5zZm9ybVs0XSA9IGU7XG4gICAgdHJhbnNmb3JtWzVdID0gZjtcbiAgICByZXR1cm4gdHJhbnNmb3JtO1xufVxuLyoqXG4gKiBTZXQgdHJhbnNmb3JtIG9uIG9uZSBtYXRyaXggZnJvbSBhbm90aGVyIG1hdHJpeC5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSBNYXRyaXggdG8gc2V0IHRyYW5zZm9ybSB0by5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMiBNYXRyaXggdG8gc2V0IHRyYW5zZm9ybSBmcm9tLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSB3aXRoIHRyYW5zZm9ybSBmcm9tIHRyYW5zZm9ybTIgYXBwbGllZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEZyb21BcnJheSh0cmFuc2Zvcm0xLCB0cmFuc2Zvcm0yKSB7XG4gICAgdHJhbnNmb3JtMVswXSA9IHRyYW5zZm9ybTJbMF07XG4gICAgdHJhbnNmb3JtMVsxXSA9IHRyYW5zZm9ybTJbMV07XG4gICAgdHJhbnNmb3JtMVsyXSA9IHRyYW5zZm9ybTJbMl07XG4gICAgdHJhbnNmb3JtMVszXSA9IHRyYW5zZm9ybTJbM107XG4gICAgdHJhbnNmb3JtMVs0XSA9IHRyYW5zZm9ybTJbNF07XG4gICAgdHJhbnNmb3JtMVs1XSA9IHRyYW5zZm9ybTJbNV07XG4gICAgcmV0dXJuIHRyYW5zZm9ybTE7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIGdpdmVuIGNvb3JkaW5hdGUgd2l0aCB0aGUgZ2l2ZW4gdHJhbnNmb3JtIHJldHVybmluZyB0aGVcbiAqIHJlc3VsdGluZywgdHJhbnNmb3JtZWQgY29vcmRpbmF0ZS4gVGhlIGNvb3JkaW5hdGUgd2lsbCBiZSBtb2RpZmllZCBpbi1wbGFjZS5cbiAqXG4gKiBAcGFyYW0ge1RyYW5zZm9ybX0gdHJhbnNmb3JtIFRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gY29vcmRpbmF0ZSBUaGUgY29vcmRpbmF0ZSB0byB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXxpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSByZXR1cm4gY29vcmRpbmF0ZSBzbyB0aGF0IG9wZXJhdGlvbnMgY2FuIGJlXG4gKiAgICAgY2hhaW5lZCB0b2dldGhlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5KHRyYW5zZm9ybSwgY29vcmRpbmF0ZSkge1xuICAgIHZhciB4ID0gY29vcmRpbmF0ZVswXTtcbiAgICB2YXIgeSA9IGNvb3JkaW5hdGVbMV07XG4gICAgY29vcmRpbmF0ZVswXSA9IHRyYW5zZm9ybVswXSAqIHggKyB0cmFuc2Zvcm1bMl0gKiB5ICsgdHJhbnNmb3JtWzRdO1xuICAgIGNvb3JkaW5hdGVbMV0gPSB0cmFuc2Zvcm1bMV0gKiB4ICsgdHJhbnNmb3JtWzNdICogeSArIHRyYW5zZm9ybVs1XTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cbi8qKlxuICogQXBwbGllcyByb3RhdGlvbiB0byB0aGUgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIEFuZ2xlIGluIHJhZGlhbnMuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgcm90YXRlZCB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGUodHJhbnNmb3JtLCBhbmdsZSkge1xuICAgIHZhciBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgdmFyIHNpbiA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICByZXR1cm4gbXVsdGlwbHkodHJhbnNmb3JtLCBzZXQodG1wXywgY29zLCBzaW4sIC1zaW4sIGNvcywgMCwgMCkpO1xufVxuLyoqXG4gKiBBcHBsaWVzIHNjYWxlIHRvIGEgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IHggU2NhbGUgZmFjdG9yIHguXG4gKiBAcGFyYW0ge251bWJlcn0geSBTY2FsZSBmYWN0b3IgeS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBzY2FsZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUodHJhbnNmb3JtLCB4LCB5KSB7XG4gICAgcmV0dXJuIG11bHRpcGx5KHRyYW5zZm9ybSwgc2V0KHRtcF8sIHgsIDAsIDAsIHksIDAsIDApKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHNjYWxlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdGFyZ2V0IFRyYW5zZm9ybSB0byBvdmVyd3JpdGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBTY2FsZSBmYWN0b3IgeC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFNjYWxlIGZhY3RvciB5LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIHNjYWxlIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VTY2FsZSh0YXJnZXQsIHgsIHkpIHtcbiAgICByZXR1cm4gc2V0KHRhcmdldCwgeCwgMCwgMCwgeSwgMCwgMCk7XG59XG4vKipcbiAqIEFwcGxpZXMgdHJhbnNsYXRpb24gdG8gdGhlIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeCBUcmFuc2xhdGlvbiB4LlxuICogQHBhcmFtIHtudW1iZXJ9IGR5IFRyYW5zbGF0aW9uIHkuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgdHJhbnNsYXRlZCB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUodHJhbnNmb3JtLCBkeCwgZHkpIHtcbiAgICByZXR1cm4gbXVsdGlwbHkodHJhbnNmb3JtLCBzZXQodG1wXywgMSwgMCwgMCwgMSwgZHgsIGR5KSk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBjb21wb3NpdGUgdHJhbnNmb3JtIGdpdmVuIGFuIGluaXRpYWwgdHJhbnNsYXRpb24sIHNjYWxlLCByb3RhdGlvbiwgYW5kXG4gKiBmaW5hbCB0cmFuc2xhdGlvbiAoaW4gdGhhdCBvcmRlciBvbmx5LCBub3QgY29tbXV0YXRpdmUpLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVGhlIHRyYW5zZm9ybSAod2lsbCBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gKiBAcGFyYW0ge251bWJlcn0gZHgxIEluaXRpYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTEgSW5pdGlhbCB0cmFuc2xhdGlvbiB5LlxuICogQHBhcmFtIHtudW1iZXJ9IHN4IFNjYWxlIGZhY3RvciB4LlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciB5LlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIChpbiBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeDIgRmluYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTIgRmluYWwgdHJhbnNsYXRpb24geS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBjb21wb3NpdGUgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcG9zZSh0cmFuc2Zvcm0sIGR4MSwgZHkxLCBzeCwgc3ksIGFuZ2xlLCBkeDIsIGR5Mikge1xuICAgIHZhciBzaW4gPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgdmFyIGNvcyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICB0cmFuc2Zvcm1bMF0gPSBzeCAqIGNvcztcbiAgICB0cmFuc2Zvcm1bMV0gPSBzeSAqIHNpbjtcbiAgICB0cmFuc2Zvcm1bMl0gPSAtc3ggKiBzaW47XG4gICAgdHJhbnNmb3JtWzNdID0gc3kgKiBjb3M7XG4gICAgdHJhbnNmb3JtWzRdID0gZHgyICogc3ggKiBjb3MgLSBkeTIgKiBzeCAqIHNpbiArIGR4MTtcbiAgICB0cmFuc2Zvcm1bNV0gPSBkeDIgKiBzeSAqIHNpbiArIGR5MiAqIHN5ICogY29zICsgZHkxO1xuICAgIHJldHVybiB0cmFuc2Zvcm07XG59XG4vKipcbiAqIENyZWF0ZXMgYSBjb21wb3NpdGUgdHJhbnNmb3JtIGdpdmVuIGFuIGluaXRpYWwgdHJhbnNsYXRpb24sIHNjYWxlLCByb3RhdGlvbiwgYW5kXG4gKiBmaW5hbCB0cmFuc2xhdGlvbiAoaW4gdGhhdCBvcmRlciBvbmx5LCBub3QgY29tbXV0YXRpdmUpLiBUaGUgcmVzdWx0aW5nIHRyYW5zZm9ybVxuICogc3RyaW5nIGNhbiBiZSBhcHBsaWVkIGFzIGB0cmFuc2Zvcm1gIHBvcnBlcnR5IG9mIGFuIEhUTUxFbGVtZW50J3Mgc3R5bGUuXG4gKiBAcGFyYW0ge251bWJlcn0gZHgxIEluaXRpYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTEgSW5pdGlhbCB0cmFuc2xhdGlvbiB5LlxuICogQHBhcmFtIHtudW1iZXJ9IHN4IFNjYWxlIGZhY3RvciB4LlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciB5LlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIChpbiBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeDIgRmluYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTIgRmluYWwgdHJhbnNsYXRpb24geS5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNvbXBvc2l0ZSBjc3MgdHJhbnNmb3JtLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcG9zZUNzc1RyYW5zZm9ybShkeDEsIGR5MSwgc3gsIHN5LCBhbmdsZSwgZHgyLCBkeTIpIHtcbiAgICByZXR1cm4gdG9TdHJpbmcoY29tcG9zZShjcmVhdGUoKSwgZHgxLCBkeTEsIHN4LCBzeSwgYW5nbGUsIGR4MiwgZHkyKSk7XG59XG4vKipcbiAqIEludmVydCB0aGUgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSBzb3VyY2UgVGhlIHNvdXJjZSB0cmFuc2Zvcm0gdG8gaW52ZXJ0LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIGludmVydGVkIChzb3VyY2UpIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludmVydChzb3VyY2UpIHtcbiAgICByZXR1cm4gbWFrZUludmVyc2Uoc291cmNlLCBzb3VyY2UpO1xufVxuLyoqXG4gKiBJbnZlcnQgdGhlIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdGFyZ2V0IFRyYW5zZm9ybSB0byBiZSBzZXQgYXMgdGhlIGludmVyc2Ugb2ZcbiAqICAgICB0aGUgc291cmNlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gc291cmNlIFRoZSBzb3VyY2UgdHJhbnNmb3JtIHRvIGludmVydC5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBpbnZlcnRlZCAodGFyZ2V0KSB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYWtlSW52ZXJzZSh0YXJnZXQsIHNvdXJjZSkge1xuICAgIHZhciBkZXQgPSBkZXRlcm1pbmFudChzb3VyY2UpO1xuICAgIGFzc2VydChkZXQgIT09IDAsIDMyKTsgLy8gVHJhbnNmb3JtYXRpb24gbWF0cml4IGNhbm5vdCBiZSBpbnZlcnRlZFxuICAgIHZhciBhID0gc291cmNlWzBdO1xuICAgIHZhciBiID0gc291cmNlWzFdO1xuICAgIHZhciBjID0gc291cmNlWzJdO1xuICAgIHZhciBkID0gc291cmNlWzNdO1xuICAgIHZhciBlID0gc291cmNlWzRdO1xuICAgIHZhciBmID0gc291cmNlWzVdO1xuICAgIHRhcmdldFswXSA9IGQgLyBkZXQ7XG4gICAgdGFyZ2V0WzFdID0gLWIgLyBkZXQ7XG4gICAgdGFyZ2V0WzJdID0gLWMgLyBkZXQ7XG4gICAgdGFyZ2V0WzNdID0gYSAvIGRldDtcbiAgICB0YXJnZXRbNF0gPSAoYyAqIGYgLSBkICogZSkgLyBkZXQ7XG4gICAgdGFyZ2V0WzVdID0gLShhICogZiAtIGIgKiBlKSAvIGRldDtcbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZXRlcm1pbmFudCBvZiB0aGUgZ2l2ZW4gbWF0cml4LlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSBtYXQgTWF0cml4LlxuICogQHJldHVybiB7bnVtYmVyfSBEZXRlcm1pbmFudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluYW50KG1hdCkge1xuICAgIHJldHVybiBtYXRbMF0gKiBtYXRbM10gLSBtYXRbMV0gKiBtYXRbMl07XG59XG4vKipcbiAqIEEgc3RyaW5nIHZlcnNpb24gb2YgdGhlIHRyYW5zZm9ybS4gIFRoaXMgY2FuIGJlIHVzZWRcbiAqIGZvciBDU1MgdHJhbnNmb3Jtcy5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gbWF0IE1hdHJpeC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHRyYW5zZm9ybSBhcyBhIHN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nKG1hdCkge1xuICAgIHJldHVybiAnbWF0cml4KCcgKyBtYXQuam9pbignLCAnKSArICcpJztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdXRpbFxuICovXG4vKipcbiAqIEByZXR1cm4gez99IEFueSByZXR1cm4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhYnN0cmFjdCgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHs/fSAqLyAoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmltcGxlbWVudGVkIGFic3RyYWN0IG1ldGhvZC4nKTtcbiAgICB9KSgpKTtcbn1cbi8qKlxuICogQ291bnRlciBmb3IgZ2V0VWlkLlxuICogQHR5cGUge251bWJlcn1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciB1aWRDb3VudGVyXyA9IDA7XG4vKipcbiAqIEdldHMgYSB1bmlxdWUgSUQgZm9yIGFuIG9iamVjdC4gVGhpcyBtdXRhdGVzIHRoZSBvYmplY3Qgc28gdGhhdCBmdXJ0aGVyIGNhbGxzXG4gKiB3aXRoIHRoZSBzYW1lIG9iamVjdCBhcyBhIHBhcmFtZXRlciByZXR1cm5zIHRoZSBzYW1lIHZhbHVlLiBVbmlxdWUgSURzIGFyZSBnZW5lcmF0ZWRcbiAqIGFzIGEgc3RyaWN0bHkgaW5jcmVhc2luZyBzZXF1ZW5jZS4gQWRhcHRlZCBmcm9tIGdvb2cuZ2V0VWlkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBnZXQgdGhlIHVuaXF1ZSBJRCBmb3IuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB1bmlxdWUgSUQgZm9yIHRoZSBvYmplY3QuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVaWQob2JqKSB7XG4gICAgcmV0dXJuIG9iai5vbF91aWQgfHwgKG9iai5vbF91aWQgPSBTdHJpbmcoKyt1aWRDb3VudGVyXykpO1xufVxuLyoqXG4gKiBPcGVuTGF5ZXJzIHZlcnNpb24uXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIFZFUlNJT04gPSAnNi41LjAnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbC5qcy5tYXAiLCIhZnVuY3Rpb24odCxpKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1pKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShpKToodD10fHxzZWxmKS5SQnVzaD1pKCl9KHRoaXMsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KHQscixlLGEsaCl7IWZ1bmN0aW9uIHQobixyLGUsYSxoKXtmb3IoO2E+ZTspe2lmKGEtZT42MDApe3ZhciBvPWEtZSsxLHM9ci1lKzEsbD1NYXRoLmxvZyhvKSxmPS41Kk1hdGguZXhwKDIqbC8zKSx1PS41Kk1hdGguc3FydChsKmYqKG8tZikvbykqKHMtby8yPDA/LTE6MSksbT1NYXRoLm1heChlLE1hdGguZmxvb3Ioci1zKmYvbyt1KSksYz1NYXRoLm1pbihhLE1hdGguZmxvb3Iocisoby1zKSpmL28rdSkpO3QobixyLG0sYyxoKX12YXIgcD1uW3JdLGQ9ZSx4PWE7Zm9yKGkobixlLHIpLGgoblthXSxwKT4wJiZpKG4sZSxhKTtkPHg7KXtmb3IoaShuLGQseCksZCsrLHgtLTtoKG5bZF0scCk8MDspZCsrO2Zvcig7aChuW3hdLHApPjA7KXgtLX0wPT09aChuW2VdLHApP2kobixlLHgpOmkobiwrK3gsYSkseDw9ciYmKGU9eCsxKSxyPD14JiYoYT14LTEpfX0odCxyLGV8fDAsYXx8dC5sZW5ndGgtMSxofHxuKX1mdW5jdGlvbiBpKHQsaSxuKXt2YXIgcj10W2ldO3RbaV09dFtuXSx0W25dPXJ9ZnVuY3Rpb24gbih0LGkpe3JldHVybiB0PGk/LTE6dD5pPzE6MH12YXIgcj1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD05KSx0aGlzLl9tYXhFbnRyaWVzPU1hdGgubWF4KDQsdCksdGhpcy5fbWluRW50cmllcz1NYXRoLm1heCgyLE1hdGguY2VpbCguNCp0aGlzLl9tYXhFbnRyaWVzKSksdGhpcy5jbGVhcigpfTtmdW5jdGlvbiBlKHQsaSxuKXtpZighbilyZXR1cm4gaS5pbmRleE9mKHQpO2Zvcih2YXIgcj0wO3I8aS5sZW5ndGg7cisrKWlmKG4odCxpW3JdKSlyZXR1cm4gcjtyZXR1cm4tMX1mdW5jdGlvbiBhKHQsaSl7aCh0LDAsdC5jaGlsZHJlbi5sZW5ndGgsaSx0KX1mdW5jdGlvbiBoKHQsaSxuLHIsZSl7ZXx8KGU9cChudWxsKSksZS5taW5YPTEvMCxlLm1pblk9MS8wLGUubWF4WD0tMS8wLGUubWF4WT0tMS8wO2Zvcih2YXIgYT1pO2E8bjthKyspe3ZhciBoPXQuY2hpbGRyZW5bYV07byhlLHQubGVhZj9yKGgpOmgpfXJldHVybiBlfWZ1bmN0aW9uIG8odCxpKXtyZXR1cm4gdC5taW5YPU1hdGgubWluKHQubWluWCxpLm1pblgpLHQubWluWT1NYXRoLm1pbih0Lm1pblksaS5taW5ZKSx0Lm1heFg9TWF0aC5tYXgodC5tYXhYLGkubWF4WCksdC5tYXhZPU1hdGgubWF4KHQubWF4WSxpLm1heFkpLHR9ZnVuY3Rpb24gcyh0LGkpe3JldHVybiB0Lm1pblgtaS5taW5YfWZ1bmN0aW9uIGwodCxpKXtyZXR1cm4gdC5taW5ZLWkubWluWX1mdW5jdGlvbiBmKHQpe3JldHVybih0Lm1heFgtdC5taW5YKSoodC5tYXhZLXQubWluWSl9ZnVuY3Rpb24gdSh0KXtyZXR1cm4gdC5tYXhYLXQubWluWCsodC5tYXhZLXQubWluWSl9ZnVuY3Rpb24gbSh0LGkpe3JldHVybiB0Lm1pblg8PWkubWluWCYmdC5taW5ZPD1pLm1pblkmJmkubWF4WDw9dC5tYXhYJiZpLm1heFk8PXQubWF4WX1mdW5jdGlvbiBjKHQsaSl7cmV0dXJuIGkubWluWDw9dC5tYXhYJiZpLm1pblk8PXQubWF4WSYmaS5tYXhYPj10Lm1pblgmJmkubWF4WT49dC5taW5ZfWZ1bmN0aW9uIHAodCl7cmV0dXJue2NoaWxkcmVuOnQsaGVpZ2h0OjEsbGVhZjohMCxtaW5YOjEvMCxtaW5ZOjEvMCxtYXhYOi0xLzAsbWF4WTotMS8wfX1mdW5jdGlvbiBkKGksbixyLGUsYSl7Zm9yKHZhciBoPVtuLHJdO2gubGVuZ3RoOylpZighKChyPWgucG9wKCkpLShuPWgucG9wKCkpPD1lKSl7dmFyIG89bitNYXRoLmNlaWwoKHItbikvZS8yKSplO3QoaSxvLG4scixhKSxoLnB1c2gobixvLG8scil9fXJldHVybiByLnByb3RvdHlwZS5hbGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWxsKHRoaXMuZGF0YSxbXSl9LHIucHJvdG90eXBlLnNlYXJjaD1mdW5jdGlvbih0KXt2YXIgaT10aGlzLmRhdGEsbj1bXTtpZighYyh0LGkpKXJldHVybiBuO2Zvcih2YXIgcj10aGlzLnRvQkJveCxlPVtdO2k7KXtmb3IodmFyIGE9MDthPGkuY2hpbGRyZW4ubGVuZ3RoO2ErKyl7dmFyIGg9aS5jaGlsZHJlblthXSxvPWkubGVhZj9yKGgpOmg7Yyh0LG8pJiYoaS5sZWFmP24ucHVzaChoKTptKHQsbyk/dGhpcy5fYWxsKGgsbik6ZS5wdXNoKGgpKX1pPWUucG9wKCl9cmV0dXJuIG59LHIucHJvdG90eXBlLmNvbGxpZGVzPWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuZGF0YTtpZighYyh0LGkpKXJldHVybiExO2Zvcih2YXIgbj1bXTtpOyl7Zm9yKHZhciByPTA7cjxpLmNoaWxkcmVuLmxlbmd0aDtyKyspe3ZhciBlPWkuY2hpbGRyZW5bcl0sYT1pLmxlYWY/dGhpcy50b0JCb3goZSk6ZTtpZihjKHQsYSkpe2lmKGkubGVhZnx8bSh0LGEpKXJldHVybiEwO24ucHVzaChlKX19aT1uLnBvcCgpfXJldHVybiExfSxyLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKHQpe2lmKCF0fHwhdC5sZW5ndGgpcmV0dXJuIHRoaXM7aWYodC5sZW5ndGg8dGhpcy5fbWluRW50cmllcyl7Zm9yKHZhciBpPTA7aTx0Lmxlbmd0aDtpKyspdGhpcy5pbnNlcnQodFtpXSk7cmV0dXJuIHRoaXN9dmFyIG49dGhpcy5fYnVpbGQodC5zbGljZSgpLDAsdC5sZW5ndGgtMSwwKTtpZih0aGlzLmRhdGEuY2hpbGRyZW4ubGVuZ3RoKWlmKHRoaXMuZGF0YS5oZWlnaHQ9PT1uLmhlaWdodCl0aGlzLl9zcGxpdFJvb3QodGhpcy5kYXRhLG4pO2Vsc2V7aWYodGhpcy5kYXRhLmhlaWdodDxuLmhlaWdodCl7dmFyIHI9dGhpcy5kYXRhO3RoaXMuZGF0YT1uLG49cn10aGlzLl9pbnNlcnQobix0aGlzLmRhdGEuaGVpZ2h0LW4uaGVpZ2h0LTEsITApfWVsc2UgdGhpcy5kYXRhPW47cmV0dXJuIHRoaXN9LHIucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdGhpcy5faW5zZXJ0KHQsdGhpcy5kYXRhLmhlaWdodC0xKSx0aGlzfSxyLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGE9cChbXSksdGhpc30sci5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQsaSl7aWYoIXQpcmV0dXJuIHRoaXM7Zm9yKHZhciBuLHIsYSxoPXRoaXMuZGF0YSxvPXRoaXMudG9CQm94KHQpLHM9W10sbD1bXTtofHxzLmxlbmd0aDspe2lmKGh8fChoPXMucG9wKCkscj1zW3MubGVuZ3RoLTFdLG49bC5wb3AoKSxhPSEwKSxoLmxlYWYpe3ZhciBmPWUodCxoLmNoaWxkcmVuLGkpO2lmKC0xIT09ZilyZXR1cm4gaC5jaGlsZHJlbi5zcGxpY2UoZiwxKSxzLnB1c2goaCksdGhpcy5fY29uZGVuc2UocyksdGhpc31hfHxoLmxlYWZ8fCFtKGgsbyk/cj8obisrLGg9ci5jaGlsZHJlbltuXSxhPSExKTpoPW51bGw6KHMucHVzaChoKSxsLnB1c2gobiksbj0wLHI9aCxoPWguY2hpbGRyZW5bMF0pfXJldHVybiB0aGlzfSxyLnByb3RvdHlwZS50b0JCb3g9ZnVuY3Rpb24odCl7cmV0dXJuIHR9LHIucHJvdG90eXBlLmNvbXBhcmVNaW5YPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIHQubWluWC1pLm1pblh9LHIucHJvdG90eXBlLmNvbXBhcmVNaW5ZPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIHQubWluWS1pLm1pbll9LHIucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGF9LHIucHJvdG90eXBlLmZyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRhdGE9dCx0aGlzfSxyLnByb3RvdHlwZS5fYWxsPWZ1bmN0aW9uKHQsaSl7Zm9yKHZhciBuPVtdO3Q7KXQubGVhZj9pLnB1c2guYXBwbHkoaSx0LmNoaWxkcmVuKTpuLnB1c2guYXBwbHkobix0LmNoaWxkcmVuKSx0PW4ucG9wKCk7cmV0dXJuIGl9LHIucHJvdG90eXBlLl9idWlsZD1mdW5jdGlvbih0LGksbixyKXt2YXIgZSxoPW4taSsxLG89dGhpcy5fbWF4RW50cmllcztpZihoPD1vKXJldHVybiBhKGU9cCh0LnNsaWNlKGksbisxKSksdGhpcy50b0JCb3gpLGU7cnx8KHI9TWF0aC5jZWlsKE1hdGgubG9nKGgpL01hdGgubG9nKG8pKSxvPU1hdGguY2VpbChoL01hdGgucG93KG8sci0xKSkpLChlPXAoW10pKS5sZWFmPSExLGUuaGVpZ2h0PXI7dmFyIHM9TWF0aC5jZWlsKGgvbyksbD1zKk1hdGguY2VpbChNYXRoLnNxcnQobykpO2QodCxpLG4sbCx0aGlzLmNvbXBhcmVNaW5YKTtmb3IodmFyIGY9aTtmPD1uO2YrPWwpe3ZhciB1PU1hdGgubWluKGYrbC0xLG4pO2QodCxmLHUscyx0aGlzLmNvbXBhcmVNaW5ZKTtmb3IodmFyIG09ZjttPD11O20rPXMpe3ZhciBjPU1hdGgubWluKG0rcy0xLHUpO2UuY2hpbGRyZW4ucHVzaCh0aGlzLl9idWlsZCh0LG0sYyxyLTEpKX19cmV0dXJuIGEoZSx0aGlzLnRvQkJveCksZX0sci5wcm90b3R5cGUuX2Nob29zZVN1YnRyZWU9ZnVuY3Rpb24odCxpLG4scil7Zm9yKDtyLnB1c2goaSksIWkubGVhZiYmci5sZW5ndGgtMSE9PW47KXtmb3IodmFyIGU9MS8wLGE9MS8wLGg9dm9pZCAwLG89MDtvPGkuY2hpbGRyZW4ubGVuZ3RoO28rKyl7dmFyIHM9aS5jaGlsZHJlbltvXSxsPWYocyksdT0obT10LGM9cywoTWF0aC5tYXgoYy5tYXhYLG0ubWF4WCktTWF0aC5taW4oYy5taW5YLG0ubWluWCkpKihNYXRoLm1heChjLm1heFksbS5tYXhZKS1NYXRoLm1pbihjLm1pblksbS5taW5ZKSktbCk7dTxhPyhhPXUsZT1sPGU/bDplLGg9cyk6dT09PWEmJmw8ZSYmKGU9bCxoPXMpfWk9aHx8aS5jaGlsZHJlblswXX12YXIgbSxjO3JldHVybiBpfSxyLnByb3RvdHlwZS5faW5zZXJ0PWZ1bmN0aW9uKHQsaSxuKXt2YXIgcj1uP3Q6dGhpcy50b0JCb3godCksZT1bXSxhPXRoaXMuX2Nob29zZVN1YnRyZWUocix0aGlzLmRhdGEsaSxlKTtmb3IoYS5jaGlsZHJlbi5wdXNoKHQpLG8oYSxyKTtpPj0wJiZlW2ldLmNoaWxkcmVuLmxlbmd0aD50aGlzLl9tYXhFbnRyaWVzOyl0aGlzLl9zcGxpdChlLGkpLGktLTt0aGlzLl9hZGp1c3RQYXJlbnRCQm94ZXMocixlLGkpfSxyLnByb3RvdHlwZS5fc3BsaXQ9ZnVuY3Rpb24odCxpKXt2YXIgbj10W2ldLHI9bi5jaGlsZHJlbi5sZW5ndGgsZT10aGlzLl9taW5FbnRyaWVzO3RoaXMuX2Nob29zZVNwbGl0QXhpcyhuLGUscik7dmFyIGg9dGhpcy5fY2hvb3NlU3BsaXRJbmRleChuLGUsciksbz1wKG4uY2hpbGRyZW4uc3BsaWNlKGgsbi5jaGlsZHJlbi5sZW5ndGgtaCkpO28uaGVpZ2h0PW4uaGVpZ2h0LG8ubGVhZj1uLmxlYWYsYShuLHRoaXMudG9CQm94KSxhKG8sdGhpcy50b0JCb3gpLGk/dFtpLTFdLmNoaWxkcmVuLnB1c2gobyk6dGhpcy5fc3BsaXRSb290KG4sbyl9LHIucHJvdG90eXBlLl9zcGxpdFJvb3Q9ZnVuY3Rpb24odCxpKXt0aGlzLmRhdGE9cChbdCxpXSksdGhpcy5kYXRhLmhlaWdodD10LmhlaWdodCsxLHRoaXMuZGF0YS5sZWFmPSExLGEodGhpcy5kYXRhLHRoaXMudG9CQm94KX0sci5wcm90b3R5cGUuX2Nob29zZVNwbGl0SW5kZXg9ZnVuY3Rpb24odCxpLG4pe2Zvcih2YXIgcixlLGEsbyxzLGwsdSxtPTEvMCxjPTEvMCxwPWk7cDw9bi1pO3ArKyl7dmFyIGQ9aCh0LDAscCx0aGlzLnRvQkJveCkseD1oKHQscCxuLHRoaXMudG9CQm94KSx2PShlPWQsYT14LG89dm9pZCAwLHM9dm9pZCAwLGw9dm9pZCAwLHU9dm9pZCAwLG89TWF0aC5tYXgoZS5taW5YLGEubWluWCkscz1NYXRoLm1heChlLm1pblksYS5taW5ZKSxsPU1hdGgubWluKGUubWF4WCxhLm1heFgpLHU9TWF0aC5taW4oZS5tYXhZLGEubWF4WSksTWF0aC5tYXgoMCxsLW8pKk1hdGgubWF4KDAsdS1zKSksTT1mKGQpK2YoeCk7djxtPyhtPXYscj1wLGM9TTxjP006Yyk6dj09PW0mJk08YyYmKGM9TSxyPXApfXJldHVybiByfHxuLWl9LHIucHJvdG90eXBlLl9jaG9vc2VTcGxpdEF4aXM9ZnVuY3Rpb24odCxpLG4pe3ZhciByPXQubGVhZj90aGlzLmNvbXBhcmVNaW5YOnMsZT10LmxlYWY/dGhpcy5jb21wYXJlTWluWTpsO3RoaXMuX2FsbERpc3RNYXJnaW4odCxpLG4scik8dGhpcy5fYWxsRGlzdE1hcmdpbih0LGksbixlKSYmdC5jaGlsZHJlbi5zb3J0KHIpfSxyLnByb3RvdHlwZS5fYWxsRGlzdE1hcmdpbj1mdW5jdGlvbih0LGksbixyKXt0LmNoaWxkcmVuLnNvcnQocik7Zm9yKHZhciBlPXRoaXMudG9CQm94LGE9aCh0LDAsaSxlKSxzPWgodCxuLWksbixlKSxsPXUoYSkrdShzKSxmPWk7ZjxuLWk7ZisrKXt2YXIgbT10LmNoaWxkcmVuW2ZdO28oYSx0LmxlYWY/ZShtKTptKSxsKz11KGEpfWZvcih2YXIgYz1uLWktMTtjPj1pO2MtLSl7dmFyIHA9dC5jaGlsZHJlbltjXTtvKHMsdC5sZWFmP2UocCk6cCksbCs9dShzKX1yZXR1cm4gbH0sci5wcm90b3R5cGUuX2FkanVzdFBhcmVudEJCb3hlcz1mdW5jdGlvbih0LGksbil7Zm9yKHZhciByPW47cj49MDtyLS0pbyhpW3JdLHQpfSxyLnByb3RvdHlwZS5fY29uZGVuc2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBpPXQubGVuZ3RoLTEsbj12b2lkIDA7aT49MDtpLS0pMD09PXRbaV0uY2hpbGRyZW4ubGVuZ3RoP2k+MD8obj10W2ktMV0uY2hpbGRyZW4pLnNwbGljZShuLmluZGV4T2YodFtpXSksMSk6dGhpcy5jbGVhcigpOmEodFtpXSx0aGlzLnRvQkJveCl9LHJ9KTtcbiIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvRmVhdHVyZVxuICovXG5pbXBvcnQgQmFzZU9iamVjdCwgeyBnZXRDaGFuZ2VFdmVudFR5cGUgfSBmcm9tICcuL09iamVjdC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi9ldmVudHMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7dHlwZW9mIEZlYXR1cmV8dHlwZW9mIGltcG9ydChcIi4vcmVuZGVyL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gRmVhdHVyZUNsYXNzXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge0ZlYXR1cmV8aW1wb3J0KFwiLi9yZW5kZXIvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBGZWF0dXJlTGlrZVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgdmVjdG9yIG9iamVjdCBmb3IgZ2VvZ3JhcGhpYyBmZWF0dXJlcyB3aXRoIGEgZ2VvbWV0cnkgYW5kIG90aGVyXG4gKiBhdHRyaWJ1dGUgcHJvcGVydGllcywgc2ltaWxhciB0byB0aGUgZmVhdHVyZXMgaW4gdmVjdG9yIGZpbGUgZm9ybWF0cyBsaWtlXG4gKiBHZW9KU09OLlxuICpcbiAqIEZlYXR1cmVzIGNhbiBiZSBzdHlsZWQgaW5kaXZpZHVhbGx5IHdpdGggYHNldFN0eWxlYDsgb3RoZXJ3aXNlIHRoZXkgdXNlIHRoZVxuICogc3R5bGUgb2YgdGhlaXIgdmVjdG9yIGxheWVyLlxuICpcbiAqIE5vdGUgdGhhdCBhdHRyaWJ1dGUgcHJvcGVydGllcyBhcmUgc2V0IGFzIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fSBwcm9wZXJ0aWVzIG9uXG4gKiB0aGUgZmVhdHVyZSBvYmplY3QsIHNvIHRoZXkgYXJlIG9ic2VydmFibGUsIGFuZCBoYXZlIGdldC9zZXQgYWNjZXNzb3JzLlxuICpcbiAqIFR5cGljYWxseSwgYSBmZWF0dXJlIGhhcyBhIHNpbmdsZSBnZW9tZXRyeSBwcm9wZXJ0eS4gWW91IGNhbiBzZXQgdGhlXG4gKiBnZW9tZXRyeSB1c2luZyB0aGUgYHNldEdlb21ldHJ5YCBtZXRob2QgYW5kIGdldCBpdCB3aXRoIGBnZXRHZW9tZXRyeWAuXG4gKiBJdCBpcyBwb3NzaWJsZSB0byBzdG9yZSBtb3JlIHRoYW4gb25lIGdlb21ldHJ5IG9uIGEgZmVhdHVyZSB1c2luZyBhdHRyaWJ1dGVcbiAqIHByb3BlcnRpZXMuIEJ5IGRlZmF1bHQsIHRoZSBnZW9tZXRyeSB1c2VkIGZvciByZW5kZXJpbmcgaXMgaWRlbnRpZmllZCBieVxuICogdGhlIHByb3BlcnR5IG5hbWUgYGdlb21ldHJ5YC4gSWYgeW91IHdhbnQgdG8gdXNlIGFub3RoZXIgZ2VvbWV0cnkgcHJvcGVydHlcbiAqIGZvciByZW5kZXJpbmcsIHVzZSB0aGUgYHNldEdlb21ldHJ5TmFtZWAgbWV0aG9kIHRvIGNoYW5nZSB0aGUgYXR0cmlidXRlXG4gKiBwcm9wZXJ0eSBhc3NvY2lhdGVkIHdpdGggdGhlIGdlb21ldHJ5IGZvciB0aGUgZmVhdHVyZS4gIEZvciBleGFtcGxlOlxuICpcbiAqIGBgYGpzXG4gKlxuICogaW1wb3J0IEZlYXR1cmUgZnJvbSAnb2wvRmVhdHVyZSc7XG4gKiBpbXBvcnQgUG9seWdvbiBmcm9tICdvbC9nZW9tL1BvbHlnb24nO1xuICogaW1wb3J0IFBvaW50IGZyb20gJ29sL2dlb20vUG9pbnQnO1xuICpcbiAqIHZhciBmZWF0dXJlID0gbmV3IEZlYXR1cmUoe1xuICogICBnZW9tZXRyeTogbmV3IFBvbHlnb24ocG9seUNvb3JkcyksXG4gKiAgIGxhYmVsUG9pbnQ6IG5ldyBQb2ludChsYWJlbENvb3JkcyksXG4gKiAgIG5hbWU6ICdNeSBQb2x5Z29uJ1xuICogfSk7XG4gKlxuICogLy8gZ2V0IHRoZSBwb2x5Z29uIGdlb21ldHJ5XG4gKiB2YXIgcG9seSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcbiAqXG4gKiAvLyBSZW5kZXIgdGhlIGZlYXR1cmUgYXMgYSBwb2ludCB1c2luZyB0aGUgY29vcmRpbmF0ZXMgZnJvbSBsYWJlbFBvaW50XG4gKiBmZWF0dXJlLnNldEdlb21ldHJ5TmFtZSgnbGFiZWxQb2ludCcpO1xuICpcbiAqIC8vIGdldCB0aGUgcG9pbnQgZ2VvbWV0cnlcbiAqIHZhciBwb2ludCA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcbiAqIGBgYFxuICpcbiAqIEBhcGlcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5XG4gKi9cbnZhciBGZWF0dXJlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGZWF0dXJlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7R2VvbWV0cnl8T2JqZWN0PHN0cmluZywgKj49fSBvcHRfZ2VvbWV0cnlPclByb3BlcnRpZXNcbiAgICAgKiAgICAgWW91IG1heSBwYXNzIGEgR2VvbWV0cnkgb2JqZWN0IGRpcmVjdGx5LCBvciBhbiBvYmplY3QgbGl0ZXJhbCBjb250YWluaW5nXG4gICAgICogICAgIHByb3BlcnRpZXMuIElmIHlvdSBwYXNzIGFuIG9iamVjdCBsaXRlcmFsLCB5b3UgbWF5IGluY2x1ZGUgYSBHZW9tZXRyeVxuICAgICAqICAgICBhc3NvY2lhdGVkIHdpdGggYSBgZ2VvbWV0cnlgIGtleS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBGZWF0dXJlKG9wdF9nZW9tZXRyeU9yUHJvcGVydGllcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnxzdHJpbmd8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaWRfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmdlb21ldHJ5TmFtZV8gPSAnZ2VvbWV0cnknO1xuICAgICAgICAvKipcbiAgICAgICAgICogVXNlciBwcm92aWRlZCBzdHlsZS5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVMaWtlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3R5bGVfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlRnVuY3Rpb258dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3R5bGVGdW5jdGlvbl8gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmdlb21ldHJ5Q2hhbmdlS2V5XyA9IG51bGw7XG4gICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoZ2V0Q2hhbmdlRXZlbnRUeXBlKF90aGlzLmdlb21ldHJ5TmFtZV8pLCBfdGhpcy5oYW5kbGVHZW9tZXRyeUNoYW5nZWRfKTtcbiAgICAgICAgaWYgKG9wdF9nZW9tZXRyeU9yUHJvcGVydGllcykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiAoXG4gICAgICAgICAgICAvKiogQHR5cGUgez99ICovIChvcHRfZ2VvbWV0cnlPclByb3BlcnRpZXMpLmdldFNpbXBsaWZpZWRHZW9tZXRyeSkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSAvKiogQHR5cGUge0dlb21ldHJ5fSAqLyAob3B0X2dlb21ldHJ5T3JQcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRHZW9tZXRyeShnZW9tZXRyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUge09iamVjdDxzdHJpbmcsICo+fSAqL1xuICAgICAgICAgICAgICAgIHZhciBwcm9wZXJ0aWVzID0gb3B0X2dlb21ldHJ5T3JQcm9wZXJ0aWVzO1xuICAgICAgICAgICAgICAgIF90aGlzLnNldFByb3BlcnRpZXMocHJvcGVydGllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9uZSB0aGlzIGZlYXR1cmUuIElmIHRoZSBvcmlnaW5hbCBmZWF0dXJlIGhhcyBhIGdlb21ldHJ5IGl0XG4gICAgICogaXMgYWxzbyBjbG9uZWQuIFRoZSBmZWF0dXJlIGlkIGlzIG5vdCBzZXQgaW4gdGhlIGNsb25lLlxuICAgICAqIEByZXR1cm4ge0ZlYXR1cmV9IFRoZSBjbG9uZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgRmVhdHVyZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjbG9uZSA9IG5ldyBGZWF0dXJlKHRoaXMuaGFzUHJvcGVydGllcygpID8gdGhpcy5nZXRQcm9wZXJ0aWVzKCkgOiBudWxsKTtcbiAgICAgICAgY2xvbmUuc2V0R2VvbWV0cnlOYW1lKHRoaXMuZ2V0R2VvbWV0cnlOYW1lKCkpO1xuICAgICAgICB2YXIgZ2VvbWV0cnkgPSB0aGlzLmdldEdlb21ldHJ5KCk7XG4gICAgICAgIGlmIChnZW9tZXRyeSkge1xuICAgICAgICAgICAgY2xvbmUuc2V0R2VvbWV0cnkoZ2VvbWV0cnkuY2xvbmUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0eWxlID0gdGhpcy5nZXRTdHlsZSgpO1xuICAgICAgICBpZiAoc3R5bGUpIHtcbiAgICAgICAgICAgIGNsb25lLnNldFN0eWxlKHN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xvbmU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGZlYXR1cmUncyBkZWZhdWx0IGdlb21ldHJ5LiAgQSBmZWF0dXJlIG1heSBoYXZlIGFueSBudW1iZXIgb2YgbmFtZWRcbiAgICAgKiBnZW9tZXRyaWVzLiAgVGhlIFwiZGVmYXVsdFwiIGdlb21ldHJ5ICh0aGUgb25lIHRoYXQgaXMgcmVuZGVyZWQgYnkgZGVmYXVsdCkgaXNcbiAgICAgKiBzZXQgd2hlbiBjYWxsaW5nIHtAbGluayBtb2R1bGU6b2wvRmVhdHVyZX5GZWF0dXJlI3NldEdlb21ldHJ5fS5cbiAgICAgKiBAcmV0dXJuIHtHZW9tZXRyeXx1bmRlZmluZWR9IFRoZSBkZWZhdWx0IGdlb21ldHJ5IGZvciB0aGUgZmVhdHVyZS5cbiAgICAgKiBAYXBpXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKi9cbiAgICBGZWF0dXJlLnByb3RvdHlwZS5nZXRHZW9tZXRyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7R2VvbWV0cnl8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQodGhpcy5nZW9tZXRyeU5hbWVfKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGZlYXR1cmUgaWRlbnRpZmllci4gIFRoaXMgaXMgYSBzdGFibGUgaWRlbnRpZmllciBmb3IgdGhlIGZlYXR1cmUgYW5kXG4gICAgICogaXMgZWl0aGVyIHNldCB3aGVuIHJlYWRpbmcgZGF0YSBmcm9tIGEgcmVtb3RlIHNvdXJjZSBvciBzZXQgZXhwbGljaXRseSBieVxuICAgICAqIGNhbGxpbmcge0BsaW5rIG1vZHVsZTpvbC9GZWF0dXJlfkZlYXR1cmUjc2V0SWR9LlxuICAgICAqIEByZXR1cm4ge251bWJlcnxzdHJpbmd8dW5kZWZpbmVkfSBJZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgRmVhdHVyZS5wcm90b3R5cGUuZ2V0SWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbmFtZSBvZiB0aGUgZmVhdHVyZSdzIGRlZmF1bHQgZ2VvbWV0cnkuICBCeSBkZWZhdWx0LCB0aGUgZGVmYXVsdFxuICAgICAqIGdlb21ldHJ5IGlzIG5hbWVkIGBnZW9tZXRyeWAuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBHZXQgdGhlIHByb3BlcnR5IG5hbWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBkZWZhdWx0IGdlb21ldHJ5XG4gICAgICogICAgIGZvciB0aGlzIGZlYXR1cmUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEZlYXR1cmUucHJvdG90eXBlLmdldEdlb21ldHJ5TmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VvbWV0cnlOYW1lXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZmVhdHVyZSdzIHN0eWxlLiBXaWxsIHJldHVybiB3aGF0IHdhcyBwcm92aWRlZCB0byB0aGVcbiAgICAgKiB7QGxpbmsgbW9kdWxlOm9sL0ZlYXR1cmV+RmVhdHVyZSNzZXRTdHlsZX0gbWV0aG9kLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVMaWtlfHVuZGVmaW5lZH0gVGhlIGZlYXR1cmUgc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEZlYXR1cmUucHJvdG90eXBlLmdldFN0eWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHlsZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGZlYXR1cmUncyBzdHlsZSBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlRnVuY3Rpb258dW5kZWZpbmVkfSBSZXR1cm4gYSBmdW5jdGlvblxuICAgICAqIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBzdHlsZSBvZiB0aGlzIGZlYXR1cmUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEZlYXR1cmUucHJvdG90eXBlLmdldFN0eWxlRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0eWxlRnVuY3Rpb25fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBGZWF0dXJlLnByb3RvdHlwZS5oYW5kbGVHZW9tZXRyeUNoYW5nZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBGZWF0dXJlLnByb3RvdHlwZS5oYW5kbGVHZW9tZXRyeUNoYW5nZWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5nZW9tZXRyeUNoYW5nZUtleV8pIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5nZW9tZXRyeUNoYW5nZUtleV8pO1xuICAgICAgICAgICAgdGhpcy5nZW9tZXRyeUNoYW5nZUtleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBnZW9tZXRyeSA9IHRoaXMuZ2V0R2VvbWV0cnkoKTtcbiAgICAgICAgaWYgKGdlb21ldHJ5KSB7XG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5Q2hhbmdlS2V5XyA9IGxpc3RlbihnZW9tZXRyeSwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVHZW9tZXRyeUNoYW5nZV8sIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBkZWZhdWx0IGdlb21ldHJ5IGZvciB0aGUgZmVhdHVyZS4gIFRoaXMgd2lsbCB1cGRhdGUgdGhlIHByb3BlcnR5XG4gICAgICogd2l0aCB0aGUgbmFtZSByZXR1cm5lZCBieSB7QGxpbmsgbW9kdWxlOm9sL0ZlYXR1cmV+RmVhdHVyZSNnZXRHZW9tZXRyeU5hbWV9LlxuICAgICAqIEBwYXJhbSB7R2VvbWV0cnl8dW5kZWZpbmVkfSBnZW9tZXRyeSBUaGUgbmV3IGdlb21ldHJ5LlxuICAgICAqIEBhcGlcbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIEZlYXR1cmUucHJvdG90eXBlLnNldEdlb21ldHJ5ID0gZnVuY3Rpb24gKGdlb21ldHJ5KSB7XG4gICAgICAgIHRoaXMuc2V0KHRoaXMuZ2VvbWV0cnlOYW1lXywgZ2VvbWV0cnkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzdHlsZSBmb3IgdGhlIGZlYXR1cmUgdG8gb3ZlcnJpZGUgdGhlIGxheWVyIHN0eWxlLiAgVGhpcyBjYW4gYmUgYVxuICAgICAqIHNpbmdsZSBzdHlsZSBvYmplY3QsIGFuIGFycmF5IG9mIHN0eWxlcywgb3IgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGFcbiAgICAgKiByZXNvbHV0aW9uIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIHN0eWxlcy4gVG8gdW5zZXQgdGhlIGZlYXR1cmUgc3R5bGUsIGNhbGxcbiAgICAgKiBgc2V0U3R5bGUoKWAgd2l0aG91dCBhcmd1bWVudHMgb3IgYSBmYWxzZXkgdmFsdWUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlTGlrZT19IG9wdF9zdHlsZSBTdHlsZSBmb3IgdGhpcyBmZWF0dXJlLlxuICAgICAqIEBhcGlcbiAgICAgKiBAZmlyZXMgbW9kdWxlOm9sL2V2ZW50cy9FdmVudH5CYXNlRXZlbnQjZXZlbnQ6Y2hhbmdlXG4gICAgICovXG4gICAgRmVhdHVyZS5wcm90b3R5cGUuc2V0U3R5bGUgPSBmdW5jdGlvbiAob3B0X3N0eWxlKSB7XG4gICAgICAgIHRoaXMuc3R5bGVfID0gb3B0X3N0eWxlO1xuICAgICAgICB0aGlzLnN0eWxlRnVuY3Rpb25fID0gIW9wdF9zdHlsZVxuICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgIDogY3JlYXRlU3R5bGVGdW5jdGlvbihvcHRfc3R5bGUpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZmVhdHVyZSBpZC4gIFRoZSBmZWF0dXJlIGlkIGlzIGNvbnNpZGVyZWQgc3RhYmxlIGFuZCBtYXkgYmUgdXNlZCB3aGVuXG4gICAgICogcmVxdWVzdGluZyBmZWF0dXJlcyBvciBjb21wYXJpbmcgaWRlbnRpZmllcnMgcmV0dXJuZWQgZnJvbSBhIHJlbW90ZSBzb3VyY2UuXG4gICAgICogVGhlIGZlYXR1cmUgaWQgY2FuIGJlIHVzZWQgd2l0aCB0aGVcbiAgICAgKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J+VmVjdG9yU291cmNlI2dldEZlYXR1cmVCeUlkfSBtZXRob2QuXG4gICAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfHVuZGVmaW5lZH0gaWQgVGhlIGZlYXR1cmUgaWQuXG4gICAgICogQGFwaVxuICAgICAqIEBmaXJlcyBtb2R1bGU6b2wvZXZlbnRzL0V2ZW50fkJhc2VFdmVudCNldmVudDpjaGFuZ2VcbiAgICAgKi9cbiAgICBGZWF0dXJlLnByb3RvdHlwZS5zZXRJZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICB0aGlzLmlkXyA9IGlkO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcHJvcGVydHkgbmFtZSB0byBiZSB1c2VkIHdoZW4gZ2V0dGluZyB0aGUgZmVhdHVyZSdzIGRlZmF1bHQgZ2VvbWV0cnkuXG4gICAgICogV2hlbiBjYWxsaW5nIHtAbGluayBtb2R1bGU6b2wvRmVhdHVyZX5GZWF0dXJlI2dldEdlb21ldHJ5fSwgdGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSB3aXRoXG4gICAgICogdGhpcyBuYW1lIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIHByb3BlcnR5IG5hbWUgb2YgdGhlIGRlZmF1bHQgZ2VvbWV0cnkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEZlYXR1cmUucHJvdG90eXBlLnNldEdlb21ldHJ5TmFtZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihnZXRDaGFuZ2VFdmVudFR5cGUodGhpcy5nZW9tZXRyeU5hbWVfKSwgdGhpcy5oYW5kbGVHZW9tZXRyeUNoYW5nZWRfKTtcbiAgICAgICAgdGhpcy5nZW9tZXRyeU5hbWVfID0gbmFtZTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGdldENoYW5nZUV2ZW50VHlwZSh0aGlzLmdlb21ldHJ5TmFtZV8pLCB0aGlzLmhhbmRsZUdlb21ldHJ5Q2hhbmdlZF8pO1xuICAgICAgICB0aGlzLmhhbmRsZUdlb21ldHJ5Q2hhbmdlZF8oKTtcbiAgICB9O1xuICAgIHJldHVybiBGZWF0dXJlO1xufShCYXNlT2JqZWN0KSk7XG4vKipcbiAqIENvbnZlcnQgdGhlIHByb3ZpZGVkIG9iamVjdCBpbnRvIGEgZmVhdHVyZSBzdHlsZSBmdW5jdGlvbi4gIEZ1bmN0aW9ucyBwYXNzZWRcbiAqIHRocm91Z2ggdW5jaGFuZ2VkLiAgQXJyYXlzIG9mIFN0eWxlIG9yIHNpbmdsZSBzdHlsZSBvYmplY3RzIHdyYXBwZWRcbiAqIGluIGEgbmV3IGZlYXR1cmUgc3R5bGUgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyFpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlRnVuY3Rpb258IUFycmF5PGltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdD58IWltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gb2JqXG4gKiAgICAgQSBmZWF0dXJlIHN0eWxlIGZ1bmN0aW9uLCBhIHNpbmdsZSBzdHlsZSwgb3IgYW4gYXJyYXkgb2Ygc3R5bGVzLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUZ1bmN0aW9ufSBBIHN0eWxlIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3R5bGVGdW5jdGlvbihvYmopIHtcbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHN0eWxlc18xO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgICAgICBzdHlsZXNfMSA9IG9iajtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydCh0eXBlb2YgKCAvKiogQHR5cGUgez99ICovKG9iaikuZ2V0WkluZGV4KSA9PT0gJ2Z1bmN0aW9uJywgNDEpOyAvLyBFeHBlY3RlZCBhbiBgaW1wb3J0KFwiLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZWAgb3IgYW4gYXJyYXkgb2YgYGltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVgXG4gICAgICAgICAgICB2YXIgc3R5bGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gKi8gKG9iaik7XG4gICAgICAgICAgICBzdHlsZXNfMSA9IFtzdHlsZV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHlsZXNfMTtcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBGZWF0dXJlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RmVhdHVyZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvT3ZlcmxheVBvc2l0aW9uaW5nXG4gKi9cbi8qKlxuICogT3ZlcmxheSBwb3NpdGlvbjogYCdib3R0b20tbGVmdCdgLCBgJ2JvdHRvbS1jZW50ZXInYCwgIGAnYm90dG9tLXJpZ2h0J2AsXG4gKiBgJ2NlbnRlci1sZWZ0J2AsIGAnY2VudGVyLWNlbnRlcidgLCBgJ2NlbnRlci1yaWdodCdgLCBgJ3RvcC1sZWZ0J2AsXG4gKiBgJ3RvcC1jZW50ZXInYCwgYCd0b3AtcmlnaHQnYFxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIEJPVFRPTV9MRUZUOiAnYm90dG9tLWxlZnQnLFxuICAgIEJPVFRPTV9DRU5URVI6ICdib3R0b20tY2VudGVyJyxcbiAgICBCT1RUT01fUklHSFQ6ICdib3R0b20tcmlnaHQnLFxuICAgIENFTlRFUl9MRUZUOiAnY2VudGVyLWxlZnQnLFxuICAgIENFTlRFUl9DRU5URVI6ICdjZW50ZXItY2VudGVyJyxcbiAgICBDRU5URVJfUklHSFQ6ICdjZW50ZXItcmlnaHQnLFxuICAgIFRPUF9MRUZUOiAndG9wLWxlZnQnLFxuICAgIFRPUF9DRU5URVI6ICd0b3AtY2VudGVyJyxcbiAgICBUT1BfUklHSFQ6ICd0b3AtcmlnaHQnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU92ZXJsYXlQb3NpdGlvbmluZy5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL092ZXJsYXlcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QsIHsgZ2V0Q2hhbmdlRXZlbnRUeXBlIH0gZnJvbSAnLi9PYmplY3QuanMnO1xuaW1wb3J0IE1hcEV2ZW50VHlwZSBmcm9tICcuL01hcEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgT3ZlcmxheVBvc2l0aW9uaW5nIGZyb20gJy4vT3ZlcmxheVBvc2l0aW9uaW5nLmpzJztcbmltcG9ydCB7IENMQVNTX1NFTEVDVEFCTEUgfSBmcm9tICcuL2Nzcy5qcyc7XG5pbXBvcnQgeyBjb250YWluc0V4dGVudCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4vZXZlbnRzLmpzJztcbmltcG9ydCB7IG91dGVySGVpZ2h0LCBvdXRlcldpZHRoLCByZW1vdmVDaGlsZHJlbiwgcmVtb3ZlTm9kZSB9IGZyb20gJy4vZG9tLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ8c3RyaW5nfSBbaWRdIFNldCB0aGUgb3ZlcmxheSBpZC4gVGhlIG92ZXJsYXkgaWQgY2FuIGJlIHVzZWRcbiAqIHdpdGggdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcCNnZXRPdmVybGF5QnlJZH0gbWV0aG9kLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudH0gW2VsZW1lbnRdIFRoZSBvdmVybGF5IGVsZW1lbnQuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtvZmZzZXQ9WzAsIDBdXSBPZmZzZXRzIGluIHBpeGVscyB1c2VkIHdoZW4gcG9zaXRpb25pbmdcbiAqIHRoZSBvdmVybGF5LiBUaGUgZmlyc3QgZWxlbWVudCBpbiB0aGVcbiAqIGFycmF5IGlzIHRoZSBob3Jpem9udGFsIG9mZnNldC4gQSBwb3NpdGl2ZSB2YWx1ZSBzaGlmdHMgdGhlIG92ZXJsYXkgcmlnaHQuXG4gKiBUaGUgc2Vjb25kIGVsZW1lbnQgaW4gdGhlIGFycmF5IGlzIHRoZSB2ZXJ0aWNhbCBvZmZzZXQuIEEgcG9zaXRpdmUgdmFsdWVcbiAqIHNoaWZ0cyB0aGUgb3ZlcmxheSBkb3duLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW3Bvc2l0aW9uXSBUaGUgb3ZlcmxheSBwb3NpdGlvblxuICogaW4gbWFwIHByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vT3ZlcmxheVBvc2l0aW9uaW5nLmpzXCIpLmRlZmF1bHR9IFtwb3NpdGlvbmluZz0ndG9wLWxlZnQnXSBEZWZpbmVzIGhvd1xuICogdGhlIG92ZXJsYXkgaXMgYWN0dWFsbHkgcG9zaXRpb25lZCB3aXRoIHJlc3BlY3QgdG8gaXRzIGBwb3NpdGlvbmAgcHJvcGVydHkuXG4gKiBQb3NzaWJsZSB2YWx1ZXMgYXJlIGAnYm90dG9tLWxlZnQnYCwgYCdib3R0b20tY2VudGVyJ2AsIGAnYm90dG9tLXJpZ2h0J2AsXG4gKiBgJ2NlbnRlci1sZWZ0J2AsIGAnY2VudGVyLWNlbnRlcidgLCBgJ2NlbnRlci1yaWdodCdgLCBgJ3RvcC1sZWZ0J2AsXG4gKiBgJ3RvcC1jZW50ZXInYCwgYW5kIGAndG9wLXJpZ2h0J2AuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzdG9wRXZlbnQ9dHJ1ZV0gV2hldGhlciBldmVudCBwcm9wYWdhdGlvbiB0byB0aGUgbWFwXG4gKiB2aWV3cG9ydCBzaG91bGQgYmUgc3RvcHBlZC4gSWYgYHRydWVgIHRoZSBvdmVybGF5IGlzIHBsYWNlZCBpbiB0aGUgc2FtZVxuICogY29udGFpbmVyIGFzIHRoYXQgb2YgdGhlIGNvbnRyb2xzIChDU1MgY2xhc3MgbmFtZVxuICogYG9sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50YCk7IGlmIGBmYWxzZWAgaXQgaXMgcGxhY2VkIGluIHRoZSBjb250YWluZXJcbiAqIHdpdGggQ1NTIGNsYXNzIG5hbWUgc3BlY2lmaWVkIGJ5IHRoZSBgY2xhc3NOYW1lYCBwcm9wZXJ0eS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2luc2VydEZpcnN0PXRydWVdIFdoZXRoZXIgdGhlIG92ZXJsYXkgaXMgaW5zZXJ0ZWQgZmlyc3RcbiAqIGluIHRoZSBvdmVybGF5IGNvbnRhaW5lciwgb3IgYXBwZW5kZWQuIElmIHRoZSBvdmVybGF5IGlzIHBsYWNlZCBpbiB0aGUgc2FtZVxuICogY29udGFpbmVyIGFzIHRoYXQgb2YgdGhlIGNvbnRyb2xzIChzZWUgdGhlIGBzdG9wRXZlbnRgIG9wdGlvbikgeW91IHdpbGxcbiAqIHByb2JhYmx5IHNldCBgaW5zZXJ0Rmlyc3RgIHRvIGB0cnVlYCBzbyB0aGUgb3ZlcmxheSBpcyBkaXNwbGF5ZWQgYmVsb3cgdGhlXG4gKiBjb250cm9scy5cbiAqIEBwcm9wZXJ0eSB7UGFuSW50b1ZpZXdPcHRpb25zfGJvb2xlYW59IFthdXRvUGFuPWZhbHNlXSBQYW4gdGhlIG1hcCB3aGVuIGNhbGxpbmdcbiAqIGBzZXRQb3NpdGlvbmAsIHNvIHRoYXQgdGhlIG92ZXJsYXkgaXMgZW50aXJlbHkgdmlzaWJsZSBpbiB0aGUgY3VycmVudCB2aWV3cG9ydD9cbiAqIElmIGB0cnVlYCAoZGVwcmVjYXRlZCksIHRoZW4gYGF1dG9QYW5BbmltYXRpb25gIGFuZCBgYXV0b1Bhbk1hcmdpbmAgd2lsbCBiZVxuICogdXNlZCB0byBkZXRlcm1pbmUgdGhlIHBhbm5pbmcgcGFyYW1ldGVyczsgaWYgYW4gb2JqZWN0IGlzIHN1cHBsaWVkIHRoZW4gb3RoZXJcbiAqIHBhcmFtZXRlcnMgYXJlIGlnbm9yZWQuXG4gKiBAcHJvcGVydHkge1Bhbk9wdGlvbnN9IFthdXRvUGFuQW5pbWF0aW9uXSBUaGUgYW5pbWF0aW9uIG9wdGlvbnMgdXNlZCB0byBwYW5cbiAqIHRoZSBvdmVybGF5IGludG8gdmlldy4gVGhpcyBhbmltYXRpb24gaXMgb25seSB1c2VkIHdoZW4gYGF1dG9QYW5gIGlzIGVuYWJsZWQuXG4gKiBBIGBkdXJhdGlvbmAgYW5kIGBlYXNpbmdgIG1heSBiZSBwcm92aWRlZCB0byBjdXN0b21pemUgdGhlIGFuaW1hdGlvbi5cbiAqIERlcHJlY2F0ZWQgYW5kIGlnbm9yZWQgaWYgYGF1dG9QYW5gIGlzIHN1cHBsaWVkIGFzIGFuIG9iamVjdC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbYXV0b1Bhbk1hcmdpbj0yMF0gVGhlIG1hcmdpbiAoaW4gcGl4ZWxzKSBiZXR3ZWVuIHRoZVxuICogb3ZlcmxheSBhbmQgdGhlIGJvcmRlcnMgb2YgdGhlIG1hcCB3aGVuIGF1dG9wYW5uaW5nLiBEZXByZWNhdGVkIGFuZCBpZ25vcmVkXG4gKiBpZiBgYXV0b1BhbmAgaXMgc3VwcGxpZWQgYXMgYW4gb2JqZWN0LlxuICogQHByb3BlcnR5IHtQYW5JbnRvVmlld09wdGlvbnN9IFthdXRvUGFuT3B0aW9uc10gVGhlIG9wdGlvbnMgdG8gdXNlIGZvciB0aGVcbiAqIGF1dG9QYW4uIFRoaXMgaXMgb25seSB1c2VkIHdoZW4gYGF1dG9QYW5gIGlzIGVuYWJsZWQgYW5kIGhhcyBwcmVmZXJlbmNlIG92ZXJcbiAqIHRoZSBpbmRpdmlkdWFsIGBhdXRvUGFuTWFyZ2luYCBhbmQgYGF1dG9QYW5PcHRpb25zYC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1vdmVybGF5LWNvbnRhaW5lciBvbC1zZWxlY3RhYmxlJ10gQ1NTIGNsYXNzXG4gKiBuYW1lLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFBhbk9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MTAwMF0gVGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gaW5cbiAqIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyKTpudW1iZXJ9IFtlYXNpbmddIFRoZSBlYXNpbmcgZnVuY3Rpb24gdG8gdXNlLiBDYW5cbiAqIGJlIG9uZSBmcm9tIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nfSBvciBhIGN1c3RvbSBmdW5jdGlvbi5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmd+aW5BbmRPdXR9LlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFBhbkludG9WaWV3T3B0aW9uc1xuICogQHByb3BlcnR5IHtQYW5PcHRpb25zfSBbYW5pbWF0aW9uPXt9XSBUaGUgYW5pbWF0aW9uIHBhcmFtZXRlcnMgZm9yIHRoZSBwYW5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWFyZ2luPTIwXSBUaGUgbWFyZ2luIChpbiBwaXhlbHMpIGJldHdlZW4gdGhlXG4gKiBvdmVybGF5IGFuZCB0aGUgYm9yZGVycyBvZiB0aGUgbWFwIHdoZW4gcGFubmluZyBpbnRvIHZpZXcuXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBwcm90ZWN0ZWRcbiAqL1xudmFyIFByb3BlcnR5ID0ge1xuICAgIEVMRU1FTlQ6ICdlbGVtZW50JyxcbiAgICBNQVA6ICdtYXAnLFxuICAgIE9GRlNFVDogJ29mZnNldCcsXG4gICAgUE9TSVRJT046ICdwb3NpdGlvbicsXG4gICAgUE9TSVRJT05JTkc6ICdwb3NpdGlvbmluZycsXG59O1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbiBlbGVtZW50IHRvIGJlIGRpc3BsYXllZCBvdmVyIHRoZSBtYXAgYW5kIGF0dGFjaGVkIHRvIGEgc2luZ2xlIG1hcFxuICogbG9jYXRpb24uICBMaWtlIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9Db250cm9sfkNvbnRyb2x9LCBPdmVybGF5cyBhcmVcbiAqIHZpc2libGUgd2lkZ2V0cy4gVW5saWtlIENvbnRyb2xzLCB0aGV5IGFyZSBub3QgaW4gYSBmaXhlZCBwb3NpdGlvbiBvbiB0aGVcbiAqIHNjcmVlbiwgYnV0IGFyZSB0aWVkIHRvIGEgZ2VvZ3JhcGhpY2FsIGNvb3JkaW5hdGUsIHNvIHBhbm5pbmcgdGhlIG1hcCB3aWxsXG4gKiBtb3ZlIGFuIE92ZXJsYXkgYnV0IG5vdCBhIENvbnRyb2wuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgaW1wb3J0IE92ZXJsYXkgZnJvbSAnb2wvT3ZlcmxheSc7XG4gKlxuICogICAgIHZhciBwb3B1cCA9IG5ldyBPdmVybGF5KHtcbiAqICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cCcpXG4gKiAgICAgfSk7XG4gKiAgICAgcG9wdXAuc2V0UG9zaXRpb24oY29vcmRpbmF0ZSk7XG4gKiAgICAgbWFwLmFkZE92ZXJsYXkocG9wdXApO1xuICpcbiAqIEBhcGlcbiAqL1xudmFyIE92ZXJsYXkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE92ZXJsYXksIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIE92ZXJsYXkgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBPdmVybGF5KG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge09wdGlvbnN9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcnxzdHJpbmd8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaWQgPSBvcHRpb25zLmlkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmluc2VydEZpcnN0ID1cbiAgICAgICAgICAgIG9wdGlvbnMuaW5zZXJ0Rmlyc3QgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaW5zZXJ0Rmlyc3QgOiB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0b3BFdmVudCA9IG9wdGlvbnMuc3RvcEV2ZW50ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnN0b3BFdmVudCA6IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgX3RoaXMuZWxlbWVudC5jbGFzc05hbWUgPVxuICAgICAgICAgICAgb3B0aW9ucy5jbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jbGFzc05hbWVcbiAgICAgICAgICAgICAgICA6ICdvbC1vdmVybGF5LWNvbnRhaW5lciAnICsgQ0xBU1NfU0VMRUNUQUJMRTtcbiAgICAgICAgX3RoaXMuZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIF90aGlzLmVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJztcbiAgICAgICAgdmFyIGF1dG9QYW4gPSBvcHRpb25zLmF1dG9QYW47XG4gICAgICAgIGlmIChhdXRvUGFuICYmICdvYmplY3QnICE9PSB0eXBlb2YgYXV0b1Bhbikge1xuICAgICAgICAgICAgYXV0b1BhbiA9IHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb246IG9wdGlvbnMuYXV0b1BhbkFuaW1hdGlvbixcbiAgICAgICAgICAgICAgICBtYXJnaW46IG9wdGlvbnMuYXV0b1Bhbk1hcmdpbixcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge1BhbkludG9WaWV3T3B0aW9uc3xmYWxzZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmF1dG9QYW4gPSAvKiogQHR5cGUge1BhbkludG9WaWV3T3B0aW9uc30gKi8gKGF1dG9QYW4pIHx8IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7e3RyYW5zZm9ybV86IHN0cmluZyxcbiAgICAgICAgICogICAgICAgICB2aXNpYmxlOiBib29sZWFufX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkID0ge1xuICAgICAgICAgICAgdHJhbnNmb3JtXzogJycsXG4gICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcFBvc3RyZW5kZXJMaXN0ZW5lcktleSA9IG51bGw7XG4gICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoZ2V0Q2hhbmdlRXZlbnRUeXBlKFByb3BlcnR5LkVMRU1FTlQpLCBfdGhpcy5oYW5kbGVFbGVtZW50Q2hhbmdlZCk7XG4gICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoZ2V0Q2hhbmdlRXZlbnRUeXBlKFByb3BlcnR5Lk1BUCksIF90aGlzLmhhbmRsZU1hcENoYW5nZWQpO1xuICAgICAgICBfdGhpcy5hZGRFdmVudExpc3RlbmVyKGdldENoYW5nZUV2ZW50VHlwZShQcm9wZXJ0eS5PRkZTRVQpLCBfdGhpcy5oYW5kbGVPZmZzZXRDaGFuZ2VkKTtcbiAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihnZXRDaGFuZ2VFdmVudFR5cGUoUHJvcGVydHkuUE9TSVRJT04pLCBfdGhpcy5oYW5kbGVQb3NpdGlvbkNoYW5nZWQpO1xuICAgICAgICBfdGhpcy5hZGRFdmVudExpc3RlbmVyKGdldENoYW5nZUV2ZW50VHlwZShQcm9wZXJ0eS5QT1NJVElPTklORyksIF90aGlzLmhhbmRsZVBvc2l0aW9uaW5nQ2hhbmdlZCk7XG4gICAgICAgIGlmIChvcHRpb25zLmVsZW1lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3RoaXMuc2V0RWxlbWVudChvcHRpb25zLmVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLnNldE9mZnNldChvcHRpb25zLm9mZnNldCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vZmZzZXQgOiBbMCwgMF0pO1xuICAgICAgICBfdGhpcy5zZXRQb3NpdGlvbmluZyhvcHRpb25zLnBvc2l0aW9uaW5nICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL092ZXJsYXlQb3NpdGlvbmluZy5qc1wiKS5kZWZhdWx0fSAqLyAob3B0aW9ucy5wb3NpdGlvbmluZylcbiAgICAgICAgICAgIDogT3ZlcmxheVBvc2l0aW9uaW5nLlRPUF9MRUZUKTtcbiAgICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3RoaXMuc2V0UG9zaXRpb24ob3B0aW9ucy5wb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIERPTSBlbGVtZW50IG9mIHRoaXMgb3ZlcmxheS5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudHx1bmRlZmluZWR9IFRoZSBFbGVtZW50IGNvbnRhaW5pbmcgdGhlIG92ZXJsYXkuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgT3ZlcmxheS5wcm90b3R5cGUuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7SFRNTEVsZW1lbnR8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoUHJvcGVydHkuRUxFTUVOVCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBvdmVybGF5IGlkZW50aWZpZXIgd2hpY2ggaXMgc2V0IG9uIGNvbnN0cnVjdG9yLlxuICAgICAqIEByZXR1cm4ge251bWJlcnxzdHJpbmd8dW5kZWZpbmVkfSBJZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgT3ZlcmxheS5wcm90b3R5cGUuZ2V0SWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgb3ZlcmxheS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIG1hcCB0aGF0IHRoZVxuICAgICAqIG92ZXJsYXkgaXMgcGFydCBvZi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBPdmVybGF5LnByb3RvdHlwZS5nZXRNYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoUHJvcGVydHkuTUFQKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG9mZnNldCBvZiB0aGlzIG92ZXJsYXkuXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVGhlIG9mZnNldC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBPdmVybGF5LnByb3RvdHlwZS5nZXRPZmZzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovICh0aGlzLmdldChQcm9wZXJ0eS5PRkZTRVQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VycmVudCBwb3NpdGlvbiBvZiB0aGlzIG92ZXJsYXkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBUaGUgc3BhdGlhbCBwb2ludCB0aGF0IHRoZSBvdmVybGF5IGlzXG4gICAgICogICAgIGFuY2hvcmVkIGF0LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE92ZXJsYXkucHJvdG90eXBlLmdldFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5QT1NJVElPTikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjdXJyZW50IHBvc2l0aW9uaW5nIG9mIHRoaXMgb3ZlcmxheS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL092ZXJsYXlQb3NpdGlvbmluZy5qc1wiKS5kZWZhdWx0fSBIb3cgdGhlIG92ZXJsYXkgaXMgcG9zaXRpb25lZFxuICAgICAqICAgICByZWxhdGl2ZSB0byBpdHMgcG9pbnQgb24gdGhlIG1hcC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBPdmVybGF5LnByb3RvdHlwZS5nZXRQb3NpdGlvbmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9PdmVybGF5UG9zaXRpb25pbmcuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LlBPU0lUSU9OSU5HKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgT3ZlcmxheS5wcm90b3R5cGUuaGFuZGxlRWxlbWVudENoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5nZXRFbGVtZW50KCk7XG4gICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBPdmVybGF5LnByb3RvdHlwZS5oYW5kbGVNYXBDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5tYXBQb3N0cmVuZGVyTGlzdGVuZXJLZXkpIHtcbiAgICAgICAgICAgIHJlbW92ZU5vZGUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5tYXBQb3N0cmVuZGVyTGlzdGVuZXJLZXkpO1xuICAgICAgICAgICAgdGhpcy5tYXBQb3N0cmVuZGVyTGlzdGVuZXJLZXkgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgICAgICBpZiAobWFwKSB7XG4gICAgICAgICAgICB0aGlzLm1hcFBvc3RyZW5kZXJMaXN0ZW5lcktleSA9IGxpc3RlbihtYXAsIE1hcEV2ZW50VHlwZS5QT1NUUkVOREVSLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBpeGVsUG9zaXRpb24oKTtcbiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnN0b3BFdmVudFxuICAgICAgICAgICAgICAgID8gbWFwLmdldE92ZXJsYXlDb250YWluZXJTdG9wRXZlbnQoKVxuICAgICAgICAgICAgICAgIDogbWFwLmdldE92ZXJsYXlDb250YWluZXIoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmluc2VydEZpcnN0KSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZSh0aGlzLmVsZW1lbnQsIGNvbnRhaW5lci5jaGlsZE5vZGVzWzBdIHx8IG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1BdXRvUGFuKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBPdmVybGF5LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlUGl4ZWxQb3NpdGlvbigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE92ZXJsYXkucHJvdG90eXBlLmhhbmRsZU9mZnNldENoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlUGl4ZWxQb3NpdGlvbigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE92ZXJsYXkucHJvdG90eXBlLmhhbmRsZVBvc2l0aW9uQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVQaXhlbFBvc2l0aW9uKCk7XG4gICAgICAgIHRoaXMucGVyZm9ybUF1dG9QYW4oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBPdmVybGF5LnByb3RvdHlwZS5oYW5kbGVQb3NpdGlvbmluZ0NoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlUGl4ZWxQb3NpdGlvbigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBET00gZWxlbWVudCB0byBiZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBvdmVybGF5LlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8dW5kZWZpbmVkfSBlbGVtZW50IFRoZSBFbGVtZW50IGNvbnRhaW5pbmcgdGhlIG92ZXJsYXkuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgT3ZlcmxheS5wcm90b3R5cGUuc2V0RWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuc2V0KFByb3BlcnR5LkVMRU1FTlQsIGVsZW1lbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBtYXAgdG8gYmUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgb3ZlcmxheS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBtYXAgVGhlIG1hcCB0aGF0IHRoZVxuICAgICAqIG92ZXJsYXkgaXMgcGFydCBvZi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBPdmVybGF5LnByb3RvdHlwZS5zZXRNYXAgPSBmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgIHRoaXMuc2V0KFByb3BlcnR5Lk1BUCwgbWFwKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgb2Zmc2V0IGZvciB0aGlzIG92ZXJsYXkuXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBvZmZzZXQgT2Zmc2V0LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE92ZXJsYXkucHJvdG90eXBlLnNldE9mZnNldCA9IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuT0ZGU0VULCBvZmZzZXQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBwb3NpdGlvbiBmb3IgdGhpcyBvdmVybGF5LiBJZiB0aGUgcG9zaXRpb24gaXMgYHVuZGVmaW5lZGAgdGhlXG4gICAgICogb3ZlcmxheSBpcyBoaWRkZW4uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IHBvc2l0aW9uIFRoZSBzcGF0aWFsIHBvaW50IHRoYXQgdGhlIG92ZXJsYXlcbiAgICAgKiAgICAgaXMgYW5jaG9yZWQgYXQuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgT3ZlcmxheS5wcm90b3R5cGUuc2V0UG9zaXRpb24gPSBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuUE9TSVRJT04sIHBvc2l0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFBhbiB0aGUgbWFwIHNvIHRoYXQgdGhlIG92ZXJsYXkgaXMgZW50aXJlbHkgdmlzaXNibGUgaW4gdGhlIGN1cnJlbnQgdmlld3BvcnRcbiAgICAgKiAoaWYgbmVjZXNzYXJ5KSB1c2luZyB0aGUgY29uZmlndXJlZCBhdXRvUGFuIHBhcmFtZXRlcnNcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgT3ZlcmxheS5wcm90b3R5cGUucGVyZm9ybUF1dG9QYW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmF1dG9QYW4pIHtcbiAgICAgICAgICAgIHRoaXMucGFuSW50b1ZpZXcodGhpcy5hdXRvUGFuKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUGFuIHRoZSBtYXAgc28gdGhhdCB0aGUgb3ZlcmxheSBpcyBlbnRpcmVseSB2aXNpYmxlIGluIHRoZSBjdXJyZW50IHZpZXdwb3J0XG4gICAgICogKGlmIG5lY2Vzc2FyeSkuXG4gICAgICogQHBhcmFtIHtQYW5JbnRvVmlld09wdGlvbnM9fSBvcHRfcGFuSW50b1ZpZXdPcHRpb25zIE9wdGlvbnMgZm9yIHRoZSBwYW4gYWN0aW9uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE92ZXJsYXkucHJvdG90eXBlLnBhbkludG9WaWV3ID0gZnVuY3Rpb24gKG9wdF9wYW5JbnRvVmlld09wdGlvbnMpIHtcbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgICAgIGlmICghbWFwIHx8ICFtYXAuZ2V0VGFyZ2V0RWxlbWVudCgpIHx8ICF0aGlzLmdldChQcm9wZXJ0eS5QT1NJVElPTikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFwUmVjdCA9IHRoaXMuZ2V0UmVjdChtYXAuZ2V0VGFyZ2V0RWxlbWVudCgpLCBtYXAuZ2V0U2l6ZSgpKTtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmdldEVsZW1lbnQoKTtcbiAgICAgICAgdmFyIG92ZXJsYXlSZWN0ID0gdGhpcy5nZXRSZWN0KGVsZW1lbnQsIFtcbiAgICAgICAgICAgIG91dGVyV2lkdGgoZWxlbWVudCksXG4gICAgICAgICAgICBvdXRlckhlaWdodChlbGVtZW50KSxcbiAgICAgICAgXSk7XG4gICAgICAgIHZhciBwYW5JbnRvVmlld09wdGlvbnMgPSBvcHRfcGFuSW50b1ZpZXdPcHRpb25zIHx8IHt9O1xuICAgICAgICB2YXIgbXlNYXJnaW4gPSBwYW5JbnRvVmlld09wdGlvbnMubWFyZ2luID09PSB1bmRlZmluZWQgPyAyMCA6IHBhbkludG9WaWV3T3B0aW9ucy5tYXJnaW47XG4gICAgICAgIGlmICghY29udGFpbnNFeHRlbnQobWFwUmVjdCwgb3ZlcmxheVJlY3QpKSB7XG4gICAgICAgICAgICAvLyB0aGUgb3ZlcmxheSBpcyBub3QgY29tcGxldGVseSBpbnNpZGUgdGhlIHZpZXdwb3J0LCBzbyBwYW4gdGhlIG1hcFxuICAgICAgICAgICAgdmFyIG9mZnNldExlZnQgPSBvdmVybGF5UmVjdFswXSAtIG1hcFJlY3RbMF07XG4gICAgICAgICAgICB2YXIgb2Zmc2V0UmlnaHQgPSBtYXBSZWN0WzJdIC0gb3ZlcmxheVJlY3RbMl07XG4gICAgICAgICAgICB2YXIgb2Zmc2V0VG9wID0gb3ZlcmxheVJlY3RbMV0gLSBtYXBSZWN0WzFdO1xuICAgICAgICAgICAgdmFyIG9mZnNldEJvdHRvbSA9IG1hcFJlY3RbM10gLSBvdmVybGF5UmVjdFszXTtcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IFswLCAwXTtcbiAgICAgICAgICAgIGlmIChvZmZzZXRMZWZ0IDwgMCkge1xuICAgICAgICAgICAgICAgIC8vIG1vdmUgbWFwIHRvIHRoZSBsZWZ0XG4gICAgICAgICAgICAgICAgZGVsdGFbMF0gPSBvZmZzZXRMZWZ0IC0gbXlNYXJnaW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvZmZzZXRSaWdodCA8IDApIHtcbiAgICAgICAgICAgICAgICAvLyBtb3ZlIG1hcCB0byB0aGUgcmlnaHRcbiAgICAgICAgICAgICAgICBkZWx0YVswXSA9IE1hdGguYWJzKG9mZnNldFJpZ2h0KSArIG15TWFyZ2luO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9mZnNldFRvcCA8IDApIHtcbiAgICAgICAgICAgICAgICAvLyBtb3ZlIG1hcCB1cFxuICAgICAgICAgICAgICAgIGRlbHRhWzFdID0gb2Zmc2V0VG9wIC0gbXlNYXJnaW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvZmZzZXRCb3R0b20gPCAwKSB7XG4gICAgICAgICAgICAgICAgLy8gbW92ZSBtYXAgZG93blxuICAgICAgICAgICAgICAgIGRlbHRhWzFdID0gTWF0aC5hYnMob2Zmc2V0Qm90dG9tKSArIG15TWFyZ2luO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlbHRhWzBdICE9PSAwIHx8IGRlbHRhWzFdICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9ICovIChtYXBcbiAgICAgICAgICAgICAgICAgICAgLmdldFZpZXcoKVxuICAgICAgICAgICAgICAgICAgICAuZ2V0Q2VudGVySW50ZXJuYWwoKSk7XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlclB4ID0gbWFwLmdldFBpeGVsRnJvbUNvb3JkaW5hdGVJbnRlcm5hbChjZW50ZXIpO1xuICAgICAgICAgICAgICAgIGlmICghY2VudGVyUHgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbmV3Q2VudGVyUHggPSBbY2VudGVyUHhbMF0gKyBkZWx0YVswXSwgY2VudGVyUHhbMV0gKyBkZWx0YVsxXV07XG4gICAgICAgICAgICAgICAgdmFyIHBhbk9wdGlvbnMgPSBwYW5JbnRvVmlld09wdGlvbnMuYW5pbWF0aW9uIHx8IHt9O1xuICAgICAgICAgICAgICAgIG1hcC5nZXRWaWV3KCkuYW5pbWF0ZUludGVybmFsKHtcbiAgICAgICAgICAgICAgICAgICAgY2VudGVyOiBtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKG5ld0NlbnRlclB4KSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHBhbk9wdGlvbnMuZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZzogcGFuT3B0aW9ucy5lYXNpbmcsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZXh0ZW50IG9mIGFuIGVsZW1lbnQgcmVsYXRpdmUgdG8gdGhlIGRvY3VtZW50XG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBUaGUgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFRoZSBzaXplIG9mIHRoZSBlbGVtZW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gVGhlIGV4dGVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgT3ZlcmxheS5wcm90b3R5cGUuZ2V0UmVjdCA9IGZ1bmN0aW9uIChlbGVtZW50LCBzaXplKSB7XG4gICAgICAgIHZhciBib3ggPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgb2Zmc2V0WCA9IGJveC5sZWZ0ICsgd2luZG93LnBhZ2VYT2Zmc2V0O1xuICAgICAgICB2YXIgb2Zmc2V0WSA9IGJveC50b3AgKyB3aW5kb3cucGFnZVlPZmZzZXQ7XG4gICAgICAgIHJldHVybiBbb2Zmc2V0WCwgb2Zmc2V0WSwgb2Zmc2V0WCArIHNpemVbMF0sIG9mZnNldFkgKyBzaXplWzFdXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcG9zaXRpb25pbmcgZm9yIHRoaXMgb3ZlcmxheS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vT3ZlcmxheVBvc2l0aW9uaW5nLmpzXCIpLmRlZmF1bHR9IHBvc2l0aW9uaW5nIGhvdyB0aGUgb3ZlcmxheSBpc1xuICAgICAqICAgICBwb3NpdGlvbmVkIHJlbGF0aXZlIHRvIGl0cyBwb2ludCBvbiB0aGUgbWFwLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE92ZXJsYXkucHJvdG90eXBlLnNldFBvc2l0aW9uaW5nID0gZnVuY3Rpb24gKHBvc2l0aW9uaW5nKSB7XG4gICAgICAgIHRoaXMuc2V0KFByb3BlcnR5LlBPU0lUSU9OSU5HLCBwb3NpdGlvbmluZyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNb2RpZnkgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSB2aXNpYmxlIEVsZW1lbnQgdmlzaWJpbGl0eS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgT3ZlcmxheS5wcm90b3R5cGUuc2V0VmlzaWJsZSA9IGZ1bmN0aW9uICh2aXNpYmxlKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkLnZpc2libGUgIT09IHZpc2libGUpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gdmlzaWJsZSA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZC52aXNpYmxlID0gdmlzaWJsZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHBpeGVsIHBvc2l0aW9uLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBPdmVybGF5LnByb3RvdHlwZS51cGRhdGVQaXhlbFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5nZXRQb3NpdGlvbigpO1xuICAgICAgICBpZiAoIW1hcCB8fCAhbWFwLmlzUmVuZGVyZWQoKSB8fCAhcG9zaXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBpeGVsID0gbWFwLmdldFBpeGVsRnJvbUNvb3JkaW5hdGUocG9zaXRpb24pO1xuICAgICAgICB2YXIgbWFwU2l6ZSA9IG1hcC5nZXRTaXplKCk7XG4gICAgICAgIHRoaXMudXBkYXRlUmVuZGVyZWRQb3NpdGlvbihwaXhlbCwgbWFwU2l6ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFRoZSBwaXhlbCBsb2NhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfHVuZGVmaW5lZH0gbWFwU2l6ZSBUaGUgbWFwIHNpemUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE92ZXJsYXkucHJvdG90eXBlLnVwZGF0ZVJlbmRlcmVkUG9zaXRpb24gPSBmdW5jdGlvbiAocGl4ZWwsIG1hcFNpemUpIHtcbiAgICAgICAgdmFyIHN0eWxlID0gdGhpcy5lbGVtZW50LnN0eWxlO1xuICAgICAgICB2YXIgb2Zmc2V0ID0gdGhpcy5nZXRPZmZzZXQoKTtcbiAgICAgICAgdmFyIHBvc2l0aW9uaW5nID0gdGhpcy5nZXRQb3NpdGlvbmluZygpO1xuICAgICAgICB0aGlzLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgIHZhciB4ID0gTWF0aC5yb3VuZChwaXhlbFswXSArIG9mZnNldFswXSkgKyAncHgnO1xuICAgICAgICB2YXIgeSA9IE1hdGgucm91bmQocGl4ZWxbMV0gKyBvZmZzZXRbMV0pICsgJ3B4JztcbiAgICAgICAgdmFyIHBvc1ggPSAnMCUnO1xuICAgICAgICB2YXIgcG9zWSA9ICcwJSc7XG4gICAgICAgIGlmIChwb3NpdGlvbmluZyA9PSBPdmVybGF5UG9zaXRpb25pbmcuQk9UVE9NX1JJR0hUIHx8XG4gICAgICAgICAgICBwb3NpdGlvbmluZyA9PSBPdmVybGF5UG9zaXRpb25pbmcuQ0VOVEVSX1JJR0hUIHx8XG4gICAgICAgICAgICBwb3NpdGlvbmluZyA9PSBPdmVybGF5UG9zaXRpb25pbmcuVE9QX1JJR0hUKSB7XG4gICAgICAgICAgICBwb3NYID0gJy0xMDAlJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwb3NpdGlvbmluZyA9PSBPdmVybGF5UG9zaXRpb25pbmcuQk9UVE9NX0NFTlRFUiB8fFxuICAgICAgICAgICAgcG9zaXRpb25pbmcgPT0gT3ZlcmxheVBvc2l0aW9uaW5nLkNFTlRFUl9DRU5URVIgfHxcbiAgICAgICAgICAgIHBvc2l0aW9uaW5nID09IE92ZXJsYXlQb3NpdGlvbmluZy5UT1BfQ0VOVEVSKSB7XG4gICAgICAgICAgICBwb3NYID0gJy01MCUnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb3NpdGlvbmluZyA9PSBPdmVybGF5UG9zaXRpb25pbmcuQk9UVE9NX0xFRlQgfHxcbiAgICAgICAgICAgIHBvc2l0aW9uaW5nID09IE92ZXJsYXlQb3NpdGlvbmluZy5CT1RUT01fQ0VOVEVSIHx8XG4gICAgICAgICAgICBwb3NpdGlvbmluZyA9PSBPdmVybGF5UG9zaXRpb25pbmcuQk9UVE9NX1JJR0hUKSB7XG4gICAgICAgICAgICBwb3NZID0gJy0xMDAlJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwb3NpdGlvbmluZyA9PSBPdmVybGF5UG9zaXRpb25pbmcuQ0VOVEVSX0xFRlQgfHxcbiAgICAgICAgICAgIHBvc2l0aW9uaW5nID09IE92ZXJsYXlQb3NpdGlvbmluZy5DRU5URVJfQ0VOVEVSIHx8XG4gICAgICAgICAgICBwb3NpdGlvbmluZyA9PSBPdmVybGF5UG9zaXRpb25pbmcuQ0VOVEVSX1JJR0hUKSB7XG4gICAgICAgICAgICBwb3NZID0gJy01MCUnO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZShcIiArIHBvc1ggKyBcIiwgXCIgKyBwb3NZICsgXCIpIHRyYW5zbGF0ZShcIiArIHggKyBcIiwgXCIgKyB5ICsgXCIpXCI7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkLnRyYW5zZm9ybV8gIT0gdHJhbnNmb3JtKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkLnRyYW5zZm9ybV8gPSB0cmFuc2Zvcm07XG4gICAgICAgICAgICBzdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlIElFOVxuICAgICAgICAgICAgc3R5bGUubXNUcmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIHJldHVybnMgdGhlIG9wdGlvbnMgdGhpcyBPdmVybGF5IGhhcyBiZWVuIGNyZWF0ZWQgd2l0aFxuICAgICAqIEByZXR1cm4ge09wdGlvbnN9IG92ZXJsYXkgb3B0aW9uc1xuICAgICAqL1xuICAgIE92ZXJsYXkucHJvdG90eXBlLmdldE9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnM7XG4gICAgfTtcbiAgICByZXR1cm4gT3ZlcmxheTtcbn0oQmFzZU9iamVjdCkpO1xuZXhwb3J0IGRlZmF1bHQgT3ZlcmxheTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU92ZXJsYXkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0eWxlL1RleHRcbiAqL1xuaW1wb3J0IEZpbGwgZnJvbSAnLi9GaWxsLmpzJztcbmltcG9ydCBUZXh0UGxhY2VtZW50IGZyb20gJy4vVGV4dFBsYWNlbWVudC5qcyc7XG5pbXBvcnQgeyB0b1NpemUgfSBmcm9tICcuLi9zaXplLmpzJztcbi8qKlxuICogVGhlIGRlZmF1bHQgZmlsbCBjb2xvciB0byB1c2UgaWYgbm8gZmlsbCB3YXMgc2V0IGF0IGNvbnN0cnVjdGlvbiB0aW1lOyBhXG4gKiBibGFja2lzaCBgIzMzM2AuXG4gKlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbnZhciBERUZBVUxUX0ZJTExfQ09MT1IgPSAnIzMzMyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZm9udF0gRm9udCBzdHlsZSBhcyBDU1MgJ2ZvbnQnIHZhbHVlLCBzZWU6XG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEL2ZvbnQuIERlZmF1bHQgaXMgJzEwcHggc2Fucy1zZXJpZidcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4QW5nbGU9TWF0aC5QSS80XSBXaGVuIGBwbGFjZW1lbnRgIGlzIHNldCB0byBgJ2xpbmUnYCwgYWxsb3cgYSBtYXhpbXVtIGFuZ2xlIGJldHdlZW4gYWRqYWNlbnQgY2hhcmFjdGVycy5cbiAqIFRoZSBleHBlY3RlZCB2YWx1ZSBpcyBpbiByYWRpYW5zLCBhbmQgdGhlIGRlZmF1bHQgaXMgNDXCsCAoYE1hdGguUEkgLyA0YCkuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29mZnNldFg9MF0gSG9yaXpvbnRhbCB0ZXh0IG9mZnNldCBpbiBwaXhlbHMuIEEgcG9zaXRpdmUgd2lsbCBzaGlmdCB0aGUgdGV4dCByaWdodC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb2Zmc2V0WT0wXSBWZXJ0aWNhbCB0ZXh0IG9mZnNldCBpbiBwaXhlbHMuIEEgcG9zaXRpdmUgd2lsbCBzaGlmdCB0aGUgdGV4dCBkb3duLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3ZlcmZsb3c9ZmFsc2VdIEZvciBwb2x5Z29uIGxhYmVscyBvciB3aGVuIGBwbGFjZW1lbnRgIGlzIHNldCB0byBgJ2xpbmUnYCwgYWxsb3cgdGV4dCB0byBleGNlZWRcbiAqIHRoZSB3aWR0aCBvZiB0aGUgcG9seWdvbiBhdCB0aGUgbGFiZWwgcG9zaXRpb24gb3IgdGhlIGxlbmd0aCBvZiB0aGUgcGF0aCB0aGF0IGl0IGZvbGxvd3MuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vVGV4dFBsYWNlbWVudC5qc1wiKS5kZWZhdWx0fHN0cmluZ30gW3BsYWNlbWVudD0ncG9pbnQnXSBUZXh0IHBsYWNlbWVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gW3NjYWxlXSBTY2FsZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3JvdGF0ZVdpdGhWaWV3PWZhbHNlXSBXaGV0aGVyIHRvIHJvdGF0ZSB0aGUgdGV4dCB3aXRoIHRoZSB2aWV3LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyb3RhdGlvbj0wXSBSb3RhdGlvbiBpbiByYWRpYW5zIChwb3NpdGl2ZSByb3RhdGlvbiBjbG9ja3dpc2UpLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0ZXh0XSBUZXh0IGNvbnRlbnQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3RleHRBbGlnbl0gVGV4dCBhbGlnbm1lbnQuIFBvc3NpYmxlIHZhbHVlczogJ2xlZnQnLCAncmlnaHQnLCAnY2VudGVyJywgJ2VuZCcgb3IgJ3N0YXJ0Jy5cbiAqIERlZmF1bHQgaXMgJ2NlbnRlcicgZm9yIGBwbGFjZW1lbnQ6ICdwb2ludCdgLiBGb3IgYHBsYWNlbWVudDogJ2xpbmUnYCwgdGhlIGRlZmF1bHQgaXMgdG8gbGV0IHRoZSByZW5kZXJlciBjaG9vc2UgYVxuICogcGxhY2VtZW50IHdoZXJlIGBtYXhBbmdsZWAgaXMgbm90IGV4Y2VlZGVkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0ZXh0QmFzZWxpbmU9J21pZGRsZSddIFRleHQgYmFzZSBsaW5lLiBQb3NzaWJsZSB2YWx1ZXM6ICdib3R0b20nLCAndG9wJywgJ21pZGRsZScsICdhbHBoYWJldGljJyxcbiAqICdoYW5naW5nJywgJ2lkZW9ncmFwaGljJy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9GaWxsLmpzXCIpLmRlZmF1bHR9IFtmaWxsXSBGaWxsIHN0eWxlLiBJZiBub25lIGlzIHByb3ZpZGVkLCB3ZSdsbCB1c2UgYSBkYXJrIGZpbGwtc3R5bGUgKCMzMzMpLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1N0cm9rZS5qc1wiKS5kZWZhdWx0fSBbc3Ryb2tlXSBTdHJva2Ugc3R5bGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vRmlsbC5qc1wiKS5kZWZhdWx0fSBbYmFja2dyb3VuZEZpbGxdIEZpbGwgc3R5bGUgZm9yIHRoZSB0ZXh0IGJhY2tncm91bmQgd2hlbiBgcGxhY2VtZW50YCBpc1xuICogYCdwb2ludCdgLiBEZWZhdWx0IGlzIG5vIGZpbGwuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU3Ryb2tlLmpzXCIpLmRlZmF1bHR9IFtiYWNrZ3JvdW5kU3Ryb2tlXSBTdHJva2Ugc3R5bGUgZm9yIHRoZSB0ZXh0IGJhY2tncm91bmQgIHdoZW4gYHBsYWNlbWVudGBcbiAqIGlzIGAncG9pbnQnYC4gRGVmYXVsdCBpcyBubyBzdHJva2UuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtwYWRkaW5nPVswLCAwLCAwLCAwXV0gUGFkZGluZyBpbiBwaXhlbHMgYXJvdW5kIHRoZSB0ZXh0IGZvciBkZWNsdXR0ZXJpbmcgYW5kIGJhY2tncm91bmQuIFRoZSBvcmRlciBvZlxuICogdmFsdWVzIGluIHRoZSBhcnJheSBpcyBgW3RvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdF1gLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFNldCB0ZXh0IHN0eWxlIGZvciB2ZWN0b3IgZmVhdHVyZXMuXG4gKiBAYXBpXG4gKi9cbnZhciBUZXh0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGV4dChvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ3x1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZvbnRfID0gb3B0aW9ucy5mb250O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJvdGF0aW9uXyA9IG9wdGlvbnMucm90YXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJvdGF0ZVdpdGhWaWV3XyA9IG9wdGlvbnMucm90YXRlV2l0aFZpZXc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZXx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNjYWxlXyA9IG9wdGlvbnMuc2NhbGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zY2FsZUFycmF5XyA9IHRvU2l6ZShvcHRpb25zLnNjYWxlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNjYWxlIDogMSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGV4dF8gPSBvcHRpb25zLnRleHQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGV4dEFsaWduXyA9IG9wdGlvbnMudGV4dEFsaWduO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ3x1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRleHRCYXNlbGluZV8gPSBvcHRpb25zLnRleHRCYXNlbGluZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0ZpbGwuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmlsbF8gPVxuICAgICAgICAgICAgb3B0aW9ucy5maWxsICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMuZmlsbFxuICAgICAgICAgICAgICAgIDogbmV3IEZpbGwoeyBjb2xvcjogREVGQVVMVF9GSUxMX0NPTE9SIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4QW5nbGVfID1cbiAgICAgICAgICAgIG9wdGlvbnMubWF4QW5nbGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4QW5nbGUgOiBNYXRoLlBJIC8gNDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1RleHRQbGFjZW1lbnQuanNcIikuZGVmYXVsdHxzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBsYWNlbWVudF8gPVxuICAgICAgICAgICAgb3B0aW9ucy5wbGFjZW1lbnQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucGxhY2VtZW50IDogVGV4dFBsYWNlbWVudC5QT0lOVDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vdmVyZmxvd18gPSAhIW9wdGlvbnMub3ZlcmZsb3c7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9TdHJva2UuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3Ryb2tlXyA9IG9wdGlvbnMuc3Ryb2tlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnN0cm9rZSA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vZmZzZXRYXyA9IG9wdGlvbnMub2Zmc2V0WCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vZmZzZXRYIDogMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9mZnNldFlfID0gb3B0aW9ucy5vZmZzZXRZICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm9mZnNldFkgOiAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vRmlsbC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kRmlsbF8gPSBvcHRpb25zLmJhY2tncm91bmRGaWxsXG4gICAgICAgICAgICA/IG9wdGlvbnMuYmFja2dyb3VuZEZpbGxcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1N0cm9rZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU3Ryb2tlXyA9IG9wdGlvbnMuYmFja2dyb3VuZFN0cm9rZVxuICAgICAgICAgICAgPyBvcHRpb25zLmJhY2tncm91bmRTdHJva2VcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wYWRkaW5nXyA9IG9wdGlvbnMucGFkZGluZyA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IG9wdGlvbnMucGFkZGluZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvbmVzIHRoZSBzdHlsZS5cbiAgICAgKiBAcmV0dXJuIHtUZXh0fSBUaGUgY2xvbmVkIHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUZXh0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNjYWxlID0gdGhpcy5nZXRTY2FsZSgpO1xuICAgICAgICByZXR1cm4gbmV3IFRleHQoe1xuICAgICAgICAgICAgZm9udDogdGhpcy5nZXRGb250KCksXG4gICAgICAgICAgICBwbGFjZW1lbnQ6IHRoaXMuZ2V0UGxhY2VtZW50KCksXG4gICAgICAgICAgICBtYXhBbmdsZTogdGhpcy5nZXRNYXhBbmdsZSgpLFxuICAgICAgICAgICAgb3ZlcmZsb3c6IHRoaXMuZ2V0T3ZlcmZsb3coKSxcbiAgICAgICAgICAgIHJvdGF0aW9uOiB0aGlzLmdldFJvdGF0aW9uKCksXG4gICAgICAgICAgICByb3RhdGVXaXRoVmlldzogdGhpcy5nZXRSb3RhdGVXaXRoVmlldygpLFxuICAgICAgICAgICAgc2NhbGU6IEFycmF5LmlzQXJyYXkoc2NhbGUpID8gc2NhbGUuc2xpY2UoKSA6IHNjYWxlLFxuICAgICAgICAgICAgdGV4dDogdGhpcy5nZXRUZXh0KCksXG4gICAgICAgICAgICB0ZXh0QWxpZ246IHRoaXMuZ2V0VGV4dEFsaWduKCksXG4gICAgICAgICAgICB0ZXh0QmFzZWxpbmU6IHRoaXMuZ2V0VGV4dEJhc2VsaW5lKCksXG4gICAgICAgICAgICBmaWxsOiB0aGlzLmdldEZpbGwoKSA/IHRoaXMuZ2V0RmlsbCgpLmNsb25lKCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzdHJva2U6IHRoaXMuZ2V0U3Ryb2tlKCkgPyB0aGlzLmdldFN0cm9rZSgpLmNsb25lKCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBvZmZzZXRYOiB0aGlzLmdldE9mZnNldFgoKSxcbiAgICAgICAgICAgIG9mZnNldFk6IHRoaXMuZ2V0T2Zmc2V0WSgpLFxuICAgICAgICAgICAgYmFja2dyb3VuZEZpbGw6IHRoaXMuZ2V0QmFja2dyb3VuZEZpbGwoKVxuICAgICAgICAgICAgICAgID8gdGhpcy5nZXRCYWNrZ3JvdW5kRmlsbCgpLmNsb25lKClcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGJhY2tncm91bmRTdHJva2U6IHRoaXMuZ2V0QmFja2dyb3VuZFN0cm9rZSgpXG4gICAgICAgICAgICAgICAgPyB0aGlzLmdldEJhY2tncm91bmRTdHJva2UoKS5jbG9uZSgpXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBwYWRkaW5nOiB0aGlzLmdldFBhZGRpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGBvdmVyZmxvd2AgY29uZmlndXJhdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBMZXQgdGV4dCBvdmVyZmxvdyB0aGUgbGVuZ3RoIG9mIHRoZSBwYXRoIHRoZXkgZm9sbG93LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUZXh0LnByb3RvdHlwZS5nZXRPdmVyZmxvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3ZlcmZsb3dfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBmb250IG5hbWUuXG4gICAgICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gRm9udC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGV4dC5wcm90b3R5cGUuZ2V0Rm9udCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9udF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1heGltdW0gYW5nbGUgYmV0d2VlbiBhZGphY2VudCBjaGFyYWN0ZXJzLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gQW5nbGUgaW4gcmFkaWFucy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGV4dC5wcm90b3R5cGUuZ2V0TWF4QW5nbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heEFuZ2xlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGFiZWwgcGxhY2VtZW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vVGV4dFBsYWNlbWVudC5qc1wiKS5kZWZhdWx0fHN0cmluZ30gVGV4dCBwbGFjZW1lbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRleHQucHJvdG90eXBlLmdldFBsYWNlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGxhY2VtZW50XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgeC1vZmZzZXQgZm9yIHRoZSB0ZXh0LlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gSG9yaXpvbnRhbCB0ZXh0IG9mZnNldC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGV4dC5wcm90b3R5cGUuZ2V0T2Zmc2V0WCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0WF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHktb2Zmc2V0IGZvciB0aGUgdGV4dC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFZlcnRpY2FsIHRleHQgb2Zmc2V0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUZXh0LnByb3RvdHlwZS5nZXRPZmZzZXRZID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vZmZzZXRZXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZmlsbCBzdHlsZSBmb3IgdGhlIHRleHQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9GaWxsLmpzXCIpLmRlZmF1bHR9IEZpbGwgc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRleHQucHJvdG90eXBlLmdldEZpbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbGxfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHRleHQgcm90YXRlcyB3aXRoIHRoZSBtYXAuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbnx1bmRlZmluZWR9IFJvdGF0ZSB3aXRoIG1hcC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGV4dC5wcm90b3R5cGUuZ2V0Um90YXRlV2l0aFZpZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvdGF0ZVdpdGhWaWV3XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGV4dCByb3RhdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGV4dC5wcm90b3R5cGUuZ2V0Um90YXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvdGF0aW9uXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGV4dCBzY2FsZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfHVuZGVmaW5lZH0gU2NhbGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRleHQucHJvdG90eXBlLmdldFNjYWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2FsZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHN5bWJvbGl6ZXIgc2NhbGUgYXJyYXkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBTY2FsZSBhcnJheS5cbiAgICAgKi9cbiAgICBUZXh0LnByb3RvdHlwZS5nZXRTY2FsZUFycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2FsZUFycmF5XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc3Ryb2tlIHN0eWxlIGZvciB0aGUgdGV4dC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1N0cm9rZS5qc1wiKS5kZWZhdWx0fSBTdHJva2Ugc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRleHQucHJvdG90eXBlLmdldFN0cm9rZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Ryb2tlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGV4dCB0byBiZSByZW5kZXJlZC5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUZXh0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUZXh0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGV4dCBhbGlnbm1lbnQuXG4gICAgICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gVGV4dCBhbGlnbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGV4dC5wcm90b3R5cGUuZ2V0VGV4dEFsaWduID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0QWxpZ25fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0ZXh0IGJhc2VsaW5lLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFRleHQgYmFzZWxpbmUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRleHQucHJvdG90eXBlLmdldFRleHRCYXNlbGluZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dEJhc2VsaW5lXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYmFja2dyb3VuZCBmaWxsIHN0eWxlIGZvciB0aGUgdGV4dC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0ZpbGwuanNcIikuZGVmYXVsdH0gRmlsbCBzdHlsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGV4dC5wcm90b3R5cGUuZ2V0QmFja2dyb3VuZEZpbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhY2tncm91bmRGaWxsXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYmFja2dyb3VuZCBzdHJva2Ugc3R5bGUgZm9yIHRoZSB0ZXh0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vU3Ryb2tlLmpzXCIpLmRlZmF1bHR9IFN0cm9rZSBzdHlsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGV4dC5wcm90b3R5cGUuZ2V0QmFja2dyb3VuZFN0cm9rZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFja2dyb3VuZFN0cm9rZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBhZGRpbmcgZm9yIHRoZSB0ZXh0LlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFBhZGRpbmcuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRleHQucHJvdG90eXBlLmdldFBhZGRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhZGRpbmdfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBgb3ZlcmZsb3dgIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBvdmVyZmxvdyBMZXQgdGV4dCBvdmVyZmxvdyB0aGUgcGF0aCB0aGF0IGl0IGZvbGxvd3MuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRleHQucHJvdG90eXBlLnNldE92ZXJmbG93ID0gZnVuY3Rpb24gKG92ZXJmbG93KSB7XG4gICAgICAgIHRoaXMub3ZlcmZsb3dfID0gb3ZlcmZsb3c7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGZvbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IGZvbnQgRm9udC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGV4dC5wcm90b3R5cGUuc2V0Rm9udCA9IGZ1bmN0aW9uIChmb250KSB7XG4gICAgICAgIHRoaXMuZm9udF8gPSBmb250O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBtYXhpbXVtIGFuZ2xlIGJldHdlZW4gYWRqYWNlbnQgY2hhcmFjdGVycy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhBbmdsZSBBbmdsZSBpbiByYWRpYW5zLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUZXh0LnByb3RvdHlwZS5zZXRNYXhBbmdsZSA9IGZ1bmN0aW9uIChtYXhBbmdsZSkge1xuICAgICAgICB0aGlzLm1heEFuZ2xlXyA9IG1heEFuZ2xlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB4IG9mZnNldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRYIEhvcml6b250YWwgdGV4dCBvZmZzZXQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRleHQucHJvdG90eXBlLnNldE9mZnNldFggPSBmdW5jdGlvbiAob2Zmc2V0WCkge1xuICAgICAgICB0aGlzLm9mZnNldFhfID0gb2Zmc2V0WDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgeSBvZmZzZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WSBWZXJ0aWNhbCB0ZXh0IG9mZnNldC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGV4dC5wcm90b3R5cGUuc2V0T2Zmc2V0WSA9IGZ1bmN0aW9uIChvZmZzZXRZKSB7XG4gICAgICAgIHRoaXMub2Zmc2V0WV8gPSBvZmZzZXRZO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB0ZXh0IHBsYWNlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UZXh0UGxhY2VtZW50LmpzXCIpLmRlZmF1bHR8c3RyaW5nfSBwbGFjZW1lbnQgUGxhY2VtZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUZXh0LnByb3RvdHlwZS5zZXRQbGFjZW1lbnQgPSBmdW5jdGlvbiAocGxhY2VtZW50KSB7XG4gICAgICAgIHRoaXMucGxhY2VtZW50XyA9IHBsYWNlbWVudDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRvIHJvdGF0ZSB0aGUgdGV4dCB3aXRoIHRoZSB2aWV3LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSByb3RhdGVXaXRoVmlldyBSb3RhdGUgd2l0aCBtYXAuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRleHQucHJvdG90eXBlLnNldFJvdGF0ZVdpdGhWaWV3ID0gZnVuY3Rpb24gKHJvdGF0ZVdpdGhWaWV3KSB7XG4gICAgICAgIHRoaXMucm90YXRlV2l0aFZpZXdfID0gcm90YXRlV2l0aFZpZXc7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGZpbGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vRmlsbC5qc1wiKS5kZWZhdWx0fSBmaWxsIEZpbGwgc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRleHQucHJvdG90eXBlLnNldEZpbGwgPSBmdW5jdGlvbiAoZmlsbCkge1xuICAgICAgICB0aGlzLmZpbGxfID0gZmlsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUZXh0LnByb3RvdHlwZS5zZXRSb3RhdGlvbiA9IGZ1bmN0aW9uIChyb3RhdGlvbikge1xuICAgICAgICB0aGlzLnJvdGF0aW9uXyA9IHJvdGF0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzY2FsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZXx1bmRlZmluZWR9IHNjYWxlIFNjYWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUZXh0LnByb3RvdHlwZS5zZXRTY2FsZSA9IGZ1bmN0aW9uIChzY2FsZSkge1xuICAgICAgICB0aGlzLnNjYWxlXyA9IHNjYWxlO1xuICAgICAgICB0aGlzLnNjYWxlQXJyYXlfID0gdG9TaXplKHNjYWxlICE9PSB1bmRlZmluZWQgPyBzY2FsZSA6IDEpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzdHJva2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vU3Ryb2tlLmpzXCIpLmRlZmF1bHR9IHN0cm9rZSBTdHJva2Ugc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRleHQucHJvdG90eXBlLnNldFN0cm9rZSA9IGZ1bmN0aW9uIChzdHJva2UpIHtcbiAgICAgICAgdGhpcy5zdHJva2VfID0gc3Ryb2tlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB0ZXh0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfSB0ZXh0IFRleHQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRleHQucHJvdG90eXBlLnNldFRleHQgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICB0aGlzLnRleHRfID0gdGV4dDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdGV4dCBhbGlnbm1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IHRleHRBbGlnbiBUZXh0IGFsaWduLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUZXh0LnByb3RvdHlwZS5zZXRUZXh0QWxpZ24gPSBmdW5jdGlvbiAodGV4dEFsaWduKSB7XG4gICAgICAgIHRoaXMudGV4dEFsaWduXyA9IHRleHRBbGlnbjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdGV4dCBiYXNlbGluZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gdGV4dEJhc2VsaW5lIFRleHQgYmFzZWxpbmUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRleHQucHJvdG90eXBlLnNldFRleHRCYXNlbGluZSA9IGZ1bmN0aW9uICh0ZXh0QmFzZWxpbmUpIHtcbiAgICAgICAgdGhpcy50ZXh0QmFzZWxpbmVfID0gdGV4dEJhc2VsaW5lO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBiYWNrZ3JvdW5kIGZpbGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vRmlsbC5qc1wiKS5kZWZhdWx0fSBmaWxsIEZpbGwgc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRleHQucHJvdG90eXBlLnNldEJhY2tncm91bmRGaWxsID0gZnVuY3Rpb24gKGZpbGwpIHtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kRmlsbF8gPSBmaWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBiYWNrZ3JvdW5kIHN0cm9rZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9TdHJva2UuanNcIikuZGVmYXVsdH0gc3Ryb2tlIFN0cm9rZSBzdHlsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGV4dC5wcm90b3R5cGUuc2V0QmFja2dyb3VuZFN0cm9rZSA9IGZ1bmN0aW9uIChzdHJva2UpIHtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU3Ryb2tlXyA9IHN0cm9rZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcGFkZGluZyAoYFt0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnRdYCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyFBcnJheTxudW1iZXI+fSBwYWRkaW5nIFBhZGRpbmcuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRleHQucHJvdG90eXBlLnNldFBhZGRpbmcgPSBmdW5jdGlvbiAocGFkZGluZykge1xuICAgICAgICB0aGlzLnBhZGRpbmdfID0gcGFkZGluZztcbiAgICB9O1xuICAgIHJldHVybiBUZXh0O1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IFRleHQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UZXh0LmpzLm1hcCIsImltcG9ydCB7IEZlYXR1cmUsIE1hcCwgT3ZlcmxheSB9IGZyb20gJ29sJ1xuaW1wb3J0IHsgQ2lyY2xlLCBGaWxsLCBTdHJva2UsIFN0eWxlLCBUZXh0IH0gZnJvbSAnb2wvc3R5bGUnXG5pbXBvcnQgeyBQb2ludCB9IGZyb20gJ29sL2dlb20nXG5pbXBvcnQgeyBmcm9tTG9uTGF0IH0gZnJvbSAnb2wvcHJvaidcbmltcG9ydCB7IEZlYXR1cmVMaWtlIH0gZnJvbSAnb2wvRmVhdHVyZSdcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnb2wvZ2VvbS9HZW9tZXRyeVR5cGUnXG5pbXBvcnQgT3ZlcmxheVBvc2l0aW9uaW5nIGZyb20gJ29sL092ZXJsYXlQb3NpdGlvbmluZydcbmltcG9ydCB7IGZpbHRlck9iamVjdCB9IGZyb20gJy4vdXRpbCdcblxuY29uc3QgQ09MT1JfREVGQVVMVFMgPSB7XG4gIHByaW1hcnk6ICcjZmYxNDkzJyxcbiAgc2Vjb25kYXJ5OiAnI2ZmZmYwMCdcbn1cblxuZnVuY3Rpb24gY3JlYXRlSW5mb0VsZW1lbnQgKGlubmVySFRNTCA9ICcnKSB7XG4gIHJldHVybiBPYmplY3QuYXNzaWduKFxuICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgIHsgY2xhc3NOYW1lOiAnaW5mbycsIGlubmVySFRNTCB9XG4gIClcbn1cblxuZXhwb3J0IGNsYXNzIE1hcmtlciBleHRlbmRzIEZlYXR1cmUge1xuICBwcml2YXRlIHBvcHVwOiBPdmVybGF5ID0gbnVsbFxuXG4gIGNvbnN0cnVjdG9yICh7IG5hbWUsIGxvY2F0aW9uLCBpbmZvID0gbnVsbCwgaW5mb0hUTUwgPSAnJywgY29sb3IgPSB7fSB9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgdHlwZTogR2VvbWV0cnlUeXBlLlBPSU5ULFxuICAgICAgZ2VvbWV0cnk6IG5ldyBQb2ludChmcm9tTG9uTGF0KGxvY2F0aW9uKSksXG4gICAgICBuYW1lXG4gICAgfSlcblxuICAgIHRoaXMuc2V0KCdsb2NhdGlvbicsIGxvY2F0aW9uKVxuICAgIHRoaXMuc2V0KCdpbmZvJywgaW5mbyB8fCBjcmVhdGVJbmZvRWxlbWVudChpbmZvSFRNTCkpXG4gICAgdGhpcy5zZXQoJ2NvbG9yJywgeyAuLi5DT0xPUl9ERUZBVUxUUywgLi4uY29sb3IgfSlcbiAgICB0aGlzLm9uKCdwcm9wZXJ0eWNoYW5nZScsIHRoaXMuaGFuZGxlQ2hhbmdlKVxuICAgIHRoaXMucG9wdXAgPSB0aGlzLmluaXRQb3B1cCgpXG4gIH1cblxuICBwdWJsaWMgZ2V0IGhhc0luZm8gKCkge1xuICAgIHJldHVybiB0aGlzLnBvcHVwLmdldEVsZW1lbnQoKS5pbm5lckhUTUwudHJpbSgpICE9PSAnJ1xuICB9XG5cbiAgcHVibGljIHNob3dJbmZvIChtYXA6IE1hcCkge1xuICAgIGlmICh0aGlzLmhhc0luZm8pIHtcbiAgICAgIG1hcC5hZGRPdmVybGF5KHRoaXMucG9wdXApXG4gICAgfVxuICB9XG5cbiAgcHVibGljIGhpZGVJbmZvIChtYXA6IE1hcCkge1xuICAgIG1hcC5yZW1vdmVPdmVybGF5KHRoaXMucG9wdXApXG4gIH1cblxuICBwdWJsaWMgdG9nZ2xlSW5mbyAobWFwOiBNYXAsIHZhbHVlOiBib29sZWFuKSB7XG4gICAgcmV0dXJuIHZhbHVlID8gdGhpcy5zaG93SW5mbyhtYXApIDogdGhpcy5oaWRlSW5mbyhtYXApXG4gIH1cblxuICBwdWJsaWMgdG9KU09OICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5nZXQoJ25hbWUnKSxcbiAgICAgIGxvY2F0aW9uOiB0aGlzLmdldCgnbG9jYXRpb24nKSxcbiAgICAgIGluZm9IVE1MOiB0aGlzLmdldCgnaW5mbycpLmlubmVySFRNTCxcbiAgICAgIGNvbG9yOiBmaWx0ZXJPYmplY3Q8c3RyaW5nPih0aGlzLmdldCgnY29sb3InKSwgKGtleSwgdmFsdWUpID0+XG4gICAgICAgIHZhbHVlLnRvTG93ZXJDYXNlKCkgIT09IENPTE9SX0RFRkFVTFRTW2tleV0pXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBpbml0UG9wdXAgKCkge1xuICAgIGlmICh0aGlzLnBvcHVwKSB7XG4gICAgICB0aGlzLnBvcHVwLmRpc3Bvc2UoKVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgT3ZlcmxheSh7XG4gICAgICBlbGVtZW50OiB0aGlzLmdldCgnaW5mbycpLFxuICAgICAgcG9zaXRpb246IGZyb21Mb25MYXQodGhpcy5nZXQoJ2xvY2F0aW9uJykpLFxuICAgICAgcG9zaXRpb25pbmc6ICdjZW50ZXItbGVmdCcgYXMgT3ZlcmxheVBvc2l0aW9uaW5nLFxuICAgICAgb2Zmc2V0OiBbMjAsIDBdLFxuICAgICAgYXV0b1Bhbjoge1xuICAgICAgICBhbmltYXRpb246IHsgZHVyYXRpb246IDIwMCB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQ2hhbmdlID0gZXZlbnQgPT4ge1xuICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgICBjYXNlICdsb2NhdGlvbic6XG4gICAgICAgIHRoaXMucG9wdXAuc2V0UG9zaXRpb24oZnJvbUxvbkxhdCh0aGlzLmdldCgnbG9jYXRpb24nKSkpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ2luZm8nOlxuICAgICAgICB0aGlzLnBvcHVwLnNldEVsZW1lbnQodGhpcy5nZXQoJ2luZm8nKSlcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1hcmtlclN0eWxlIChmZWF0dXJlOiBGZWF0dXJlTGlrZSwgc2VsZWN0ZWQgPSBmYWxzZSkge1xuICBjb25zdCBjb2xvciA9IGZlYXR1cmUuZ2V0KCdjb2xvcicpXG5cbiAgcmV0dXJuIG5ldyBTdHlsZSh7XG4gICAgaW1hZ2U6IG5ldyBDaXJjbGUoe1xuICAgICAgcmFkaXVzOiAxMCxcbiAgICAgIGZpbGw6IG5ldyBGaWxsKHsgY29sb3I6IHNlbGVjdGVkID8gY29sb3Iuc2Vjb25kYXJ5IDogY29sb3IucHJpbWFyeSB9KSxcbiAgICAgIC4uLnNlbGVjdGVkID8ge1xuICAgICAgICBzdHJva2U6IG5ldyBTdHJva2Uoe1xuICAgICAgICAgIGNvbG9yOiBjb2xvci5wcmltYXJ5LFxuICAgICAgICAgIHdpZHRoOiAzXG4gICAgICAgIH0pXG4gICAgICB9IDoge31cbiAgICB9KSxcbiAgICB0ZXh0OiBuZXcgVGV4dCh7XG4gICAgICB0ZXh0OiBmZWF0dXJlLmdldCgnbmFtZScpLFxuICAgICAgdGV4dEFsaWduOiAndG9wJyxcbiAgICAgIGJhY2tncm91bmRGaWxsOiBuZXcgRmlsbCh7IGNvbG9yOiAnd2hpdGUnIH0pLFxuICAgICAgcGFkZGluZzogWzQsIDQsIDQsIDRdLFxuICAgICAgb2Zmc2V0WTogMjVcbiAgICB9KVxuICB9KVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGZpbHRlck9iamVjdDxUID0gYW55PlxuICAoc291cmNlOiBvYmplY3QsIHByZWRpY2F0ZTogKGtleTogc3RyaW5nLCB2YWx1ZTogVCkgPT4gYm9vbGVhbikge1xuICByZXR1cm4gT2JqZWN0LmVudHJpZXMoc291cmNlKS5yZWR1Y2UoKHJlc3VsdCwgW2tleSwgdmFsdWVdKSA9PiAoe1xuICAgIC4uLnJlc3VsdCxcbiAgICAuLi5wcmVkaWNhdGUoa2V5LCB2YWx1ZSkgPyB7IFtrZXldOiB2YWx1ZSB9IDoge31cbiAgfSksIHt9KVxufVxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmYgPSB7fTtcbi8vIFRoaXMgZmlsZSBjb250YWlucyBvbmx5IHRoZSBlbnRyeSBjaHVuay5cbi8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5lID0gKGNodW5rSWQpID0+IHtcblx0cmV0dXJuIFByb21pc2UuYWxsKE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uZikucmVkdWNlKChwcm9taXNlcywga2V5KSA9PiB7XG5cdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5mW2tleV0oY2h1bmtJZCwgcHJvbWlzZXMpO1xuXHRcdHJldHVybiBwcm9taXNlcztcblx0fSwgW10pKTtcbn07IiwiLy8gVGhpcyBmdW5jdGlvbiBhbGxvdyB0byByZWZlcmVuY2UgYXN5bmMgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnUgPSAoY2h1bmtJZCkgPT4ge1xuXHQvLyByZXR1cm4gdXJsIGZvciBmaWxlbmFtZXMgYmFzZWQgb24gdGVtcGxhdGVcblx0cmV0dXJuIFwiXCIgKyBjaHVua0lkICsgXCIuanNcIjtcbn07IiwiLy8gVGhpcyBmdW5jdGlvbiBhbGxvdyB0byByZWZlcmVuY2UgYWxsIGNodW5rc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5taW5pQ3NzRiA9IChjaHVua0lkKSA9PiB7XG5cdC8vIHJldHVybiB1cmwgZm9yIGZpbGVuYW1lcyBiYXNlZCBvbiB0ZW1wbGF0ZVxuXHRyZXR1cm4gXCJcIiArIGNodW5rSWQgKyBcIi5jc3NcIjtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFByb21pc2UgPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQxNzk6IDBcbn07XG5cblxuX193ZWJwYWNrX3JlcXVpcmVfXy5mLmogPSAoY2h1bmtJZCwgcHJvbWlzZXMpID0+IHtcblx0XHQvLyBKU09OUCBjaHVuayBsb2FkaW5nIGZvciBqYXZhc2NyaXB0XG5cdFx0dmFyIGluc3RhbGxlZENodW5rRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpID8gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdIDogdW5kZWZpbmVkO1xuXHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSAhPT0gMCkgeyAvLyAwIG1lYW5zIFwiYWxyZWFkeSBpbnN0YWxsZWRcIi5cblxuXHRcdFx0Ly8gYSBQcm9taXNlIG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cblx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSkge1xuXHRcdFx0XHRwcm9taXNlcy5wdXNoKGluc3RhbGxlZENodW5rRGF0YVsyXSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZih0cnVlKSB7IC8vIGFsbCBjaHVua3MgaGF2ZSBKU1xuXHRcdFx0XHRcdC8vIHNldHVwIFByb21pc2UgaW4gY2h1bmsgY2FjaGVcblx0XHRcdFx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0XHRcdGluc3RhbGxlZENodW5rRGF0YSA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IFtyZXNvbHZlLCByZWplY3RdO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkQ2h1bmtEYXRhWzJdID0gcHJvbWlzZSk7XG5cblx0XHRcdFx0XHQvLyBzdGFydCBjaHVuayBsb2FkaW5nXG5cdFx0XHRcdFx0dmFyIHVybCA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIF9fd2VicGFja19yZXF1aXJlX18udShjaHVua0lkKTtcblx0XHRcdFx0XHQvLyBjcmVhdGUgZXJyb3IgYmVmb3JlIHN0YWNrIHVud291bmQgdG8gZ2V0IHVzZWZ1bCBzdGFja3RyYWNlIGxhdGVyXG5cdFx0XHRcdFx0dmFyIGVycm9yID0gbmV3IEVycm9yKCk7XG5cdFx0XHRcdFx0dmFyIGxvYWRpbmdFbmRlZCA9IChldmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkpIHtcblx0XHRcdFx0XHRcdFx0aW5zdGFsbGVkQ2h1bmtEYXRhID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdO1xuXHRcdFx0XHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEgIT09IDApIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGVycm9yVHlwZSA9IGV2ZW50ICYmIChldmVudC50eXBlID09PSAnbG9hZCcgPyAnbWlzc2luZycgOiBldmVudC50eXBlKTtcblx0XHRcdFx0XHRcdFx0XHR2YXIgcmVhbFNyYyA9IGV2ZW50ICYmIGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQuc3JjO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLm1lc3NhZ2UgPSAnTG9hZGluZyBjaHVuayAnICsgY2h1bmtJZCArICcgZmFpbGVkLlxcbignICsgZXJyb3JUeXBlICsgJzogJyArIHJlYWxTcmMgKyAnKSc7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IubmFtZSA9ICdDaHVua0xvYWRFcnJvcic7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IudHlwZSA9IGVycm9yVHlwZTtcblx0XHRcdFx0XHRcdFx0XHRlcnJvci5yZXF1ZXN0ID0gcmVhbFNyYztcblx0XHRcdFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua0RhdGFbMV0oZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmwodXJsLCBsb2FkaW5nRW5kZWQsIFwiY2h1bmstXCIgKyBjaHVua0lkLCBjaHVua0lkKTtcblx0XHRcdFx0fSBlbHNlIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG5cdFx0XHR9XG5cdFx0fVxufTtcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuLy8gbm8gZGVmZXJyZWQgc3RhcnR1cFxuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdH1cblx0fVxuXHRpZihydW50aW1lKSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdHdoaWxlKHJlc29sdmVzLmxlbmd0aCkge1xuXHRcdHJlc29sdmVzLnNoaWZ0KCkoKTtcblx0fVxuXG59XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSBzZWxmW1wid2VicGFja0NodW5rbWFwX21hcmtlcnNcIl0gPSBzZWxmW1wid2VicGFja0NodW5rbWFwX21hcmtlcnNcIl0gfHwgW107XG5jaHVua0xvYWRpbmdHbG9iYWwuZm9yRWFjaCh3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIDApKTtcbmNodW5rTG9hZGluZ0dsb2JhbC5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCBjaHVua0xvYWRpbmdHbG9iYWwucHVzaC5iaW5kKGNodW5rTG9hZGluZ0dsb2JhbCkpO1xuXG4vLyBubyBkZWZlcnJlZCBzdGFydHVwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0eWxlL0ljb25JbWFnZUNhY2hlXG4gKi9cbmltcG9ydCB7IGFzU3RyaW5nIH0gZnJvbSAnLi4vY29sb3IuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBTaW5nbGV0b24gY2xhc3MuIEF2YWlsYWJsZSB0aHJvdWdoIHtAbGluayBtb2R1bGU6b2wvc3R5bGUvSWNvbkltYWdlQ2FjaGV+c2hhcmVkfS5cbiAqL1xudmFyIEljb25JbWFnZUNhY2hlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEljb25JbWFnZUNhY2hlKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuL0ljb25JbWFnZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2FjaGVfID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYWNoZVNpemVfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heENhY2hlU2l6ZV8gPSAzMjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAgICovXG4gICAgSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNhY2hlXyA9IHt9O1xuICAgICAgICB0aGlzLmNhY2hlU2l6ZV8gPSAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ2FuIGV4cGlyZSBjYWNoZS5cbiAgICAgKi9cbiAgICBJY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuY2FuRXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlU2l6ZV8gPiB0aGlzLm1heENhY2hlU2l6ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICAgKi9cbiAgICBJY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuZXhwaXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jYWNoZV8pIHtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbkltYWdlID0gdGhpcy5jYWNoZV9ba2V5XTtcbiAgICAgICAgICAgICAgICBpZiAoKGkrKyAmIDMpID09PSAwICYmICFpY29uSW1hZ2UuaGFzTGlzdGVuZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jYWNoZV9ba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgLS10aGlzLmNhY2hlU2l6ZV87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNyYy5cbiAgICAgKiBAcGFyYW0gez9zdHJpbmd9IGNyb3NzT3JpZ2luIENyb3NzIG9yaWdpbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfSBjb2xvciBDb2xvci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0ljb25JbWFnZS5qc1wiKS5kZWZhdWx0fSBJY29uIGltYWdlLlxuICAgICAqL1xuICAgIEljb25JbWFnZUNhY2hlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpIHtcbiAgICAgICAgdmFyIGtleSA9IGdldEtleShzcmMsIGNyb3NzT3JpZ2luLCBjb2xvcik7XG4gICAgICAgIHJldHVybiBrZXkgaW4gdGhpcy5jYWNoZV8gPyB0aGlzLmNhY2hlX1trZXldIDogbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgU3JjLlxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J9IGNvbG9yIENvbG9yLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9JY29uSW1hZ2UuanNcIikuZGVmYXVsdH0gaWNvbkltYWdlIEljb24gaW1hZ2UuXG4gICAgICovXG4gICAgSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChzcmMsIGNyb3NzT3JpZ2luLCBjb2xvciwgaWNvbkltYWdlKSB7XG4gICAgICAgIHZhciBrZXkgPSBnZXRLZXkoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpO1xuICAgICAgICB0aGlzLmNhY2hlX1trZXldID0gaWNvbkltYWdlO1xuICAgICAgICArK3RoaXMuY2FjaGVTaXplXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY2FjaGUgc2l6ZSBvZiB0aGUgaWNvbiBjYWNoZS4gRGVmYXVsdCBpcyBgMzJgLiBDaGFuZ2UgdGhpcyB2YWx1ZSB3aGVuXG4gICAgICogeW91ciBtYXAgdXNlcyBtb3JlIHRoYW4gMzIgZGlmZmVyZW50IGljb24gaW1hZ2VzIGFuZCB5b3UgYXJlIG5vdCBjYWNoaW5nIGljb25cbiAgICAgKiBzdHlsZXMgb24gdGhlIGFwcGxpY2F0aW9uIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhDYWNoZVNpemUgQ2FjaGUgbWF4IHNpemUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEljb25JbWFnZUNhY2hlLnByb3RvdHlwZS5zZXRTaXplID0gZnVuY3Rpb24gKG1heENhY2hlU2l6ZSkge1xuICAgICAgICB0aGlzLm1heENhY2hlU2l6ZV8gPSBtYXhDYWNoZVNpemU7XG4gICAgICAgIHRoaXMuZXhwaXJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gSWNvbkltYWdlQ2FjaGU7XG59KCkpO1xuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNyYy5cbiAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn0gY29sb3IgQ29sb3IuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IENhY2hlIGtleS5cbiAqL1xuZnVuY3Rpb24gZ2V0S2V5KHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yKSB7XG4gICAgdmFyIGNvbG9yU3RyaW5nID0gY29sb3IgPyBhc1N0cmluZyhjb2xvcikgOiAnbnVsbCc7XG4gICAgcmV0dXJuIGNyb3NzT3JpZ2luICsgJzonICsgc3JjICsgJzonICsgY29sb3JTdHJpbmc7XG59XG5leHBvcnQgZGVmYXVsdCBJY29uSW1hZ2VDYWNoZTtcbi8qKlxuICogVGhlIHtAbGluayBtb2R1bGU6b2wvc3R5bGUvSWNvbkltYWdlQ2FjaGV+SWNvbkltYWdlQ2FjaGV9IGZvclxuICoge0BsaW5rIG1vZHVsZTpvbC9zdHlsZS9JY29ufkljb259IGltYWdlcy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBzaGFyZWQgPSBuZXcgSWNvbkltYWdlQ2FjaGUoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUljb25JbWFnZUNhY2hlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9Qcm9wZXJ0eVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBPUEFDSVRZOiAnb3BhY2l0eScsXG4gICAgVklTSUJMRTogJ3Zpc2libGUnLFxuICAgIEVYVEVOVDogJ2V4dGVudCcsXG4gICAgWl9JTkRFWDogJ3pJbmRleCcsXG4gICAgTUFYX1JFU09MVVRJT046ICdtYXhSZXNvbHV0aW9uJyxcbiAgICBNSU5fUkVTT0xVVElPTjogJ21pblJlc29sdXRpb24nLFxuICAgIE1BWF9aT09NOiAnbWF4Wm9vbScsXG4gICAgTUlOX1pPT006ICdtaW5ab29tJyxcbiAgICBTT1VSQ0U6ICdzb3VyY2UnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb3BlcnR5LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvQmFzZVxuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IExheWVyUHJvcGVydHkgZnJvbSAnLi9Qcm9wZXJ0eS5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuLi9tYXRoLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWxheWVyJ10gQSBDU1MgY2xhc3MgbmFtZSB0byBzZXQgdG8gdGhlIGxheWVyIGVsZW1lbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbV0gVGhlIG1pbmltdW0gdmlldyB6b29tIGxldmVsIChleGNsdXNpdmUpIGFib3ZlIHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gVGhlIG1heGltdW0gdmlldyB6b29tIGxldmVsIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBOb3RlIHRoYXQgd2l0aCB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2V9IGFuZCBhbGwgaXRzIHN1YmNsYXNzZXMsIGFueSBwcm9wZXJ0eSBzZXQgaW5cbiAqIHRoZSBvcHRpb25zIGlzIHNldCBhcyBhIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fSBwcm9wZXJ0eSBvbiB0aGUgbGF5ZXIgb2JqZWN0LCBzb1xuICogaXMgb2JzZXJ2YWJsZSwgYW5kIGhhcyBnZXQvc2V0IGFjY2Vzc29ycy5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBCYXNlTGF5ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJhc2VMYXllciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgTGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBCYXNlTGF5ZXIob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsICo+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuT1BBQ0lUWV0gPVxuICAgICAgICAgICAgb3B0aW9ucy5vcGFjaXR5ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm9wYWNpdHkgOiAxO1xuICAgICAgICBhc3NlcnQodHlwZW9mIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5PUEFDSVRZXSA9PT0gJ251bWJlcicsIDY0KTsgLy8gTGF5ZXIgb3BhY2l0eSBtdXN0IGJlIGEgbnVtYmVyXG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5WSVNJQkxFXSA9XG4gICAgICAgICAgICBvcHRpb25zLnZpc2libGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudmlzaWJsZSA6IHRydWU7XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5aX0lOREVYXSA9IG9wdGlvbnMuekluZGV4O1xuICAgICAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuTUFYX1JFU09MVVRJT05dID1cbiAgICAgICAgICAgIG9wdGlvbnMubWF4UmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tYXhSZXNvbHV0aW9uIDogSW5maW5pdHk7XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NSU5fUkVTT0xVVElPTl0gPVxuICAgICAgICAgICAgb3B0aW9ucy5taW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblJlc29sdXRpb24gOiAwO1xuICAgICAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuTUlOX1pPT01dID1cbiAgICAgICAgICAgIG9wdGlvbnMubWluWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5taW5ab29tIDogLUluZmluaXR5O1xuICAgICAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuTUFYX1pPT01dID1cbiAgICAgICAgICAgIG9wdGlvbnMubWF4Wm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tYXhab29tIDogSW5maW5pdHk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2xhc3NOYW1lXyA9XG4gICAgICAgICAgICBwcm9wZXJ0aWVzLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnb2wtbGF5ZXInO1xuICAgICAgICBkZWxldGUgcHJvcGVydGllcy5jbGFzc05hbWU7XG4gICAgICAgIF90aGlzLnNldFByb3BlcnRpZXMocHJvcGVydGllcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZX1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXRlXyA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBDU1MgY2xhc3MgbmFtZS5cbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldENsYXNzTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xhc3NOYW1lXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIG5vdCBtZWFudCB0byBiZSBjYWxsZWQgYnkgbGF5ZXJzIG9yIGxheWVyIHJlbmRlcmVycyBiZWNhdXNlIHRoZSBzdGF0ZVxuICAgICAqIGlzIGluY29ycmVjdCBpZiB0aGUgbGF5ZXIgaXMgaW5jbHVkZWQgaW4gYSBsYXllciBncm91cC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9tYW5hZ2VkIExheWVyIGlzIG1hbmFnZWQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZX0gTGF5ZXIgc3RhdGUuXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRMYXllclN0YXRlID0gZnVuY3Rpb24gKG9wdF9tYW5hZ2VkKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZX0gKi9cbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZV8gfHxcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi8gKHtcbiAgICAgICAgICAgICAgICBsYXllcjogdGhpcyxcbiAgICAgICAgICAgICAgICBtYW5hZ2VkOiBvcHRfbWFuYWdlZCA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IG9wdF9tYW5hZ2VkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHZhciB6SW5kZXggPSB0aGlzLmdldFpJbmRleCgpO1xuICAgICAgICBzdGF0ZS5vcGFjaXR5ID0gY2xhbXAoTWF0aC5yb3VuZCh0aGlzLmdldE9wYWNpdHkoKSAqIDEwMCkgLyAxMDAsIDAsIDEpO1xuICAgICAgICBzdGF0ZS5zb3VyY2VTdGF0ZSA9IHRoaXMuZ2V0U291cmNlU3RhdGUoKTtcbiAgICAgICAgc3RhdGUudmlzaWJsZSA9IHRoaXMuZ2V0VmlzaWJsZSgpO1xuICAgICAgICBzdGF0ZS5leHRlbnQgPSB0aGlzLmdldEV4dGVudCgpO1xuICAgICAgICBzdGF0ZS56SW5kZXggPVxuICAgICAgICAgICAgekluZGV4ICE9PSB1bmRlZmluZWQgPyB6SW5kZXggOiBzdGF0ZS5tYW5hZ2VkID09PSBmYWxzZSA/IEluZmluaXR5IDogMDtcbiAgICAgICAgc3RhdGUubWF4UmVzb2x1dGlvbiA9IHRoaXMuZ2V0TWF4UmVzb2x1dGlvbigpO1xuICAgICAgICBzdGF0ZS5taW5SZXNvbHV0aW9uID0gTWF0aC5tYXgodGhpcy5nZXRNaW5SZXNvbHV0aW9uKCksIDApO1xuICAgICAgICBzdGF0ZS5taW5ab29tID0gdGhpcy5nZXRNaW5ab29tKCk7XG4gICAgICAgIHN0YXRlLm1heFpvb20gPSB0aGlzLmdldE1heFpvb20oKTtcbiAgICAgICAgdGhpcy5zdGF0ZV8gPSBzdGF0ZTtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+PX0gb3B0X2FycmF5IEFycmF5IG9mIGxheWVycyAodG8gYmVcbiAgICAgKiAgICAgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59IEFycmF5IG9mIGxheWVycy5cbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldExheWVyc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9hcnJheSkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZT49fSBvcHRfc3RhdGVzIE9wdGlvbmFsIGxpc3Qgb2YgbGF5ZXJcbiAgICAgKiAgICAgc3RhdGVzICh0byBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZT59IExpc3Qgb2YgbGF5ZXIgc3RhdGVzLlxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TGF5ZXJTdGF0ZXNBcnJheSA9IGZ1bmN0aW9uIChvcHRfc3RhdGVzKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB7QGxpbmsgbW9kdWxlOm9sL2V4dGVudH5FeHRlbnQgZXh0ZW50fSBvZiB0aGUgbGF5ZXIgb3IgYHVuZGVmaW5lZGAgaWYgaXRcbiAgICAgKiB3aWxsIGJlIHZpc2libGUgcmVnYXJkbGVzcyBvZiBleHRlbnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudHx1bmRlZmluZWR9IFRoZSBsYXllciBleHRlbnQuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRFeHRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5FWFRFTlQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXhpbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TWF4UmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5NQVhfUkVTT0xVVElPTikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBtaW5pbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRNaW5SZXNvbHV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk1JTl9SRVNPTFVUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG1pbmltdW0gem9vbSBsZXZlbCBvZiB0aGUgbGF5ZXIuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWluaW11bSB6b29tIGxldmVsIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldE1pblpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUlOX1pPT00pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbWF4aW11bSB6b29tIGxldmVsIG9mIHRoZSBsYXllci5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TWF4Wm9vbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5NQVhfWk9PTSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBvcGFjaXR5IG9mIHRoZSBsYXllciAoYmV0d2VlbiAwIGFuZCAxKS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBvcGFjaXR5IG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldE9wYWNpdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuT1BBQ0lUWSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc291cmNlL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFNvdXJjZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldFNvdXJjZVN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIgKGB0cnVlYCBvciBgZmFsc2VgKS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRWaXNpYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtib29sZWFufSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5WSVNJQkxFKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIFotaW5kZXggb2YgdGhlIGxheWVyLCB3aGljaCBpcyB1c2VkIHRvIG9yZGVyIGxheWVycyBiZWZvcmVcbiAgICAgKiByZW5kZXJpbmcuIFRoZSBkZWZhdWx0IFotaW5kZXggaXMgMC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBaLWluZGV4IG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldFpJbmRleCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5aX0lOREVYKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGV4dGVudCBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS4gIElmIGB1bmRlZmluZWRgLCB0aGUgbGF5ZXJcbiAgICAgKiB3aWxsIGJlIHZpc2libGUgYXQgYWxsIGV4dGVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fHVuZGVmaW5lZH0gZXh0ZW50IFRoZSBleHRlbnQgb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuc2V0RXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5LkVYVEVOVCwgZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbWF4aW11bSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuc2V0TWF4UmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChtYXhSZXNvbHV0aW9uKSB7XG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuTUFYX1JFU09MVVRJT04sIG1heFJlc29sdXRpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBtaW5pbXVtIHJlc29sdXRpb24gYXQgd2hpY2ggdGhlIGxheWVyIGlzIHZpc2libGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblJlc29sdXRpb24gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRNaW5SZXNvbHV0aW9uID0gZnVuY3Rpb24gKG1pblJlc29sdXRpb24pIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5NSU5fUkVTT0xVVElPTiwgbWluUmVzb2x1dGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG1heGltdW0gem9vbSAoZXhjbHVzaXZlKSBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS5cbiAgICAgKiBOb3RlIHRoYXQgdGhlIHpvb20gbGV2ZWxzIGZvciBsYXllciB2aXNpYmlsaXR5IGFyZSBiYXNlZCBvbiB0aGVcbiAgICAgKiB2aWV3IHpvb20gbGV2ZWwsIHdoaWNoIG1heSBiZSBkaWZmZXJlbnQgZnJvbSBhIHRpbGUgc291cmNlIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFpvb20gVGhlIG1heGltdW0gem9vbSBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRNYXhab29tID0gZnVuY3Rpb24gKG1heFpvb20pIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5NQVhfWk9PTSwgbWF4Wm9vbSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG1pbmltdW0gem9vbSAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS5cbiAgICAgKiBOb3RlIHRoYXQgdGhlIHpvb20gbGV2ZWxzIGZvciBsYXllciB2aXNpYmlsaXR5IGFyZSBiYXNlZCBvbiB0aGVcbiAgICAgKiB2aWV3IHpvb20gbGV2ZWwsIHdoaWNoIG1heSBiZSBkaWZmZXJlbnQgZnJvbSBhIHRpbGUgc291cmNlIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblpvb20gVGhlIG1pbmltdW0gem9vbSBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRNaW5ab29tID0gZnVuY3Rpb24gKG1pblpvb20pIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5NSU5fWk9PTSwgbWluWm9vbSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG9wYWNpdHkgb2YgdGhlIGxheWVyLCBhbGxvd2VkIHZhbHVlcyByYW5nZSBmcm9tIDAgdG8gMS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eSBUaGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRPcGFjaXR5ID0gZnVuY3Rpb24gKG9wYWNpdHkpIHtcbiAgICAgICAgYXNzZXJ0KHR5cGVvZiBvcGFjaXR5ID09PSAnbnVtYmVyJywgNjQpOyAvLyBMYXllciBvcGFjaXR5IG11c3QgYmUgYSBudW1iZXJcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5PUEFDSVRZLCBvcGFjaXR5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIgKGB0cnVlYCBvciBgZmFsc2VgKS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZpc2libGUgVGhlIHZpc2liaWxpdHkgb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuc2V0VmlzaWJsZSA9IGZ1bmN0aW9uICh2aXNpYmxlKSB7XG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuVklTSUJMRSwgdmlzaWJsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgWi1pbmRleCBvZiB0aGUgbGF5ZXIsIHdoaWNoIGlzIHVzZWQgdG8gb3JkZXIgbGF5ZXJzIGJlZm9yZSByZW5kZXJpbmcuXG4gICAgICogVGhlIGRlZmF1bHQgWi1pbmRleCBpcyAwLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6aW5kZXggVGhlIHotaW5kZXggb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuc2V0WkluZGV4ID0gZnVuY3Rpb24gKHppbmRleCkge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5LlpfSU5ERVgsIHppbmRleCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGVfKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlXy5sYXllciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnN0YXRlXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBCYXNlTGF5ZXI7XG59KEJhc2VPYmplY3QpKTtcbmV4cG9ydCBkZWZhdWx0IEJhc2VMYXllcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJhc2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9FdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGJlZm9yZSBhIGxheWVyIGlzIHJlbmRlcmVkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3ByZXJlbmRlclxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQUkVSRU5ERVI6ICdwcmVyZW5kZXInLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciBhIGxheWVyIGlzIHJlbmRlcmVkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3Bvc3RyZW5kZXJcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUE9TVFJFTkRFUjogJ3Bvc3RyZW5kZXInLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBiZWZvcmUgbGF5ZXJzIGFyZSByZW5kZXJlZC5cbiAgICAgKiBUaGUgZXZlbnQgb2JqZWN0IHdpbGwgbm90IGhhdmUgYSBgY29udGV4dGAgc2V0LlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3ByZWNvbXBvc2VcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUFJFQ09NUE9TRTogJ3ByZWNvbXBvc2UnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciBhbGwgbGF5ZXJzIGFyZSByZW5kZXJlZC5cbiAgICAgKiBUaGUgZXZlbnQgb2JqZWN0IHdpbGwgbm90IGhhdmUgYSBgY29udGV4dGAgc2V0LlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3Bvc3Rjb21wb3NlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBPU1RDT01QT1NFOiAncG9zdGNvbXBvc2UnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIHJlbmRlcmluZyBpcyBjb21wbGV0ZSwgaS5lLiBhbGwgc291cmNlcyBhbmQgdGlsZXMgaGF2ZVxuICAgICAqIGZpbmlzaGVkIGxvYWRpbmcgZm9yIHRoZSBjdXJyZW50IHZpZXdwb3J0LCBhbmQgYWxsIHRpbGVzIGFyZSBmYWRlZCBpbi5cbiAgICAgKiBUaGUgZXZlbnQgb2JqZWN0IHdpbGwgbm90IGhhdmUgYSBgY29udGV4dGAgc2V0LlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3JlbmRlcmNvbXBsZXRlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFJFTkRFUkNPTVBMRVRFOiAncmVuZGVyY29tcGxldGUnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1N0YXRlXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIFN0YXRlIG9mIHRoZSBzb3VyY2UsIG9uZSBvZiAndW5kZWZpbmVkJywgJ2xvYWRpbmcnLCAncmVhZHknIG9yICdlcnJvcicuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBVTkRFRklORUQ6ICd1bmRlZmluZWQnLFxuICAgIExPQURJTkc6ICdsb2FkaW5nJyxcbiAgICBSRUFEWTogJ3JlYWR5JyxcbiAgICBFUlJPUjogJ2Vycm9yJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdGF0ZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0xheWVyXG4gKi9cbmltcG9ydCBCYXNlTGF5ZXIgZnJvbSAnLi9CYXNlLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTGF5ZXJQcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi4vc291cmNlL1N0YXRlLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi4vb2JqLmpzJztcbmltcG9ydCB7IGdldENoYW5nZUV2ZW50VHlwZSB9IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuLi9ldmVudHMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGUpOkhUTUxFbGVtZW50fSBSZW5kZXJGdW5jdGlvblxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1sYXllciddIEEgQ1NTIGNsYXNzIG5hbWUgdG8gc2V0IHRvIHRoZSBsYXllciBlbGVtZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvcGFjaXR5PTFdIE9wYWNpdHkgKDAsIDEpLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmlzaWJsZT10cnVlXSBWaXNpYmlsaXR5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgYm91bmRpbmcgZXh0ZW50IGZvciBsYXllciByZW5kZXJpbmcuICBUaGUgbGF5ZXIgd2lsbCBub3QgYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhpcyBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleF0gVGhlIHotaW5kZXggZm9yIGxheWVyIHJlbmRlcmluZy4gIEF0IHJlbmRlcmluZyB0aW1lLCB0aGUgbGF5ZXJzXG4gKiB3aWxsIGJlIG9yZGVyZWQsIGZpcnN0IGJ5IFotaW5kZXggYW5kIHRoZW4gYnkgcG9zaXRpb24uIFdoZW4gYHVuZGVmaW5lZGAsIGEgYHpJbmRleGAgb2YgMCBpcyBhc3N1bWVkXG4gKiBmb3IgbGF5ZXJzIHRoYXQgYXJlIGFkZGVkIHRvIHRoZSBtYXAncyBgbGF5ZXJzYCBjb2xsZWN0aW9uLCBvciBgSW5maW5pdHlgIHdoZW4gdGhlIGxheWVyJ3MgYHNldE1hcCgpYFxuICogbWV0aG9kIHdhcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiAoZXhjbHVzaXZlKSBiZWxvdyB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb21dIFRoZSBtaW5pbXVtIHZpZXcgem9vbSBsZXZlbCAoZXhjbHVzaXZlKSBhYm92ZSB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIFRoZSBtYXhpbXVtIHZpZXcgem9vbSBsZXZlbCAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2UuanNcIikuZGVmYXVsdH0gW3NvdXJjZV0gU291cmNlIGZvciB0aGlzIGxheWVyLiAgSWYgbm90IHByb3ZpZGVkIHRvIHRoZSBjb25zdHJ1Y3RvcixcbiAqIHRoZSBzb3VyY2UgY2FuIGJlIHNldCBieSBjYWxsaW5nIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXIjc2V0U291cmNlIGxheWVyLnNldFNvdXJjZShzb3VyY2UpfSBhZnRlclxuICogY29uc3RydWN0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gW21hcF0gTWFwLlxuICogQHByb3BlcnR5IHtSZW5kZXJGdW5jdGlvbn0gW3JlbmRlcl0gUmVuZGVyIGZ1bmN0aW9uLiBUYWtlcyB0aGUgZnJhbWUgc3RhdGUgYXMgaW5wdXQgYW5kIGlzIGV4cGVjdGVkIHRvIHJldHVybiBhblxuICogSFRNTCBlbGVtZW50LiBXaWxsIG92ZXJ3cml0ZSB0aGUgZGVmYXVsdCByZW5kZXJpbmcgZm9yIHRoZSBsYXllci5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTdGF0ZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyXG4gKiBAcHJvcGVydHkge251bWJlcn0gb3BhY2l0eSBPcGFjaXR5LCB0aGUgdmFsdWUgaXMgcm91bmRlZCB0byB0d28gZGlnaXRzIHRvIGFwcGVhciBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc291cmNlL1N0YXRlLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVN0YXRlXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHZpc2libGVcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gbWFuYWdlZFxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XVxuICogQHByb3BlcnR5IHtudW1iZXJ9IHpJbmRleFxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1heFJlc29sdXRpb25cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaW5SZXNvbHV0aW9uXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWluWm9vbVxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1heFpvb21cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIGZyb20gd2hpY2ggYWxsIGxheWVyIHR5cGVzIGFyZSBkZXJpdmVkLiBUaGlzIHNob3VsZCBvbmx5IGJlIGluc3RhbnRpYXRlZFxuICogaW4gdGhlIGNhc2Ugd2hlcmUgYSBjdXN0b20gbGF5ZXIgaXMgYmUgYWRkZWQgdG8gdGhlIG1hcCB3aXRoIGEgY3VzdG9tIGByZW5kZXJgIGZ1bmN0aW9uLlxuICogU3VjaCBhIGZ1bmN0aW9uIGNhbiBiZSBzcGVjaWZpZWQgaW4gdGhlIGBvcHRpb25zYCBvYmplY3QsIGFuZCBpcyBleHBlY3RlZCB0byByZXR1cm4gYW4gSFRNTCBlbGVtZW50LlxuICpcbiAqIEEgdmlzdWFsIHJlcHJlc2VudGF0aW9uIG9mIHJhc3RlciBvciB2ZWN0b3IgbWFwIGRhdGEuXG4gKiBMYXllcnMgZ3JvdXAgdG9nZXRoZXIgdGhvc2UgcHJvcGVydGllcyB0aGF0IHBlcnRhaW4gdG8gaG93IHRoZSBkYXRhIGlzIHRvIGJlXG4gKiBkaXNwbGF5ZWQsIGlycmVzcGVjdGl2ZSBvZiB0aGUgc291cmNlIG9mIHRoYXQgZGF0YS5cbiAqXG4gKiBMYXllcnMgYXJlIHVzdWFsbHkgYWRkZWQgdG8gYSBtYXAgd2l0aCB7QGxpbmsgbW9kdWxlOm9sL01hcCNhZGRMYXllcn0uIENvbXBvbmVudHNcbiAqIGxpa2Uge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9TZWxlY3R+U2VsZWN0fSB1c2UgdW5tYW5hZ2VkIGxheWVyc1xuICogaW50ZXJuYWxseS4gVGhlc2UgdW5tYW5hZ2VkIGxheWVycyBhcmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBtYXAgdXNpbmdcbiAqIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIjc2V0TWFwfSBpbnN0ZWFkLlxuICpcbiAqIEEgZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBpcyBmaXJlZCB3aGVuIHRoZSBzdGF0ZSBvZiB0aGUgc291cmNlIGNoYW5nZXMuXG4gKlxuICogUGxlYXNlIG5vdGUgdGhhdCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucyBzZXZlcmFsIGxheWVycyBtaWdodCBnZXQgcmVuZGVyZWQgdG9cbiAqIHRoZSBzYW1lIEhUTUwgZWxlbWVudCwgd2hpY2ggd2lsbCBjYXVzZSB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXAjZm9yRWFjaExheWVyQXRQaXhlbH0gdG9cbiAqIGdpdmUgZmFsc2UgcG9zaXRpdmVzLiBUbyBhdm9pZCB0aGlzLCBhcHBseSBkaWZmZXJlbnQgYGNsYXNzTmFtZWAgcHJvcGVydGllcyB0byB0aGVcbiAqIGxheWVycyBhdCBjcmVhdGlvbiB0aW1lLlxuICpcbiAqIEBmaXJlcyBpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnQuanNcIikuUmVuZGVyRXZlbnQjcHJlcmVuZGVyXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50LmpzXCIpLlJlbmRlckV2ZW50I3Bvc3RyZW5kZXJcbiAqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2UuanNcIikuZGVmYXVsdH0gU291cmNlVHlwZVxuICogQGFwaVxuICovXG52YXIgTGF5ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExheWVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBMYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExheWVyKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGJhc2VPcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgZGVsZXRlIGJhc2VPcHRpb25zLnNvdXJjZTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBiYXNlT3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcFByZWNvbXBvc2VLZXlfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcFJlbmRlcktleV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc291cmNlQ2hhbmdlS2V5XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyZXIvTGF5ZXIuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVyXyA9IG51bGw7XG4gICAgICAgIC8vIE92ZXJ3cml0ZSBkZWZhdWx0IHJlbmRlciBtZXRob2Qgd2l0aCBhIGN1c3RvbSBvbmVcbiAgICAgICAgaWYgKG9wdGlvbnMucmVuZGVyKSB7XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXIgPSBvcHRpb25zLnJlbmRlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5tYXApIHtcbiAgICAgICAgICAgIF90aGlzLnNldE1hcChvcHRpb25zLm1hcCk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihnZXRDaGFuZ2VFdmVudFR5cGUoTGF5ZXJQcm9wZXJ0eS5TT1VSQ0UpLCBfdGhpcy5oYW5kbGVTb3VyY2VQcm9wZXJ0eUNoYW5nZV8pO1xuICAgICAgICB2YXIgc291cmNlID0gb3B0aW9ucy5zb3VyY2VcbiAgICAgICAgICAgID8gLyoqIEB0eXBlIHtTb3VyY2VUeXBlfSAqLyAob3B0aW9ucy5zb3VyY2UpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIF90aGlzLnNldFNvdXJjZShzb3VyY2UpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pj19IG9wdF9hcnJheSBBcnJheSBvZiBsYXllcnMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBBcnJheSBvZiBsYXllcnMuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmdldExheWVyc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9hcnJheSkge1xuICAgICAgICB2YXIgYXJyYXkgPSBvcHRfYXJyYXkgPyBvcHRfYXJyYXkgOiBbXTtcbiAgICAgICAgYXJyYXkucHVzaCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPj19IG9wdF9zdGF0ZXMgT3B0aW9uYWwgbGlzdCBvZiBsYXllciBzdGF0ZXMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gTGlzdCBvZiBsYXllciBzdGF0ZXMuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmdldExheWVyU3RhdGVzQXJyYXkgPSBmdW5jdGlvbiAob3B0X3N0YXRlcykge1xuICAgICAgICB2YXIgc3RhdGVzID0gb3B0X3N0YXRlcyA/IG9wdF9zdGF0ZXMgOiBbXTtcbiAgICAgICAgc3RhdGVzLnB1c2godGhpcy5nZXRMYXllclN0YXRlKCkpO1xuICAgICAgICByZXR1cm4gc3RhdGVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsYXllciBzb3VyY2UuXG4gICAgICogQHJldHVybiB7U291cmNlVHlwZX0gVGhlIGxheWVyIHNvdXJjZSAob3IgYG51bGxgIGlmIG5vdCB5ZXQgc2V0KS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuZ2V0U291cmNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtTb3VyY2VUeXBlfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5TT1VSQ0UpKSB8fCBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc291cmNlL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFNvdXJjZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuZ2V0U291cmNlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldFNvdXJjZSgpO1xuICAgICAgICByZXR1cm4gIXNvdXJjZSA/IFNvdXJjZVN0YXRlLlVOREVGSU5FRCA6IHNvdXJjZS5nZXRTdGF0ZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuaGFuZGxlU291cmNlQ2hhbmdlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5oYW5kbGVTb3VyY2VQcm9wZXJ0eUNoYW5nZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZUNoYW5nZUtleV8pIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5zb3VyY2VDaGFuZ2VLZXlfKTtcbiAgICAgICAgICAgIHRoaXMuc291cmNlQ2hhbmdlS2V5XyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuZ2V0U291cmNlKCk7XG4gICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIHRoaXMuc291cmNlQ2hhbmdlS2V5XyA9IGxpc3Rlbihzb3VyY2UsIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlU291cmNlQ2hhbmdlXywgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5PGltcG9ydChcIi4uL0ZlYXR1cmVcIikuZGVmYXVsdD4+fSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aFxuICAgICAqIGFuIGFycmF5IG9mIGZlYXR1cmVzLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRGZWF0dXJlcyA9IGZ1bmN0aW9uIChwaXhlbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uZ2V0RmVhdHVyZXMocGl4ZWwpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW4gY2hhcmdlIHRvIG1hbmFnZSB0aGUgcmVuZGVyaW5nIG9mIHRoZSBsYXllci4gT25lIGxheWVyIHR5cGUgaXNcbiAgICAgKiBib3VuZGVkIHdpdGggb25lIGxheWVyIHJlbmRlcmVyLlxuICAgICAqIEBwYXJhbSB7P2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBUYXJnZXQgd2hpY2ggdGhlIHJlbmRlcmVyIG1heSAoYnV0IG5lZWQgbm90KSB1c2VcbiAgICAgKiBmb3IgcmVuZGVyaW5nIGl0cyBjb250ZW50LlxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBUaGUgcmVuZGVyZWQgZWxlbWVudC5cbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUsIHRhcmdldCkge1xuICAgICAgICB2YXIgbGF5ZXJSZW5kZXJlciA9IHRoaXMuZ2V0UmVuZGVyZXIoKTtcbiAgICAgICAgaWYgKGxheWVyUmVuZGVyZXIucHJlcGFyZUZyYW1lKGZyYW1lU3RhdGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbGF5ZXJSZW5kZXJlci5yZW5kZXJGcmFtZShmcmFtZVN0YXRlLCB0YXJnZXQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBsYXllciB0byBiZSByZW5kZXJlZCBvbiB0b3Agb2Ygb3RoZXIgbGF5ZXJzIG9uIGEgbWFwLiBUaGUgbWFwIHdpbGxcbiAgICAgKiBub3QgbWFuYWdlIHRoaXMgbGF5ZXIgaW4gaXRzIGxheWVycyBjb2xsZWN0aW9uLCBhbmQgdGhlIGNhbGxiYWNrIGluXG4gICAgICoge0BsaW5rIG1vZHVsZTpvbC9NYXAjZm9yRWFjaExheWVyQXRQaXhlbH0gd2lsbCByZWNlaXZlIGBudWxsYCBhcyBsYXllci4gVGhpc1xuICAgICAqIGlzIHVzZWZ1bCBmb3IgdGVtcG9yYXJ5IGxheWVycy4gVG8gcmVtb3ZlIGFuIHVubWFuYWdlZCBsYXllciBmcm9tIHRoZSBtYXAsXG4gICAgICogdXNlIGAjc2V0TWFwKG51bGwpYC5cbiAgICAgKlxuICAgICAqIFRvIGFkZCB0aGUgbGF5ZXIgdG8gYSBtYXAgYW5kIGhhdmUgaXQgbWFuYWdlZCBieSB0aGUgbWFwLCB1c2VcbiAgICAgKiB7QGxpbmsgbW9kdWxlOm9sL01hcCNhZGRMYXllcn0gaW5zdGVhZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICBpZiAodGhpcy5tYXBQcmVjb21wb3NlS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLm1hcFByZWNvbXBvc2VLZXlfKTtcbiAgICAgICAgICAgIHRoaXMubWFwUHJlY29tcG9zZUtleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbWFwKSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXBSZW5kZXJLZXlfKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMubWFwUmVuZGVyS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLm1hcFJlbmRlcktleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXApIHtcbiAgICAgICAgICAgIHRoaXMubWFwUHJlY29tcG9zZUtleV8gPSBsaXN0ZW4obWFwLCBSZW5kZXJFdmVudFR5cGUuUFJFQ09NUE9TRSwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgIHZhciByZW5kZXJFdmVudCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50LmpzXCIpLmRlZmF1bHR9ICovIChldnQpO1xuICAgICAgICAgICAgICAgIHZhciBsYXllclN0YXRlc0FycmF5ID0gcmVuZGVyRXZlbnQuZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5O1xuICAgICAgICAgICAgICAgIHZhciBsYXllclN0YXRlID0gdGhpcy5nZXRMYXllclN0YXRlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAvLyBBIGxheWVyIGNhbiBvbmx5IGJlIGFkZGVkIHRvIHRoZSBtYXAgb25jZS4gVXNlIGVpdGhlciBgbGF5ZXIuc2V0TWFwKClgIG9yIGBtYXAuYWRkTGF5ZXIoKWAsIG5vdCBib3RoLlxuICAgICAgICAgICAgICAgIGFzc2VydCghbGF5ZXJTdGF0ZXNBcnJheS5zb21lKGZ1bmN0aW9uIChhcnJheUxheWVyU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5TGF5ZXJTdGF0ZS5sYXllciA9PT0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgICAgICAgICAgICB9KSwgNjcpO1xuICAgICAgICAgICAgICAgIGxheWVyU3RhdGVzQXJyYXkucHVzaChsYXllclN0YXRlKTtcbiAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5tYXBSZW5kZXJLZXlfID0gbGlzdGVuKHRoaXMsIEV2ZW50VHlwZS5DSEFOR0UsIG1hcC5yZW5kZXIsIG1hcCk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBsYXllciBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtTb3VyY2VUeXBlfSBzb3VyY2UgVGhlIGxheWVyIHNvdXJjZS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuc2V0U291cmNlID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5LlNPVVJDRSwgc291cmNlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcmVuZGVyZXIgZm9yIHRoaXMgbGF5ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcmVuZGVyZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gVGhlIGxheWVyIHJlbmRlcmVyLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVyXykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8gPSB0aGlzLmNyZWF0ZVJlbmRlcmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGxheWVyIGhhcyBhIHJlbmRlcmVyLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5oYXNSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5yZW5kZXJlcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSByZW5kZXJlciBmb3IgdGhpcyBsYXllci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9yZW5kZXJlci9MYXllci5qc1wiKS5kZWZhdWx0fSBBIGxheWVyIHJlbmRlcmVyLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuY3JlYXRlUmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRTb3VyY2UobnVsbCk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gTGF5ZXI7XG59KEJhc2VMYXllcikpO1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBsYXllciBpcyB2aXNpYmxlIGFuZCBpZiB0aGUgcHJvdmlkZWQgdmlldyBzdGF0ZVxuICogaGFzIHJlc29sdXRpb24gYW5kIHpvb20gbGV2ZWxzIHRoYXQgYXJlIGluIHJhbmdlIG9mIHRoZSBsYXllcidzIG1pbi9tYXguXG4gKiBAcGFyYW0ge1N0YXRlfSBsYXllclN0YXRlIExheWVyIHN0YXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLlN0YXRlfSB2aWV3U3RhdGUgVmlldyBzdGF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBsYXllciBpcyB2aXNpYmxlIGF0IHRoZSBnaXZlbiB2aWV3IHN0YXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5WaWV3KGxheWVyU3RhdGUsIHZpZXdTdGF0ZSkge1xuICAgIGlmICghbGF5ZXJTdGF0ZS52aXNpYmxlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIHJlc29sdXRpb24gPSB2aWV3U3RhdGUucmVzb2x1dGlvbjtcbiAgICBpZiAocmVzb2x1dGlvbiA8IGxheWVyU3RhdGUubWluUmVzb2x1dGlvbiB8fFxuICAgICAgICByZXNvbHV0aW9uID49IGxheWVyU3RhdGUubWF4UmVzb2x1dGlvbikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciB6b29tID0gdmlld1N0YXRlLnpvb207XG4gICAgcmV0dXJuIHpvb20gPiBsYXllclN0YXRlLm1pblpvb20gJiYgem9vbSA8PSBsYXllclN0YXRlLm1heFpvb207XG59XG5leHBvcnQgZGVmYXVsdCBMYXllcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxheWVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jb29yZGluYXRlXG4gKi9cbmltcG9ydCB7IGdldFdpZHRoIH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgbW9kdWxvIH0gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7IHBhZE51bWJlciB9IGZyb20gJy4vc3RyaW5nLmpzJztcbi8qKlxuICogQW4gYXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgYW4geHkgY29vcmRpbmF0ZS4gRXhhbXBsZTogYFsxNiwgNDhdYC5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBDb29yZGluYXRlXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9IGFuZFxuICogdHJhbnNmb3JtcyBpdCBpbnRvIGEgYHtzdHJpbmd9YC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKENvb3JkaW5hdGV8dW5kZWZpbmVkKSk6IHN0cmluZ30gQ29vcmRpbmF0ZUZvcm1hdFxuICogQGFwaVxuICovXG4vKipcbiAqIEFkZCBgZGVsdGFgIHRvIGBjb29yZGluYXRlYC4gYGNvb3JkaW5hdGVgIGlzIG1vZGlmaWVkIGluIHBsYWNlIGFuZCByZXR1cm5lZFxuICogYnkgdGhlIGZ1bmN0aW9uLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIGltcG9ydCB7YWRkfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgYWRkKGNvb3JkLCBbLTIsIDRdKTtcbiAqICAgICAvLyBjb29yZCBpcyBub3cgWzUuODUsIDUxLjk4MzMzM11cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gZGVsdGEgRGVsdGEuXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlfSBUaGUgaW5wdXQgY29vcmRpbmF0ZSBhZGp1c3RlZCBieVxuICogdGhlIGdpdmVuIGRlbHRhLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkKGNvb3JkaW5hdGUsIGRlbHRhKSB7XG4gICAgY29vcmRpbmF0ZVswXSArPSArZGVsdGFbMF07XG4gICAgY29vcmRpbmF0ZVsxXSArPSArZGVsdGFbMV07XG4gICAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHBvaW50IGNsb3Nlc3QgdG8gdGhlIHBhc3NlZCBjb29yZGluYXRlIG9uIHRoZSBwYXNzZWQgY2lyY2xlLlxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBUaGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL0NpcmNsZS5qc1wiKS5kZWZhdWx0fSBjaXJjbGUgVGhlIGNpcmNsZS5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IENsb3Nlc3QgcG9pbnQgb24gdGhlIGNpcmN1bWZlcmVuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0T25DaXJjbGUoY29vcmRpbmF0ZSwgY2lyY2xlKSB7XG4gICAgdmFyIHIgPSBjaXJjbGUuZ2V0UmFkaXVzKCk7XG4gICAgdmFyIGNlbnRlciA9IGNpcmNsZS5nZXRDZW50ZXIoKTtcbiAgICB2YXIgeDAgPSBjZW50ZXJbMF07XG4gICAgdmFyIHkwID0gY2VudGVyWzFdO1xuICAgIHZhciB4MSA9IGNvb3JkaW5hdGVbMF07XG4gICAgdmFyIHkxID0gY29vcmRpbmF0ZVsxXTtcbiAgICB2YXIgZHggPSB4MSAtIHgwO1xuICAgIHZhciBkeSA9IHkxIC0geTA7XG4gICAgaWYgKGR4ID09PSAwICYmIGR5ID09PSAwKSB7XG4gICAgICAgIGR4ID0gMTtcbiAgICB9XG4gICAgdmFyIGQgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgIHZhciB4ID0geDAgKyAociAqIGR4KSAvIGQ7XG4gICAgdmFyIHkgPSB5MCArIChyICogZHkpIC8gZDtcbiAgICByZXR1cm4gW3gsIHldO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBwb2ludCBjbG9zZXN0IHRvIHRoZSBwYXNzZWQgY29vcmRpbmF0ZSBvbiB0aGUgcGFzc2VkIHNlZ21lbnQuXG4gKiBUaGlzIGlzIHRoZSBmb290IG9mIHRoZSBwZXJwZW5kaWN1bGFyIG9mIHRoZSBjb29yZGluYXRlIHRvIHRoZSBzZWdtZW50IHdoZW5cbiAqIHRoZSBmb290IGlzIG9uIHRoZSBzZWdtZW50LCBvciB0aGUgY2xvc2VzdCBzZWdtZW50IGNvb3JkaW5hdGUgd2hlbiB0aGUgZm9vdFxuICogaXMgb3V0c2lkZSB0aGUgc2VnbWVudC5cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgVGhlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0FycmF5PENvb3JkaW5hdGU+fSBzZWdtZW50IFRoZSB0d28gY29vcmRpbmF0ZXNcbiAqIG9mIHRoZSBzZWdtZW50LlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gVGhlIGZvb3Qgb2YgdGhlIHBlcnBlbmRpY3VsYXIgb2ZcbiAqIHRoZSBjb29yZGluYXRlIHRvIHRoZSBzZWdtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VzdE9uU2VnbWVudChjb29yZGluYXRlLCBzZWdtZW50KSB7XG4gICAgdmFyIHgwID0gY29vcmRpbmF0ZVswXTtcbiAgICB2YXIgeTAgPSBjb29yZGluYXRlWzFdO1xuICAgIHZhciBzdGFydCA9IHNlZ21lbnRbMF07XG4gICAgdmFyIGVuZCA9IHNlZ21lbnRbMV07XG4gICAgdmFyIHgxID0gc3RhcnRbMF07XG4gICAgdmFyIHkxID0gc3RhcnRbMV07XG4gICAgdmFyIHgyID0gZW5kWzBdO1xuICAgIHZhciB5MiA9IGVuZFsxXTtcbiAgICB2YXIgZHggPSB4MiAtIHgxO1xuICAgIHZhciBkeSA9IHkyIC0geTE7XG4gICAgdmFyIGFsb25nID0gZHggPT09IDAgJiYgZHkgPT09IDBcbiAgICAgICAgPyAwXG4gICAgICAgIDogKGR4ICogKHgwIC0geDEpICsgZHkgKiAoeTAgLSB5MSkpIC8gKGR4ICogZHggKyBkeSAqIGR5IHx8IDApO1xuICAgIHZhciB4LCB5O1xuICAgIGlmIChhbG9uZyA8PSAwKSB7XG4gICAgICAgIHggPSB4MTtcbiAgICAgICAgeSA9IHkxO1xuICAgIH1cbiAgICBlbHNlIGlmIChhbG9uZyA+PSAxKSB7XG4gICAgICAgIHggPSB4MjtcbiAgICAgICAgeSA9IHkyO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgeCA9IHgxICsgYWxvbmcgKiBkeDtcbiAgICAgICAgeSA9IHkxICsgYWxvbmcgKiBkeTtcbiAgICB9XG4gICAgcmV0dXJuIFt4LCB5XTtcbn1cbi8qKlxuICogUmV0dXJucyBhIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlRm9ybWF0fSBmdW5jdGlvbiB0aGF0IGNhbiBiZVxuICogdXNlZCB0byBmb3JtYXRcbiAqIGEge0Nvb3JkaW5hdGV9IHRvIGEgc3RyaW5nLlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIHRoZSBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtjcmVhdGVTdHJpbmdYWX0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBzdHJpbmdpZnlGdW5jID0gY3JlYXRlU3RyaW5nWFkoKTtcbiAqICAgICB2YXIgb3V0ID0gc3RyaW5naWZ5RnVuYyhjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnOCwgNDgnXG4gKlxuICogRXhhbXBsZSB3aXRoIGV4cGxpY2l0bHkgc3BlY2lmeWluZyAyIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge2NyZWF0ZVN0cmluZ1hZfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIHN0cmluZ2lmeUZ1bmMgPSBjcmVhdGVTdHJpbmdYWSgyKTtcbiAqICAgICB2YXIgb3V0ID0gc3RyaW5naWZ5RnVuYyhjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNy44NSwgNDcuOTgnXG4gKlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZnJhY3Rpb25EaWdpdHMgVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZUZvcm1hdH0gQ29vcmRpbmF0ZSBmb3JtYXQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdHJpbmdYWShvcHRfZnJhY3Rpb25EaWdpdHMpIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gU3RyaW5nIFhZLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICAgIHJldHVybiB0b1N0cmluZ1hZKGNvb3JkaW5hdGUsIG9wdF9mcmFjdGlvbkRpZ2l0cyk7XG4gICAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBoZW1pc3BoZXJlcyBIZW1pc3BoZXJlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWdyZWVzIERlZ3JlZXMuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9mcmFjdGlvbkRpZ2l0cyBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZ3JlZXNUb1N0cmluZ0hETVMoaGVtaXNwaGVyZXMsIGRlZ3JlZXMsIG9wdF9mcmFjdGlvbkRpZ2l0cykge1xuICAgIHZhciBub3JtYWxpemVkRGVncmVlcyA9IG1vZHVsbyhkZWdyZWVzICsgMTgwLCAzNjApIC0gMTgwO1xuICAgIHZhciB4ID0gTWF0aC5hYnMoMzYwMCAqIG5vcm1hbGl6ZWREZWdyZWVzKTtcbiAgICB2YXIgZGZsUHJlY2lzaW9uID0gb3B0X2ZyYWN0aW9uRGlnaXRzIHx8IDA7XG4gICAgdmFyIHByZWNpc2lvbiA9IE1hdGgucG93KDEwLCBkZmxQcmVjaXNpb24pO1xuICAgIHZhciBkZWcgPSBNYXRoLmZsb29yKHggLyAzNjAwKTtcbiAgICB2YXIgbWluID0gTWF0aC5mbG9vcigoeCAtIGRlZyAqIDM2MDApIC8gNjApO1xuICAgIHZhciBzZWMgPSB4IC0gZGVnICogMzYwMCAtIG1pbiAqIDYwO1xuICAgIHNlYyA9IE1hdGguY2VpbChzZWMgKiBwcmVjaXNpb24pIC8gcHJlY2lzaW9uO1xuICAgIGlmIChzZWMgPj0gNjApIHtcbiAgICAgICAgc2VjID0gMDtcbiAgICAgICAgbWluICs9IDE7XG4gICAgfVxuICAgIGlmIChtaW4gPj0gNjApIHtcbiAgICAgICAgbWluID0gMDtcbiAgICAgICAgZGVnICs9IDE7XG4gICAgfVxuICAgIHJldHVybiAoZGVnICtcbiAgICAgICAgJ1xcdTAwYjAgJyArXG4gICAgICAgIHBhZE51bWJlcihtaW4sIDIpICtcbiAgICAgICAgJ1xcdTIwMzIgJyArXG4gICAgICAgIHBhZE51bWJlcihzZWMsIDIsIGRmbFByZWNpc2lvbikgK1xuICAgICAgICAnXFx1MjAzMycgK1xuICAgICAgICAobm9ybWFsaXplZERlZ3JlZXMgPT0gMFxuICAgICAgICAgICAgPyAnJ1xuICAgICAgICAgICAgOiAnICcgKyBoZW1pc3BoZXJlcy5jaGFyQXQobm9ybWFsaXplZERlZ3JlZXMgPCAwID8gMSA6IDApKSk7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIGdpdmVuIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfSB0byBhIHN0cmluZ1xuICogdXNpbmcgdGhlIGdpdmVuIHN0cmluZyB0ZW1wbGF0ZS4gVGhlIHN0cmluZ3MgYHt4fWAgYW5kIGB7eX1gIGluIHRoZSB0ZW1wbGF0ZVxuICogd2lsbCBiZSByZXBsYWNlZCB3aXRoIHRoZSBmaXJzdCBhbmQgc2Vjb25kIGNvb3JkaW5hdGUgdmFsdWVzIHJlc3BlY3RpdmVseS5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyB0aGUgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Zm9ybWF0fSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIHRlbXBsYXRlID0gJ0Nvb3JkaW5hdGUgaXMgKHt4fXx7eX0pLic7XG4gKiAgICAgdmFyIG91dCA9IGZvcm1hdChjb29yZCwgdGVtcGxhdGUpO1xuICogICAgIC8vIG91dCBpcyBub3cgJ0Nvb3JkaW5hdGUgaXMgKDh8NDgpLidcbiAqXG4gKiBFeGFtcGxlIGV4cGxpY2l0bHkgc3BlY2lmeWluZyB0aGUgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Zm9ybWF0fSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIHRlbXBsYXRlID0gJ0Nvb3JkaW5hdGUgaXMgKHt4fXx7eX0pLic7XG4gKiAgICAgdmFyIG91dCA9IGZvcm1hdChjb29yZCwgdGVtcGxhdGUsIDIpO1xuICogICAgIC8vIG91dCBpcyBub3cgJ0Nvb3JkaW5hdGUgaXMgKDcuODV8NDcuOTgpLidcbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZW1wbGF0ZSBBIHRlbXBsYXRlIHN0cmluZyB3aXRoIGB7eH1gIGFuZCBge3l9YCBwbGFjZWhvbGRlcnNcbiAqICAgICB0aGF0IHdpbGwgYmUgcmVwbGFjZWQgYnkgZmlyc3QgYW5kIHNlY29uZCBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2ZyYWN0aW9uRGlnaXRzIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge3N0cmluZ30gRm9ybWF0dGVkIGNvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXQoY29vcmRpbmF0ZSwgdGVtcGxhdGUsIG9wdF9mcmFjdGlvbkRpZ2l0cykge1xuICAgIGlmIChjb29yZGluYXRlKSB7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZVxuICAgICAgICAgICAgLnJlcGxhY2UoJ3t4fScsIGNvb3JkaW5hdGVbMF0udG9GaXhlZChvcHRfZnJhY3Rpb25EaWdpdHMpKVxuICAgICAgICAgICAgLnJlcGxhY2UoJ3t5fScsIGNvb3JkaW5hdGVbMV0udG9GaXhlZChvcHRfZnJhY3Rpb25EaWdpdHMpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZTEgRmlyc3QgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZTIgU2Vjb25kIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdHdvIGNvb3JkaW5hdGVzIGFyZSBlcXVhbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhjb29yZGluYXRlMSwgY29vcmRpbmF0ZTIpIHtcbiAgICB2YXIgZXF1YWxzID0gdHJ1ZTtcbiAgICBmb3IgKHZhciBpID0gY29vcmRpbmF0ZTEubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgaWYgKGNvb3JkaW5hdGUxW2ldICE9IGNvb3JkaW5hdGUyW2ldKSB7XG4gICAgICAgICAgICBlcXVhbHMgPSBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlcXVhbHM7XG59XG4vKipcbiAqIFJvdGF0ZSBgY29vcmRpbmF0ZWAgYnkgYGFuZ2xlYC4gYGNvb3JkaW5hdGVgIGlzIG1vZGlmaWVkIGluIHBsYWNlIGFuZFxuICogcmV0dXJuZWQgYnkgdGhlIGZ1bmN0aW9uLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIGltcG9ydCB7cm90YXRlfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIHJvdGF0ZVJhZGlhbnMgPSBNYXRoLlBJIC8gMjsgLy8gOTAgZGVncmVlc1xuICogICAgIHJvdGF0ZShjb29yZCwgcm90YXRlUmFkaWFucyk7XG4gKiAgICAgLy8gY29vcmQgaXMgbm93IFstNDcuOTgzMzMzLCA3Ljg1XVxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIEFuZ2xlIGluIHJhZGlhbi5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IENvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGUoY29vcmRpbmF0ZSwgYW5nbGUpIHtcbiAgICB2YXIgY29zQW5nbGUgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgdmFyIHNpbkFuZ2xlID0gTWF0aC5zaW4oYW5nbGUpO1xuICAgIHZhciB4ID0gY29vcmRpbmF0ZVswXSAqIGNvc0FuZ2xlIC0gY29vcmRpbmF0ZVsxXSAqIHNpbkFuZ2xlO1xuICAgIHZhciB5ID0gY29vcmRpbmF0ZVsxXSAqIGNvc0FuZ2xlICsgY29vcmRpbmF0ZVswXSAqIHNpbkFuZ2xlO1xuICAgIGNvb3JkaW5hdGVbMF0gPSB4O1xuICAgIGNvb3JkaW5hdGVbMV0gPSB5O1xuICAgIHJldHVybiBjb29yZGluYXRlO1xufVxuLyoqXG4gKiBTY2FsZSBgY29vcmRpbmF0ZWAgYnkgYHNjYWxlYC4gYGNvb3JkaW5hdGVgIGlzIG1vZGlmaWVkIGluIHBsYWNlIGFuZCByZXR1cm5lZFxuICogYnkgdGhlIGZ1bmN0aW9uLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIGltcG9ydCB7c2NhbGUgYXMgc2NhbGVDb29yZGluYXRlfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIHNjYWxlID0gMS4yO1xuICogICAgIHNjYWxlQ29vcmRpbmF0ZShjb29yZCwgc2NhbGUpO1xuICogICAgIC8vIGNvb3JkIGlzIG5vdyBbOS40MiwgNTcuNTc5OTk5Nl1cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzY2FsZSBTY2FsZSBmYWN0b3IuXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlfSBDb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUoY29vcmRpbmF0ZSwgc2NhbGUpIHtcbiAgICBjb29yZGluYXRlWzBdICo9IHNjYWxlO1xuICAgIGNvb3JkaW5hdGVbMV0gKj0gc2NhbGU7XG4gICAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQxIEZpcnN0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIGNvb3JkMSBhbmQgY29vcmQyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSB7XG4gICAgdmFyIGR4ID0gY29vcmQxWzBdIC0gY29vcmQyWzBdO1xuICAgIHZhciBkeSA9IGNvb3JkMVsxXSAtIGNvb3JkMlsxXTtcbiAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XG59XG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQxIEZpcnN0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge251bWJlcn0gRGlzdGFuY2UgYmV0d2VlbiBjb29yZDEgYW5kIGNvb3JkMi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSB7XG4gICAgcmV0dXJuIE1hdGguc3FydChzcXVhcmVkRGlzdGFuY2UoY29vcmQxLCBjb29yZDIpKTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBzcXVhcmVkIGRpc3RhbmNlIGZyb20gYSBjb29yZGluYXRlIHRvIGEgbGluZSBzZWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlIG9mIHRoZSBwb2ludC5cbiAqIEBwYXJhbSB7QXJyYXk8Q29vcmRpbmF0ZT59IHNlZ21lbnQgTGluZSBzZWdtZW50ICgyXG4gKiBjb29yZGluYXRlcykuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNxdWFyZWQgZGlzdGFuY2UgZnJvbSB0aGUgcG9pbnQgdG8gdGhlIGxpbmUgc2VnbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZVRvU2VnbWVudChjb29yZGluYXRlLCBzZWdtZW50KSB7XG4gICAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZShjb29yZGluYXRlLCBjbG9zZXN0T25TZWdtZW50KGNvb3JkaW5hdGUsIHNlZ21lbnQpKTtcbn1cbi8qKlxuICogRm9ybWF0IGEgZ2VvZ3JhcGhpYyBjb29yZGluYXRlIHdpdGggdGhlIGhlbWlzcGhlcmUsIGRlZ3JlZXMsIG1pbnV0ZXMsIGFuZFxuICogc2Vjb25kcy5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ0hETVN9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdIRE1TKGNvb3JkKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICc0N8KwIDU44oCyIDYw4oCzIE4gN8KwIDUw4oCyIDYw4oCzIEUnXG4gKlxuICogRXhhbXBsZSBleHBsaWNpdGx5IHNwZWNpZnlpbmcgMSBmcmFjdGlvbmFsIGRpZ2l0OlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nSERNU30gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBvdXQgPSB0b1N0cmluZ0hETVMoY29vcmQsIDEpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzQ3wrAgNTjigLIgNjAuMOKAsyBOIDfCsCA1MOKAsiA2MC4w4oCzIEUnXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9mcmFjdGlvbkRpZ2l0cyBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEhlbWlzcGhlcmUsIGRlZ3JlZXMsIG1pbnV0ZXMgYW5kIHNlY29uZHMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZ0hETVMoY29vcmRpbmF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gICAgaWYgKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgcmV0dXJuIChkZWdyZWVzVG9TdHJpbmdIRE1TKCdOUycsIGNvb3JkaW5hdGVbMV0sIG9wdF9mcmFjdGlvbkRpZ2l0cykgK1xuICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgIGRlZ3JlZXNUb1N0cmluZ0hETVMoJ0VXJywgY29vcmRpbmF0ZVswXSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxuLyoqXG4gKiBGb3JtYXQgYSBjb29yZGluYXRlIGFzIGEgY29tbWEgZGVsaW1pdGVkIHN0cmluZy5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ1hZfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIG91dCA9IHRvU3RyaW5nWFkoY29vcmQpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzgsIDQ4J1xuICpcbiAqIEV4YW1wbGUgZXhwbGljaXRseSBzcGVjaWZ5aW5nIDEgZnJhY3Rpb25hbCBkaWdpdDpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ1hZfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIG91dCA9IHRvU3RyaW5nWFkoY29vcmQsIDEpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzcuOCwgNDguMCdcbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2ZyYWN0aW9uRGlnaXRzIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge3N0cmluZ30gWFkuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZ1hZKGNvb3JkaW5hdGUsIG9wdF9mcmFjdGlvbkRpZ2l0cykge1xuICAgIHJldHVybiBmb3JtYXQoY29vcmRpbmF0ZSwgJ3t4fSwge3l9Jywgb3B0X2ZyYWN0aW9uRGlnaXRzKTtcbn1cbi8qKlxuICogTW9kaWZpZXMgdGhlIHByb3ZpZGVkIGNvb3JkaW5hdGUgaW4tcGxhY2UgdG8gYmUgd2l0aGluIHRoZSByZWFsIHdvcmxkXG4gKiBleHRlbnQuIFRoZSBsb3dlciBwcm9qZWN0aW9uIGV4dGVudCBib3VuZGFyeSBpcyBpbmNsdXNpdmUsIHRoZSB1cHBlciBvbmVcbiAqIGV4Y2x1c2l2ZS5cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gVGhlIGNvb3JkaW5hdGUgd2l0aGluIHRoZSByZWFsIHdvcmxkIGV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdyYXBYKGNvb3JkaW5hdGUsIHByb2plY3Rpb24pIHtcbiAgICBpZiAocHJvamVjdGlvbi5jYW5XcmFwWCgpKSB7XG4gICAgICAgIHZhciB3b3JsZFdpZHRoID0gZ2V0V2lkdGgocHJvamVjdGlvbi5nZXRFeHRlbnQoKSk7XG4gICAgICAgIHZhciB3b3JsZHNBd2F5ID0gZ2V0V29ybGRzQXdheShjb29yZGluYXRlLCBwcm9qZWN0aW9uLCB3b3JsZFdpZHRoKTtcbiAgICAgICAgaWYgKHdvcmxkc0F3YXkpIHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVbMF0gLT0gd29ybGRzQXdheSAqIHdvcmxkV2lkdGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9zb3VyY2VFeHRlbnRXaWR0aCBXaWR0aCBvZiB0aGUgc291cmNlIGV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gT2Zmc2V0IGluIHdvcmxkIHdpZHRocy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdvcmxkc0F3YXkoY29vcmRpbmF0ZSwgcHJvamVjdGlvbiwgb3B0X3NvdXJjZUV4dGVudFdpZHRoKSB7XG4gICAgdmFyIHByb2plY3Rpb25FeHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuICAgIHZhciB3b3JsZHNBd2F5ID0gMDtcbiAgICBpZiAocHJvamVjdGlvbi5jYW5XcmFwWCgpICYmXG4gICAgICAgIChjb29yZGluYXRlWzBdIDwgcHJvamVjdGlvbkV4dGVudFswXSB8fCBjb29yZGluYXRlWzBdID4gcHJvamVjdGlvbkV4dGVudFsyXSkpIHtcbiAgICAgICAgdmFyIHNvdXJjZUV4dGVudFdpZHRoID0gb3B0X3NvdXJjZUV4dGVudFdpZHRoIHx8IGdldFdpZHRoKHByb2plY3Rpb25FeHRlbnQpO1xuICAgICAgICB3b3JsZHNBd2F5ID0gTWF0aC5mbG9vcigoY29vcmRpbmF0ZVswXSAtIHByb2plY3Rpb25FeHRlbnRbMF0pIC8gc291cmNlRXh0ZW50V2lkdGgpO1xuICAgIH1cbiAgICByZXR1cm4gd29ybGRzQXdheTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvb3JkaW5hdGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci9NYXBcbiAqL1xuaW1wb3J0IERpc3Bvc2FibGUgZnJvbSAnLi4vRGlzcG9zYWJsZS5qcyc7XG5pbXBvcnQgeyBUUlVFIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIG1ha2VJbnZlcnNlIH0gZnJvbSAnLi4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IGdldFdpZHRoIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IHNoYXJlZCBhcyBpY29uSW1hZ2VDYWNoZSB9IGZyb20gJy4uL3N0eWxlL0ljb25JbWFnZUNhY2hlLmpzJztcbmltcG9ydCB7IGluVmlldyB9IGZyb20gJy4uL2xheWVyL0xheWVyLmpzJztcbmltcG9ydCB7IHdyYXBYIH0gZnJvbSAnLi4vY29vcmRpbmF0ZS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIEhpdE1hdGNoXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gbGF5ZXJcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeVxuICogQHByb3BlcnR5IHtudW1iZXJ9IGRpc3RhbmNlU3FcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi92ZWN0b3IuanNcIikuRmVhdHVyZUNhbGxiYWNrPFQ+fSBjYWxsYmFja1xuICogQHRlbXBsYXRlIFRcbiAqL1xuLyoqXG4gKiBAYWJzdHJhY3RcbiAqL1xudmFyIE1hcFJlbmRlcmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXBSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcFJlbmRlcmVyKG1hcCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwXyA9IG1hcDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBFdmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmRpc3BhdGNoUmVuZGVyRXZlbnQgPSBmdW5jdGlvbiAodHlwZSwgZnJhbWVTdGF0ZSkge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUuY2FsY3VsYXRlTWF0cmljZXMyRCA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtID0gZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybTtcbiAgICAgICAgdmFyIHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtID0gZnJhbWVTdGF0ZS5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybTtcbiAgICAgICAgY29tcG9zZVRyYW5zZm9ybShjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgZnJhbWVTdGF0ZS5zaXplWzBdIC8gMiwgZnJhbWVTdGF0ZS5zaXplWzFdIC8gMiwgMSAvIHZpZXdTdGF0ZS5yZXNvbHV0aW9uLCAtMSAvIHZpZXdTdGF0ZS5yZXNvbHV0aW9uLCAtdmlld1N0YXRlLnJvdGF0aW9uLCAtdmlld1N0YXRlLmNlbnRlclswXSwgLXZpZXdTdGF0ZS5jZW50ZXJbMV0pO1xuICAgICAgICBtYWtlSW52ZXJzZShwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSwgY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNoZWNrV3JhcHBlZCBDaGVjayBmb3Igd3JhcHBlZCBnZW9tZXRyaWVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi92ZWN0b3IuanNcIikuRmVhdHVyZUNhbGxiYWNrPFQ+fSBjYWxsYmFjayBGZWF0dXJlIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7U30gdGhpc0FyZyBWYWx1ZSB0byB1c2UgYXMgYHRoaXNgIHdoZW4gZXhlY3V0aW5nIGBjYWxsYmFja2AuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBVLCBpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gbGF5ZXJGaWx0ZXIgTGF5ZXIgZmlsdGVyXG4gICAgICogICAgIGZ1bmN0aW9uLCBvbmx5IGxheWVycyB3aGljaCBhcmUgdmlzaWJsZSBhbmQgZm9yIHdoaWNoIHRoaXMgZnVuY3Rpb25cbiAgICAgKiAgICAgcmV0dXJucyBgdHJ1ZWAgd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiAgQnkgZGVmYXVsdCwgYWxsIHZpc2libGVcbiAgICAgKiAgICAgbGF5ZXJzIHdpbGwgYmUgdGVzdGVkLlxuICAgICAqIEBwYXJhbSB7VX0gdGhpc0FyZzIgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgbGF5ZXJGaWx0ZXJgLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQuXG4gICAgICogQHRlbXBsYXRlIFMsVCxVXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2hlY2tXcmFwcGVkLCBjYWxsYmFjaywgdGhpc0FyZywgbGF5ZXJGaWx0ZXIsIHRoaXNBcmcyKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gbWFuYWdlZCBNYW5hZ2VkIGxheWVyLlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgICAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUobWFuYWdlZCwgZmVhdHVyZSwgbGF5ZXIsIGdlb21ldHJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBmZWF0dXJlLCBtYW5hZ2VkID8gbGF5ZXIgOiBudWxsLCBnZW9tZXRyeSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSB2aWV3U3RhdGUucHJvamVjdGlvbjtcbiAgICAgICAgdmFyIHRyYW5zbGF0ZWRDb29yZGluYXRlID0gd3JhcFgoY29vcmRpbmF0ZS5zbGljZSgpLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgdmFyIG9mZnNldHMgPSBbWzAsIDBdXTtcbiAgICAgICAgaWYgKHByb2plY3Rpb24uY2FuV3JhcFgoKSAmJiBjaGVja1dyYXBwZWQpIHtcbiAgICAgICAgICAgIHZhciBwcm9qZWN0aW9uRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICAgICAgICAgIHZhciB3b3JsZFdpZHRoID0gZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCk7XG4gICAgICAgICAgICBvZmZzZXRzLnB1c2goWy13b3JsZFdpZHRoLCAwXSwgW3dvcmxkV2lkdGgsIDBdKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGF5ZXJTdGF0ZXMgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXk7XG4gICAgICAgIHZhciBudW1MYXllcnMgPSBsYXllclN0YXRlcy5sZW5ndGg7XG4gICAgICAgIHZhciBtYXRjaGVzID0gLyoqIEB0eXBlIHtBcnJheTxIaXRNYXRjaDxUPj59ICovIChbXSk7XG4gICAgICAgIHZhciB0bXBDb29yZCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9mZnNldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBudW1MYXllcnMgLSAxOyBqID49IDA7IC0taikge1xuICAgICAgICAgICAgICAgIHZhciBsYXllclN0YXRlID0gbGF5ZXJTdGF0ZXNbal07XG4gICAgICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXIuaGFzUmVuZGVyZXIoKSAmJlxuICAgICAgICAgICAgICAgICAgICBpblZpZXcobGF5ZXJTdGF0ZSwgdmlld1N0YXRlKSAmJlxuICAgICAgICAgICAgICAgICAgICBsYXllckZpbHRlci5jYWxsKHRoaXNBcmcyLCBsYXllcikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxheWVyUmVuZGVyZXIgPSBsYXllci5nZXRSZW5kZXJlcigpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gbGF5ZXIuZ2V0U291cmNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsYXllclJlbmRlcmVyICYmIHNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gc291cmNlLmdldFdyYXBYKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRyYW5zbGF0ZWRDb29yZGluYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjb29yZGluYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrXzEgPSBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZS5iaW5kKG51bGwsIGxheWVyU3RhdGUubWFuYWdlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBDb29yZFswXSA9IGNvb3JkaW5hdGVzWzBdICsgb2Zmc2V0c1tpXVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcENvb3JkWzFdID0gY29vcmRpbmF0ZXNbMV0gKyBvZmZzZXRzW2ldWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbGF5ZXJSZW5kZXJlci5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSh0bXBDb29yZCwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFja18xLCBtYXRjaGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3JkZXIgPSAxIC8gbWF0Y2hlcy5sZW5ndGg7XG4gICAgICAgIG1hdGNoZXMuZm9yRWFjaChmdW5jdGlvbiAobSwgaSkgeyByZXR1cm4gKG0uZGlzdGFuY2VTcSArPSBpICogb3JkZXIpOyB9KTtcbiAgICAgICAgbWF0Y2hlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmRpc3RhbmNlU3EgLSBiLmRpc3RhbmNlU3E7IH0pO1xuICAgICAgICBtYXRjaGVzLnNvbWUoZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgIHJldHVybiAocmVzdWx0ID0gbS5jYWxsYmFjayhtLmZlYXR1cmUsIG0ubGF5ZXIsIG0uZ2VvbWV0cnkpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQsIChVaW50OENsYW1wZWRBcnJheXxVaW50OEFycmF5KSk6IFR9IGNhbGxiYWNrIExheWVyXG4gICAgICogICAgIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGxheWVyRmlsdGVyIExheWVyIGZpbHRlclxuICAgICAqICAgICBmdW5jdGlvbiwgb25seSBsYXllcnMgd2hpY2ggYXJlIHZpc2libGUgYW5kIGZvciB3aGljaCB0aGlzIGZ1bmN0aW9uXG4gICAgICogICAgIHJldHVybnMgYHRydWVgIHdpbGwgYmUgdGVzdGVkIGZvciBmZWF0dXJlcy4gIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlXG4gICAgICogICAgIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAqIEB0ZW1wbGF0ZSBUXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hMYXllckF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2FsbGJhY2ssIGxheWVyRmlsdGVyKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNoZWNrV3JhcHBlZCBDaGVjayBmb3Igd3JhcHBlZCBnZW9tZXRyaWVzLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogVSwgaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGxheWVyRmlsdGVyIExheWVyIGZpbHRlclxuICAgICAqICAgICBmdW5jdGlvbiwgb25seSBsYXllcnMgd2hpY2ggYXJlIHZpc2libGUgYW5kIGZvciB3aGljaCB0aGlzIGZ1bmN0aW9uXG4gICAgICogICAgIHJldHVybnMgYHRydWVgIHdpbGwgYmUgdGVzdGVkIGZvciBmZWF0dXJlcy4gIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlXG4gICAgICogICAgIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAgICAgKiBAcGFyYW0ge1V9IHRoaXNBcmcgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgbGF5ZXJGaWx0ZXJgLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIHRoZXJlIGEgZmVhdHVyZSBhdCB0aGUgZ2l2ZW4gY29vcmRpbmF0ZT9cbiAgICAgKiBAdGVtcGxhdGUgVVxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5oYXNGZWF0dXJlQXRDb29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2hlY2tXcmFwcGVkLCBsYXllckZpbHRlciwgdGhpc0FyZykge1xuICAgICAgICB2YXIgaGFzRmVhdHVyZSA9IHRoaXMuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjaGVja1dyYXBwZWQsIFRSVUUsIHRoaXMsIGxheWVyRmlsdGVyLCB0aGlzQXJnKTtcbiAgICAgICAgcmV0dXJuIGhhc0ZlYXR1cmUgIT09IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBNYXAuXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmdldE1hcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlci5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLnNjaGVkdWxlRXhwaXJlSWNvbkNhY2hlID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgaWYgKGljb25JbWFnZUNhY2hlLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgICAgICAgIGZyYW1lU3RhdGUucG9zdFJlbmRlckZ1bmN0aW9ucy5wdXNoKGV4cGlyZUljb25DYWNoZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBNYXBSZW5kZXJlcjtcbn0oRGlzcG9zYWJsZSkpO1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAqL1xuZnVuY3Rpb24gZXhwaXJlSWNvbkNhY2hlKG1hcCwgZnJhbWVTdGF0ZSkge1xuICAgIGljb25JbWFnZUNhY2hlLmV4cGlyZSgpO1xufVxuZXhwb3J0IGRlZmF1bHQgTWFwUmVuZGVyZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXAuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9FdmVudFxuICovXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG52YXIgUmVuZGVyRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlbmRlckV2ZW50LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybT19IG9wdF9pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0gVHJhbnNmb3JtIGZvclxuICAgICAqICAgICBDU1MgcGl4ZWxzIHRvIHJlbmRlcmVkIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlPX0gb3B0X2ZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHs/Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEPX0gb3B0X2NvbnRleHQgQ29udGV4dC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZW5kZXJFdmVudCh0eXBlLCBvcHRfaW52ZXJzZVBpeGVsVHJhbnNmb3JtLCBvcHRfZnJhbWVTdGF0ZSwgb3B0X2NvbnRleHQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyYW5zZm9ybSBmcm9tIENTUyBwaXhlbHMgKHJlbGF0aXZlIHRvIHRoZSB0b3AtbGVmdCBjb3JuZXIgb2YgdGhlIG1hcCB2aWV3cG9ydClcbiAgICAgICAgICogdG8gcmVuZGVyZWQgcGl4ZWxzIG9uIHRoaXMgZXZlbnQncyBgY29udGV4dGAuIE9ubHkgYXZhaWxhYmxlIHdoZW4gYSBDYW52YXMgcmVuZGVyZXIgaXMgdXNlZCwgbnVsbCBvdGhlcndpc2UuXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfHVuZGVmaW5lZH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW52ZXJzZVBpeGVsVHJhbnNmb3JtID0gb3B0X2ludmVyc2VQaXhlbFRyYW5zZm9ybTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgcmVuZGVyIGZyYW1lIHN0YXRlLlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV8dW5kZWZpbmVkfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mcmFtZVN0YXRlID0gb3B0X2ZyYW1lU3RhdGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYW52YXMgY29udGV4dC4gTm90IGF2YWlsYWJsZSB3aGVuIHRoZSBldmVudCBpcyBkaXNwYXRjaGVkIGJ5IHRoZSBtYXAuIE9ubHkgYXZhaWxhYmxlXG4gICAgICAgICAqIHdoZW4gYSBDYW52YXMgcmVuZGVyZXIgaXMgdXNlZCwgbnVsbCBvdGhlcndpc2UuXG4gICAgICAgICAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8bnVsbHx1bmRlZmluZWR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRleHQgPSBvcHRfY29udGV4dDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gUmVuZGVyRXZlbnQ7XG59KEV2ZW50KSk7XG5leHBvcnQgZGVmYXVsdCBSZW5kZXJFdmVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvQ29tcG9zaXRlXG4gKi9cbmltcG9ydCBNYXBSZW5kZXJlciBmcm9tICcuL01hcC5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4uL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnQgZnJvbSAnLi4vcmVuZGVyL0V2ZW50LmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi4vc291cmNlL1N0YXRlLmpzJztcbmltcG9ydCB7IENMQVNTX1VOU0VMRUNUQUJMRSB9IGZyb20gJy4uL2Nzcy5qcyc7XG5pbXBvcnQgeyBjaGVja2VkRm9udHMgfSBmcm9tICcuLi9yZW5kZXIvY2FudmFzLmpzJztcbmltcG9ydCB7IGluVmlldyB9IGZyb20gJy4uL2xheWVyL0xheWVyLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgeyByZXBsYWNlQ2hpbGRyZW4gfSBmcm9tICcuLi9kb20uanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDYW52YXMgbWFwIHJlbmRlcmVyLlxuICogQGFwaVxuICovXG52YXIgQ29tcG9zaXRlTWFwUmVuZGVyZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbXBvc2l0ZU1hcFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ29tcG9zaXRlTWFwUmVuZGVyZXIobWFwKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1hcCkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZm9udENoYW5nZUxpc3RlbmVyS2V5XyA9IGxpc3RlbihjaGVja2VkRm9udHMsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSwgbWFwLnJlZHJhd1RleHQuYmluZChtYXApKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRGl2RWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmVsZW1lbnRfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHZhciBzdHlsZSA9IF90aGlzLmVsZW1lbnRfLnN0eWxlO1xuICAgICAgICBzdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIHN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBzdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgIHN0eWxlLnpJbmRleCA9ICcwJztcbiAgICAgICAgX3RoaXMuZWxlbWVudF8uY2xhc3NOYW1lID0gQ0xBU1NfVU5TRUxFQ1RBQkxFICsgJyBvbC1sYXllcnMnO1xuICAgICAgICB2YXIgY29udGFpbmVyID0gbWFwLmdldFZpZXdwb3J0KCk7XG4gICAgICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoX3RoaXMuZWxlbWVudF8sIGNvbnRhaW5lci5maXJzdENoaWxkIHx8IG51bGwpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PEhUTUxFbGVtZW50Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNoaWxkcmVuXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFZpc2libGVfID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBFdmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgQ29tcG9zaXRlTWFwUmVuZGVyZXIucHJvdG90eXBlLmRpc3BhdGNoUmVuZGVyRXZlbnQgPSBmdW5jdGlvbiAodHlwZSwgZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgaWYgKG1hcC5oYXNMaXN0ZW5lcih0eXBlKSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50XzEgPSBuZXcgUmVuZGVyRXZlbnQodHlwZSwgdW5kZWZpbmVkLCBmcmFtZVN0YXRlKTtcbiAgICAgICAgICAgIG1hcC5kaXNwYXRjaEV2ZW50KGV2ZW50XzEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb21wb3NpdGVNYXBSZW5kZXJlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMuZm9udENoYW5nZUxpc3RlbmVyS2V5Xyk7XG4gICAgICAgIHRoaXMuZWxlbWVudF8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnRfKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlci5cbiAgICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBDb21wb3NpdGVNYXBSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlcmVkVmlzaWJsZV8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRfLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWxjdWxhdGVNYXRyaWNlczJEKGZyYW1lU3RhdGUpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoUmVuZGVyRXZlbnQoUmVuZGVyRXZlbnRUeXBlLlBSRUNPTVBPU0UsIGZyYW1lU3RhdGUpO1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZXNBcnJheSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYS56SW5kZXggLSBiLnpJbmRleDtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbl8ubGVuZ3RoID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9sYXllci9CYXNlVmVjdG9yLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGRlY2x1dHRlckxheWVycyA9IFtdO1xuICAgICAgICB2YXIgcHJldmlvdXNFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGF5ZXJTdGF0ZXNBcnJheS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGVzQXJyYXlbaV07XG4gICAgICAgICAgICBmcmFtZVN0YXRlLmxheWVySW5kZXggPSBpO1xuICAgICAgICAgICAgaWYgKCFpblZpZXcobGF5ZXJTdGF0ZSwgdmlld1N0YXRlKSB8fFxuICAgICAgICAgICAgICAgIChsYXllclN0YXRlLnNvdXJjZVN0YXRlICE9IFNvdXJjZVN0YXRlLlJFQURZICYmXG4gICAgICAgICAgICAgICAgICAgIGxheWVyU3RhdGUuc291cmNlU3RhdGUgIT0gU291cmNlU3RhdGUuVU5ERUZJTkVEKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gbGF5ZXIucmVuZGVyKGZyYW1lU3RhdGUsIHByZXZpb3VzRWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSBwcmV2aW91c0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuXy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJ2dldERlY2x1dHRlcicgaW4gbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBkZWNsdXR0ZXJMYXllcnMucHVzaChsYXllcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IGRlY2x1dHRlckxheWVycy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgZGVjbHV0dGVyTGF5ZXJzW2ldLnJlbmRlckRlY2x1dHRlcihmcmFtZVN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXBsYWNlQ2hpbGRyZW4odGhpcy5lbGVtZW50XywgdGhpcy5jaGlsZHJlbl8pO1xuICAgICAgICB0aGlzLmRpc3BhdGNoUmVuZGVyRXZlbnQoUmVuZGVyRXZlbnRUeXBlLlBPU1RDT01QT1NFLCBmcmFtZVN0YXRlKTtcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVkVmlzaWJsZV8pIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudF8uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjaGVkdWxlRXhwaXJlSWNvbkNhY2hlKGZyYW1lU3RhdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0LCAoVWludDhDbGFtcGVkQXJyYXl8VWludDhBcnJheSkpOiBUfSBjYWxsYmFjayBMYXllclxuICAgICAqICAgICBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBsYXllckZpbHRlciBMYXllciBmaWx0ZXJcbiAgICAgKiAgICAgZnVuY3Rpb24sIG9ubHkgbGF5ZXJzIHdoaWNoIGFyZSB2aXNpYmxlIGFuZCBmb3Igd2hpY2ggdGhpcyBmdW5jdGlvblxuICAgICAqICAgICByZXR1cm5zIGB0cnVlYCB3aWxsIGJlIHRlc3RlZCBmb3IgZmVhdHVyZXMuICBCeSBkZWZhdWx0LCBhbGwgdmlzaWJsZVxuICAgICAqICAgICBsYXllcnMgd2lsbCBiZSB0ZXN0ZWQuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgKiBAdGVtcGxhdGUgVFxuICAgICAqL1xuICAgIENvbXBvc2l0ZU1hcFJlbmRlcmVyLnByb3RvdHlwZS5mb3JFYWNoTGF5ZXJBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrLCBsYXllckZpbHRlcikge1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIHZhciBsYXllclN0YXRlcyA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheTtcbiAgICAgICAgdmFyIG51bUxheWVycyA9IGxheWVyU3RhdGVzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IG51bUxheWVycyAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGVzW2ldO1xuICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgICAgICAgIGlmIChsYXllci5oYXNSZW5kZXJlcigpICYmXG4gICAgICAgICAgICAgICAgaW5WaWV3KGxheWVyU3RhdGUsIHZpZXdTdGF0ZSkgJiZcbiAgICAgICAgICAgICAgICBsYXllckZpbHRlcihsYXllcikpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXJSZW5kZXJlciA9IGxheWVyLmdldFJlbmRlcmVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBsYXllclJlbmRlcmVyLmdldERhdGFBdFBpeGVsKHBpeGVsLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UpO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBjYWxsYmFjayhsYXllciwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHJldHVybiBDb21wb3NpdGVNYXBSZW5kZXJlcjtcbn0oTWFwUmVuZGVyZXIpKTtcbmV4cG9ydCBkZWZhdWx0IENvbXBvc2l0ZU1hcFJlbmRlcmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29tcG9zaXRlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvR3JvdXBcbiAqL1xuaW1wb3J0IEJhc2VMYXllciBmcm9tICcuL0Jhc2UuanMnO1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbkV2ZW50VHlwZSBmcm9tICcuLi9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4uL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi4vc291cmNlL1N0YXRlLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgYXNzaWduLCBjbGVhciB9IGZyb20gJy4uL29iai5qcyc7XG5pbXBvcnQgeyBnZXRDaGFuZ2VFdmVudFR5cGUgfSBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IHsgZ2V0SW50ZXJzZWN0aW9uIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvcGFjaXR5PTFdIE9wYWNpdHkgKDAsIDEpLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmlzaWJsZT10cnVlXSBWaXNpYmlsaXR5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgYm91bmRpbmcgZXh0ZW50IGZvciBsYXllciByZW5kZXJpbmcuICBUaGUgbGF5ZXIgd2lsbCBub3QgYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhpcyBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleF0gVGhlIHotaW5kZXggZm9yIGxheWVyIHJlbmRlcmluZy4gIEF0IHJlbmRlcmluZyB0aW1lLCB0aGUgbGF5ZXJzXG4gKiB3aWxsIGJlIG9yZGVyZWQsIGZpcnN0IGJ5IFotaW5kZXggYW5kIHRoZW4gYnkgcG9zaXRpb24uIFdoZW4gYHVuZGVmaW5lZGAsIGEgYHpJbmRleGAgb2YgMCBpcyBhc3N1bWVkXG4gKiBmb3IgbGF5ZXJzIHRoYXQgYXJlIGFkZGVkIHRvIHRoZSBtYXAncyBgbGF5ZXJzYCBjb2xsZWN0aW9uLCBvciBgSW5maW5pdHlgIHdoZW4gdGhlIGxheWVyJ3MgYHNldE1hcCgpYFxuICogbWV0aG9kIHdhcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiAoZXhjbHVzaXZlKSBiZWxvdyB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb21dIFRoZSBtaW5pbXVtIHZpZXcgem9vbSBsZXZlbCAoZXhjbHVzaXZlKSBhYm92ZSB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIFRoZSBtYXhpbXVtIHZpZXcgem9vbSBsZXZlbCAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb21dIFRoZSBtaW5pbXVtIHZpZXcgem9vbSBsZXZlbCAoZXhjbHVzaXZlKSBhYm92ZSB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIFRoZSBtYXhpbXVtIHZpZXcgem9vbSBsZXZlbCAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0PnxpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBbbGF5ZXJzXSBDaGlsZCBsYXllcnMuXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBQcm9wZXJ0eSA9IHtcbiAgICBMQVlFUlM6ICdsYXllcnMnLFxufTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0gb2YgbGF5ZXJzIHRoYXQgYXJlIGhhbmRsZWQgdG9nZXRoZXIuXG4gKlxuICogQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIHRyaWdnZXJlZCB3aGVuIHRoZSBncm91cC9Db2xsZWN0aW9uIGNoYW5nZXMuXG4gKlxuICogQGFwaVxuICovXG52YXIgTGF5ZXJHcm91cCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGF5ZXJHcm91cCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBMYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExheWVyR3JvdXAob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyIGJhc2VPcHRpb25zID0gLyoqIEB0eXBlIHtPcHRpb25zfSAqLyAoYXNzaWduKHt9LCBvcHRpb25zKSk7XG4gICAgICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5sYXllcnM7XG4gICAgICAgIHZhciBsYXllcnMgPSBvcHRpb25zLmxheWVycztcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBiYXNlT3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxheWVyc0xpc3RlbmVyS2V5c18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5saXN0ZW5lcktleXNfID0ge307XG4gICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoZ2V0Q2hhbmdlRXZlbnRUeXBlKFByb3BlcnR5LkxBWUVSUyksIF90aGlzLmhhbmRsZUxheWVyc0NoYW5nZWRfKTtcbiAgICAgICAgaWYgKGxheWVycykge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobGF5ZXJzKSkge1xuICAgICAgICAgICAgICAgIGxheWVycyA9IG5ldyBDb2xsZWN0aW9uKGxheWVycy5zbGljZSgpLCB7IHVuaXF1ZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFzc2VydCh0eXBlb2YgKCAvKiogQHR5cGUgez99ICovKGxheWVycykuZ2V0QXJyYXkpID09PSAnZnVuY3Rpb24nLCA0Myk7IC8vIEV4cGVjdGVkIGBsYXllcnNgIHRvIGJlIGFuIGFycmF5IG9yIGEgYENvbGxlY3Rpb25gXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsYXllcnMgPSBuZXcgQ29sbGVjdGlvbih1bmRlZmluZWQsIHsgdW5pcXVlOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLnNldExheWVycyhsYXllcnMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuaGFuZGxlTGF5ZXJDaGFuZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuaGFuZGxlTGF5ZXJzQ2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubGF5ZXJzTGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICB0aGlzLmxheWVyc0xpc3RlbmVyS2V5c18ubGVuZ3RoID0gMDtcbiAgICAgICAgdmFyIGxheWVycyA9IHRoaXMuZ2V0TGF5ZXJzKCk7XG4gICAgICAgIHRoaXMubGF5ZXJzTGlzdGVuZXJLZXlzXy5wdXNoKGxpc3RlbihsYXllcnMsIENvbGxlY3Rpb25FdmVudFR5cGUuQURELCB0aGlzLmhhbmRsZUxheWVyc0FkZF8sIHRoaXMpLCBsaXN0ZW4obGF5ZXJzLCBDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSwgdGhpcy5oYW5kbGVMYXllcnNSZW1vdmVfLCB0aGlzKSk7XG4gICAgICAgIGZvciAodmFyIGlkIGluIHRoaXMubGlzdGVuZXJLZXlzXykge1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcktleXNfW2lkXS5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICB9XG4gICAgICAgIGNsZWFyKHRoaXMubGlzdGVuZXJLZXlzXyk7XG4gICAgICAgIHZhciBsYXllcnNBcnJheSA9IGxheWVycy5nZXRBcnJheSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsYXllcnNBcnJheS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXIgPSBsYXllcnNBcnJheVtpXTtcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJLZXlzX1tnZXRVaWQobGF5ZXIpXSA9IFtcbiAgICAgICAgICAgICAgICBsaXN0ZW4obGF5ZXIsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSwgdGhpcy5oYW5kbGVMYXllckNoYW5nZV8sIHRoaXMpLFxuICAgICAgICAgICAgICAgIGxpc3RlbihsYXllciwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVMYXllckNoYW5nZV8sIHRoaXMpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGNvbGxlY3Rpb25FdmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5oYW5kbGVMYXllcnNBZGRfID0gZnVuY3Rpb24gKGNvbGxlY3Rpb25FdmVudCkge1xuICAgICAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0fSAqLyAoY29sbGVjdGlvbkV2ZW50LmVsZW1lbnQpO1xuICAgICAgICB0aGlzLmxpc3RlbmVyS2V5c19bZ2V0VWlkKGxheWVyKV0gPSBbXG4gICAgICAgICAgICBsaXN0ZW4obGF5ZXIsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSwgdGhpcy5oYW5kbGVMYXllckNoYW5nZV8sIHRoaXMpLFxuICAgICAgICAgICAgbGlzdGVuKGxheWVyLCBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZUxheWVyQ2hhbmdlXywgdGhpcyksXG4gICAgICAgIF07XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gY29sbGVjdGlvbkV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUxheWVyc1JlbW92ZV8gPSBmdW5jdGlvbiAoY29sbGVjdGlvbkV2ZW50KSB7XG4gICAgICAgIHZhciBsYXllciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHR9ICovIChjb2xsZWN0aW9uRXZlbnQuZWxlbWVudCk7XG4gICAgICAgIHZhciBrZXkgPSBnZXRVaWQobGF5ZXIpO1xuICAgICAgICB0aGlzLmxpc3RlbmVyS2V5c19ba2V5XS5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcktleXNfW2tleV07XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9uIGNvbGxlY3Rpb259IG9mIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIgbGF5ZXJzfVxuICAgICAqIGluIHRoaXMgZ3JvdXAuXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59IENvbGxlY3Rpb24gb2ZcbiAgICAgKiAgIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvQmFzZSBsYXllcnN9IHRoYXQgYXJlIHBhcnQgb2YgdGhpcyBncm91cC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5nZXRMYXllcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSAqLyAodGhpcy5nZXQoUHJvcGVydHkuTEFZRVJTKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbiBjb2xsZWN0aW9ufSBvZiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyfkxheWVyIGxheWVyc31cbiAgICAgKiBpbiB0aGlzIGdyb3VwLlxuICAgICAqIEBwYXJhbSB7IWltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59IGxheWVycyBDb2xsZWN0aW9uIG9mXG4gICAgICogICB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2UgbGF5ZXJzfSB0aGF0IGFyZSBwYXJ0IG9mIHRoaXMgZ3JvdXAuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuc2V0TGF5ZXJzID0gZnVuY3Rpb24gKGxheWVycykge1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5MQVlFUlMsIGxheWVycyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD49fSBvcHRfYXJyYXkgQXJyYXkgb2YgbGF5ZXJzICh0byBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gQXJyYXkgb2YgbGF5ZXJzLlxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmdldExheWVyc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9hcnJheSkge1xuICAgICAgICB2YXIgYXJyYXkgPSBvcHRfYXJyYXkgIT09IHVuZGVmaW5lZCA/IG9wdF9hcnJheSA6IFtdO1xuICAgICAgICB0aGlzLmdldExheWVycygpLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICBsYXllci5nZXRMYXllcnNBcnJheShhcnJheSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+PX0gb3B0X3N0YXRlcyBPcHRpb25hbCBsaXN0IG9mIGxheWVyIHN0YXRlcyAodG8gYmUgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBMaXN0IG9mIGxheWVyIHN0YXRlcy5cbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5nZXRMYXllclN0YXRlc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9zdGF0ZXMpIHtcbiAgICAgICAgdmFyIHN0YXRlcyA9IG9wdF9zdGF0ZXMgIT09IHVuZGVmaW5lZCA/IG9wdF9zdGF0ZXMgOiBbXTtcbiAgICAgICAgdmFyIHBvcyA9IHN0YXRlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuZ2V0TGF5ZXJzKCkuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIGxheWVyLmdldExheWVyU3RhdGVzQXJyYXkoc3RhdGVzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBvd25MYXllclN0YXRlID0gdGhpcy5nZXRMYXllclN0YXRlKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSBwb3MsIGlpID0gc3RhdGVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBsYXllclN0YXRlID0gc3RhdGVzW2ldO1xuICAgICAgICAgICAgbGF5ZXJTdGF0ZS5vcGFjaXR5ICo9IG93bkxheWVyU3RhdGUub3BhY2l0eTtcbiAgICAgICAgICAgIGxheWVyU3RhdGUudmlzaWJsZSA9IGxheWVyU3RhdGUudmlzaWJsZSAmJiBvd25MYXllclN0YXRlLnZpc2libGU7XG4gICAgICAgICAgICBsYXllclN0YXRlLm1heFJlc29sdXRpb24gPSBNYXRoLm1pbihsYXllclN0YXRlLm1heFJlc29sdXRpb24sIG93bkxheWVyU3RhdGUubWF4UmVzb2x1dGlvbik7XG4gICAgICAgICAgICBsYXllclN0YXRlLm1pblJlc29sdXRpb24gPSBNYXRoLm1heChsYXllclN0YXRlLm1pblJlc29sdXRpb24sIG93bkxheWVyU3RhdGUubWluUmVzb2x1dGlvbik7XG4gICAgICAgICAgICBsYXllclN0YXRlLm1pblpvb20gPSBNYXRoLm1heChsYXllclN0YXRlLm1pblpvb20sIG93bkxheWVyU3RhdGUubWluWm9vbSk7XG4gICAgICAgICAgICBsYXllclN0YXRlLm1heFpvb20gPSBNYXRoLm1pbihsYXllclN0YXRlLm1heFpvb20sIG93bkxheWVyU3RhdGUubWF4Wm9vbSk7XG4gICAgICAgICAgICBpZiAob3duTGF5ZXJTdGF0ZS5leHRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChsYXllclN0YXRlLmV4dGVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyU3RhdGUuZXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKGxheWVyU3RhdGUuZXh0ZW50LCBvd25MYXllclN0YXRlLmV4dGVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsYXllclN0YXRlLmV4dGVudCA9IG93bkxheWVyU3RhdGUuZXh0ZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc291cmNlL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFNvdXJjZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5nZXRTb3VyY2VTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFNvdXJjZVN0YXRlLlJFQURZO1xuICAgIH07XG4gICAgcmV0dXJuIExheWVyR3JvdXA7XG59KEJhc2VMYXllcikpO1xuZXhwb3J0IGRlZmF1bHQgTGF5ZXJHcm91cDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdyb3VwLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvTWFwRXZlbnRcbiAqL1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vZXZlbnRzL0V2ZW50LmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYXMgbWFwIGV2ZW50cyBhcmUgaW5zdGFuY2VzIG9mIHRoaXMgdHlwZS5cbiAqIFNlZSB7QGxpbmsgbW9kdWxlOm9sL1BsdWdnYWJsZU1hcH5QbHVnZ2FibGVNYXB9IGZvciB3aGljaCBldmVudHMgdHJpZ2dlciBhIG1hcCBldmVudC5cbiAqL1xudmFyIE1hcEV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXBFdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBFdmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlPX0gb3B0X2ZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTWFwRXZlbnQodHlwZSwgbWFwLCBvcHRfZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1hcCB3aGVyZSB0aGUgZXZlbnQgb2NjdXJyZWQuXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXAgPSBtYXA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZnJhbWUgc3RhdGUgYXQgdGhlIHRpbWUgb2YgdGhlIGV2ZW50LlxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZyYW1lU3RhdGUgPSBvcHRfZnJhbWVTdGF0ZSAhPT0gdW5kZWZpbmVkID8gb3B0X2ZyYW1lU3RhdGUgOiBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBNYXBFdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCBkZWZhdWx0IE1hcEV2ZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwRXZlbnQuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9NYXBCcm93c2VyRXZlbnRcbiAqL1xuaW1wb3J0IE1hcEV2ZW50IGZyb20gJy4vTWFwRXZlbnQuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBhcyBtYXAgYnJvd3NlciBldmVudHMgYXJlIGluc3RhbmNlcyBvZiB0aGlzIHR5cGUuXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9QbHVnZ2FibGVNYXB+UGx1Z2dhYmxlTWFwfSBmb3Igd2hpY2ggZXZlbnRzIHRyaWdnZXIgYSBtYXAgYnJvd3NlciBldmVudC5cbiAqIEB0ZW1wbGF0ZSB7VUlFdmVudH0gRVZFTlRcbiAqL1xudmFyIE1hcEJyb3dzZXJFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwQnJvd3NlckV2ZW50LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqIEBwYXJhbSB7RVZFTlR9IG9yaWdpbmFsRXZlbnQgT3JpZ2luYWwgZXZlbnQuXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2RyYWdnaW5nIElzIHRoZSBtYXAgY3VycmVudGx5IGJlaW5nIGRyYWdnZWQ/XG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZT19IG9wdF9mcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcEJyb3dzZXJFdmVudCh0eXBlLCBtYXAsIG9yaWdpbmFsRXZlbnQsIG9wdF9kcmFnZ2luZywgb3B0X2ZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSwgbWFwLCBvcHRfZnJhbWVTdGF0ZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvcmlnaW5hbCBicm93c2VyIGV2ZW50LlxuICAgICAgICAgKiBAY29uc3RcbiAgICAgICAgICogQHR5cGUge0VWRU5UfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vcmlnaW5hbEV2ZW50ID0gb3JpZ2luYWxFdmVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYXAgcGl4ZWwgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY29vcmRpbmF0ZSBpbiB0aGUgdXNlciBwcm9qZWN0aW9uIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb29yZGluYXRlXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmRpY2F0ZXMgaWYgdGhlIG1hcCBpcyBjdXJyZW50bHkgYmVpbmcgZHJhZ2dlZC4gT25seSBzZXQgZm9yXG4gICAgICAgICAqIGBQT0lOVEVSRFJBR2AgYW5kIGBQT0lOVEVSTU9WRWAgZXZlbnRzLiBEZWZhdWx0IGlzIGBmYWxzZWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kcmFnZ2luZyA9IG9wdF9kcmFnZ2luZyAhPT0gdW5kZWZpbmVkID8gb3B0X2RyYWdnaW5nIDogZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hcEJyb3dzZXJFdmVudC5wcm90b3R5cGUsIFwicGl4ZWxcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1hcCBwaXhlbCByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnQgY29ycmVzcG9uZGluZyB0byB0aGUgb3JpZ2luYWwgZXZlbnQuXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5waXhlbF8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBpeGVsXyA9IHRoaXMubWFwLmdldEV2ZW50UGl4ZWwodGhpcy5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBpeGVsXztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgICAgIHRoaXMucGl4ZWxfID0gcGl4ZWw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWFwQnJvd3NlckV2ZW50LnByb3RvdHlwZSwgXCJjb29yZGluYXRlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjb29yZGluYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuICBUaGlzIHdpbGwgYmUgaW4gdGhlIHVzZXJcbiAgICAgICAgICogcHJvamVjdGlvbiBpZiBvbmUgaXMgc2V0LiAgT3RoZXJ3aXNlIGl0IHdpbGwgYmUgaW4gdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jb29yZGluYXRlXykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29vcmRpbmF0ZV8gPSB0aGlzLm1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsKHRoaXMucGl4ZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29vcmRpbmF0ZV87XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29vcmRpbmF0ZV8gPSBjb29yZGluYXRlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogUHJldmVudHMgdGhlIGRlZmF1bHQgYnJvd3NlciBhY3Rpb24uXG4gICAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9ldmVudC5wcmV2ZW50RGVmYXVsdC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdC5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFByZXZlbnRzIGZ1cnRoZXIgcHJvcGFnYXRpb24gb2YgdGhlIGN1cnJlbnQgZXZlbnQuXG4gICAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9ldmVudC5zdG9wUHJvcGFnYXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbi5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLm9yaWdpbmFsRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfTtcbiAgICByZXR1cm4gTWFwQnJvd3NlckV2ZW50O1xufShNYXBFdmVudCkpO1xuZXhwb3J0IGRlZmF1bHQgTWFwQnJvd3NlckV2ZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwQnJvd3NlckV2ZW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9wb2ludGVyL0V2ZW50VHlwZVxuICovXG4vKipcbiAqIENvbnN0YW50cyBmb3IgZXZlbnQgbmFtZXMuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgUE9JTlRFUk1PVkU6ICdwb2ludGVybW92ZScsXG4gICAgUE9JTlRFUkRPV046ICdwb2ludGVyZG93bicsXG4gICAgUE9JTlRFUlVQOiAncG9pbnRlcnVwJyxcbiAgICBQT0lOVEVST1ZFUjogJ3BvaW50ZXJvdmVyJyxcbiAgICBQT0lOVEVST1VUOiAncG9pbnRlcm91dCcsXG4gICAgUE9JTlRFUkVOVEVSOiAncG9pbnRlcmVudGVyJyxcbiAgICBQT0lOVEVSTEVBVkU6ICdwb2ludGVybGVhdmUnLFxuICAgIFBPSU5URVJDQU5DRUw6ICdwb2ludGVyY2FuY2VsJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcEJyb3dzZXJFdmVudEhhbmRsZXJcbiAqL1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudCBmcm9tICcuL01hcEJyb3dzZXJFdmVudC5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50VHlwZSBmcm9tICcuL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuaW1wb3J0IFBvaW50ZXJFdmVudFR5cGUgZnJvbSAnLi9wb2ludGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBERVZJQ0VfUElYRUxfUkFUSU8sIFBBU1NJVkVfRVZFTlRfTElTVEVORVJTIH0gZnJvbSAnLi9oYXMuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi9ldmVudHMuanMnO1xudmFyIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1hcEJyb3dzZXJFdmVudEhhbmRsZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgVGhlIG1hcCB3aXRoIHRoZSB2aWV3cG9ydCB0byBsaXN0ZW4gdG8gZXZlbnRzIG9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gbW92ZVRvbGVyYW5jZSBUaGUgbWluaW1hbCBkaXN0YW5jZSB0aGUgcG9pbnRlciBtdXN0IHRyYXZlbCB0byB0cmlnZ2VyIGEgbW92ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNYXBCcm93c2VyRXZlbnRIYW5kbGVyKG1hcCwgbW92ZVRvbGVyYW5jZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtYXApIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIGlzIHRoZSBlbGVtZW50IHRoYXQgd2Ugd2lsbCBsaXN0ZW4gdG8gdGhlIHJlYWwgZXZlbnRzIG9uLlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcF8gPSBtYXA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7YW55fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2xpY2tUaW1lb3V0SWRfO1xuICAgICAgICAvKipcbiAgICAgICAgICogRW11bGF0ZSBkYmxjbGljayBhbmQgc2luZ2xlY2xpY2suIFdpbGwgYmUgdHJ1ZSB3aGVuIG9ubHkgb25lIHBvaW50ZXIgaXMgYWN0aXZlLlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmVtdWxhdGVDbGlja3NfID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRyYWdnaW5nXyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHJhZ0xpc3RlbmVyS2V5c18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tb3ZlVG9sZXJhbmNlXyA9IG1vdmVUb2xlcmFuY2VcbiAgICAgICAgICAgID8gbW92ZVRvbGVyYW5jZSAqIERFVklDRV9QSVhFTF9SQVRJT1xuICAgICAgICAgICAgOiBERVZJQ0VfUElYRUxfUkFUSU87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbW9zdCByZWNlbnQgXCJkb3duXCIgdHlwZSBldmVudCAob3IgbnVsbCBpZiBub25lIGhhdmUgb2NjdXJyZWQpLlxuICAgICAgICAgKiBTZXQgb24gcG9pbnRlcmRvd24uXG4gICAgICAgICAqIEB0eXBlIHtQb2ludGVyRXZlbnR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kb3duXyA9IG51bGw7XG4gICAgICAgIHZhciBlbGVtZW50ID0gX3RoaXMubWFwXy5nZXRWaWV3cG9ydCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFjdGl2ZVBvaW50ZXJzXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxudW1iZXIsIGJvb2xlYW4+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhY2tlZFRvdWNoZXNfID0ge307XG4gICAgICAgIF90aGlzLmVsZW1lbnRfID0gZWxlbWVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucG9pbnRlcmRvd25MaXN0ZW5lcktleV8gPSBsaXN0ZW4oZWxlbWVudCwgUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSRE9XTiwgX3RoaXMuaGFuZGxlUG9pbnRlckRvd25fLCBfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7UG9pbnRlckV2ZW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3JpZ2luYWxQb2ludGVyTW92ZUV2ZW50XztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVsYXllZExpc3RlbmVyS2V5XyA9IGxpc3RlbihlbGVtZW50LCBQb2ludGVyRXZlbnRUeXBlLlBPSU5URVJNT1ZFLCBfdGhpcy5yZWxheUV2ZW50XywgX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmJvdW5kSGFuZGxlVG91Y2hNb3ZlXyA9IF90aGlzLmhhbmRsZVRvdWNoTW92ZV8uYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmVsZW1lbnRfLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLlRPVUNITU9WRSwgX3RoaXMuYm91bmRIYW5kbGVUb3VjaE1vdmVfLCBQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyA/IHsgcGFzc2l2ZTogZmFsc2UgfSA6IGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmVtdWxhdGVDbGlja18gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5DTElDSywgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuICAgICAgICBpZiAodGhpcy5jbGlja1RpbWVvdXRJZF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gZG91YmxlLWNsaWNrXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jbGlja1RpbWVvdXRJZF8pO1xuICAgICAgICAgICAgdGhpcy5jbGlja1RpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5EQkxDTElDSywgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGNsaWNrXG4gICAgICAgICAgICB0aGlzLmNsaWNrVGltZW91dElkXyA9IHNldFRpbWVvdXQoXG4gICAgICAgICAgICAvKiogQHRoaXMge01hcEJyb3dzZXJFdmVudEhhbmRsZXJ9ICovXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGlja1RpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgdmFyIG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudChNYXBCcm93c2VyRXZlbnRUeXBlLlNJTkdMRUNMSUNLLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgMjUwKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogS2VlcHMgdHJhY2sgb24gaG93IG1hbnkgcG9pbnRlcnMgYXJlIGN1cnJlbnRseSBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLnVwZGF0ZUFjdGl2ZVBvaW50ZXJzXyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgdmFyIGV2ZW50ID0gcG9pbnRlckV2ZW50O1xuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCB8fFxuICAgICAgICAgICAgZXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJDQU5DRUwpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRyYWNrZWRUb3VjaGVzX1tldmVudC5wb2ludGVySWRdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRE9XTikge1xuICAgICAgICAgICAgdGhpcy50cmFja2VkVG91Y2hlc19bZXZlbnQucG9pbnRlcklkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY3RpdmVQb2ludGVyc18gPSBPYmplY3Qua2V5cyh0aGlzLnRyYWNrZWRUb3VjaGVzXykubGVuZ3RoO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5oYW5kbGVQb2ludGVyVXBfID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUFjdGl2ZVBvaW50ZXJzXyhwb2ludGVyRXZlbnQpO1xuICAgICAgICB2YXIgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICAgIC8vIFdlIGVtdWxhdGUgY2xpY2sgZXZlbnRzIG9uIGxlZnQgbW91c2UgYnV0dG9uIGNsaWNrLCB0b3VjaCBjb250YWN0LCBhbmQgcGVuXG4gICAgICAgIC8vIGNvbnRhY3QuIGlzTW91c2VBY3Rpb25CdXR0b24gcmV0dXJucyB0cnVlIGluIHRoZXNlIGNhc2VzIChldnQuYnV0dG9uIGlzIHNldFxuICAgICAgICAvLyB0byAwKS5cbiAgICAgICAgLy8gU2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI2J1dHRvbi1zdGF0ZXNcbiAgICAgICAgLy8gV2Ugb25seSBmaXJlIGNsaWNrLCBzaW5nbGVjbGljaywgYW5kIGRvdWJsZWNsaWNrIGlmIG5vYm9keSBoYXMgY2FsbGVkXG4gICAgICAgIC8vIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpIG9yIGV2ZW50LnByZXZlbnREZWZhdWx0KCkuXG4gICAgICAgIGlmICh0aGlzLmVtdWxhdGVDbGlja3NfICYmXG4gICAgICAgICAgICAhbmV3RXZlbnQucHJvcGFnYXRpb25TdG9wcGVkICYmXG4gICAgICAgICAgICAhdGhpcy5kcmFnZ2luZ18gJiZcbiAgICAgICAgICAgIHRoaXMuaXNNb3VzZUFjdGlvbkJ1dHRvbl8ocG9pbnRlckV2ZW50KSkge1xuICAgICAgICAgICAgdGhpcy5lbXVsYXRlQ2xpY2tfKHRoaXMuZG93bl8pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZVBvaW50ZXJzXyA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICAgICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgdGhpcy5kcmFnZ2luZ18gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZG93bl8gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgbGVmdCBtb3VzZSBidXR0b24gd2FzIHByZXNzZWQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5pc01vdXNlQWN0aW9uQnV0dG9uXyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHBvaW50ZXJFdmVudC5idXR0b24gPT09IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmhhbmRsZVBvaW50ZXJEb3duXyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgdGhpcy5lbXVsYXRlQ2xpY2tzXyA9IHRoaXMuYWN0aXZlUG9pbnRlcnNfID09PSAwO1xuICAgICAgICB0aGlzLnVwZGF0ZUFjdGl2ZVBvaW50ZXJzXyhwb2ludGVyRXZlbnQpO1xuICAgICAgICB2YXIgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04sIHRoaXMubWFwXywgcG9pbnRlckV2ZW50KTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICAgICAgdGhpcy5kb3duXyA9IHBvaW50ZXJFdmVudDtcbiAgICAgICAgaWYgKHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB2YXIgZG9jID0gdGhpcy5tYXBfLmdldE93bmVyRG9jdW1lbnQoKTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18ucHVzaChsaXN0ZW4oZG9jLCBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJNT1ZFLCB0aGlzLmhhbmRsZVBvaW50ZXJNb3ZlXywgdGhpcyksIGxpc3Rlbihkb2MsIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQLCB0aGlzLmhhbmRsZVBvaW50ZXJVcF8sIHRoaXMpLCBcbiAgICAgICAgICAgIC8qIE5vdGUgdGhhdCB0aGUgbGlzdGVuZXIgZm9yIGBwb2ludGVyY2FuY2VsIGlzIHNldCB1cCBvblxuICAgICAgICAgICAgICogYHBvaW50ZXJFdmVudEhhbmRsZXJfYCBhbmQgbm90IGBkb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfYCBsaWtlXG4gICAgICAgICAgICAgKiB0aGUgYHBvaW50ZXJ1cGAgYW5kIGBwb2ludGVybW92ZWAgbGlzdGVuZXJzLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIFRoZSByZWFzb24gZm9yIHRoaXMgaXMgdGhlIGZvbGxvd2luZzogYFRvdWNoU291cmNlLnZhY3V1bVRvdWNoZXNfKClgXG4gICAgICAgICAgICAgKiBpc3N1ZXMgYHBvaW50ZXJjYW5jZWxgIGV2ZW50cywgd2hlbiB0aGVyZSB3YXMgbm8gYHRvdWNoZW5kYCBmb3IgYVxuICAgICAgICAgICAgICogYHRvdWNoc3RhcnRgLiBOb3csIGxldCdzIHNheSBhIGZpcnN0IGB0b3VjaHN0YXJ0YCBpcyByZWdpc3RlcmVkIG9uXG4gICAgICAgICAgICAgKiBgcG9pbnRlckV2ZW50SGFuZGxlcl9gLiBUaGUgYGRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl9gIGlzIHNldCB1cC5cbiAgICAgICAgICAgICAqIEJ1dCBgZG9jdW1lbnRQb2ludGVyRXZlbnRIYW5kbGVyX2AgZG9lc24ndCBrbm93IGFib3V0IHRoZSBmaXJzdFxuICAgICAgICAgICAgICogYHRvdWNoc3RhcnRgLiBJZiB0aGVyZSBpcyBubyBgdG91Y2hlbmRgIGZvciB0aGUgYHRvdWNoc3RhcnRgLCB3ZSBjYW5cbiAgICAgICAgICAgICAqIG9ubHkgcmVjZWl2ZSBhIGB0b3VjaGNhbmNlbGAgZnJvbSBgcG9pbnRlckV2ZW50SGFuZGxlcl9gLCBiZWNhdXNlIGl0IGlzXG4gICAgICAgICAgICAgKiBvbmx5IHJlZ2lzdGVyZWQgdGhlcmUuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGxpc3Rlbih0aGlzLmVsZW1lbnRfLCBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJDQU5DRUwsIHRoaXMuaGFuZGxlUG9pbnRlclVwXywgdGhpcykpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudF8uZ2V0Um9vdE5vZGUgJiYgdGhpcy5lbGVtZW50Xy5nZXRSb290Tm9kZSgpICE9PSBkb2MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLnB1c2gobGlzdGVuKHRoaXMuZWxlbWVudF8uZ2V0Um9vdE5vZGUoKSwgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVAsIHRoaXMuaGFuZGxlUG9pbnRlclVwXywgdGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmhhbmRsZVBvaW50ZXJNb3ZlXyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgLy8gQmV0d2VlbiBwb2ludGVyZG93biBhbmQgcG9pbnRlcnVwLCBwb2ludGVybW92ZSBldmVudHMgYXJlIHRyaWdnZXJlZC5cbiAgICAgICAgLy8gVG8gYXZvaWQgYSAnZmFsc2UnIHRvdWNobW92ZSBldmVudCB0byBiZSBkaXNwYXRjaGVkLCB3ZSB0ZXN0IGlmIHRoZSBwb2ludGVyXG4gICAgICAgIC8vIG1vdmVkIGEgc2lnbmlmaWNhbnQgZGlzdGFuY2UuXG4gICAgICAgIGlmICh0aGlzLmlzTW92aW5nXyhwb2ludGVyRXZlbnQpKSB7XG4gICAgICAgICAgICB0aGlzLmRyYWdnaW5nXyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRSQUcsIHRoaXMubWFwXywgcG9pbnRlckV2ZW50LCB0aGlzLmRyYWdnaW5nXyk7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBXcmFwIGFuZCByZWxheSBhIHBvaW50ZXIgZXZlbnQuICBOb3RlIHRoYXQgdGhpcyByZXF1aXJlcyB0aGF0IHRoZSB0eXBlXG4gICAgICogc3RyaW5nIGZvciB0aGUgTWFwQnJvd3NlckV2ZW50IG1hdGNoZXMgdGhlIFBvaW50ZXJFdmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgICAqIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUucmVsYXlFdmVudF8gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHRoaXMub3JpZ2luYWxQb2ludGVyTW92ZUV2ZW50XyA9IHBvaW50ZXJFdmVudDtcbiAgICAgICAgdmFyIGRyYWdnaW5nID0gISEodGhpcy5kb3duXyAmJiB0aGlzLmlzTW92aW5nXyhwb2ludGVyRXZlbnQpKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBNYXBCcm93c2VyRXZlbnQocG9pbnRlckV2ZW50LnR5cGUsIHRoaXMubWFwXywgcG9pbnRlckV2ZW50LCBkcmFnZ2luZykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRmxleGlibGUgaGFuZGxpbmcgb2YgYSBgdG91Y2gtYWN0aW9uOiBub25lYCBjc3MgZXF1aXZhbGVudDogYmVjYXVzZSBjYWxsaW5nXG4gICAgICogYHByZXZlbnREZWZhdWx0KClgIG9uIGEgYHBvaW50ZXJtb3ZlYCBldmVudCBkb2VzIG5vdCBzdG9wIG5hdGl2ZSBwYWdlIHNjcm9sbGluZ1xuICAgICAqIGFuZCB6b29taW5nLCB3ZSBhbHNvIGxpc3RlbiBmb3IgYHRvdWNobW92ZWAgYW5kIGNhbGwgYHByZXZlbnREZWZhdWx0KClgIG9uIGl0XG4gICAgICogd2hlbiBhbiBpbnRlcmFjdGlvbiAoY3VycmVudGx5IGBEcmFnUGFuYCBoYW5kbGVzIHRoZSBldmVudC5cbiAgICAgKiBAcGFyYW0ge1RvdWNoRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaGFuZGxlVG91Y2hNb3ZlXyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAvLyBEdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL21waXplbmJlcmcvZWxtLXBlcC9pc3N1ZXMvMiwgYHRoaXMub3JpZ2luYWxQb2ludGVyTW92ZUV2ZW50X2BcbiAgICAgICAgLy8gbWF5IG5vdCBiZSBpbml0aWFsaXplZCB5ZXQgd2hlbiB3ZSBnZXQgaGVyZSBvbiBhIHBsYXRmb3JtIHdpdGhvdXQgbmF0aXZlIHBvaW50ZXIgZXZlbnRzLlxuICAgICAgICBpZiAoIXRoaXMub3JpZ2luYWxQb2ludGVyTW92ZUV2ZW50XyB8fFxuICAgICAgICAgICAgdGhpcy5vcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgICAqIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIG1vdmluZy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmlzTW92aW5nXyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmRyYWdnaW5nXyB8fFxuICAgICAgICAgICAgTWF0aC5hYnMocG9pbnRlckV2ZW50LmNsaWVudFggLSB0aGlzLmRvd25fLmNsaWVudFgpID5cbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVUb2xlcmFuY2VfIHx8XG4gICAgICAgICAgICBNYXRoLmFicyhwb2ludGVyRXZlbnQuY2xpZW50WSAtIHRoaXMuZG93bl8uY2xpZW50WSkgPiB0aGlzLm1vdmVUb2xlcmFuY2VfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVsYXllZExpc3RlbmVyS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnJlbGF5ZWRMaXN0ZW5lcktleV8pO1xuICAgICAgICAgICAgdGhpcy5yZWxheWVkTGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVsZW1lbnRfLnJlbW92ZUV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLlRPVUNITU9WRSwgdGhpcy5ib3VuZEhhbmRsZVRvdWNoTW92ZV8pO1xuICAgICAgICBpZiAodGhpcy5wb2ludGVyZG93bkxpc3RlbmVyS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnBvaW50ZXJkb3duTGlzdGVuZXJLZXlfKTtcbiAgICAgICAgICAgIHRoaXMucG9pbnRlcmRvd25MaXN0ZW5lcktleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmVsZW1lbnRfID0gbnVsbDtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBNYXBCcm93c2VyRXZlbnRIYW5kbGVyO1xufShFdmVudFRhcmdldCkpO1xuZXhwb3J0IGRlZmF1bHQgTWFwQnJvd3NlckV2ZW50SGFuZGxlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcEJyb3dzZXJFdmVudEhhbmRsZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcFByb3BlcnR5XG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIExBWUVSR1JPVVA6ICdsYXllcmdyb3VwJyxcbiAgICBTSVpFOiAnc2l6ZScsXG4gICAgVEFSR0VUOiAndGFyZ2V0JyxcbiAgICBWSUVXOiAndmlldycsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwUHJvcGVydHkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0cnVjdHMvUHJpb3JpdHlRdWV1ZVxuICovXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGNsZWFyIH0gZnJvbSAnLi4vb2JqLmpzJztcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBEUk9QID0gSW5maW5pdHk7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByaW9yaXR5IHF1ZXVlLlxuICpcbiAqIFRoZSBpbXBsZW1lbnRhdGlvbiBpcyBpbnNwaXJlZCBmcm9tIHRoZSBDbG9zdXJlIExpYnJhcnkncyBIZWFwIGNsYXNzIGFuZFxuICogUHl0aG9uJ3MgaGVhcHEgbW9kdWxlLlxuICpcbiAqIFNlZSBodHRwOi8vY2xvc3VyZS1saWJyYXJ5Lmdvb2dsZWNvZGUuY29tL3N2bi9kb2NzL2Nsb3N1cmVfZ29vZ19zdHJ1Y3RzX2hlYXAuanMuc291cmNlLmh0bWxcbiAqIGFuZCBodHRwOi8vaGcucHl0aG9uLm9yZy9jcHl0aG9uL2ZpbGUvMi43L0xpYi9oZWFwcS5weS5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICovXG52YXIgUHJpb3JpdHlRdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFQpOiBudW1iZXJ9IHByaW9yaXR5RnVuY3Rpb24gUHJpb3JpdHkgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihUKTogc3RyaW5nfSBrZXlGdW5jdGlvbiBLZXkgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gUHJpb3JpdHlRdWV1ZShwcmlvcml0eUZ1bmN0aW9uLCBrZXlGdW5jdGlvbikge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Z1bmN0aW9uKFQpOiBudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnByaW9yaXR5RnVuY3Rpb25fID0gcHJpb3JpdHlGdW5jdGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtmdW5jdGlvbihUKTogc3RyaW5nfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5rZXlGdW5jdGlvbl8gPSBrZXlGdW5jdGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxUPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZWxlbWVudHNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJpb3JpdGllc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnF1ZXVlZEVsZW1lbnRzXyA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50c18ubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5wcmlvcml0aWVzXy5sZW5ndGggPSAwO1xuICAgICAgICBjbGVhcih0aGlzLnF1ZXVlZEVsZW1lbnRzXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYW5kIHJldHVybiB0aGUgaGlnaGVzdC1wcmlvcml0eSBlbGVtZW50LiBPKGxvZyBOKS5cbiAgICAgKiBAcmV0dXJuIHtUfSBFbGVtZW50LlxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmRlcXVldWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHNfO1xuICAgICAgICB2YXIgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNbMF07XG4gICAgICAgIGlmIChlbGVtZW50cy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgZWxlbWVudHMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHByaW9yaXRpZXMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnRzWzBdID0gZWxlbWVudHMucG9wKCk7XG4gICAgICAgICAgICBwcmlvcml0aWVzWzBdID0gcHJpb3JpdGllcy5wb3AoKTtcbiAgICAgICAgICAgIHRoaXMuc2lmdFVwXygwKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWxlbWVudEtleSA9IHRoaXMua2V5RnVuY3Rpb25fKGVsZW1lbnQpO1xuICAgICAgICBkZWxldGUgdGhpcy5xdWV1ZWRFbGVtZW50c19bZWxlbWVudEtleV07XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRW5xdWV1ZSBhbiBlbGVtZW50LiBPKGxvZyBOKS5cbiAgICAgKiBAcGFyYW0ge1R9IGVsZW1lbnQgRWxlbWVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZWxlbWVudCB3YXMgYWRkZWQgdG8gdGhlIHF1ZXVlLlxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmVucXVldWUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBhc3NlcnQoISh0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KSBpbiB0aGlzLnF1ZXVlZEVsZW1lbnRzXyksIDMxKTsgLy8gVHJpZWQgdG8gZW5xdWV1ZSBhbiBgZWxlbWVudGAgdGhhdCB3YXMgYWxyZWFkeSBhZGRlZCB0byB0aGUgcXVldWVcbiAgICAgICAgdmFyIHByaW9yaXR5ID0gdGhpcy5wcmlvcml0eUZ1bmN0aW9uXyhlbGVtZW50KTtcbiAgICAgICAgaWYgKHByaW9yaXR5ICE9IERST1ApIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNfLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnByaW9yaXRpZXNfLnB1c2gocHJpb3JpdHkpO1xuICAgICAgICAgICAgdGhpcy5xdWV1ZWRFbGVtZW50c19bdGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCldID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2lmdERvd25fKDAsIHRoaXMuZWxlbWVudHNfLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBDb3VudC5cbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHNfLmxlbmd0aDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGluZGV4IG9mIHRoZSBsZWZ0IGNoaWxkIG9mIHRoZSBub2RlIGF0IHRoZSBnaXZlbiBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIGdldCB0aGUgbGVmdCBjaGlsZCBmb3IuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIGxlZnQgY2hpbGQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5nZXRMZWZ0Q2hpbGRJbmRleF8gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4ICogMiArIDE7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBpbmRleCBvZiB0aGUgcmlnaHQgY2hpbGQgb2YgdGhlIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gZ2V0IHRoZSByaWdodCBjaGlsZCBmb3IuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIHJpZ2h0IGNoaWxkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuZ2V0UmlnaHRDaGlsZEluZGV4XyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICByZXR1cm4gaW5kZXggKiAyICsgMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGluZGV4IG9mIHRoZSBwYXJlbnQgb2YgdGhlIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gZ2V0IHRoZSBwYXJlbnQgZm9yLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBwYXJlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5nZXRQYXJlbnRJbmRleF8gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIChpbmRleCAtIDEpID4+IDE7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNYWtlIHRoaXMgYSBoZWFwLiBPKE4pLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuaGVhcGlmeV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBmb3IgKGkgPSAodGhpcy5lbGVtZW50c18ubGVuZ3RoID4+IDEpIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHRoaXMuc2lmdFVwXyhpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgZW1wdHkuXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHNfLmxlbmd0aCA9PT0gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGtleSBxdWV1ZWQuXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuaXNLZXlRdWV1ZWQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBrZXkgaW4gdGhpcy5xdWV1ZWRFbGVtZW50c187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1R9IGVsZW1lbnQgRWxlbWVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBxdWV1ZWQuXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuaXNRdWV1ZWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0tleVF1ZXVlZCh0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIG1vdmUgZG93bi5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnNpZnRVcF8gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gICAgICAgIHZhciBwcmlvcml0aWVzID0gdGhpcy5wcmlvcml0aWVzXztcbiAgICAgICAgdmFyIGNvdW50ID0gZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzW2luZGV4XTtcbiAgICAgICAgdmFyIHByaW9yaXR5ID0gcHJpb3JpdGllc1tpbmRleF07XG4gICAgICAgIHZhciBzdGFydEluZGV4ID0gaW5kZXg7XG4gICAgICAgIHdoaWxlIChpbmRleCA8IGNvdW50ID4+IDEpIHtcbiAgICAgICAgICAgIHZhciBsSW5kZXggPSB0aGlzLmdldExlZnRDaGlsZEluZGV4XyhpbmRleCk7XG4gICAgICAgICAgICB2YXIgckluZGV4ID0gdGhpcy5nZXRSaWdodENoaWxkSW5kZXhfKGluZGV4KTtcbiAgICAgICAgICAgIHZhciBzbWFsbGVyQ2hpbGRJbmRleCA9IHJJbmRleCA8IGNvdW50ICYmIHByaW9yaXRpZXNbckluZGV4XSA8IHByaW9yaXRpZXNbbEluZGV4XVxuICAgICAgICAgICAgICAgID8gckluZGV4XG4gICAgICAgICAgICAgICAgOiBsSW5kZXg7XG4gICAgICAgICAgICBlbGVtZW50c1tpbmRleF0gPSBlbGVtZW50c1tzbWFsbGVyQ2hpbGRJbmRleF07XG4gICAgICAgICAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXRpZXNbc21hbGxlckNoaWxkSW5kZXhdO1xuICAgICAgICAgICAgaW5kZXggPSBzbWFsbGVyQ2hpbGRJbmRleDtcbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50c1tpbmRleF0gPSBlbGVtZW50O1xuICAgICAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXR5O1xuICAgICAgICB0aGlzLnNpZnREb3duXyhzdGFydEluZGV4LCBpbmRleCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRJbmRleCBUaGUgaW5kZXggb2YgdGhlIHJvb3QuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZSB0byBtb3ZlIHVwLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuc2lmdERvd25fID0gZnVuY3Rpb24gKHN0YXJ0SW5kZXgsIGluZGV4KSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHNfO1xuICAgICAgICB2YXIgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNbaW5kZXhdO1xuICAgICAgICB2YXIgcHJpb3JpdHkgPSBwcmlvcml0aWVzW2luZGV4XTtcbiAgICAgICAgd2hpbGUgKGluZGV4ID4gc3RhcnRJbmRleCkge1xuICAgICAgICAgICAgdmFyIHBhcmVudEluZGV4ID0gdGhpcy5nZXRQYXJlbnRJbmRleF8oaW5kZXgpO1xuICAgICAgICAgICAgaWYgKHByaW9yaXRpZXNbcGFyZW50SW5kZXhdID4gcHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50c1tpbmRleF0gPSBlbGVtZW50c1twYXJlbnRJbmRleF07XG4gICAgICAgICAgICAgICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0aWVzW3BhcmVudEluZGV4XTtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHBhcmVudEluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudDtcbiAgICAgICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0eTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnJlcHJpb3JpdGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHByaW9yaXR5RnVuY3Rpb24gPSB0aGlzLnByaW9yaXR5RnVuY3Rpb25fO1xuICAgICAgICB2YXIgZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzXztcbiAgICAgICAgdmFyIHByaW9yaXRpZXMgPSB0aGlzLnByaW9yaXRpZXNfO1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICB2YXIgbiA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgdmFyIGVsZW1lbnQsIGksIHByaW9yaXR5O1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudHNbaV07XG4gICAgICAgICAgICBwcmlvcml0eSA9IHByaW9yaXR5RnVuY3Rpb24oZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAocHJpb3JpdHkgPT0gRFJPUCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnF1ZXVlZEVsZW1lbnRzX1t0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXR5O1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzW2luZGV4KytdID0gZWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50cy5sZW5ndGggPSBpbmRleDtcbiAgICAgICAgcHJpb3JpdGllcy5sZW5ndGggPSBpbmRleDtcbiAgICAgICAgdGhpcy5oZWFwaWZ5XygpO1xuICAgIH07XG4gICAgcmV0dXJuIFByaW9yaXR5UXVldWU7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgUHJpb3JpdHlRdWV1ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByaW9yaXR5UXVldWUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9UaWxlUXVldWVcbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFByaW9yaXR5UXVldWUsIHsgRFJPUCB9IGZyb20gJy4vc3RydWN0cy9Qcmlvcml0eVF1ZXVlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi9UaWxlU3RhdGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHQsIHN0cmluZywgaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUsIG51bWJlcik6IG51bWJlcn0gUHJpb3JpdHlGdW5jdGlvblxuICovXG52YXIgVGlsZVF1ZXVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlUXVldWUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQcmlvcml0eUZ1bmN0aW9ufSB0aWxlUHJpb3JpdHlGdW5jdGlvbiBUaWxlIHByaW9yaXR5IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogP30gdGlsZUNoYW5nZUNhbGxiYWNrIEZ1bmN0aW9uIGNhbGxlZCBvbiBlYWNoIHRpbGUgY2hhbmdlIGV2ZW50LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbGVRdWV1ZSh0aWxlUHJpb3JpdHlGdW5jdGlvbiwgdGlsZUNoYW5nZUNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gZWxlbWVudCBFbGVtZW50LlxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFByaW9yaXR5LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aWxlUHJpb3JpdHlGdW5jdGlvbi5hcHBseShudWxsLCBlbGVtZW50KTtcbiAgICAgICAgfSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoZWxlbWVudFswXSkuZ2V0S2V5KCk7XG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5ib3VuZEhhbmRsZVRpbGVDaGFuZ2VfID0gX3RoaXMuaGFuZGxlVGlsZUNoYW5nZS5iaW5kKF90aGlzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtmdW5jdGlvbigpOiA/fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUNoYW5nZUNhbGxiYWNrXyA9IHRpbGVDaGFuZ2VDYWxsYmFjaztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlc0xvYWRpbmdfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZyxib29sZWFuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVzTG9hZGluZ0tleXNfID0ge307XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheX0gZWxlbWVudCBFbGVtZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBlbGVtZW50IHdhcyBhZGRlZCB0byB0aGUgcXVldWUuXG4gICAgICovXG4gICAgVGlsZVF1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGFkZGVkID0gX3N1cGVyLnByb3RvdHlwZS5lbnF1ZXVlLmNhbGwodGhpcywgZWxlbWVudCk7XG4gICAgICAgIGlmIChhZGRlZCkge1xuICAgICAgICAgICAgdmFyIHRpbGUgPSBlbGVtZW50WzBdO1xuICAgICAgICAgICAgdGlsZS5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuYm91bmRIYW5kbGVUaWxlQ2hhbmdlXyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFkZGVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBOdW1iZXIgb2YgdGlsZXMgbG9hZGluZy5cbiAgICAgKi9cbiAgICBUaWxlUXVldWUucHJvdG90eXBlLmdldFRpbGVzTG9hZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZXNMb2FkaW5nXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVRdWV1ZS5wcm90b3R5cGUuaGFuZGxlVGlsZUNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgdGlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9ICovIChldmVudC50YXJnZXQpO1xuICAgICAgICB2YXIgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgIGlmICgodGlsZS5oaWZpICYmIHN0YXRlID09PSBUaWxlU3RhdGUuTE9BREVEKSB8fFxuICAgICAgICAgICAgc3RhdGUgPT09IFRpbGVTdGF0ZS5FUlJPUiB8fFxuICAgICAgICAgICAgc3RhdGUgPT09IFRpbGVTdGF0ZS5FTVBUWSkge1xuICAgICAgICAgICAgdGlsZS5yZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuYm91bmRIYW5kbGVUaWxlQ2hhbmdlXyk7XG4gICAgICAgICAgICB2YXIgdGlsZUtleSA9IHRpbGUuZ2V0S2V5KCk7XG4gICAgICAgICAgICBpZiAodGlsZUtleSBpbiB0aGlzLnRpbGVzTG9hZGluZ0tleXNfKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudGlsZXNMb2FkaW5nS2V5c19bdGlsZUtleV07XG4gICAgICAgICAgICAgICAgLS10aGlzLnRpbGVzTG9hZGluZ187XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRpbGVDaGFuZ2VDYWxsYmFja18oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFRvdGFsTG9hZGluZyBNYXhpbXVtIG51bWJlciB0aWxlcyB0byBsb2FkIHNpbXVsdGFuZW91c2x5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhOZXdMb2FkcyBNYXhpbXVtIG51bWJlciBvZiBuZXcgdGlsZXMgdG8gbG9hZC5cbiAgICAgKi9cbiAgICBUaWxlUXVldWUucHJvdG90eXBlLmxvYWRNb3JlVGlsZXMgPSBmdW5jdGlvbiAobWF4VG90YWxMb2FkaW5nLCBtYXhOZXdMb2Fkcykge1xuICAgICAgICB2YXIgbmV3TG9hZHMgPSAwO1xuICAgICAgICB2YXIgc3RhdGUsIHRpbGUsIHRpbGVLZXk7XG4gICAgICAgIHdoaWxlICh0aGlzLnRpbGVzTG9hZGluZ18gPCBtYXhUb3RhbExvYWRpbmcgJiZcbiAgICAgICAgICAgIG5ld0xvYWRzIDwgbWF4TmV3TG9hZHMgJiZcbiAgICAgICAgICAgIHRoaXMuZ2V0Q291bnQoKSA+IDApIHtcbiAgICAgICAgICAgIHRpbGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5kZXF1ZXVlKClbMF0pO1xuICAgICAgICAgICAgdGlsZUtleSA9IHRpbGUuZ2V0S2V5KCk7XG4gICAgICAgICAgICBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gVGlsZVN0YXRlLklETEUgJiYgISh0aWxlS2V5IGluIHRoaXMudGlsZXNMb2FkaW5nS2V5c18pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aWxlc0xvYWRpbmdLZXlzX1t0aWxlS2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgKyt0aGlzLnRpbGVzTG9hZGluZ187XG4gICAgICAgICAgICAgICAgKytuZXdMb2FkcztcbiAgICAgICAgICAgICAgICB0aWxlLmxvYWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRpbGVRdWV1ZTtcbn0oUHJpb3JpdHlRdWV1ZSkpO1xuZXhwb3J0IGRlZmF1bHQgVGlsZVF1ZXVlO1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9QbHVnZ2FibGVNYXAuanMnKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRpbGVTb3VyY2VLZXkgVGlsZSBzb3VyY2Uga2V5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gdGlsZUNlbnRlciBUaWxlIGNlbnRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0aWxlUmVzb2x1dGlvbiBUaWxlIHJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRpbGUgcHJpb3JpdHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaWxlUHJpb3JpdHkoZnJhbWVTdGF0ZSwgdGlsZSwgdGlsZVNvdXJjZUtleSwgdGlsZUNlbnRlciwgdGlsZVJlc29sdXRpb24pIHtcbiAgICAvLyBGaWx0ZXIgb3V0IHRpbGVzIGF0IGhpZ2hlciB6b29tIGxldmVscyB0aGFuIHRoZSBjdXJyZW50IHpvb20gbGV2ZWwsIG9yIHRoYXRcbiAgICAvLyBhcmUgb3V0c2lkZSB0aGUgdmlzaWJsZSBleHRlbnQuXG4gICAgaWYgKCFmcmFtZVN0YXRlIHx8ICEodGlsZVNvdXJjZUtleSBpbiBmcmFtZVN0YXRlLndhbnRlZFRpbGVzKSkge1xuICAgICAgICByZXR1cm4gRFJPUDtcbiAgICB9XG4gICAgaWYgKCFmcmFtZVN0YXRlLndhbnRlZFRpbGVzW3RpbGVTb3VyY2VLZXldW3RpbGUuZ2V0S2V5KCldKSB7XG4gICAgICAgIHJldHVybiBEUk9QO1xuICAgIH1cbiAgICAvLyBQcmlvcml0aXplIHRoZSBoaWdoZXN0IHpvb20gbGV2ZWwgdGlsZXMgY2xvc2VzdCB0byB0aGUgZm9jdXMuXG4gICAgLy8gVGlsZXMgYXQgaGlnaGVyIHpvb20gbGV2ZWxzIGFyZSBwcmlvcml0aXplZCB1c2luZyBNYXRoLmxvZyh0aWxlUmVzb2x1dGlvbikuXG4gICAgLy8gV2l0aGluIGEgem9vbSBsZXZlbCwgdGlsZXMgYXJlIHByaW9yaXRpemVkIGJ5IHRoZSBkaXN0YW5jZSBpbiBwaXhlbHMgYmV0d2VlblxuICAgIC8vIHRoZSBjZW50ZXIgb2YgdGhlIHRpbGUgYW5kIHRoZSBjZW50ZXIgb2YgdGhlIHZpZXdwb3J0LiAgVGhlIGZhY3RvciBvZiA2NTUzNlxuICAgIC8vIG1lYW5zIHRoYXQgdGhlIHByaW9yaXRpemF0aW9uIHNob3VsZCBiZWhhdmUgYXMgZGVzaXJlZCBmb3IgdGlsZXMgdXAgdG9cbiAgICAvLyA2NTUzNiAqIE1hdGgubG9nKDIpID0gNDU0MjYgcGl4ZWxzIGZyb20gdGhlIGZvY3VzLlxuICAgIHZhciBjZW50ZXIgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5jZW50ZXI7XG4gICAgdmFyIGRlbHRhWCA9IHRpbGVDZW50ZXJbMF0gLSBjZW50ZXJbMF07XG4gICAgdmFyIGRlbHRhWSA9IHRpbGVDZW50ZXJbMV0gLSBjZW50ZXJbMV07XG4gICAgcmV0dXJuICg2NTUzNiAqIE1hdGgubG9nKHRpbGVSZXNvbHV0aW9uKSArXG4gICAgICAgIE1hdGguc3FydChkZWx0YVggKiBkZWx0YVggKyBkZWx0YVkgKiBkZWx0YVkpIC8gdGlsZVJlc29sdXRpb24pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZVF1ZXVlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9UaWxlU3RhdGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgSURMRTogMCxcbiAgICBMT0FESU5HOiAxLFxuICAgIExPQURFRDogMixcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCB0aWxlIGxvYWRpbmcgZmFpbGVkXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBFUlJPUjogMyxcbiAgICBFTVBUWTogNCxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlU3RhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1ZpZXdIaW50XG4gKi9cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIEFOSU1BVElORzogMCxcbiAgICBJTlRFUkFDVElORzogMSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1WaWV3SGludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVmlld1Byb3BlcnR5XG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIENFTlRFUjogJ2NlbnRlcicsXG4gICAgUkVTT0xVVElPTjogJ3Jlc29sdXRpb24nLFxuICAgIFJPVEFUSU9OOiAncm90YXRpb24nLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZpZXdQcm9wZXJ0eS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZWdyaWQvY29tbW9uXG4gKi9cbi8qKlxuICogRGVmYXVsdCBtYXhpbXVtIHpvb20gZm9yIGRlZmF1bHQgdGlsZSBncmlkcy5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgREVGQVVMVF9NQVhfWk9PTSA9IDQyO1xuLyoqXG4gKiBEZWZhdWx0IHRpbGUgc2l6ZS5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgREVGQVVMVF9USUxFX1NJWkUgPSAyNTY7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21tb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NlbnRlcmNvbnN0cmFpbnRcbiAqL1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuL21hdGguanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZCksIG51bWJlciwgaW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemUsIGJvb2xlYW49LCBBcnJheTxudW1iZXI+PSk6IChpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWQpfSBUeXBlXG4gKi9cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9ubHlDZW50ZXIgSWYgdHJ1ZSwgdGhlIGNvbnN0cmFpbnQgd2lsbCBvbmx5IGFwcGx5IHRvIHRoZSB2aWV3IGNlbnRlci5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc21vb3RoIElmIHRydWUsIHRoZSB2aWV3IHdpbGwgYmUgYWJsZSB0byBnbyBzbGlnaHRseSBvdXQgb2YgdGhlIGdpdmVuIGV4dGVudFxuICogKG9ubHkgZHVyaW5nIGludGVyYWN0aW9uIGFuZCBhbmltYXRpb24pLlxuICogQHJldHVybiB7VHlwZX0gVGhlIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFeHRlbnQoZXh0ZW50LCBvbmx5Q2VudGVyLCBzbW9vdGgpIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBjZW50ZXIgQ2VudGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBWaWV3cG9ydCBzaXplOyB1bnVzZWQgaWYgYG9ubHlDZW50ZXJgIHdhcyBzcGVjaWZpZWQuXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2lzTW92aW5nIFRydWUgaWYgYW4gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIGluIHByb2dyZXNzLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9jZW50ZXJTaGlmdCBTaGlmdCBiZXR3ZWVuIG1hcCBjZW50ZXIgYW5kIHZpZXdwb3J0IGNlbnRlci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAoY2VudGVyLCByZXNvbHV0aW9uLCBzaXplLCBvcHRfaXNNb3ZpbmcsIG9wdF9jZW50ZXJTaGlmdCkge1xuICAgICAgICBpZiAoY2VudGVyKSB7XG4gICAgICAgICAgICB2YXIgdmlld1dpZHRoID0gb25seUNlbnRlciA/IDAgOiBzaXplWzBdICogcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB2aWV3SGVpZ2h0ID0gb25seUNlbnRlciA/IDAgOiBzaXplWzFdICogcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciBzaGlmdFggPSBvcHRfY2VudGVyU2hpZnQgPyBvcHRfY2VudGVyU2hpZnRbMF0gOiAwO1xuICAgICAgICAgICAgdmFyIHNoaWZ0WSA9IG9wdF9jZW50ZXJTaGlmdCA/IG9wdF9jZW50ZXJTaGlmdFsxXSA6IDA7XG4gICAgICAgICAgICB2YXIgbWluWCA9IGV4dGVudFswXSArIHZpZXdXaWR0aCAvIDIgKyBzaGlmdFg7XG4gICAgICAgICAgICB2YXIgbWF4WCA9IGV4dGVudFsyXSAtIHZpZXdXaWR0aCAvIDIgKyBzaGlmdFg7XG4gICAgICAgICAgICB2YXIgbWluWSA9IGV4dGVudFsxXSArIHZpZXdIZWlnaHQgLyAyICsgc2hpZnRZO1xuICAgICAgICAgICAgdmFyIG1heFkgPSBleHRlbnRbM10gLSB2aWV3SGVpZ2h0IC8gMiArIHNoaWZ0WTtcbiAgICAgICAgICAgIC8vIG5vdGU6IHdoZW4gem9vbWluZyBvdXQgb2YgYm91bmRzLCBtaW4gYW5kIG1heCB2YWx1ZXMgZm9yIHggYW5kIHkgbWF5XG4gICAgICAgICAgICAvLyBlbmQgdXAgaW52ZXJ0ZWQgKG1pbiA+IG1heCk7IHRoaXMgaGFzIHRvIGJlIGFjY291bnRlZCBmb3JcbiAgICAgICAgICAgIGlmIChtaW5YID4gbWF4WCkge1xuICAgICAgICAgICAgICAgIG1pblggPSAobWF4WCArIG1pblgpIC8gMjtcbiAgICAgICAgICAgICAgICBtYXhYID0gbWluWDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtaW5ZID4gbWF4WSkge1xuICAgICAgICAgICAgICAgIG1pblkgPSAobWF4WSArIG1pblkpIC8gMjtcbiAgICAgICAgICAgICAgICBtYXhZID0gbWluWTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB4ID0gY2xhbXAoY2VudGVyWzBdLCBtaW5YLCBtYXhYKTtcbiAgICAgICAgICAgIHZhciB5ID0gY2xhbXAoY2VudGVyWzFdLCBtaW5ZLCBtYXhZKTtcbiAgICAgICAgICAgIHZhciByYXRpbyA9IDMwICogcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIC8vIGR1cmluZyBhbiBpbnRlcmFjdGlvbiwgYWxsb3cgc29tZSBvdmVyc2Nyb2xsXG4gICAgICAgICAgICBpZiAob3B0X2lzTW92aW5nICYmIHNtb290aCkge1xuICAgICAgICAgICAgICAgIHggKz1cbiAgICAgICAgICAgICAgICAgICAgLXJhdGlvICogTWF0aC5sb2coMSArIE1hdGgubWF4KDAsIG1pblggLSBjZW50ZXJbMF0pIC8gcmF0aW8pICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhdGlvICogTWF0aC5sb2coMSArIE1hdGgubWF4KDAsIGNlbnRlclswXSAtIG1heFgpIC8gcmF0aW8pO1xuICAgICAgICAgICAgICAgIHkgKz1cbiAgICAgICAgICAgICAgICAgICAgLXJhdGlvICogTWF0aC5sb2coMSArIE1hdGgubWF4KDAsIG1pblkgLSBjZW50ZXJbMV0pIC8gcmF0aW8pICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhdGlvICogTWF0aC5sb2coMSArIE1hdGgubWF4KDAsIGNlbnRlclsxXSAtIG1heFkpIC8gcmF0aW8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFt4LCB5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IGNlbnRlciBDZW50ZXIuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vbmUoY2VudGVyKSB7XG4gICAgcmV0dXJuIGNlbnRlcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNlbnRlcmNvbnN0cmFpbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Jlc29sdXRpb25jb25zdHJhaW50XG4gKi9cbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7IGdldEhlaWdodCwgZ2V0V2lkdGggfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBsaW5lYXJGaW5kTmVhcmVzdCB9IGZyb20gJy4vYXJyYXkuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKG51bWJlcnx1bmRlZmluZWQpLCBudW1iZXIsIGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplLCBib29sZWFuPSk6IChudW1iZXJ8dW5kZWZpbmVkKX0gVHlwZVxuICovXG4vKipcbiAqIFJldHVybnMgYSBtb2RpZmllZCByZXNvbHV0aW9uIHRha2luZyBpbnRvIGFjY291bnQgdGhlIHZpZXdwb3J0IHNpemUgYW5kIG1heGltdW1cbiAqIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvblxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IG1heEV4dGVudCBNYXhpbXVtIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gdmlld3BvcnRTaXplIFZpZXdwb3J0IHNpemUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNob3dGdWxsRXh0ZW50IFdoZXRoZXIgdG8gc2hvdyB0aGUgZnVsbCBleHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IENhcHBlZCByZXNvbHV0aW9uLlxuICovXG5mdW5jdGlvbiBnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uKHJlc29sdXRpb24sIG1heEV4dGVudCwgdmlld3BvcnRTaXplLCBzaG93RnVsbEV4dGVudCkge1xuICAgIHZhciB4UmVzb2x1dGlvbiA9IGdldFdpZHRoKG1heEV4dGVudCkgLyB2aWV3cG9ydFNpemVbMF07XG4gICAgdmFyIHlSZXNvbHV0aW9uID0gZ2V0SGVpZ2h0KG1heEV4dGVudCkgLyB2aWV3cG9ydFNpemVbMV07XG4gICAgaWYgKHNob3dGdWxsRXh0ZW50KSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1pbihyZXNvbHV0aW9uLCBNYXRoLm1heCh4UmVzb2x1dGlvbiwgeVJlc29sdXRpb24pKTtcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWluKHJlc29sdXRpb24sIE1hdGgubWluKHhSZXNvbHV0aW9uLCB5UmVzb2x1dGlvbikpO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgbW9kaWZpZWQgcmVzb2x1dGlvbiB0byBiZSBiZXR3ZWVuIG1heFJlc29sdXRpb24gYW5kIG1pblJlc29sdXRpb24gd2hpbGVcbiAqIHN0aWxsIGFsbG93aW5nIHRoZSB2YWx1ZSB0byBiZSBzbGlnaHRseSBvdXQgb2YgYm91bmRzLlxuICogTm90ZTogdGhlIGNvbXB1dGF0aW9uIGlzIGJhc2VkIG9uIHRoZSBsb2dhcml0aG0gZnVuY3Rpb24gKGxuKTpcbiAqICAtIGF0IDEsIGxuKHgpIGlzIDBcbiAqICAtIGFib3ZlIDEsIGxuKHgpIGtlZXBzIGluY3JlYXNpbmcgYnV0IGF0IGEgbXVjaCBzbG93ZXIgcGFjZSB0aGFuIHhcbiAqIFRoZSBmaW5hbCByZXN1bHQgaXMgY2xhbXBlZCB0byBwcmV2ZW50IGdldHRpbmcgdG9vIGZhciBhd2F5IGZyb20gYm91bmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uIE1heCByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblJlc29sdXRpb24gTWluIHJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNtb290aGVkIHJlc29sdXRpb24uXG4gKi9cbmZ1bmN0aW9uIGdldFNtb290aENsYW1wZWRSZXNvbHV0aW9uKHJlc29sdXRpb24sIG1heFJlc29sdXRpb24sIG1pblJlc29sdXRpb24pIHtcbiAgICB2YXIgcmVzdWx0ID0gTWF0aC5taW4ocmVzb2x1dGlvbiwgbWF4UmVzb2x1dGlvbik7XG4gICAgdmFyIHJhdGlvID0gNTA7XG4gICAgcmVzdWx0ICo9XG4gICAgICAgIE1hdGgubG9nKDEgKyByYXRpbyAqIE1hdGgubWF4KDAsIHJlc29sdXRpb24gLyBtYXhSZXNvbHV0aW9uIC0gMSkpIC8gcmF0aW8gK1xuICAgICAgICAgICAgMTtcbiAgICBpZiAobWluUmVzb2x1dGlvbikge1xuICAgICAgICByZXN1bHQgPSBNYXRoLm1heChyZXN1bHQsIG1pblJlc29sdXRpb24pO1xuICAgICAgICByZXN1bHQgLz1cbiAgICAgICAgICAgIE1hdGgubG9nKDEgKyByYXRpbyAqIE1hdGgubWF4KDAsIG1pblJlc29sdXRpb24gLyByZXNvbHV0aW9uIC0gMSkpIC9cbiAgICAgICAgICAgICAgICByYXRpbyArXG4gICAgICAgICAgICAgICAgMTtcbiAgICB9XG4gICAgcmV0dXJuIGNsYW1wKHJlc3VsdCwgbWluUmVzb2x1dGlvbiAvIDIsIG1heFJlc29sdXRpb24gKiAyKTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSByZXNvbHV0aW9ucyBSZXNvbHV0aW9ucy5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9zbW9vdGggSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBiZSBhYmxlIHRvIHNsaWdodGx5IGV4Y2VlZCByZXNvbHV0aW9uIGxpbWl0cy4gRGVmYXVsdDogdHJ1ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50PX0gb3B0X21heEV4dGVudCBNYXhpbXVtIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3Nob3dGdWxsRXh0ZW50IElmIHRydWUsIGFsbG93cyB1cyB0byBzaG93IHRoZSBmdWxsIGV4dGVudC4gRGVmYXVsdDogZmFsc2UuXG4gKiBAcmV0dXJuIHtUeXBlfSBab29tIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMocmVzb2x1dGlvbnMsIG9wdF9zbW9vdGgsIG9wdF9tYXhFeHRlbnQsIG9wdF9zaG93RnVsbEV4dGVudCkge1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRpcmVjdGlvbiBEaXJlY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBWaWV3cG9ydCBzaXplLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pc01vdmluZyBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBkaXJlY3Rpb24sIHNpemUsIG9wdF9pc01vdmluZykge1xuICAgICAgICBpZiAocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgbWF4UmVzb2x1dGlvbiA9IHJlc29sdXRpb25zWzBdO1xuICAgICAgICAgICAgdmFyIG1pblJlc29sdXRpb24gPSByZXNvbHV0aW9uc1tyZXNvbHV0aW9ucy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHZhciBjYXBwZWRNYXhSZXMgPSBvcHRfbWF4RXh0ZW50XG4gICAgICAgICAgICAgICAgPyBnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uKG1heFJlc29sdXRpb24sIG9wdF9tYXhFeHRlbnQsIHNpemUsIG9wdF9zaG93RnVsbEV4dGVudClcbiAgICAgICAgICAgICAgICA6IG1heFJlc29sdXRpb247XG4gICAgICAgICAgICAvLyBkdXJpbmcgaW50ZXJhY3Rpbmcgb3IgYW5pbWF0aW5nLCBhbGxvdyBpbnRlcm1lZGlhcnkgdmFsdWVzXG4gICAgICAgICAgICBpZiAob3B0X2lzTW92aW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNtb290aCA9IG9wdF9zbW9vdGggIT09IHVuZGVmaW5lZCA/IG9wdF9zbW9vdGggOiB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghc21vb3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbGFtcChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0U21vb3RoQ2xhbXBlZFJlc29sdXRpb24ocmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzLCBtaW5SZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjYXBwZWQgPSBNYXRoLm1pbihjYXBwZWRNYXhSZXMsIHJlc29sdXRpb24pO1xuICAgICAgICAgICAgdmFyIHogPSBNYXRoLmZsb29yKGxpbmVhckZpbmROZWFyZXN0KHJlc29sdXRpb25zLCBjYXBwZWQsIGRpcmVjdGlvbikpO1xuICAgICAgICAgICAgaWYgKHJlc29sdXRpb25zW3pdID4gY2FwcGVkTWF4UmVzICYmIHogPCByZXNvbHV0aW9ucy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdXRpb25zW3ogKyAxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNvbHV0aW9uc1t6XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHBvd2VyIFBvd2VyLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFJlc29sdXRpb24gTWF4aW11bSByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfbWluUmVzb2x1dGlvbiBNaW5pbXVtIHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfc21vb3RoIElmIHRydWUsIHRoZSB2aWV3IHdpbGwgYmUgYWJsZSB0byBzbGlnaHRseSBleGNlZWQgcmVzb2x1dGlvbiBsaW1pdHMuIERlZmF1bHQ6IHRydWUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudD19IG9wdF9tYXhFeHRlbnQgTWF4aW11bSBhbGxvd2VkIGV4dGVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9zaG93RnVsbEV4dGVudCBJZiB0cnVlLCBhbGxvd3MgdXMgdG8gc2hvdyB0aGUgZnVsbCBleHRlbnQuIERlZmF1bHQ6IGZhbHNlLlxuICogQHJldHVybiB7VHlwZX0gWm9vbSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNuYXBUb1Bvd2VyKHBvd2VyLCBtYXhSZXNvbHV0aW9uLCBvcHRfbWluUmVzb2x1dGlvbiwgb3B0X3Ntb290aCwgb3B0X21heEV4dGVudCwgb3B0X3Nob3dGdWxsRXh0ZW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGlyZWN0aW9uIERpcmVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFZpZXdwb3J0IHNpemUuXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2lzTW92aW5nIFRydWUgaWYgYW4gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIGluIHByb2dyZXNzLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJlc29sdXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHJlc29sdXRpb24sIGRpcmVjdGlvbiwgc2l6ZSwgb3B0X2lzTW92aW5nKSB7XG4gICAgICAgIGlmIChyZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBjYXBwZWRNYXhSZXMgPSBvcHRfbWF4RXh0ZW50XG4gICAgICAgICAgICAgICAgPyBnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uKG1heFJlc29sdXRpb24sIG9wdF9tYXhFeHRlbnQsIHNpemUsIG9wdF9zaG93RnVsbEV4dGVudClcbiAgICAgICAgICAgICAgICA6IG1heFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgbWluUmVzb2x1dGlvbiA9IG9wdF9taW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRfbWluUmVzb2x1dGlvbiA6IDA7XG4gICAgICAgICAgICAvLyBkdXJpbmcgaW50ZXJhY3Rpbmcgb3IgYW5pbWF0aW5nLCBhbGxvdyBpbnRlcm1lZGlhcnkgdmFsdWVzXG4gICAgICAgICAgICBpZiAob3B0X2lzTW92aW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNtb290aCA9IG9wdF9zbW9vdGggIT09IHVuZGVmaW5lZCA/IG9wdF9zbW9vdGggOiB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghc21vb3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbGFtcChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0U21vb3RoQ2xhbXBlZFJlc29sdXRpb24ocmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzLCBtaW5SZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0b2xlcmFuY2UgPSAxZS05O1xuICAgICAgICAgICAgdmFyIG1pblpvb21MZXZlbCA9IE1hdGguY2VpbChNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gY2FwcGVkTWF4UmVzKSAvIE1hdGgubG9nKHBvd2VyKSAtIHRvbGVyYW5jZSk7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gLWRpcmVjdGlvbiAqICgwLjUgLSB0b2xlcmFuY2UpICsgMC41O1xuICAgICAgICAgICAgdmFyIGNhcHBlZCA9IE1hdGgubWluKGNhcHBlZE1heFJlcywgcmVzb2x1dGlvbik7XG4gICAgICAgICAgICB2YXIgY2FwcGVkWm9vbUxldmVsID0gTWF0aC5mbG9vcihNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gY2FwcGVkKSAvIE1hdGgubG9nKHBvd2VyKSArIG9mZnNldCk7XG4gICAgICAgICAgICB2YXIgem9vbUxldmVsID0gTWF0aC5tYXgobWluWm9vbUxldmVsLCBjYXBwZWRab29tTGV2ZWwpO1xuICAgICAgICAgICAgdmFyIG5ld1Jlc29sdXRpb24gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3cocG93ZXIsIHpvb21MZXZlbCk7XG4gICAgICAgICAgICByZXR1cm4gY2xhbXAobmV3UmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFJlc29sdXRpb24gTWF4IHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gbWluUmVzb2x1dGlvbiBNaW4gcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9zbW9vdGggSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBiZSBhYmxlIHRvIHNsaWdodGx5IGV4Y2VlZCByZXNvbHV0aW9uIGxpbWl0cy4gRGVmYXVsdDogdHJ1ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50PX0gb3B0X21heEV4dGVudCBNYXhpbXVtIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3Nob3dGdWxsRXh0ZW50IElmIHRydWUsIGFsbG93cyB1cyB0byBzaG93IHRoZSBmdWxsIGV4dGVudC4gRGVmYXVsdDogZmFsc2UuXG4gKiBAcmV0dXJuIHtUeXBlfSBab29tIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTWluTWF4UmVzb2x1dGlvbihtYXhSZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBvcHRfc21vb3RoLCBvcHRfbWF4RXh0ZW50LCBvcHRfc2hvd0Z1bGxFeHRlbnQpIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkaXJlY3Rpb24gRGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgVmlld3BvcnQgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaXNNb3ZpbmcgVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocmVzb2x1dGlvbiwgZGlyZWN0aW9uLCBzaXplLCBvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGNhcHBlZE1heFJlcyA9IG9wdF9tYXhFeHRlbnRcbiAgICAgICAgICAgICAgICA/IGdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24obWF4UmVzb2x1dGlvbiwgb3B0X21heEV4dGVudCwgc2l6ZSwgb3B0X3Nob3dGdWxsRXh0ZW50KVxuICAgICAgICAgICAgICAgIDogbWF4UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciBzbW9vdGggPSBvcHRfc21vb3RoICE9PSB1bmRlZmluZWQgPyBvcHRfc21vb3RoIDogdHJ1ZTtcbiAgICAgICAgICAgIGlmICghc21vb3RoIHx8ICFvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xhbXAocmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBnZXRTbW9vdGhDbGFtcGVkUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMsIG1pblJlc29sdXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzb2x1dGlvbmNvbnN0cmFpbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JvdGF0aW9uY29uc3RyYWludFxuICovXG5pbXBvcnQgeyB0b1JhZGlhbnMgfSBmcm9tICcuL21hdGguanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKG51bWJlcnx1bmRlZmluZWQpLCBib29sZWFuPSk6IChudW1iZXJ8dW5kZWZpbmVkKX0gVHlwZVxuICovXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGUocm90YXRpb24pIHtcbiAgICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUm90YXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub25lKHJvdGF0aW9uKSB7XG4gICAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIE4uXG4gKiBAcmV0dXJuIHtUeXBlfSBSb3RhdGlvbiBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvTihuKSB7XG4gICAgdmFyIHRoZXRhID0gKDIgKiBNYXRoLlBJKSAvIG47XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pc01vdmluZyBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocm90YXRpb24sIG9wdF9pc01vdmluZykge1xuICAgICAgICBpZiAob3B0X2lzTW92aW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gcm90YXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJvdGF0aW9uID0gTWF0aC5mbG9vcihyb3RhdGlvbiAvIHRoZXRhICsgMC41KSAqIHRoZXRhO1xuICAgICAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF90b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHJldHVybiB7VHlwZX0gUm90YXRpb24gY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNuYXBUb1plcm8ob3B0X3RvbGVyYW5jZSkge1xuICAgIHZhciB0b2xlcmFuY2UgPSBvcHRfdG9sZXJhbmNlIHx8IHRvUmFkaWFucyg1KTtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2lzTW92aW5nIFRydWUgaWYgYW4gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIGluIHByb2dyZXNzLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJvdGF0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChyb3RhdGlvbiwgb3B0X2lzTW92aW5nKSB7XG4gICAgICAgIGlmIChvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKHJvdGF0aW9uKSA8PSB0b2xlcmFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByb3RhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJvdGF0aW9uY29uc3RyYWludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2Nsb3Nlc3RcbiAqL1xuaW1wb3J0IHsgbGVycCwgc3F1YXJlZERpc3RhbmNlIGFzIHNxdWFyZWREeCB9IGZyb20gJy4uLy4uL21hdGguanMnO1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBwb2ludCBvbiB0aGUgMkQgbGluZSBzZWdtZW50IGZsYXRDb29yZGluYXRlc1tvZmZzZXQxXSB0b1xuICogZmxhdENvb3JkaW5hdGVzW29mZnNldDJdIHRoYXQgaXMgY2xvc2VzdCB0byB0aGUgcG9pbnQgKHgsIHkpLiAgRXh0cmFcbiAqIGRpbWVuc2lvbnMgYXJlIGxpbmVhcmx5IGludGVycG9sYXRlZC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0MSBPZmZzZXQgMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQyIE9mZnNldCAyLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gKi9cbmZ1bmN0aW9uIGFzc2lnbkNsb3Nlc3QoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQxLCBvZmZzZXQyLCBzdHJpZGUsIHgsIHksIGNsb3Nlc3RQb2ludCkge1xuICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQxXTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MSArIDFdO1xuICAgIHZhciBkeCA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQyXSAtIHgxO1xuICAgIHZhciBkeSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQyICsgMV0gLSB5MTtcbiAgICB2YXIgb2Zmc2V0O1xuICAgIGlmIChkeCA9PT0gMCAmJiBkeSA9PT0gMCkge1xuICAgICAgICBvZmZzZXQgPSBvZmZzZXQxO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHQgPSAoKHggLSB4MSkgKiBkeCArICh5IC0geTEpICogZHkpIC8gKGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICAgICAgaWYgKHQgPiAxKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHQgPiAwKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gbGVycChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MSArIGldLCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MiArIGldLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQxO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldO1xuICAgIH1cbiAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xufVxuLyoqXG4gKiBSZXR1cm4gdGhlIHNxdWFyZWQgb2YgdGhlIGxhcmdlc3QgZGlzdGFuY2UgYmV0d2VlbiBhbnkgcGFpciBvZiBjb25zZWN1dGl2ZVxuICogY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBNYXggc3F1YXJlZCBkZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gTWF4IHNxdWFyZWQgZGVsdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXhTcXVhcmVkRGVsdGEoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBtYXgpIHtcbiAgICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgZm9yIChvZmZzZXQgKz0gc3RyaWRlOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgdmFyIHNxdWFyZWREZWx0YSA9IHNxdWFyZWREeCh4MSwgeTEsIHgyLCB5Mik7XG4gICAgICAgIGlmIChzcXVhcmVkRGVsdGEgPiBtYXgpIHtcbiAgICAgICAgICAgIG1heCA9IHNxdWFyZWREZWx0YTtcbiAgICAgICAgfVxuICAgICAgICB4MSA9IHgyO1xuICAgICAgICB5MSA9IHkyO1xuICAgIH1cbiAgICByZXR1cm4gbWF4O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBNYXggc3F1YXJlZCBkZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gTWF4IHNxdWFyZWQgZGVsdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcnJheU1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBtYXgpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIG1heCA9IG1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG1heCk7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIG1heDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggTWF4IHNxdWFyZWQgZGVsdGEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1heCBzcXVhcmVkIGRlbHRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlBcnJheU1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgbWF4KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBtYXggPSBhcnJheU1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBtYXgpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBtYXg7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4RGVsdGEgTWF4IGRlbHRhLlxuICogQHBhcmFtIHtib29sZWFufSBpc1JpbmcgSXMgcmluZy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X3RtcFBvaW50IFRlbXBvcmFyeSBwb2ludCBvYmplY3QuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbkNsb3Nlc3RQb2ludChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG1heERlbHRhLCBpc1JpbmcsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlLCBvcHRfdG1wUG9pbnQpIHtcbiAgICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgIH1cbiAgICB2YXIgaSwgc3F1YXJlZERpc3RhbmNlO1xuICAgIGlmIChtYXhEZWx0YSA9PT0gMCkge1xuICAgICAgICAvLyBBbGwgcG9pbnRzIGFyZSBpZGVudGljYWwsIHNvIGp1c3QgdGVzdCB0aGUgZmlyc3QgcG9pbnQuXG4gICAgICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdKTtcbiAgICAgICAgaWYgKHNxdWFyZWREaXN0YW5jZSA8IG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgICAgICAgIHJldHVybiBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciB0bXBQb2ludCA9IG9wdF90bXBQb2ludCA/IG9wdF90bXBQb2ludCA6IFtOYU4sIE5hTl07XG4gICAgdmFyIGluZGV4ID0gb2Zmc2V0ICsgc3RyaWRlO1xuICAgIHdoaWxlIChpbmRleCA8IGVuZCkge1xuICAgICAgICBhc3NpZ25DbG9zZXN0KGZsYXRDb29yZGluYXRlcywgaW5kZXggLSBzdHJpZGUsIGluZGV4LCBzdHJpZGUsIHgsIHksIHRtcFBvaW50KTtcbiAgICAgICAgc3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZER4KHgsIHksIHRtcFBvaW50WzBdLCB0bXBQb2ludFsxXSk7XG4gICAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgICAgIG1pblNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICAgICAgICAgIGNsb3Nlc3RQb2ludFtpXSA9IHRtcFBvaW50W2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgICAgICAgIGluZGV4ICs9IHN0cmlkZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNraXAgYWhlYWQgbXVsdGlwbGUgcG9pbnRzLCBiZWNhdXNlIHdlIGtub3cgdGhhdCBhbGwgdGhlIHNraXBwZWRcbiAgICAgICAgICAgIC8vIHBvaW50cyBjYW5ub3QgYmUgYW55IGNsb3NlciB0aGFuIHRoZSBjbG9zZXN0IHBvaW50IHdlIGhhdmUgZm91bmQgc29cbiAgICAgICAgICAgIC8vIGZhci4gIFdlIGtub3cgdGhpcyBiZWNhdXNlIHdlIGtub3cgaG93IGNsb3NlIHRoZSBjdXJyZW50IHBvaW50IGlzLCBob3dcbiAgICAgICAgICAgIC8vIGNsb3NlIHRoZSBjbG9zZXN0IHBvaW50IHdlIGhhdmUgZm91bmQgc28gZmFyIGlzLCBhbmQgdGhlIG1heGltdW1cbiAgICAgICAgICAgIC8vIGRpc3RhbmNlIGJldHdlZW4gY29uc2VjdXRpdmUgcG9pbnRzLiAgRm9yIGV4YW1wbGUsIGlmIHdlJ3JlIGN1cnJlbnRseVxuICAgICAgICAgICAgLy8gYXQgZGlzdGFuY2UgMTAsIHRoZSBiZXN0IHdlJ3ZlIGZvdW5kIHNvIGZhciBpcyAzLCBhbmQgdGhhdCB0aGUgbWF4aW11bVxuICAgICAgICAgICAgLy8gZGlzdGFuY2UgYmV0d2VlbiBjb25zZWN1dGl2ZSBwb2ludHMgaXMgMiwgdGhlbiB3ZSdsbCBuZWVkIHRvIHNraXAgYXRcbiAgICAgICAgICAgIC8vIGxlYXN0ICgxMCAtIDMpIC8gMiA9PSAzIChyb3VuZGVkIGRvd24pIHBvaW50cyB0byBoYXZlIGFueSBjaGFuY2Ugb2ZcbiAgICAgICAgICAgIC8vIGZpbmRpbmcgYSBjbG9zZXIgcG9pbnQuICBXZSB1c2UgTWF0aC5tYXgoLi4uLCAxKSB0byBlbnN1cmUgdGhhdCB3ZVxuICAgICAgICAgICAgLy8gYWx3YXlzIGFkdmFuY2UgYXQgbGVhc3Qgb25lIHBvaW50LCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wLlxuICAgICAgICAgICAgaW5kZXggKz1cbiAgICAgICAgICAgICAgICBzdHJpZGUgKlxuICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCgoKE1hdGguc3FydChzcXVhcmVkRGlzdGFuY2UpIC0gTWF0aC5zcXJ0KG1pblNxdWFyZWREaXN0YW5jZSkpIC9cbiAgICAgICAgICAgICAgICAgICAgICAgIG1heERlbHRhKSB8XG4gICAgICAgICAgICAgICAgICAgICAgICAwLCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNSaW5nKSB7XG4gICAgICAgIC8vIENoZWNrIHRoZSBjbG9zaW5nIHNlZ21lbnQuXG4gICAgICAgIGFzc2lnbkNsb3Nlc3QoZmxhdENvb3JkaW5hdGVzLCBlbmQgLSBzdHJpZGUsIG9mZnNldCwgc3RyaWRlLCB4LCB5LCB0bXBQb2ludCk7XG4gICAgICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCB0bXBQb2ludFswXSwgdG1wUG9pbnRbMV0pO1xuICAgICAgICBpZiAoc3F1YXJlZERpc3RhbmNlIDwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgICAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSB0bXBQb2ludFtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfdG1wUG9pbnQgVGVtcG9yYXJ5IHBvaW50IG9iamVjdC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsIG9wdF90bXBQb2ludCkge1xuICAgIHZhciB0bXBQb2ludCA9IG9wdF90bXBQb2ludCA/IG9wdF90bXBQb2ludCA6IFtOYU4sIE5hTl07XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBhc3NpZ25DbG9zZXN0UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBtYXhEZWx0YSwgaXNSaW5nLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSwgdG1wUG9pbnQpO1xuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4RGVsdGEgTWF4IGRlbHRhLlxuICogQHBhcmFtIHtib29sZWFufSBpc1JpbmcgSXMgcmluZy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X3RtcFBvaW50IFRlbXBvcmFyeSBwb2ludCBvYmplY3QuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbkNsb3Nlc3RNdWx0aUFycmF5UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIG1heERlbHRhLCBpc1JpbmcsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlLCBvcHRfdG1wUG9pbnQpIHtcbiAgICB2YXIgdG1wUG9pbnQgPSBvcHRfdG1wUG9pbnQgPyBvcHRfdG1wUG9pbnQgOiBbTmFOLCBOYU5dO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgbWluU3F1YXJlZERpc3RhbmNlID0gYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsIHRtcFBvaW50KTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xvc2VzdC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3NpbXBsaWZ5XG4gKi9cbi8vIEJhc2VkIG9uIHNpbXBsaWZ5LWpzIGh0dHBzOi8vZ2l0aHViLmNvbS9tb3VybmVyL3NpbXBsaWZ5LWpzXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTIsIFZsYWRpbWlyIEFnYWZvbmtpblxuLy8gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vXG4vLyBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbi8vIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuLy9cbi8vICAgIDEuIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbi8vICAgICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4vL1xuLy8gICAgMi4gUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHRcbi8vICAgICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGVcbi8vICAgICAgIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG4vL1xuLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCJcbi8vIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEVcbi8vIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFXG4vLyBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFXG4vLyBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SXG4vLyBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRlxuLy8gU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTXG4vLyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTlxuLy8gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSlcbi8vIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFXG4vLyBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbmltcG9ydCB7IHNxdWFyZWREaXN0YW5jZSwgc3F1YXJlZFNlZ21lbnREaXN0YW5jZSB9IGZyb20gJy4uLy4uL21hdGguanMnO1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGhpZ2hRdWFsaXR5IEhpZ2hlc3QgcXVhbGl0eS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9zaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gU2ltcGxpZmllZCBsaW5lIHN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNpbXBsaWZ5TGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIGhpZ2hRdWFsaXR5LCBvcHRfc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcykge1xuICAgIHZhciBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzID0gb3B0X3NpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdF9zaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzXG4gICAgICAgIDogW107XG4gICAgaWYgKCFoaWdoUXVhbGl0eSkge1xuICAgICAgICBlbmQgPSByYWRpYWxEaXN0YW5jZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIDApO1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzO1xuICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICBzdHJpZGUgPSAyO1xuICAgIH1cbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGRvdWdsYXNQZXVja2VyKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgMCk7XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXM7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvdWdsYXNQZXVja2VyKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCkge1xuICAgIHZhciBuID0gKGVuZCAtIG9mZnNldCkgLyBzdHJpZGU7XG4gICAgaWYgKG4gPCAzKSB7XG4gICAgICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID1cbiAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG4gICAgfVxuICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICB2YXIgbWFya2VycyA9IG5ldyBBcnJheShuKTtcbiAgICBtYXJrZXJzWzBdID0gMTtcbiAgICBtYXJrZXJzW24gLSAxXSA9IDE7XG4gICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgIHZhciBzdGFjayA9IFtvZmZzZXQsIGVuZCAtIHN0cmlkZV07XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgbGFzdCA9IHN0YWNrLnBvcCgpO1xuICAgICAgICB2YXIgZmlyc3QgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgdmFyIG1heFNxdWFyZWREaXN0YW5jZSA9IDA7XG4gICAgICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tmaXJzdF07XG4gICAgICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tmaXJzdCArIDFdO1xuICAgICAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbbGFzdF07XG4gICAgICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tsYXN0ICsgMV07XG4gICAgICAgIGZvciAodmFyIGkgPSBmaXJzdCArIHN0cmlkZTsgaSA8IGxhc3Q7IGkgKz0gc3RyaWRlKSB7XG4gICAgICAgICAgICB2YXIgeCA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICAgICAgICAgIHZhciB5ID0gZmxhdENvb3JkaW5hdGVzW2kgKyAxXTtcbiAgICAgICAgICAgIHZhciBzcXVhcmVkRGlzdGFuY2VfMSA9IHNxdWFyZWRTZWdtZW50RGlzdGFuY2UoeCwgeSwgeDEsIHkxLCB4MiwgeTIpO1xuICAgICAgICAgICAgaWYgKHNxdWFyZWREaXN0YW5jZV8xID4gbWF4U3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIG1heFNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREaXN0YW5jZV8xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtYXhTcXVhcmVkRGlzdGFuY2UgPiBzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICAgICAgICBtYXJrZXJzWyhpbmRleCAtIG9mZnNldCkgLyBzdHJpZGVdID0gMTtcbiAgICAgICAgICAgIGlmIChmaXJzdCArIHN0cmlkZSA8IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChmaXJzdCwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluZGV4ICsgc3RyaWRlIDwgbGFzdCkge1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goaW5kZXgsIGxhc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGlmIChtYXJrZXJzW2ldKSB7XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPVxuICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpICogc3RyaWRlXTtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9XG4gICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGkgKiBzdHJpZGUgKyAxXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRFbmRzIFNpbXBsaWZpZWQgZW5kcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3VnbGFzUGV1Y2tlckFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICBzaW1wbGlmaWVkT2Zmc2V0ID0gZG91Z2xhc1BldWNrZXIoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0KTtcbiAgICAgICAgc2ltcGxpZmllZEVuZHMucHVzaChzaW1wbGlmaWVkT2Zmc2V0KTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBzaW1wbGlmaWVkRW5kc3MgU2ltcGxpZmllZCBlbmRzcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3VnbGFzUGV1Y2tlck11bHRpQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzcykge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgdmFyIHNpbXBsaWZpZWRFbmRzID0gW107XG4gICAgICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBkb3VnbGFzUGV1Y2tlckFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKTtcbiAgICAgICAgc2ltcGxpZmllZEVuZHNzLnB1c2goc2ltcGxpZmllZEVuZHMpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByYWRpYWxEaXN0YW5jZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQpIHtcbiAgICBpZiAoZW5kIDw9IG9mZnNldCArIHN0cmlkZSkge1xuICAgICAgICAvLyB6ZXJvIG9yIG9uZSBwb2ludCwgbm8gc2ltcGxpZmljYXRpb24gcG9zc2libGUsIHNvIGNvcHkgYW5kIHJldHVyblxuICAgICAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9XG4gICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICAgIH1cbiAgICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgLy8gY29weSBmaXJzdCBwb2ludFxuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgxO1xuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkxO1xuICAgIHZhciB4MiA9IHgxO1xuICAgIHZhciB5MiA9IHkxO1xuICAgIGZvciAob2Zmc2V0ICs9IHN0cmlkZTsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgIHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgICAgICBpZiAoc3F1YXJlZERpc3RhbmNlKHgxLCB5MSwgeDIsIHkyKSA+IHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgICAgIC8vIGNvcHkgcG9pbnQgYXQgb2Zmc2V0XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkyO1xuICAgICAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgICAgIHkxID0geTI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHgyICE9IHgxIHx8IHkyICE9IHkxKSB7XG4gICAgICAgIC8vIGNvcHkgbGFzdCBwb2ludFxuICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAqIEByZXR1cm4ge251bWJlcn0gUm91bmRlZCB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNuYXAodmFsdWUsIHRvbGVyYW5jZSkge1xuICAgIHJldHVybiB0b2xlcmFuY2UgKiBNYXRoLnJvdW5kKHZhbHVlIC8gdG9sZXJhbmNlKTtcbn1cbi8qKlxuICogU2ltcGxpZmllcyBhIGxpbmUgc3RyaW5nIHVzaW5nIGFuIGFsZ29yaXRobSBkZXNpZ25lZCBieSBUaW0gU2NoYXViLlxuICogQ29vcmRpbmF0ZXMgYXJlIHNuYXBwZWQgdG8gdGhlIG5lYXJlc3QgdmFsdWUgaW4gYSB2aXJ0dWFsIGdyaWQgYW5kXG4gKiBjb25zZWN1dGl2ZSBkdXBsaWNhdGUgY29vcmRpbmF0ZXMgYXJlIGRpc2NhcmRlZC4gIFRoaXMgZWZmZWN0aXZlbHkgcHJlc2VydmVzXG4gKiB0b3BvbG9neSBhcyB0aGUgc2ltcGxpZmljYXRpb24gb2YgYW55IHN1YnNlY3Rpb24gb2YgYSBsaW5lIHN0cmluZyBpc1xuICogaW5kZXBlbmRlbnQgb2YgdGhlIHJlc3Qgb2YgdGhlIGxpbmUgc3RyaW5nLiAgVGhpcyBtZWFucyB0aGF0LCBmb3IgZXhhbXBsZXMsXG4gKiB0aGUgY29tbW9uIGVkZ2UgYmV0d2VlbiB0d28gcG9seWdvbnMgd2lsbCBiZSBzaW1wbGlmaWVkIHRvIHRoZSBzYW1lIGxpbmVcbiAqIHN0cmluZyBpbmRlcGVuZGVudGx5IGluIGJvdGggcG9seWdvbnMuICBUaGlzIGltcGxlbWVudGF0aW9uIHVzZXMgYSBzaW5nbGVcbiAqIHBhc3Mgb3ZlciB0aGUgY29vcmRpbmF0ZXMgYW5kIGVsaW1pbmF0ZXMgaW50ZXJtZWRpYXRlIGNvbGxpbmVhciBwb2ludHMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGl6ZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCkge1xuICAgIC8vIGRvIG5vdGhpbmcgaWYgdGhlIGxpbmUgaXMgZW1wdHlcbiAgICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgICAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbiAgICB9XG4gICAgLy8gc25hcCB0aGUgZmlyc3QgY29vcmRpbmF0ZSAoUDEpXG4gICAgdmFyIHgxID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgdG9sZXJhbmNlKTtcbiAgICB2YXIgeTEgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSwgdG9sZXJhbmNlKTtcbiAgICBvZmZzZXQgKz0gc3RyaWRlO1xuICAgIC8vIGFkZCB0aGUgZmlyc3QgY29vcmRpbmF0ZSB0byB0aGUgb3V0cHV0XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDE7XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTE7XG4gICAgLy8gZmluZCB0aGUgbmV4dCBjb29yZGluYXRlIHRoYXQgZG9lcyBub3Qgc25hcCB0byB0aGUgc2FtZSB2YWx1ZSBhcyB0aGUgZmlyc3RcbiAgICAvLyBjb29yZGluYXRlIChQMilcbiAgICB2YXIgeDIsIHkyO1xuICAgIGRvIHtcbiAgICAgICAgeDIgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCB0b2xlcmFuY2UpO1xuICAgICAgICB5MiA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdLCB0b2xlcmFuY2UpO1xuICAgICAgICBvZmZzZXQgKz0gc3RyaWRlO1xuICAgICAgICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgICAgICAgICAgLy8gYWxsIGNvb3JkaW5hdGVzIHNuYXAgdG8gdGhlIHNhbWUgdmFsdWUsIHRoZSBsaW5lIGNvbGxhcHNlcyB0byBhIHBvaW50XG4gICAgICAgICAgICAvLyBwdXNoIHRoZSBsYXN0IHNuYXBwZWQgdmFsdWUgYW55d2F5IHRvIGVuc3VyZSB0aGF0IHRoZSBvdXRwdXQgY29udGFpbnNcbiAgICAgICAgICAgIC8vIGF0IGxlYXN0IHR3byBwb2ludHNcbiAgICAgICAgICAgIC8vIEZJWE1FIHNob3VsZCB3ZSByZWFsbHkgcmV0dXJuIGF0IGxlYXN0IHR3byBwb2ludHMgYW55d2F5P1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDI7XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICAgICAgICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICAgICAgICB9XG4gICAgfSB3aGlsZSAoeDIgPT0geDEgJiYgeTIgPT0geTEpO1xuICAgIHdoaWxlIChvZmZzZXQgPCBlbmQpIHtcbiAgICAgICAgLy8gc25hcCB0aGUgbmV4dCBjb29yZGluYXRlIChQMylcbiAgICAgICAgdmFyIHgzID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgdG9sZXJhbmNlKTtcbiAgICAgICAgdmFyIHkzID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0sIHRvbGVyYW5jZSk7XG4gICAgICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgICAgIC8vIHNraXAgUDMgaWYgaXQgaXMgZXF1YWwgdG8gUDJcbiAgICAgICAgaWYgKHgzID09IHgyICYmIHkzID09IHkyKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIGRlbHRhIGJldHdlZW4gUDEgYW5kIFAyXG4gICAgICAgIHZhciBkeDEgPSB4MiAtIHgxO1xuICAgICAgICB2YXIgZHkxID0geTIgLSB5MTtcbiAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBkZWx0YSBiZXR3ZWVuIFAzIGFuZCBQMVxuICAgICAgICB2YXIgZHgyID0geDMgLSB4MTtcbiAgICAgICAgdmFyIGR5MiA9IHkzIC0geTE7XG4gICAgICAgIC8vIGlmIFAxLCBQMiwgYW5kIFAzIGFyZSBjb2xpbmVhciBhbmQgUDMgaXMgZnVydGhlciBmcm9tIFAxIHRoYW4gUDIgaXMgZnJvbVxuICAgICAgICAvLyBQMSBpbiB0aGUgc2FtZSBkaXJlY3Rpb24gdGhlbiBQMiBpcyBvbiB0aGUgc3RyYWlnaHQgbGluZSBiZXR3ZWVuIFAxIGFuZFxuICAgICAgICAvLyBQM1xuICAgICAgICBpZiAoZHgxICogZHkyID09IGR5MSAqIGR4MiAmJlxuICAgICAgICAgICAgKChkeDEgPCAwICYmIGR4MiA8IGR4MSkgfHwgZHgxID09IGR4MiB8fCAoZHgxID4gMCAmJiBkeDIgPiBkeDEpKSAmJlxuICAgICAgICAgICAgKChkeTEgPCAwICYmIGR5MiA8IGR5MSkgfHwgZHkxID09IGR5MiB8fCAoZHkxID4gMCAmJiBkeTIgPiBkeTEpKSkge1xuICAgICAgICAgICAgLy8gZGlzY2FyZCBQMiBhbmQgc2V0IFAyID0gUDNcbiAgICAgICAgICAgIHgyID0geDM7XG4gICAgICAgICAgICB5MiA9IHkzO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZWl0aGVyIFAxLCBQMiwgYW5kIFAzIGFyZSBub3QgY29saW5lYXIsIG9yIHRoZXkgYXJlIGNvbGluZWFyIGJ1dCBQMyBpc1xuICAgICAgICAvLyBiZXR3ZWVuIFAzIGFuZCBQMSBvciBvbiB0aGUgb3Bwb3NpdGUgaGFsZiBvZiB0aGUgbGluZSB0byBQMi4gIGFkZCBQMixcbiAgICAgICAgLy8gYW5kIGNvbnRpbnVlIHdpdGggUDEgPSBQMiBhbmQgUDIgPSBQM1xuICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgICAgIHgxID0geDI7XG4gICAgICAgIHkxID0geTI7XG4gICAgICAgIHgyID0geDM7XG4gICAgICAgIHkyID0geTM7XG4gICAgfVxuICAgIC8vIGFkZCB0aGUgbGFzdCBwb2ludCAoUDIpXG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDI7XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRW5kcyBTaW1wbGlmaWVkIGVuZHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpemVBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCB0b2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICBzaW1wbGlmaWVkT2Zmc2V0ID0gcXVhbnRpemUoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB0b2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQpO1xuICAgICAgICBzaW1wbGlmaWVkRW5kcy5wdXNoKHNpbXBsaWZpZWRPZmZzZXQpO1xuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IHNpbXBsaWZpZWRFbmRzcyBTaW1wbGlmaWVkIGVuZHNzLlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aXplTXVsdGlBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgdG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0LCBzaW1wbGlmaWVkRW5kc3MpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIHZhciBzaW1wbGlmaWVkRW5kcyA9IFtdO1xuICAgICAgICBzaW1wbGlmaWVkT2Zmc2V0ID0gcXVhbnRpemVBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCB0b2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKTtcbiAgICAgICAgc2ltcGxpZmllZEVuZHNzLnB1c2goc2ltcGxpZmllZEVuZHMpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2ltcGxpZnkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9pbmZsYXRlXG4gKi9cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj19IG9wdF9jb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IENvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZUNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgb3B0X2Nvb3JkaW5hdGVzKSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gb3B0X2Nvb3JkaW5hdGVzICE9PSB1bmRlZmluZWQgPyBvcHRfY29vcmRpbmF0ZXMgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IG9mZnNldDsgaiA8IGVuZDsgaiArPSBzdHJpZGUpIHtcbiAgICAgICAgY29vcmRpbmF0ZXNbaSsrXSA9IGZsYXRDb29yZGluYXRlcy5zbGljZShqLCBqICsgc3RyaWRlKTtcbiAgICB9XG4gICAgY29vcmRpbmF0ZXMubGVuZ3RoID0gaTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZXM7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+PX0gb3B0X2Nvb3JkaW5hdGVzcyBDb29yZGluYXRlc3MuXG4gKiBAcmV0dXJuIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gQ29vcmRpbmF0ZXNzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgb3B0X2Nvb3JkaW5hdGVzcykge1xuICAgIHZhciBjb29yZGluYXRlc3MgPSBvcHRfY29vcmRpbmF0ZXNzICE9PSB1bmRlZmluZWQgPyBvcHRfY29vcmRpbmF0ZXNzIDogW107XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGVuZHMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICB2YXIgZW5kID0gZW5kc1tqXTtcbiAgICAgICAgY29vcmRpbmF0ZXNzW2krK10gPSBpbmZsYXRlQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBjb29yZGluYXRlc3NbaV0pO1xuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIGNvb3JkaW5hdGVzcy5sZW5ndGggPSBpO1xuICAgIHJldHVybiBjb29yZGluYXRlc3M7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+Pj19IG9wdF9jb29yZGluYXRlc3NzXG4gKiAgICAgQ29vcmRpbmF0ZXNzcy5cbiAqIEByZXR1cm4ge0FycmF5PEFycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+Pn0gQ29vcmRpbmF0ZXNzcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluZmxhdGVNdWx0aUNvb3JkaW5hdGVzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIG9wdF9jb29yZGluYXRlc3NzKSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzc3MgPSBvcHRfY29vcmRpbmF0ZXNzcyAhPT0gdW5kZWZpbmVkID8gb3B0X2Nvb3JkaW5hdGVzc3MgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IDAsIGpqID0gZW5kc3MubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2pdO1xuICAgICAgICBjb29yZGluYXRlc3NzW2krK10gPSBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBjb29yZGluYXRlc3NzW2ldKTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICBjb29yZGluYXRlc3NzLmxlbmd0aCA9IGk7XG4gICAgcmV0dXJuIGNvb3JkaW5hdGVzc3M7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmZsYXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvYXJlYVxuICovXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIHZhciB0d2ljZUFyZWEgPSAwO1xuICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXTtcbiAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIHR3aWNlQXJlYSArPSB5MSAqIHgyIC0geDEgKiB5MjtcbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgeTEgPSB5MjtcbiAgICB9XG4gICAgcmV0dXJuIHR3aWNlQXJlYSAvIDI7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5ncyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlKSB7XG4gICAgdmFyIGFyZWEgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgYXJlYSArPSBsaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIGFyZWE7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUpIHtcbiAgICB2YXIgYXJlYSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBhcmVhICs9IGxpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBhcmVhO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJlYS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vTGluZWFyUmluZ1xuICovXG5pbXBvcnQgR2VvbWV0cnlMYXlvdXQgZnJvbSAnLi9HZW9tZXRyeUxheW91dC5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBTaW1wbGVHZW9tZXRyeSBmcm9tICcuL1NpbXBsZUdlb21ldHJ5LmpzJztcbmltcG9ydCB7IGFzc2lnbkNsb3Nlc3RQb2ludCwgbWF4U3F1YXJlZERlbHRhIH0gZnJvbSAnLi9mbGF0L2Nsb3Nlc3QuanMnO1xuaW1wb3J0IHsgY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGRlZmxhdGVDb29yZGluYXRlcyB9IGZyb20gJy4vZmxhdC9kZWZsYXRlLmpzJztcbmltcG9ydCB7IGRvdWdsYXNQZXVja2VyIH0gZnJvbSAnLi9mbGF0L3NpbXBsaWZ5LmpzJztcbmltcG9ydCB7IGluZmxhdGVDb29yZGluYXRlcyB9IGZyb20gJy4vZmxhdC9pbmZsYXRlLmpzJztcbmltcG9ydCB7IGxpbmVhclJpbmcgYXMgbGluZWFyUmluZ0FyZWEgfSBmcm9tICcuL2ZsYXQvYXJlYS5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIExpbmVhciByaW5nIGdlb21ldHJ5LiBPbmx5IHVzZWQgYXMgcGFydCBvZiBwb2x5Z29uOyBjYW5ub3QgYmUgcmVuZGVyZWRcbiAqIG9uIGl0cyBvd24uXG4gKlxuICogQGFwaVxuICovXG52YXIgTGluZWFyUmluZyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGluZWFyUmluZywgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT58QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAgICogICAgIEZvciBpbnRlcm5hbCB1c2UsIGZsYXQgY29vcmRpbmF0ZXMgaW4gY29tYmluYXRpb24gd2l0aCBgb3B0X2xheW91dGAgYXJlIGFsc28gYWNjZXB0ZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHQ9fSBvcHRfbGF5b3V0IExheW91dC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBMaW5lYXJSaW5nKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWF4RGVsdGFfID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSAtMTtcbiAgICAgICAgaWYgKG9wdF9sYXlvdXQgIT09IHVuZGVmaW5lZCAmJiAhQXJyYXkuaXNBcnJheShjb29yZGluYXRlc1swXSkpIHtcbiAgICAgICAgICAgIF90aGlzLnNldEZsYXRDb29yZGluYXRlcyhvcHRfbGF5b3V0LCBcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRDb29yZGluYXRlcyhcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gKi8gKGNvb3JkaW5hdGVzKSwgb3B0X2xheW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7IUxpbmVhclJpbmd9IENsb25lLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMaW5lYXJSaW5nKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCksIHRoaXMubGF5b3V0KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgaWYgKG1pblNxdWFyZWREaXN0YW5jZSA8IGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSh0aGlzLmdldEV4dGVudCgpLCB4LCB5KSkge1xuICAgICAgICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXhEZWx0YVJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMubWF4RGVsdGFfID0gTWF0aC5zcXJ0KG1heFNxdWFyZWREZWx0YSh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSwgMCkpO1xuICAgICAgICAgICAgdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXNzaWduQ2xvc2VzdFBvaW50KHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlLCB0aGlzLm1heERlbHRhXywgdHJ1ZSwgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBhcmVhIG9mIHRoZSBsaW5lYXIgcmluZyBvbiBwcm9qZWN0ZWQgcGxhbmUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBBcmVhIChvbiBwcm9qZWN0ZWQgcGxhbmUpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5nZXRBcmVhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbGluZWFyUmluZ0FyZWEodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgbGluZWFyIHJpbmcuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gQ29vcmRpbmF0ZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLmdldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gaW5mbGF0ZUNvb3JkaW5hdGVzKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAqIEByZXR1cm4ge0xpbmVhclJpbmd9IFNpbXBsaWZpZWQgTGluZWFyUmluZy5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwgPSBmdW5jdGlvbiAoc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgICAgICB2YXIgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGRvdWdsYXNQZXVja2VyKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCAwKTtcbiAgICAgICAgcmV0dXJuIG5ldyBMaW5lYXJSaW5nKHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdHlwZSBvZiB0aGlzIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vR2VvbWV0cnlUeXBlLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5IHR5cGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBHZW9tZXRyeVR5cGUuTElORUFSX1JJTkc7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUZXN0IGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIHBhc3NlZCBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuaW50ZXJzZWN0c0V4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgbGluZWFyIHJpbmcuXG4gICAgICogQHBhcmFtIHshQXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHQ9fSBvcHRfbGF5b3V0IExheW91dC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICAgICAgdGhpcy5zZXRMYXlvdXQob3B0X2xheW91dCwgY29vcmRpbmF0ZXMsIDEpO1xuICAgICAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGRlZmxhdGVDb29yZGluYXRlcyh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgY29vcmRpbmF0ZXMsIHRoaXMuc3RyaWRlKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICByZXR1cm4gTGluZWFyUmluZztcbn0oU2ltcGxlR2VvbWV0cnkpKTtcbmV4cG9ydCBkZWZhdWx0IExpbmVhclJpbmc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1MaW5lYXJSaW5nLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvY29udGFpbnNcbiAqL1xuaW1wb3J0IHsgZm9yRWFjaENvcm5lciB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyBleHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnQpIHtcbiAgICB2YXIgb3V0c2lkZSA9IGZvckVhY2hDb3JuZXIoZXh0ZW50LCBcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAoY29vcmRpbmF0ZSkge1xuICAgICAgICByZXR1cm4gIWxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSk7XG4gICAgfSk7XG4gICAgcmV0dXJuICFvdXRzaWRlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHgsIHkpIHtcbiAgICAvLyBodHRwOi8vZ2VvbWFsZ29yaXRobXMuY29tL2EwMy1faW5jbHVzaW9uLmh0bWxcbiAgICAvLyBDb3B5cmlnaHQgMjAwMCBzb2Z0U3VyZmVyLCAyMDEyIERhbiBTdW5kYXlcbiAgICAvLyBUaGlzIGNvZGUgbWF5IGJlIGZyZWVseSB1c2VkIGFuZCBtb2RpZmllZCBmb3IgYW55IHB1cnBvc2VcbiAgICAvLyBwcm92aWRpbmcgdGhhdCB0aGlzIGNvcHlyaWdodCBub3RpY2UgaXMgaW5jbHVkZWQgd2l0aCBpdC5cbiAgICAvLyBTb2Z0U3VyZmVyIG1ha2VzIG5vIHdhcnJhbnR5IGZvciB0aGlzIGNvZGUsIGFuZCBjYW5ub3QgYmUgaGVsZFxuICAgIC8vIGxpYWJsZSBmb3IgYW55IHJlYWwgb3IgaW1hZ2luZWQgZGFtYWdlIHJlc3VsdGluZyBmcm9tIGl0cyB1c2UuXG4gICAgLy8gVXNlcnMgb2YgdGhpcyBjb2RlIG11c3QgdmVyaWZ5IGNvcnJlY3RuZXNzIGZvciB0aGVpciBhcHBsaWNhdGlvbi5cbiAgICB2YXIgd24gPSAwO1xuICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXTtcbiAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIGlmICh5MSA8PSB5KSB7XG4gICAgICAgICAgICBpZiAoeTIgPiB5ICYmICh4MiAtIHgxKSAqICh5IC0geTEpIC0gKHggLSB4MSkgKiAoeTIgLSB5MSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgd24rKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh5MiA8PSB5ICYmICh4MiAtIHgxKSAqICh5IC0geTEpIC0gKHggLSB4MSkgKiAoeTIgLSB5MSkgPCAwKSB7XG4gICAgICAgICAgICB3bi0tO1xuICAgICAgICB9XG4gICAgICAgIHgxID0geDI7XG4gICAgICAgIHkxID0geTI7XG4gICAgfVxuICAgIHJldHVybiB3biAhPT0gMDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHgsIHkpIHtcbiAgICBpZiAoZW5kcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoIWxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzWzBdLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDEsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGlmIChsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIGVuZHNbaSAtIDFdLCBlbmRzW2ldLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzc0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIHgsIHkpIHtcbiAgICBpZiAoZW5kc3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBpZiAobGluZWFyUmluZ3NDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRhaW5zLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvaW50ZXJzZWN0c2V4dGVudFxuICovXG5pbXBvcnQgeyBjb250YWluc0V4dGVudCwgY3JlYXRlRW1wdHksIGV4dGVuZEZsYXRDb29yZGluYXRlcywgaW50ZXJzZWN0cywgaW50ZXJzZWN0c1NlZ21lbnQsIH0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGZvckVhY2ggYXMgZm9yRWFjaFNlZ21lbnQgfSBmcm9tICcuL3NlZ21lbnRzLmpzJztcbmltcG9ydCB7IGxpbmVhclJpbmdDb250YWluc0V4dGVudCwgbGluZWFyUmluZ0NvbnRhaW5zWFkgfSBmcm9tICcuL2NvbnRhaW5zLmpzJztcbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50KSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzRXh0ZW50ID0gZXh0ZW5kRmxhdENvb3JkaW5hdGVzKGNyZWF0ZUVtcHR5KCksIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgaWYgKCFpbnRlcnNlY3RzKGV4dGVudCwgY29vcmRpbmF0ZXNFeHRlbnQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGNvbnRhaW5zRXh0ZW50KGV4dGVudCwgY29vcmRpbmF0ZXNFeHRlbnQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoY29vcmRpbmF0ZXNFeHRlbnRbMF0gPj0gZXh0ZW50WzBdICYmIGNvb3JkaW5hdGVzRXh0ZW50WzJdIDw9IGV4dGVudFsyXSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVzRXh0ZW50WzFdID49IGV4dGVudFsxXSAmJiBjb29yZGluYXRlc0V4dGVudFszXSA8PSBleHRlbnRbM10pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmb3JFYWNoU2VnbWVudChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludDEgU3RhcnQgcG9pbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50MiBFbmQgcG9pbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBzZWdtZW50IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdCxcbiAgICAgKiAgICAgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHBvaW50MSwgcG9pbnQyKSB7XG4gICAgICAgIHJldHVybiBpbnRlcnNlY3RzU2VnbWVudChleHRlbnQsIHBvaW50MSwgcG9pbnQyKTtcbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lU3RyaW5nQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgZXh0ZW50KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGlmIChpbnRlcnNlY3RzTGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1tpXSwgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBvZmZzZXQgPSBlbmRzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudCkge1xuICAgIGlmIChpbnRlcnNlY3RzTGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudFswXSwgZXh0ZW50WzFdKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzBdLCBleHRlbnRbM10pKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAobGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnRbMl0sIGV4dGVudFsxXSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudFsyXSwgZXh0ZW50WzNdKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBleHRlbnQpIHtcbiAgICBpZiAoIWludGVyc2VjdHNMaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzWzBdLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZW5kcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAxLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBpZiAobGluZWFyUmluZ0NvbnRhaW5zRXh0ZW50KGZsYXRDb29yZGluYXRlcywgZW5kc1tpIC0gMV0sIGVuZHNbaV0sIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgICAgICAgaWYgKCFpbnRlcnNlY3RzTGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIGVuZHNbaSAtIDFdLCBlbmRzW2ldLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZWFyUmluZ011bHRpQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIGV4dGVudCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgaWYgKGludGVyc2VjdHNMaW5lYXJSaW5nQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcnNlY3RzZXh0ZW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvc2VnbWVudHNcbiAqL1xuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGNhbGxzIGBjYWxsYmFja2AgZm9yIGVhY2ggc2VnbWVudCBvZiB0aGUgZmxhdCBjb29yZGluYXRlc1xuICogYXJyYXkuIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIGEgdHJ1dGh5IHZhbHVlIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRoYXRcbiAqIHZhbHVlIGltbWVkaWF0ZWx5LiBPdGhlcndpc2UgdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSwgaW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogVH0gY2FsbGJhY2sgRnVuY3Rpb25cbiAqICAgICBjYWxsZWQgZm9yIGVhY2ggc2VnbWVudC5cbiAqIEByZXR1cm4ge1R8Ym9vbGVhbn0gVmFsdWUuXG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9yRWFjaChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHBvaW50MSA9IFtmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdXTtcbiAgICB2YXIgcG9pbnQyID0gW107XG4gICAgdmFyIHJldDtcbiAgICBmb3IgKDsgb2Zmc2V0ICsgc3RyaWRlIDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgIHBvaW50MlswXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBzdHJpZGVdO1xuICAgICAgICBwb2ludDJbMV0gPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgc3RyaWRlICsgMV07XG4gICAgICAgIHJldCA9IGNhbGxiYWNrKHBvaW50MSwgcG9pbnQyKTtcbiAgICAgICAgaWYgKHJldCkge1xuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfVxuICAgICAgICBwb2ludDFbMF0gPSBwb2ludDJbMF07XG4gICAgICAgIHBvaW50MVsxXSA9IHBvaW50MlsxXTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VnbWVudHMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9yZXZlcnNlXG4gKi9cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIHdoaWxlIChvZmZzZXQgPCBlbmQgLSBzdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICAgICAgdmFyIHRtcCA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpXTtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpXSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyBpXTtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyBpXSA9IHRtcDtcbiAgICAgICAgfVxuICAgICAgICBvZmZzZXQgKz0gc3RyaWRlO1xuICAgICAgICBlbmQgLT0gc3RyaWRlO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJldmVyc2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9vcmllbnRcbiAqL1xuaW1wb3J0IHsgY29vcmRpbmF0ZXMgYXMgcmV2ZXJzZUNvb3JkaW5hdGVzIH0gZnJvbSAnLi9yZXZlcnNlLmpzJztcbi8qKlxuICogSXMgdGhlIGxpbmVhciByaW5nIG9yaWVudGVkIGNsb2Nrd2lzZSBpbiBhIGNvb3JkaW5hdGUgc3lzdGVtIHdpdGggYSBib3R0b20tbGVmdFxuICogY29vcmRpbmF0ZSBvcmlnaW4/IEZvciBhIGNvb3JkaW5hdGUgc3lzdGVtIHdpdGggYSB0b3AtbGVmdCBjb29yZGluYXRlIG9yaWdpbixcbiAqIHRoZSByaW5nJ3Mgb3JpZW50YXRpb24gaXMgY2xvY2t3aXNlIHdoZW4gdGhpcyBmdW5jdGlvbiByZXR1cm5zIGZhbHNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGNsb2Nrd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdJc0Nsb2Nrd2lzZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgICAvLyBodHRwOi8vdGlueXVybC5jb20vY2xvY2t3aXNlLW1ldGhvZFxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9PU0dlby9nZGFsL2Jsb2IvdHJ1bmsvZ2RhbC9vZ3Ivb2dybGluZWFycmluZy5jcHBcbiAgICB2YXIgZWRnZSA9IDA7XG4gICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV07XG4gICAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIDFdO1xuICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgZWRnZSArPSAoeDIgLSB4MSkgKiAoeTIgKyB5MSk7XG4gICAgICAgIHgxID0geDI7XG4gICAgICAgIHkxID0geTI7XG4gICAgfVxuICAgIHJldHVybiBlZGdlID09PSAwID8gdW5kZWZpbmVkIDogZWRnZSA+IDA7XG59XG4vKipcbiAqIERldGVybWluZXMgaWYgbGluZWFyIHJpbmdzIGFyZSBvcmllbnRlZC4gIEJ5IGRlZmF1bHQsIGxlZnQtaGFuZCBvcmllbnRhdGlvblxuICogaXMgdGVzdGVkIChmaXJzdCByaW5nIG11c3QgYmUgY2xvY2t3aXNlLCByZW1haW5pbmcgcmluZ3MgY291bnRlci1jbG9ja3dpc2UpLlxuICogVG8gdGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvbiwgdXNlIHRoZSBgb3B0X3JpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgQXJyYXkgb2YgZW5kIGluZGV4ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9yaWdodCBUZXN0IGZvciByaWdodC1oYW5kIG9yaWVudGF0aW9uXG4gKiAgICAgKGNvdW50ZXItY2xvY2t3aXNlIGV4dGVyaW9yIHJpbmcgYW5kIGNsb2Nrd2lzZSBpbnRlcmlvciByaW5ncykuXG4gKiBAcmV0dXJuIHtib29sZWFufSBSaW5ncyBhcmUgY29ycmVjdGx5IG9yaWVudGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NBcmVPcmllbnRlZChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBvcHRfcmlnaHQpIHtcbiAgICB2YXIgcmlnaHQgPSBvcHRfcmlnaHQgIT09IHVuZGVmaW5lZCA/IG9wdF9yaWdodCA6IGZhbHNlO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgdmFyIGlzQ2xvY2t3aXNlID0gbGluZWFyUmluZ0lzQ2xvY2t3aXNlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICBpZiAoKHJpZ2h0ICYmIGlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmICFpc0Nsb2Nrd2lzZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoKHJpZ2h0ICYmICFpc0Nsb2Nrd2lzZSkgfHwgKCFyaWdodCAmJiBpc0Nsb2Nrd2lzZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiBsaW5lYXIgcmluZ3MgYXJlIG9yaWVudGVkLiAgQnkgZGVmYXVsdCwgbGVmdC1oYW5kIG9yaWVudGF0aW9uXG4gKiBpcyB0ZXN0ZWQgKGZpcnN0IHJpbmcgbXVzdCBiZSBjbG9ja3dpc2UsIHJlbWFpbmluZyByaW5ncyBjb3VudGVyLWNsb2Nrd2lzZSkuXG4gKiBUbyB0ZXN0IGZvciByaWdodC1oYW5kIG9yaWVudGF0aW9uLCB1c2UgdGhlIGBvcHRfcmlnaHRgIGFyZ3VtZW50LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEFycmF5IG9mIGFycmF5IG9mIGVuZCBpbmRleGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfcmlnaHQgVGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvblxuICogICAgIChjb3VudGVyLWNsb2Nrd2lzZSBleHRlcmlvciByaW5nIGFuZCBjbG9ja3dpc2UgaW50ZXJpb3IgcmluZ3MpLlxuICogQHJldHVybiB7Ym9vbGVhbn0gUmluZ3MgYXJlIGNvcnJlY3RseSBvcmllbnRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzc0FyZU9yaWVudGVkKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBvcHRfcmlnaHQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIGlmICghbGluZWFyUmluZ3NBcmVPcmllbnRlZChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBvcHRfcmlnaHQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVuZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIE9yaWVudCBjb29yZGluYXRlcyBpbiBhIGZsYXQgYXJyYXkgb2YgbGluZWFyIHJpbmdzLiAgQnkgZGVmYXVsdCwgcmluZ3NcbiAqIGFyZSBvcmllbnRlZCBmb2xsb3dpbmcgdGhlIGxlZnQtaGFuZCBydWxlIChjbG9ja3dpc2UgZm9yIGV4dGVyaW9yIGFuZFxuICogY291bnRlci1jbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS4gIFRvIG9yaWVudCBhY2NvcmRpbmcgdG8gdGhlXG4gKiByaWdodC1oYW5kIHJ1bGUsIHVzZSB0aGUgYG9wdF9yaWdodGAgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9yaWdodCBGb2xsb3cgdGhlIHJpZ2h0LWhhbmQgcnVsZSBmb3Igb3JpZW50YXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEVuZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9yaWVudExpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG9wdF9yaWdodCkge1xuICAgIHZhciByaWdodCA9IG9wdF9yaWdodCAhPT0gdW5kZWZpbmVkID8gb3B0X3JpZ2h0IDogZmFsc2U7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICB2YXIgaXNDbG9ja3dpc2UgPSBsaW5lYXJSaW5nSXNDbG9ja3dpc2UoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICAgICAgdmFyIHJldmVyc2UgPSBpID09PSAwXG4gICAgICAgICAgICA/IChyaWdodCAmJiBpc0Nsb2Nrd2lzZSkgfHwgKCFyaWdodCAmJiAhaXNDbG9ja3dpc2UpXG4gICAgICAgICAgICA6IChyaWdodCAmJiAhaXNDbG9ja3dpc2UpIHx8ICghcmlnaHQgJiYgaXNDbG9ja3dpc2UpO1xuICAgICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICAgICAgcmV2ZXJzZUNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0O1xufVxuLyoqXG4gKiBPcmllbnQgY29vcmRpbmF0ZXMgaW4gYSBmbGF0IGFycmF5IG9mIGxpbmVhciByaW5ncy4gIEJ5IGRlZmF1bHQsIHJpbmdzXG4gKiBhcmUgb3JpZW50ZWQgZm9sbG93aW5nIHRoZSBsZWZ0LWhhbmQgcnVsZSAoY2xvY2t3aXNlIGZvciBleHRlcmlvciBhbmRcbiAqIGNvdW50ZXItY2xvY2t3aXNlIGZvciBpbnRlcmlvciByaW5ncykuICBUbyBvcmllbnQgYWNjb3JkaW5nIHRvIHRoZVxuICogcmlnaHQtaGFuZCBydWxlLCB1c2UgdGhlIGBvcHRfcmlnaHRgIGFyZ3VtZW50LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEFycmF5IG9mIGFycmF5IG9mIGVuZCBpbmRleGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfcmlnaHQgRm9sbG93IHRoZSByaWdodC1oYW5kIHJ1bGUgZm9yIG9yaWVudGF0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBFbmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcmllbnRMaW5lYXJSaW5nc0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBvcHRfcmlnaHQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIG9mZnNldCA9IG9yaWVudExpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzc1tpXSwgc3RyaWRlLCBvcHRfcmlnaHQpO1xuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3JpZW50LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9Qb2x5Z29uXG4gKi9cbmltcG9ydCBHZW9tZXRyeUxheW91dCBmcm9tICcuL0dlb21ldHJ5TGF5b3V0LmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IExpbmVhclJpbmcgZnJvbSAnLi9MaW5lYXJSaW5nLmpzJztcbmltcG9ydCBQb2ludCBmcm9tICcuL1BvaW50LmpzJztcbmltcG9ydCBTaW1wbGVHZW9tZXRyeSBmcm9tICcuL1NpbXBsZUdlb21ldHJ5LmpzJztcbmltcG9ydCB7IGFycmF5TWF4U3F1YXJlZERlbHRhLCBhc3NpZ25DbG9zZXN0QXJyYXlQb2ludCB9IGZyb20gJy4vZmxhdC9jbG9zZXN0LmpzJztcbmltcG9ydCB7IGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSwgZ2V0Q2VudGVyIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGRlZmxhdGVDb29yZGluYXRlc0FycmF5IH0gZnJvbSAnLi9mbGF0L2RlZmxhdGUuanMnO1xuaW1wb3J0IHsgZXh0ZW5kIH0gZnJvbSAnLi4vYXJyYXkuanMnO1xuaW1wb3J0IHsgZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkgfSBmcm9tICcuL2ZsYXQvaW50ZXJpb3Jwb2ludC5qcyc7XG5pbXBvcnQgeyBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheSB9IGZyb20gJy4vZmxhdC9pbmZsYXRlLmpzJztcbmltcG9ydCB7IGludGVyc2VjdHNMaW5lYXJSaW5nQXJyYXkgfSBmcm9tICcuL2ZsYXQvaW50ZXJzZWN0c2V4dGVudC5qcyc7XG5pbXBvcnQgeyBsaW5lYXJSaW5nc0FyZU9yaWVudGVkLCBvcmllbnRMaW5lYXJSaW5ncyB9IGZyb20gJy4vZmxhdC9vcmllbnQuanMnO1xuaW1wb3J0IHsgbGluZWFyUmluZ3MgYXMgbGluZWFyUmluZ3NBcmVhIH0gZnJvbSAnLi9mbGF0L2FyZWEuanMnO1xuaW1wb3J0IHsgbGluZWFyUmluZ3NDb250YWluc1hZIH0gZnJvbSAnLi9mbGF0L2NvbnRhaW5zLmpzJztcbmltcG9ydCB7IG1vZHVsbyB9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IHsgcXVhbnRpemVBcnJheSB9IGZyb20gJy4vZmxhdC9zaW1wbGlmeS5qcyc7XG5pbXBvcnQgeyBvZmZzZXQgYXMgc3BoZXJlT2Zmc2V0IH0gZnJvbSAnLi4vc3BoZXJlLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogUG9seWdvbiBnZW9tZXRyeS5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBQb2x5Z29uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQb2x5Z29uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IUFycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fCFBcnJheTxudW1iZXI+fSBjb29yZGluYXRlc1xuICAgICAqICAgICBBcnJheSBvZiBsaW5lYXIgcmluZ3MgdGhhdCBkZWZpbmUgdGhlIHBvbHlnb24uIFRoZSBmaXJzdCBsaW5lYXIgcmluZyBvZiB0aGVcbiAgICAgKiAgICAgYXJyYXkgZGVmaW5lcyB0aGUgb3V0ZXItYm91bmRhcnkgb3Igc3VyZmFjZSBvZiB0aGUgcG9seWdvbi4gRWFjaCBzdWJzZXF1ZW50XG4gICAgICogICAgIGxpbmVhciByaW5nIGRlZmluZXMgYSBob2xlIGluIHRoZSBzdXJmYWNlIG9mIHRoZSBwb2x5Z29uLiBBIGxpbmVhciByaW5nIGlzXG4gICAgICogICAgIGFuIGFycmF5IG9mIHZlcnRpY2VzJyBjb29yZGluYXRlcyB3aGVyZSB0aGUgZmlyc3QgY29vcmRpbmF0ZSBhbmQgdGhlIGxhc3QgYXJlXG4gICAgICogICAgIGVxdWl2YWxlbnQuIChGb3IgaW50ZXJuYWwgdXNlLCBmbGF0IGNvb3JkaW5hdGVzIGluIGNvbWJpbmF0aW9uIHdpdGhcbiAgICAgKiAgICAgYG9wdF9sYXlvdXRgIGFuZCBgb3B0X2VuZHNgIGFyZSBhbHNvIGFjY2VwdGVkLilcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdD19IG9wdF9sYXlvdXQgTGF5b3V0LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9lbmRzIEVuZHMgKGZvciBpbnRlcm5hbCB1c2Ugd2l0aCBmbGF0IGNvb3JkaW5hdGVzKS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQb2x5Z29uKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0LCBvcHRfZW5kcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5lbmRzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZmxhdEludGVyaW9yUG9pbnRfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhEZWx0YV8gPSAtMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9yaWVudGVkUmV2aXNpb25fID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyA9IG51bGw7XG4gICAgICAgIGlmIChvcHRfbGF5b3V0ICE9PSB1bmRlZmluZWQgJiYgb3B0X2VuZHMpIHtcbiAgICAgICAgICAgIF90aGlzLnNldEZsYXRDb29yZGluYXRlcyhvcHRfbGF5b3V0LCBcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKSk7XG4gICAgICAgICAgICBfdGhpcy5lbmRzXyA9IG9wdF9lbmRzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMuc2V0Q29vcmRpbmF0ZXMoXG4gICAgICAgICAgICAvKiogQHR5cGUge0FycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSAqLyAoY29vcmRpbmF0ZXMpLCBvcHRfbGF5b3V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGVuZCB0aGUgcGFzc2VkIGxpbmVhciByaW5nIHRvIHRoaXMgcG9seWdvbi5cbiAgICAgKiBAcGFyYW0ge0xpbmVhclJpbmd9IGxpbmVhclJpbmcgTGluZWFyIHJpbmcuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmFwcGVuZExpbmVhclJpbmcgPSBmdW5jdGlvbiAobGluZWFyUmluZykge1xuICAgICAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IGxpbmVhclJpbmcuZ2V0RmxhdENvb3JkaW5hdGVzKCkuc2xpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGV4dGVuZCh0aGlzLmZsYXRDb29yZGluYXRlcywgbGluZWFyUmluZy5nZXRGbGF0Q29vcmRpbmF0ZXMoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmRzXy5wdXNoKHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFrZSBhIGNvbXBsZXRlIGNvcHkgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4geyFQb2x5Z29ufSBDbG9uZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwb2x5Z29uID0gbmV3IFBvbHlnb24odGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKSwgdGhpcy5sYXlvdXQsIHRoaXMuZW5kc18uc2xpY2UoKSk7XG4gICAgICAgIHBvbHlnb24uYXBwbHlQcm9wZXJ0aWVzKHRoaXMpO1xuICAgICAgICByZXR1cm4gcG9seWdvbjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgaWYgKG1pblNxdWFyZWREaXN0YW5jZSA8IGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSh0aGlzLmdldEV4dGVudCgpLCB4LCB5KSkge1xuICAgICAgICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXhEZWx0YVJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMubWF4RGVsdGFfID0gTWF0aC5zcXJ0KGFycmF5TWF4U3F1YXJlZERlbHRhKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgMCkpO1xuICAgICAgICAgICAgdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCB0aGlzLm1heERlbHRhXywgdHJ1ZSwgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5jb250YWluc1hZID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIGxpbmVhclJpbmdzQ29udGFpbnNYWSh0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCksIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCB4LCB5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgYXJlYSBvZiB0aGUgcG9seWdvbiBvbiBwcm9qZWN0ZWQgcGxhbmUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBBcmVhIChvbiBwcm9qZWN0ZWQgcGxhbmUpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRBcmVhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbGluZWFyUmluZ3NBcmVhKHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSwgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb29yZGluYXRlIGFycmF5IGZvciB0aGlzIGdlb21ldHJ5LiAgVGhpcyBhcnJheSBoYXMgdGhlIHN0cnVjdHVyZVxuICAgICAqIG9mIGEgR2VvSlNPTiBjb29yZGluYXRlIGFycmF5IGZvciBwb2x5Z29ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9yaWdodCBPcmllbnQgY29vcmRpbmF0ZXMgYWNjb3JkaW5nIHRvIHRoZSByaWdodC1oYW5kXG4gICAgICogICAgIHJ1bGUgKGNvdW50ZXItY2xvY2t3aXNlIGZvciBleHRlcmlvciBhbmQgY2xvY2t3aXNlIGZvciBpbnRlcmlvciByaW5ncykuXG4gICAgICogICAgIElmIGBmYWxzZWAsIGNvb3JkaW5hdGVzIHdpbGwgYmUgb3JpZW50ZWQgYWNjb3JkaW5nIHRvIHRoZSBsZWZ0LWhhbmQgcnVsZVxuICAgICAqICAgICAoY2xvY2t3aXNlIGZvciBleHRlcmlvciBhbmQgY291bnRlci1jbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS5cbiAgICAgKiAgICAgQnkgZGVmYXVsdCwgY29vcmRpbmF0ZSBvcmllbnRhdGlvbiB3aWxsIGRlcGVuZCBvbiBob3cgdGhlIGdlb21ldHJ5IHdhc1xuICAgICAqICAgICBjb25zdHJ1Y3RlZC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gQ29vcmRpbmF0ZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKG9wdF9yaWdodCkge1xuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzO1xuICAgICAgICBpZiAob3B0X3JpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKS5zbGljZSgpO1xuICAgICAgICAgICAgb3JpZW50TGluZWFyUmluZ3MoZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgb3B0X3JpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEVuZHMuXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0RW5kcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5kc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBJbnRlcmlvciBwb2ludC5cbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRGbGF0SW50ZXJpb3JQb2ludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZmxhdEludGVyaW9yUG9pbnRSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICAgICAgICB2YXIgZmxhdENlbnRlciA9IGdldENlbnRlcih0aGlzLmdldEV4dGVudCgpKTtcbiAgICAgICAgICAgIHRoaXMuZmxhdEludGVyaW9yUG9pbnRfID0gZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkodGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgZmxhdENlbnRlciwgMCk7XG4gICAgICAgICAgICB0aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmZsYXRJbnRlcmlvclBvaW50XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiBhbiBpbnRlcmlvciBwb2ludCBvZiB0aGUgcG9seWdvbi5cbiAgICAgKiBAcmV0dXJuIHtQb2ludH0gSW50ZXJpb3IgcG9pbnQgYXMgWFlNIGNvb3JkaW5hdGUsIHdoZXJlIE0gaXMgdGhlXG4gICAgICogbGVuZ3RoIG9mIHRoZSBob3Jpem9udGFsIGludGVyc2VjdGlvbiB0aGF0IHRoZSBwb2ludCBiZWxvbmdzIHRvLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRJbnRlcmlvclBvaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFBvaW50KHRoaXMuZ2V0RmxhdEludGVyaW9yUG9pbnQoKSwgR2VvbWV0cnlMYXlvdXQuWFlNKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbnVtYmVyIG9mIHJpbmdzIG9mIHRoZSBwb2x5Z29uLCAgdGhpcyBpbmNsdWRlcyB0aGUgZXh0ZXJpb3JcbiAgICAgKiByaW5nIGFuZCBhbnkgaW50ZXJpb3IgcmluZ3MuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE51bWJlciBvZiByaW5ncy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0TGluZWFyUmluZ0NvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmRzXy5sZW5ndGg7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIE50aCBsaW5lYXIgcmluZyBvZiB0aGUgcG9seWdvbiBnZW9tZXRyeS4gUmV0dXJuIGBudWxsYCBpZiB0aGVcbiAgICAgKiBnaXZlbiBpbmRleCBpcyBvdXQgb2YgcmFuZ2UuXG4gICAgICogVGhlIGV4dGVyaW9yIGxpbmVhciByaW5nIGlzIGF2YWlsYWJsZSBhdCBpbmRleCBgMGAgYW5kIHRoZSBpbnRlcmlvciByaW5nc1xuICAgICAqIGF0IGluZGV4IGAxYCBhbmQgYmV5b25kLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgICAqIEByZXR1cm4ge0xpbmVhclJpbmd9IExpbmVhciByaW5nLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRMaW5lYXJSaW5nID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIGlmIChpbmRleCA8IDAgfHwgdGhpcy5lbmRzXy5sZW5ndGggPD0gaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgTGluZWFyUmluZyh0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZShpbmRleCA9PT0gMCA/IDAgOiB0aGlzLmVuZHNfW2luZGV4IC0gMV0sIHRoaXMuZW5kc19baW5kZXhdKSwgdGhpcy5sYXlvdXQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBsaW5lYXIgcmluZ3Mgb2YgdGhlIHBvbHlnb24uXG4gICAgICogQHJldHVybiB7QXJyYXk8TGluZWFyUmluZz59IExpbmVhciByaW5ncy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0TGluZWFyUmluZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsYXlvdXQgPSB0aGlzLmxheW91dDtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgICAgICB2YXIgZW5kcyA9IHRoaXMuZW5kc187XG4gICAgICAgIHZhciBsaW5lYXJSaW5ncyA9IFtdO1xuICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgICAgIHZhciBsaW5lYXJSaW5nID0gbmV3IExpbmVhclJpbmcoZmxhdENvb3JkaW5hdGVzLnNsaWNlKG9mZnNldCwgZW5kKSwgbGF5b3V0KTtcbiAgICAgICAgICAgIGxpbmVhclJpbmdzLnB1c2gobGluZWFyUmluZyk7XG4gICAgICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmVhclJpbmdzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3JpZW50ZWQgZmxhdCBjb29yZGluYXRlcy5cbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMub3JpZW50ZWRSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgICAgICAgICBpZiAobGluZWFyUmluZ3NBcmVPcmllbnRlZChmbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfID0gZmxhdENvb3JkaW5hdGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18gPSBmbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXy5sZW5ndGggPSBvcmllbnRMaW5lYXJSaW5ncyh0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vcmllbnRlZFJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgKiBAcmV0dXJuIHtQb2x5Z29ufSBTaW1wbGlmaWVkIFBvbHlnb24uXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsID0gZnVuY3Rpb24gKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgdmFyIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgICAgdmFyIHNpbXBsaWZpZWRFbmRzID0gW107XG4gICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gcXVhbnRpemVBcnJheSh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIE1hdGguc3FydChzcXVhcmVkVG9sZXJhbmNlKSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgMCwgc2ltcGxpZmllZEVuZHMpO1xuICAgICAgICByZXR1cm4gbmV3IFBvbHlnb24oc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgR2VvbWV0cnlMYXlvdXQuWFksIHNpbXBsaWZpZWRFbmRzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdHlwZSBvZiB0aGlzIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vR2VvbWV0cnlUeXBlLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5IHR5cGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBHZW9tZXRyeVR5cGUuUE9MWUdPTjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRlc3QgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgcGFzc2VkIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5pbnRlcnNlY3RzRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICByZXR1cm4gaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheSh0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCksIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCBleHRlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgcG9seWdvbi5cbiAgICAgKiBAcGFyYW0geyFBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHQ9fSBvcHRfbGF5b3V0IExheW91dC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICAgICAgdGhpcy5zZXRMYXlvdXQob3B0X2xheW91dCwgY29vcmRpbmF0ZXMsIDIpO1xuICAgICAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbmRzID0gZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIGNvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSwgdGhpcy5lbmRzXyk7XG4gICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGVuZHMubGVuZ3RoID09PSAwID8gMCA6IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICByZXR1cm4gUG9seWdvbjtcbn0oU2ltcGxlR2VvbWV0cnkpKTtcbmV4cG9ydCBkZWZhdWx0IFBvbHlnb247XG4vKipcbiAqIENyZWF0ZSBhbiBhcHByb3hpbWF0aW9uIG9mIGEgY2lyY2xlIG9uIHRoZSBzdXJmYWNlIG9mIGEgc3BoZXJlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIgKGBbbG9uLCBsYXRdYCBpbiBkZWdyZWVzKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgVGhlIGdyZWF0LWNpcmNsZSBkaXN0YW5jZSBmcm9tIHRoZSBjZW50ZXIgdG9cbiAqICAgICB0aGUgcG9seWdvbiB2ZXJ0aWNlcy5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X24gT3B0aW9uYWwgbnVtYmVyIG9mIHZlcnRpY2VzIGZvciB0aGUgcmVzdWx0aW5nXG4gKiAgICAgcG9seWdvbi4gRGVmYXVsdCBpcyBgMzJgLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfc3BoZXJlUmFkaXVzIE9wdGlvbmFsIHJhZGl1cyBmb3IgdGhlIHNwaGVyZSAoZGVmYXVsdHMgdG9cbiAqICAgICB0aGUgRWFydGgncyBtZWFuIHJhZGl1cyB1c2luZyB0aGUgV0dTODQgZWxsaXBzb2lkKS5cbiAqIEByZXR1cm4ge1BvbHlnb259IFRoZSBcImNpcmN1bGFyXCIgcG9seWdvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNpcmN1bGFyKGNlbnRlciwgcmFkaXVzLCBvcHRfbiwgb3B0X3NwaGVyZVJhZGl1cykge1xuICAgIHZhciBuID0gb3B0X24gPyBvcHRfbiA6IDMyO1xuICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgZXh0ZW5kKGZsYXRDb29yZGluYXRlcywgc3BoZXJlT2Zmc2V0KGNlbnRlciwgcmFkaXVzLCAoMiAqIE1hdGguUEkgKiBpKSAvIG4sIG9wdF9zcGhlcmVSYWRpdXMpKTtcbiAgICB9XG4gICAgZmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzBdLCBmbGF0Q29vcmRpbmF0ZXNbMV0pO1xuICAgIHJldHVybiBuZXcgUG9seWdvbihmbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZLCBbXG4gICAgICAgIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsXG4gICAgXSk7XG59XG4vKipcbiAqIENyZWF0ZSBhIHBvbHlnb24gZnJvbSBhbiBleHRlbnQuIFRoZSBsYXlvdXQgdXNlZCBpcyBgWFlgLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudC5cbiAqIEByZXR1cm4ge1BvbHlnb259IFRoZSBwb2x5Z29uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUV4dGVudChleHRlbnQpIHtcbiAgICB2YXIgbWluWCA9IGV4dGVudFswXTtcbiAgICB2YXIgbWluWSA9IGV4dGVudFsxXTtcbiAgICB2YXIgbWF4WCA9IGV4dGVudFsyXTtcbiAgICB2YXIgbWF4WSA9IGV4dGVudFszXTtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gW1xuICAgICAgICBtaW5YLFxuICAgICAgICBtaW5ZLFxuICAgICAgICBtaW5YLFxuICAgICAgICBtYXhZLFxuICAgICAgICBtYXhYLFxuICAgICAgICBtYXhZLFxuICAgICAgICBtYXhYLFxuICAgICAgICBtaW5ZLFxuICAgICAgICBtaW5YLFxuICAgICAgICBtaW5ZLFxuICAgIF07XG4gICAgcmV0dXJuIG5ldyBQb2x5Z29uKGZsYXRDb29yZGluYXRlcywgR2VvbWV0cnlMYXlvdXQuWFksIFtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCxcbiAgICBdKTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgcmVndWxhciBwb2x5Z29uIGZyb20gYSBjaXJjbGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGNpcmNsZSBDaXJjbGUgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9zaWRlcyBOdW1iZXIgb2Ygc2lkZXMgb2YgdGhlIHBvbHlnb24uIERlZmF1bHQgaXMgMzIuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9hbmdsZSBTdGFydCBhbmdsZSBmb3IgdGhlIGZpcnN0IHZlcnRleCBvZiB0aGUgcG9seWdvbiBpblxuICogICAgIGNvdW50ZXItY2xvY2t3aXNlIHJhZGlhbnMuIDAgbWVhbnMgRWFzdC4gRGVmYXVsdCBpcyAwLlxuICogQHJldHVybiB7UG9seWdvbn0gUG9seWdvbiBnZW9tZXRyeS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21DaXJjbGUoY2lyY2xlLCBvcHRfc2lkZXMsIG9wdF9hbmdsZSkge1xuICAgIHZhciBzaWRlcyA9IG9wdF9zaWRlcyA/IG9wdF9zaWRlcyA6IDMyO1xuICAgIHZhciBzdHJpZGUgPSBjaXJjbGUuZ2V0U3RyaWRlKCk7XG4gICAgdmFyIGxheW91dCA9IGNpcmNsZS5nZXRMYXlvdXQoKTtcbiAgICB2YXIgY2VudGVyID0gY2lyY2xlLmdldENlbnRlcigpO1xuICAgIHZhciBhcnJheUxlbmd0aCA9IHN0cmlkZSAqIChzaWRlcyArIDEpO1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBuZXcgQXJyYXkoYXJyYXlMZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXlMZW5ndGg7IGkgKz0gc3RyaWRlKSB7XG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tpXSA9IDA7XG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tpICsgMV0gPSAwO1xuICAgICAgICBmb3IgKHZhciBqID0gMjsgaiA8IHN0cmlkZTsgaisrKSB7XG4gICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbaSArIGpdID0gY2VudGVyW2pdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBlbmRzID0gW2ZsYXRDb29yZGluYXRlcy5sZW5ndGhdO1xuICAgIHZhciBwb2x5Z29uID0gbmV3IFBvbHlnb24oZmxhdENvb3JkaW5hdGVzLCBsYXlvdXQsIGVuZHMpO1xuICAgIG1ha2VSZWd1bGFyKHBvbHlnb24sIGNlbnRlciwgY2lyY2xlLmdldFJhZGl1cygpLCBvcHRfYW5nbGUpO1xuICAgIHJldHVybiBwb2x5Z29uO1xufVxuLyoqXG4gKiBNb2RpZnkgdGhlIGNvb3JkaW5hdGVzIG9mIGEgcG9seWdvbiB0byBtYWtlIGl0IGEgcmVndWxhciBwb2x5Z29uLlxuICogQHBhcmFtIHtQb2x5Z29ufSBwb2x5Z29uIFBvbHlnb24gZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlciBvZiB0aGUgcmVndWxhciBwb2x5Z29uLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyBSYWRpdXMgb2YgdGhlIHJlZ3VsYXIgcG9seWdvbi5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2FuZ2xlIFN0YXJ0IGFuZ2xlIGZvciB0aGUgZmlyc3QgdmVydGV4IG9mIHRoZSBwb2x5Z29uIGluXG4gKiAgICAgY291bnRlci1jbG9ja3dpc2UgcmFkaWFucy4gMCBtZWFucyBFYXN0LiBEZWZhdWx0IGlzIDAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUmVndWxhcihwb2x5Z29uLCBjZW50ZXIsIHJhZGl1cywgb3B0X2FuZ2xlKSB7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHBvbHlnb24uZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgdmFyIHN0cmlkZSA9IHBvbHlnb24uZ2V0U3RyaWRlKCk7XG4gICAgdmFyIHNpZGVzID0gZmxhdENvb3JkaW5hdGVzLmxlbmd0aCAvIHN0cmlkZSAtIDE7XG4gICAgdmFyIHN0YXJ0QW5nbGUgPSBvcHRfYW5nbGUgPyBvcHRfYW5nbGUgOiAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IHNpZGVzOyArK2kpIHtcbiAgICAgICAgdmFyIG9mZnNldCA9IGkgKiBzdHJpZGU7XG4gICAgICAgIHZhciBhbmdsZSA9IHN0YXJ0QW5nbGUgKyAobW9kdWxvKGksIHNpZGVzKSAqIDIgKiBNYXRoLlBJKSAvIHNpZGVzO1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSA9IGNlbnRlclswXSArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlKTtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdID0gY2VudGVyWzFdICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUpO1xuICAgIH1cbiAgICBwb2x5Z29uLmNoYW5nZWQoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvbHlnb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9pbnRlcmlvcnBvaW50XG4gKi9cbmltcG9ydCB7IGxpbmVhclJpbmdzQ29udGFpbnNYWSB9IGZyb20gJy4vY29udGFpbnMuanMnO1xuaW1wb3J0IHsgbnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbiB9IGZyb20gJy4uLy4uL2FycmF5LmpzJztcbi8qKlxuICogQ2FsY3VsYXRlcyBhIHBvaW50IHRoYXQgaXMgbGlrZWx5IHRvIGxpZSBpbiB0aGUgaW50ZXJpb3Igb2YgdGhlIGxpbmVhciByaW5ncy5cbiAqIEluc3BpcmVkIGJ5IEpUUydzIGNvbS52aXZpZHNvbHV0aW9ucy5qdHMuZ2VvbS5HZW9tZXRyeSNnZXRJbnRlcmlvclBvaW50LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENlbnRlcnMgRmxhdCBjZW50ZXJzLlxuICogQHBhcmFtIHtudW1iZXJ9IGZsYXRDZW50ZXJzT2Zmc2V0IEZsYXQgY2VudGVyIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9kZXN0IERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gRGVzdGluYXRpb24gcG9pbnQgYXMgWFlNIGNvb3JkaW5hdGUsIHdoZXJlIE0gaXMgdGhlXG4gKiBsZW5ndGggb2YgdGhlIGhvcml6b250YWwgaW50ZXJzZWN0aW9uIHRoYXQgdGhlIHBvaW50IGJlbG9uZ3MgdG8uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcmlvclBvaW50T2ZBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBmbGF0Q2VudGVycywgZmxhdENlbnRlcnNPZmZzZXQsIG9wdF9kZXN0KSB7XG4gICAgdmFyIGksIGlpLCB4LCB4MSwgeDIsIHkxLCB5MjtcbiAgICB2YXIgeSA9IGZsYXRDZW50ZXJzW2ZsYXRDZW50ZXJzT2Zmc2V0ICsgMV07XG4gICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgIHZhciBpbnRlcnNlY3Rpb25zID0gW107XG4gICAgLy8gQ2FsY3VsYXRlIGludGVyc2VjdGlvbnMgd2l0aCB0aGUgaG9yaXpvbnRhbCBsaW5lXG4gICAgZm9yICh2YXIgciA9IDAsIHJyID0gZW5kcy5sZW5ndGg7IHIgPCBycjsgKytyKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW3JdO1xuICAgICAgICB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICAgICAgICB5MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXTtcbiAgICAgICAgZm9yIChpID0gb2Zmc2V0OyBpIDwgZW5kOyBpICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbaV07XG4gICAgICAgICAgICB5MiA9IGZsYXRDb29yZGluYXRlc1tpICsgMV07XG4gICAgICAgICAgICBpZiAoKHkgPD0geTEgJiYgeTIgPD0geSkgfHwgKHkxIDw9IHkgJiYgeSA8PSB5MikpIHtcbiAgICAgICAgICAgICAgICB4ID0gKCh5IC0geTEpIC8gKHkyIC0geTEpKSAqICh4MiAtIHgxKSArIHgxO1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbnMucHVzaCh4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHgxID0geDI7XG4gICAgICAgICAgICB5MSA9IHkyO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEZpbmQgdGhlIGxvbmdlc3Qgc2VnbWVudCBvZiB0aGUgaG9yaXpvbnRhbCBsaW5lIHRoYXQgaGFzIGl0cyBjZW50ZXIgcG9pbnRcbiAgICAvLyBpbnNpZGUgdGhlIGxpbmVhciByaW5nLlxuICAgIHZhciBwb2ludFggPSBOYU47XG4gICAgdmFyIG1heFNlZ21lbnRMZW5ndGggPSAtSW5maW5pdHk7XG4gICAgaW50ZXJzZWN0aW9ucy5zb3J0KG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24pO1xuICAgIHgxID0gaW50ZXJzZWN0aW9uc1swXTtcbiAgICBmb3IgKGkgPSAxLCBpaSA9IGludGVyc2VjdGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB4MiA9IGludGVyc2VjdGlvbnNbaV07XG4gICAgICAgIHZhciBzZWdtZW50TGVuZ3RoID0gTWF0aC5hYnMoeDIgLSB4MSk7XG4gICAgICAgIGlmIChzZWdtZW50TGVuZ3RoID4gbWF4U2VnbWVudExlbmd0aCkge1xuICAgICAgICAgICAgeCA9ICh4MSArIHgyKSAvIDI7XG4gICAgICAgICAgICBpZiAobGluZWFyUmluZ3NDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgICAgICAgICAgICAgcG9pbnRYID0geDtcbiAgICAgICAgICAgICAgICBtYXhTZWdtZW50TGVuZ3RoID0gc2VnbWVudExlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB4MSA9IHgyO1xuICAgIH1cbiAgICBpZiAoaXNOYU4ocG9pbnRYKSkge1xuICAgICAgICAvLyBUaGVyZSBpcyBubyBob3Jpem9udGFsIGxpbmUgdGhhdCBoYXMgaXRzIGNlbnRlciBwb2ludCBpbnNpZGUgdGhlIGxpbmVhclxuICAgICAgICAvLyByaW5nLiAgVXNlIHRoZSBjZW50ZXIgb2YgdGhlIHRoZSBsaW5lYXIgcmluZydzIGV4dGVudC5cbiAgICAgICAgcG9pbnRYID0gZmxhdENlbnRlcnNbZmxhdENlbnRlcnNPZmZzZXRdO1xuICAgIH1cbiAgICBpZiAob3B0X2Rlc3QpIHtcbiAgICAgICAgb3B0X2Rlc3QucHVzaChwb2ludFgsIHksIG1heFNlZ21lbnRMZW5ndGgpO1xuICAgICAgICByZXR1cm4gb3B0X2Rlc3Q7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gW3BvaW50WCwgeSwgbWF4U2VnbWVudExlbmd0aF07XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q2VudGVycyBGbGF0IGNlbnRlcnMuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBJbnRlcmlvciBwb2ludHMgYXMgWFlNIGNvb3JkaW5hdGVzLCB3aGVyZSBNIGlzIHRoZVxuICogbGVuZ3RoIG9mIHRoZSBob3Jpem9udGFsIGludGVyc2VjdGlvbiB0aGF0IHRoZSBwb2ludCBiZWxvbmdzIHRvLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW50ZXJpb3JQb2ludHNPZk11bHRpQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIGZsYXRDZW50ZXJzKSB7XG4gICAgdmFyIGludGVyaW9yUG9pbnRzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBpbnRlcmlvclBvaW50cyA9IGdldEludGVyaW9yUG9pbnRPZkFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGZsYXRDZW50ZXJzLCAyICogaSwgaW50ZXJpb3JQb2ludHMpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBpbnRlcmlvclBvaW50cztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyaW9ycG9pbnQuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9WaWV3XG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4vT2JqZWN0LmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9nZW9tL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgVW5pdHMgZnJvbSAnLi9wcm9qL1VuaXRzLmpzJztcbmltcG9ydCBWaWV3SGludCBmcm9tICcuL1ZpZXdIaW50LmpzJztcbmltcG9ydCBWaWV3UHJvcGVydHkgZnJvbSAnLi9WaWV3UHJvcGVydHkuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9USUxFX1NJWkUgfSBmcm9tICcuL3RpbGVncmlkL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBNRVRFUlNfUEVSX1VOSVQsIGNyZWF0ZVByb2plY3Rpb24sIGZyb21Vc2VyQ29vcmRpbmF0ZSwgZnJvbVVzZXJFeHRlbnQsIGdldFVzZXJQcm9qZWN0aW9uLCB0b1VzZXJDb29yZGluYXRlLCB0b1VzZXJFeHRlbnQsIH0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7IFZPSUQgfSBmcm9tICcuL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBhZGQgYXMgYWRkQ29vcmRpbmF0ZSwgZXF1YWxzIGFzIGNvb3JkaW5hdGVzRXF1YWwsIHJvdGF0ZSBhcyByb3RhdGVDb29yZGluYXRlLCB9IGZyb20gJy4vY29vcmRpbmF0ZS5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi9vYmouanMnO1xuaW1wb3J0IHsgbm9uZSBhcyBjZW50ZXJOb25lLCBjcmVhdGVFeHRlbnQgfSBmcm9tICcuL2NlbnRlcmNvbnN0cmFpbnQuanMnO1xuaW1wb3J0IHsgY2xhbXAsIG1vZHVsbyB9IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVNaW5NYXhSZXNvbHV0aW9uIH0gZnJvbSAnLi9yZXNvbHV0aW9uY29uc3RyYWludC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVTbmFwVG9OLCBjcmVhdGVTbmFwVG9aZXJvLCBkaXNhYmxlLCBub25lIGFzIHJvdGF0aW9uTm9uZSwgfSBmcm9tICcuL3JvdGF0aW9uY29uc3RyYWludC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVTbmFwVG9Qb3dlciwgY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMsIH0gZnJvbSAnLi9yZXNvbHV0aW9uY29uc3RyYWludC5qcyc7XG5pbXBvcnQgeyBlYXNlT3V0IH0gZnJvbSAnLi9lYXNpbmcuanMnO1xuaW1wb3J0IHsgZXF1YWxzIH0gZnJvbSAnLi9jb29yZGluYXRlLmpzJztcbmltcG9ydCB7IGdldENlbnRlciwgZ2V0Rm9yVmlld0FuZFNpemUsIGdldEhlaWdodCwgZ2V0V2lkdGgsIGlzRW1wdHksIH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgaW5BbmRPdXQgfSBmcm9tICcuL2Vhc2luZy5qcyc7XG5pbXBvcnQgeyBsaW5lYXJGaW5kTmVhcmVzdCB9IGZyb20gJy4vYXJyYXkuanMnO1xuaW1wb3J0IHsgZnJvbUV4dGVudCBhcyBwb2x5Z29uRnJvbUV4dGVudCB9IGZyb20gJy4vZ2VvbS9Qb2x5Z29uLmpzJztcbi8qKlxuICogQW4gYW5pbWF0aW9uIGNvbmZpZ3VyYXRpb25cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBbmltYXRpb25cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtzb3VyY2VDZW50ZXJdXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbdGFyZ2V0Q2VudGVyXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtzb3VyY2VSZXNvbHV0aW9uXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0YXJnZXRSZXNvbHV0aW9uXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtzb3VyY2VSb3RhdGlvbl1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGFyZ2V0Um90YXRpb25dXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbYW5jaG9yXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IHN0YXJ0XG4gKiBAcHJvcGVydHkge251bWJlcn0gZHVyYXRpb25cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gY29tcGxldGVcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyKTpudW1iZXJ9IGVhc2luZ1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihib29sZWFuKTp2b2lkfSBjYWxsYmFja1xuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IENvbnN0cmFpbnRzXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY2VudGVyY29uc3RyYWludC5qc1wiKS5UeXBlfSBjZW50ZXJcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9yZXNvbHV0aW9uY29uc3RyYWludC5qc1wiKS5UeXBlfSByZXNvbHV0aW9uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcm90YXRpb25jb25zdHJhaW50LmpzXCIpLlR5cGV9IHJvdGF0aW9uXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRml0T3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW3NpemVdIFRoZSBzaXplIGluIHBpeGVscyBvZiB0aGUgYm94IHRvIGZpdFxuICogdGhlIGV4dGVudCBpbnRvLiBEZWZhdWx0IGlzIHRoZSBjdXJyZW50IHNpemUgb2YgdGhlIGZpcnN0IG1hcCBpbiB0aGUgRE9NIHRoYXRcbiAqIHVzZXMgdGhpcyB2aWV3LCBvciBgWzEwMCwgMTAwXWAgaWYgbm8gc3VjaCBtYXAgaXMgZm91bmQuXG4gKiBAcHJvcGVydHkgeyFBcnJheTxudW1iZXI+fSBbcGFkZGluZz1bMCwgMCwgMCwgMF1dIFBhZGRpbmcgKGluIHBpeGVscykgdG8gYmVcbiAqIGNsZWFyZWQgaW5zaWRlIHRoZSB2aWV3LiBWYWx1ZXMgaW4gdGhlIGFycmF5IGFyZSB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnRcbiAqIHBhZGRpbmcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtuZWFyZXN0PWZhbHNlXSBJZiB0aGUgdmlldyBgY29uc3RyYWluUmVzb2x1dGlvbmAgb3B0aW9uIGlzIGB0cnVlYCxcbiAqIGdldCB0aGUgbmVhcmVzdCBleHRlbnQgaW5zdGVhZCBvZiB0aGUgY2xvc2VzdCB0aGF0IGFjdHVhbGx5IGZpdHMgdGhlIHZpZXcuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb249MF0gTWluaW11bSByZXNvbHV0aW9uIHRoYXQgd2Ugem9vbSB0by5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gTWF4aW11bSB6b29tIGxldmVsIHRoYXQgd2Ugem9vbSB0by4gSWZcbiAqIGBtaW5SZXNvbHV0aW9uYCBpcyBnaXZlbiwgdGhpcyBwcm9wZXJ0eSBpcyBpZ25vcmVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbl0gVGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQnkgZGVmYXVsdCwgdGhlcmUgaXMgbm8gYW5pbWF0aW9uIHRvIHRoZSB0YXJnZXQgZXh0ZW50LlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIpOm51bWJlcn0gW2Vhc2luZ10gVGhlIGVhc2luZyBmdW5jdGlvbiB1c2VkIGR1cmluZ1xuICogdGhlIGFuaW1hdGlvbiAoZGVmYXVsdHMgdG8ge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmd+aW5BbmRPdXR9KS5cbiAqIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaCBmcmFtZSB3aXRoIGEgbnVtYmVyIHJlcHJlc2VudGluZyBhXG4gKiBmcmFjdGlvbiBvZiB0aGUgYW5pbWF0aW9uJ3MgZHVyYXRpb24uICBUaGUgZnVuY3Rpb24gc2hvdWxkIHJldHVybiBhIG51bWJlclxuICogYmV0d2VlbiAwIGFuZCAxIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3MgdG93YXJkIHRoZSBkZXN0aW5hdGlvbiBzdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oYm9vbGVhbik6dm9pZH0gW2NhbGxiYWNrXSBGdW5jdGlvbiBjYWxsZWQgd2hlbiB0aGUgdmlldyBpcyBpblxuICogaXRzIGZpbmFsIHBvc2l0aW9uLiBUaGUgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgd2l0aCBgdHJ1ZWAgaWYgdGhlIGFuaW1hdGlvblxuICogc2VyaWVzIGNvbXBsZXRlZCBvbiBpdHMgb3duIG9yIGBmYWxzZWAgaWYgaXQgd2FzIGNhbmNlbGxlZC5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBWaWV3T3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2NlbnRlcl0gVGhlIGluaXRpYWwgY2VudGVyIGZvclxuICogdGhlIHZpZXcuIElmIGEgdXNlciBwcm9qZWN0aW9uIGlzIG5vdCBzZXQsIHRoZSBjb29yZGluYXRlIHN5c3RlbSBmb3IgdGhlIGNlbnRlciBpc1xuICogc3BlY2lmaWVkIHdpdGggdGhlIGBwcm9qZWN0aW9uYCBvcHRpb24uIExheWVyIHNvdXJjZXMgd2lsbCBub3QgYmUgZmV0Y2hlZCBpZiB0aGlzXG4gKiBpcyBub3Qgc2V0LCBidXQgdGhlIGNlbnRlciBjYW4gYmUgc2V0IGxhdGVyIHdpdGgge0BsaW5rICNzZXRDZW50ZXJ9LlxuICogQHByb3BlcnR5IHtib29sZWFufG51bWJlcn0gW2NvbnN0cmFpblJvdGF0aW9uPXRydWVdIFJvdGF0aW9uIGNvbnN0cmFpbnQuXG4gKiBgZmFsc2VgIG1lYW5zIG5vIGNvbnN0cmFpbnQuIGB0cnVlYCBtZWFucyBubyBjb25zdHJhaW50LCBidXQgc25hcCB0byB6ZXJvXG4gKiBuZWFyIHplcm8uIEEgbnVtYmVyIGNvbnN0cmFpbnMgdGhlIHJvdGF0aW9uIHRvIHRoYXQgbnVtYmVyIG9mIHZhbHVlcy4gRm9yXG4gKiBleGFtcGxlLCBgNGAgd2lsbCBjb25zdHJhaW4gdGhlIHJvdGF0aW9uIHRvIDAsIDkwLCAxODAsIGFuZCAyNzAgZGVncmVlcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2VuYWJsZVJvdGF0aW9uPXRydWVdIEVuYWJsZSByb3RhdGlvbi5cbiAqIElmIGBmYWxzZWAsIGEgcm90YXRpb24gY29uc3RyYWludCB0aGF0IGFsd2F5cyBzZXRzIHRoZSByb3RhdGlvbiB0byB6ZXJvIGlzXG4gKiB1c2VkLiBUaGUgYGNvbnN0cmFpblJvdGF0aW9uYCBvcHRpb24gaGFzIG5vIGVmZmVjdCBpZiBgZW5hYmxlUm90YXRpb25gIGlzXG4gKiBgZmFsc2VgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBleHRlbnQgdGhhdCBjb25zdHJhaW5zIHRoZVxuICogdmlldywgaW4gb3RoZXIgd29yZHMsIG5vdGhpbmcgb3V0c2lkZSBvZiB0aGlzIGV4dGVudCBjYW4gYmUgdmlzaWJsZSBvbiB0aGUgbWFwLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29uc3RyYWluT25seUNlbnRlcj1mYWxzZV0gSWYgdHJ1ZSwgdGhlIGV4dGVudFxuICogY29uc3RyYWludCB3aWxsIG9ubHkgYXBwbHkgdG8gdGhlIHZpZXcgY2VudGVyIGFuZCBub3QgdGhlIHdob2xlIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Ntb290aEV4dGVudENvbnN0cmFpbnQ9dHJ1ZV0gSWYgdHJ1ZSwgdGhlIGV4dGVudFxuICogY29uc3RyYWludCB3aWxsIGJlIGFwcGxpZWQgc21vb3RobHksIGkuZS4gYWxsb3cgdGhlIHZpZXcgdG8gZ28gc2xpZ2h0bHkgb3V0c2lkZVxuICogb2YgdGhlIGdpdmVuIGBleHRlbnRgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50LiBJdCBpcyB1c2VkIHRvZ2V0aGVyIHdpdGggYG1pblJlc29sdXRpb25gIChvclxuICogYG1heFpvb21gKSBhbmQgYHpvb21GYWN0b3JgLiBJZiB1bnNwZWNpZmllZCBpdCBpcyBjYWxjdWxhdGVkIGluIHN1Y2ggYSB3YXlcbiAqIHRoYXQgdGhlIHByb2plY3Rpb24ncyB2YWxpZGl0eSBleHRlbnQgZml0cyBpbiBhIDI1NngyNTYgcHggdGlsZS4gSWYgdGhlXG4gKiBwcm9qZWN0aW9uIGlzIFNwaGVyaWNhbCBNZXJjYXRvciAodGhlIGRlZmF1bHQpIHRoZW4gYG1heFJlc29sdXRpb25gIGRlZmF1bHRzXG4gKiB0byBgNDAwNzUwMTYuNjg1NTc4NDkgLyAyNTYgPSAxNTY1NDMuMDMzOTI4MDQwOTdgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50LiAgSXQgaXMgdXNlZCB0b2dldGhlciB3aXRoIGBtYXhSZXNvbHV0aW9uYCAob3JcbiAqIGBtaW5ab29tYCkgYW5kIGB6b29tRmFjdG9yYC4gIElmIHVuc3BlY2lmaWVkIGl0IGlzIGNhbGN1bGF0ZWQgYXNzdW1pbmcgMjlcbiAqIHpvb20gbGV2ZWxzICh3aXRoIGEgZmFjdG9yIG9mIDIpLiBJZiB0aGUgcHJvamVjdGlvbiBpcyBTcGhlcmljYWwgTWVyY2F0b3JcbiAqICh0aGUgZGVmYXVsdCkgdGhlbiBgbWluUmVzb2x1dGlvbmAgZGVmYXVsdHMgdG9cbiAqIGA0MDA3NTAxNi42ODU1Nzg0OSAvIDI1NiAvIE1hdGgucG93KDIsIDI4KSA9IDAuMDAwNTgzMTY4MjQ1NTgzOTI1M2AuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb209MjhdIFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgdXNlZCB0byBkZXRlcm1pbmUgdGhlXG4gKiByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWluWm9vbWAgKG9yXG4gKiBgbWF4UmVzb2x1dGlvbmApIGFuZCBgem9vbUZhY3RvcmAuICBOb3RlIHRoYXQgaWYgYG1pblJlc29sdXRpb25gIGlzIGFsc29cbiAqIHByb3ZpZGVkLCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlIG92ZXIgYG1heFpvb21gLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgdXNlZCB0byBkZXRlcm1pbmUgdGhlXG4gKiByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWF4Wm9vbWAgKG9yXG4gKiBgbWluUmVzb2x1dGlvbmApIGFuZCBgem9vbUZhY3RvcmAuICBOb3RlIHRoYXQgaWYgYG1heFJlc29sdXRpb25gIGlzIGFsc29cbiAqIHByb3ZpZGVkLCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlIG92ZXIgYG1pblpvb21gLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbXVsdGlXb3JsZD1mYWxzZV0gSWYgYGZhbHNlYCB0aGUgdmlldyBpcyBjb25zdHJhaW5lZCBzb1xuICogb25seSBvbmUgd29ybGQgaXMgdmlzaWJsZSwgYW5kIHlvdSBjYW5ub3QgcGFuIG9mZiB0aGUgZWRnZS4gIElmIGB0cnVlYCB0aGUgbWFwXG4gKiBtYXkgc2hvdyBtdWx0aXBsZSB3b3JsZHMgYXQgbG93IHpvb20gbGV2ZWxzLiAgT25seSB1c2VkIGlmIHRoZSBgcHJvamVjdGlvbmAgaXNcbiAqIGdsb2JhbC4gIE5vdGUgdGhhdCBpZiBgZXh0ZW50YCBpcyBhbHNvIHByb3ZpZGVkIGl0IGlzIGdpdmVuIHByZWNlZGVuY2UuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb25zdHJhaW5SZXNvbHV0aW9uPWZhbHNlXSBJZiB0cnVlLCB0aGUgdmlldyB3aWxsIGFsd2F5c1xuICogYW5pbWF0ZSB0byB0aGUgY2xvc2VzdCB6b29tIGxldmVsIGFmdGVyIGFuIGludGVyYWN0aW9uOyBmYWxzZSBtZWFuc1xuICogaW50ZXJtZWRpYXJ5IHpvb20gbGV2ZWxzIGFyZSBhbGxvd2VkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbc21vb3RoUmVzb2x1dGlvbkNvbnN0cmFpbnQ9dHJ1ZV0gSWYgdHJ1ZSwgdGhlIHJlc29sdXRpb25cbiAqIG1pbi9tYXggdmFsdWVzIHdpbGwgYmUgYXBwbGllZCBzbW9vdGhseSwgaS4gZS4gYWxsb3cgdGhlIHZpZXcgdG8gZXhjZWVkIHNsaWdodGx5XG4gKiB0aGUgZ2l2ZW4gcmVzb2x1dGlvbiBvciB6b29tIGJvdW5kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Nob3dGdWxsRXh0ZW50PWZhbHNlXSBBbGxvdyB0aGUgdmlldyB0byBiZSB6b29tZWQgb3V0IHRvXG4gKiBzaG93IHRoZSBmdWxsIGNvbmZpZ3VyZWQgZXh0ZW50LiBCeSBkZWZhdWx0LCB3aGVuIGEgdmlldyBpcyBjb25maWd1cmVkIHdpdGggYW5cbiAqIGV4dGVudCwgdXNlcnMgd2lsbCBub3QgYmUgYWJsZSB0byB6b29tIG91dCBzbyB0aGUgdmlld3BvcnQgZXhjZWVkcyB0aGUgZXh0ZW50IGluXG4gKiBlaXRoZXIgZGltZW5zaW9uLiBUaGlzIG1lYW5zIHRoZSBmdWxsIGV4dGVudCBtYXkgbm90IGJlIHZpc2libGUgaWYgdGhlIHZpZXdwb3J0XG4gKiBpcyB0YWxsZXIgb3Igd2lkZXIgdGhhbiB0aGUgYXNwZWN0IHJhdGlvIG9mIHRoZSBjb25maWd1cmVkIGV4dGVudC4gSWZcbiAqIHNob3dGdWxsRXh0ZW50IGlzIHRydWUsIHRoZSB1c2VyIHdpbGwgYmUgYWJsZSB0byB6b29tIG91dCBzbyB0aGF0IHRoZSB2aWV3cG9ydFxuICogZXhjZWVkcyB0aGUgaGVpZ2h0IG9yIHdpZHRoIG9mIHRoZSBjb25maWd1cmVkIGV4dGVudCwgYnV0IG5vdCBib3RoLCBhbGxvd2luZyB0aGVcbiAqIGZ1bGwgZXh0ZW50IHRvIGJlIHNob3duLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uPSdFUFNHOjM4NTcnXSBUaGVcbiAqIHByb2plY3Rpb24uIFRoZSBkZWZhdWx0IGlzIFNwaGVyaWNhbCBNZXJjYXRvci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVzb2x1dGlvbl0gVGhlIGluaXRpYWwgcmVzb2x1dGlvbiBmb3IgdGhlIHZpZXcuIFRoZVxuICogdW5pdHMgYXJlIGBwcm9qZWN0aW9uYCB1bml0cyBwZXIgcGl4ZWwgKGUuZy4gbWV0ZXJzIHBlciBwaXhlbCkuIEFuXG4gKiBhbHRlcm5hdGl2ZSB0byBzZXR0aW5nIHRoaXMgaXMgdG8gc2V0IGB6b29tYC4gTGF5ZXIgc291cmNlcyB3aWxsIG5vdCBiZVxuICogZmV0Y2hlZCBpZiBuZWl0aGVyIHRoaXMgbm9yIGB6b29tYCBhcmUgZGVmaW5lZCwgYnV0IHRoZXkgY2FuIGJlIHNldCBsYXRlclxuICogd2l0aCB7QGxpbmsgI3NldFpvb219IG9yIHtAbGluayAjc2V0UmVzb2x1dGlvbn0uXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtyZXNvbHV0aW9uc10gUmVzb2x1dGlvbnMgdG8gZGV0ZXJtaW5lIHRoZVxuICogcmVzb2x1dGlvbiBjb25zdHJhaW50LiBJZiBzZXQgdGhlIGBtYXhSZXNvbHV0aW9uYCwgYG1pblJlc29sdXRpb25gLFxuICogYG1pblpvb21gLCBgbWF4Wm9vbWAsIGFuZCBgem9vbUZhY3RvcmAgb3B0aW9ucyBhcmUgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcm90YXRpb249MF0gVGhlIGluaXRpYWwgcm90YXRpb24gZm9yIHRoZSB2aWV3IGluIHJhZGlhbnNcbiAqIChwb3NpdGl2ZSByb3RhdGlvbiBjbG9ja3dpc2UsIDAgbWVhbnMgTm9ydGgpLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tXSBPbmx5IHVzZWQgaWYgYHJlc29sdXRpb25gIGlzIG5vdCBkZWZpbmVkLiBab29tXG4gKiBsZXZlbCB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgaW5pdGlhbCByZXNvbHV0aW9uIGZvciB0aGUgdmlldy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbUZhY3Rvcj0yXSBUaGUgem9vbSBmYWN0b3IgdXNlZCB0byBjb21wdXRlIHRoZVxuICogY29ycmVzcG9uZGluZyByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHshQXJyYXk8bnVtYmVyPn0gW3BhZGRpbmc9WzAsIDAsIDAsIDBdXSBQYWRkaW5nIChpbiBjc3MgcGl4ZWxzKS5cbiAqIElmIHRoZSBtYXAgdmlld3BvcnQgaXMgcGFydGlhbGx5IGNvdmVyZWQgd2l0aCBvdGhlciBjb250ZW50IChvdmVybGF5cykgYWxvbmdcbiAqIGl0cyBlZGdlcywgdGhpcyBzZXR0aW5nIGFsbG93cyB0byBzaGlmdCB0aGUgY2VudGVyIG9mIHRoZSB2aWV3cG9ydCBhd2F5IGZyb21cbiAqIHRoYXQgY29udGVudC4gVGhlIG9yZGVyIG9mIHRoZSB2YWx1ZXMgaXMgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0LlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEFuaW1hdGlvbk9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtjZW50ZXJdIFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcgYXQgdGhlIGVuZCBvZlxuICogdGhlIGFuaW1hdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbV0gVGhlIHpvb20gbGV2ZWwgb2YgdGhlIHZpZXcgYXQgdGhlIGVuZCBvZiB0aGVcbiAqIGFuaW1hdGlvbi4gVGhpcyB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgYHJlc29sdXRpb25gLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZXNvbHV0aW9uXSBUaGUgcmVzb2x1dGlvbiBvZiB0aGUgdmlldyBhdCB0aGUgZW5kXG4gKiBvZiB0aGUgYW5pbWF0aW9uLiAgSWYgYHpvb21gIGlzIGFsc28gcHJvdmlkZWQsIHRoaXMgb3B0aW9uIHdpbGwgYmUgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcm90YXRpb25dIFRoZSByb3RhdGlvbiBvZiB0aGUgdmlldyBhdCB0aGUgZW5kIG9mXG4gKiB0aGUgYW5pbWF0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2FuY2hvcl0gT3B0aW9uYWwgYW5jaG9yIHRvIHJlbWFpbiBmaXhlZFxuICogZHVyaW5nIGEgcm90YXRpb24gb3IgcmVzb2x1dGlvbiBhbmltYXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTEwMDBdIFRoZSBkdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyKTpudW1iZXJ9IFtlYXNpbmddIFRoZSBlYXNpbmcgZnVuY3Rpb24gdXNlZFxuICogZHVyaW5nIHRoZSBhbmltYXRpb24gKGRlZmF1bHRzIHRvIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nfmluQW5kT3V0fSkuXG4gKiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggZnJhbWUgd2l0aCBhIG51bWJlciByZXByZXNlbnRpbmcgYVxuICogZnJhY3Rpb24gb2YgdGhlIGFuaW1hdGlvbidzIGR1cmF0aW9uLiAgVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBudW1iZXJcbiAqIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIHRvd2FyZCB0aGUgZGVzdGluYXRpb24gc3RhdGUuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU3RhdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlclxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uXG4gKiBAcHJvcGVydHkge251bWJlcn0gcmVzb2x1dGlvblxuICogQHByb3BlcnR5IHtudW1iZXJ9IHJvdGF0aW9uXG4gKiBAcHJvcGVydHkge251bWJlcn0gem9vbVxuICovXG4vKipcbiAqIERlZmF1bHQgbWluIHpvb20gbGV2ZWwgZm9yIHRoZSBtYXAgdmlldy5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBERUZBVUxUX01JTl9aT09NID0gMDtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBWaWV3IG9iamVjdCByZXByZXNlbnRzIGEgc2ltcGxlIDJEIHZpZXcgb2YgdGhlIG1hcC5cbiAqXG4gKiBUaGlzIGlzIHRoZSBvYmplY3QgdG8gYWN0IHVwb24gdG8gY2hhbmdlIHRoZSBjZW50ZXIsIHJlc29sdXRpb24sXG4gKiBhbmQgcm90YXRpb24gb2YgdGhlIG1hcC5cbiAqXG4gKiBBIFZpZXcgaGFzIGEgYHByb2plY3Rpb25gLiBUaGUgcHJvamVjdGlvbiBkZXRlcm1pbmVzIHRoZVxuICogY29vcmRpbmF0ZSBzeXN0ZW0gb2YgdGhlIGNlbnRlciwgYW5kIGl0cyB1bml0cyBkZXRlcm1pbmUgdGhlIHVuaXRzIG9mIHRoZVxuICogcmVzb2x1dGlvbiAocHJvamVjdGlvbiB1bml0cyBwZXIgcGl4ZWwpLiBUaGUgZGVmYXVsdCBwcm9qZWN0aW9uIGlzXG4gKiBTcGhlcmljYWwgTWVyY2F0b3IgKEVQU0c6Mzg1NykuXG4gKlxuICogIyMjIFRoZSB2aWV3IHN0YXRlc1xuICpcbiAqIEEgVmlldyBpcyBkZXRlcm1pbmVkIGJ5IHRocmVlIHN0YXRlczogYGNlbnRlcmAsIGByZXNvbHV0aW9uYCxcbiAqIGFuZCBgcm90YXRpb25gLiBFYWNoIHN0YXRlIGhhcyBhIGNvcnJlc3BvbmRpbmcgZ2V0dGVyIGFuZCBzZXR0ZXIsIGUuZy5cbiAqIGBnZXRDZW50ZXJgIGFuZCBgc2V0Q2VudGVyYCBmb3IgdGhlIGBjZW50ZXJgIHN0YXRlLlxuICpcbiAqIFRoZSBgem9vbWAgc3RhdGUgaXMgYWN0dWFsbHkgbm90IHNhdmVkIG9uIHRoZSB2aWV3OiBhbGwgY29tcHV0YXRpb25zXG4gKiBpbnRlcm5hbGx5IHVzZSB0aGUgYHJlc29sdXRpb25gIHN0YXRlLiBTdGlsbCwgdGhlIGBzZXRab29tYCBhbmQgYGdldFpvb21gXG4gKiBtZXRob2RzIGFyZSBhdmFpbGFibGUsIGFzIHdlbGwgYXMgYGdldFJlc29sdXRpb25Gb3Jab29tYCBhbmRcbiAqIGBnZXRab29tRm9yUmVzb2x1dGlvbmAgdG8gc3dpdGNoIGZyb20gb25lIHN5c3RlbSB0byB0aGUgb3RoZXIuXG4gKlxuICogIyMjIFRoZSBjb25zdHJhaW50c1xuICpcbiAqIGBzZXRDZW50ZXJgLCBgc2V0UmVzb2x1dGlvbmAgYW5kIGBzZXRSb3RhdGlvbmAgY2FuIGJlIHVzZWQgdG8gY2hhbmdlIHRoZVxuICogc3RhdGVzIG9mIHRoZSB2aWV3LCBidXQgYW55IGNvbnN0cmFpbnQgZGVmaW5lZCBpbiB0aGUgY29uc3RydWN0b3Igd2lsbFxuICogYmUgYXBwbGllZCBhbG9uZyB0aGUgd2F5LlxuICpcbiAqIEEgVmlldyBvYmplY3QgY2FuIGhhdmUgYSAqcmVzb2x1dGlvbiBjb25zdHJhaW50KiwgYSAqcm90YXRpb24gY29uc3RyYWludCpcbiAqIGFuZCBhICpjZW50ZXIgY29uc3RyYWludCouXG4gKlxuICogVGhlICpyZXNvbHV0aW9uIGNvbnN0cmFpbnQqIHR5cGljYWxseSByZXN0cmljdHMgbWluL21heCB2YWx1ZXMgYW5kXG4gKiBzbmFwcyB0byBzcGVjaWZpYyByZXNvbHV0aW9ucy4gSXQgaXMgZGV0ZXJtaW5lZCBieSB0aGUgZm9sbG93aW5nXG4gKiBvcHRpb25zOiBgcmVzb2x1dGlvbnNgLCBgbWF4UmVzb2x1dGlvbmAsIGBtYXhab29tYCBhbmQgYHpvb21GYWN0b3JgLlxuICogSWYgYHJlc29sdXRpb25zYCBpcyBzZXQsIHRoZSBvdGhlciB0aHJlZSBvcHRpb25zIGFyZSBpZ25vcmVkLiBTZWVcbiAqIGRvY3VtZW50YXRpb24gZm9yIGVhY2ggb3B0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9uLiBCeSBkZWZhdWx0LCB0aGUgdmlld1xuICogb25seSBoYXMgYSBtaW4vbWF4IHJlc3RyaWN0aW9uIGFuZCBhbGxvdyBpbnRlcm1lZGlhcnkgem9vbSBsZXZlbHMgd2hlblxuICogcGluY2gtem9vbWluZyBmb3IgZXhhbXBsZS5cbiAqXG4gKiBUaGUgKnJvdGF0aW9uIGNvbnN0cmFpbnQqIHNuYXBzIHRvIHNwZWNpZmljIGFuZ2xlcy4gSXQgaXMgZGV0ZXJtaW5lZFxuICogYnkgdGhlIGZvbGxvd2luZyBvcHRpb25zOiBgZW5hYmxlUm90YXRpb25gIGFuZCBgY29uc3RyYWluUm90YXRpb25gLlxuICogQnkgZGVmYXVsdCByb3RhdGlvbiBpcyBhbGxvd2VkIGFuZCBpdHMgdmFsdWUgaXMgc25hcHBlZCB0byB6ZXJvIHdoZW4gYXBwcm9hY2hpbmcgdGhlXG4gKiBob3Jpem9udGFsLlxuICpcbiAqIFRoZSAqY2VudGVyIGNvbnN0cmFpbnQqIGlzIGRldGVybWluZWQgYnkgdGhlIGBleHRlbnRgIG9wdGlvbi4gQnlcbiAqIGRlZmF1bHQgdGhlIHZpZXcgY2VudGVyIGlzIG5vdCBjb25zdHJhaW5lZCBhdCBhbGwuXG4gKlxuICogIyMjIENoYW5naW5nIHRoZSB2aWV3IHN0YXRlXG4gKlxuICogSXQgaXMgaW1wb3J0YW50IHRvIG5vdGUgdGhhdCBgc2V0Wm9vbWAsIGBzZXRSZXNvbHV0aW9uYCwgYHNldENlbnRlcmAgYW5kXG4gKiBgc2V0Um90YXRpb25gIGFyZSBzdWJqZWN0IHRvIHRoZSBhYm92ZSBtZW50aW9uZWQgY29uc3RyYWludHMuIEFzIHN1Y2gsIGl0XG4gKiBtYXkgc29tZXRpbWVzIG5vdCBiZSBwb3NzaWJsZSB0byBrbm93IGluIGFkdmFuY2UgdGhlIHJlc3VsdGluZyBzdGF0ZSBvZiB0aGVcbiAqIFZpZXcuIEZvciBleGFtcGxlLCBjYWxsaW5nIGBzZXRSZXNvbHV0aW9uKDEwKWAgZG9lcyBub3QgZ3VhcmFudGVlIHRoYXRcbiAqIGBnZXRSZXNvbHV0aW9uKClgIHdpbGwgcmV0dXJuIGAxMGAuXG4gKlxuICogQSBjb25zZXF1ZW5jZSBvZiB0aGlzIGlzIHRoYXQsIHdoZW4gYXBwbHlpbmcgYSBkZWx0YSBvbiB0aGUgdmlldyBzdGF0ZSwgb25lXG4gKiBzaG91bGQgdXNlIGBhZGp1c3RDZW50ZXJgLCBgYWRqdXN0Um90YXRpb25gLCBgYWRqdXN0Wm9vbWAgYW5kIGBhZGp1c3RSZXNvbHV0aW9uYFxuICogcmF0aGVyIHRoYW4gdGhlIGNvcnJlc3BvbmRpbmcgc2V0dGVycy4gVGhpcyB3aWxsIGxldCB2aWV3IGRvIGl0cyBpbnRlcm5hbFxuICogY29tcHV0YXRpb25zLiBCZXNpZGVzLCB0aGUgYGFkanVzdCpgIG1ldGhvZHMgYWxzbyB0YWtlIGFuIGBvcHRfYW5jaG9yYFxuICogYXJndW1lbnQgd2hpY2ggYWxsb3dzIHNwZWNpZnlpbmcgYW4gb3JpZ2luIGZvciB0aGUgdHJhbnNmb3JtYXRpb24uXG4gKlxuICogIyMjIEludGVyYWN0aW5nIHdpdGggdGhlIHZpZXdcbiAqXG4gKiBWaWV3IGNvbnN0cmFpbnRzIGFyZSB1c3VhbGx5IG9ubHkgYXBwbGllZCB3aGVuIHRoZSB2aWV3IGlzICphdCByZXN0KiwgbWVhbmluZyB0aGF0XG4gKiBubyBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgb25nb2luZy4gQXMgc3VjaCwgaWYgdGhlIHVzZXIgcHV0cyB0aGUgdmlldyBpbiBhXG4gKiBzdGF0ZSB0aGF0IGlzIG5vdCBlcXVpdmFsZW50IHRvIGEgY29uc3RyYWluZWQgb25lIChlLmcuIHJvdGF0aW5nIHRoZSB2aWV3IHdoZW5cbiAqIHRoZSBzbmFwIGFuZ2xlIGlzIDApLCBhbiBhbmltYXRpb24gd2lsbCBiZSB0cmlnZ2VyZWQgYXQgdGhlIGludGVyYWN0aW9uIGVuZCB0b1xuICogcHV0IGJhY2sgdGhlIHZpZXcgdG8gYSBzdGFibGUgc3RhdGU7XG4gKlxuICogQGFwaVxuICovXG52YXIgVmlldyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVmlldywgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1ZpZXdPcHRpb25zPX0gb3B0X29wdGlvbnMgVmlldyBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFZpZXcob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdF9vcHRpb25zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGludHNfID0gWzAsIDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PEFycmF5PEFuaW1hdGlvbj4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5pbWF0aW9uc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudXBkYXRlQW5pbWF0aW9uS2V5XztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBjb25zdFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnByb2plY3Rpb25fID0gY3JlYXRlUHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24sICdFUFNHOjM4NTcnKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnZpZXdwb3J0U2l6ZV8gPSBbMTAwLCAxMDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRhcmdldENlbnRlcl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRSZXNvbHV0aW9uXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGFyZ2V0Um90YXRpb25fO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNhbmNlbEFuY2hvcl8gPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xuICAgICAgICAgICAgb3B0aW9ucy5jZW50ZXIgPSBmcm9tVXNlckNvb3JkaW5hdGUob3B0aW9ucy5jZW50ZXIsIF90aGlzLnByb2plY3Rpb25fKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5leHRlbnQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuZXh0ZW50ID0gZnJvbVVzZXJFeHRlbnQob3B0aW9ucy5leHRlbnQsIF90aGlzLnByb2plY3Rpb25fKTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5hcHBseU9wdGlvbnNfKG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB1cCB0aGUgdmlldyB3aXRoIHRoZSBnaXZlbiBvcHRpb25zLlxuICAgICAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFwcGx5T3B0aW9uc18gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsICo+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgdmFyIHJlc29sdXRpb25Db25zdHJhaW50SW5mbyA9IGNyZWF0ZVJlc29sdXRpb25Db25zdHJhaW50KG9wdGlvbnMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4UmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8ubWF4UmVzb2x1dGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblJlc29sdXRpb25fID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLm1pblJlc29sdXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy56b29tRmFjdG9yXyA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby56b29tRmFjdG9yO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uc18gPSBvcHRpb25zLnJlc29sdXRpb25zO1xuICAgICAgICAvKipcbiAgICAgICAgICogUGFkZGluZyAoaW4gY3NzIHBpeGVscykuXG4gICAgICAgICAqIElmIHRoZSBtYXAgdmlld3BvcnQgaXMgcGFydGlhbGx5IGNvdmVyZWQgd2l0aCBvdGhlciBjb250ZW50IChvdmVybGF5cykgYWxvbmdcbiAgICAgICAgICogaXRzIGVkZ2VzLCB0aGlzIHNldHRpbmcgYWxsb3dzIHRvIHNoaWZ0IHRoZSBjZW50ZXIgb2YgdGhlIHZpZXdwb3J0IGF3YXkgZnJvbSB0aGF0XG4gICAgICAgICAqIGNvbnRlbnQuIFRoZSBvcmRlciBvZiB0aGUgdmFsdWVzIGluIHRoZSBhcnJheSBpcyB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQuXG4gICAgICAgICAqIFRoZSBkZWZhdWx0IGlzIG5vIHBhZGRpbmcsIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gYFswLCAwLCAwLCAwXWAuXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fHVuZGVmaW5lZH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWluWm9vbV8gPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8ubWluWm9vbTtcbiAgICAgICAgdmFyIGNlbnRlckNvbnN0cmFpbnQgPSBjcmVhdGVDZW50ZXJDb25zdHJhaW50KG9wdGlvbnMpO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbkNvbnN0cmFpbnQgPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8uY29uc3RyYWludDtcbiAgICAgICAgdmFyIHJvdGF0aW9uQ29uc3RyYWludCA9IGNyZWF0ZVJvdGF0aW9uQ29uc3RyYWludChvcHRpb25zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtDb25zdHJhaW50c31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29uc3RyYWludHNfID0ge1xuICAgICAgICAgICAgY2VudGVyOiBjZW50ZXJDb25zdHJhaW50LFxuICAgICAgICAgICAgcmVzb2x1dGlvbjogcmVzb2x1dGlvbkNvbnN0cmFpbnQsXG4gICAgICAgICAgICByb3RhdGlvbjogcm90YXRpb25Db25zdHJhaW50LFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFJvdGF0aW9uKG9wdGlvbnMucm90YXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucm90YXRpb24gOiAwKTtcbiAgICAgICAgdGhpcy5zZXRDZW50ZXJJbnRlcm5hbChvcHRpb25zLmNlbnRlciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jZW50ZXIgOiBudWxsKTtcbiAgICAgICAgaWYgKG9wdGlvbnMucmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFJlc29sdXRpb24ob3B0aW9ucy5yZXNvbHV0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLnpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRab29tKG9wdGlvbnMuem9vbSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge1ZpZXdPcHRpb25zfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcHRpb25zXyA9IG9wdGlvbnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYW4gdXBkYXRlZCB2ZXJzaW9uIG9mIHRoZSB2aWV3IG9wdGlvbnMgdXNlZCB0byBjb25zdHJ1Y3QgdGhlIHZpZXcuICBUaGVcbiAgICAgKiBjdXJyZW50IHJlc29sdXRpb24gKG9yIHpvb20pLCBjZW50ZXIsIGFuZCByb3RhdGlvbiBhcmUgYXBwbGllZCB0byBhbnkgc3RvcmVkXG4gICAgICogb3B0aW9ucy4gIFRoZSBwcm92aWRlZCBvcHRpb25zIGNhbiBiZSB1c2VkIHRvIGFwcGx5IG5ldyBtaW4vbWF4IHpvb20gb3JcbiAgICAgKiByZXNvbHV0aW9uIGxpbWl0cy5cbiAgICAgKiBAcGFyYW0ge1ZpZXdPcHRpb25zfSBuZXdPcHRpb25zIE5ldyBvcHRpb25zIHRvIGJlIGFwcGxpZWQuXG4gICAgICogQHJldHVybiB7Vmlld09wdGlvbnN9IE5ldyBvcHRpb25zIHVwZGF0ZWQgd2l0aCB0aGUgY3VycmVudCB2aWV3IHN0YXRlLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFVwZGF0ZWRPcHRpb25zXyA9IGZ1bmN0aW9uIChuZXdPcHRpb25zKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gYXNzaWduKHt9LCB0aGlzLm9wdGlvbnNfKTtcbiAgICAgICAgLy8gcHJlc2VydmUgcmVzb2x1dGlvbiAob3Igem9vbSlcbiAgICAgICAgaWYgKG9wdGlvbnMucmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRpb25zLnJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMuem9vbSA9IHRoaXMuZ2V0Wm9vbSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHByZXNlcnZlIGNlbnRlclxuICAgICAgICBvcHRpb25zLmNlbnRlciA9IHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKTtcbiAgICAgICAgLy8gcHJlc2VydmUgcm90YXRpb25cbiAgICAgICAgb3B0aW9ucy5yb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgcmV0dXJuIGFzc2lnbih7fSwgb3B0aW9ucywgbmV3T3B0aW9ucyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBbmltYXRlIHRoZSB2aWV3LiAgVGhlIHZpZXcncyBjZW50ZXIsIHpvb20gKG9yIHJlc29sdXRpb24pLCBhbmQgcm90YXRpb25cbiAgICAgKiBjYW4gYmUgYW5pbWF0ZWQgZm9yIHNtb290aCB0cmFuc2l0aW9ucyBiZXR3ZWVuIHZpZXcgc3RhdGVzLiAgRm9yIGV4YW1wbGUsXG4gICAgICogdG8gYW5pbWF0ZSB0aGUgdmlldyB0byBhIG5ldyB6b29tIGxldmVsOlxuICAgICAqXG4gICAgICogICAgIHZpZXcuYW5pbWF0ZSh7em9vbTogdmlldy5nZXRab29tKCkgKyAxfSk7XG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCB0aGUgYW5pbWF0aW9uIGxhc3RzIG9uZSBzZWNvbmQgYW5kIHVzZXMgaW4tYW5kLW91dCBlYXNpbmcuICBZb3VcbiAgICAgKiBjYW4gY3VzdG9taXplIHRoaXMgYmVoYXZpb3IgYnkgaW5jbHVkaW5nIGBkdXJhdGlvbmAgKGluIG1pbGxpc2Vjb25kcykgYW5kXG4gICAgICogYGVhc2luZ2Agb3B0aW9ucyAoc2VlIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nfSkuXG4gICAgICpcbiAgICAgKiBUbyBjaGFpbiB0b2dldGhlciBtdWx0aXBsZSBhbmltYXRpb25zLCBjYWxsIHRoZSBtZXRob2Qgd2l0aCBtdWx0aXBsZVxuICAgICAqIGFuaW1hdGlvbiBvYmplY3RzLiAgRm9yIGV4YW1wbGUsIHRvIGZpcnN0IHpvb20gYW5kIHRoZW4gcGFuOlxuICAgICAqXG4gICAgICogICAgIHZpZXcuYW5pbWF0ZSh7em9vbTogMTB9LCB7Y2VudGVyOiBbMCwgMF19KTtcbiAgICAgKlxuICAgICAqIElmIHlvdSBwcm92aWRlIGEgZnVuY3Rpb24gYXMgdGhlIGxhc3QgYXJndW1lbnQgdG8gdGhlIGFuaW1hdGUgbWV0aG9kLCBpdFxuICAgICAqIHdpbGwgZ2V0IGNhbGxlZCBhdCB0aGUgZW5kIG9mIGFuIGFuaW1hdGlvbiBzZXJpZXMuICBUaGUgY2FsbGJhY2sgd2lsbCBiZVxuICAgICAqIGNhbGxlZCB3aXRoIGB0cnVlYCBpZiB0aGUgYW5pbWF0aW9uIHNlcmllcyBjb21wbGV0ZWQgb24gaXRzIG93biBvciBgZmFsc2VgXG4gICAgICogaWYgaXQgd2FzIGNhbmNlbGxlZC5cbiAgICAgKlxuICAgICAqIEFuaW1hdGlvbnMgYXJlIGNhbmNlbGxlZCBieSB1c2VyIGludGVyYWN0aW9ucyAoZS5nLiBkcmFnZ2luZyB0aGUgbWFwKSBvciBieVxuICAgICAqIGNhbGxpbmcgYHZpZXcuc2V0Q2VudGVyKClgLCBgdmlldy5zZXRSZXNvbHV0aW9uKClgLCBvciBgdmlldy5zZXRSb3RhdGlvbigpYFxuICAgICAqIChvciBhbm90aGVyIG1ldGhvZCB0aGF0IGNhbGxzIG9uZSBvZiB0aGVzZSkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gey4uLihBbmltYXRpb25PcHRpb25zfGZ1bmN0aW9uKGJvb2xlYW4pOiB2b2lkKX0gdmFyX2FyZ3MgQW5pbWF0aW9uXG4gICAgICogICAgIG9wdGlvbnMuICBNdWx0aXBsZSBhbmltYXRpb25zIGNhbiBiZSBydW4gaW4gc2VyaWVzIGJ5IHBhc3NpbmcgbXVsdGlwbGVcbiAgICAgKiAgICAgb3B0aW9ucyBvYmplY3RzLiAgVG8gcnVuIG11bHRpcGxlIGFuaW1hdGlvbnMgaW4gcGFyYWxsZWwsIGNhbGwgdGhlIG1ldGhvZFxuICAgICAqICAgICBtdWx0aXBsZSB0aW1lcy4gIEFuIG9wdGlvbmFsIGNhbGxiYWNrIGNhbiBiZSBwcm92aWRlZCBhcyBhIGZpbmFsXG4gICAgICogICAgIGFyZ3VtZW50LiAgVGhlIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHdpdGggYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlclxuICAgICAqICAgICB0aGUgYW5pbWF0aW9uIGNvbXBsZXRlZCB3aXRob3V0IGJlaW5nIGNhbmNlbGxlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICh2YXJfYXJncykge1xuICAgICAgICBpZiAodGhpcy5pc0RlZigpICYmICF0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVDb25zdHJhaW50cygwKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2VudGVyID0gZnJvbVVzZXJDb29yZGluYXRlKG9wdGlvbnMuY2VudGVyLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hbmNob3IpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmFuY2hvciA9IGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRpb25zLmFuY2hvciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXJnc1tpXSA9IG9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hbmltYXRlSW50ZXJuYWwuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gey4uLihBbmltYXRpb25PcHRpb25zfGZ1bmN0aW9uKGJvb2xlYW4pOiB2b2lkKX0gdmFyX2FyZ3MgQW5pbWF0aW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYW5pbWF0ZUludGVybmFsID0gZnVuY3Rpb24gKHZhcl9hcmdzKSB7XG4gICAgICAgIHZhciBhbmltYXRpb25Db3VudCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIHZhciBjYWxsYmFjaztcbiAgICAgICAgaWYgKGFuaW1hdGlvbkNvdW50ID4gMSAmJlxuICAgICAgICAgICAgdHlwZW9mIGFyZ3VtZW50c1thbmltYXRpb25Db3VudCAtIDFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IGFyZ3VtZW50c1thbmltYXRpb25Db3VudCAtIDFdO1xuICAgICAgICAgICAgLS1hbmltYXRpb25Db3VudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNEZWYoKSkge1xuICAgICAgICAgICAgLy8gaWYgdmlldyBwcm9wZXJ0aWVzIGFyZSBub3QgeWV0IHNldCwgc2hvcnRjdXQgdG8gdGhlIGZpbmFsIHN0YXRlXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSBhcmd1bWVudHNbYW5pbWF0aW9uQ291bnQgLSAxXTtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5jZW50ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENlbnRlckludGVybmFsKHN0YXRlLmNlbnRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdGUuem9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRab29tKHN0YXRlLnpvb20pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlLnJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJvdGF0aW9uKHN0YXRlLnJvdGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkNhbGxiYWNrKGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICB2YXIgY2VudGVyID0gdGhpcy50YXJnZXRDZW50ZXJfLnNsaWNlKCk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy50YXJnZXRSZXNvbHV0aW9uXztcbiAgICAgICAgdmFyIHJvdGF0aW9uID0gdGhpcy50YXJnZXRSb3RhdGlvbl87XG4gICAgICAgIHZhciBzZXJpZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbmltYXRpb25Db3VudDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IC8qKiBAdHlwZSB7QW5pbWF0aW9uT3B0aW9uc30gKi8gKGFyZ3VtZW50c1tpXSk7XG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0ge1xuICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgYW5jaG9yOiBvcHRpb25zLmFuY2hvcixcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDAsXG4gICAgICAgICAgICAgICAgZWFzaW5nOiBvcHRpb25zLmVhc2luZyB8fCBpbkFuZE91dCxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2ssXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2VudGVyKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnNvdXJjZUNlbnRlciA9IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24udGFyZ2V0Q2VudGVyID0gb3B0aW9ucy5jZW50ZXIuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICBjZW50ZXIgPSBhbmltYXRpb24udGFyZ2V0Q2VudGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuem9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbShvcHRpb25zLnpvb20pO1xuICAgICAgICAgICAgICAgIHJlc29sdXRpb24gPSBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMucmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiA9IG9wdGlvbnMucmVzb2x1dGlvbjtcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uID0gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uID0gcm90YXRpb247XG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gbW9kdWxvKG9wdGlvbnMucm90YXRpb24gLSByb3RhdGlvbiArIE1hdGguUEksIDIgKiBNYXRoLlBJKSAtIE1hdGguUEk7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uID0gcm90YXRpb24gKyBkZWx0YTtcbiAgICAgICAgICAgICAgICByb3RhdGlvbiA9IGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIGFuaW1hdGlvbiBpcyBhIG5vLW9wXG4gICAgICAgICAgICBpZiAoaXNOb29wQW5pbWF0aW9uKGFuaW1hdGlvbikpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24uY29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIHdlIHN0aWxsIHB1c2ggaXQgb250byB0aGUgc2VyaWVzIGZvciBjYWxsYmFjayBoYW5kbGluZ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RhcnQgKz0gYW5pbWF0aW9uLmR1cmF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VyaWVzLnB1c2goYW5pbWF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW1hdGlvbnNfLnB1c2goc2VyaWVzKTtcbiAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgMSk7XG4gICAgICAgIHRoaXMudXBkYXRlQW5pbWF0aW9uc18oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVybWluZSBpZiB0aGUgdmlldyBpcyBiZWluZyBhbmltYXRlZC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdmlldyBpcyBiZWluZyBhbmltYXRlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0QW5pbWF0aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaW50c19bVmlld0hpbnQuQU5JTUFUSU5HXSA+IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgaWYgdGhlIHVzZXIgaXMgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgdmlldywgc3VjaCBhcyBwYW5uaW5nIG9yIHpvb21pbmcuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHZpZXcgaXMgYmVpbmcgaW50ZXJhY3RlZCB3aXRoLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRJbnRlcmFjdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGludHNfW1ZpZXdIaW50LklOVEVSQUNUSU5HXSA+IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYW5jZWwgYW55IG9uZ29pbmcgYW5pbWF0aW9ucy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2FuY2VsQW5pbWF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgLXRoaXMuaGludHNfW1ZpZXdIaW50LkFOSU1BVElOR10pO1xuICAgICAgICB2YXIgYW5jaG9yO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmFuaW1hdGlvbnNfLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBzZXJpZXMgPSB0aGlzLmFuaW1hdGlvbnNfW2ldO1xuICAgICAgICAgICAgaWYgKHNlcmllc1swXS5jYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkNhbGxiYWNrKHNlcmllc1swXS5jYWxsYmFjaywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFhbmNob3IpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamogPSBzZXJpZXMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gc2VyaWVzW2pdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFuaW1hdGlvbi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5jaG9yID0gYW5pbWF0aW9uLmFuY2hvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uc18ubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5jYW5jZWxBbmNob3JfID0gYW5jaG9yO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVXBkYXRlIGFsbCBhbmltYXRpb25zLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnVwZGF0ZUFuaW1hdGlvbnNfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy51cGRhdGVBbmltYXRpb25LZXlfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIHZhciBtb3JlID0gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLmFuaW1hdGlvbnNfLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICB2YXIgc2VyaWVzID0gdGhpcy5hbmltYXRpb25zX1tpXTtcbiAgICAgICAgICAgIHZhciBzZXJpZXNDb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamogPSBzZXJpZXMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgICAgIHZhciBhbmltYXRpb24gPSBzZXJpZXNbal07XG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGVsYXBzZWQgPSBub3cgLSBhbmltYXRpb24uc3RhcnQ7XG4gICAgICAgICAgICAgICAgdmFyIGZyYWN0aW9uID0gYW5pbWF0aW9uLmR1cmF0aW9uID4gMCA/IGVsYXBzZWQgLyBhbmltYXRpb24uZHVyYXRpb24gOiAxO1xuICAgICAgICAgICAgICAgIGlmIChmcmFjdGlvbiA+PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZyYWN0aW9uID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcmllc0NvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwcm9ncmVzcyA9IGFuaW1hdGlvbi5lYXNpbmcoZnJhY3Rpb24pO1xuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uc291cmNlQ2VudGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4MCA9IGFuaW1hdGlvbi5zb3VyY2VDZW50ZXJbMF07XG4gICAgICAgICAgICAgICAgICAgIHZhciB5MCA9IGFuaW1hdGlvbi5zb3VyY2VDZW50ZXJbMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciB4MSA9IGFuaW1hdGlvbi50YXJnZXRDZW50ZXJbMF07XG4gICAgICAgICAgICAgICAgICAgIHZhciB5MSA9IGFuaW1hdGlvbi50YXJnZXRDZW50ZXJbMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0geDAgKyBwcm9ncmVzcyAqICh4MSAtIHgwKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSB5MCArIHByb2dyZXNzICogKHkxIC0geTApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSBbeCwgeV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiAmJiBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHByb2dyZXNzID09PSAxXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiAtIGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5hbmNob3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uc3RyYWluZWRSZXNvbHV0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucmVzb2x1dGlvbihyZXNvbHV0aW9uLCAwLCBzaXplLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyWm9vbShjb25zdHJhaW5lZFJlc29sdXRpb24sIGFuaW1hdGlvbi5hbmNob3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvdGF0aW9uID0gcHJvZ3Jlc3MgPT09IDFcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbW9kdWxvKGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiArIE1hdGguUEksIDIgKiBNYXRoLlBJKSAtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5QSVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBhbmltYXRpb24uc291cmNlUm90YXRpb24gK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiAtIGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uYW5jaG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uc3RyYWluZWRSb3RhdGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJvdGF0aW9uKHJvdGF0aW9uLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyUm90YXRlKGNvbnN0cmFpbmVkUm90YXRpb24sIGFuaW1hdGlvbi5hbmNob3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0Um90YXRpb25fID0gcm90YXRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8odHJ1ZSk7XG4gICAgICAgICAgICAgICAgbW9yZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCFhbmltYXRpb24uY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlcmllc0NvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25zX1tpXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgLTEpO1xuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IHNlcmllc1swXS5jYWxsYmFjaztcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uQ2FsbGJhY2soY2FsbGJhY2ssIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBwcnVuZSBjb21wbGV0ZWQgc2VyaWVzXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uc18gPSB0aGlzLmFuaW1hdGlvbnNfLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgaWYgKG1vcmUgJiYgdGhpcy51cGRhdGVBbmltYXRpb25LZXlfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZUFuaW1hdGlvbnNfLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gVGFyZ2V0IHJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFuY2hvciBSb3RhdGlvbiBhbmNob3IuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBDZW50ZXIgZm9yIHJvdGF0aW9uIGFuZCBhbmNob3IuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2FsY3VsYXRlQ2VudGVyUm90YXRlID0gZnVuY3Rpb24gKHJvdGF0aW9uLCBhbmNob3IpIHtcbiAgICAgICAgdmFyIGNlbnRlcjtcbiAgICAgICAgdmFyIGN1cnJlbnRDZW50ZXIgPSB0aGlzLmdldENlbnRlckludGVybmFsKCk7XG4gICAgICAgIGlmIChjdXJyZW50Q2VudGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNlbnRlciA9IFtjdXJyZW50Q2VudGVyWzBdIC0gYW5jaG9yWzBdLCBjdXJyZW50Q2VudGVyWzFdIC0gYW5jaG9yWzFdXTtcbiAgICAgICAgICAgIHJvdGF0ZUNvb3JkaW5hdGUoY2VudGVyLCByb3RhdGlvbiAtIHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgICAgICBhZGRDb29yZGluYXRlKGNlbnRlciwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2VudGVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYW5jaG9yIFpvb20gYW5jaG9yLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gQ2VudGVyIGZvciByZXNvbHV0aW9uIGFuZCBhbmNob3IuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2FsY3VsYXRlQ2VudGVyWm9vbSA9IGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBhbmNob3IpIHtcbiAgICAgICAgdmFyIGNlbnRlcjtcbiAgICAgICAgdmFyIGN1cnJlbnRDZW50ZXIgPSB0aGlzLmdldENlbnRlckludGVybmFsKCk7XG4gICAgICAgIHZhciBjdXJyZW50UmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbigpO1xuICAgICAgICBpZiAoY3VycmVudENlbnRlciAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciB4ID0gYW5jaG9yWzBdIC1cbiAgICAgICAgICAgICAgICAocmVzb2x1dGlvbiAqIChhbmNob3JbMF0gLSBjdXJyZW50Q2VudGVyWzBdKSkgLyBjdXJyZW50UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB5ID0gYW5jaG9yWzFdIC1cbiAgICAgICAgICAgICAgICAocmVzb2x1dGlvbiAqIChhbmNob3JbMV0gLSBjdXJyZW50Q2VudGVyWzFdKSkgLyBjdXJyZW50UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIGNlbnRlciA9IFt4LCB5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2VudGVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCB2aWV3cG9ydCBzaXplLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfcm90YXRpb24gVGFrZSBpbnRvIGFjY291bnQgdGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3cG9ydCB3aGVuIGdpdmluZyB0aGUgc2l6ZVxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBWaWV3cG9ydCBzaXplIG9yIGBbMTAwLCAxMDBdYCB3aGVuIG5vIHZpZXdwb3J0IGlzIGZvdW5kLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFZpZXdwb3J0U2l6ZV8gPSBmdW5jdGlvbiAob3B0X3JvdGF0aW9uKSB7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy52aWV3cG9ydFNpemVfO1xuICAgICAgICBpZiAob3B0X3JvdGF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgdyA9IHNpemVbMF07XG4gICAgICAgICAgICB2YXIgaCA9IHNpemVbMV07XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIE1hdGguYWJzKHcgKiBNYXRoLmNvcyhvcHRfcm90YXRpb24pKSArXG4gICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKGggKiBNYXRoLnNpbihvcHRfcm90YXRpb24pKSxcbiAgICAgICAgICAgICAgICBNYXRoLmFicyh3ICogTWF0aC5zaW4ob3B0X3JvdGF0aW9uKSkgK1xuICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyhoICogTWF0aC5jb3Mob3B0X3JvdGF0aW9uKSksXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFN0b3JlcyB0aGUgdmlld3BvcnQgc2l6ZSBvbiB0aGUgdmlldy4gVGhlIHZpZXdwb3J0IHNpemUgaXMgbm90IHJlYWQgZXZlcnkgdGltZSBmcm9tIHRoZSBET01cbiAgICAgKiB0byBhdm9pZCBwZXJmb3JtYW5jZSBoaXQgYW5kIGxheW91dCByZWZsb3cuXG4gICAgICogVGhpcyBzaG91bGQgYmUgZG9uZSBvbiBtYXAgc2l6ZSBjaGFuZ2UuXG4gICAgICogTm90ZTogdGhlIGNvbnN0cmFpbnRzIGFyZSBub3QgcmVzb2x2ZWQgZHVyaW5nIGFuIGFuaW1hdGlvbiB0byBhdm9pZCBzdG9wcGluZyBpdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemU9fSBvcHRfc2l6ZSBWaWV3cG9ydCBzaXplOyBpZiB1bmRlZmluZWQsIFsxMDAsIDEwMF0gaXMgYXNzdW1lZFxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldFZpZXdwb3J0U2l6ZSA9IGZ1bmN0aW9uIChvcHRfc2l6ZSkge1xuICAgICAgICB0aGlzLnZpZXdwb3J0U2l6ZV8gPSBBcnJheS5pc0FycmF5KG9wdF9zaXplKVxuICAgICAgICAgICAgPyBvcHRfc2l6ZS5zbGljZSgpXG4gICAgICAgICAgICA6IFsxMDAsIDEwMF07XG4gICAgICAgIGlmICghdGhpcy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlQ29uc3RyYWludHMoMCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmlldyBjZW50ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBUaGUgY2VudGVyIG9mIHRoZSB2aWV3LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldENlbnRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNlbnRlciA9IHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKTtcbiAgICAgICAgaWYgKCFjZW50ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvVXNlckNvb3JkaW5hdGUoY2VudGVyLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZpZXcgY2VudGVyIHdpdGhvdXQgdHJhbnNmb3JtaW5nIHRvIHVzZXIgcHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Q2VudGVySW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0NvbnN0cmFpbnRzfSBDb25zdHJhaW50cy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRDb25zdHJhaW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RyYWludHNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gUmVzb2x1dGlvbiBjb25zdHJhaW50IGlzIHNldFxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldENvbnN0cmFpblJlc29sdXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNfLmNvbnN0cmFpblJlc29sdXRpb247XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfaGludHMgRGVzdGluYXRpb24gYXJyYXkuXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gSGludC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRIaW50cyA9IGZ1bmN0aW9uIChvcHRfaGludHMpIHtcbiAgICAgICAgaWYgKG9wdF9oaW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRfaGludHNbMF0gPSB0aGlzLmhpbnRzX1swXTtcbiAgICAgICAgICAgIG9wdF9oaW50c1sxXSA9IHRoaXMuaGludHNfWzFdO1xuICAgICAgICAgICAgcmV0dXJuIG9wdF9oaW50cztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhpbnRzXy5zbGljZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIGV4dGVudCBmb3IgdGhlIGN1cnJlbnQgdmlldyBzdGF0ZSBhbmQgdGhlIHBhc3NlZCBzaXplLlxuICAgICAqIFRoZSBzaXplIGlzIHRoZSBwaXhlbCBkaW1lbnNpb25zIG9mIHRoZSBib3ggaW50byB3aGljaCB0aGUgY2FsY3VsYXRlZCBleHRlbnRcbiAgICAgKiBzaG91bGQgZml0LiBJbiBtb3N0IGNhc2VzIHlvdSB3YW50IHRvIGdldCB0aGUgZXh0ZW50IG9mIHRoZSBlbnRpcmUgbWFwLFxuICAgICAqIHRoYXQgaXMgYG1hcC5nZXRTaXplKClgLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemU9fSBvcHRfc2l6ZSBCb3ggcGl4ZWwgc2l6ZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgc2l6ZVxuICAgICAqIG9mIHRoZSBtYXAgdGhhdCB1c2VzIHRoaXMgdmlldyB3aWxsIGJlIHVzZWQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmNhbGN1bGF0ZUV4dGVudCA9IGZ1bmN0aW9uIChvcHRfc2l6ZSkge1xuICAgICAgICB2YXIgZXh0ZW50ID0gdGhpcy5jYWxjdWxhdGVFeHRlbnRJbnRlcm5hbChvcHRfc2l6ZSk7XG4gICAgICAgIHJldHVybiB0b1VzZXJFeHRlbnQoZXh0ZW50LCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplPX0gb3B0X3NpemUgQm94IHBpeGVsIHNpemUuIElmIG5vdCBwcm92aWRlZCxcbiAgICAgKiB0aGUgbWFwJ3MgbGFzdCBrbm93biB2aWV3cG9ydCBzaXplIHdpbGwgYmUgdXNlZC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5jYWxjdWxhdGVFeHRlbnRJbnRlcm5hbCA9IGZ1bmN0aW9uIChvcHRfc2l6ZSkge1xuICAgICAgICB2YXIgc2l6ZSA9IG9wdF9zaXplIHx8IHRoaXMuZ2V0Vmlld3BvcnRTaXplXygpO1xuICAgICAgICB2YXIgY2VudGVyID0gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9ICovICh0aGlzLmdldENlbnRlckludGVybmFsKCkpO1xuICAgICAgICBhc3NlcnQoY2VudGVyLCAxKTsgLy8gVGhlIHZpZXcgY2VudGVyIGlzIG5vdCBkZWZpbmVkXG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gLyoqIEB0eXBlIHshbnVtYmVyfSAqLyAodGhpcy5nZXRSZXNvbHV0aW9uKCkpO1xuICAgICAgICBhc3NlcnQocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkLCAyKTsgLy8gVGhlIHZpZXcgcmVzb2x1dGlvbiBpcyBub3QgZGVmaW5lZFxuICAgICAgICB2YXIgcm90YXRpb24gPSAvKiogQHR5cGUgeyFudW1iZXJ9ICovICh0aGlzLmdldFJvdGF0aW9uKCkpO1xuICAgICAgICBhc3NlcnQocm90YXRpb24gIT09IHVuZGVmaW5lZCwgMyk7IC8vIFRoZSB2aWV3IHJvdGF0aW9uIGlzIG5vdCBkZWZpbmVkXG4gICAgICAgIHJldHVybiBnZXRGb3JWaWV3QW5kU2l6ZShjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBzaXplKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0TWF4UmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4UmVzb2x1dGlvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtaW5pbXVtIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldE1pblJlc29sdXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pblJlc29sdXRpb25fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSB2aWV3LlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1heGltdW0gem9vbSBsZXZlbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0TWF4Wm9vbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXRab29tRm9yUmVzb2x1dGlvbih0aGlzLm1pblJlc29sdXRpb25fKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgYSBuZXcgbWF4aW11bSB6b29tIGxldmVsIGZvciB0aGUgdmlldy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBUaGUgbWF4aW11bSB6b29tIGxldmVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRNYXhab29tID0gZnVuY3Rpb24gKHpvb20pIHtcbiAgICAgICAgdGhpcy5hcHBseU9wdGlvbnNfKHRoaXMuZ2V0VXBkYXRlZE9wdGlvbnNfKHsgbWF4Wm9vbTogem9vbSB9KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWluaW11bSB6b29tIGxldmVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRNaW5ab29tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHRoaXMubWF4UmVzb2x1dGlvbl8pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCBhIG5ldyBtaW5pbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldE1pblpvb20gPSBmdW5jdGlvbiAoem9vbSkge1xuICAgICAgICB0aGlzLmFwcGx5T3B0aW9uc18odGhpcy5nZXRVcGRhdGVkT3B0aW9uc18oeyBtaW5ab29tOiB6b29tIH0pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoZSB2aWV3IHNob3VkIGFsbG93IGludGVybWVkaWFyeSB6b29tIGxldmVscy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZWQgV2hldGhlciB0aGUgcmVzb2x1dGlvbiBpcyBjb25zdHJhaW5lZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0Q29uc3RyYWluUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChlbmFibGVkKSB7XG4gICAgICAgIHRoaXMuYXBwbHlPcHRpb25zXyh0aGlzLmdldFVwZGF0ZWRPcHRpb25zXyh7IGNvbnN0cmFpblJlc29sdXRpb246IGVuYWJsZWQgfSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2aWV3IHByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gVGhlIHByb2plY3Rpb24gb2YgdGhlIHZpZXcuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFByb2plY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3Rpb25fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2aWV3IHJlc29sdXRpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5SRVNPTFVUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJlc29sdXRpb25zIGZvciB0aGUgdmlldy4gVGhpcyByZXR1cm5zIHRoZSBhcnJheSBvZiByZXNvbHV0aW9uc1xuICAgICAqIHBhc3NlZCB0byB0aGUgY29uc3RydWN0b3Igb2YgdGhlIFZpZXcsIG9yIHVuZGVmaW5lZCBpZiBub25lIHdlcmUgZ2l2ZW4uXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9IFRoZSByZXNvbHV0aW9ucyBvZiB0aGUgdmlldy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdXRpb25zXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcmVzb2x1dGlvbiBmb3IgYSBwcm92aWRlZCBleHRlbnQgKGluIG1hcCB1bml0cykgYW5kIHNpemUgKGluIHBpeGVscykuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZT19IG9wdF9zaXplIEJveCBwaXhlbCBzaXplLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIHJlc29sdXRpb24gYXQgd2hpY2ggdGhlIHByb3ZpZGVkIGV4dGVudCB3aWxsIHJlbmRlciBhdFxuICAgICAqICAgICB0aGUgZ2l2ZW4gc2l6ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbkZvckV4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQsIG9wdF9zaXplKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlc29sdXRpb25Gb3JFeHRlbnRJbnRlcm5hbChmcm9tVXNlckV4dGVudChleHRlbnQsIHRoaXMuZ2V0UHJvamVjdGlvbigpKSwgb3B0X3NpemUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSByZXNvbHV0aW9uIGZvciBhIHByb3ZpZGVkIGV4dGVudCAoaW4gbWFwIHVuaXRzKSBhbmQgc2l6ZSAoaW4gcGl4ZWxzKS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplPX0gb3B0X3NpemUgQm94IHBpeGVsIHNpemUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgcmVzb2x1dGlvbiBhdCB3aGljaCB0aGUgcHJvdmlkZWQgZXh0ZW50IHdpbGwgcmVuZGVyIGF0XG4gICAgICogICAgIHRoZSBnaXZlbiBzaXplLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFJlc29sdXRpb25Gb3JFeHRlbnRJbnRlcm5hbCA9IGZ1bmN0aW9uIChleHRlbnQsIG9wdF9zaXplKSB7XG4gICAgICAgIHZhciBzaXplID0gb3B0X3NpemUgfHwgdGhpcy5nZXRWaWV3cG9ydFNpemVfKCk7XG4gICAgICAgIHZhciB4UmVzb2x1dGlvbiA9IGdldFdpZHRoKGV4dGVudCkgLyBzaXplWzBdO1xuICAgICAgICB2YXIgeVJlc29sdXRpb24gPSBnZXRIZWlnaHQoZXh0ZW50KSAvIHNpemVbMV07XG4gICAgICAgIHJldHVybiBNYXRoLm1heCh4UmVzb2x1dGlvbiwgeVJlc29sdXRpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxIGZvciBhXG4gICAgICogcmVzb2x1dGlvbi4gRXhwb25lbnRpYWwgc2NhbGluZyBpcyBhc3N1bWVkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3Bvd2VyIFBvd2VyLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlcik6IG51bWJlcn0gUmVzb2x1dGlvbiBmb3IgdmFsdWUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbkZvclZhbHVlRnVuY3Rpb24gPSBmdW5jdGlvbiAob3B0X3Bvd2VyKSB7XG4gICAgICAgIHZhciBwb3dlciA9IG9wdF9wb3dlciB8fCAyO1xuICAgICAgICB2YXIgbWF4UmVzb2x1dGlvbiA9IHRoaXMuZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uKHRoaXMubWF4UmVzb2x1dGlvbl8pO1xuICAgICAgICB2YXIgbWluUmVzb2x1dGlvbiA9IHRoaXMubWluUmVzb2x1dGlvbl87XG4gICAgICAgIHZhciBtYXggPSBNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gbWluUmVzb2x1dGlvbikgLyBNYXRoLmxvZyhwb3dlcik7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUuXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gUmVzb2x1dGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHJlc29sdXRpb24gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3cocG93ZXIsIHZhbHVlICogbWF4KTtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHV0aW9uO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmlldyByb3RhdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSByb3RhdGlvbiBvZiB0aGUgdmlldyBpbiByYWRpYW5zLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFJvdGF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChWaWV3UHJvcGVydHkuUk9UQVRJT04pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHJlc29sdXRpb24gZm9yIGEgdmFsdWUgYmV0d2VlblxuICAgICAqIDAgYW5kIDEuIEV4cG9uZW50aWFsIHNjYWxpbmcgaXMgYXNzdW1lZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9wb3dlciBQb3dlci5cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbihudW1iZXIpOiBudW1iZXJ9IFZhbHVlIGZvciByZXNvbHV0aW9uIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFZhbHVlRm9yUmVzb2x1dGlvbkZ1bmN0aW9uID0gZnVuY3Rpb24gKG9wdF9wb3dlcikge1xuICAgICAgICB2YXIgbG9nUG93ZXIgPSBNYXRoLmxvZyhvcHRfcG93ZXIgfHwgMik7XG4gICAgICAgIHZhciBtYXhSZXNvbHV0aW9uID0gdGhpcy5nZXRDb25zdHJhaW5lZFJlc29sdXRpb24odGhpcy5tYXhSZXNvbHV0aW9uXyk7XG4gICAgICAgIHZhciBtaW5SZXNvbHV0aW9uID0gdGhpcy5taW5SZXNvbHV0aW9uXztcbiAgICAgICAgdmFyIG1heCA9IE1hdGgubG9nKG1heFJlc29sdXRpb24gLyBtaW5SZXNvbHV0aW9uKSAvIGxvZ1Bvd2VyO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSBWYWx1ZS5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChyZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gcmVzb2x1dGlvbikgLyBsb2dQb3dlciAvIG1heDtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzaXplIG9mIHRoZSB2aWV3cG9ydCBtaW51cyBwYWRkaW5nLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfcm90YXRpb24gVGFrZSBpbnRvIGFjY291bnQgdGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3cG9ydCB3aGVuIGdpdmluZyB0aGUgc2l6ZVxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBWaWV3cG9ydCBzaXplIHJlZHVjZWQgYnkgdGhlIHBhZGRpbmcuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXyA9IGZ1bmN0aW9uIChvcHRfcm90YXRpb24pIHtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8ob3B0X3JvdGF0aW9uKTtcbiAgICAgICAgdmFyIHBhZGRpbmcgPSB0aGlzLnBhZGRpbmc7XG4gICAgICAgIGlmIChwYWRkaW5nKSB7XG4gICAgICAgICAgICBzaXplID0gW1xuICAgICAgICAgICAgICAgIHNpemVbMF0gLSBwYWRkaW5nWzFdIC0gcGFkZGluZ1szXSxcbiAgICAgICAgICAgICAgICBzaXplWzFdIC0gcGFkZGluZ1swXSAtIHBhZGRpbmdbMl0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaXplO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7U3RhdGV9IFZpZXcgc3RhdGUuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldFJlc29sdXRpb24oKSk7XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgdmFyIGNlbnRlciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9ICovICh0aGlzLmdldENlbnRlckludGVybmFsKCkpO1xuICAgICAgICB2YXIgcGFkZGluZyA9IHRoaXMucGFkZGluZztcbiAgICAgICAgaWYgKHBhZGRpbmcpIHtcbiAgICAgICAgICAgIHZhciByZWR1Y2VkU2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXygpO1xuICAgICAgICAgICAgY2VudGVyID0gY2FsY3VsYXRlQ2VudGVyT24oY2VudGVyLCB0aGlzLmdldFZpZXdwb3J0U2l6ZV8oKSwgW3JlZHVjZWRTaXplWzBdIC8gMiArIHBhZGRpbmdbM10sIHJlZHVjZWRTaXplWzFdIC8gMiArIHBhZGRpbmdbMF1dLCByZXNvbHV0aW9uLCByb3RhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNlbnRlcjogY2VudGVyLnNsaWNlKDApLFxuICAgICAgICAgICAgcHJvamVjdGlvbjogcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gcHJvamVjdGlvbiA6IG51bGwsXG4gICAgICAgICAgICByZXNvbHV0aW9uOiByZXNvbHV0aW9uLFxuICAgICAgICAgICAgcm90YXRpb246IHJvdGF0aW9uLFxuICAgICAgICAgICAgem9vbTogdGhpcy5nZXRab29tKCksXG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgem9vbSBsZXZlbC4gVGhpcyBtZXRob2QgbWF5IHJldHVybiBub24taW50ZWdlciB6b29tIGxldmVsc1xuICAgICAqIGlmIHRoZSB2aWV3IGRvZXMgbm90IGNvbnN0cmFpbiB0aGUgcmVzb2x1dGlvbiwgb3IgaWYgYW4gaW50ZXJhY3Rpb24gb3JcbiAgICAgKiBhbmltYXRpb24gaXMgdW5kZXJ3YXkuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gWm9vbS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Wm9vbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHpvb207XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgICAgIGlmIChyZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHpvb20gPSB0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHJlc29sdXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB6b29tO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB6b29tIGxldmVsIGZvciBhIHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gVGhlIHJlc29sdXRpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIHpvb20gbGV2ZWwgZm9yIHRoZSBwcm92aWRlZCByZXNvbHV0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRab29tRm9yUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChyZXNvbHV0aW9uKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLm1pblpvb21fIHx8IDA7XG4gICAgICAgIHZhciBtYXgsIHpvb21GYWN0b3I7XG4gICAgICAgIGlmICh0aGlzLnJlc29sdXRpb25zXykge1xuICAgICAgICAgICAgdmFyIG5lYXJlc3QgPSBsaW5lYXJGaW5kTmVhcmVzdCh0aGlzLnJlc29sdXRpb25zXywgcmVzb2x1dGlvbiwgMSk7XG4gICAgICAgICAgICBvZmZzZXQgPSBuZWFyZXN0O1xuICAgICAgICAgICAgbWF4ID0gdGhpcy5yZXNvbHV0aW9uc19bbmVhcmVzdF07XG4gICAgICAgICAgICBpZiAobmVhcmVzdCA9PSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgem9vbUZhY3RvciA9IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB6b29tRmFjdG9yID0gbWF4IC8gdGhpcy5yZXNvbHV0aW9uc19bbmVhcmVzdCArIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWF4ID0gdGhpcy5tYXhSZXNvbHV0aW9uXztcbiAgICAgICAgICAgIHpvb21GYWN0b3IgPSB0aGlzLnpvb21GYWN0b3JfO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvZmZzZXQgKyBNYXRoLmxvZyhtYXggLyByZXNvbHV0aW9uKSAvIE1hdGgubG9nKHpvb21GYWN0b3IpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSByZXNvbHV0aW9uIGZvciBhIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gWm9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSB2aWV3IHJlc29sdXRpb24gZm9yIHRoZSBwcm92aWRlZCB6b29tIGxldmVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yWm9vbSA9IGZ1bmN0aW9uICh6b29tKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc29sdXRpb25zXykge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYmFzZUxldmVsID0gY2xhbXAoTWF0aC5mbG9vcih6b29tKSwgMCwgdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIC0gMik7XG4gICAgICAgICAgICB2YXIgem9vbUZhY3RvciA9IHRoaXMucmVzb2x1dGlvbnNfW2Jhc2VMZXZlbF0gLyB0aGlzLnJlc29sdXRpb25zX1tiYXNlTGV2ZWwgKyAxXTtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5yZXNvbHV0aW9uc19bYmFzZUxldmVsXSAvXG4gICAgICAgICAgICAgICAgTWF0aC5wb3coem9vbUZhY3RvciwgY2xhbXAoem9vbSAtIGJhc2VMZXZlbCwgMCwgMSkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5tYXhSZXNvbHV0aW9uXyAvIE1hdGgucG93KHRoaXMuem9vbUZhY3Rvcl8sIHpvb20gLSB0aGlzLm1pblpvb21fKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZpdCB0aGUgZ2l2ZW4gZ2VvbWV0cnkgb3IgZXh0ZW50IGJhc2VkIG9uIHRoZSBnaXZlbiBtYXAgc2l6ZSBhbmQgYm9yZGVyLlxuICAgICAqIFRoZSBzaXplIGlzIHBpeGVsIGRpbWVuc2lvbnMgb2YgdGhlIGJveCB0byBmaXQgdGhlIGV4dGVudCBpbnRvLlxuICAgICAqIEluIG1vc3QgY2FzZXMgeW91IHdpbGwgd2FudCB0byB1c2UgdGhlIG1hcCBzaXplLCB0aGF0IGlzIGBtYXAuZ2V0U2l6ZSgpYC5cbiAgICAgKiBUYWtlcyBjYXJlIG9mIHRoZSBtYXAgYW5nbGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGdlb21ldHJ5T3JFeHRlbnQgVGhlIGdlb21ldHJ5IG9yXG4gICAgICogICAgIGV4dGVudCB0byBmaXQgdGhlIHZpZXcgdG8uXG4gICAgICogQHBhcmFtIHtGaXRPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZml0ID0gZnVuY3Rpb24gKGdlb21ldHJ5T3JFeHRlbnQsIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovXG4gICAgICAgIHZhciBnZW9tZXRyeTtcbiAgICAgICAgYXNzZXJ0KEFycmF5LmlzQXJyYXkoZ2VvbWV0cnlPckV4dGVudCkgfHxcbiAgICAgICAgICAgIHR5cGVvZiAoIC8qKiBAdHlwZSB7P30gKi8oZ2VvbWV0cnlPckV4dGVudCkuZ2V0U2ltcGxpZmllZEdlb21ldHJ5KSA9PT1cbiAgICAgICAgICAgICAgICAnZnVuY3Rpb24nLCAyNCk7IC8vIEludmFsaWQgZXh0ZW50IG9yIGdlb21ldHJ5IHByb3ZpZGVkIGFzIGBnZW9tZXRyeWBcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZ2VvbWV0cnlPckV4dGVudCkpIHtcbiAgICAgICAgICAgIGFzc2VydCghaXNFbXB0eShnZW9tZXRyeU9yRXh0ZW50KSwgMjUpOyAvLyBDYW5ub3QgZml0IGVtcHR5IGV4dGVudCBwcm92aWRlZCBhcyBgZ2VvbWV0cnlgXG4gICAgICAgICAgICB2YXIgZXh0ZW50ID0gZnJvbVVzZXJFeHRlbnQoZ2VvbWV0cnlPckV4dGVudCwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSBwb2x5Z29uRnJvbUV4dGVudChleHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGdlb21ldHJ5T3JFeHRlbnQuZ2V0VHlwZSgpID09PSBHZW9tZXRyeVR5cGUuQ0lSQ0xFKSB7XG4gICAgICAgICAgICB2YXIgZXh0ZW50ID0gZnJvbVVzZXJFeHRlbnQoZ2VvbWV0cnlPckV4dGVudC5nZXRFeHRlbnQoKSwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSBwb2x5Z29uRnJvbUV4dGVudChleHRlbnQpO1xuICAgICAgICAgICAgZ2VvbWV0cnkucm90YXRlKHRoaXMuZ2V0Um90YXRpb24oKSwgZ2V0Q2VudGVyKGV4dGVudCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHVzZXJQcm9qZWN0aW9uID0gZ2V0VXNlclByb2plY3Rpb24oKTtcbiAgICAgICAgICAgIGlmICh1c2VyUHJvamVjdGlvbikge1xuICAgICAgICAgICAgICAgIGdlb21ldHJ5ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5T3JFeHRlbnRcbiAgICAgICAgICAgICAgICAgICAgLmNsb25lKClcbiAgICAgICAgICAgICAgICAgICAgLnRyYW5zZm9ybSh1c2VyUHJvamVjdGlvbiwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnlPckV4dGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpdEludGVybmFsKGdlb21ldHJ5LCBvcHRfb3B0aW9ucyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBUaGUgZ2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHtGaXRPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5maXRJbnRlcm5hbCA9IGZ1bmN0aW9uIChnZW9tZXRyeSwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyIHNpemUgPSBvcHRpb25zLnNpemU7XG4gICAgICAgIGlmICghc2l6ZSkge1xuICAgICAgICAgICAgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXygpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnBhZGRpbmcgOiBbMCwgMCwgMCwgMF07XG4gICAgICAgIHZhciBuZWFyZXN0ID0gb3B0aW9ucy5uZWFyZXN0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5lYXJlc3QgOiBmYWxzZTtcbiAgICAgICAgdmFyIG1pblJlc29sdXRpb247XG4gICAgICAgIGlmIChvcHRpb25zLm1pblJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbWluUmVzb2x1dGlvbiA9IG9wdGlvbnMubWluUmVzb2x1dGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbWluUmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20ob3B0aW9ucy5tYXhab29tKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1pblJlc29sdXRpb24gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb29yZHMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgLy8gY2FsY3VsYXRlIHJvdGF0ZWQgZXh0ZW50XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgdmFyIGNvc0FuZ2xlID0gTWF0aC5jb3MoLXJvdGF0aW9uKTtcbiAgICAgICAgdmFyIHNpbkFuZ2xlID0gTWF0aC5zaW4oLXJvdGF0aW9uKTtcbiAgICAgICAgdmFyIG1pblJvdFggPSArSW5maW5pdHk7XG4gICAgICAgIHZhciBtaW5Sb3RZID0gK0luZmluaXR5O1xuICAgICAgICB2YXIgbWF4Um90WCA9IC1JbmZpbml0eTtcbiAgICAgICAgdmFyIG1heFJvdFkgPSAtSW5maW5pdHk7XG4gICAgICAgIHZhciBzdHJpZGUgPSBnZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRzLmxlbmd0aDsgaSA8IGlpOyBpICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgdmFyIHJvdFggPSBjb29yZHNbaV0gKiBjb3NBbmdsZSAtIGNvb3Jkc1tpICsgMV0gKiBzaW5BbmdsZTtcbiAgICAgICAgICAgIHZhciByb3RZID0gY29vcmRzW2ldICogc2luQW5nbGUgKyBjb29yZHNbaSArIDFdICogY29zQW5nbGU7XG4gICAgICAgICAgICBtaW5Sb3RYID0gTWF0aC5taW4obWluUm90WCwgcm90WCk7XG4gICAgICAgICAgICBtaW5Sb3RZID0gTWF0aC5taW4obWluUm90WSwgcm90WSk7XG4gICAgICAgICAgICBtYXhSb3RYID0gTWF0aC5tYXgobWF4Um90WCwgcm90WCk7XG4gICAgICAgICAgICBtYXhSb3RZID0gTWF0aC5tYXgobWF4Um90WSwgcm90WSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2FsY3VsYXRlIHJlc29sdXRpb25cbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb25Gb3JFeHRlbnRJbnRlcm5hbChbbWluUm90WCwgbWluUm90WSwgbWF4Um90WCwgbWF4Um90WV0sIFtzaXplWzBdIC0gcGFkZGluZ1sxXSAtIHBhZGRpbmdbM10sIHNpemVbMV0gLSBwYWRkaW5nWzBdIC0gcGFkZGluZ1syXV0pO1xuICAgICAgICByZXNvbHV0aW9uID0gaXNOYU4ocmVzb2x1dGlvbilcbiAgICAgICAgICAgID8gbWluUmVzb2x1dGlvblxuICAgICAgICAgICAgOiBNYXRoLm1heChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uKTtcbiAgICAgICAgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uKHJlc29sdXRpb24sIG5lYXJlc3QgPyAwIDogMSk7XG4gICAgICAgIC8vIGNhbGN1bGF0ZSBjZW50ZXJcbiAgICAgICAgc2luQW5nbGUgPSAtc2luQW5nbGU7IC8vIGdvIGJhY2sgdG8gb3JpZ2luYWwgcm90YXRpb25cbiAgICAgICAgdmFyIGNlbnRlclJvdFggPSAobWluUm90WCArIG1heFJvdFgpIC8gMjtcbiAgICAgICAgdmFyIGNlbnRlclJvdFkgPSAobWluUm90WSArIG1heFJvdFkpIC8gMjtcbiAgICAgICAgY2VudGVyUm90WCArPSAoKHBhZGRpbmdbMV0gLSBwYWRkaW5nWzNdKSAvIDIpICogcmVzb2x1dGlvbjtcbiAgICAgICAgY2VudGVyUm90WSArPSAoKHBhZGRpbmdbMF0gLSBwYWRkaW5nWzJdKSAvIDIpICogcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIGNlbnRlclggPSBjZW50ZXJSb3RYICogY29zQW5nbGUgLSBjZW50ZXJSb3RZICogc2luQW5nbGU7XG4gICAgICAgIHZhciBjZW50ZXJZID0gY2VudGVyUm90WSAqIGNvc0FuZ2xlICsgY2VudGVyUm90WCAqIHNpbkFuZ2xlO1xuICAgICAgICB2YXIgY2VudGVyID0gdGhpcy5nZXRDb25zdHJhaW5lZENlbnRlcihbY2VudGVyWCwgY2VudGVyWV0sIHJlc29sdXRpb24pO1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBvcHRpb25zLmNhbGxiYWNrID8gb3B0aW9ucy5jYWxsYmFjayA6IFZPSUQ7XG4gICAgICAgIGlmIChvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZUludGVybmFsKHtcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiByZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgIGNlbnRlcjogY2VudGVyLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIGVhc2luZzogb3B0aW9ucy5lYXNpbmcsXG4gICAgICAgICAgICB9LCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fID0gcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IGNlbnRlcjtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgYW5pbWF0aW9uQ2FsbGJhY2soY2FsbGJhY2ssIHRydWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDZW50ZXIgb24gY29vcmRpbmF0ZSBhbmQgdmlldyBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBCb3ggcGl4ZWwgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBvc2l0aW9uIFBvc2l0aW9uIG9uIHRoZSB2aWV3IHRvIGNlbnRlciBvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2VudGVyT24gPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgc2l6ZSwgcG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5jZW50ZXJPbkludGVybmFsKGZyb21Vc2VyQ29vcmRpbmF0ZShjb29yZGluYXRlLCB0aGlzLmdldFByb2plY3Rpb24oKSksIHNpemUsIHBvc2l0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIEJveCBwaXhlbCBzaXplLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcG9zaXRpb24gUG9zaXRpb24gb24gdGhlIHZpZXcgdG8gY2VudGVyIG9uLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmNlbnRlck9uSW50ZXJuYWwgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgc2l6ZSwgcG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5zZXRDZW50ZXJJbnRlcm5hbChjYWxjdWxhdGVDZW50ZXJPbihjb29yZGluYXRlLCBzaXplLCBwb3NpdGlvbiwgdGhpcy5nZXRSZXNvbHV0aW9uKCksIHRoaXMuZ2V0Um90YXRpb24oKSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyB0aGUgc2hpZnQgYmV0d2VlbiBtYXAgYW5kIHZpZXdwb3J0IGNlbnRlci5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXIgQ2VudGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgU2l6ZS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fHVuZGVmaW5lZH0gQ2VudGVyIHNoaWZ0LlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmNhbGN1bGF0ZUNlbnRlclNoaWZ0ID0gZnVuY3Rpb24gKGNlbnRlciwgcmVzb2x1dGlvbiwgcm90YXRpb24sIHNpemUpIHtcbiAgICAgICAgdmFyIGNlbnRlclNoaWZ0O1xuICAgICAgICB2YXIgcGFkZGluZyA9IHRoaXMucGFkZGluZztcbiAgICAgICAgaWYgKHBhZGRpbmcgJiYgY2VudGVyKSB7XG4gICAgICAgICAgICB2YXIgcmVkdWNlZFNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZU1pbnVzUGFkZGluZ18oLXJvdGF0aW9uKTtcbiAgICAgICAgICAgIHZhciBzaGlmdGVkQ2VudGVyID0gY2FsY3VsYXRlQ2VudGVyT24oY2VudGVyLCBzaXplLCBbcmVkdWNlZFNpemVbMF0gLyAyICsgcGFkZGluZ1szXSwgcmVkdWNlZFNpemVbMV0gLyAyICsgcGFkZGluZ1swXV0sIHJlc29sdXRpb24sIHJvdGF0aW9uKTtcbiAgICAgICAgICAgIGNlbnRlclNoaWZ0ID0gW1xuICAgICAgICAgICAgICAgIGNlbnRlclswXSAtIHNoaWZ0ZWRDZW50ZXJbMF0sXG4gICAgICAgICAgICAgICAgY2VudGVyWzFdIC0gc2hpZnRlZENlbnRlclsxXSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNlbnRlclNoaWZ0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgZGVmaW5lZC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5pc0RlZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpICYmIHRoaXMuZ2V0UmVzb2x1dGlvbigpICE9PSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIHJlbGF0aXZlIGNvb3JkaW5hdGVzIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuIEFueSBleHRlbnQgY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGRlbHRhQ29vcmRpbmF0ZXMgUmVsYXRpdmUgdmFsdWUgdG8gYWRkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RDZW50ZXIgPSBmdW5jdGlvbiAoZGVsdGFDb29yZGluYXRlcykge1xuICAgICAgICB2YXIgY2VudGVyID0gdG9Vc2VyQ29vcmRpbmF0ZSh0aGlzLnRhcmdldENlbnRlcl8sIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgdGhpcy5zZXRDZW50ZXIoW1xuICAgICAgICAgICAgY2VudGVyWzBdICsgZGVsdGFDb29yZGluYXRlc1swXSxcbiAgICAgICAgICAgIGNlbnRlclsxXSArIGRlbHRhQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgIF0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyByZWxhdGl2ZSBjb29yZGluYXRlcyB0byB0aGUgY2VudGVyIG9mIHRoZSB2aWV3LiBBbnkgZXh0ZW50IGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBkZWx0YUNvb3JkaW5hdGVzIFJlbGF0aXZlIHZhbHVlIHRvIGFkZC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RDZW50ZXJJbnRlcm5hbCA9IGZ1bmN0aW9uIChkZWx0YUNvb3JkaW5hdGVzKSB7XG4gICAgICAgIHZhciBjZW50ZXIgPSB0aGlzLnRhcmdldENlbnRlcl87XG4gICAgICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoW1xuICAgICAgICAgICAgY2VudGVyWzBdICsgZGVsdGFDb29yZGluYXRlc1swXSxcbiAgICAgICAgICAgIGNlbnRlclsxXSArIGRlbHRhQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgIF0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhlIHZpZXcgcmVzb2x1dGlvbiBieSBhIHJhdGlvLCBvcHRpb25hbGx5IHVzaW5nIGFuIGFuY2hvci4gQW55IHJlc29sdXRpb25cbiAgICAgKiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvIFRoZSByYXRpbyB0byBhcHBseSBvbiB0aGUgdmlldyByZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU9fSBvcHRfYW5jaG9yIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHJhdGlvLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHZhciBhbmNob3IgPSBvcHRfYW5jaG9yICYmIGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRfYW5jaG9yLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgIHRoaXMuYWRqdXN0UmVzb2x1dGlvbkludGVybmFsKHJhdGlvLCBhbmNob3IpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhlIHZpZXcgcmVzb2x1dGlvbiBieSBhIHJhdGlvLCBvcHRpb25hbGx5IHVzaW5nIGFuIGFuY2hvci4gQW55IHJlc29sdXRpb25cbiAgICAgKiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvIFRoZSByYXRpbyB0byBhcHBseSBvbiB0aGUgdmlldyByZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU9fSBvcHRfYW5jaG9yIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFkanVzdFJlc29sdXRpb25JbnRlcm5hbCA9IGZ1bmN0aW9uIChyYXRpbywgb3B0X2FuY2hvcikge1xuICAgICAgICB2YXIgaXNNb3ZpbmcgPSB0aGlzLmdldEFuaW1hdGluZygpIHx8IHRoaXMuZ2V0SW50ZXJhY3RpbmcoKTtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8odGhpcy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgdmFyIG5ld1Jlc29sdXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gKiByYXRpbywgMCwgc2l6ZSwgaXNNb3ZpbmcpO1xuICAgICAgICBpZiAob3B0X2FuY2hvcikge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRDZW50ZXJfID0gdGhpcy5jYWxjdWxhdGVDZW50ZXJab29tKG5ld1Jlc29sdXRpb24sIG9wdF9hbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gKj0gcmF0aW87XG4gICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgYSB2YWx1ZSB0byB0aGUgdmlldyB6b29tIGxldmVsLCBvcHRpb25hbGx5IHVzaW5nIGFuIGFuY2hvci4gQW55IHJlc29sdXRpb25cbiAgICAgKiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIFJlbGF0aXZlIHZhbHVlIHRvIGFkZCB0byB0aGUgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gb3B0X2FuY2hvciBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYWRqdXN0Wm9vbSA9IGZ1bmN0aW9uIChkZWx0YSwgb3B0X2FuY2hvcikge1xuICAgICAgICB0aGlzLmFkanVzdFJlc29sdXRpb24oTWF0aC5wb3codGhpcy56b29tRmFjdG9yXywgLWRlbHRhKSwgb3B0X2FuY2hvcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIGEgdmFsdWUgdG8gdGhlIHZpZXcgcm90YXRpb24sIG9wdGlvbmFsbHkgdXNpbmcgYW4gYW5jaG9yLiBBbnkgcm90YXRpb25cbiAgICAgKiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIFJlbGF0aXZlIHZhbHVlIHRvIGFkZCB0byB0aGUgem9vbSByb3RhdGlvbiwgaW4gcmFkaWFucy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gb3B0X2FuY2hvciBUaGUgcm90YXRpb24gY2VudGVyLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RSb3RhdGlvbiA9IGZ1bmN0aW9uIChkZWx0YSwgb3B0X2FuY2hvcikge1xuICAgICAgICBpZiAob3B0X2FuY2hvcikge1xuICAgICAgICAgICAgb3B0X2FuY2hvciA9IGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRfYW5jaG9yLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGp1c3RSb3RhdGlvbkludGVybmFsKGRlbHRhLCBvcHRfYW5jaG9yKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBSZWxhdGl2ZSB2YWx1ZSB0byBhZGQgdG8gdGhlIHpvb20gcm90YXRpb24sIGluIHJhZGlhbnMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IG9wdF9hbmNob3IgVGhlIHJvdGF0aW9uIGNlbnRlci5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RSb3RhdGlvbkludGVybmFsID0gZnVuY3Rpb24gKGRlbHRhLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHZhciBpc01vdmluZyA9IHRoaXMuZ2V0QW5pbWF0aW5nKCkgfHwgdGhpcy5nZXRJbnRlcmFjdGluZygpO1xuICAgICAgICB2YXIgbmV3Um90YXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yb3RhdGlvbih0aGlzLnRhcmdldFJvdGF0aW9uXyArIGRlbHRhLCBpc01vdmluZyk7XG4gICAgICAgIGlmIChvcHRfYW5jaG9yKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSB0aGlzLmNhbGN1bGF0ZUNlbnRlclJvdGF0ZShuZXdSb3RhdGlvbiwgb3B0X2FuY2hvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YXJnZXRSb3RhdGlvbl8gKz0gZGVsdGE7XG4gICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY2VudGVyIG9mIHRoZSBjdXJyZW50IHZpZXcuIEFueSBleHRlbnQgY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBjZW50ZXIgVGhlIGNlbnRlciBvZiB0aGUgdmlldy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRDZW50ZXIgPSBmdW5jdGlvbiAoY2VudGVyKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoZnJvbVVzZXJDb29yZGluYXRlKGNlbnRlciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY2VudGVyIHVzaW5nIHRoZSB2aWV3IHByb2plY3Rpb24gKG5vdCB0aGUgdXNlciBwcm9qZWN0aW9uKS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gY2VudGVyIFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0Q2VudGVySW50ZXJuYWwgPSBmdW5jdGlvbiAoY2VudGVyKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IGNlbnRlcjtcbiAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1ZpZXdIaW50LmpzXCIpLmRlZmF1bHR9IGhpbnQgSGludC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgRGVsdGEuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBOZXcgdmFsdWUuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0SGludCA9IGZ1bmN0aW9uIChoaW50LCBkZWx0YSkge1xuICAgICAgICB0aGlzLmhpbnRzX1toaW50XSArPSBkZWx0YTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmhpbnRzX1toaW50XTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcmVzb2x1dGlvbiBmb3IgdGhpcyB2aWV3LiBBbnkgcmVzb2x1dGlvbiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFRoZSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldFJlc29sdXRpb24gPSBmdW5jdGlvbiAocmVzb2x1dGlvbikge1xuICAgICAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fID0gcmVzb2x1dGlvbjtcbiAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSByb3RhdGlvbiBmb3IgdGhpcyB2aWV3LiBBbnkgcm90YXRpb24gY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBUaGUgcm90YXRpb24gb2YgdGhlIHZpZXcgaW4gcmFkaWFucy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRSb3RhdGlvbiA9IGZ1bmN0aW9uIChyb3RhdGlvbikge1xuICAgICAgICB0aGlzLnRhcmdldFJvdGF0aW9uXyA9IHJvdGF0aW9uO1xuICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBab29tIHRvIGEgc3BlY2lmaWMgem9vbSBsZXZlbC4gQW55IHJlc29sdXRpb24gY29uc3RyYWluIHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gWm9vbSBsZXZlbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0Wm9vbSA9IGZ1bmN0aW9uICh6b29tKSB7XG4gICAgICAgIHRoaXMuc2V0UmVzb2x1dGlvbih0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKHpvb20pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlY29tcHV0ZSByb3RhdGlvbi9yZXNvbHV0aW9uL2NlbnRlciBiYXNlZCBvbiB0YXJnZXQgdmFsdWVzLlxuICAgICAqIE5vdGU6IHdlIGhhdmUgdG8gY29tcHV0ZSByb3RhdGlvbiBmaXJzdCwgdGhlbiByZXNvbHV0aW9uIGFuZCBjZW50ZXIgY29uc2lkZXJpbmcgdGhhdFxuICAgICAqIHBhcmFtZXRlcnMgY2FuIGluZmx1ZW5jZSBvbmUgYW5vdGhlciBpbiBjYXNlIGEgdmlldyBleHRlbnQgY29uc3RyYWludCBpcyBwcmVzZW50LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9kb05vdENhbmNlbEFuaW1zIERvIG5vdCBjYW5jZWwgYW5pbWF0aW9ucy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZm9yY2VNb3ZpbmcgQXBwbHkgY29uc3RyYWludHMgYXMgaWYgdGhlIHZpZXcgaXMgbW92aW5nLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYXBwbHlUYXJnZXRTdGF0ZV8gPSBmdW5jdGlvbiAob3B0X2RvTm90Q2FuY2VsQW5pbXMsIG9wdF9mb3JjZU1vdmluZykge1xuICAgICAgICB2YXIgaXNNb3ZpbmcgPSB0aGlzLmdldEFuaW1hdGluZygpIHx8IHRoaXMuZ2V0SW50ZXJhY3RpbmcoKSB8fCBvcHRfZm9yY2VNb3Zpbmc7XG4gICAgICAgIC8vIGNvbXB1dGUgcm90YXRpb25cbiAgICAgICAgdmFyIG5ld1JvdGF0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucm90YXRpb24odGhpcy50YXJnZXRSb3RhdGlvbl8sIGlzTW92aW5nKTtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8obmV3Um90YXRpb24pO1xuICAgICAgICB2YXIgbmV3UmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJlc29sdXRpb24odGhpcy50YXJnZXRSZXNvbHV0aW9uXywgMCwgc2l6ZSwgaXNNb3ZpbmcpO1xuICAgICAgICB2YXIgbmV3Q2VudGVyID0gdGhpcy5jb25zdHJhaW50c18uY2VudGVyKHRoaXMudGFyZ2V0Q2VudGVyXywgbmV3UmVzb2x1dGlvbiwgc2l6ZSwgaXNNb3ZpbmcsIHRoaXMuY2FsY3VsYXRlQ2VudGVyU2hpZnQodGhpcy50YXJnZXRDZW50ZXJfLCBuZXdSZXNvbHV0aW9uLCBuZXdSb3RhdGlvbiwgc2l6ZSkpO1xuICAgICAgICBpZiAodGhpcy5nZXQoVmlld1Byb3BlcnR5LlJPVEFUSU9OKSAhPT0gbmV3Um90YXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KFZpZXdQcm9wZXJ0eS5ST1RBVElPTiwgbmV3Um90YXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdldChWaWV3UHJvcGVydHkuUkVTT0xVVElPTikgIT09IG5ld1Jlc29sdXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KFZpZXdQcm9wZXJ0eS5SRVNPTFVUSU9OLCBuZXdSZXNvbHV0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIpIHx8XG4gICAgICAgICAgICAhZXF1YWxzKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIpLCBuZXdDZW50ZXIpKSB7XG4gICAgICAgICAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuQ0VOVEVSLCBuZXdDZW50ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdldEFuaW1hdGluZygpICYmICFvcHRfZG9Ob3RDYW5jZWxBbmltcykge1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYW5jZWxBbmNob3JfID0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSWYgYW55IGNvbnN0cmFpbnRzIG5lZWQgdG8gYmUgYXBwbGllZCwgYW4gYW5pbWF0aW9uIHdpbGwgYmUgdHJpZ2dlcmVkLlxuICAgICAqIFRoaXMgaXMgdHlwaWNhbGx5IGRvbmUgb24gaW50ZXJhY3Rpb24gZW5kLlxuICAgICAqIE5vdGU6IGNhbGxpbmcgdGhpcyB3aXRoIGEgZHVyYXRpb24gb2YgMCB3aWxsIGFwcGx5IHRoZSBjb25zdHJhaW5lZCB2YWx1ZXMgc3RyYWlnaHQgYXdheSxcbiAgICAgKiB3aXRob3V0IGFuaW1hdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9kdXJhdGlvbiBUaGUgYW5pbWF0aW9uIGR1cmF0aW9uIGluIG1zLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24gV2hpY2ggZGlyZWN0aW9uIHRvIHpvb20uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IG9wdF9hbmNob3IgVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUucmVzb2x2ZUNvbnN0cmFpbnRzID0gZnVuY3Rpb24gKG9wdF9kdXJhdGlvbiwgb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24sIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gb3B0X2R1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRfZHVyYXRpb24gOiAyMDA7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbiB8fCAwO1xuICAgICAgICB2YXIgbmV3Um90YXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yb3RhdGlvbih0aGlzLnRhcmdldFJvdGF0aW9uXyk7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKG5ld1JvdGF0aW9uKTtcbiAgICAgICAgdmFyIG5ld1Jlc29sdXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8sIGRpcmVjdGlvbiwgc2l6ZSk7XG4gICAgICAgIHZhciBuZXdDZW50ZXIgPSB0aGlzLmNvbnN0cmFpbnRzXy5jZW50ZXIodGhpcy50YXJnZXRDZW50ZXJfLCBuZXdSZXNvbHV0aW9uLCBzaXplLCBmYWxzZSwgdGhpcy5jYWxjdWxhdGVDZW50ZXJTaGlmdCh0aGlzLnRhcmdldENlbnRlcl8sIG5ld1Jlc29sdXRpb24sIG5ld1JvdGF0aW9uLCBzaXplKSk7XG4gICAgICAgIGlmIChkdXJhdGlvbiA9PT0gMCAmJiAhdGhpcy5jYW5jZWxBbmNob3JfKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fID0gbmV3UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Um90YXRpb25fID0gbmV3Um90YXRpb247XG4gICAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSBuZXdDZW50ZXI7XG4gICAgICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFuY2hvciA9IG9wdF9hbmNob3IgfHwgKGR1cmF0aW9uID09PSAwID8gdGhpcy5jYW5jZWxBbmNob3JfIDogdW5kZWZpbmVkKTtcbiAgICAgICAgdGhpcy5jYW5jZWxBbmNob3JfID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5nZXRSZXNvbHV0aW9uKCkgIT09IG5ld1Jlc29sdXRpb24gfHxcbiAgICAgICAgICAgIHRoaXMuZ2V0Um90YXRpb24oKSAhPT0gbmV3Um90YXRpb24gfHxcbiAgICAgICAgICAgICF0aGlzLmdldENlbnRlckludGVybmFsKCkgfHxcbiAgICAgICAgICAgICFlcXVhbHModGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpLCBuZXdDZW50ZXIpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hbmltYXRlSW50ZXJuYWwoe1xuICAgICAgICAgICAgICAgIHJvdGF0aW9uOiBuZXdSb3RhdGlvbixcbiAgICAgICAgICAgICAgICBjZW50ZXI6IG5ld0NlbnRlcixcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBuZXdSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgICAgICAgYW5jaG9yOiBhbmNob3IsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogTm90aWZ5IHRoZSBWaWV3IHRoYXQgYW4gaW50ZXJhY3Rpb24gaGFzIHN0YXJ0ZWQuXG4gICAgICogVGhlIHZpZXcgc3RhdGUgd2lsbCBiZSByZXNvbHZlZCB0byBhIHN0YWJsZSBvbmUgaWYgbmVlZGVkXG4gICAgICogKGRlcGVuZGluZyBvbiBpdHMgY29uc3RyYWludHMpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5iZWdpbkludGVyYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlc29sdmVDb25zdHJhaW50cygwKTtcbiAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LklOVEVSQUNUSU5HLCAxKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE5vdGlmeSB0aGUgVmlldyB0aGF0IGFuIGludGVyYWN0aW9uIGhhcyBlbmRlZC4gVGhlIHZpZXcgc3RhdGUgd2lsbCBiZSByZXNvbHZlZFxuICAgICAqIHRvIGEgc3RhYmxlIG9uZSBpZiBuZWVkZWQgKGRlcGVuZGluZyBvbiBpdHMgY29uc3RyYWludHMpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2R1cmF0aW9uIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uIFdoaWNoIGRpcmVjdGlvbiB0byB6b29tLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU9fSBvcHRfYW5jaG9yIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5lbmRJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIChvcHRfZHVyYXRpb24sIG9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHZhciBhbmNob3IgPSBvcHRfYW5jaG9yICYmIGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRfYW5jaG9yLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgIHRoaXMuZW5kSW50ZXJhY3Rpb25JbnRlcm5hbChvcHRfZHVyYXRpb24sIG9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uLCBhbmNob3IpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTm90aWZ5IHRoZSBWaWV3IHRoYXQgYW4gaW50ZXJhY3Rpb24gaGFzIGVuZGVkLiBUaGUgdmlldyBzdGF0ZSB3aWxsIGJlIHJlc29sdmVkXG4gICAgICogdG8gYSBzdGFibGUgb25lIGlmIG5lZWRlZCAoZGVwZW5kaW5nIG9uIGl0cyBjb25zdHJhaW50cykuXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZHVyYXRpb24gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1zLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24gV2hpY2ggZGlyZWN0aW9uIHRvIHpvb20uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IG9wdF9hbmNob3IgVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZW5kSW50ZXJhY3Rpb25JbnRlcm5hbCA9IGZ1bmN0aW9uIChvcHRfZHVyYXRpb24sIG9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHRoaXMuc2V0SGludChWaWV3SGludC5JTlRFUkFDVElORywgLTEpO1xuICAgICAgICB0aGlzLnJlc29sdmVDb25zdHJhaW50cyhvcHRfZHVyYXRpb24sIG9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uLCBvcHRfYW5jaG9yKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIHZhbGlkIHBvc2l0aW9uIGZvciB0aGUgdmlldyBjZW50ZXIgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IGNvbnN0cmFpbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSB0YXJnZXRDZW50ZXIgVGFyZ2V0IGNlbnRlciBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF90YXJnZXRSZXNvbHV0aW9uIFRhcmdldCByZXNvbHV0aW9uLiBJZiBub3Qgc3VwcGxpZWQsIHRoZSBjdXJyZW50IG9uZSB3aWxsIGJlIHVzZWQuXG4gICAgICogVGhpcyBpcyB1c2VmdWwgdG8gZ3Vlc3MgYSB2YWxpZCBjZW50ZXIgcG9zaXRpb24gYXQgYSBkaWZmZXJlbnQgem9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFZhbGlkIGNlbnRlciBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRDb25zdHJhaW5lZENlbnRlciA9IGZ1bmN0aW9uICh0YXJnZXRDZW50ZXIsIG9wdF90YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXy5jZW50ZXIodGFyZ2V0Q2VudGVyLCBvcHRfdGFyZ2V0UmVzb2x1dGlvbiB8fCB0aGlzLmdldFJlc29sdXRpb24oKSwgc2l6ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSB2YWxpZCB6b29tIGxldmVsIGFjY29yZGluZyB0byB0aGUgY3VycmVudCB2aWV3IGNvbnN0cmFpbnRzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gdGFyZ2V0Wm9vbSBUYXJnZXQgem9vbS5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IFtvcHRfZGlyZWN0aW9uPTBdIEluZGljYXRlIHdoaWNoIHJlc29sdXRpb24gc2hvdWxkIGJlIHVzZWRcbiAgICAgKiBieSBhIHJlbmRlcmVyIGlmIHRoZSB2aWV3IHJlc29sdXRpb24gZG9lcyBub3QgbWF0Y2ggYW55IHJlc29sdXRpb24gb2YgdGhlIHRpbGUgc291cmNlLlxuICAgICAqIElmIDAsIHRoZSBuZWFyZXN0IHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLiBJZiAxLCB0aGUgbmVhcmVzdCBsb3dlciByZXNvbHV0aW9uXG4gICAgICogd2lsbCBiZSB1c2VkLiBJZiAtMSwgdGhlIG5lYXJlc3QgaGlnaGVyIHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFZhbGlkIHpvb20gbGV2ZWwuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Q29uc3RyYWluZWRab29tID0gZnVuY3Rpb24gKHRhcmdldFpvb20sIG9wdF9kaXJlY3Rpb24pIHtcbiAgICAgICAgdmFyIHRhcmdldFJlcyA9IHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20odGFyZ2V0Wm9vbSk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHRoaXMuZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uKHRhcmdldFJlcywgb3B0X2RpcmVjdGlvbikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgdmFsaWQgcmVzb2x1dGlvbiBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgdmlldyBjb25zdHJhaW50cy5cbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHRhcmdldFJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBbb3B0X2RpcmVjdGlvbj0wXSBJbmRpY2F0ZSB3aGljaCByZXNvbHV0aW9uIHNob3VsZCBiZSB1c2VkXG4gICAgICogYnkgYSByZW5kZXJlciBpZiB0aGUgdmlldyByZXNvbHV0aW9uIGRvZXMgbm90IG1hdGNoIGFueSByZXNvbHV0aW9uIG9mIHRoZSB0aWxlIHNvdXJjZS5cbiAgICAgKiBJZiAwLCB0aGUgbmVhcmVzdCByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC4gSWYgMSwgdGhlIG5lYXJlc3QgbG93ZXIgcmVzb2x1dGlvblxuICAgICAqIHdpbGwgYmUgdXNlZC4gSWYgLTEsIHRoZSBuZWFyZXN0IGhpZ2hlciByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBWYWxpZCByZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldENvbnN0cmFpbmVkUmVzb2x1dGlvbiA9IGZ1bmN0aW9uICh0YXJnZXRSZXNvbHV0aW9uLCBvcHRfZGlyZWN0aW9uKSB7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBvcHRfZGlyZWN0aW9uIHx8IDA7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKHRhcmdldFJlc29sdXRpb24sIGRpcmVjdGlvbiwgc2l6ZSk7XG4gICAgfTtcbiAgICByZXR1cm4gVmlldztcbn0oQmFzZU9iamVjdCkpO1xuLyoqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjay5cbiAqIEBwYXJhbSB7Kn0gcmV0dXJuVmFsdWUgUmV0dXJuIHZhbHVlLlxuICovXG5mdW5jdGlvbiBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgcmV0dXJuVmFsdWUpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2FsbGJhY2socmV0dXJuVmFsdWUpO1xuICAgIH0sIDApO1xufVxuLyoqXG4gKiBAcGFyYW0ge1ZpZXdPcHRpb25zfSBvcHRpb25zIFZpZXcgb3B0aW9ucy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY2VudGVyY29uc3RyYWludC5qc1wiKS5UeXBlfSBUaGUgY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNlbnRlckNvbnN0cmFpbnQob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLmV4dGVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBzbW9vdGggPSBvcHRpb25zLnNtb290aEV4dGVudENvbnN0cmFpbnQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnNtb290aEV4dGVudENvbnN0cmFpbnRcbiAgICAgICAgICAgIDogdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUV4dGVudChvcHRpb25zLmV4dGVudCwgb3B0aW9ucy5jb25zdHJhaW5Pbmx5Q2VudGVyLCBzbW9vdGgpO1xuICAgIH1cbiAgICB2YXIgcHJvamVjdGlvbiA9IGNyZWF0ZVByb2plY3Rpb24ob3B0aW9ucy5wcm9qZWN0aW9uLCAnRVBTRzozODU3Jyk7XG4gICAgaWYgKG9wdGlvbnMubXVsdGlXb3JsZCAhPT0gdHJ1ZSAmJiBwcm9qZWN0aW9uLmlzR2xvYmFsKCkpIHtcbiAgICAgICAgdmFyIGV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCkuc2xpY2UoKTtcbiAgICAgICAgZXh0ZW50WzBdID0gLUluZmluaXR5O1xuICAgICAgICBleHRlbnRbMl0gPSBJbmZpbml0eTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUV4dGVudChleHRlbnQsIGZhbHNlLCBmYWxzZSk7XG4gICAgfVxuICAgIHJldHVybiBjZW50ZXJOb25lO1xufVxuLyoqXG4gKiBAcGFyYW0ge1ZpZXdPcHRpb25zfSBvcHRpb25zIFZpZXcgb3B0aW9ucy5cbiAqIEByZXR1cm4ge3tjb25zdHJhaW50OiBpbXBvcnQoXCIuL3Jlc29sdXRpb25jb25zdHJhaW50LmpzXCIpLlR5cGUsIG1heFJlc29sdXRpb246IG51bWJlcixcbiAqICAgICBtaW5SZXNvbHV0aW9uOiBudW1iZXIsIG1pblpvb206IG51bWJlciwgem9vbUZhY3RvcjogbnVtYmVyfX0gVGhlIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZXNvbHV0aW9uQ29uc3RyYWludChvcHRpb25zKSB7XG4gICAgdmFyIHJlc29sdXRpb25Db25zdHJhaW50O1xuICAgIHZhciBtYXhSZXNvbHV0aW9uO1xuICAgIHZhciBtaW5SZXNvbHV0aW9uO1xuICAgIC8vIFRPRE86IG1vdmUgdGhlc2UgdG8gYmUgb2wgY29uc3RhbnRzXG4gICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVubGF5ZXJzL29wZW5sYXllcnMvaXNzdWVzLzIwNzZcbiAgICB2YXIgZGVmYXVsdE1heFpvb20gPSAyODtcbiAgICB2YXIgZGVmYXVsdFpvb21GYWN0b3IgPSAyO1xuICAgIHZhciBtaW5ab29tID0gb3B0aW9ucy5taW5ab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblpvb20gOiBERUZBVUxUX01JTl9aT09NO1xuICAgIHZhciBtYXhab29tID0gb3B0aW9ucy5tYXhab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heFpvb20gOiBkZWZhdWx0TWF4Wm9vbTtcbiAgICB2YXIgem9vbUZhY3RvciA9IG9wdGlvbnMuem9vbUZhY3RvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tRmFjdG9yIDogZGVmYXVsdFpvb21GYWN0b3I7XG4gICAgdmFyIG11bHRpV29ybGQgPSBvcHRpb25zLm11bHRpV29ybGQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubXVsdGlXb3JsZCA6IGZhbHNlO1xuICAgIHZhciBzbW9vdGggPSBvcHRpb25zLnNtb290aFJlc29sdXRpb25Db25zdHJhaW50ICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBvcHRpb25zLnNtb290aFJlc29sdXRpb25Db25zdHJhaW50XG4gICAgICAgIDogdHJ1ZTtcbiAgICB2YXIgc2hvd0Z1bGxFeHRlbnQgPSBvcHRpb25zLnNob3dGdWxsRXh0ZW50ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNob3dGdWxsRXh0ZW50IDogZmFsc2U7XG4gICAgdmFyIHByb2plY3Rpb24gPSBjcmVhdGVQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbiwgJ0VQU0c6Mzg1NycpO1xuICAgIHZhciBwcm9qRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICB2YXIgY29uc3RyYWluT25seUNlbnRlciA9IG9wdGlvbnMuY29uc3RyYWluT25seUNlbnRlcjtcbiAgICB2YXIgZXh0ZW50ID0gb3B0aW9ucy5leHRlbnQ7XG4gICAgaWYgKCFtdWx0aVdvcmxkICYmICFleHRlbnQgJiYgcHJvamVjdGlvbi5pc0dsb2JhbCgpKSB7XG4gICAgICAgIGNvbnN0cmFpbk9ubHlDZW50ZXIgPSBmYWxzZTtcbiAgICAgICAgZXh0ZW50ID0gcHJvakV4dGVudDtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMucmVzb2x1dGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgcmVzb2x1dGlvbnMgPSBvcHRpb25zLnJlc29sdXRpb25zO1xuICAgICAgICBtYXhSZXNvbHV0aW9uID0gcmVzb2x1dGlvbnNbbWluWm9vbV07XG4gICAgICAgIG1pblJlc29sdXRpb24gPVxuICAgICAgICAgICAgcmVzb2x1dGlvbnNbbWF4Wm9vbV0gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gcmVzb2x1dGlvbnNbbWF4Wm9vbV1cbiAgICAgICAgICAgICAgICA6IHJlc29sdXRpb25zW3Jlc29sdXRpb25zLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAob3B0aW9ucy5jb25zdHJhaW5SZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uQ29uc3RyYWludCA9IGNyZWF0ZVNuYXBUb1Jlc29sdXRpb25zKHJlc29sdXRpb25zLCBzbW9vdGgsICFjb25zdHJhaW5Pbmx5Q2VudGVyICYmIGV4dGVudCwgc2hvd0Z1bGxFeHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x1dGlvbkNvbnN0cmFpbnQgPSBjcmVhdGVNaW5NYXhSZXNvbHV0aW9uKG1heFJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIHNtb290aCwgIWNvbnN0cmFpbk9ubHlDZW50ZXIgJiYgZXh0ZW50LCBzaG93RnVsbEV4dGVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgZGVmYXVsdCBtaW4gYW5kIG1heCByZXNvbHV0aW9uXG4gICAgICAgIHZhciBzaXplID0gIXByb2pFeHRlbnRcbiAgICAgICAgICAgID8gLy8gdXNlIGFuIGV4dGVudCB0aGF0IGNhbiBmaXQgdGhlIHdob2xlIHdvcmxkIGlmIG5lZWQgYmVcbiAgICAgICAgICAgICAgICAoMzYwICogTUVURVJTX1BFUl9VTklUW1VuaXRzLkRFR1JFRVNdKSAvIHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpXG4gICAgICAgICAgICA6IE1hdGgubWF4KGdldFdpZHRoKHByb2pFeHRlbnQpLCBnZXRIZWlnaHQocHJvakV4dGVudCkpO1xuICAgICAgICB2YXIgZGVmYXVsdE1heFJlc29sdXRpb24gPSBzaXplIC8gREVGQVVMVF9USUxFX1NJWkUgLyBNYXRoLnBvdyhkZWZhdWx0Wm9vbUZhY3RvciwgREVGQVVMVF9NSU5fWk9PTSk7XG4gICAgICAgIHZhciBkZWZhdWx0TWluUmVzb2x1dGlvbiA9IGRlZmF1bHRNYXhSZXNvbHV0aW9uIC9cbiAgICAgICAgICAgIE1hdGgucG93KGRlZmF1bHRab29tRmFjdG9yLCBkZWZhdWx0TWF4Wm9vbSAtIERFRkFVTFRfTUlOX1pPT00pO1xuICAgICAgICAvLyB1c2VyIHByb3ZpZGVkIG1heFJlc29sdXRpb24gdGFrZXMgcHJlY2VkZW5jZVxuICAgICAgICBtYXhSZXNvbHV0aW9uID0gb3B0aW9ucy5tYXhSZXNvbHV0aW9uO1xuICAgICAgICBpZiAobWF4UmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBtaW5ab29tID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1heFJlc29sdXRpb24gPSBkZWZhdWx0TWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHpvb21GYWN0b3IsIG1pblpvb20pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHVzZXIgcHJvdmlkZWQgbWluUmVzb2x1dGlvbiB0YWtlcyBwcmVjZWRlbmNlXG4gICAgICAgIG1pblJlc29sdXRpb24gPSBvcHRpb25zLm1pblJlc29sdXRpb247XG4gICAgICAgIGlmIChtaW5SZXNvbHV0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm1heFJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBtaW5SZXNvbHV0aW9uID0gbWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHpvb21GYWN0b3IsIG1heFpvb20pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWluUmVzb2x1dGlvbiA9IGRlZmF1bHRNYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coem9vbUZhY3RvciwgbWF4Wm9vbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWluUmVzb2x1dGlvbiA9IGRlZmF1bHRNaW5SZXNvbHV0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGdpdmVuIGRpc2NyZXRlIHpvb20gbGV2ZWxzLCBtaW5SZXNvbHV0aW9uIG1heSBiZSBkaWZmZXJlbnQgdGhhbiBwcm92aWRlZFxuICAgICAgICBtYXhab29tID1cbiAgICAgICAgICAgIG1pblpvb20gK1xuICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIG1pblJlc29sdXRpb24pIC8gTWF0aC5sb2coem9vbUZhY3RvcikpO1xuICAgICAgICBtaW5SZXNvbHV0aW9uID0gbWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHpvb21GYWN0b3IsIG1heFpvb20gLSBtaW5ab29tKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuY29uc3RyYWluUmVzb2x1dGlvbikge1xuICAgICAgICAgICAgcmVzb2x1dGlvbkNvbnN0cmFpbnQgPSBjcmVhdGVTbmFwVG9Qb3dlcih6b29tRmFjdG9yLCBtYXhSZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBzbW9vdGgsICFjb25zdHJhaW5Pbmx5Q2VudGVyICYmIGV4dGVudCwgc2hvd0Z1bGxFeHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x1dGlvbkNvbnN0cmFpbnQgPSBjcmVhdGVNaW5NYXhSZXNvbHV0aW9uKG1heFJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIHNtb290aCwgIWNvbnN0cmFpbk9ubHlDZW50ZXIgJiYgZXh0ZW50LCBzaG93RnVsbEV4dGVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uc3RyYWludDogcmVzb2x1dGlvbkNvbnN0cmFpbnQsXG4gICAgICAgIG1heFJlc29sdXRpb246IG1heFJlc29sdXRpb24sXG4gICAgICAgIG1pblJlc29sdXRpb246IG1pblJlc29sdXRpb24sXG4gICAgICAgIG1pblpvb206IG1pblpvb20sXG4gICAgICAgIHpvb21GYWN0b3I6IHpvb21GYWN0b3IsXG4gICAgfTtcbn1cbi8qKlxuICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3JvdGF0aW9uY29uc3RyYWludC5qc1wiKS5UeXBlfSBSb3RhdGlvbiBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUm90YXRpb25Db25zdHJhaW50KG9wdGlvbnMpIHtcbiAgICB2YXIgZW5hYmxlUm90YXRpb24gPSBvcHRpb25zLmVuYWJsZVJvdGF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmVuYWJsZVJvdGF0aW9uIDogdHJ1ZTtcbiAgICBpZiAoZW5hYmxlUm90YXRpb24pIHtcbiAgICAgICAgdmFyIGNvbnN0cmFpblJvdGF0aW9uID0gb3B0aW9ucy5jb25zdHJhaW5Sb3RhdGlvbjtcbiAgICAgICAgaWYgKGNvbnN0cmFpblJvdGF0aW9uID09PSB1bmRlZmluZWQgfHwgY29uc3RyYWluUm90YXRpb24gPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVTbmFwVG9aZXJvKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29uc3RyYWluUm90YXRpb24gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcm90YXRpb25Ob25lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBjb25zdHJhaW5Sb3RhdGlvbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVTbmFwVG9OKGNvbnN0cmFpblJvdGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGlvbk5vbmU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBkaXNhYmxlO1xuICAgIH1cbn1cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGFuIGFuaW1hdGlvbiBpbnZvbHZlcyBubyB2aWV3IGNoYW5nZS5cbiAqIEBwYXJhbSB7QW5pbWF0aW9ufSBhbmltYXRpb24gVGhlIGFuaW1hdGlvbi5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBhbmltYXRpb24gaW52b2x2ZXMgbm8gdmlldyBjaGFuZ2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc05vb3BBbmltYXRpb24oYW5pbWF0aW9uKSB7XG4gICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VDZW50ZXIgJiYgYW5pbWF0aW9uLnRhcmdldENlbnRlcikge1xuICAgICAgICBpZiAoIWNvb3JkaW5hdGVzRXF1YWwoYW5pbWF0aW9uLnNvdXJjZUNlbnRlciwgYW5pbWF0aW9uLnRhcmdldENlbnRlcikpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gIT09IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbiAhPT0gYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgQm94IHBpeGVsIHNpemUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBvc2l0aW9uIFBvc2l0aW9uIG9uIHRoZSB2aWV3IHRvIGNlbnRlciBvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gU2hpZnRlZCBjZW50ZXIuXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZUNlbnRlck9uKGNvb3JkaW5hdGUsIHNpemUsIHBvc2l0aW9uLCByZXNvbHV0aW9uLCByb3RhdGlvbikge1xuICAgIC8vIGNhbGN1bGF0ZSByb3RhdGVkIHBvc2l0aW9uXG4gICAgdmFyIGNvc0FuZ2xlID0gTWF0aC5jb3MoLXJvdGF0aW9uKTtcbiAgICB2YXIgc2luQW5nbGUgPSBNYXRoLnNpbigtcm90YXRpb24pO1xuICAgIHZhciByb3RYID0gY29vcmRpbmF0ZVswXSAqIGNvc0FuZ2xlIC0gY29vcmRpbmF0ZVsxXSAqIHNpbkFuZ2xlO1xuICAgIHZhciByb3RZID0gY29vcmRpbmF0ZVsxXSAqIGNvc0FuZ2xlICsgY29vcmRpbmF0ZVswXSAqIHNpbkFuZ2xlO1xuICAgIHJvdFggKz0gKHNpemVbMF0gLyAyIC0gcG9zaXRpb25bMF0pICogcmVzb2x1dGlvbjtcbiAgICByb3RZICs9IChwb3NpdGlvblsxXSAtIHNpemVbMV0gLyAyKSAqIHJlc29sdXRpb247XG4gICAgLy8gZ28gYmFjayB0byBvcmlnaW5hbCBhbmdsZVxuICAgIHNpbkFuZ2xlID0gLXNpbkFuZ2xlOyAvLyBnbyBiYWNrIHRvIG9yaWdpbmFsIHJvdGF0aW9uXG4gICAgdmFyIGNlbnRlclggPSByb3RYICogY29zQW5nbGUgLSByb3RZICogc2luQW5nbGU7XG4gICAgdmFyIGNlbnRlclkgPSByb3RZICogY29zQW5nbGUgKyByb3RYICogc2luQW5nbGU7XG4gICAgcmV0dXJuIFtjZW50ZXJYLCBjZW50ZXJZXTtcbn1cbmV4cG9ydCBkZWZhdWx0IFZpZXc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1WaWV3LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvUGx1Z2dhYmxlTWFwXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0LCB7IGdldENoYW5nZUV2ZW50VHlwZSB9IGZyb20gJy4vT2JqZWN0LmpzJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbkV2ZW50VHlwZSBmcm9tICcuL0NvbGxlY3Rpb25FdmVudFR5cGUuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IExheWVyR3JvdXAgZnJvbSAnLi9sYXllci9Hcm91cC5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50IGZyb20gJy4vTWFwQnJvd3NlckV2ZW50LmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRIYW5kbGVyIGZyb20gJy4vTWFwQnJvd3NlckV2ZW50SGFuZGxlci5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50VHlwZSBmcm9tICcuL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuaW1wb3J0IE1hcEV2ZW50IGZyb20gJy4vTWFwRXZlbnQuanMnO1xuaW1wb3J0IE1hcEV2ZW50VHlwZSBmcm9tICcuL01hcEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTWFwUHJvcGVydHkgZnJvbSAnLi9NYXBQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4vT2JqZWN0RXZlbnRUeXBlLmpzJztcbmltcG9ydCBQb2ludGVyRXZlbnRUeXBlIGZyb20gJy4vcG9pbnRlci9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50VHlwZSBmcm9tICcuL3JlbmRlci9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFRpbGVRdWV1ZSwgeyBnZXRUaWxlUHJpb3JpdHkgfSBmcm9tICcuL1RpbGVRdWV1ZS5qcyc7XG5pbXBvcnQgVmlldyBmcm9tICcuL1ZpZXcuanMnO1xuaW1wb3J0IFZpZXdIaW50IGZyb20gJy4vVmlld0hpbnQuanMnO1xuaW1wb3J0IHsgREVWSUNFX1BJWEVMX1JBVElPLCBJTUFHRV9ERUNPREUsIFBBU1NJVkVfRVZFTlRfTElTVEVORVJTLCB9IGZyb20gJy4vaGFzLmpzJztcbmltcG9ydCB7IFRSVUUgfSBmcm9tICcuL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBhcHBseSBhcyBhcHBseVRyYW5zZm9ybSwgY3JlYXRlIGFzIGNyZWF0ZVRyYW5zZm9ybSwgfSBmcm9tICcuL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgY2xvbmUsIGNyZWF0ZU9yVXBkYXRlRW1wdHksIGVxdWFscywgZ2V0Rm9yVmlld0FuZFNpemUsIGlzRW1wdHksIH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZnJvbVVzZXJDb29yZGluYXRlLCB0b1VzZXJDb29yZGluYXRlIH0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7IGhhc0FyZWEgfSBmcm9tICcuL3NpemUuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi9ldmVudHMuanMnO1xuaW1wb3J0IHsgcmVtb3ZlTm9kZSB9IGZyb20gJy4vZG9tLmpzJztcbi8qKlxuICogU3RhdGUgb2YgdGhlIGN1cnJlbnQgZnJhbWUuIE9ubHkgYHBpeGVsUmF0aW9gLCBgdGltZWAgYW5kIGB2aWV3U3RhdGVgIHNob3VsZFxuICogYmUgdXNlZCBpbiBhcHBsaWNhdGlvbnMuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGcmFtZVN0YXRlXG4gKiBAcHJvcGVydHkge251bWJlcn0gcGl4ZWxSYXRpbyBUaGUgcGl4ZWwgcmF0aW8gb2YgdGhlIGZyYW1lLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHRpbWUgVGhlIHRpbWUgd2hlbiByZW5kZXJpbmcgb2YgdGhlIGZyYW1lIHdhcyByZXF1ZXN0ZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vVmlldy5qc1wiKS5TdGF0ZX0gdmlld1N0YXRlIFRoZSBzdGF0ZSBvZiB0aGUgY3VycmVudCB2aWV3LlxuICogQHByb3BlcnR5IHtib29sZWFufSBhbmltYXRlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwicmJ1c2hcIikuZGVmYXVsdH0gZGVjbHV0dGVyVHJlZVxuICogQHByb3BlcnR5IHtudWxsfGltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50XG4gKiBAcHJvcGVydHkge251bWJlcn0gaW5kZXhcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5TdGF0ZT59IGxheWVyU3RhdGVzQXJyYXlcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsYXllckluZGV4XG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gcGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm1cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8UG9zdFJlbmRlckZ1bmN0aW9uPn0gcG9zdFJlbmRlckZ1bmN0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZVxuICogQHByb3BlcnR5IHtUaWxlUXVldWV9IHRpbGVRdWV1ZVxuICogQHByb3BlcnR5IHshT2JqZWN0PHN0cmluZywgT2JqZWN0PHN0cmluZywgYm9vbGVhbj4+fSB1c2VkVGlsZXNcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gdmlld0hpbnRzXG4gKiBAcHJvcGVydHkgeyFPYmplY3Q8c3RyaW5nLCBPYmplY3Q8c3RyaW5nLCBib29sZWFuPj59IHdhbnRlZFRpbGVzXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKFBsdWdnYWJsZU1hcCwgP0ZyYW1lU3RhdGUpOiBhbnl9IFBvc3RSZW5kZXJGdW5jdGlvblxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEF0UGl4ZWxPcHRpb25zXG4gKiBAcHJvcGVydHkge3VuZGVmaW5lZHxmdW5jdGlvbihpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBbbGF5ZXJGaWx0ZXJdIExheWVyIGZpbHRlclxuICogZnVuY3Rpb24uIFRoZSBmaWx0ZXIgZnVuY3Rpb24gd2lsbCByZWNlaXZlIG9uZSBhcmd1bWVudCwgdGhlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyIGxheWVyLWNhbmRpZGF0ZX0gYW5kIGl0IHNob3VsZCByZXR1cm4gYSBib29sZWFuIHZhbHVlLlxuICogT25seSBsYXllcnMgd2hpY2ggYXJlIHZpc2libGUgYW5kIGZvciB3aGljaCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgXG4gKiB3aWxsIGJlIHRlc3RlZCBmb3IgZmVhdHVyZXMuIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbaGl0VG9sZXJhbmNlPTBdIEhpdC1kZXRlY3Rpb24gdG9sZXJhbmNlIGluIGNzcyBwaXhlbHMuIFBpeGVsc1xuICogaW5zaWRlIHRoZSByYWRpdXMgYXJvdW5kIHRoZSBnaXZlbiBwb3NpdGlvbiB3aWxsIGJlIGNoZWNrZWQgZm9yIGZlYXR1cmVzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY2hlY2tXcmFwcGVkPXRydWVdIENoZWNrLVdyYXBwZWQgV2lsbCBjaGVjayBmb3IgZm9yIHdyYXBwZWQgZ2VvbWV0cmllcyBpbnNpZGUgdGhlIHJhbmdlIG9mXG4gKiAgICsvLSAxIHdvcmxkIHdpZHRoLiBXb3JrcyBvbmx5IGlmIGEgcHJvamVjdGlvbiBpcyB1c2VkIHRoYXQgY2FuIGJlIHdyYXBwZWQuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTWFwT3B0aW9uc0ludGVybmFsXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD59IFtjb250cm9sc11cbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fSBbaW50ZXJhY3Rpb25zXVxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxEb2N1bWVudH0ga2V5Ym9hcmRFdmVudFRhcmdldFxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn0gb3ZlcmxheXNcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgKj59IHZhbHVlc1xuICovXG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggY29uZmlnIG9wdGlvbnMgZm9yIHRoZSBtYXAuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNYXBPcHRpb25zXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD58QXJyYXk8aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD59IFtjb250cm9sc11cbiAqIENvbnRyb2xzIGluaXRpYWxseSBhZGRlZCB0byB0aGUgbWFwLiBJZiBub3Qgc3BlY2lmaWVkLFxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sfmRlZmF1bHRzfSBpcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtwaXhlbFJhdGlvPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvXSBUaGUgcmF0aW8gYmV0d2VlblxuICogcGh5c2ljYWwgcGl4ZWxzIGFuZCBkZXZpY2UtaW5kZXBlbmRlbnQgcGl4ZWxzIChkaXBzKSBvbiB0aGUgZGV2aWNlLlxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD58QXJyYXk8aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn0gW2ludGVyYWN0aW9uc11cbiAqIEludGVyYWN0aW9ucyB0aGF0IGFyZSBpbml0aWFsbHkgYWRkZWQgdG8gdGhlIG1hcC4gSWYgbm90IHNwZWNpZmllZCxcbiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb25+ZGVmYXVsdHN9IGlzIHVzZWQuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fERvY3VtZW50fHN0cmluZ30gW2tleWJvYXJkRXZlbnRUYXJnZXRdIFRoZSBlbGVtZW50IHRvXG4gKiBsaXN0ZW4gdG8ga2V5Ym9hcmQgZXZlbnRzIG9uLiBUaGlzIGRldGVybWluZXMgd2hlbiB0aGUgYEtleWJvYXJkUGFuYCBhbmRcbiAqIGBLZXlib2FyZFpvb21gIGludGVyYWN0aW9ucyB0cmlnZ2VyLiBGb3IgZXhhbXBsZSwgaWYgdGhpcyBvcHRpb24gaXMgc2V0IHRvXG4gKiBgZG9jdW1lbnRgIHRoZSBrZXlib2FyZCBpbnRlcmFjdGlvbnMgd2lsbCBhbHdheXMgdHJpZ2dlci4gSWYgdGhpcyBvcHRpb24gaXNcbiAqIG5vdCBzcGVjaWZpZWQsIHRoZSBlbGVtZW50IHRoZSBsaWJyYXJ5IGxpc3RlbnMgdG8ga2V5Ym9hcmQgZXZlbnRzIG9uIGlzIHRoZVxuICogbWFwIHRhcmdldCAoaS5lLiB0aGUgdXNlci1wcm92aWRlZCBkaXYgZm9yIHRoZSBtYXApLiBJZiB0aGlzIGlzIG5vdFxuICogYGRvY3VtZW50YCwgdGhlIHRhcmdldCBlbGVtZW50IG5lZWRzIHRvIGJlIGZvY3VzZWQgZm9yIGtleSBldmVudHMgdG8gYmVcbiAqIGVtaXR0ZWQsIHJlcXVpcmluZyB0aGF0IHRoZSB0YXJnZXQgZWxlbWVudCBoYXMgYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fENvbGxlY3Rpb248aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fExheWVyR3JvdXB9IFtsYXllcnNdXG4gKiBMYXllcnMuIElmIHRoaXMgaXMgbm90IGRlZmluZWQsIGEgbWFwIHdpdGggbm8gbGF5ZXJzIHdpbGwgYmUgcmVuZGVyZWQuIE5vdGVcbiAqIHRoYXQgbGF5ZXJzIGFyZSByZW5kZXJlZCBpbiB0aGUgb3JkZXIgc3VwcGxpZWQsIHNvIGlmIHlvdSB3YW50LCBmb3IgZXhhbXBsZSxcbiAqIGEgdmVjdG9yIGxheWVyIHRvIGFwcGVhciBvbiB0b3Agb2YgYSB0aWxlIGxheWVyLCBpdCBtdXN0IGNvbWUgYWZ0ZXIgdGhlIHRpbGVcbiAqIGxheWVyLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhUaWxlc0xvYWRpbmc9MTZdIE1heGltdW0gbnVtYmVyIHRpbGVzIHRvIGxvYWRcbiAqIHNpbXVsdGFuZW91c2x5LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttb3ZlVG9sZXJhbmNlPTFdIFRoZSBtaW5pbXVtIGRpc3RhbmNlIGluIHBpeGVscyB0aGVcbiAqIGN1cnNvciBtdXN0IG1vdmUgdG8gYmUgZGV0ZWN0ZWQgYXMgYSBtYXAgbW92ZSBldmVudCBpbnN0ZWFkIG9mIGEgY2xpY2suXG4gKiBJbmNyZWFzaW5nIHRoaXMgdmFsdWUgY2FuIG1ha2UgaXQgZWFzaWVyIHRvIGNsaWNrIG9uIHRoZSBtYXAuXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fEFycmF5PGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn0gW292ZXJsYXlzXVxuICogT3ZlcmxheXMgaW5pdGlhbGx5IGFkZGVkIHRvIHRoZSBtYXAuIEJ5IGRlZmF1bHQsIG5vIG92ZXJsYXlzIGFyZSBhZGRlZC5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBUaGUgY29udGFpbmVyIGZvciB0aGUgbWFwLCBlaXRoZXIgdGhlXG4gKiBlbGVtZW50IGl0c2VsZiBvciB0aGUgYGlkYCBvZiB0aGUgZWxlbWVudC4gSWYgbm90IHNwZWNpZmllZCBhdCBjb25zdHJ1Y3Rpb25cbiAqIHRpbWUsIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcCNzZXRUYXJnZXR9IG11c3QgYmUgY2FsbGVkIGZvciB0aGUgbWFwIHRvIGJlXG4gKiByZW5kZXJlZC4gSWYgcGFzc2VkIGJ5IGVsZW1lbnQsIHRoZSBjb250YWluZXIgY2FuIGJlIGluIGEgc2Vjb25kYXJ5IGRvY3VtZW50LlxuICogQHByb3BlcnR5IHtWaWV3fSBbdmlld10gVGhlIG1hcCdzIHZpZXcuICBObyBsYXllciBzb3VyY2VzIHdpbGwgYmVcbiAqIGZldGNoZWQgdW5sZXNzIHRoaXMgaXMgc3BlY2lmaWVkIGF0IGNvbnN0cnVjdGlvbiB0aW1lIG9yIHRocm91Z2hcbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcCNzZXRWaWV3fS5cbiAqL1xuLyoqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9NYXBCcm93c2VyRXZlbnQuanNcIikuTWFwQnJvd3NlckV2ZW50XG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9NYXBFdmVudC5qc1wiKS5NYXBFdmVudFxuICogQGZpcmVzIGltcG9ydChcIi4vcmVuZGVyL0V2ZW50LmpzXCIpLmRlZmF1bHQjcHJlY29tcG9zZVxuICogQGZpcmVzIGltcG9ydChcIi4vcmVuZGVyL0V2ZW50LmpzXCIpLmRlZmF1bHQjcG9zdGNvbXBvc2VcbiAqIEBmaXJlcyBpbXBvcnQoXCIuL3JlbmRlci9FdmVudC5qc1wiKS5kZWZhdWx0I3JlbmRlcmNvbXBsZXRlXG4gKiBAYXBpXG4gKi9cbnZhciBQbHVnZ2FibGVNYXAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBsdWdnYWJsZU1hcCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01hcE9wdGlvbnN9IG9wdGlvbnMgTWFwIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUGx1Z2dhYmxlTWFwKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnNJbnRlcm5hbCA9IGNyZWF0ZU9wdGlvbnNJbnRlcm5hbChvcHRpb25zKTtcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIF90aGlzLmJvdW5kSGFuZGxlQnJvd3NlckV2ZW50XyA9IF90aGlzLmhhbmRsZUJyb3dzZXJFdmVudC5iaW5kKF90aGlzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhUaWxlc0xvYWRpbmdfID1cbiAgICAgICAgICAgIG9wdGlvbnMubWF4VGlsZXNMb2FkaW5nICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heFRpbGVzTG9hZGluZyA6IDE2O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsUmF0aW9fID1cbiAgICAgICAgICAgIG9wdGlvbnMucGl4ZWxSYXRpbyAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLnBpeGVsUmF0aW9cbiAgICAgICAgICAgICAgICA6IERFVklDRV9QSVhFTF9SQVRJTztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHsqfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmltYXRpb25EZWxheUtleV87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5pbWF0aW9uRGVsYXlfID0gLyoqIEB0aGlzIHtQbHVnZ2FibGVNYXB9ICovIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJGcmFtZV8oRGF0ZS5ub3coKSk7XG4gICAgICAgIH0uYmluZChfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZnJhbWVJbmRleF8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9GcmFtZVN0YXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZnJhbWVTdGF0ZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGV4dGVudCBhdCB0aGUgcHJldmlvdXMgJ21vdmVlbmQnIGV2ZW50LlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucHJldmlvdXNFeHRlbnRfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0FycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshSFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgX3RoaXMudmlld3BvcnRfLmNsYXNzTmFtZSA9XG4gICAgICAgICAgICAnb2wtdmlld3BvcnQnICsgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyA/ICcgb2wtdG91Y2gnIDogJycpO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgX3RoaXMudmlld3BvcnRfLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJfLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUuekluZGV4ID0gJzAnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXy5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXy5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXy5jbGFzc05hbWUgPSAnb2wtb3ZlcmxheWNvbnRhaW5lcic7XG4gICAgICAgIF90aGlzLnZpZXdwb3J0Xy5hcHBlbmRDaGlsZChfdGhpcy5vdmVybGF5Q29udGFpbmVyXyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUhUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5zdHlsZS56SW5kZXggPSAnMCc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLmNsYXNzTmFtZSA9ICdvbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudCc7XG4gICAgICAgIF90aGlzLnZpZXdwb3J0Xy5hcHBlbmRDaGlsZChfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7TWFwQnJvd3NlckV2ZW50SGFuZGxlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tb3ZlVG9sZXJhbmNlXyA9IG9wdGlvbnMubW92ZVRvbGVyYW5jZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudHxEb2N1bWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmtleWJvYXJkRXZlbnRUYXJnZXRfID0gb3B0aW9uc0ludGVybmFsLmtleWJvYXJkRXZlbnRUYXJnZXQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0FycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5rZXlIYW5kbGVyS2V5c18gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRyb2xzID0gb3B0aW9uc0ludGVybmFsLmNvbnRyb2xzIHx8IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbnRlcmFjdGlvbnMgPSBvcHRpb25zSW50ZXJuYWwuaW50ZXJhY3Rpb25zIHx8IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vdmVybGF5c18gPSBvcHRpb25zSW50ZXJuYWwub3ZlcmxheXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxvb2t1cCBvZiBvdmVybGF5cyBieSBpZC5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm92ZXJsYXlJZEluZGV4XyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vcmVuZGVyZXIvTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlcl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3VuZGVmaW5lZHxmdW5jdGlvbihFdmVudCk6IHZvaWR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5oYW5kbGVSZXNpemVfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxQb3N0UmVuZGVyRnVuY3Rpb24+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucG9zdFJlbmRlckZ1bmN0aW9uc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtUaWxlUXVldWV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlUXVldWVfID0gbmV3IFRpbGVRdWV1ZShfdGhpcy5nZXRUaWxlUHJpb3JpdHkuYmluZChfdGhpcyksIF90aGlzLmhhbmRsZVRpbGVDaGFuZ2VfLmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihnZXRDaGFuZ2VFdmVudFR5cGUoTWFwUHJvcGVydHkuTEFZRVJHUk9VUCksIF90aGlzLmhhbmRsZUxheWVyR3JvdXBDaGFuZ2VkXyk7XG4gICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoZ2V0Q2hhbmdlRXZlbnRUeXBlKE1hcFByb3BlcnR5LlZJRVcpLCBfdGhpcy5oYW5kbGVWaWV3Q2hhbmdlZF8pO1xuICAgICAgICBfdGhpcy5hZGRFdmVudExpc3RlbmVyKGdldENoYW5nZUV2ZW50VHlwZShNYXBQcm9wZXJ0eS5TSVpFKSwgX3RoaXMuaGFuZGxlU2l6ZUNoYW5nZWRfKTtcbiAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihnZXRDaGFuZ2VFdmVudFR5cGUoTWFwUHJvcGVydHkuVEFSR0VUKSwgX3RoaXMuaGFuZGxlVGFyZ2V0Q2hhbmdlZF8pO1xuICAgICAgICAvLyBzZXRQcm9wZXJ0aWVzIHdpbGwgdHJpZ2dlciB0aGUgcmVuZGVyaW5nIG9mIHRoZSBtYXAgaWYgdGhlIG1hcFxuICAgICAgICAvLyBpcyBcImRlZmluZWRcIiBhbHJlYWR5LlxuICAgICAgICBfdGhpcy5zZXRQcm9wZXJ0aWVzKG9wdGlvbnNJbnRlcm5hbC52YWx1ZXMpO1xuICAgICAgICBfdGhpcy5jb250cm9scy5mb3JFYWNoKFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0fSBjb250cm9sIENvbnRyb2wuXG4gICAgICAgICAqIEB0aGlzIHtQbHVnZ2FibGVNYXB9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoY29udHJvbCkge1xuICAgICAgICAgICAgY29udHJvbC5zZXRNYXAodGhpcyk7XG4gICAgICAgIH0uYmluZChfdGhpcykpO1xuICAgICAgICBfdGhpcy5jb250cm9scy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcCh0aGlzKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLmNvbnRyb2xzLmFkZEV2ZW50TGlzdGVuZXIoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKG51bGwpO1xuICAgICAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMuaW50ZXJhY3Rpb25zLmZvckVhY2goXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdH0gaW50ZXJhY3Rpb24gSW50ZXJhY3Rpb24uXG4gICAgICAgICAqIEB0aGlzIHtQbHVnZ2FibGVNYXB9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgICAgIGludGVyYWN0aW9uLnNldE1hcCh0aGlzKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLmludGVyYWN0aW9ucy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcCh0aGlzKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLmludGVyYWN0aW9ucy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcChudWxsKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLm92ZXJsYXlzXy5mb3JFYWNoKF90aGlzLmFkZE92ZXJsYXlJbnRlcm5hbF8uYmluZChfdGhpcykpO1xuICAgICAgICBfdGhpcy5vdmVybGF5c18uYWRkRXZlbnRMaXN0ZW5lcihDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdGhpcy5hZGRPdmVybGF5SW50ZXJuYWxfKFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gKi8gKGV2ZW50LmVsZW1lbnQpKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLm92ZXJsYXlzXy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgb3ZlcmxheSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR9ICovIChldmVudC5lbGVtZW50KTtcbiAgICAgICAgICAgIHZhciBpZCA9IG92ZXJsYXkuZ2V0SWQoKTtcbiAgICAgICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMub3ZlcmxheUlkSW5kZXhfW2lkLnRvU3RyaW5nKCldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXZlbnQuZWxlbWVudC5zZXRNYXAobnVsbCk7XG4gICAgICAgIH0uYmluZChfdGhpcykpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcmVuZGVyZXIvTWFwLmpzXCIpLmRlZmF1bHR9IFRoZSBtYXAgcmVuZGVyZXJcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZSBhIG1hcCB0eXBlIHRoYXQgaGFzIGEgY3JlYXRlUmVuZGVyZXIgbWV0aG9kJyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIGdpdmVuIGNvbnRyb2wgdG8gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHR9IGNvbnRyb2wgQ29udHJvbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRDb250cm9sID0gZnVuY3Rpb24gKGNvbnRyb2wpIHtcbiAgICAgICAgdGhpcy5nZXRDb250cm9scygpLnB1c2goY29udHJvbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIGdpdmVuIGludGVyYWN0aW9uIHRvIHRoZSBtYXAuIElmIHlvdSB3YW50IHRvIGFkZCBhbiBpbnRlcmFjdGlvblxuICAgICAqIGF0IGFub3RoZXIgcG9pbnQgb2YgdGhlIGNvbGxlY3Rpb24gdXNlIGBnZXRJbnRlcmFjdGlvbigpYCBhbmQgdGhlIG1ldGhvZHNcbiAgICAgKiBhdmFpbGFibGUgb24ge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259LiBUaGlzIGNhbiBiZSB1c2VkIHRvXG4gICAgICogc3RvcCB0aGUgZXZlbnQgcHJvcGFnYXRpb24gZnJvbSB0aGUgaGFuZGxlRXZlbnQgZnVuY3Rpb24uIFRoZSBpbnRlcmFjdGlvbnNcbiAgICAgKiBnZXQgdG8gaGFuZGxlIHRoZSBldmVudHMgaW4gdGhlIHJldmVyc2Ugb3JkZXIgb2YgdGhpcyBjb2xsZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0fSBpbnRlcmFjdGlvbiBJbnRlcmFjdGlvbiB0byBhZGQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuYWRkSW50ZXJhY3Rpb24gPSBmdW5jdGlvbiAoaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgdGhpcy5nZXRJbnRlcmFjdGlvbnMoKS5wdXNoKGludGVyYWN0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIGdpdmVuIGxheWVyIHRvIHRoZSB0b3Agb2YgdGhpcyBtYXAuIElmIHlvdSB3YW50IHRvIGFkZCBhIGxheWVyXG4gICAgICogZWxzZXdoZXJlIGluIHRoZSBzdGFjaywgdXNlIGBnZXRMYXllcnMoKWAgYW5kIHRoZSBtZXRob2RzIGF2YWlsYWJsZSBvblxuICAgICAqIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRMYXllciA9IGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICB2YXIgbGF5ZXJzID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKCk7XG4gICAgICAgIGxheWVycy5wdXNoKGxheWVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZCB0aGUgZ2l2ZW4gb3ZlcmxheSB0byB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR9IG92ZXJsYXkgT3ZlcmxheS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRPdmVybGF5ID0gZnVuY3Rpb24gKG92ZXJsYXkpIHtcbiAgICAgICAgdGhpcy5nZXRPdmVybGF5cygpLnB1c2gob3ZlcmxheSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGlzIGRlYWxzIHdpdGggbWFwJ3Mgb3ZlcmxheSBjb2xsZWN0aW9uIGNoYW5nZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gb3ZlcmxheSBPdmVybGF5LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRPdmVybGF5SW50ZXJuYWxfID0gZnVuY3Rpb24gKG92ZXJsYXkpIHtcbiAgICAgICAgdmFyIGlkID0gb3ZlcmxheS5nZXRJZCgpO1xuICAgICAgICBpZiAoaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5vdmVybGF5SWRJbmRleF9baWQudG9TdHJpbmcoKV0gPSBvdmVybGF5O1xuICAgICAgICB9XG4gICAgICAgIG92ZXJsYXkuc2V0TWFwKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRUYXJnZXQobnVsbCk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlY3QgZmVhdHVyZXMgdGhhdCBpbnRlcnNlY3QgYSBwaXhlbCBvbiB0aGUgdmlld3BvcnQsIGFuZCBleGVjdXRlIGFcbiAgICAgKiBjYWxsYmFjayB3aXRoIGVhY2ggaW50ZXJzZWN0aW5nIGZlYXR1cmUuIExheWVycyBpbmNsdWRlZCBpbiB0aGUgZGV0ZWN0aW9uIGNhblxuICAgICAqIGJlIGNvbmZpZ3VyZWQgdGhyb3VnaCB0aGUgYGxheWVyRmlsdGVyYCBvcHRpb24gaW4gYG9wdF9vcHRpb25zYC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlLCBpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQsIGltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0KTogVH0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay4gVGhlIGNhbGxiYWNrIHdpbGwgYmVcbiAgICAgKiAgICAgY2FsbGVkIHdpdGggdHdvIGFyZ3VtZW50cy4gVGhlIGZpcnN0IGFyZ3VtZW50IGlzIG9uZVxuICAgICAqICAgICB7QGxpbmsgbW9kdWxlOm9sL0ZlYXR1cmUgZmVhdHVyZX0gb3JcbiAgICAgKiAgICAge0BsaW5rIG1vZHVsZTpvbC9yZW5kZXIvRmVhdHVyZSByZW5kZXIgZmVhdHVyZX0gYXQgdGhlIHBpeGVsLCB0aGUgc2Vjb25kIGlzXG4gICAgICogICAgIHRoZSB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyIGxheWVyfSBvZiB0aGUgZmVhdHVyZSBhbmQgd2lsbCBiZSBudWxsIGZvclxuICAgICAqICAgICB1bm1hbmFnZWQgbGF5ZXJzLiBUbyBzdG9wIGRldGVjdGlvbiwgY2FsbGJhY2sgZnVuY3Rpb25zIGNhbiByZXR1cm4gYVxuICAgICAqICAgICB0cnV0aHkgdmFsdWUuXG4gICAgICogQHBhcmFtIHtBdFBpeGVsT3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdCwgaS5lLiB0aGUgcmV0dXJuIHZhbHVlIG9mIGxhc3RcbiAgICAgKiBjYWxsYmFjayBleGVjdXRpb24sIG9yIHRoZSBmaXJzdCB0cnV0aHkgY2FsbGJhY2sgcmV0dXJuIHZhbHVlLlxuICAgICAqIEB0ZW1wbGF0ZSBTLFRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIGNhbGxiYWNrLCBvcHRfb3B0aW9ucykge1xuICAgICAgICBpZiAoIXRoaXMuZnJhbWVTdGF0ZV8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY29vcmRpbmF0ZSA9IHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKHBpeGVsKTtcbiAgICAgICAgb3B0X29wdGlvbnMgPSBvcHRfb3B0aW9ucyAhPT0gdW5kZWZpbmVkID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgdmFyIGhpdFRvbGVyYW5jZSA9IG9wdF9vcHRpb25zLmhpdFRvbGVyYW5jZSAhPT0gdW5kZWZpbmVkID8gb3B0X29wdGlvbnMuaGl0VG9sZXJhbmNlIDogMDtcbiAgICAgICAgdmFyIGxheWVyRmlsdGVyID0gb3B0X29wdGlvbnMubGF5ZXJGaWx0ZXIgIT09IHVuZGVmaW5lZCA/IG9wdF9vcHRpb25zLmxheWVyRmlsdGVyIDogVFJVRTtcbiAgICAgICAgdmFyIGNoZWNrV3JhcHBlZCA9IG9wdF9vcHRpb25zLmNoZWNrV3JhcHBlZCAhPT0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyXy5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShjb29yZGluYXRlLCB0aGlzLmZyYW1lU3RhdGVfLCBoaXRUb2xlcmFuY2UsIGNoZWNrV3JhcHBlZCwgY2FsbGJhY2ssIG51bGwsIGxheWVyRmlsdGVyLCBudWxsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhbGwgZmVhdHVyZXMgdGhhdCBpbnRlcnNlY3QgYSBwaXhlbCBvbiB0aGUgdmlld3BvcnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge0F0UGl4ZWxPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2U+fSBUaGUgZGV0ZWN0ZWQgZmVhdHVyZXMgb3JcbiAgICAgKiBhbiBlbXB0eSBhcnJheSBpZiBub25lIHdlcmUgZm91bmQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0RmVhdHVyZXNBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgZmVhdHVyZXMgPSBbXTtcbiAgICAgICAgdGhpcy5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwocGl4ZWwsIGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xuICAgICAgICB9LCBvcHRfb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBmZWF0dXJlcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVjdCBsYXllcnMgdGhhdCBoYXZlIGEgY29sb3IgdmFsdWUgYXQgYSBwaXhlbCBvbiB0aGUgdmlld3BvcnQsIGFuZFxuICAgICAqIGV4ZWN1dGUgYSBjYWxsYmFjayB3aXRoIGVhY2ggbWF0Y2hpbmcgbGF5ZXIuIExheWVycyBpbmNsdWRlZCBpbiB0aGVcbiAgICAgKiBkZXRlY3Rpb24gY2FuIGJlIGNvbmZpZ3VyZWQgdGhyb3VnaCBgb3B0X2xheWVyRmlsdGVyYC5cbiAgICAgKlxuICAgICAqIE5vdGU6IHRoaXMgbWF5IGdpdmUgZmFsc2UgcG9zaXRpdmVzIHVubGVzcyB0aGUgbWFwIGxheWVycyBoYXZlIGhhZCBkaWZmZXJlbnQgYGNsYXNzTmFtZWBcbiAgICAgKiBwcm9wZXJ0aWVzIGFzc2lnbmVkIHRvIHRoZW0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogUywgaW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0LCAoVWludDhDbGFtcGVkQXJyYXl8VWludDhBcnJheSkpOiBUfSBjYWxsYmFja1xuICAgICAqICAgICBMYXllciBjYWxsYmFjay4gVGhpcyBjYWxsYmFjayB3aWxsIHJlY2VpdmUgdHdvIGFyZ3VtZW50czogZmlyc3QgaXMgdGhlXG4gICAgICogICAgIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXIgbGF5ZXJ9LCBzZWNvbmQgYXJndW1lbnQgaXMgYW4gYXJyYXkgcmVwcmVzZW50aW5nXG4gICAgICogICAgIFtSLCBHLCBCLCBBXSBwaXhlbCB2YWx1ZXMgKDAgLSAyNTUpIGFuZCB3aWxsIGJlIGBudWxsYCBmb3IgbGF5ZXIgdHlwZXNcbiAgICAgKiAgICAgdGhhdCBkbyBub3QgY3VycmVudGx5IHN1cHBvcnQgdGhpcyBhcmd1bWVudC4gVG8gc3RvcCBkZXRlY3Rpb24sIGNhbGxiYWNrXG4gICAgICogICAgIGZ1bmN0aW9ucyBjYW4gcmV0dXJuIGEgdHJ1dGh5IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7QXRQaXhlbE9wdGlvbnM9fSBvcHRfb3B0aW9ucyBDb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdCwgaS5lLiB0aGUgcmV0dXJuIHZhbHVlIG9mIGxhc3RcbiAgICAgKiBjYWxsYmFjayBleGVjdXRpb24sIG9yIHRoZSBmaXJzdCB0cnV0aHkgY2FsbGJhY2sgcmV0dXJuIHZhbHVlLlxuICAgICAqIEB0ZW1wbGF0ZSBTLFRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5mb3JFYWNoTGF5ZXJBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBjYWxsYmFjaywgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZyYW1lU3RhdGVfKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyIGhpdFRvbGVyYW5jZSA9IG9wdGlvbnMuaGl0VG9sZXJhbmNlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmhpdFRvbGVyYW5jZSA6IDA7XG4gICAgICAgIHZhciBsYXllckZpbHRlciA9IG9wdGlvbnMubGF5ZXJGaWx0ZXIgfHwgVFJVRTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfLmZvckVhY2hMYXllckF0UGl4ZWwocGl4ZWwsIHRoaXMuZnJhbWVTdGF0ZV8sIGhpdFRvbGVyYW5jZSwgY2FsbGJhY2ssIGxheWVyRmlsdGVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVjdCBpZiBmZWF0dXJlcyBpbnRlcnNlY3QgYSBwaXhlbCBvbiB0aGUgdmlld3BvcnQuIExheWVycyBpbmNsdWRlZCBpbiB0aGVcbiAgICAgKiBkZXRlY3Rpb24gY2FuIGJlIGNvbmZpZ3VyZWQgdGhyb3VnaCBgb3B0X2xheWVyRmlsdGVyYC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwYXJhbSB7QXRQaXhlbE9wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25hbCBvcHRpb25zLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIHRoZXJlIGEgZmVhdHVyZSBhdCB0aGUgZ2l2ZW4gcGl4ZWw/XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFzRmVhdHVyZUF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb29yZGluYXRlID0gdGhpcy5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwocGl4ZWwpO1xuICAgICAgICBvcHRfb3B0aW9ucyA9IG9wdF9vcHRpb25zICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgbGF5ZXJGaWx0ZXIgPSBvcHRfb3B0aW9ucy5sYXllckZpbHRlciAhPT0gdW5kZWZpbmVkID8gb3B0X29wdGlvbnMubGF5ZXJGaWx0ZXIgOiBUUlVFO1xuICAgICAgICB2YXIgaGl0VG9sZXJhbmNlID0gb3B0X29wdGlvbnMuaGl0VG9sZXJhbmNlICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucy5oaXRUb2xlcmFuY2UgOiAwO1xuICAgICAgICB2YXIgY2hlY2tXcmFwcGVkID0gb3B0X29wdGlvbnMuY2hlY2tXcmFwcGVkICE9PSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfLmhhc0ZlYXR1cmVBdENvb3JkaW5hdGUoY29vcmRpbmF0ZSwgdGhpcy5mcmFtZVN0YXRlXywgaGl0VG9sZXJhbmNlLCBjaGVja1dyYXBwZWQsIGxheWVyRmlsdGVyLCBudWxsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGNvb3JkaW5hdGUgaW4gdXNlciBwcm9qZWN0aW9uIGZvciBhIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRFdmVudENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbCh0aGlzLmdldEV2ZW50UGl4ZWwoZXZlbnQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGNvb3JkaW5hdGUgaW4gdmlldyBwcm9qZWN0aW9uIGZvciBhIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldEV2ZW50Q29vcmRpbmF0ZUludGVybmFsID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbCh0aGlzLmdldEV2ZW50UGl4ZWwoZXZlbnQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG1hcCBwaXhlbCBwb3NpdGlvbiBmb3IgYSBicm93c2VyIGV2ZW50IHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydC5cbiAgICAgKiBAcGFyYW0ge1VJRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IFBpeGVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldEV2ZW50UGl4ZWwgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHZpZXdwb3J0UG9zaXRpb24gPSB0aGlzLnZpZXdwb3J0Xy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIGV2ZW50UG9zaXRpb24gPSBcbiAgICAgICAgLy9GSVhNRSBBcmUgd2UgcmVhbGx5IGNhbGxpbmcgdGhpcyB3aXRoIGEgVG91Y2hFdmVudCBhbnl3aGVyZT9cbiAgICAgICAgJ2NoYW5nZWRUb3VjaGVzJyBpbiBldmVudFxuICAgICAgICAgICAgPyAvKiogQHR5cGUge1RvdWNoRXZlbnR9ICovIChldmVudCkuY2hhbmdlZFRvdWNoZXNbMF1cbiAgICAgICAgICAgIDogLyoqIEB0eXBlIHtNb3VzZUV2ZW50fSAqLyAoZXZlbnQpO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgZXZlbnRQb3NpdGlvbi5jbGllbnRYIC0gdmlld3BvcnRQb3NpdGlvbi5sZWZ0LFxuICAgICAgICAgICAgZXZlbnRQb3NpdGlvbi5jbGllbnRZIC0gdmlld3BvcnRQb3NpdGlvbi50b3AsXG4gICAgICAgIF07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRhcmdldCBpbiB3aGljaCB0aGlzIG1hcCBpcyByZW5kZXJlZC5cbiAgICAgKiBOb3RlIHRoYXQgdGhpcyByZXR1cm5zIHdoYXQgaXMgZW50ZXJlZCBhcyBhbiBvcHRpb24gb3IgaW4gc2V0VGFyZ2V0OlxuICAgICAqIGlmIHRoYXQgd2FzIGFuIGVsZW1lbnQsIGl0IHJldHVybnMgYW4gZWxlbWVudDsgaWYgYSBzdHJpbmcsIGl0IHJldHVybnMgdGhhdC5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudHxzdHJpbmd8dW5kZWZpbmVkfSBUaGUgRWxlbWVudCBvciBpZCBvZiB0aGUgRWxlbWVudCB0aGF0IHRoZVxuICAgICAqICAgICBtYXAgaXMgcmVuZGVyZWQgaW4uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRUYXJnZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge0hUTUxFbGVtZW50fHN0cmluZ3x1bmRlZmluZWR9ICovICh0aGlzLmdldChNYXBQcm9wZXJ0eS5UQVJHRVQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgRE9NIGVsZW1lbnQgaW50byB3aGljaCB0aGlzIG1hcCBpcyByZW5kZXJlZC4gSW4gY29udHJhc3QgdG9cbiAgICAgKiBgZ2V0VGFyZ2V0YCB0aGlzIG1ldGhvZCBhbHdheXMgcmV0dXJuIGFuIGBFbGVtZW50YCwgb3IgYG51bGxgIGlmIHRoZVxuICAgICAqIG1hcCBoYXMgbm8gdGFyZ2V0LlxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBUaGUgZWxlbWVudCB0aGF0IHRoZSBtYXAgaXMgcmVuZGVyZWQgaW4uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0VGFyZ2V0RWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuZ2V0VGFyZ2V0KCk7XG4gICAgICAgIGlmICh0YXJnZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXQpXG4gICAgICAgICAgICAgICAgOiB0YXJnZXQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb29yZGluYXRlIGZvciBhIGdpdmVuIHBpeGVsLiAgVGhpcyByZXR1cm5zIGEgY29vcmRpbmF0ZSBpbiB0aGVcbiAgICAgKiB1c2VyIHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUaGUgY29vcmRpbmF0ZSBmb3IgdGhlIHBpeGVsIHBvc2l0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgcmV0dXJuIHRvVXNlckNvb3JkaW5hdGUodGhpcy5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwocGl4ZWwpLCB0aGlzLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb29yZGluYXRlIGZvciBhIGdpdmVuIHBpeGVsLiAgVGhpcyByZXR1cm5zIGEgY29vcmRpbmF0ZSBpbiB0aGVcbiAgICAgKiBtYXAgdmlldyBwcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwgcG9zaXRpb24gaW4gdGhlIG1hcCB2aWV3cG9ydC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVGhlIGNvb3JkaW5hdGUgZm9yIHRoZSBwaXhlbCBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbCA9IGZ1bmN0aW9uIChwaXhlbCkge1xuICAgICAgICB2YXIgZnJhbWVTdGF0ZSA9IHRoaXMuZnJhbWVTdGF0ZV87XG4gICAgICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSwgcGl4ZWwuc2xpY2UoKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWFwIGNvbnRyb2xzLiBNb2RpZnlpbmcgdGhpcyBjb2xsZWN0aW9uIGNoYW5nZXMgdGhlIGNvbnRyb2xzXG4gICAgICogYXNzb2NpYXRlZCB3aXRoIHRoZSBtYXAuXG4gICAgICogQHJldHVybiB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gQ29udHJvbHMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0Q29udHJvbHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRyb2xzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXAgb3ZlcmxheXMuIE1vZGlmeWluZyB0aGlzIGNvbGxlY3Rpb24gY2hhbmdlcyB0aGUgb3ZlcmxheXNcbiAgICAgKiBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcC5cbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn0gT3ZlcmxheXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0T3ZlcmxheXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXlzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhbiBvdmVybGF5IGJ5IGl0cyBpZGVudGlmaWVyICh0aGUgdmFsdWUgcmV0dXJuZWQgYnkgb3ZlcmxheS5nZXRJZCgpKS5cbiAgICAgKiBOb3RlIHRoYXQgdGhlIGluZGV4IHRyZWF0cyBzdHJpbmcgYW5kIG51bWVyaWMgaWRlbnRpZmllcnMgYXMgdGhlIHNhbWUuIFNvXG4gICAgICogYG1hcC5nZXRPdmVybGF5QnlJZCgyKWAgd2lsbCByZXR1cm4gYW4gb3ZlcmxheSB3aXRoIGlkIGAnMidgIG9yIGAyYC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGlkIE92ZXJsYXkgaWRlbnRpZmllci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gT3ZlcmxheS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRPdmVybGF5QnlJZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICB2YXIgb3ZlcmxheSA9IHRoaXMub3ZlcmxheUlkSW5kZXhfW2lkLnRvU3RyaW5nKCldO1xuICAgICAgICByZXR1cm4gb3ZlcmxheSAhPT0gdW5kZWZpbmVkID8gb3ZlcmxheSA6IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hcCBpbnRlcmFjdGlvbnMuIE1vZGlmeWluZyB0aGlzIGNvbGxlY3Rpb24gY2hhbmdlcyB0aGUgaW50ZXJhY3Rpb25zXG4gICAgICogYXNzb2NpYXRlZCB3aXRoIHRoZSBtYXAuXG4gICAgICpcbiAgICAgKiBJbnRlcmFjdGlvbnMgYXJlIHVzZWQgZm9yIGUuZy4gcGFuLCB6b29tIGFuZCByb3RhdGUuXG4gICAgICogQHJldHVybiB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fSBJbnRlcmFjdGlvbnMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0SW50ZXJhY3Rpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcmFjdGlvbnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxheWVyZ3JvdXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbWFwLlxuICAgICAqIEByZXR1cm4ge0xheWVyR3JvdXB9IEEgbGF5ZXIgZ3JvdXAgY29udGFpbmluZyB0aGUgbGF5ZXJzIGluIHRoaXMgbWFwLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0TGF5ZXJHcm91cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7TGF5ZXJHcm91cH0gKi8gKHRoaXMuZ2V0KE1hcFByb3BlcnR5LkxBWUVSR1JPVVApKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29sbGVjdGlvbiBvZiBsYXllcnMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbWFwLlxuICAgICAqIEByZXR1cm4geyFDb2xsZWN0aW9uPGltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0Pn0gTGF5ZXJzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldExheWVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxheWVycyA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVycygpO1xuICAgICAgICByZXR1cm4gbGF5ZXJzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gTGF5ZXJzIGhhdmUgc291cmNlcyB0aGF0IGFyZSBzdGlsbCBsb2FkaW5nLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0TG9hZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxheWVyU3RhdGVzQXJyYXkgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllclN0YXRlc0FycmF5KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVyU3RhdGVzQXJyYXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZXNBcnJheVtpXS5sYXllcjtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gKi8gKGxheWVyKS5nZXRTb3VyY2UoKTtcbiAgICAgICAgICAgIGlmIChzb3VyY2UgJiYgc291cmNlLmxvYWRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBpeGVsIGZvciBhIGNvb3JkaW5hdGUuICBUaGlzIHRha2VzIGEgY29vcmRpbmF0ZSBpbiB0aGUgdXNlclxuICAgICAqIHByb2plY3Rpb24gYW5kIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBBIG1hcCBjb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IEEgcGl4ZWwgcG9zaXRpb24gaW4gdGhlIG1hcCB2aWV3cG9ydC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRQaXhlbEZyb21Db29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgdmFyIHZpZXdDb29yZGluYXRlID0gZnJvbVVzZXJDb29yZGluYXRlKGNvb3JkaW5hdGUsIHRoaXMuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBpeGVsRnJvbUNvb3JkaW5hdGVJbnRlcm5hbCh2aWV3Q29vcmRpbmF0ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBpeGVsIGZvciBhIGNvb3JkaW5hdGUuICBUaGlzIHRha2VzIGEgY29vcmRpbmF0ZSBpbiB0aGUgbWFwIHZpZXdcbiAgICAgKiBwcm9qZWN0aW9uIGFuZCByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHBpeGVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQSBtYXAgY29vcmRpbmF0ZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBBIHBpeGVsIHBvc2l0aW9uIGluIHRoZSBtYXAgdmlld3BvcnQuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRQaXhlbEZyb21Db29yZGluYXRlSW50ZXJuYWwgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSkge1xuICAgICAgICB2YXIgZnJhbWVTdGF0ZSA9IHRoaXMuZnJhbWVTdGF0ZV87XG4gICAgICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgY29vcmRpbmF0ZS5zbGljZSgwLCAyKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWFwIHJlbmRlcmVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcmVuZGVyZXIvTWFwLmpzXCIpLmRlZmF1bHR9IFJlbmRlcmVyXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzaXplIG9mIHRoaXMgbWFwLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfHVuZGVmaW5lZH0gVGhlIHNpemUgaW4gcGl4ZWxzIG9mIHRoZSBtYXAgaW4gdGhlIERPTS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KE1hcFByb3BlcnR5LlNJWkUpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmlldyBhc3NvY2lhdGVkIHdpdGggdGhpcyBtYXAuIEEgdmlldyBtYW5hZ2VzIHByb3BlcnRpZXMgc3VjaCBhc1xuICAgICAqIGNlbnRlciBhbmQgcmVzb2x1dGlvbi5cbiAgICAgKiBAcmV0dXJuIHtWaWV3fSBUaGUgdmlldyB0aGF0IGNvbnRyb2xzIHRoaXMgbWFwLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0VmlldyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7Vmlld30gKi8gKHRoaXMuZ2V0KE1hcFByb3BlcnR5LlZJRVcpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZWxlbWVudCB0aGF0IHNlcnZlcyBhcyB0aGUgbWFwIHZpZXdwb3J0LlxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBWaWV3cG9ydC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRWaWV3cG9ydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld3BvcnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBlbGVtZW50IHRoYXQgc2VydmVzIGFzIHRoZSBjb250YWluZXIgZm9yIG92ZXJsYXlzLiAgRWxlbWVudHMgYWRkZWQgdG9cbiAgICAgKiB0aGlzIGNvbnRhaW5lciB3aWxsIGxldCBtb3VzZWRvd24gYW5kIHRvdWNoc3RhcnQgZXZlbnRzIHRocm91Z2ggdG8gdGhlIG1hcCxcbiAgICAgKiBzbyBjbGlja3MgYW5kIGdlc3R1cmVzIG9uIGFuIG92ZXJsYXkgd2lsbCB0cmlnZ2VyIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH1cbiAgICAgKiBldmVudHMuXG4gICAgICogQHJldHVybiB7IUhUTUxFbGVtZW50fSBUaGUgbWFwJ3Mgb3ZlcmxheSBjb250YWluZXIuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRPdmVybGF5Q29udGFpbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdmVybGF5Q29udGFpbmVyXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZWxlbWVudCB0aGF0IHNlcnZlcyBhcyBhIGNvbnRhaW5lciBmb3Igb3ZlcmxheXMgdGhhdCBkb24ndCBhbGxvd1xuICAgICAqIGV2ZW50IHByb3BhZ2F0aW9uLiBFbGVtZW50cyBhZGRlZCB0byB0aGlzIGNvbnRhaW5lciB3b24ndCBsZXQgbW91c2Vkb3duIGFuZFxuICAgICAqIHRvdWNoc3RhcnQgZXZlbnRzIHRocm91Z2ggdG8gdGhlIG1hcCwgc28gY2xpY2tzIGFuZCBnZXN0dXJlcyBvbiBhbiBvdmVybGF5XG4gICAgICogZG9uJ3QgdHJpZ2dlciBhbnkge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fS5cbiAgICAgKiBAcmV0dXJuIHshSFRNTEVsZW1lbnR9IFRoZSBtYXAncyBvdmVybGF5IGNvbnRhaW5lciB0aGF0IHN0b3BzIGV2ZW50cy5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldE92ZXJsYXlDb250YWluZXJTdG9wRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7IURvY3VtZW50fSBUaGUgZG9jdW1lbnQgd2hlcmUgdGhlIG1hcCBpcyBkaXNwbGF5ZWQuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRPd25lckRvY3VtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRUYXJnZXRFbGVtZW50KClcbiAgICAgICAgICAgID8gdGhpcy5nZXRUYXJnZXRFbGVtZW50KCkub3duZXJEb2N1bWVudFxuICAgICAgICAgICAgOiBkb2N1bWVudDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGlsZVNvdXJjZUtleSBUaWxlIHNvdXJjZSBrZXkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gdGlsZUNlbnRlciBUaWxlIGNlbnRlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGlsZVJlc29sdXRpb24gVGlsZSByZXNvbHV0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGlsZSBwcmlvcml0eS5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFRpbGVQcmlvcml0eSA9IGZ1bmN0aW9uICh0aWxlLCB0aWxlU291cmNlS2V5LCB0aWxlQ2VudGVyLCB0aWxlUmVzb2x1dGlvbikge1xuICAgICAgICByZXR1cm4gZ2V0VGlsZVByaW9yaXR5KHRoaXMuZnJhbWVTdGF0ZV8sIHRpbGUsIHRpbGVTb3VyY2VLZXksIHRpbGVDZW50ZXIsIHRpbGVSZXNvbHV0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7VUlFdmVudH0gYnJvd3NlckV2ZW50IEJyb3dzZXIgZXZlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfdHlwZSBUeXBlLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlQnJvd3NlckV2ZW50ID0gZnVuY3Rpb24gKGJyb3dzZXJFdmVudCwgb3B0X3R5cGUpIHtcbiAgICAgICAgdmFyIHR5cGUgPSBvcHRfdHlwZSB8fCBicm93c2VyRXZlbnQudHlwZTtcbiAgICAgICAgdmFyIG1hcEJyb3dzZXJFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQodHlwZSwgdGhpcywgYnJvd3NlckV2ZW50KTtcbiAgICAgICAgdGhpcy5oYW5kbGVNYXBCcm93c2VyRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TWFwQnJvd3NlckV2ZW50fSBtYXBCcm93c2VyRXZlbnQgVGhlIGV2ZW50IHRvIGhhbmRsZS5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZU1hcEJyb3dzZXJFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZyYW1lU3RhdGVfKSB7XG4gICAgICAgICAgICAvLyBXaXRoIG5vIHZpZXcgZGVmaW5lZCwgd2UgY2Fubm90IHRyYW5zbGF0ZSBwaXhlbHMgaW50byBnZW9ncmFwaGljYWxcbiAgICAgICAgICAgIC8vIGNvb3JkaW5hdGVzIHNvIGludGVyYWN0aW9ucyBjYW5ub3QgYmUgdXNlZC5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7UG9pbnRlckV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICB2YXIgZXZlbnRUeXBlID0gb3JpZ2luYWxFdmVudC50eXBlO1xuICAgICAgICBpZiAoZXZlbnRUeXBlID09PSBQb2ludGVyRXZlbnRUeXBlLlBPSU5URVJET1dOIHx8XG4gICAgICAgICAgICBldmVudFR5cGUgPT09IEV2ZW50VHlwZS5XSEVFTCB8fFxuICAgICAgICAgICAgZXZlbnRUeXBlID09PSBFdmVudFR5cGUuS0VZRE9XTikge1xuICAgICAgICAgICAgdmFyIGRvYyA9IHRoaXMuZ2V0T3duZXJEb2N1bWVudCgpO1xuICAgICAgICAgICAgdmFyIHJvb3ROb2RlID0gdGhpcy52aWV3cG9ydF8uZ2V0Um9vdE5vZGVcbiAgICAgICAgICAgICAgICA/IHRoaXMudmlld3BvcnRfLmdldFJvb3ROb2RlKClcbiAgICAgICAgICAgICAgICA6IGRvYztcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAnaG9zdCcgaW4gcm9vdE5vZGUgLy8gU2hhZG93Um9vdFxuICAgICAgICAgICAgICAgID8gLyoqIEB0eXBlIHtTaGFkb3dSb290fSAqLyAocm9vdE5vZGUpLmVsZW1lbnRGcm9tUG9pbnQob3JpZ2luYWxFdmVudC5jbGllbnRYLCBvcmlnaW5hbEV2ZW50LmNsaWVudFkpXG4gICAgICAgICAgICAgICAgOiAvKiogQHR5cGUge05vZGV9ICovIChvcmlnaW5hbEV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAvLyBBYm9ydCBpZiB0aGUgdGFyZ2V0IGlzIGEgY2hpbGQgb2YgdGhlIGNvbnRhaW5lciBmb3IgZWxlbWVudHMgd2hvc2UgZXZlbnRzIGFyZSBub3QgbWVhbnRcbiAgICAgICAgICAgIC8vIHRvIGJlIGhhbmRsZWQgYnkgbWFwIGludGVyYWN0aW9ucy5cbiAgICAgICAgICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uY29udGFpbnModGFyZ2V0KSB8fFxuICAgICAgICAgICAgICAgIC8vIEFib3J0IGlmIHRoZSBldmVudCB0YXJnZXQgaXMgYSBjaGlsZCBvZiB0aGUgY29udGFpbmVyIHRoYXQgaXMgbm8gbG9uZ2VyIGluIHRoZSBwYWdlLlxuICAgICAgICAgICAgICAgIC8vIEl0J3MgcG9zc2libGUgZm9yIHRoZSB0YXJnZXQgdG8gbm8gbG9uZ2VyIGJlIGluIHRoZSBwYWdlIGlmIGl0IGhhcyBiZWVuIHJlbW92ZWQgaW4gYW5cbiAgICAgICAgICAgICAgICAvLyBldmVudCBsaXN0ZW5lciwgdGhpcyBtaWdodCBoYXBwZW4gaW4gYSBDb250cm9sIHRoYXQgcmVjcmVhdGVzIGl0J3MgY29udGVudCBiYXNlZCBvblxuICAgICAgICAgICAgICAgIC8vIHVzZXIgaW50ZXJhY3Rpb24gZWl0aGVyIG1hbnVhbGx5IG9yIHZpYSBhIHJlbmRlciBpbiBzb21ldGhpbmcgbGlrZSBodHRwczovL3JlYWN0anMub3JnL1xuICAgICAgICAgICAgICAgICEocm9vdE5vZGUgPT09IGRvYyA/IGRvYy5kb2N1bWVudEVsZW1lbnQgOiByb290Tm9kZSkuY29udGFpbnModGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtYXBCcm93c2VyRXZlbnQuZnJhbWVTdGF0ZSA9IHRoaXMuZnJhbWVTdGF0ZV87XG4gICAgICAgIGlmICh0aGlzLmRpc3BhdGNoRXZlbnQobWFwQnJvd3NlckV2ZW50KSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHZhciBpbnRlcmFjdGlvbnNBcnJheSA9IHRoaXMuZ2V0SW50ZXJhY3Rpb25zKCkuZ2V0QXJyYXkoKS5zbGljZSgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGludGVyYWN0aW9uc0FycmF5Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgdmFyIGludGVyYWN0aW9uID0gaW50ZXJhY3Rpb25zQXJyYXlbaV07XG4gICAgICAgICAgICAgICAgaWYgKGludGVyYWN0aW9uLmdldE1hcCgpICE9PSB0aGlzIHx8XG4gICAgICAgICAgICAgICAgICAgICFpbnRlcmFjdGlvbi5nZXRBY3RpdmUoKSB8fFxuICAgICAgICAgICAgICAgICAgICAhdGhpcy5nZXRUYXJnZXRFbGVtZW50KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjb250ID0gaW50ZXJhY3Rpb24uaGFuZGxlRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbnQgfHwgbWFwQnJvd3NlckV2ZW50LnByb3BhZ2F0aW9uU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVBvc3RSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICAgICAgLy8gTWFuYWdlIHRoZSB0aWxlIHF1ZXVlXG4gICAgICAgIC8vIEltYWdlIGxvYWRzIGFyZSBleHBlbnNpdmUgYW5kIGEgbGltaXRlZCByZXNvdXJjZSwgc28gdHJ5IHRvIHVzZSB0aGVtXG4gICAgICAgIC8vIGVmZmljaWVudGx5OlxuICAgICAgICAvLyAqIFdoZW4gdGhlIHZpZXcgaXMgc3RhdGljIHdlIGFsbG93IGEgbGFyZ2UgbnVtYmVyIG9mIHBhcmFsbGVsIHRpbGUgbG9hZHNcbiAgICAgICAgLy8gICB0byBjb21wbGV0ZSB0aGUgZnJhbWUgYXMgcXVpY2tseSBhcyBwb3NzaWJsZS5cbiAgICAgICAgLy8gKiBXaGVuIGFuaW1hdGluZyBvciBpbnRlcmFjdGluZywgaW1hZ2UgbG9hZHMgY2FuIGNhdXNlIGphbmtzLCBzbyB3ZSByZWR1Y2VcbiAgICAgICAgLy8gICB0aGUgbWF4aW11bSBudW1iZXIgb2YgbG9hZHMgcGVyIGZyYW1lIGFuZCBsaW1pdCB0aGUgbnVtYmVyIG9mIHBhcmFsbGVsXG4gICAgICAgIC8vICAgdGlsZSBsb2FkcyB0byByZW1haW4gcmVhY3RpdmUgdG8gdmlldyBjaGFuZ2VzIGFuZCB0byByZWR1Y2UgdGhlIGNoYW5jZSBvZlxuICAgICAgICAvLyAgIGxvYWRpbmcgdGlsZXMgdGhhdCB3aWxsIHF1aWNrbHkgZGlzYXBwZWFyIGZyb20gdmlldy5cbiAgICAgICAgdmFyIHRpbGVRdWV1ZSA9IHRoaXMudGlsZVF1ZXVlXztcbiAgICAgICAgaWYgKCF0aWxlUXVldWUuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICB2YXIgbWF4VG90YWxMb2FkaW5nID0gdGhpcy5tYXhUaWxlc0xvYWRpbmdfO1xuICAgICAgICAgICAgdmFyIG1heE5ld0xvYWRzID0gbWF4VG90YWxMb2FkaW5nO1xuICAgICAgICAgICAgaWYgKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGludHMgPSBmcmFtZVN0YXRlLnZpZXdIaW50cztcbiAgICAgICAgICAgICAgICBpZiAoaGludHNbVmlld0hpbnQuQU5JTUFUSU5HXSB8fCBoaW50c1tWaWV3SGludC5JTlRFUkFDVElOR10pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvd09uRnJhbWVCdWRnZXQgPSAhSU1BR0VfREVDT0RFICYmIERhdGUubm93KCkgLSBmcmFtZVN0YXRlLnRpbWUgPiA4O1xuICAgICAgICAgICAgICAgICAgICBtYXhUb3RhbExvYWRpbmcgPSBsb3dPbkZyYW1lQnVkZ2V0ID8gMCA6IDg7XG4gICAgICAgICAgICAgICAgICAgIG1heE5ld0xvYWRzID0gbG93T25GcmFtZUJ1ZGdldCA/IDAgOiAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aWxlUXVldWUuZ2V0VGlsZXNMb2FkaW5nKCkgPCBtYXhUb3RhbExvYWRpbmcpIHtcbiAgICAgICAgICAgICAgICB0aWxlUXVldWUucmVwcmlvcml0aXplKCk7IC8vIEZJWE1FIG9ubHkgY2FsbCBpZiB2aWV3IGhhcyBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgdGlsZVF1ZXVlLmxvYWRNb3JlVGlsZXMobWF4VG90YWxMb2FkaW5nLCBtYXhOZXdMb2Fkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZyYW1lU3RhdGUgJiZcbiAgICAgICAgICAgIHRoaXMuaGFzTGlzdGVuZXIoUmVuZGVyRXZlbnRUeXBlLlJFTkRFUkNPTVBMRVRFKSAmJlxuICAgICAgICAgICAgIWZyYW1lU3RhdGUuYW5pbWF0ZSAmJlxuICAgICAgICAgICAgIXRoaXMudGlsZVF1ZXVlXy5nZXRUaWxlc0xvYWRpbmcoKSAmJlxuICAgICAgICAgICAgIXRoaXMuZ2V0TG9hZGluZygpKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyXy5kaXNwYXRjaFJlbmRlckV2ZW50KFJlbmRlckV2ZW50VHlwZS5SRU5ERVJDT01QTEVURSwgZnJhbWVTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBvc3RSZW5kZXJGdW5jdGlvbnMgPSB0aGlzLnBvc3RSZW5kZXJGdW5jdGlvbnNfO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBwb3N0UmVuZGVyRnVuY3Rpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHBvc3RSZW5kZXJGdW5jdGlvbnNbaV0odGhpcywgZnJhbWVTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcG9zdFJlbmRlckZ1bmN0aW9ucy5sZW5ndGggPSAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVNpemVDaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2V0VmlldygpICYmICF0aGlzLmdldFZpZXcoKS5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgdGhpcy5nZXRWaWV3KCkucmVzb2x2ZUNvbnN0cmFpbnRzKDApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlVGFyZ2V0Q2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIHRhcmdldCBtYXkgYmUgdW5kZWZpbmVkLCBudWxsLCBhIHN0cmluZyBvciBhbiBFbGVtZW50LlxuICAgICAgICAvLyBJZiBpdCdzIGEgc3RyaW5nIHdlIGNvbnZlcnQgaXQgdG8gYW4gRWxlbWVudCBiZWZvcmUgcHJvY2VlZGluZy5cbiAgICAgICAgLy8gSWYgaXQncyBub3Qgbm93IGFuIEVsZW1lbnQgd2UgcmVtb3ZlIHRoZSB2aWV3cG9ydCBmcm9tIHRoZSBET00uXG4gICAgICAgIC8vIElmIGl0J3MgYW4gRWxlbWVudCB3ZSBhcHBlbmQgdGhlIHZpZXdwb3J0IGVsZW1lbnQgdG8gaXQuXG4gICAgICAgIHZhciB0YXJnZXRFbGVtZW50O1xuICAgICAgICBpZiAodGhpcy5nZXRUYXJnZXQoKSkge1xuICAgICAgICAgICAgdGFyZ2V0RWxlbWVudCA9IHRoaXMuZ2V0VGFyZ2V0RWxlbWVudCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmtleUhhbmRsZXJLZXlzXy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLmtleUhhbmRsZXJLZXlzX1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmtleUhhbmRsZXJLZXlzXyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0Xy5yZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DT05URVhUTUVOVSwgdGhpcy5ib3VuZEhhbmRsZUJyb3dzZXJFdmVudF8pO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydF8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuV0hFRUwsIHRoaXMuYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmhhbmRsZVJlc2l6ZV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLlJFU0laRSwgdGhpcy5oYW5kbGVSZXNpemVfLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVSZXNpemVfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tYXBCcm93c2VyRXZlbnRIYW5kbGVyXy5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfID0gbnVsbDtcbiAgICAgICAgICAgIHJlbW92ZU5vZGUodGhpcy52aWV3cG9ydF8pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGFyZ2V0RWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyZXJfKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc3RSZW5kZXJUaW1lb3V0SGFuZGxlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc3RSZW5kZXJGdW5jdGlvbnNfLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8uZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXJfID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFuaW1hdGlvbkRlbGF5S2V5Xykge1xuICAgICAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkRlbGF5S2V5XyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy52aWV3cG9ydF8pO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVyXykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXJfID0gdGhpcy5jcmVhdGVSZW5kZXJlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tYXBCcm93c2VyRXZlbnRIYW5kbGVyXyA9IG5ldyBNYXBCcm93c2VyRXZlbnRIYW5kbGVyKHRoaXMsIHRoaXMubW92ZVRvbGVyYW5jZV8pO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIE1hcEJyb3dzZXJFdmVudFR5cGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfLmFkZEV2ZW50TGlzdGVuZXIoTWFwQnJvd3NlckV2ZW50VHlwZVtrZXldLCB0aGlzLmhhbmRsZU1hcEJyb3dzZXJFdmVudC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmlld3BvcnRfLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNPTlRFWFRNRU5VLCB0aGlzLmJvdW5kSGFuZGxlQnJvd3NlckV2ZW50XywgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydF8uYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuV0hFRUwsIHRoaXMuYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfLCBQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyA/IHsgcGFzc2l2ZTogZmFsc2UgfSA6IGZhbHNlKTtcbiAgICAgICAgICAgIHZhciBrZXlib2FyZEV2ZW50VGFyZ2V0ID0gIXRoaXMua2V5Ym9hcmRFdmVudFRhcmdldF9cbiAgICAgICAgICAgICAgICA/IHRhcmdldEVsZW1lbnRcbiAgICAgICAgICAgICAgICA6IHRoaXMua2V5Ym9hcmRFdmVudFRhcmdldF87XG4gICAgICAgICAgICB0aGlzLmtleUhhbmRsZXJLZXlzXyA9IFtcbiAgICAgICAgICAgICAgICBsaXN0ZW4oa2V5Ym9hcmRFdmVudFRhcmdldCwgRXZlbnRUeXBlLktFWURPV04sIHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LCB0aGlzKSxcbiAgICAgICAgICAgICAgICBsaXN0ZW4oa2V5Ym9hcmRFdmVudFRhcmdldCwgRXZlbnRUeXBlLktFWVBSRVNTLCB0aGlzLmhhbmRsZUJyb3dzZXJFdmVudCwgdGhpcyksXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhhbmRsZVJlc2l6ZV8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJlc2l6ZV8gPSB0aGlzLnVwZGF0ZVNpemUuYmluZCh0aGlzKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuUkVTSVpFLCB0aGlzLmhhbmRsZVJlc2l6ZV8sIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVNpemUoKTtcbiAgICAgICAgLy8gdXBkYXRlU2l6ZSBjYWxscyBzZXRTaXplLCBzbyBubyBuZWVkIHRvIGNhbGwgdGhpcy5yZW5kZXJcbiAgICAgICAgLy8gb3Vyc2VsdmVzIGhlcmUuXG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlVGlsZUNoYW5nZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlVmlld0NoYW5nZWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy52aWV3UHJvcGVydHlMaXN0ZW5lcktleV8pIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy52aWV3UHJvcGVydHlMaXN0ZW5lcktleV8pO1xuICAgICAgICAgICAgdGhpcy52aWV3UHJvcGVydHlMaXN0ZW5lcktleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZpZXdDaGFuZ2VMaXN0ZW5lcktleV8pIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfKTtcbiAgICAgICAgICAgIHRoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnRTaXplXygpO1xuICAgICAgICAgICAgdGhpcy52aWV3UHJvcGVydHlMaXN0ZW5lcktleV8gPSBsaXN0ZW4odmlldywgT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFLCB0aGlzLmhhbmRsZVZpZXdQcm9wZXJ0eUNoYW5nZWRfLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5XyA9IGxpc3Rlbih2aWV3LCBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZVZpZXdQcm9wZXJ0eUNoYW5nZWRfLCB0aGlzKTtcbiAgICAgICAgICAgIHZpZXcucmVzb2x2ZUNvbnN0cmFpbnRzKDApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlTGF5ZXJHcm91cENoYW5nZWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfKSB7XG4gICAgICAgICAgICB0aGlzLmxheWVyR3JvdXBQcm9wZXJ0eUxpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgICAgICAgIHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxheWVyR3JvdXAgPSB0aGlzLmdldExheWVyR3JvdXAoKTtcbiAgICAgICAgaWYgKGxheWVyR3JvdXApIHtcbiAgICAgICAgICAgIHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXyA9IFtcbiAgICAgICAgICAgICAgICBsaXN0ZW4obGF5ZXJHcm91cCwgT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFLCB0aGlzLnJlbmRlciwgdGhpcyksXG4gICAgICAgICAgICAgICAgbGlzdGVuKGxheWVyR3JvdXAsIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMucmVuZGVyLCB0aGlzKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIHJlbmRlcmVkLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaXNSZW5kZXJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5mcmFtZVN0YXRlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlcXVlc3RzIGFuIGltbWVkaWF0ZSByZW5kZXIgaW4gYSBzeW5jaHJvbm91cyBtYW5uZXIuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVuZGVyU3luYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKSB7XG4gICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkRlbGF5S2V5Xyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hbmltYXRpb25EZWxheV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlZHJhd3MgYWxsIHRleHQgYWZ0ZXIgbmV3IGZvbnRzIGhhdmUgbG9hZGVkXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZWRyYXdUZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZXMgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllclN0YXRlc0FycmF5KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVyU3RhdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVyU3RhdGVzW2ldLmxheWVyO1xuICAgICAgICAgICAgaWYgKGxheWVyLmhhc1JlbmRlcmVyKCkpIHtcbiAgICAgICAgICAgICAgICBsYXllci5nZXRSZW5kZXJlcigpLmhhbmRsZUZvbnRzQ2hhbmdlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXF1ZXN0IGEgbWFwIHJlbmRlcmluZyAoYXQgdGhlIG5leHQgYW5pbWF0aW9uIGZyYW1lKS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVyXyAmJiB0aGlzLmFuaW1hdGlvbkRlbGF5S2V5XyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkRlbGF5S2V5XyA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkRlbGF5Xyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZ2l2ZW4gY29udHJvbCBmcm9tIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0fSBjb250cm9sIENvbnRyb2wuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGNvbnRyb2wgKG9yIHVuZGVmaW5lZFxuICAgICAqICAgICBpZiB0aGUgY29udHJvbCB3YXMgbm90IGZvdW5kKS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW1vdmVDb250cm9sID0gZnVuY3Rpb24gKGNvbnRyb2wpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29udHJvbHMoKS5yZW1vdmUoY29udHJvbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGdpdmVuIGludGVyYWN0aW9uIGZyb20gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdH0gaW50ZXJhY3Rpb24gSW50ZXJhY3Rpb24gdG8gcmVtb3ZlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGludGVyYWN0aW9uIChvclxuICAgICAqICAgICB1bmRlZmluZWQgaWYgdGhlIGludGVyYWN0aW9uIHdhcyBub3QgZm91bmQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbW92ZUludGVyYWN0aW9uID0gZnVuY3Rpb24gKGludGVyYWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEludGVyYWN0aW9ucygpLnJlbW92ZShpbnRlcmFjdGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBnaXZlbiBsYXllciBmcm9tIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBUaGUgcmVtb3ZlZCBsYXllciAob3IgdW5kZWZpbmVkIGlmIHRoZVxuICAgICAqICAgICBsYXllciB3YXMgbm90IGZvdW5kKS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW1vdmVMYXllciA9IGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICB2YXIgbGF5ZXJzID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKCk7XG4gICAgICAgIHJldHVybiBsYXllcnMucmVtb3ZlKGxheWVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZ2l2ZW4gb3ZlcmxheSBmcm9tIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gb3ZlcmxheSBPdmVybGF5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgb3ZlcmxheSAob3IgdW5kZWZpbmVkXG4gICAgICogICAgIGlmIHRoZSBvdmVybGF5IHdhcyBub3QgZm91bmQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbW92ZU92ZXJsYXkgPSBmdW5jdGlvbiAob3ZlcmxheSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPdmVybGF5cygpLnJlbW92ZShvdmVybGF5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lIFRpbWUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbmRlckZyYW1lXyA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRTaXplKCk7XG4gICAgICAgIHZhciB2aWV3ID0gdGhpcy5nZXRWaWV3KCk7XG4gICAgICAgIHZhciBwcmV2aW91c0ZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgICAgICAvKiogQHR5cGUgez9GcmFtZVN0YXRlfSAqL1xuICAgICAgICB2YXIgZnJhbWVTdGF0ZSA9IG51bGw7XG4gICAgICAgIGlmIChzaXplICE9PSB1bmRlZmluZWQgJiYgaGFzQXJlYShzaXplKSAmJiB2aWV3ICYmIHZpZXcuaXNEZWYoKSkge1xuICAgICAgICAgICAgdmFyIHZpZXdIaW50cyA9IHZpZXcuZ2V0SGludHModGhpcy5mcmFtZVN0YXRlXyA/IHRoaXMuZnJhbWVTdGF0ZV8udmlld0hpbnRzIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHZhciB2aWV3U3RhdGUgPSB2aWV3LmdldFN0YXRlKCk7XG4gICAgICAgICAgICBmcmFtZVN0YXRlID0ge1xuICAgICAgICAgICAgICAgIGFuaW1hdGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtOiB0aGlzLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtXyxcbiAgICAgICAgICAgICAgICBkZWNsdXR0ZXJUcmVlOiBudWxsLFxuICAgICAgICAgICAgICAgIGV4dGVudDogZ2V0Rm9yVmlld0FuZFNpemUodmlld1N0YXRlLmNlbnRlciwgdmlld1N0YXRlLnJlc29sdXRpb24sIHZpZXdTdGF0ZS5yb3RhdGlvbiwgc2l6ZSksXG4gICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuZnJhbWVJbmRleF8rKyxcbiAgICAgICAgICAgICAgICBsYXllckluZGV4OiAwLFxuICAgICAgICAgICAgICAgIGxheWVyU3RhdGVzQXJyYXk6IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVyU3RhdGVzQXJyYXkoKSxcbiAgICAgICAgICAgICAgICBwaXhlbFJhdGlvOiB0aGlzLnBpeGVsUmF0aW9fLFxuICAgICAgICAgICAgICAgIHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtOiB0aGlzLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtXyxcbiAgICAgICAgICAgICAgICBwb3N0UmVuZGVyRnVuY3Rpb25zOiBbXSxcbiAgICAgICAgICAgICAgICBzaXplOiBzaXplLFxuICAgICAgICAgICAgICAgIHRpbGVRdWV1ZTogdGhpcy50aWxlUXVldWVfLFxuICAgICAgICAgICAgICAgIHRpbWU6IHRpbWUsXG4gICAgICAgICAgICAgICAgdXNlZFRpbGVzOiB7fSxcbiAgICAgICAgICAgICAgICB2aWV3U3RhdGU6IHZpZXdTdGF0ZSxcbiAgICAgICAgICAgICAgICB2aWV3SGludHM6IHZpZXdIaW50cyxcbiAgICAgICAgICAgICAgICB3YW50ZWRUaWxlczoge30sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZnJhbWVTdGF0ZV8gPSBmcmFtZVN0YXRlO1xuICAgICAgICB0aGlzLnJlbmRlcmVyXy5yZW5kZXJGcmFtZShmcmFtZVN0YXRlKTtcbiAgICAgICAgaWYgKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIGlmIChmcmFtZVN0YXRlLmFuaW1hdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5wb3N0UmVuZGVyRnVuY3Rpb25zXywgZnJhbWVTdGF0ZS5wb3N0UmVuZGVyRnVuY3Rpb25zKTtcbiAgICAgICAgICAgIGlmIChwcmV2aW91c0ZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgbW92ZVN0YXJ0ID0gIXRoaXMucHJldmlvdXNFeHRlbnRfIHx8XG4gICAgICAgICAgICAgICAgICAgICghaXNFbXB0eSh0aGlzLnByZXZpb3VzRXh0ZW50XykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICFlcXVhbHMoZnJhbWVTdGF0ZS5leHRlbnQsIHRoaXMucHJldmlvdXNFeHRlbnRfKSk7XG4gICAgICAgICAgICAgICAgaWYgKG1vdmVTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE1hcEV2ZW50KE1hcEV2ZW50VHlwZS5NT1ZFU1RBUlQsIHRoaXMsIHByZXZpb3VzRnJhbWVTdGF0ZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzRXh0ZW50XyA9IGNyZWF0ZU9yVXBkYXRlRW1wdHkodGhpcy5wcmV2aW91c0V4dGVudF8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpZGxlID0gdGhpcy5wcmV2aW91c0V4dGVudF8gJiZcbiAgICAgICAgICAgICAgICAhZnJhbWVTdGF0ZS52aWV3SGludHNbVmlld0hpbnQuQU5JTUFUSU5HXSAmJlxuICAgICAgICAgICAgICAgICFmcmFtZVN0YXRlLnZpZXdIaW50c1tWaWV3SGludC5JTlRFUkFDVElOR10gJiZcbiAgICAgICAgICAgICAgICAhZXF1YWxzKGZyYW1lU3RhdGUuZXh0ZW50LCB0aGlzLnByZXZpb3VzRXh0ZW50Xyk7XG4gICAgICAgICAgICBpZiAoaWRsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgTWFwRXZlbnQoTWFwRXZlbnRUeXBlLk1PVkVFTkQsIHRoaXMsIGZyYW1lU3RhdGUpKTtcbiAgICAgICAgICAgICAgICBjbG9uZShmcmFtZVN0YXRlLmV4dGVudCwgdGhpcy5wcmV2aW91c0V4dGVudF8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgTWFwRXZlbnQoTWFwRXZlbnRUeXBlLlBPU1RSRU5ERVIsIHRoaXMsIGZyYW1lU3RhdGUpKTtcbiAgICAgICAgaWYgKCF0aGlzLnBvc3RSZW5kZXJUaW1lb3V0SGFuZGxlXykge1xuICAgICAgICAgICAgdGhpcy5wb3N0UmVuZGVyVGltZW91dEhhbmRsZV8gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wb3N0UmVuZGVyVGltZW91dEhhbmRsZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlUG9zdFJlbmRlcigpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGxheWVyZ3JvdXAgb2YgdGhpcyBtYXAuXG4gICAgICogQHBhcmFtIHtMYXllckdyb3VwfSBsYXllckdyb3VwIEEgbGF5ZXIgZ3JvdXAgY29udGFpbmluZyB0aGUgbGF5ZXJzIGluIHRoaXMgbWFwLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuc2V0TGF5ZXJHcm91cCA9IGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG4gICAgICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LkxBWUVSR1JPVVAsIGxheWVyR3JvdXApO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzaXplIG9mIHRoaXMgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV8dW5kZWZpbmVkfSBzaXplIFRoZSBzaXplIGluIHBpeGVscyBvZiB0aGUgbWFwIGluIHRoZSBET00uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5zZXRTaXplID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgICAgICAgdGhpcy5zZXQoTWFwUHJvcGVydHkuU0laRSwgc2l6ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHRhcmdldCBlbGVtZW50IHRvIHJlbmRlciB0aGlzIG1hcCBpbnRvLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8c3RyaW5nfHVuZGVmaW5lZH0gdGFyZ2V0IFRoZSBFbGVtZW50IG9yIGlkIG9mIHRoZSBFbGVtZW50XG4gICAgICogICAgIHRoYXQgdGhlIG1hcCBpcyByZW5kZXJlZCBpbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnNldFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgdGhpcy5zZXQoTWFwUHJvcGVydHkuVEFSR0VULCB0YXJnZXQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2aWV3IGZvciB0aGlzIG1hcC5cbiAgICAgKiBAcGFyYW0ge1ZpZXd9IHZpZXcgVGhlIHZpZXcgdGhhdCBjb250cm9scyB0aGlzIG1hcC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnNldFZpZXcgPSBmdW5jdGlvbiAodmlldykge1xuICAgICAgICB0aGlzLnNldChNYXBQcm9wZXJ0eS5WSUVXLCB2aWV3KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZvcmNlIGEgcmVjYWxjdWxhdGlvbiBvZiB0aGUgbWFwIHZpZXdwb3J0IHNpemUuICBUaGlzIHNob3VsZCBiZSBjYWxsZWQgd2hlblxuICAgICAqIHRoaXJkLXBhcnR5IGNvZGUgY2hhbmdlcyB0aGUgc2l6ZSBvZiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnVwZGF0ZVNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0YXJnZXRFbGVtZW50ID0gdGhpcy5nZXRUYXJnZXRFbGVtZW50KCk7XG4gICAgICAgIGlmICghdGFyZ2V0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTaXplKHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodGFyZ2V0RWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnNldFNpemUoW1xuICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnQub2Zmc2V0V2lkdGggLVxuICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ2JvcmRlckxlZnRXaWR0aCddKSAtXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsncGFkZGluZ0xlZnQnXSkgLVxuICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdSaWdodCddKSAtXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsnYm9yZGVyUmlnaHRXaWR0aCddKSxcbiAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50Lm9mZnNldEhlaWdodCAtXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsnYm9yZGVyVG9wV2lkdGgnXSkgLVxuICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdUb3AnXSkgLVxuICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdCb3R0b20nXSkgLVxuICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ2JvcmRlckJvdHRvbVdpZHRoJ10pLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydFNpemVfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWNvbXB1dGVzIHRoZSB2aWV3cG9ydCBzaXplIGFuZCBzYXZlIGl0IG9uIHRoZSB2aWV3IG9iamVjdCAoaWYgYW55KVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS51cGRhdGVWaWV3cG9ydFNpemVfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmlldyA9IHRoaXMuZ2V0VmlldygpO1xuICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgICAgdmFyIHNpemUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodGhpcy52aWV3cG9ydF8pO1xuICAgICAgICAgICAgaWYgKGNvbXB1dGVkU3R5bGUud2lkdGggJiYgY29tcHV0ZWRTdHlsZS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBzaXplID0gW1xuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChjb21wdXRlZFN0eWxlLndpZHRoLCAxMCksXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGNvbXB1dGVkU3R5bGUuaGVpZ2h0LCAxMCksXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZpZXcuc2V0Vmlld3BvcnRTaXplKHNpemUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUGx1Z2dhYmxlTWFwO1xufShCYXNlT2JqZWN0KSk7XG4vKipcbiAqIEBwYXJhbSB7TWFwT3B0aW9uc30gb3B0aW9ucyBNYXAgb3B0aW9ucy5cbiAqIEByZXR1cm4ge01hcE9wdGlvbnNJbnRlcm5hbH0gSW50ZXJuYWwgbWFwIG9wdGlvbnMuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnNJbnRlcm5hbChvcHRpb25zKSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge0hUTUxFbGVtZW50fERvY3VtZW50fVxuICAgICAqL1xuICAgIHZhciBrZXlib2FyZEV2ZW50VGFyZ2V0ID0gbnVsbDtcbiAgICBpZiAob3B0aW9ucy5rZXlib2FyZEV2ZW50VGFyZ2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAga2V5Ym9hcmRFdmVudFRhcmdldCA9XG4gICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5rZXlib2FyZEV2ZW50VGFyZ2V0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3B0aW9ucy5rZXlib2FyZEV2ZW50VGFyZ2V0KVxuICAgICAgICAgICAgICAgIDogb3B0aW9ucy5rZXlib2FyZEV2ZW50VGFyZ2V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgKj59XG4gICAgICovXG4gICAgdmFyIHZhbHVlcyA9IHt9O1xuICAgIHZhciBsYXllckdyb3VwID0gb3B0aW9ucy5sYXllcnMgJiZcbiAgICAgICAgdHlwZW9mICggLyoqIEB0eXBlIHs/fSAqLyhvcHRpb25zLmxheWVycykuZ2V0TGF5ZXJzKSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IC8qKiBAdHlwZSB7TGF5ZXJHcm91cH0gKi8gKG9wdGlvbnMubGF5ZXJzKVxuICAgICAgICA6IG5ldyBMYXllckdyb3VwKHsgbGF5ZXJzOiAvKiogQHR5cGUge0NvbGxlY3Rpb259ICovIChvcHRpb25zLmxheWVycykgfSk7XG4gICAgdmFsdWVzW01hcFByb3BlcnR5LkxBWUVSR1JPVVBdID0gbGF5ZXJHcm91cDtcbiAgICB2YWx1ZXNbTWFwUHJvcGVydHkuVEFSR0VUXSA9IG9wdGlvbnMudGFyZ2V0O1xuICAgIHZhbHVlc1tNYXBQcm9wZXJ0eS5WSUVXXSA9XG4gICAgICAgIG9wdGlvbnMudmlldyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy52aWV3IDogbmV3IFZpZXcoKTtcbiAgICB2YXIgY29udHJvbHM7XG4gICAgaWYgKG9wdGlvbnMuY29udHJvbHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLmNvbnRyb2xzKSkge1xuICAgICAgICAgICAgY29udHJvbHMgPSBuZXcgQ29sbGVjdGlvbihvcHRpb25zLmNvbnRyb2xzLnNsaWNlKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiAoIC8qKiBAdHlwZSB7P30gKi8ob3B0aW9ucy5jb250cm9scykuZ2V0QXJyYXkpID09PSAnZnVuY3Rpb24nLCA0Nyk7IC8vIEV4cGVjdGVkIGBjb250cm9sc2AgdG8gYmUgYW4gYXJyYXkgb3IgYW4gYGltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uYFxuICAgICAgICAgICAgY29udHJvbHMgPSAvKiogQHR5cGUge0NvbGxlY3Rpb259ICovIChvcHRpb25zLmNvbnRyb2xzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgaW50ZXJhY3Rpb25zO1xuICAgIGlmIChvcHRpb25zLmludGVyYWN0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMuaW50ZXJhY3Rpb25zKSkge1xuICAgICAgICAgICAgaW50ZXJhY3Rpb25zID0gbmV3IENvbGxlY3Rpb24ob3B0aW9ucy5pbnRlcmFjdGlvbnMuc2xpY2UoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQodHlwZW9mICggLyoqIEB0eXBlIHs/fSAqLyhvcHRpb25zLmludGVyYWN0aW9ucykuZ2V0QXJyYXkpID09PVxuICAgICAgICAgICAgICAgICdmdW5jdGlvbicsIDQ4KTsgLy8gRXhwZWN0ZWQgYGludGVyYWN0aW9uc2AgdG8gYmUgYW4gYXJyYXkgb3IgYW4gYGltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uYFxuICAgICAgICAgICAgaW50ZXJhY3Rpb25zID0gLyoqIEB0eXBlIHtDb2xsZWN0aW9ufSAqLyAob3B0aW9ucy5pbnRlcmFjdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBvdmVybGF5cztcbiAgICBpZiAob3B0aW9ucy5vdmVybGF5cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMub3ZlcmxheXMpKSB7XG4gICAgICAgICAgICBvdmVybGF5cyA9IG5ldyBDb2xsZWN0aW9uKG9wdGlvbnMub3ZlcmxheXMuc2xpY2UoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQodHlwZW9mICggLyoqIEB0eXBlIHs/fSAqLyhvcHRpb25zLm92ZXJsYXlzKS5nZXRBcnJheSkgPT09ICdmdW5jdGlvbicsIDQ5KTsgLy8gRXhwZWN0ZWQgYG92ZXJsYXlzYCB0byBiZSBhbiBhcnJheSBvciBhbiBgaW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25gXG4gICAgICAgICAgICBvdmVybGF5cyA9IG9wdGlvbnMub3ZlcmxheXM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG92ZXJsYXlzID0gbmV3IENvbGxlY3Rpb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29udHJvbHM6IGNvbnRyb2xzLFxuICAgICAgICBpbnRlcmFjdGlvbnM6IGludGVyYWN0aW9ucyxcbiAgICAgICAga2V5Ym9hcmRFdmVudFRhcmdldDoga2V5Ym9hcmRFdmVudFRhcmdldCxcbiAgICAgICAgb3ZlcmxheXM6IG92ZXJsYXlzLFxuICAgICAgICB2YWx1ZXM6IHZhbHVlcyxcbiAgICB9O1xufVxuZXhwb3J0IGRlZmF1bHQgUGx1Z2dhYmxlTWFwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGx1Z2dhYmxlTWFwLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbC9Db250cm9sXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgTWFwRXZlbnRUeXBlIGZyb20gJy4uL01hcEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBWT0lEIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgeyByZW1vdmVOb2RlIH0gZnJvbSAnLi4vZG9tLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudH0gW2VsZW1lbnRdIFRoZSBlbGVtZW50IGlzIHRoZSBjb250cm9sJ3NcbiAqIGNvbnRhaW5lciBlbGVtZW50LiBUaGlzIG9ubHkgbmVlZHMgdG8gYmUgc3BlY2lmaWVkIGlmIHlvdSdyZSBkZXZlbG9waW5nXG4gKiBhIGN1c3RvbSBjb250cm9sLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbcmVuZGVyXSBGdW5jdGlvbiBjYWxsZWQgd2hlblxuICogdGhlIGNvbnRyb2wgc2hvdWxkIGJlIHJlLXJlbmRlcmVkLiBUaGlzIGlzIGNhbGxlZCBpbiBhIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgXG4gKiBjYWxsYmFjay5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBTcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdSB3YW50XG4gKiB0aGUgY29udHJvbCB0byBiZSByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAncyB2aWV3cG9ydC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIGNvbnRyb2wgaXMgYSB2aXNpYmxlIHdpZGdldCB3aXRoIGEgRE9NIGVsZW1lbnQgaW4gYSBmaXhlZCBwb3NpdGlvbiBvbiB0aGVcbiAqIHNjcmVlbi4gVGhleSBjYW4gaW52b2x2ZSB1c2VyIGlucHV0IChidXR0b25zKSwgb3IgYmUgaW5mb3JtYXRpb25hbCBvbmx5O1xuICogdGhlIHBvc2l0aW9uIGlzIGRldGVybWluZWQgdXNpbmcgQ1NTLiBCeSBkZWZhdWx0IHRoZXNlIGFyZSBwbGFjZWQgaW4gdGhlXG4gKiBjb250YWluZXIgd2l0aCBDU1MgY2xhc3MgbmFtZSBgb2wtb3ZlcmxheWNvbnRhaW5lci1zdG9wZXZlbnRgLCBidXQgY2FuIHVzZVxuICogYW55IG91dHNpZGUgRE9NIGVsZW1lbnQuXG4gKlxuICogVGhpcyBpcyB0aGUgYmFzZSBjbGFzcyBmb3IgY29udHJvbHMuIFlvdSBjYW4gdXNlIGl0IGZvciBzaW1wbGUgY3VzdG9tXG4gKiBjb250cm9scyBieSBjcmVhdGluZyB0aGUgZWxlbWVudCB3aXRoIGxpc3RlbmVycywgY3JlYXRpbmcgYW4gaW5zdGFuY2U6XG4gKiBgYGBqc1xuICogdmFyIG15Q29udHJvbCA9IG5ldyBDb250cm9sKHtlbGVtZW50OiBteUVsZW1lbnR9KTtcbiAqIGBgYFxuICogYW5kIHRoZW4gYWRkaW5nIHRoaXMgdG8gdGhlIG1hcC5cbiAqXG4gKiBUaGUgbWFpbiBhZHZhbnRhZ2Ugb2YgaGF2aW5nIHRoaXMgYXMgYSBjb250cm9sIHJhdGhlciB0aGFuIGEgc2ltcGxlIHNlcGFyYXRlXG4gKiBET00gZWxlbWVudCBpcyB0aGF0IHByZXZlbnRpbmcgcHJvcGFnYXRpb24gaXMgaGFuZGxlZCBmb3IgeW91LiBDb250cm9sc1xuICogd2lsbCBhbHNvIGJlIG9iamVjdHMgaW4gYSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0sIHNvIHlvdSBjYW4gdXNlIHRoZWlyIG1ldGhvZHMuXG4gKlxuICogWW91IGNhbiBhbHNvIGV4dGVuZCB0aGlzIGJhc2UgZm9yIHlvdXIgb3duIGNvbnRyb2wgY2xhc3MuIFNlZVxuICogZXhhbXBsZXMvY3VzdG9tLWNvbnRyb2xzIGZvciBhbiBleGFtcGxlIG9mIGhvdyB0byBkbyB0aGlzLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIENvbnRyb2wgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbnRyb2wsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIENvbnRyb2wgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDb250cm9sKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBvcHRpb25zLmVsZW1lbnQ7XG4gICAgICAgIGlmIChlbGVtZW50ICYmICFvcHRpb25zLnRhcmdldCAmJiAhZWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzKSB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVsZW1lbnQgPyBlbGVtZW50IDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRhcmdldF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHshQXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5saXN0ZW5lcktleXMgPSBbXTtcbiAgICAgICAgaWYgKG9wdGlvbnMucmVuZGVyKSB7XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXIgPSBvcHRpb25zLnJlbmRlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy50YXJnZXQpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFRhcmdldChvcHRpb25zLnRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBDb250cm9sLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlbW92ZU5vZGUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWFwIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGNvbnRyb2wuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IE1hcC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29udHJvbC5wcm90b3R5cGUuZ2V0TWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXBfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBjb250cm9sIGZyb20gaXRzIGN1cnJlbnQgbWFwIGFuZCBhdHRhY2ggaXQgdG8gdGhlIG5ldyBtYXAuXG4gICAgICogU3ViY2xhc3NlcyBtYXkgc2V0IHVwIGV2ZW50IGhhbmRsZXJzIHRvIGdldCBub3RpZmllZCBhYm91dCBjaGFuZ2VzIHRvXG4gICAgICogdGhlIG1hcCBoZXJlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbnRyb2wucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgaWYgKHRoaXMubWFwXykge1xuICAgICAgICAgICAgcmVtb3ZlTm9kZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMubGlzdGVuZXJLZXlzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5saXN0ZW5lcktleXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGlzdGVuZXJLZXlzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMubWFwXyA9IG1hcDtcbiAgICAgICAgaWYgKHRoaXMubWFwXykge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMudGFyZ2V0X1xuICAgICAgICAgICAgICAgID8gdGhpcy50YXJnZXRfXG4gICAgICAgICAgICAgICAgOiBtYXAuZ2V0T3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudCgpO1xuICAgICAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAodGhpcy5yZW5kZXIgIT09IFZPSUQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmVyS2V5cy5wdXNoKGxpc3RlbihtYXAsIE1hcEV2ZW50VHlwZS5QT1NUUkVOREVSLCB0aGlzLnJlbmRlciwgdGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWFwLnJlbmRlcigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW5kZXJzIHRoZSBjb250cm9sLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwRXZlbnQgTWFwIGV2ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb250cm9sLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAobWFwRXZlbnQpIHsgfTtcbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gc2V0IGEgdGFyZ2V0IGVsZW1lbnQgZm9yIHRoZSBjb250cm9sLiBJdCBoYXMgbm9cbiAgICAgKiBlZmZlY3QgaWYgaXQgaXMgY2FsbGVkIGFmdGVyIHRoZSBjb250cm9sIGhhcyBiZWVuIGFkZGVkIHRvIHRoZSBtYXAgKGkuZS5cbiAgICAgKiBhZnRlciBgc2V0TWFwYCBpcyBjYWxsZWQgb24gdGhlIGNvbnRyb2wpLiBJZiBubyBgdGFyZ2V0YCBpcyBzZXQgaW4gdGhlXG4gICAgICogb3B0aW9ucyBwYXNzZWQgdG8gdGhlIGNvbnRyb2wgY29uc3RydWN0b3IgYW5kIGlmIGBzZXRUYXJnZXRgIGlzIG5vdCBjYWxsZWRcbiAgICAgKiB0aGVuIHRoZSBjb250cm9sIGlzIGFkZGVkIHRvIHRoZSBtYXAncyBvdmVybGF5IGNvbnRhaW5lci5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fHN0cmluZ30gdGFyZ2V0IFRhcmdldC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29udHJvbC5wcm90b3R5cGUuc2V0VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICB0aGlzLnRhcmdldF8gPVxuICAgICAgICAgICAgdHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXQpIDogdGFyZ2V0O1xuICAgIH07XG4gICAgcmV0dXJuIENvbnRyb2w7XG59KEJhc2VPYmplY3QpKTtcbmV4cG9ydCBkZWZhdWx0IENvbnRyb2w7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db250cm9sLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbC9BdHRyaWJ1dGlvblxuICovXG5pbXBvcnQgQ29udHJvbCBmcm9tICcuL0NvbnRyb2wuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IENMQVNTX0NPTExBUFNFRCwgQ0xBU1NfQ09OVFJPTCwgQ0xBU1NfVU5TRUxFQ1RBQkxFIH0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7IGVxdWFscyB9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCB7IGluVmlldyB9IGZyb20gJy4uL2xheWVyL0xheWVyLmpzJztcbmltcG9ydCB7IHJlbW92ZUNoaWxkcmVuLCByZXBsYWNlTm9kZSB9IGZyb20gJy4uL2RvbS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1hdHRyaWJ1dGlvbiddIENTUyBjbGFzcyBuYW1lLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91XG4gKiB3YW50IHRoZSBjb250cm9sIHRvIGJlIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIG1hcCdzXG4gKiB2aWV3cG9ydC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbGxhcHNpYmxlXSBTcGVjaWZ5IGlmIGF0dHJpYnV0aW9ucyBjYW5cbiAqIGJlIGNvbGxhcHNlZC4gSWYgbm90IHNwZWNpZmllZCwgc291cmNlcyBjb250cm9sIHRoaXMgYmVoYXZpb3Igd2l0aCB0aGVpclxuICogYGF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlYCBzZXR0aW5nLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29sbGFwc2VkPXRydWVdIFNwZWNpZnkgaWYgYXR0cmlidXRpb25zIHNob3VsZFxuICogYmUgY29sbGFwc2VkIGF0IHN0YXJ0dXAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3RpcExhYmVsPSdBdHRyaWJ1dGlvbnMnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIGJ1dHRvbiB0aXAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2xhYmVsPSdpJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZVxuICogY29sbGFwc2VkIGF0dHJpYnV0aW9ucyBidXR0b24uXG4gKiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZXhwYW5kQ2xhc3NOYW1lPWNsYXNzTmFtZSArICctZXhwYW5kJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHRoZVxuICogY29sbGFwc2VkIGF0dHJpYnV0aW9ucyBidXR0b24uXG4gKiBAcHJvcGVydHkge3N0cmluZ3xIVE1MRWxlbWVudH0gW2NvbGxhcHNlTGFiZWw9J8K7J10gVGV4dCBsYWJlbCB0byB1c2VcbiAqIGZvciB0aGUgZXhwYW5kZWQgYXR0cmlidXRpb25zIGJ1dHRvbi5cbiAqIEluc3RlYWQgb2YgdGV4dCwgYWxzbyBhbiBlbGVtZW50IChlLmcuIGEgYHNwYW5gIGVsZW1lbnQpIGNhbiBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjb2xsYXBzZUNsYXNzTmFtZT1jbGFzc05hbWUgKyAnLWNvbGxhcHNlJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHRoZVxuICogZXhwYW5kZWQgYXR0cmlidXRpb25zIGJ1dHRvbi5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW3JlbmRlcl0gRnVuY3Rpb24gY2FsbGVkIHdoZW5cbiAqIHRoZSBjb250cm9sIHNob3VsZCBiZSByZS1yZW5kZXJlZC4gVGhpcyBpcyBjYWxsZWQgaW4gYSBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYFxuICogY2FsbGJhY2suXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ29udHJvbCB0byBzaG93IGFsbCB0aGUgYXR0cmlidXRpb25zIGFzc29jaWF0ZWQgd2l0aCB0aGUgbGF5ZXIgc291cmNlc1xuICogaW4gdGhlIG1hcC4gVGhpcyBjb250cm9sIGlzIG9uZSBvZiB0aGUgZGVmYXVsdCBjb250cm9scyBpbmNsdWRlZCBpbiBtYXBzLlxuICogQnkgZGVmYXVsdCBpdCB3aWxsIHNob3cgaW4gdGhlIGJvdHRvbSByaWdodCBwb3J0aW9uIG9mIHRoZSBtYXAsIGJ1dCB0aGlzIGNhblxuICogYmUgY2hhbmdlZCBieSB1c2luZyBhIGNzcyBzZWxlY3RvciBmb3IgYC5vbC1hdHRyaWJ1dGlvbmAuXG4gKlxuICogQGFwaVxuICovXG52YXIgQXR0cmlidXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEF0dHJpYnV0aW9uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIEF0dHJpYnV0aW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQXR0cmlidXRpb24ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICAgICAgICByZW5kZXI6IG9wdGlvbnMucmVuZGVyLFxuICAgICAgICAgICAgdGFyZ2V0OiBvcHRpb25zLnRhcmdldCxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVsRWxlbWVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb2xsYXBzZWRfID1cbiAgICAgICAgICAgIG9wdGlvbnMuY29sbGFwc2VkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxhcHNlZCA6IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVzZXJDb2xsYXBzZWRfID0gX3RoaXMuY29sbGFwc2VkXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3ZlcnJpZGVDb2xsYXBzaWJsZV8gPSBvcHRpb25zLmNvbGxhcHNpYmxlICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbGxhcHNpYmxlXyA9XG4gICAgICAgICAgICBvcHRpb25zLmNvbGxhcHNpYmxlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxhcHNpYmxlIDogdHJ1ZTtcbiAgICAgICAgaWYgKCFfdGhpcy5jb2xsYXBzaWJsZV8pIHtcbiAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlZF8gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2xhc3NOYW1lID0gb3B0aW9ucy5jbGFzc05hbWUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xhc3NOYW1lIDogJ29sLWF0dHJpYnV0aW9uJztcbiAgICAgICAgdmFyIHRpcExhYmVsID0gb3B0aW9ucy50aXBMYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aXBMYWJlbCA6ICdBdHRyaWJ1dGlvbnMnO1xuICAgICAgICB2YXIgZXhwYW5kQ2xhc3NOYW1lID0gb3B0aW9ucy5leHBhbmRDbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLmV4cGFuZENsYXNzTmFtZVxuICAgICAgICAgICAgOiBjbGFzc05hbWUgKyAnLWV4cGFuZCc7XG4gICAgICAgIHZhciBjb2xsYXBzZUxhYmVsID0gb3B0aW9ucy5jb2xsYXBzZUxhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxhcHNlTGFiZWwgOiAnXFx1MDBCQic7XG4gICAgICAgIHZhciBjb2xsYXBzZUNsYXNzTmFtZSA9IG9wdGlvbnMuY29sbGFwc2VDbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLmNvbGxhcHNlQ2xhc3NOYW1lXG4gICAgICAgICAgICA6IGNsYXNzTmFtZSArICctY29sbHBhc2UnO1xuICAgICAgICBpZiAodHlwZW9mIGNvbGxhcHNlTGFiZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlTGFiZWxfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VMYWJlbF8udGV4dENvbnRlbnQgPSBjb2xsYXBzZUxhYmVsO1xuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VMYWJlbF8uY2xhc3NOYW1lID0gY29sbGFwc2VDbGFzc05hbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5jb2xsYXBzZUxhYmVsXyA9IGNvbGxhcHNlTGFiZWw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxhYmVsID0gb3B0aW9ucy5sYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5sYWJlbCA6ICdpJztcbiAgICAgICAgaWYgKHR5cGVvZiBsYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfLnRleHRDb250ZW50ID0gbGFiZWw7XG4gICAgICAgICAgICBfdGhpcy5sYWJlbF8uY2xhc3NOYW1lID0gZXhwYW5kQ2xhc3NOYW1lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfID0gbGFiZWw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFjdGl2ZUxhYmVsID0gX3RoaXMuY29sbGFwc2libGVfICYmICFfdGhpcy5jb2xsYXBzZWRfID8gX3RoaXMuY29sbGFwc2VMYWJlbF8gOiBfdGhpcy5sYWJlbF87XG4gICAgICAgIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICAgICAgYnV0dG9uLnRpdGxlID0gdGlwTGFiZWw7XG4gICAgICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChhY3RpdmVMYWJlbCk7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DTElDSywgX3RoaXMuaGFuZGxlQ2xpY2tfLmJpbmQoX3RoaXMpLCBmYWxzZSk7XG4gICAgICAgIHZhciBjc3NDbGFzc2VzID0gY2xhc3NOYW1lICtcbiAgICAgICAgICAgICcgJyArXG4gICAgICAgICAgICBDTEFTU19VTlNFTEVDVEFCTEUgK1xuICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgIENMQVNTX0NPTlRST0wgK1xuICAgICAgICAgICAgKF90aGlzLmNvbGxhcHNlZF8gJiYgX3RoaXMuY29sbGFwc2libGVfID8gJyAnICsgQ0xBU1NfQ09MTEFQU0VEIDogJycpICtcbiAgICAgICAgICAgIChfdGhpcy5jb2xsYXBzaWJsZV8gPyAnJyA6ICcgb2wtdW5jb2xsYXBzaWJsZScpO1xuICAgICAgICB2YXIgZWxlbWVudCA9IF90aGlzLmVsZW1lbnQ7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY3NzQ2xhc3NlcztcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChfdGhpcy51bEVsZW1lbnRfKTtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBsaXN0IG9mIGN1cnJlbnRseSByZW5kZXJlZCByZXNvbHV0aW9ucy5cbiAgICAgICAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZEF0dHJpYnV0aW9uc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRWaXNpYmxlXyA9IHRydWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29sbGVjdCBhIGxpc3Qgb2YgdmlzaWJsZSBhdHRyaWJ1dGlvbnMgYW5kIHNldCB0aGUgY29sbGFwc2libGUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBBdHRyaWJ1dGlvbnMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuY29sbGVjdFNvdXJjZUF0dHJpYnV0aW9uc18gPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVXNlZCB0byBkZXRlcm1pbmUgaWYgYW4gYXR0cmlidXRpb24gYWxyZWFkeSBleGlzdHMuXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgbG9va3VwID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgdmlzaWJsZSBhdHRyaWJ1dGlvbnMuXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHZpc2libGVBdHRyaWJ1dGlvbnMgPSBbXTtcbiAgICAgICAgdmFyIGNvbGxhcHNpYmxlID0gdHJ1ZTtcbiAgICAgICAgdmFyIGxheWVyU3RhdGVzQXJyYXkgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVyU3RhdGVzQXJyYXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGxheWVyU3RhdGUgPSBsYXllclN0YXRlc0FycmF5W2ldO1xuICAgICAgICAgICAgaWYgKCFpblZpZXcobGF5ZXJTdGF0ZSwgZnJhbWVTdGF0ZS52aWV3U3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc291cmNlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXJTdGF0ZS5sYXllcikuZ2V0U291cmNlKCk7XG4gICAgICAgICAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGF0dHJpYnV0aW9uR2V0dGVyID0gc291cmNlLmdldEF0dHJpYnV0aW9ucygpO1xuICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGlvbkdldHRlcikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGF0dHJpYnV0aW9ucyA9IGF0dHJpYnV0aW9uR2V0dGVyKGZyYW1lU3RhdGUpO1xuICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbGxhcHNpYmxlID1cbiAgICAgICAgICAgICAgICBjb2xsYXBzaWJsZSAmJiBzb3VyY2UuZ2V0QXR0cmlidXRpb25zQ29sbGFwc2libGUoKSAhPT0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhdHRyaWJ1dGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gYXR0cmlidXRpb25zLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoYXR0cmlidXRpb25zW2pdIGluIGxvb2t1cCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGVBdHRyaWJ1dGlvbnMucHVzaChhdHRyaWJ1dGlvbnNbal0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9va3VwW2F0dHJpYnV0aW9uc1tqXV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoYXR0cmlidXRpb25zIGluIGxvb2t1cCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZUF0dHJpYnV0aW9ucy5wdXNoKGF0dHJpYnV0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGxvb2t1cFthdHRyaWJ1dGlvbnNdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm92ZXJyaWRlQ29sbGFwc2libGVfKSB7XG4gICAgICAgICAgICB0aGlzLnNldENvbGxhcHNpYmxlKGNvbGxhcHNpYmxlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlzaWJsZUF0dHJpYnV0aW9ucztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgQXR0cmlidXRpb24ucHJvdG90eXBlLnVwZGF0ZUVsZW1lbnRfID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZW5kZXJlZFZpc2libGVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGF0dHJpYnV0aW9ucyA9IHRoaXMuY29sbGVjdFNvdXJjZUF0dHJpYnV0aW9uc18oZnJhbWVTdGF0ZSk7XG4gICAgICAgIHZhciB2aXNpYmxlID0gYXR0cmlidXRpb25zLmxlbmd0aCA+IDA7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkVmlzaWJsZV8gIT0gdmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSB2aXNpYmxlID8gJycgOiAnbm9uZSc7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSB2aXNpYmxlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcXVhbHMoYXR0cmlidXRpb25zLCB0aGlzLnJlbmRlcmVkQXR0cmlidXRpb25zXykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZW1vdmVDaGlsZHJlbih0aGlzLnVsRWxlbWVudF8pO1xuICAgICAgICAvLyBhcHBlbmQgdGhlIGF0dHJpYnV0aW9uc1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhdHRyaWJ1dGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBhdHRyaWJ1dGlvbnNbaV07XG4gICAgICAgICAgICB0aGlzLnVsRWxlbWVudF8uYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJlZEF0dHJpYnV0aW9uc18gPSBhdHRyaWJ1dGlvbnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBoYW5kbGVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5oYW5kbGVDbGlja18gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5oYW5kbGVUb2dnbGVfKCk7XG4gICAgICAgIHRoaXMudXNlckNvbGxhcHNlZF8gPSB0aGlzLmNvbGxhcHNlZF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5oYW5kbGVUb2dnbGVfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShDTEFTU19DT0xMQVBTRUQpO1xuICAgICAgICBpZiAodGhpcy5jb2xsYXBzZWRfKSB7XG4gICAgICAgICAgICByZXBsYWNlTm9kZSh0aGlzLmNvbGxhcHNlTGFiZWxfLCB0aGlzLmxhYmVsXyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXBsYWNlTm9kZSh0aGlzLmxhYmVsXywgdGhpcy5jb2xsYXBzZUxhYmVsXyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb2xsYXBzZWRfID0gIXRoaXMuY29sbGFwc2VkXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGF0dHJpYnV0aW9uIGlzIGNvbGxhcHNpYmxlLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2libGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5nZXRDb2xsYXBzaWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sbGFwc2libGVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdGhlIGF0dHJpYnV0aW9uIHNob3VsZCBiZSBjb2xsYXBzaWJsZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbGxhcHNpYmxlIFRydWUgaWYgdGhlIHdpZGdldCBpcyBjb2xsYXBzaWJsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQXR0cmlidXRpb24ucHJvdG90eXBlLnNldENvbGxhcHNpYmxlID0gZnVuY3Rpb24gKGNvbGxhcHNpYmxlKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbGxhcHNpYmxlXyA9PT0gY29sbGFwc2libGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbGxhcHNpYmxlXyA9IGNvbGxhcHNpYmxlO1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnb2wtdW5jb2xsYXBzaWJsZScpO1xuICAgICAgICBpZiAodGhpcy51c2VyQ29sbGFwc2VkXykge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVUb2dnbGVfKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENvbGxhcHNlIG9yIGV4cGFuZCB0aGUgYXR0cmlidXRpb24gYWNjb3JkaW5nIHRvIHRoZSBwYXNzZWQgcGFyYW1ldGVyLiBXaWxsXG4gICAgICogbm90IGRvIGFueXRoaW5nIGlmIHRoZSBhdHRyaWJ1dGlvbiBpc24ndCBjb2xsYXBzaWJsZSBvciBpZiB0aGUgY3VycmVudFxuICAgICAqIGNvbGxhcHNlZCBzdGF0ZSBpcyBhbHJlYWR5IHRoZSBvbmUgcmVxdWVzdGVkLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY29sbGFwc2VkIFRydWUgaWYgdGhlIHdpZGdldCBpcyBjb2xsYXBzZWQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5zZXRDb2xsYXBzZWQgPSBmdW5jdGlvbiAoY29sbGFwc2VkKSB7XG4gICAgICAgIHRoaXMudXNlckNvbGxhcHNlZF8gPSBjb2xsYXBzZWQ7XG4gICAgICAgIGlmICghdGhpcy5jb2xsYXBzaWJsZV8gfHwgdGhpcy5jb2xsYXBzZWRfID09PSBjb2xsYXBzZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsZVRvZ2dsZV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiBgdHJ1ZWAgd2hlbiB0aGUgYXR0cmlidXRpb24gaXMgY3VycmVudGx5IGNvbGxhcHNlZCBvciBgZmFsc2VgXG4gICAgICogb3RoZXJ3aXNlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHdpZGdldCBpcyBjb2xsYXBzZWQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5nZXRDb2xsYXBzZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbGxhcHNlZF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGF0dHJpYnV0aW9uIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBFdmVudCBNYXAgZXZlbnQuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgQXR0cmlidXRpb24ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChtYXBFdmVudCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnRfKG1hcEV2ZW50LmZyYW1lU3RhdGUpO1xuICAgIH07XG4gICAgcmV0dXJuIEF0dHJpYnV0aW9uO1xufShDb250cm9sKSk7XG5leHBvcnQgZGVmYXVsdCBBdHRyaWJ1dGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF0dHJpYnV0aW9uLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbC9Sb3RhdGVcbiAqL1xuaW1wb3J0IENvbnRyb2wgZnJvbSAnLi9Db250cm9sLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBDTEFTU19DT05UUk9MLCBDTEFTU19ISURERU4sIENMQVNTX1VOU0VMRUNUQUJMRSB9IGZyb20gJy4uL2Nzcy5qcyc7XG5pbXBvcnQgeyBlYXNlT3V0IH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLXJvdGF0ZSddIENTUyBjbGFzcyBuYW1lLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFtsYWJlbD0n4oenJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSByb3RhdGUgYnV0dG9uLlxuICogSW5zdGVhZCBvZiB0ZXh0LCBhbHNvIGFuIGVsZW1lbnQgKGUuZy4gYSBgc3BhbmAgZWxlbWVudCkgY2FuIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3RpcExhYmVsPSdSZXNldCByb3RhdGlvbiddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgcm90YXRlIHRpcC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY29tcGFzc0NsYXNzTmFtZT0nb2wtY29tcGFzcyddIENTUyBjbGFzcyBuYW1lIGZvciB0aGUgY29tcGFzcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXV0b0hpZGU9dHJ1ZV0gSGlkZSB0aGUgY29udHJvbCB3aGVuIHJvdGF0aW9uIGlzIDAuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtyZW5kZXJdIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIHRoZSBjb250cm9sIHNob3VsZFxuICogYmUgcmUtcmVuZGVyZWQuIFRoaXMgaXMgY2FsbGVkIGluIGEgYHJlcXVlc3RBbmltYXRpb25GcmFtZWAgY2FsbGJhY2suXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKCk6dm9pZH0gW3Jlc2V0Tm9ydGhdIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIHRoZSBjb250cm9sIGlzIGNsaWNrZWQuXG4gKiBUaGlzIHdpbGwgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgYHJlc2V0Tm9ydGhgLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91IHdhbnQgdGhlIGNvbnRyb2wgdG8gYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIG1hcCdzIHZpZXdwb3J0LlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgYnV0dG9uIGNvbnRyb2wgdG8gcmVzZXQgcm90YXRpb24gdG8gMC5cbiAqIFRvIHN0eWxlIHRoaXMgY29udHJvbCB1c2UgY3NzIHNlbGVjdG9yIGAub2wtcm90YXRlYC4gQSBgLm9sLWhpZGRlbmAgY3NzXG4gKiBzZWxlY3RvciBpcyBhZGRlZCB0byB0aGUgYnV0dG9uIHdoZW4gdGhlIHJvdGF0aW9uIGlzIDAuXG4gKlxuICogQGFwaVxuICovXG52YXIgUm90YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSb3RhdGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgUm90YXRlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUm90YXRlKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICAgICAgcmVuZGVyOiBvcHRpb25zLnJlbmRlcixcbiAgICAgICAgICAgIHRhcmdldDogb3B0aW9ucy50YXJnZXQsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSBvcHRpb25zLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnb2wtcm90YXRlJztcbiAgICAgICAgdmFyIGxhYmVsID0gb3B0aW9ucy5sYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5sYWJlbCA6ICdcXHUyMUU3JztcbiAgICAgICAgdmFyIGNvbXBhc3NDbGFzc05hbWUgPSBvcHRpb25zLmNvbXBhc3NDbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLmNvbXBhc3NDbGFzc05hbWVcbiAgICAgICAgICAgIDogJ29sLWNvbXBhc3MnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFiZWxfID0gbnVsbDtcbiAgICAgICAgaWYgKHR5cGVvZiBsYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXy5jbGFzc05hbWUgPSBjb21wYXNzQ2xhc3NOYW1lO1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfLnRleHRDb250ZW50ID0gbGFiZWw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5sYWJlbF8gPSBsYWJlbDtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXy5jbGFzc0xpc3QuYWRkKGNvbXBhc3NDbGFzc05hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aXBMYWJlbCA9IG9wdGlvbnMudGlwTGFiZWwgPyBvcHRpb25zLnRpcExhYmVsIDogJ1Jlc2V0IHJvdGF0aW9uJztcbiAgICAgICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24uY2xhc3NOYW1lID0gY2xhc3NOYW1lICsgJy1yZXNldCc7XG4gICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbi50aXRsZSA9IHRpcExhYmVsO1xuICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQoX3RoaXMubGFiZWxfKTtcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNMSUNLLCBfdGhpcy5oYW5kbGVDbGlja18uYmluZChfdGhpcyksIGZhbHNlKTtcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSBjbGFzc05hbWUgKyAnICcgKyBDTEFTU19VTlNFTEVDVEFCTEUgKyAnICcgKyBDTEFTU19DT05UUk9MO1xuICAgICAgICB2YXIgZWxlbWVudCA9IF90aGlzLmVsZW1lbnQ7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY3NzQ2xhc3NlcztcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgICAgICBfdGhpcy5jYWxsUmVzZXROb3J0aF8gPSBvcHRpb25zLnJlc2V0Tm9ydGggPyBvcHRpb25zLnJlc2V0Tm9ydGggOiB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYXV0b0hpZGVfID0gb3B0aW9ucy5hdXRvSGlkZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5hdXRvSGlkZSA6IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJvdGF0aW9uXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKF90aGlzLmF1dG9IaWRlXykge1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTX0hJRERFTik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBoYW5kbGVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFJvdGF0ZS5wcm90b3R5cGUuaGFuZGxlQ2xpY2tfID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICh0aGlzLmNhbGxSZXNldE5vcnRoXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmNhbGxSZXNldE5vcnRoXygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXNldE5vcnRoXygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFJvdGF0ZS5wcm90b3R5cGUucmVzZXROb3J0aF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICghdmlldykge1xuICAgICAgICAgICAgLy8gdGhlIG1hcCBkb2VzIG5vdCBoYXZlIGEgdmlldywgc28gd2UgY2FuJ3QgYWN0XG4gICAgICAgICAgICAvLyB1cG9uIGl0XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJvdGF0aW9uID0gdmlldy5nZXRSb3RhdGlvbigpO1xuICAgICAgICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZHVyYXRpb25fID4gMCAmJiByb3RhdGlvbiAlICgyICogTWF0aC5QSSkgIT09IDApIHtcbiAgICAgICAgICAgICAgICB2aWV3LmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb25fLFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2aWV3LnNldFJvdGF0aW9uKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHJvdGF0ZSBjb250cm9sIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBFdmVudCBNYXAgZXZlbnQuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgUm90YXRlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAobWFwRXZlbnQpIHtcbiAgICAgICAgdmFyIGZyYW1lU3RhdGUgPSBtYXBFdmVudC5mcmFtZVN0YXRlO1xuICAgICAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcm90YXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICAgICAgaWYgKHJvdGF0aW9uICE9IHRoaXMucm90YXRpb25fKSB7XG4gICAgICAgICAgICB2YXIgdHJhbnNmb3JtID0gJ3JvdGF0ZSgnICsgcm90YXRpb24gKyAncmFkKSc7XG4gICAgICAgICAgICBpZiAodGhpcy5hdXRvSGlkZV8pIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGFpbnMgPSB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTX0hJRERFTik7XG4gICAgICAgICAgICAgICAgaWYgKCFjb250YWlucyAmJiByb3RhdGlvbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19ISURERU4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb250YWlucyAmJiByb3RhdGlvbiAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU19ISURERU4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubGFiZWxfLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJvdGF0aW9uXyA9IHJvdGF0aW9uO1xuICAgIH07XG4gICAgcmV0dXJuIFJvdGF0ZTtcbn0oQ29udHJvbCkpO1xuZXhwb3J0IGRlZmF1bHQgUm90YXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Um90YXRlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbC9ab29tXG4gKi9cbmltcG9ydCBDb250cm9sIGZyb20gJy4vQ29udHJvbC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgQ0xBU1NfQ09OVFJPTCwgQ0xBU1NfVU5TRUxFQ1RBQkxFIH0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7IGVhc2VPdXQgfSBmcm9tICcuLi9lYXNpbmcuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC16b29tJ10gQ1NTIGNsYXNzIG5hbWUuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3pvb21JbkNsYXNzTmFtZT1jbGFzc05hbWUgKyAnLWluJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHRoZSB6b29tLWluIGJ1dHRvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbem9vbU91dENsYXNzTmFtZT1jbGFzc05hbWUgKyAnLW91dCddIENTUyBjbGFzcyBuYW1lIGZvciB0aGUgem9vbS1vdXQgYnV0dG9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFt6b29tSW5MYWJlbD0nKyddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgem9vbS1pblxuICogYnV0dG9uLiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfEhUTUxFbGVtZW50fSBbem9vbU91dExhYmVsPSctJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSB6b29tLW91dCBidXR0b24uXG4gKiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbem9vbUluVGlwTGFiZWw9J1pvb20gaW4nXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIGJ1dHRvbiB0aXAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3pvb21PdXRUaXBMYWJlbD0nWm9vbSBvdXQnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIGJ1dHRvbiB0aXAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2RlbHRhPTFdIFRoZSB6b29tIGRlbHRhIGFwcGxpZWQgb24gZWFjaCBjbGljay5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBTcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdSB3YW50IHRoZSBjb250cm9sIHRvIGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAncyB2aWV3cG9ydC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIGNvbnRyb2wgd2l0aCAyIGJ1dHRvbnMsIG9uZSBmb3Igem9vbSBpbiBhbmQgb25lIGZvciB6b29tIG91dC5cbiAqIFRoaXMgY29udHJvbCBpcyBvbmUgb2YgdGhlIGRlZmF1bHQgY29udHJvbHMgb2YgYSBtYXAuIFRvIHN0eWxlIHRoaXMgY29udHJvbFxuICogdXNlIGNzcyBzZWxlY3RvcnMgYC5vbC16b29tLWluYCBhbmQgYC5vbC16b29tLW91dGAuXG4gKlxuICogQGFwaVxuICovXG52YXIgWm9vbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoWm9vbSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBab29tIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gWm9vbShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgICAgICAgIHRhcmdldDogb3B0aW9ucy50YXJnZXQsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSBvcHRpb25zLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnb2wtem9vbSc7XG4gICAgICAgIHZhciBkZWx0YSA9IG9wdGlvbnMuZGVsdGEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZGVsdGEgOiAxO1xuICAgICAgICB2YXIgem9vbUluQ2xhc3NOYW1lID0gb3B0aW9ucy56b29tSW5DbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnpvb21JbkNsYXNzTmFtZVxuICAgICAgICAgICAgOiBjbGFzc05hbWUgKyAnLWluJztcbiAgICAgICAgdmFyIHpvb21PdXRDbGFzc05hbWUgPSBvcHRpb25zLnpvb21PdXRDbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnpvb21PdXRDbGFzc05hbWVcbiAgICAgICAgICAgIDogY2xhc3NOYW1lICsgJy1vdXQnO1xuICAgICAgICB2YXIgem9vbUluTGFiZWwgPSBvcHRpb25zLnpvb21JbkxhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb21JbkxhYmVsIDogJysnO1xuICAgICAgICB2YXIgem9vbU91dExhYmVsID0gb3B0aW9ucy56b29tT3V0TGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuem9vbU91dExhYmVsIDogJ1xcdTIyMTInO1xuICAgICAgICB2YXIgem9vbUluVGlwTGFiZWwgPSBvcHRpb25zLnpvb21JblRpcExhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb21JblRpcExhYmVsIDogJ1pvb20gaW4nO1xuICAgICAgICB2YXIgem9vbU91dFRpcExhYmVsID0gb3B0aW9ucy56b29tT3V0VGlwTGFiZWwgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnpvb21PdXRUaXBMYWJlbFxuICAgICAgICAgICAgOiAnWm9vbSBvdXQnO1xuICAgICAgICB2YXIgaW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGluRWxlbWVudC5jbGFzc05hbWUgPSB6b29tSW5DbGFzc05hbWU7XG4gICAgICAgIGluRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgICAgIGluRWxlbWVudC50aXRsZSA9IHpvb21JblRpcExhYmVsO1xuICAgICAgICBpbkVsZW1lbnQuYXBwZW5kQ2hpbGQodHlwZW9mIHpvb21JbkxhYmVsID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh6b29tSW5MYWJlbClcbiAgICAgICAgICAgIDogem9vbUluTGFiZWwpO1xuICAgICAgICBpbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0xJQ0ssIF90aGlzLmhhbmRsZUNsaWNrXy5iaW5kKF90aGlzLCBkZWx0YSksIGZhbHNlKTtcbiAgICAgICAgdmFyIG91dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgb3V0RWxlbWVudC5jbGFzc05hbWUgPSB6b29tT3V0Q2xhc3NOYW1lO1xuICAgICAgICBvdXRFbGVtZW50LnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICAgICAgb3V0RWxlbWVudC50aXRsZSA9IHpvb21PdXRUaXBMYWJlbDtcbiAgICAgICAgb3V0RWxlbWVudC5hcHBlbmRDaGlsZCh0eXBlb2Ygem9vbU91dExhYmVsID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh6b29tT3V0TGFiZWwpXG4gICAgICAgICAgICA6IHpvb21PdXRMYWJlbCk7XG4gICAgICAgIG91dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0xJQ0ssIF90aGlzLmhhbmRsZUNsaWNrXy5iaW5kKF90aGlzLCAtZGVsdGEpLCBmYWxzZSk7XG4gICAgICAgIHZhciBjc3NDbGFzc2VzID0gY2xhc3NOYW1lICsgJyAnICsgQ0xBU1NfVU5TRUxFQ1RBQkxFICsgJyAnICsgQ0xBU1NfQ09OVFJPTDtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBfdGhpcy5lbGVtZW50O1xuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGNzc0NsYXNzZXM7XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoaW5FbGVtZW50KTtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChvdXRFbGVtZW50KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBab29tIGRlbHRhLlxuICAgICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnQgVGhlIGV2ZW50IHRvIGhhbmRsZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgWm9vbS5wcm90b3R5cGUuaGFuZGxlQ2xpY2tfID0gZnVuY3Rpb24gKGRlbHRhLCBldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnpvb21CeURlbHRhXyhkZWx0YSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgWm9vbSBkZWx0YS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFpvb20ucHJvdG90eXBlLnpvb21CeURlbHRhXyA9IGZ1bmN0aW9uIChkZWx0YSkge1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAoIXZpZXcpIHtcbiAgICAgICAgICAgIC8vIHRoZSBtYXAgZG9lcyBub3QgaGF2ZSBhIHZpZXcsIHNvIHdlIGNhbid0IGFjdFxuICAgICAgICAgICAgLy8gdXBvbiBpdFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjdXJyZW50Wm9vbSA9IHZpZXcuZ2V0Wm9vbSgpO1xuICAgICAgICBpZiAoY3VycmVudFpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIG5ld1pvb20gPSB2aWV3LmdldENvbnN0cmFpbmVkWm9vbShjdXJyZW50Wm9vbSArIGRlbHRhKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmR1cmF0aW9uXyA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodmlldy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3LmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmlldy5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgem9vbTogbmV3Wm9vbSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb25fLFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2aWV3LnNldFpvb20obmV3Wm9vbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBab29tO1xufShDb250cm9sKSk7XG5leHBvcnQgZGVmYXVsdCBab29tO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Wm9vbS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbVxuICovXG5pbXBvcnQgSW50ZXJhY3Rpb24sIHsgem9vbUJ5RGVsdGEgfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4uL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGVsdGE9MV0gVGhlIHpvb20gZGVsdGEgYXBwbGllZCBvbiBlYWNoIGRvdWJsZSBjbGljay5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSBieSBkb3VibGUtY2xpY2tpbmcgb24gdGhlIG1hcC5cbiAqIEBhcGlcbiAqL1xudmFyIERvdWJsZUNsaWNrWm9vbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRG91YmxlQ2xpY2tab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRG91YmxlQ2xpY2tab29tKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRlbHRhXyA9IG9wdGlvbnMuZGVsdGEgPyBvcHRpb25zLmRlbHRhIDogMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSAoaWYgaXQgd2FzIGFcbiAgICAgKiBkb3VibGVjbGljaykgYW5kIGV2ZW50dWFsbHkgem9vbXMgdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqL1xuICAgIERvdWJsZUNsaWNrWm9vbS5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuREJMQ0xJQ0spIHtcbiAgICAgICAgICAgIHZhciBicm93c2VyRXZlbnQgPSAvKiogQHR5cGUge01vdXNlRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIHZhciBhbmNob3IgPSBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZTtcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IGJyb3dzZXJFdmVudC5zaGlmdEtleSA/IC10aGlzLmRlbHRhXyA6IHRoaXMuZGVsdGFfO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgem9vbUJ5RGVsdGEodmlldywgZGVsdGEsIGFuY2hvciwgdGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICAgICAgYnJvd3NlckV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzdG9wRXZlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhc3RvcEV2ZW50O1xuICAgIH07XG4gICAgcmV0dXJuIERvdWJsZUNsaWNrWm9vbTtcbn0oSW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IERvdWJsZUNsaWNrWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURvdWJsZUNsaWNrWm9vbS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RyYWdQYW5cbiAqL1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiwgeyBjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVycywgfSBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IHsgRkFMU0UgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgYWxsLCBmb2N1c1dpdGhUYWJpbmRleCwgbm9Nb2RpZmllcktleXMsIHByaW1hcnlBY3Rpb24sIH0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQgeyBlYXNlT3V0IH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbmltcG9ydCB7IHJvdGF0ZSBhcyByb3RhdGVDb29yZGluYXRlLCBzY2FsZSBhcyBzY2FsZUNvb3JkaW5hdGUsIH0gZnJvbSAnLi4vY29vcmRpbmF0ZS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGEgYm9vbGVhblxuICogdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb25+bm9Nb2RpZmllcktleXN9IGFuZCB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb25+cHJpbWFyeUFjdGlvbn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvbkZvY3VzT25seT1mYWxzZV0gV2hlbiB0aGUgbWFwJ3MgdGFyZ2V0IGhhcyBhIGB0YWJpbmRleGAgYXR0cmlidXRlIHNldCxcbiAqIHRoZSBpbnRlcmFjdGlvbiB3aWxsIG9ubHkgaGFuZGxlIGV2ZW50cyB3aGVuIHRoZSBtYXAgaGFzIHRoZSBmb2N1cy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vS2luZXRpYy5qc1wiKS5kZWZhdWx0fSBba2luZXRpY10gS2luZXRpYyBpbmVydGlhIHRvIGFwcGx5IHRvIHRoZSBwYW4uXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHBhbiB0aGUgbWFwIGJ5IGRyYWdnaW5nIHRoZSBtYXAuXG4gKiBAYXBpXG4gKi9cbnZhciBEcmFnUGFuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEcmFnUGFuLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRHJhZ1BhbihvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBzdG9wRG93bjogRkFMU0UsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL0tpbmV0aWMuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5raW5ldGljXyA9IG9wdGlvbnMua2luZXRpYztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3RDZW50cm9pZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFzdFBvaW50ZXJzQ291bnRfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wYW5uaW5nXyA9IGZhbHNlO1xuICAgICAgICB2YXIgY29uZGl0aW9uID0gb3B0aW9ucy5jb25kaXRpb25cbiAgICAgICAgICAgID8gb3B0aW9ucy5jb25kaXRpb25cbiAgICAgICAgICAgIDogYWxsKG5vTW9kaWZpZXJLZXlzLCBwcmltYXJ5QWN0aW9uKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbmRpdGlvbl8gPSBvcHRpb25zLm9uRm9jdXNPbmx5XG4gICAgICAgICAgICA/IGFsbChmb2N1c1dpdGhUYWJpbmRleCwgY29uZGl0aW9uKVxuICAgICAgICAgICAgOiBjb25kaXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm5vS2luZXRpY18gPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICovXG4gICAgRHJhZ1Bhbi5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoIXRoaXMucGFubmluZ18pIHtcbiAgICAgICAgICAgIHRoaXMucGFubmluZ18gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5nZXRNYXAoKS5nZXRWaWV3KCkuYmVnaW5JbnRlcmFjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0YXJnZXRQb2ludGVycyA9IHRoaXMudGFyZ2V0UG9pbnRlcnM7XG4gICAgICAgIHZhciBjZW50cm9pZCA9IGNlbnRyb2lkRnJvbVBvaW50ZXJzKHRhcmdldFBvaW50ZXJzKTtcbiAgICAgICAgaWYgKHRhcmdldFBvaW50ZXJzLmxlbmd0aCA9PSB0aGlzLmxhc3RQb2ludGVyc0NvdW50Xykge1xuICAgICAgICAgICAgaWYgKHRoaXMua2luZXRpY18pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmtpbmV0aWNfLnVwZGF0ZShjZW50cm9pZFswXSwgY2VudHJvaWRbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubGFzdENlbnRyb2lkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gW1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RDZW50cm9pZFswXSAtIGNlbnRyb2lkWzBdLFxuICAgICAgICAgICAgICAgICAgICBjZW50cm9pZFsxXSAtIHRoaXMubGFzdENlbnRyb2lkWzFdLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgICAgIHNjYWxlQ29vcmRpbmF0ZShkZWx0YSwgdmlldy5nZXRSZXNvbHV0aW9uKCkpO1xuICAgICAgICAgICAgICAgIHJvdGF0ZUNvb3JkaW5hdGUoZGVsdGEsIHZpZXcuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgICAgICAgICAgdmlldy5hZGp1c3RDZW50ZXJJbnRlcm5hbChkZWx0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5raW5ldGljXykge1xuICAgICAgICAgICAgLy8gcmVzZXQgc28gd2UgZG9uJ3Qgb3ZlcmVzdGltYXRlIHRoZSBraW5ldGljIGVuZXJneSBhZnRlclxuICAgICAgICAgICAgLy8gYWZ0ZXIgb25lIGZpbmdlciBkb3duLCB0aW55IGRyYWcsIHNlY29uZCBmaW5nZXIgZG93blxuICAgICAgICAgICAgdGhpcy5raW5ldGljXy5iZWdpbigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdENlbnRyb2lkID0gY2VudHJvaWQ7XG4gICAgICAgIHRoaXMubGFzdFBvaW50ZXJzQ291bnRfID0gdGFyZ2V0UG9pbnRlcnMubGVuZ3RoO1xuICAgICAgICBtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgdXAgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIERyYWdQYW4ucHJvdG90eXBlLmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLm5vS2luZXRpY18gJiYgdGhpcy5raW5ldGljXyAmJiB0aGlzLmtpbmV0aWNfLmVuZCgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3RhbmNlID0gdGhpcy5raW5ldGljXy5nZXREaXN0YW5jZSgpO1xuICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9IHRoaXMua2luZXRpY18uZ2V0QW5nbGUoKTtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gdmlldy5nZXRDZW50ZXJJbnRlcm5hbCgpO1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXJweCA9IG1hcC5nZXRQaXhlbEZyb21Db29yZGluYXRlSW50ZXJuYWwoY2VudGVyKTtcbiAgICAgICAgICAgICAgICB2YXIgZGVzdCA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwoW1xuICAgICAgICAgICAgICAgICAgICBjZW50ZXJweFswXSAtIGRpc3RhbmNlICogTWF0aC5jb3MoYW5nbGUpLFxuICAgICAgICAgICAgICAgICAgICBjZW50ZXJweFsxXSAtIGRpc3RhbmNlICogTWF0aC5zaW4oYW5nbGUpLFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIHZpZXcuYW5pbWF0ZUludGVybmFsKHtcbiAgICAgICAgICAgICAgICAgICAgY2VudGVyOiB2aWV3LmdldENvbnN0cmFpbmVkQ2VudGVyKGRlc3QpLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYW5uaW5nXykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFubmluZ18gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2aWV3LmVuZEludGVyYWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5raW5ldGljXykge1xuICAgICAgICAgICAgICAgIC8vIHJlc2V0IHNvIHdlIGRvbid0IG92ZXJlc3RpbWF0ZSB0aGUga2luZXRpYyBlbmVyZ3kgYWZ0ZXJcbiAgICAgICAgICAgICAgICAvLyBhZnRlciBvbmUgZmluZ2VyIHVwLCB0aW55IGRyYWcsIHNlY29uZCBmaW5nZXIgdXBcbiAgICAgICAgICAgICAgICB0aGlzLmtpbmV0aWNfLmJlZ2luKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxhc3RDZW50cm9pZCA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgRHJhZ1Bhbi5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPiAwICYmIHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgICAgIHRoaXMubGFzdENlbnRyb2lkID0gbnVsbDtcbiAgICAgICAgICAgIC8vIHN0b3AgYW55IGN1cnJlbnQgYW5pbWF0aW9uXG4gICAgICAgICAgICBpZiAodmlldy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHZpZXcuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMua2luZXRpY18pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmtpbmV0aWNfLmJlZ2luKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBObyBraW5ldGljIGFzIHNvb24gYXMgbW9yZSB0aGFuIG9uZSBwb2ludGVyIG9uIHRoZSBzY3JlZW4gaXNcbiAgICAgICAgICAgIC8vIGRldGVjdGVkLiBUaGlzIGlzIHRvIHByZXZlbnQgbmFzdHkgcGFucyBhZnRlciBwaW5jaC5cbiAgICAgICAgICAgIHRoaXMubm9LaW5ldGljXyA9IHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID4gMTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRHJhZ1Bhbjtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBEcmFnUGFuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RHJhZ1Bhbi5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RyYWdSb3RhdGVcbiAqL1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IHsgRkFMU0UgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgYWx0U2hpZnRLZXlzT25seSwgbW91c2VBY3Rpb25CdXR0b24sIG1vdXNlT25seSwgfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbmltcG9ydCB7IGRpc2FibGUgfSBmcm9tICcuLi9yb3RhdGlvbmNvbnN0cmFpbnQuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW5cbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYSBib29sZWFuXG4gKiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gKiBEZWZhdWx0IGlzIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn5hbHRTaGlmdEtleXNPbmx5fS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byByb3RhdGUgdGhlIG1hcCBieSBjbGlja2luZyBhbmQgZHJhZ2dpbmcgb24gdGhlIG1hcCxcbiAqIG5vcm1hbGx5IGNvbWJpbmVkIHdpdGggYW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufSB0aGF0IGxpbWl0c1xuICogaXQgdG8gd2hlbiB0aGUgYWx0IGFuZCBzaGlmdCBrZXlzIGFyZSBoZWxkIGRvd24uXG4gKlxuICogVGhpcyBpbnRlcmFjdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBmb3IgbW91c2UgZGV2aWNlcy5cbiAqIEBhcGlcbiAqL1xudmFyIERyYWdSb3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERyYWdSb3RhdGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBEcmFnUm90YXRlKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIHN0b3BEb3duOiBGQUxTRSxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbmRpdGlvbl8gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogYWx0U2hpZnRLZXlzT25seTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFzdEFuZ2xlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBEcmFnUm90YXRlLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAodmlldy5nZXRDb25zdHJhaW50cygpLnJvdGF0aW9uID09PSBkaXNhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNpemUgPSBtYXAuZ2V0U2l6ZSgpO1xuICAgICAgICB2YXIgb2Zmc2V0ID0gbWFwQnJvd3NlckV2ZW50LnBpeGVsO1xuICAgICAgICB2YXIgdGhldGEgPSBNYXRoLmF0YW4yKHNpemVbMV0gLyAyIC0gb2Zmc2V0WzFdLCBvZmZzZXRbMF0gLSBzaXplWzBdIC8gMik7XG4gICAgICAgIGlmICh0aGlzLmxhc3RBbmdsZV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGRlbHRhID0gdGhldGEgLSB0aGlzLmxhc3RBbmdsZV87XG4gICAgICAgICAgICB2aWV3LmFkanVzdFJvdGF0aW9uSW50ZXJuYWwoLWRlbHRhKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RBbmdsZV8gPSB0aGV0YTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBEcmFnUm90YXRlLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoIW1vdXNlT25seShtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICB2aWV3LmVuZEludGVyYWN0aW9uKHRoaXMuZHVyYXRpb25fKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgRHJhZ1JvdGF0ZS5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoIW1vdXNlT25seShtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1vdXNlQWN0aW9uQnV0dG9uKG1hcEJyb3dzZXJFdmVudCkgJiZcbiAgICAgICAgICAgIHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIG1hcC5nZXRWaWV3KCkuYmVnaW5JbnRlcmFjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5sYXN0QW5nbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBEcmFnUm90YXRlO1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IERyYWdSb3RhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EcmFnUm90YXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvQm94XG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgRGlzcG9zYWJsZSBmcm9tICcuLi9EaXNwb3NhYmxlLmpzJztcbmltcG9ydCBQb2x5Z29uIGZyb20gJy4uL2dlb20vUG9seWdvbi5qcyc7XG52YXIgUmVuZGVyQm94ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZW5kZXJCb3gsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZSBDU1MgY2xhc3MgbmFtZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZW5kZXJCb3goY2xhc3NOYW1lKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5nZW9tZXRyeV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0hUTUxEaXZFbGVtZW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZWxlbWVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgX3RoaXMuZWxlbWVudF8uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBfdGhpcy5lbGVtZW50Xy5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nO1xuICAgICAgICBfdGhpcy5lbGVtZW50Xy5jbGFzc05hbWUgPSAnb2wtYm94ICcgKyBjbGFzc05hbWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXJ0UGl4ZWxfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmVuZFBpeGVsXyA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgUmVuZGVyQm94LnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0TWFwKG51bGwpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBSZW5kZXJCb3gucHJvdG90eXBlLnJlbmRlcl8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdGFydFBpeGVsID0gdGhpcy5zdGFydFBpeGVsXztcbiAgICAgICAgdmFyIGVuZFBpeGVsID0gdGhpcy5lbmRQaXhlbF87XG4gICAgICAgIHZhciBweCA9ICdweCc7XG4gICAgICAgIHZhciBzdHlsZSA9IHRoaXMuZWxlbWVudF8uc3R5bGU7XG4gICAgICAgIHN0eWxlLmxlZnQgPSBNYXRoLm1pbihzdGFydFBpeGVsWzBdLCBlbmRQaXhlbFswXSkgKyBweDtcbiAgICAgICAgc3R5bGUudG9wID0gTWF0aC5taW4oc3RhcnRQaXhlbFsxXSwgZW5kUGl4ZWxbMV0pICsgcHg7XG4gICAgICAgIHN0eWxlLndpZHRoID0gTWF0aC5hYnMoZW5kUGl4ZWxbMF0gLSBzdGFydFBpeGVsWzBdKSArIHB4O1xuICAgICAgICBzdHlsZS5oZWlnaHQgPSBNYXRoLmFicyhlbmRQaXhlbFsxXSAtIHN0YXJ0UGl4ZWxbMV0pICsgcHg7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqL1xuICAgIFJlbmRlckJveC5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICAgICAgICB0aGlzLm1hcF8uZ2V0T3ZlcmxheUNvbnRhaW5lcigpLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudF8pO1xuICAgICAgICAgICAgdmFyIHN0eWxlID0gdGhpcy5lbGVtZW50Xy5zdHlsZTtcbiAgICAgICAgICAgIHN0eWxlLmxlZnQgPSAnaW5oZXJpdCc7XG4gICAgICAgICAgICBzdHlsZS50b3AgPSAnaW5oZXJpdCc7XG4gICAgICAgICAgICBzdHlsZS53aWR0aCA9ICdpbmhlcml0JztcbiAgICAgICAgICAgIHN0eWxlLmhlaWdodCA9ICdpbmhlcml0JztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hcF8gPSBtYXA7XG4gICAgICAgIGlmICh0aGlzLm1hcF8pIHtcbiAgICAgICAgICAgIHRoaXMubWFwXy5nZXRPdmVybGF5Q29udGFpbmVyKCkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50Xyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHN0YXJ0UGl4ZWwgU3RhcnQgcGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gZW5kUGl4ZWwgRW5kIHBpeGVsLlxuICAgICAqL1xuICAgIFJlbmRlckJveC5wcm90b3R5cGUuc2V0UGl4ZWxzID0gZnVuY3Rpb24gKHN0YXJ0UGl4ZWwsIGVuZFBpeGVsKSB7XG4gICAgICAgIHRoaXMuc3RhcnRQaXhlbF8gPSBzdGFydFBpeGVsO1xuICAgICAgICB0aGlzLmVuZFBpeGVsXyA9IGVuZFBpeGVsO1xuICAgICAgICB0aGlzLmNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG9yIHVwZGF0ZXMgdGhlIGNhY2hlZCBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBSZW5kZXJCb3gucHJvdG90eXBlLmNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdGFydFBpeGVsID0gdGhpcy5zdGFydFBpeGVsXztcbiAgICAgICAgdmFyIGVuZFBpeGVsID0gdGhpcy5lbmRQaXhlbF87XG4gICAgICAgIHZhciBwaXhlbHMgPSBbXG4gICAgICAgICAgICBzdGFydFBpeGVsLFxuICAgICAgICAgICAgW3N0YXJ0UGl4ZWxbMF0sIGVuZFBpeGVsWzFdXSxcbiAgICAgICAgICAgIGVuZFBpeGVsLFxuICAgICAgICAgICAgW2VuZFBpeGVsWzBdLCBzdGFydFBpeGVsWzFdXSxcbiAgICAgICAgXTtcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gcGl4ZWxzLm1hcCh0aGlzLm1hcF8uZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsLCB0aGlzLm1hcF8pO1xuICAgICAgICAvLyBjbG9zZSB0aGUgcG9seWdvblxuICAgICAgICBjb29yZGluYXRlc1s0XSA9IGNvb3JkaW5hdGVzWzBdLnNsaWNlKCk7XG4gICAgICAgIGlmICghdGhpcy5nZW9tZXRyeV8pIHtcbiAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnlfID0gbmV3IFBvbHlnb24oW2Nvb3JkaW5hdGVzXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5Xy5zZXRDb29yZGluYXRlcyhbY29vcmRpbmF0ZXNdKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5LlxuICAgICAqL1xuICAgIFJlbmRlckJveC5wcm90b3R5cGUuZ2V0R2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlb21ldHJ5XztcbiAgICB9O1xuICAgIHJldHVybiBSZW5kZXJCb3g7XG59KERpc3Bvc2FibGUpKTtcbmV4cG9ydCBkZWZhdWx0IFJlbmRlckJveDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJveC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RyYWdCb3hcbiAqL1xuLy8gRklYTUUgZHJhdyBkcmFnIGJveFxuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQgUG9pbnRlckludGVyYWN0aW9uIGZyb20gJy4vUG9pbnRlci5qcyc7XG5pbXBvcnQgUmVuZGVyQm94IGZyb20gJy4uL3JlbmRlci9Cb3guanMnO1xuaW1wb3J0IHsgbW91c2VBY3Rpb25CdXR0b24gfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR9IGFuZCB0d29cbiAqIHtAbGluayBtb2R1bGU6b2wvcGl4ZWx+UGl4ZWx9cyBhbmQgcmV0dXJucyBhIGB7Ym9vbGVhbn1gLiBJZiB0aGUgY29uZGl0aW9uIGlzIG1ldCxcbiAqIHRydWUgc2hvdWxkIGJlIHJldHVybmVkLlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKHRoaXM6ID8sIGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0LCBpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbCwgaW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWwpOmJvb2xlYW59IEVuZENvbmRpdGlvblxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1kcmFnYm94J10gQ1NTIGNsYXNzIG5hbWUgZm9yIHN0eWxpbmcgdGhlIGJveC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGEgYm9vbGVhblxuICogdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgb2wvZXZlbnRzL2NvbmRpdGlvbn5tb3VzZUFjdGlvbkJ1dHRvbn0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pbkFyZWE9NjRdIFRoZSBtaW5pbXVtIGFyZWEgb2YgdGhlIGJveCBpbiBwaXhlbCwgdGhpcyB2YWx1ZSBpcyB1c2VkIGJ5IHRoZSBkZWZhdWx0XG4gKiBgYm94RW5kQ29uZGl0aW9uYCBmdW5jdGlvbi5cbiAqIEBwcm9wZXJ0eSB7RW5kQ29uZGl0aW9ufSBbYm94RW5kQ29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCB0d29cbiAqIHtAbGluayBtb2R1bGU6b2wvcGl4ZWx+UGl4ZWx9cyB0byBpbmRpY2F0ZSB3aGV0aGVyIGEgYGJveGVuZGAgZXZlbnQgc2hvdWxkIGJlIGZpcmVkLlxuICogRGVmYXVsdCBpcyBgdHJ1ZWAgaWYgdGhlIGFyZWEgb2YgdGhlIGJveCBpcyBiaWdnZXIgdGhhbiB0aGUgYG1pbkFyZWFgIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24odGhpczpEcmFnQm94LCBpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW29uQm94RW5kXSBDb2RlIHRvIGV4ZWN1dGUganVzdFxuICogYmVmb3JlIGBib3hlbmRgIGlzIGZpcmVkLlxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbnZhciBEcmFnQm94RXZlbnRUeXBlID0ge1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB1cG9uIGRyYWcgYm94IHN0YXJ0LlxuICAgICAqIEBldmVudCBEcmFnQm94RXZlbnQjYm94c3RhcnRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQk9YU1RBUlQ6ICdib3hzdGFydCcsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIG9uIGRyYWcgd2hlbiBib3ggaXMgYWN0aXZlLlxuICAgICAqIEBldmVudCBEcmFnQm94RXZlbnQjYm94ZHJhZ1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCT1hEUkFHOiAnYm94ZHJhZycsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHVwb24gZHJhZyBib3ggZW5kLlxuICAgICAqIEBldmVudCBEcmFnQm94RXZlbnQjYm94ZW5kXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJPWEVORDogJ2JveGVuZCcsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHVwb24gZHJhZyBib3ggY2FuY2VsZWQuXG4gICAgICogQGV2ZW50IERyYWdCb3hFdmVudCNib3hjYW5jZWxcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQk9YQ0FOQ0VMOiAnYm94Y2FuY2VsJyxcbn07XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ0JveH5EcmFnQm94fSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZlxuICogdGhpcyB0eXBlLlxuICovXG52YXIgRHJhZ0JveEV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEcmFnQm94RXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgVGhlIGV2ZW50IGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE9yaWdpbmF0aW5nIGV2ZW50LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIERyYWdCb3hFdmVudCh0eXBlLCBjb29yZGluYXRlLCBtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjb29yZGluYXRlIG9mIHRoZSBkcmFnIGV2ZW50LlxuICAgICAgICAgKiBAY29uc3RcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29vcmRpbmF0ZSA9IGNvb3JkaW5hdGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAY29uc3RcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBCcm93c2VyRXZlbnQgPSBtYXBCcm93c2VyRXZlbnQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIERyYWdCb3hFdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCB7IERyYWdCb3hFdmVudCB9O1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gZHJhdyBhIHZlY3RvciBib3ggYnkgY2xpY2tpbmcgYW5kIGRyYWdnaW5nIG9uIHRoZSBtYXAsXG4gKiBub3JtYWxseSBjb21iaW5lZCB3aXRoIGFuIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn0gdGhhdCBsaW1pdHNcbiAqIGl0IHRvIHdoZW4gdGhlIHNoaWZ0IG9yIG90aGVyIGtleSBpcyBoZWxkIGRvd24uIFRoaXMgaXMgdXNlZCwgZm9yIGV4YW1wbGUsXG4gKiBmb3Igem9vbWluZyB0byBhIHNwZWNpZmljIGFyZWEgb2YgdGhlIG1hcFxuICogKHNlZSB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdab29tfkRyYWdab29tfSBhbmRcbiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZUFuZFpvb219KS5cbiAqXG4gKiBAZmlyZXMgRHJhZ0JveEV2ZW50XG4gKiBAYXBpXG4gKi9cbnZhciBEcmFnQm94ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEcmFnQm94LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRHJhZ0JveChvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9yZW5kZXIvQm94LmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ib3hfID0gbmV3IFJlbmRlckJveChvcHRpb25zLmNsYXNzTmFtZSB8fCAnb2wtZHJhZ2JveCcpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1pbkFyZWFfID0gb3B0aW9ucy5taW5BcmVhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pbkFyZWEgOiA2NDtcbiAgICAgICAgaWYgKG9wdGlvbnMub25Cb3hFbmQpIHtcbiAgICAgICAgICAgIF90aGlzLm9uQm94RW5kID0gb3B0aW9ucy5vbkJveEVuZDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhcnRQaXhlbF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBtb3VzZUFjdGlvbkJ1dHRvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtFbmRDb25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ib3hFbmRDb25kaXRpb25fID0gb3B0aW9ucy5ib3hFbmRDb25kaXRpb25cbiAgICAgICAgICAgID8gb3B0aW9ucy5ib3hFbmRDb25kaXRpb25cbiAgICAgICAgICAgIDogX3RoaXMuZGVmYXVsdEJveEVuZENvbmRpdGlvbjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZGVmYXVsdCBjb25kaXRpb24gZm9yIGRldGVybWluaW5nIHdoZXRoZXIgdGhlIGJveGVuZCBldmVudFxuICAgICAqIHNob3VsZCBmaXJlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBUaGUgb3JpZ2luYXRpbmcgTWFwQnJvd3NlckV2ZW50XG4gICAgICogICAgIGxlYWRpbmcgdG8gdGhlIGJveCBlbmQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gc3RhcnRQaXhlbCBUaGUgc3RhcnRpbmcgcGl4ZWwgb2YgdGhlIGJveC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBlbmRQaXhlbCBUaGUgZW5kIHBpeGVsIG9mIHRoZSBib3guXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciBvciBub3QgdGhlIGJveGVuZCBjb25kaXRpb24gc2hvdWxkIGJlIGZpcmVkLlxuICAgICAqL1xuICAgIERyYWdCb3gucHJvdG90eXBlLmRlZmF1bHRCb3hFbmRDb25kaXRpb24gPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50LCBzdGFydFBpeGVsLCBlbmRQaXhlbCkge1xuICAgICAgICB2YXIgd2lkdGggPSBlbmRQaXhlbFswXSAtIHN0YXJ0UGl4ZWxbMF07XG4gICAgICAgIHZhciBoZWlnaHQgPSBlbmRQaXhlbFsxXSAtIHN0YXJ0UGl4ZWxbMV07XG4gICAgICAgIHJldHVybiB3aWR0aCAqIHdpZHRoICsgaGVpZ2h0ICogaGVpZ2h0ID49IHRoaXMubWluQXJlYV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGdlb21ldHJ5IG9mIGxhc3QgZHJhd24gYm94LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgRHJhZ0JveC5wcm90b3R5cGUuZ2V0R2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJveF8uZ2V0R2VvbWV0cnkoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBEcmFnQm94LnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHRoaXMuYm94Xy5zZXRQaXhlbHModGhpcy5zdGFydFBpeGVsXywgbWFwQnJvd3NlckV2ZW50LnBpeGVsKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBEcmFnQm94RXZlbnQoRHJhZ0JveEV2ZW50VHlwZS5CT1hEUkFHLCBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciB1cCBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgRHJhZ0JveC5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdGhpcy5ib3hfLnNldE1hcChudWxsKTtcbiAgICAgICAgdmFyIGNvbXBsZXRlQm94ID0gdGhpcy5ib3hFbmRDb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCwgdGhpcy5zdGFydFBpeGVsXywgbWFwQnJvd3NlckV2ZW50LnBpeGVsKTtcbiAgICAgICAgaWYgKGNvbXBsZXRlQm94KSB7XG4gICAgICAgICAgICB0aGlzLm9uQm94RW5kKG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBEcmFnQm94RXZlbnQoY29tcGxldGVCb3ggPyBEcmFnQm94RXZlbnRUeXBlLkJPWEVORCA6IERyYWdCb3hFdmVudFR5cGUuQk9YQ0FOQ0VMLCBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIERyYWdCb3gucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0UGl4ZWxfID0gbWFwQnJvd3NlckV2ZW50LnBpeGVsO1xuICAgICAgICAgICAgdGhpcy5ib3hfLnNldE1hcChtYXBCcm93c2VyRXZlbnQubWFwKTtcbiAgICAgICAgICAgIHRoaXMuYm94Xy5zZXRQaXhlbHModGhpcy5zdGFydFBpeGVsXywgdGhpcy5zdGFydFBpeGVsXyk7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IERyYWdCb3hFdmVudChEcmFnQm94RXZlbnRUeXBlLkJPWFNUQVJULCBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdG8gZXhlY3V0ZSBqdXN0IGJlZm9yZSBgb25ib3hlbmRgIGlzIGZpcmVkXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAgICovXG4gICAgRHJhZ0JveC5wcm90b3R5cGUub25Cb3hFbmQgPSBmdW5jdGlvbiAoZXZlbnQpIHsgfTtcbiAgICByZXR1cm4gRHJhZ0JveDtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBEcmFnQm94O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RHJhZ0JveC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RyYWdab29tXG4gKi9cbmltcG9ydCBEcmFnQm94IGZyb20gJy4vRHJhZ0JveC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlcywgZ2V0Qm90dG9tTGVmdCwgZ2V0Q2VudGVyLCBnZXRUb3BSaWdodCwgc2NhbGVGcm9tQ2VudGVyLCB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBlYXNlT3V0IH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbmltcG9ydCB7IHNoaWZ0S2V5T25seSB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtZHJhZ3pvb20nXSBDU1MgY2xhc3MgbmFtZSBmb3Igc3R5bGluZyB0aGVcbiAqIGJveC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdFxuICogdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufnNoaWZ0S2V5T25seX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTIwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW291dD1mYWxzZV0gVXNlIGludGVyYWN0aW9uIGZvciB6b29taW5nIG91dC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluQXJlYT02NF0gVGhlIG1pbmltdW0gYXJlYSBvZiB0aGUgYm94IGluIHBpeGVsLCB0aGlzIHZhbHVlIGlzIHVzZWQgYnkgdGhlIHBhcmVudCBkZWZhdWx0XG4gKiBgYm94RW5kQ29uZGl0aW9uYCBmdW5jdGlvbi5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIGJ5IGNsaWNraW5nIGFuZCBkcmFnZ2luZyBvbiB0aGUgbWFwLFxuICogbm9ybWFsbHkgY29tYmluZWQgd2l0aCBhbiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb259IHRoYXQgbGltaXRzXG4gKiBpdCB0byB3aGVuIGEga2V5LCBzaGlmdCBieSBkZWZhdWx0LCBpcyBoZWxkIGRvd24uXG4gKlxuICogVG8gY2hhbmdlIHRoZSBzdHlsZSBvZiB0aGUgYm94LCB1c2UgQ1NTIGFuZCB0aGUgYC5vbC1kcmFnem9vbWAgc2VsZWN0b3IsIG9yXG4gKiB5b3VyIGN1c3RvbSBvbmUgY29uZmlndXJlZCB3aXRoIGBjbGFzc05hbWVgLlxuICogQGFwaVxuICovXG52YXIgRHJhZ1pvb20gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERyYWdab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRHJhZ1pvb20ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBjb25kaXRpb24gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogc2hpZnRLZXlPbmx5O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGNvbmRpdGlvbjogY29uZGl0aW9uLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBvcHRpb25zLmNsYXNzTmFtZSB8fCAnb2wtZHJhZ3pvb20nLFxuICAgICAgICAgICAgbWluQXJlYTogb3B0aW9ucy5taW5BcmVhLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyMDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm91dF8gPSBvcHRpb25zLm91dCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vdXQgOiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB0byBleGVjdXRlIGp1c3QgYmVmb3JlIGBvbmJveGVuZGAgaXMgZmlyZWRcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBEcmFnWm9vbS5wcm90b3R5cGUub25Cb3hFbmQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgICAgIHZhciB2aWV3ID0gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vVmlldy5qc1wiKS5kZWZhdWx0fSAqLyAobWFwLmdldFZpZXcoKSk7XG4gICAgICAgIHZhciBzaXplID0gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSAqLyAobWFwLmdldFNpemUoKSk7XG4gICAgICAgIHZhciBleHRlbnQgPSB0aGlzLmdldEdlb21ldHJ5KCkuZ2V0RXh0ZW50KCk7XG4gICAgICAgIGlmICh0aGlzLm91dF8pIHtcbiAgICAgICAgICAgIHZhciBtYXBFeHRlbnQgPSB2aWV3LmNhbGN1bGF0ZUV4dGVudEludGVybmFsKHNpemUpO1xuICAgICAgICAgICAgdmFyIGJveFBpeGVsRXh0ZW50ID0gY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZXMoW1xuICAgICAgICAgICAgICAgIG1hcC5nZXRQaXhlbEZyb21Db29yZGluYXRlSW50ZXJuYWwoZ2V0Qm90dG9tTGVmdChleHRlbnQpKSxcbiAgICAgICAgICAgICAgICBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZUludGVybmFsKGdldFRvcFJpZ2h0KGV4dGVudCkpLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB2YXIgZmFjdG9yID0gdmlldy5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50SW50ZXJuYWwoYm94UGl4ZWxFeHRlbnQsIHNpemUpO1xuICAgICAgICAgICAgc2NhbGVGcm9tQ2VudGVyKG1hcEV4dGVudCwgMSAvIGZhY3Rvcik7XG4gICAgICAgICAgICBleHRlbnQgPSBtYXBFeHRlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSB2aWV3LmdldENvbnN0cmFpbmVkUmVzb2x1dGlvbih2aWV3LmdldFJlc29sdXRpb25Gb3JFeHRlbnRJbnRlcm5hbChleHRlbnQsIHNpemUpKTtcbiAgICAgICAgdmFyIGNlbnRlciA9IHZpZXcuZ2V0Q29uc3RyYWluZWRDZW50ZXIoZ2V0Q2VudGVyKGV4dGVudCksIHJlc29sdXRpb24pO1xuICAgICAgICB2aWV3LmFuaW1hdGVJbnRlcm5hbCh7XG4gICAgICAgICAgICByZXNvbHV0aW9uOiByZXNvbHV0aW9uLFxuICAgICAgICAgICAgY2VudGVyOiBjZW50ZXIsXG4gICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbl8sXG4gICAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIERyYWdab29tO1xufShEcmFnQm94KSk7XG5leHBvcnQgZGVmYXVsdCBEcmFnWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURyYWdab29tLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW5cbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvbiwgeyBwYW4gfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBLZXlDb2RlIGZyb20gJy4uL2V2ZW50cy9LZXlDb2RlLmpzJztcbmltcG9ydCB7IG5vTW9kaWZpZXJLZXlzLCB0YXJnZXROb3RFZGl0YWJsZSB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHsgcm90YXRlIGFzIHJvdGF0ZUNvb3JkaW5hdGUgfSBmcm9tICcuLi9jb29yZGluYXRlLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0XG4gKiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGJvb2xlYW4gdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLiBEZWZhdWx0IGlzXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb25+bm9Nb2RpZmllcktleXN9IGFuZFxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufnRhcmdldE5vdEVkaXRhYmxlfS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MTAwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtwaXhlbERlbHRhPTEyOF0gVGhlIGFtb3VudCBvZiBwaXhlbHMgdG8gcGFuIG9uIGVhY2gga2V5XG4gKiBwcmVzcy5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gcGFuIHRoZSBtYXAgdXNpbmcga2V5Ym9hcmQgYXJyb3dzLlxuICogTm90ZSB0aGF0LCBhbHRob3VnaCB0aGlzIGludGVyYWN0aW9uIGlzIGJ5IGRlZmF1bHQgaW5jbHVkZWQgaW4gbWFwcyxcbiAqIHRoZSBrZXlzIGNhbiBvbmx5IGJlIHVzZWQgd2hlbiBicm93c2VyIGZvY3VzIGlzIG9uIHRoZSBlbGVtZW50IHRvIHdoaWNoXG4gKiB0aGUga2V5Ym9hcmQgZXZlbnRzIGFyZSBhdHRhY2hlZC4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgbWFwIGRpdixcbiAqIHRob3VnaCB5b3UgY2FuIGNoYW5nZSB0aGlzIHdpdGggdGhlIGBrZXlib2FyZEV2ZW50VGFyZ2V0YCBpblxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfS4gYGRvY3VtZW50YCBuZXZlciBsb3NlcyBmb2N1cyBidXQsIGZvciBhbnkgb3RoZXJcbiAqIGVsZW1lbnQsIGZvY3VzIHdpbGwgaGF2ZSB0byBiZSBvbiwgYW5kIHJldHVybmVkIHRvLCB0aGlzIGVsZW1lbnQgaWYgdGhlIGtleXNcbiAqIGFyZSB0byBmdW5jdGlvbi5cbiAqIFNlZSBhbHNvIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tfktleWJvYXJkWm9vbX0uXG4gKiBAYXBpXG4gKi9cbnZhciBLZXlib2FyZFBhbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoS2V5Ym9hcmRQYW4sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBLZXlib2FyZFBhbihvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEJyb3dzZXIgZXZlbnQuXG4gICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbWJpbmVkIGNvbmRpdGlvbiByZXN1bHQuXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kZWZhdWx0Q29uZGl0aW9uXyA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiAobm9Nb2RpZmllcktleXMobWFwQnJvd3NlckV2ZW50KSAmJiB0YXJnZXROb3RFZGl0YWJsZShtYXBCcm93c2VyRXZlbnQpKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbmRpdGlvbl8gPVxuICAgICAgICAgICAgb3B0aW9ucy5jb25kaXRpb24gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jb25kaXRpb25cbiAgICAgICAgICAgICAgICA6IF90aGlzLmRlZmF1bHRDb25kaXRpb25fO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAxMDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxEZWx0YV8gPVxuICAgICAgICAgICAgb3B0aW9ucy5waXhlbERlbHRhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnBpeGVsRGVsdGEgOiAxMjg7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IGlmIGl0IHdhcyBhXG4gICAgICogYEtleUV2ZW50YCwgYW5kIGRlY2lkZXMgdGhlIGRpcmVjdGlvbiB0byBwYW4gdG8gKGlmIGFuIGFycm93IGtleSB3YXNcbiAgICAgKiBwcmVzc2VkKS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqIEB0aGlzIHtLZXlib2FyZFBhbn1cbiAgICAgKi9cbiAgICBLZXlib2FyZFBhbi5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IEV2ZW50VHlwZS5LRVlET1dOKSB7XG4gICAgICAgICAgICB2YXIga2V5RXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICB2YXIga2V5Q29kZSA9IGtleUV2ZW50LmtleUNvZGU7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkgJiZcbiAgICAgICAgICAgICAgICAoa2V5Q29kZSA9PSBLZXlDb2RlLkRPV04gfHxcbiAgICAgICAgICAgICAgICAgICAga2V5Q29kZSA9PSBLZXlDb2RlLkxFRlQgfHxcbiAgICAgICAgICAgICAgICAgICAga2V5Q29kZSA9PSBLZXlDb2RlLlJJR0hUIHx8XG4gICAgICAgICAgICAgICAgICAgIGtleUNvZGUgPT0gS2V5Q29kZS5VUCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgICAgICAgICAgdmFyIG1hcFVuaXRzRGVsdGEgPSB2aWV3LmdldFJlc29sdXRpb24oKSAqIHRoaXMucGl4ZWxEZWx0YV87XG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhWCA9IDAsIGRlbHRhWSA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGtleUNvZGUgPT0gS2V5Q29kZS5ET1dOKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhWSA9IC1tYXBVbml0c0RlbHRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChrZXlDb2RlID09IEtleUNvZGUuTEVGVCkge1xuICAgICAgICAgICAgICAgICAgICBkZWx0YVggPSAtbWFwVW5pdHNEZWx0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoa2V5Q29kZSA9PSBLZXlDb2RlLlJJR0hUKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhWCA9IG1hcFVuaXRzRGVsdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWx0YVkgPSBtYXBVbml0c0RlbHRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBbZGVsdGFYLCBkZWx0YVldO1xuICAgICAgICAgICAgICAgIHJvdGF0ZUNvb3JkaW5hdGUoZGVsdGEsIHZpZXcuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgICAgICAgICAgcGFuKHZpZXcsIGRlbHRhLCB0aGlzLmR1cmF0aW9uXyk7XG4gICAgICAgICAgICAgICAga2V5RXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBzdG9wRXZlbnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhc3RvcEV2ZW50O1xuICAgIH07XG4gICAgcmV0dXJuIEtleWJvYXJkUGFuO1xufShJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgS2V5Ym9hcmRQYW47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LZXlib2FyZFBhbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL0tleUNvZGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQGNvbnN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBMRUZUOiAzNyxcbiAgICBVUDogMzgsXG4gICAgUklHSFQ6IDM5LFxuICAgIERPV046IDQwLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtleUNvZGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21cbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvbiwgeyB6b29tQnlEZWx0YSB9IGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuaW1wb3J0IHsgdGFyZ2V0Tm90RWRpdGFibGUgfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0xMDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuIERlZmF1bHQgaXNcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn50YXJnZXROb3RFZGl0YWJsZX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2RlbHRhPTFdIFRoZSB6b29tIGxldmVsIGRlbHRhIG9uIGVhY2gga2V5IHByZXNzLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIHRoZSBtYXAgdXNpbmcga2V5Ym9hcmQgKyBhbmQgLS5cbiAqIE5vdGUgdGhhdCwgYWx0aG91Z2ggdGhpcyBpbnRlcmFjdGlvbiBpcyBieSBkZWZhdWx0IGluY2x1ZGVkIGluIG1hcHMsXG4gKiB0aGUga2V5cyBjYW4gb25seSBiZSB1c2VkIHdoZW4gYnJvd3NlciBmb2N1cyBpcyBvbiB0aGUgZWxlbWVudCB0byB3aGljaFxuICogdGhlIGtleWJvYXJkIGV2ZW50cyBhcmUgYXR0YWNoZWQuIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIG1hcCBkaXYsXG4gKiB0aG91Z2ggeW91IGNhbiBjaGFuZ2UgdGhpcyB3aXRoIHRoZSBga2V5Ym9hcmRFdmVudFRhcmdldGAgaW5cbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH0uIGBkb2N1bWVudGAgbmV2ZXIgbG9zZXMgZm9jdXMgYnV0LCBmb3IgYW55IG90aGVyXG4gKiBlbGVtZW50LCBmb2N1cyB3aWxsIGhhdmUgdG8gYmUgb24sIGFuZCByZXR1cm5lZCB0bywgdGhpcyBlbGVtZW50IGlmIHRoZSBrZXlzXG4gKiBhcmUgdG8gZnVuY3Rpb24uXG4gKiBTZWUgYWxzbyB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkUGFufktleWJvYXJkUGFufS5cbiAqIEBhcGlcbiAqL1xudmFyIEtleWJvYXJkWm9vbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoS2V5Ym9hcmRab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gS2V5Ym9hcmRab29tKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiB0YXJnZXROb3RFZGl0YWJsZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kZWx0YV8gPSBvcHRpb25zLmRlbHRhID8gb3B0aW9ucy5kZWx0YSA6IDE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gaWYgaXQgd2FzIGFcbiAgICAgKiBgS2V5RXZlbnRgLCBhbmQgZGVjaWRlcyB3aGV0aGVyIHRvIHpvb20gaW4gb3Igb3V0IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGVcbiAgICAgKiBrZXkgcHJlc3NlZCB3YXMgJysnIG9yICctJykuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKiBAdGhpcyB7S2V5Ym9hcmRab29tfVxuICAgICAqL1xuICAgIEtleWJvYXJkWm9vbS5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IEV2ZW50VHlwZS5LRVlET1dOIHx8XG4gICAgICAgICAgICBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuS0VZUFJFU1MpIHtcbiAgICAgICAgICAgIHZhciBrZXlFdmVudCA9IC8qKiBAdHlwZSB7S2V5Ym9hcmRFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgIHZhciBjaGFyQ29kZSA9IGtleUV2ZW50LmNoYXJDb2RlO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpICYmXG4gICAgICAgICAgICAgICAgKGNoYXJDb2RlID09ICcrJy5jaGFyQ29kZUF0KDApIHx8IGNoYXJDb2RlID09ICctJy5jaGFyQ29kZUF0KDApKSkge1xuICAgICAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGNoYXJDb2RlID09ICcrJy5jaGFyQ29kZUF0KDApID8gdGhpcy5kZWx0YV8gOiAtdGhpcy5kZWx0YV87XG4gICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgICAgIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCB1bmRlZmluZWQsIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgICAgICAgICAgICBrZXlFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHN0b3BFdmVudCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICFzdG9wRXZlbnQ7XG4gICAgfTtcbiAgICByZXR1cm4gS2V5Ym9hcmRab29tO1xufShJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgS2V5Ym9hcmRab29tO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2V5Ym9hcmRab29tLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9LaW5ldGljXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogSW1wbGVtZW50YXRpb24gb2YgaW5lcnRpYWwgZGVjZWxlcmF0aW9uIGZvciBtYXAgbW92ZW1lbnQuXG4gKlxuICogQGFwaVxuICovXG52YXIgS2luZXRpYyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVjYXkgUmF0ZSBvZiBkZWNheSAobXVzdCBiZSBuZWdhdGl2ZSkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblZlbG9jaXR5IE1pbmltdW0gdmVsb2NpdHkgKHBpeGVscy9taWxsaXNlY29uZCkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbGF5IERlbGF5IHRvIGNvbnNpZGVyIHRvIGNhbGN1bGF0ZSB0aGUga2luZXRpY1xuICAgICAqICAgICBpbml0aWFsIHZhbHVlcyAobWlsbGlzZWNvbmRzKS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBLaW5ldGljKGRlY2F5LCBtaW5WZWxvY2l0eSwgZGVsYXkpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlY2F5XyA9IGRlY2F5O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWluVmVsb2NpdHlfID0gbWluVmVsb2NpdHk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZWxheV8gPSBkZWxheTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wb2ludHNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbmdsZV8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5pdGlhbFZlbG9jaXR5XyA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICAgICAqL1xuICAgIEtpbmV0aWMucHJvdG90eXBlLmJlZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnBvaW50c18ubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5hbmdsZV8gPSAwO1xuICAgICAgICB0aGlzLmluaXRpYWxWZWxvY2l0eV8gPSAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqL1xuICAgIEtpbmV0aWMucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHRoaXMucG9pbnRzXy5wdXNoKHgsIHksIERhdGUubm93KCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB3ZSBzaG91bGQgZG8ga2luZXRpYyBhbmltYXRpb24uXG4gICAgICovXG4gICAgS2luZXRpYy5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5wb2ludHNfLmxlbmd0aCA8IDYpIHtcbiAgICAgICAgICAgIC8vIGF0IGxlYXN0IDIgcG9pbnRzIGFyZSByZXF1aXJlZCAoaS5lLiB0aGVyZSBtdXN0IGJlIGF0IGxlYXN0IDYgZWxlbWVudHNcbiAgICAgICAgICAgIC8vIGluIHRoZSBhcnJheSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVsYXkgPSBEYXRlLm5vdygpIC0gdGhpcy5kZWxheV87XG4gICAgICAgIHZhciBsYXN0SW5kZXggPSB0aGlzLnBvaW50c18ubGVuZ3RoIC0gMztcbiAgICAgICAgaWYgKHRoaXMucG9pbnRzX1tsYXN0SW5kZXggKyAyXSA8IGRlbGF5KSB7XG4gICAgICAgICAgICAvLyB0aGUgbGFzdCB0cmFja2VkIHBvaW50IGlzIHRvbyBvbGQsIHdoaWNoIG1lYW5zIHRoYXQgdGhlIHVzZXIgc3RvcHBlZFxuICAgICAgICAgICAgLy8gcGFubmluZyBiZWZvcmUgcmVsZWFzaW5nIHRoZSBtYXBcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBnZXQgdGhlIGZpcnN0IHBvaW50IHdoaWNoIHN0aWxsIGZhbGxzIGludG8gdGhlIGRlbGF5IHRpbWVcbiAgICAgICAgdmFyIGZpcnN0SW5kZXggPSBsYXN0SW5kZXggLSAzO1xuICAgICAgICB3aGlsZSAoZmlyc3RJbmRleCA+IDAgJiYgdGhpcy5wb2ludHNfW2ZpcnN0SW5kZXggKyAyXSA+IGRlbGF5KSB7XG4gICAgICAgICAgICBmaXJzdEluZGV4IC09IDM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGR1cmF0aW9uID0gdGhpcy5wb2ludHNfW2xhc3RJbmRleCArIDJdIC0gdGhpcy5wb2ludHNfW2ZpcnN0SW5kZXggKyAyXTtcbiAgICAgICAgLy8gd2UgZG9uJ3Qgd2FudCBhIGR1cmF0aW9uIG9mIDAgKGRpdmlkZSBieSB6ZXJvKVxuICAgICAgICAvLyB3ZSBhbHNvIG1ha2Ugc3VyZSB0aGUgdXNlciBwYW5uZWQgZm9yIGEgZHVyYXRpb24gb2YgYXQgbGVhc3Qgb25lIGZyYW1lXG4gICAgICAgIC8vICgxLzYwcykgdG8gY29tcHV0ZSBzYW5lIGRpc3BsYWNlbWVudCB2YWx1ZXNcbiAgICAgICAgaWYgKGR1cmF0aW9uIDwgMTAwMCAvIDYwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGR4ID0gdGhpcy5wb2ludHNfW2xhc3RJbmRleF0gLSB0aGlzLnBvaW50c19bZmlyc3RJbmRleF07XG4gICAgICAgIHZhciBkeSA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXggKyAxXSAtIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMV07XG4gICAgICAgIHRoaXMuYW5nbGVfID0gTWF0aC5hdGFuMihkeSwgZHgpO1xuICAgICAgICB0aGlzLmluaXRpYWxWZWxvY2l0eV8gPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpIC8gZHVyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmluaXRpYWxWZWxvY2l0eV8gPiB0aGlzLm1pblZlbG9jaXR5XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVG90YWwgZGlzdGFuY2UgdHJhdmVsbGVkIChwaXhlbHMpLlxuICAgICAqL1xuICAgIEtpbmV0aWMucHJvdG90eXBlLmdldERpc3RhbmNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMubWluVmVsb2NpdHlfIC0gdGhpcy5pbml0aWFsVmVsb2NpdHlfKSAvIHRoaXMuZGVjYXlfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBBbmdsZSBvZiB0aGUga2luZXRpYyBwYW5uaW5nIGFuaW1hdGlvbiAocmFkaWFucykuXG4gICAgICovXG4gICAgS2luZXRpYy5wcm90b3R5cGUuZ2V0QW5nbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFuZ2xlXztcbiAgICB9O1xuICAgIHJldHVybiBLaW5ldGljO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IEtpbmV0aWM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LaW5ldGljLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb21cbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvbiwgeyB6b29tQnlEZWx0YSB9IGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuaW1wb3J0IHsgREVWSUNFX1BJWEVMX1JBVElPLCBGSVJFRk9YIH0gZnJvbSAnLi4vaGFzLmpzJztcbmltcG9ydCB7IGFsbCwgYWx3YXlzLCBmb2N1c1dpdGhUYWJpbmRleCB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuLi9tYXRoLmpzJztcbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBNb2RlID0ge1xuICAgIFRSQUNLUEFEOiAndHJhY2twYWQnLFxuICAgIFdIRUVMOiAnd2hlZWwnLFxufTtcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0XG4gKiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGJvb2xlYW4gdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLiBEZWZhdWx0IGlzXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb25+YWx3YXlzfS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29uRm9jdXNPbmx5PWZhbHNlXSBXaGVuIHRoZSBtYXAncyB0YXJnZXQgaGFzIGEgYHRhYmluZGV4YCBhdHRyaWJ1dGUgc2V0LFxuICogdGhlIGludGVyYWN0aW9uIHdpbGwgb25seSBoYW5kbGUgZXZlbnRzIHdoZW4gdGhlIG1hcCBoYXMgdGhlIGZvY3VzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhEZWx0YT0xXSBNYXhpbXVtIG1vdXNlIHdoZWVsIGRlbHRhLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbWVvdXQ9ODBdIE1vdXNlIHdoZWVsIHRpbWVvdXQgZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdXNlQW5jaG9yPXRydWVdIEVuYWJsZSB6b29taW5nIHVzaW5nIHRoZSBtb3VzZSdzXG4gKiBsb2NhdGlvbiBhcyB0aGUgYW5jaG9yLiBXaGVuIHNldCB0byBgZmFsc2VgLCB6b29taW5nIGluIGFuZCBvdXQgd2lsbCB6b29tIHRvXG4gKiB0aGUgY2VudGVyIG9mIHRoZSBzY3JlZW4gaW5zdGVhZCBvZiB6b29taW5nIG9uIHRoZSBtb3VzZSdzIGxvY2F0aW9uLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29uc3RyYWluUmVzb2x1dGlvbj1mYWxzZV0gSWYgdHJ1ZSwgdGhlIG1vdXNlIHdoZWVsIHpvb21cbiAqIGV2ZW50IHdpbGwgYWx3YXlzIGFuaW1hdGUgdG8gdGhlIGNsb3Nlc3Qgem9vbSBsZXZlbCBhZnRlciBhbiBpbnRlcmFjdGlvbjtcbiAqIGZhbHNlIG1lYW5zIGludGVybWVkaWFyeSB6b29tIGxldmVscyBhcmUgYWxsb3dlZC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIGJ5IHNjcm9sbGluZyB0aGUgbW91c2Ugd2hlZWwuXG4gKiBAYXBpXG4gKi9cbnZhciBNb3VzZVdoZWVsWm9vbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTW91c2VXaGVlbFpvb20sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNb3VzZVdoZWVsWm9vbShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0ludGVyYWN0aW9uLmpzXCIpLkludGVyYWN0aW9uT3B0aW9uc30gKi8gKG9wdGlvbnMpKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRvdGFsRGVsdGFfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0RGVsdGFfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhEZWx0YV8gPSBvcHRpb25zLm1heERlbHRhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heERlbHRhIDogMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbWVvdXRfID0gb3B0aW9ucy50aW1lb3V0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbWVvdXQgOiA4MDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudXNlQW5jaG9yXyA9XG4gICAgICAgICAgICBvcHRpb25zLnVzZUFuY2hvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy51c2VBbmNob3IgOiB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uXyA9XG4gICAgICAgICAgICBvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jb25zdHJhaW5SZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgdmFyIGNvbmRpdGlvbiA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBhbHdheXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb25kaXRpb25fID0gb3B0aW9ucy5vbkZvY3VzT25seVxuICAgICAgICAgICAgPyBhbGwoZm9jdXNXaXRoVGFiaW5kZXgsIGNvbmRpdGlvbilcbiAgICAgICAgICAgIDogY29uZGl0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0QW5jaG9yXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXJ0VGltZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbWVvdXRJZF87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7TW9kZXx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tb2RlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyYWNrcGFkIGV2ZW50cyBzZXBhcmF0ZWQgYnkgdGhpcyBkZWxheSB3aWxsIGJlIGNvbnNpZGVyZWQgc2VwYXJhdGVcbiAgICAgICAgICogaW50ZXJhY3Rpb25zLlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhY2twYWRFdmVudEdhcF8gPSA0MDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7P31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyYWNrcGFkVGltZW91dElkXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgZGVsdGEgdmFsdWVzIHBlciB6b29tIGxldmVsXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kZWx0YVBlclpvb21fID0gMzAwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTW91c2VXaGVlbFpvb20ucHJvdG90eXBlLmVuZEludGVyYWN0aW9uXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50cmFja3BhZFRpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHZhciB2aWV3ID0gdGhpcy5nZXRNYXAoKS5nZXRWaWV3KCk7XG4gICAgICAgIHZpZXcuZW5kSW50ZXJhY3Rpb24odW5kZWZpbmVkLCB0aGlzLmxhc3REZWx0YV8gPyAodGhpcy5sYXN0RGVsdGFfID4gMCA/IDEgOiAtMSkgOiAwLCB0aGlzLmxhc3RBbmNob3JfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSAoaWYgaXQgd2FzIGEgbW91c2V3aGVlbC1ldmVudCkgYW5kIGV2ZW50dWFsbHlcbiAgICAgKiB6b29tcyB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICovXG4gICAgTW91c2VXaGVlbFpvb20ucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdHlwZSA9IG1hcEJyb3dzZXJFdmVudC50eXBlO1xuICAgICAgICBpZiAodHlwZSAhPT0gRXZlbnRUeXBlLldIRUVMKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHdoZWVsRXZlbnQgPSAvKiogQHR5cGUge1doZWVsRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgICAgIHdoZWVsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKHRoaXMudXNlQW5jaG9yXykge1xuICAgICAgICAgICAgdGhpcy5sYXN0QW5jaG9yXyA9IG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlO1xuICAgICAgICB9XG4gICAgICAgIC8vIERlbHRhIG5vcm1hbGlzYXRpb24gaW5zcGlyZWQgYnlcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21hcGJveC9tYXBib3gtZ2wtanMvYmxvYi8wMDFjN2I5L2pzL3VpL2hhbmRsZXIvc2Nyb2xsX3pvb20uanNcbiAgICAgICAgdmFyIGRlbHRhO1xuICAgICAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLldIRUVMKSB7XG4gICAgICAgICAgICBkZWx0YSA9IHdoZWVsRXZlbnQuZGVsdGFZO1xuICAgICAgICAgICAgaWYgKEZJUkVGT1ggJiYgd2hlZWxFdmVudC5kZWx0YU1vZGUgPT09IFdoZWVsRXZlbnQuRE9NX0RFTFRBX1BJWEVMKSB7XG4gICAgICAgICAgICAgICAgZGVsdGEgLz0gREVWSUNFX1BJWEVMX1JBVElPO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdoZWVsRXZlbnQuZGVsdGFNb2RlID09PSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9MSU5FKSB7XG4gICAgICAgICAgICAgICAgZGVsdGEgKj0gNDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlbHRhID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxhc3REZWx0YV8gPSBkZWx0YTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRUaW1lXyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0VGltZV8gPSBub3c7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm1vZGVfIHx8IG5vdyAtIHRoaXMuc3RhcnRUaW1lXyA+IHRoaXMudHJhY2twYWRFdmVudEdhcF8pIHtcbiAgICAgICAgICAgIHRoaXMubW9kZV8gPSBNYXRoLmFicyhkZWx0YSkgPCA0ID8gTW9kZS5UUkFDS1BBRCA6IE1vZGUuV0hFRUw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAodGhpcy5tb2RlXyA9PT0gTW9kZS5UUkFDS1BBRCAmJlxuICAgICAgICAgICAgISh2aWV3LmdldENvbnN0cmFpblJlc29sdXRpb24oKSB8fCB0aGlzLmNvbnN0cmFpblJlc29sdXRpb25fKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMudHJhY2twYWRUaW1lb3V0SWRfKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudHJhY2twYWRUaW1lb3V0SWRfKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aWV3LmJlZ2luSW50ZXJhY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudHJhY2twYWRUaW1lb3V0SWRfID0gc2V0VGltZW91dCh0aGlzLmVuZEludGVyYWN0aW9uXy5iaW5kKHRoaXMpLCB0aGlzLnRpbWVvdXRfKTtcbiAgICAgICAgICAgIHZpZXcuYWRqdXN0Wm9vbSgtZGVsdGEgLyB0aGlzLmRlbHRhUGVyWm9vbV8sIHRoaXMubGFzdEFuY2hvcl8pO1xuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWVfID0gbm93O1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG90YWxEZWx0YV8gKz0gZGVsdGE7XG4gICAgICAgIHZhciB0aW1lTGVmdCA9IE1hdGgubWF4KHRoaXMudGltZW91dF8gLSAobm93IC0gdGhpcy5zdGFydFRpbWVfKSwgMCk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZF8pO1xuICAgICAgICB0aGlzLnRpbWVvdXRJZF8gPSBzZXRUaW1lb3V0KHRoaXMuaGFuZGxlV2hlZWxab29tXy5iaW5kKHRoaXMsIG1hcCksIHRpbWVMZWZ0KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqL1xuICAgIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZS5oYW5kbGVXaGVlbFpvb21fID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICB2aWV3LmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVsdGEgPSAtY2xhbXAodGhpcy50b3RhbERlbHRhXywgLXRoaXMubWF4RGVsdGFfICogdGhpcy5kZWx0YVBlclpvb21fLCB0aGlzLm1heERlbHRhXyAqIHRoaXMuZGVsdGFQZXJab29tXykgLyB0aGlzLmRlbHRhUGVyWm9vbV87XG4gICAgICAgIGlmICh2aWV3LmdldENvbnN0cmFpblJlc29sdXRpb24oKSB8fCB0aGlzLmNvbnN0cmFpblJlc29sdXRpb25fKSB7XG4gICAgICAgICAgICAvLyB2aWV3IGhhcyBhIHpvb20gY29uc3RyYWludCwgem9vbSBieSAxXG4gICAgICAgICAgICBkZWx0YSA9IGRlbHRhID8gKGRlbHRhID4gMCA/IDEgOiAtMSkgOiAwO1xuICAgICAgICB9XG4gICAgICAgIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCB0aGlzLmxhc3RBbmNob3JfLCB0aGlzLmR1cmF0aW9uXyk7XG4gICAgICAgIHRoaXMubW9kZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudG90YWxEZWx0YV8gPSAwO1xuICAgICAgICB0aGlzLmxhc3RBbmNob3JfID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGFydFRpbWVfID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnRpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFbmFibGUgb3IgZGlzYWJsZSB1c2luZyB0aGUgbW91c2UncyBsb2NhdGlvbiBhcyBhbiBhbmNob3Igd2hlbiB6b29taW5nXG4gICAgICogQHBhcmFtIHtib29sZWFufSB1c2VBbmNob3IgdHJ1ZSB0byB6b29tIHRvIHRoZSBtb3VzZSdzIGxvY2F0aW9uLCBmYWxzZVxuICAgICAqIHRvIHpvb20gdG8gdGhlIGNlbnRlciBvZiB0aGUgbWFwXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZS5zZXRNb3VzZUFuY2hvciA9IGZ1bmN0aW9uICh1c2VBbmNob3IpIHtcbiAgICAgICAgdGhpcy51c2VBbmNob3JfID0gdXNlQW5jaG9yO1xuICAgICAgICBpZiAoIXVzZUFuY2hvcikge1xuICAgICAgICAgICAgdGhpcy5sYXN0QW5jaG9yXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBNb3VzZVdoZWVsWm9vbTtcbn0oSW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IE1vdXNlV2hlZWxab29tO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TW91c2VXaGVlbFpvb20uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZVxuICovXG5pbXBvcnQgUG9pbnRlckludGVyYWN0aW9uLCB7IGNlbnRyb2lkIGFzIGNlbnRyb2lkRnJvbVBvaW50ZXJzLCB9IGZyb20gJy4vUG9pbnRlci5qcyc7XG5pbXBvcnQgeyBGQUxTRSB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBkaXNhYmxlIH0gZnJvbSAnLi4vcm90YXRpb25jb25zdHJhaW50LmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIFRoZSBkdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIGluXG4gKiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RocmVzaG9sZD0wLjNdIE1pbmltYWwgYW5nbGUgaW4gcmFkaWFucyB0byBzdGFydCBhIHJvdGF0aW9uLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byByb3RhdGUgdGhlIG1hcCBieSB0d2lzdGluZyB3aXRoIHR3byBmaW5nZXJzXG4gKiBvbiBhIHRvdWNoIHNjcmVlbi5cbiAqIEBhcGlcbiAqL1xudmFyIFBpbmNoUm90YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQaW5jaFJvdGF0ZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBpbmNoUm90YXRlKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgcG9pbnRlck9wdGlvbnMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vUG9pbnRlci5qc1wiKS5PcHRpb25zfSAqLyAob3B0aW9ucyk7XG4gICAgICAgIGlmICghcG9pbnRlck9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgICAgICAgIHBvaW50ZXJPcHRpb25zLnN0b3BEb3duID0gRkFMU0U7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwb2ludGVyT3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmNob3JfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFzdEFuZ2xlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucm90YXRpbmdfID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucm90YXRpb25EZWx0YV8gPSAwLjA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGhyZXNob2xkXyA9IG9wdGlvbnMudGhyZXNob2xkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRocmVzaG9sZCA6IDAuMztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBQaW5jaFJvdGF0ZS5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgcm90YXRpb25EZWx0YSA9IDAuMDtcbiAgICAgICAgdmFyIHRvdWNoMCA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMF07XG4gICAgICAgIHZhciB0b3VjaDEgPSB0aGlzLnRhcmdldFBvaW50ZXJzWzFdO1xuICAgICAgICAvLyBhbmdsZSBiZXR3ZWVuIHRvdWNoZXNcbiAgICAgICAgdmFyIGFuZ2xlID0gTWF0aC5hdGFuMih0b3VjaDEuY2xpZW50WSAtIHRvdWNoMC5jbGllbnRZLCB0b3VjaDEuY2xpZW50WCAtIHRvdWNoMC5jbGllbnRYKTtcbiAgICAgICAgaWYgKHRoaXMubGFzdEFuZ2xlXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgZGVsdGEgPSBhbmdsZSAtIHRoaXMubGFzdEFuZ2xlXztcbiAgICAgICAgICAgIHRoaXMucm90YXRpb25EZWx0YV8gKz0gZGVsdGE7XG4gICAgICAgICAgICBpZiAoIXRoaXMucm90YXRpbmdfICYmIE1hdGguYWJzKHRoaXMucm90YXRpb25EZWx0YV8pID4gdGhpcy50aHJlc2hvbGRfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGluZ18gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm90YXRpb25EZWx0YSA9IGRlbHRhO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEFuZ2xlXyA9IGFuZ2xlO1xuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAodmlldy5nZXRDb25zdHJhaW50cygpLnJvdGF0aW9uID09PSBkaXNhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gcm90YXRlIGFuY2hvciBwb2ludC5cbiAgICAgICAgLy8gRklYTUU6IHNob3VsZCBiZSB0aGUgaW50ZXJzZWN0aW9uIHBvaW50IGJldHdlZW4gdGhlIGxpbmVzOlxuICAgICAgICAvLyAgICAgdG91Y2gwLHRvdWNoMSBhbmQgcHJldmlvdXNUb3VjaDAscHJldmlvdXNUb3VjaDFcbiAgICAgICAgdmFyIHZpZXdwb3J0UG9zaXRpb24gPSBtYXAuZ2V0Vmlld3BvcnQoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIGNlbnRyb2lkID0gY2VudHJvaWRGcm9tUG9pbnRlcnModGhpcy50YXJnZXRQb2ludGVycyk7XG4gICAgICAgIGNlbnRyb2lkWzBdIC09IHZpZXdwb3J0UG9zaXRpb24ubGVmdDtcbiAgICAgICAgY2VudHJvaWRbMV0gLT0gdmlld3BvcnRQb3NpdGlvbi50b3A7XG4gICAgICAgIHRoaXMuYW5jaG9yXyA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwoY2VudHJvaWQpO1xuICAgICAgICAvLyByb3RhdGVcbiAgICAgICAgaWYgKHRoaXMucm90YXRpbmdfKSB7XG4gICAgICAgICAgICBtYXAucmVuZGVyKCk7XG4gICAgICAgICAgICB2aWV3LmFkanVzdFJvdGF0aW9uSW50ZXJuYWwocm90YXRpb25EZWx0YSwgdGhpcy5hbmNob3JfKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgdXAgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIFBpbmNoUm90YXRlLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgICAgIHZpZXcuZW5kSW50ZXJhY3Rpb24odGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIFBpbmNoUm90YXRlLnByb3RvdHlwZS5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yXyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmxhc3RBbmdsZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW5nXyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGlvbkRlbHRhXyA9IDAuMDtcbiAgICAgICAgICAgIGlmICghdGhpcy5oYW5kbGluZ0Rvd25VcFNlcXVlbmNlKSB7XG4gICAgICAgICAgICAgICAgbWFwLmdldFZpZXcoKS5iZWdpbkludGVyYWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFBpbmNoUm90YXRlO1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IFBpbmNoUm90YXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGluY2hSb3RhdGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9QaW5jaFpvb21cbiAqL1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiwgeyBjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVycywgfSBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IHsgRkFMU0UgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTQwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIGJ5IHBpbmNoaW5nIHdpdGggdHdvIGZpbmdlcnNcbiAqIG9uIGEgdG91Y2ggc2NyZWVuLlxuICogQGFwaVxuICovXG52YXIgUGluY2hab29tID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQaW5jaFpvb20sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQaW5jaFpvb20ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBwb2ludGVyT3B0aW9ucyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9Qb2ludGVyLmpzXCIpLk9wdGlvbnN9ICovIChvcHRpb25zKTtcbiAgICAgICAgaWYgKCFwb2ludGVyT3B0aW9ucy5zdG9wRG93bikge1xuICAgICAgICAgICAgcG9pbnRlck9wdGlvbnMuc3RvcERvd24gPSBGQUxTRTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBvaW50ZXJPcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFuY2hvcl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiA0MDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3REaXN0YW5jZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFzdFNjYWxlRGVsdGFfID0gMTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICovXG4gICAgUGluY2hab29tLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciBzY2FsZURlbHRhID0gMS4wO1xuICAgICAgICB2YXIgdG91Y2gwID0gdGhpcy50YXJnZXRQb2ludGVyc1swXTtcbiAgICAgICAgdmFyIHRvdWNoMSA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMV07XG4gICAgICAgIHZhciBkeCA9IHRvdWNoMC5jbGllbnRYIC0gdG91Y2gxLmNsaWVudFg7XG4gICAgICAgIHZhciBkeSA9IHRvdWNoMC5jbGllbnRZIC0gdG91Y2gxLmNsaWVudFk7XG4gICAgICAgIC8vIGRpc3RhbmNlIGJldHdlZW4gdG91Y2hlc1xuICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgICAgICBpZiAodGhpcy5sYXN0RGlzdGFuY2VfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNjYWxlRGVsdGEgPSB0aGlzLmxhc3REaXN0YW5jZV8gLyBkaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3REaXN0YW5jZV8gPSBkaXN0YW5jZTtcbiAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKHNjYWxlRGVsdGEgIT0gMS4wKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RTY2FsZURlbHRhXyA9IHNjYWxlRGVsdGE7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2NhbGUgYW5jaG9yIHBvaW50LlxuICAgICAgICB2YXIgdmlld3BvcnRQb3NpdGlvbiA9IG1hcC5nZXRWaWV3cG9ydCgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgY2VudHJvaWQgPSBjZW50cm9pZEZyb21Qb2ludGVycyh0aGlzLnRhcmdldFBvaW50ZXJzKTtcbiAgICAgICAgY2VudHJvaWRbMF0gLT0gdmlld3BvcnRQb3NpdGlvbi5sZWZ0O1xuICAgICAgICBjZW50cm9pZFsxXSAtPSB2aWV3cG9ydFBvc2l0aW9uLnRvcDtcbiAgICAgICAgdGhpcy5hbmNob3JfID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChjZW50cm9pZCk7XG4gICAgICAgIC8vIHNjYWxlLCBieXBhc3MgdGhlIHJlc29sdXRpb24gY29uc3RyYWludFxuICAgICAgICBtYXAucmVuZGVyKCk7XG4gICAgICAgIHZpZXcuYWRqdXN0UmVzb2x1dGlvbkludGVybmFsKHNjYWxlRGVsdGEsIHRoaXMuYW5jaG9yXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciB1cCBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgUGluY2hab29tLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLmxhc3RTY2FsZURlbHRhXyA+IDEgPyAxIDogLTE7XG4gICAgICAgICAgICB2aWV3LmVuZEludGVyYWN0aW9uKHRoaXMuZHVyYXRpb25fLCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIFBpbmNoWm9vbS5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICB0aGlzLmFuY2hvcl8gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5sYXN0RGlzdGFuY2VfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5sYXN0U2NhbGVEZWx0YV8gPSAxO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UpIHtcbiAgICAgICAgICAgICAgICBtYXAuZ2V0VmlldygpLmJlZ2luSW50ZXJhY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUGluY2hab29tO1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IFBpbmNoWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBpbmNoWm9vbS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL01hcFxuICovXG5pbXBvcnQgQ29tcG9zaXRlTWFwUmVuZGVyZXIgZnJvbSAnLi9yZW5kZXJlci9Db21wb3NpdGUuanMnO1xuaW1wb3J0IFBsdWdnYWJsZU1hcCBmcm9tICcuL1BsdWdnYWJsZU1hcC5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuL29iai5qcyc7XG5pbXBvcnQgeyBkZWZhdWx0cyBhcyBkZWZhdWx0Q29udHJvbHMgfSBmcm9tICcuL2NvbnRyb2wuanMnO1xuaW1wb3J0IHsgZGVmYXVsdHMgYXMgZGVmYXVsdEludGVyYWN0aW9ucyB9IGZyb20gJy4vaW50ZXJhY3Rpb24uanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBUaGUgbWFwIGlzIHRoZSBjb3JlIGNvbXBvbmVudCBvZiBPcGVuTGF5ZXJzLiBGb3IgYSBtYXAgdG8gcmVuZGVyLCBhIHZpZXcsXG4gKiBvbmUgb3IgbW9yZSBsYXllcnMsIGFuZCBhIHRhcmdldCBjb250YWluZXIgYXJlIG5lZWRlZDpcbiAqXG4gKiAgICAgaW1wb3J0IE1hcCBmcm9tICdvbC9NYXAnO1xuICogICAgIGltcG9ydCBWaWV3IGZyb20gJ29sL1ZpZXcnO1xuICogICAgIGltcG9ydCBUaWxlTGF5ZXIgZnJvbSAnb2wvbGF5ZXIvVGlsZSc7XG4gKiAgICAgaW1wb3J0IE9TTSBmcm9tICdvbC9zb3VyY2UvT1NNJztcbiAqXG4gKiAgICAgdmFyIG1hcCA9IG5ldyBNYXAoe1xuICogICAgICAgdmlldzogbmV3IFZpZXcoe1xuICogICAgICAgICBjZW50ZXI6IFswLCAwXSxcbiAqICAgICAgICAgem9vbTogMVxuICogICAgICAgfSksXG4gKiAgICAgICBsYXllcnM6IFtcbiAqICAgICAgICAgbmV3IFRpbGVMYXllcih7XG4gKiAgICAgICAgICAgc291cmNlOiBuZXcgT1NNKClcbiAqICAgICAgICAgfSlcbiAqICAgICAgIF0sXG4gKiAgICAgICB0YXJnZXQ6ICdtYXAnXG4gKiAgICAgfSk7XG4gKlxuICogVGhlIGFib3ZlIHNuaXBwZXQgY3JlYXRlcyBhIG1hcCB1c2luZyBhIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvVGlsZX0gdG9cbiAqIGRpc3BsYXkge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvT1NNfk9TTX0gT1NNIGRhdGEgYW5kIHJlbmRlciBpdCB0byBhIERPTVxuICogZWxlbWVudCB3aXRoIHRoZSBpZCBgbWFwYC5cbiAqXG4gKiBUaGUgY29uc3RydWN0b3IgcGxhY2VzIGEgdmlld3BvcnQgY29udGFpbmVyICh3aXRoIENTUyBjbGFzcyBuYW1lXG4gKiBgb2wtdmlld3BvcnRgKSBpbiB0aGUgdGFyZ2V0IGVsZW1lbnQgKHNlZSBgZ2V0Vmlld3BvcnQoKWApLCBhbmQgdGhlbiB0d29cbiAqIGZ1cnRoZXIgZWxlbWVudHMgd2l0aGluIHRoZSB2aWV3cG9ydDogb25lIHdpdGggQ1NTIGNsYXNzIG5hbWVcbiAqIGBvbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudGAgZm9yIGNvbnRyb2xzIGFuZCBzb21lIG92ZXJsYXlzLCBhbmQgb25lIHdpdGhcbiAqIENTUyBjbGFzcyBuYW1lIGBvbC1vdmVybGF5Y29udGFpbmVyYCBmb3Igb3RoZXIgb3ZlcmxheXMgKHNlZSB0aGUgYHN0b3BFdmVudGBcbiAqIG9wdGlvbiBvZiB7QGxpbmsgbW9kdWxlOm9sL092ZXJsYXl+T3ZlcmxheX0gZm9yIHRoZSBkaWZmZXJlbmNlKS4gVGhlIG1hcFxuICogaXRzZWxmIGlzIHBsYWNlZCBpbiBhIGZ1cnRoZXIgZWxlbWVudCB3aXRoaW4gdGhlIHZpZXdwb3J0LlxuICpcbiAqIExheWVycyBhcmUgc3RvcmVkIGFzIGEge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259IGluXG4gKiBsYXllckdyb3Vwcy4gQSB0b3AtbGV2ZWwgZ3JvdXAgaXMgcHJvdmlkZWQgYnkgdGhlIGxpYnJhcnkuIFRoaXMgaXMgd2hhdCBpc1xuICogYWNjZXNzZWQgYnkgYGdldExheWVyR3JvdXBgIGFuZCBgc2V0TGF5ZXJHcm91cGAuIExheWVycyBlbnRlcmVkIGluIHRoZVxuICogb3B0aW9ucyBhcmUgYWRkZWQgdG8gdGhpcyBncm91cCwgYW5kIGBhZGRMYXllcmAgYW5kIGByZW1vdmVMYXllcmAgY2hhbmdlIHRoZVxuICogbGF5ZXIgY29sbGVjdGlvbiBpbiB0aGUgZ3JvdXAuIGBnZXRMYXllcnNgIGlzIGEgY29udmVuaWVuY2UgZnVuY3Rpb24gZm9yXG4gKiBgZ2V0TGF5ZXJHcm91cCgpLmdldExheWVycygpYC4gTm90ZSB0aGF0IHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvR3JvdXB+R3JvdXB9XG4gKiBpcyBhIHN1YmNsYXNzIG9mIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvQmFzZX0sIHNvIGxheWVycyBlbnRlcmVkIGluIHRoZVxuICogb3B0aW9ucyBvciBhZGRlZCB3aXRoIGBhZGRMYXllcmAgY2FuIGJlIGdyb3Vwcywgd2hpY2ggY2FuIGNvbnRhaW4gZnVydGhlclxuICogZ3JvdXBzLCBhbmQgc28gb24uXG4gKlxuICogQGFwaVxuICovXG52YXIgTWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXAsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5NYXBPcHRpb25zfSBvcHRpb25zIE1hcCBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcChvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIG9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICBpZiAoIW9wdGlvbnMuY29udHJvbHMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuY29udHJvbHMgPSBkZWZhdWx0Q29udHJvbHMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9wdGlvbnMuaW50ZXJhY3Rpb25zKSB7XG4gICAgICAgICAgICBvcHRpb25zLmludGVyYWN0aW9ucyA9IGRlZmF1bHRJbnRlcmFjdGlvbnMoe1xuICAgICAgICAgICAgICAgIG9uRm9jdXNPbmx5OiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE1hcC5wcm90b3R5cGUuY3JlYXRlUmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcG9zaXRlTWFwUmVuZGVyZXIodGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gTWFwO1xufShQbHVnZ2FibGVNYXApKTtcbmV4cG9ydCBkZWZhdWx0IE1hcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbFxuICovXG5pbXBvcnQgQXR0cmlidXRpb24gZnJvbSAnLi9jb250cm9sL0F0dHJpYnV0aW9uLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgUm90YXRlIGZyb20gJy4vY29udHJvbC9Sb3RhdGUuanMnO1xuaW1wb3J0IFpvb20gZnJvbSAnLi9jb250cm9sL1pvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBBdHRyaWJ1dGlvbiB9IGZyb20gJy4vY29udHJvbC9BdHRyaWJ1dGlvbi5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIENvbnRyb2wgfSBmcm9tICcuL2NvbnRyb2wvQ29udHJvbC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEZ1bGxTY3JlZW4gfSBmcm9tICcuL2NvbnRyb2wvRnVsbFNjcmVlbi5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIE1vdXNlUG9zaXRpb24gfSBmcm9tICcuL2NvbnRyb2wvTW91c2VQb3NpdGlvbi5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIE92ZXJ2aWV3TWFwIH0gZnJvbSAnLi9jb250cm9sL092ZXJ2aWV3TWFwLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgUm90YXRlIH0gZnJvbSAnLi9jb250cm9sL1JvdGF0ZS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFNjYWxlTGluZSB9IGZyb20gJy4vY29udHJvbC9TY2FsZUxpbmUuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBab29tIH0gZnJvbSAnLi9jb250cm9sL1pvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBab29tU2xpZGVyIH0gZnJvbSAnLi9jb250cm9sL1pvb21TbGlkZXIuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBab29tVG9FeHRlbnQgfSBmcm9tICcuL2NvbnRyb2wvWm9vbVRvRXh0ZW50LmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRGVmYXVsdHNPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbj10cnVlXSBJbmNsdWRlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvQXR0cmlidXRpb25+QXR0cmlidXRpb259LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2NvbnRyb2wvQXR0cmlidXRpb24uanNcIikuT3B0aW9uc30gW2F0dHJpYnV0aW9uT3B0aW9uc11cbiAqIE9wdGlvbnMgZm9yIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9BdHRyaWJ1dGlvbn5BdHRyaWJ1dGlvbn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtyb3RhdGU9dHJ1ZV0gSW5jbHVkZVxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1JvdGF0ZX5Sb3RhdGV9LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2NvbnRyb2wvUm90YXRlLmpzXCIpLk9wdGlvbnN9IFtyb3RhdGVPcHRpb25zXSBPcHRpb25zXG4gKiBmb3Ige0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1JvdGF0ZX5Sb3RhdGV9LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbem9vbV0gSW5jbHVkZSB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvWm9vbX5ab29tfS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb250cm9sL1pvb20uanNcIikuT3B0aW9uc30gW3pvb21PcHRpb25zXSBPcHRpb25zIGZvclxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX0uXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogU2V0IG9mIGNvbnRyb2xzIGluY2x1ZGVkIGluIG1hcHMgYnkgZGVmYXVsdC4gVW5sZXNzIGNvbmZpZ3VyZWQgb3RoZXJ3aXNlLFxuICogdGhpcyByZXR1cm5zIGEgY29sbGVjdGlvbiBjb250YWluaW5nIGFuIGluc3RhbmNlIG9mIGVhY2ggb2YgdGhlIGZvbGxvd2luZ1xuICogY29udHJvbHM6XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9ab29tflpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9Sb3RhdGV+Um90YXRlfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvQXR0cmlidXRpb25+QXR0cmlidXRpb259XG4gKlxuICogQHBhcmFtIHtEZWZhdWx0c09wdGlvbnM9fSBvcHRfb3B0aW9uc1xuICogRGVmYXVsdHMgb3B0aW9ucy5cbiAqIEByZXR1cm4ge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD59XG4gKiBDb250cm9scy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRzKG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgdmFyIGNvbnRyb2xzID0gbmV3IENvbGxlY3Rpb24oKTtcbiAgICB2YXIgem9vbUNvbnRyb2wgPSBvcHRpb25zLnpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuem9vbSA6IHRydWU7XG4gICAgaWYgKHpvb21Db250cm9sKSB7XG4gICAgICAgIGNvbnRyb2xzLnB1c2gobmV3IFpvb20ob3B0aW9ucy56b29tT3B0aW9ucykpO1xuICAgIH1cbiAgICB2YXIgcm90YXRlQ29udHJvbCA9IG9wdGlvbnMucm90YXRlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnJvdGF0ZSA6IHRydWU7XG4gICAgaWYgKHJvdGF0ZUNvbnRyb2wpIHtcbiAgICAgICAgY29udHJvbHMucHVzaChuZXcgUm90YXRlKG9wdGlvbnMucm90YXRlT3B0aW9ucykpO1xuICAgIH1cbiAgICB2YXIgYXR0cmlidXRpb25Db250cm9sID0gb3B0aW9ucy5hdHRyaWJ1dGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5hdHRyaWJ1dGlvbiA6IHRydWU7XG4gICAgaWYgKGF0dHJpYnV0aW9uQ29udHJvbCkge1xuICAgICAgICBjb250cm9scy5wdXNoKG5ldyBBdHRyaWJ1dGlvbihvcHRpb25zLmF0dHJpYnV0aW9uT3B0aW9ucykpO1xuICAgIH1cbiAgICByZXR1cm4gY29udHJvbHM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250cm9sLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvblxuICovXG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IERvdWJsZUNsaWNrWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbS5qcyc7XG5pbXBvcnQgRHJhZ1BhbiBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdQYW4uanMnO1xuaW1wb3J0IERyYWdSb3RhdGUgZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnUm90YXRlLmpzJztcbmltcG9ydCBEcmFnWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdab29tLmpzJztcbmltcG9ydCBLZXlib2FyZFBhbiBmcm9tICcuL2ludGVyYWN0aW9uL0tleWJvYXJkUGFuLmpzJztcbmltcG9ydCBLZXlib2FyZFpvb20gZnJvbSAnLi9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb20uanMnO1xuaW1wb3J0IEtpbmV0aWMgZnJvbSAnLi9LaW5ldGljLmpzJztcbmltcG9ydCBNb3VzZVdoZWVsWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL01vdXNlV2hlZWxab29tLmpzJztcbmltcG9ydCBQaW5jaFJvdGF0ZSBmcm9tICcuL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlLmpzJztcbmltcG9ydCBQaW5jaFpvb20gZnJvbSAnLi9pbnRlcmFjdGlvbi9QaW5jaFpvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEb3VibGVDbGlja1pvb20gfSBmcm9tICcuL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYWdBbmREcm9wIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnQW5kRHJvcC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYWdCb3ggfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdCb3guanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEcmFnUGFuIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnUGFuLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRHJhZ1JvdGF0ZSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYWdSb3RhdGVBbmRab29tIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnUm90YXRlQW5kWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYWdab29tIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYXcgfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYXcuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBFeHRlbnQgfSBmcm9tICcuL2ludGVyYWN0aW9uL0V4dGVudC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEludGVyYWN0aW9uIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEtleWJvYXJkUGFuIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbi5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEtleWJvYXJkWm9vbSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgTW9kaWZ5IH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9Nb2RpZnkuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBNb3VzZVdoZWVsWm9vbSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBQaW5jaFJvdGF0ZSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vUGluY2hSb3RhdGUuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBQaW5jaFpvb20gfSBmcm9tICcuL2ludGVyYWN0aW9uL1BpbmNoWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFBvaW50ZXIgfSBmcm9tICcuL2ludGVyYWN0aW9uL1BvaW50ZXIuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBTZWxlY3QgfSBmcm9tICcuL2ludGVyYWN0aW9uL1NlbGVjdC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFNuYXAgfSBmcm9tICcuL2ludGVyYWN0aW9uL1NuYXAuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBUcmFuc2xhdGUgfSBmcm9tICcuL2ludGVyYWN0aW9uL1RyYW5zbGF0ZS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IERlZmF1bHRzT3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFufSBbYWx0U2hpZnREcmFnUm90YXRlPXRydWVdIFdoZXRoZXIgQWx0LVNoaWZ0LWRyYWcgcm90YXRlIGlzXG4gKiBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb25Gb2N1c09ubHk9ZmFsc2VdIEludGVyYWN0IG9ubHkgd2hlbiB0aGUgbWFwIGhhcyB0aGVcbiAqIGZvY3VzLiBUaGlzIGFmZmVjdHMgdGhlIGBNb3VzZVdoZWVsWm9vbWAgYW5kIGBEcmFnUGFuYCBpbnRlcmFjdGlvbnMgYW5kIGlzXG4gKiB1c2VmdWwgd2hlbiBwYWdlIHNjcm9sbCBpcyBkZXNpcmVkIGZvciBtYXBzIHRoYXQgZG8gbm90IGhhdmUgdGhlIGJyb3dzZXInc1xuICogZm9jdXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkb3VibGVDbGlja1pvb209dHJ1ZV0gV2hldGhlciBkb3VibGUgY2xpY2sgem9vbSBpc1xuICogZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2tleWJvYXJkPXRydWVdIFdoZXRoZXIga2V5Ym9hcmQgaW50ZXJhY3Rpb24gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW21vdXNlV2hlZWxab29tPXRydWVdIFdoZXRoZXIgbW91c2V3aGVlbCB6b29tIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzaGlmdERyYWdab29tPXRydWVdIFdoZXRoZXIgU2hpZnQtZHJhZyB6b29tIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkcmFnUGFuPXRydWVdIFdoZXRoZXIgZHJhZyBwYW4gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3BpbmNoUm90YXRlPXRydWVdIFdoZXRoZXIgcGluY2ggcm90YXRlIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtwaW5jaFpvb209dHJ1ZV0gV2hldGhlciBwaW5jaCB6b29tIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21EZWx0YV0gWm9vbSBsZXZlbCBkZWx0YSB3aGVuIHVzaW5nIGtleWJvYXJkIG9yIGRvdWJsZSBjbGljayB6b29tLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tRHVyYXRpb25dIER1cmF0aW9uIG9mIHRoZSB6b29tIGFuaW1hdGlvbiBpblxuICogbWlsbGlzZWNvbmRzLlxuICovXG4vKipcbiAqIFNldCBvZiBpbnRlcmFjdGlvbnMgaW5jbHVkZWQgaW4gbWFwcyBieSBkZWZhdWx0LiBTcGVjaWZpYyBpbnRlcmFjdGlvbnMgY2FuIGJlXG4gKiBleGNsdWRlZCBieSBzZXR0aW5nIHRoZSBhcHByb3ByaWF0ZSBvcHRpb24gdG8gZmFsc2UgaW4gdGhlIGNvbnN0cnVjdG9yXG4gKiBvcHRpb25zLCBidXQgdGhlIG9yZGVyIG9mIHRoZSBpbnRlcmFjdGlvbnMgaXMgZml4ZWQuICBJZiB5b3Ugd2FudCB0byBzcGVjaWZ5XG4gKiBhIGRpZmZlcmVudCBvcmRlciBmb3IgaW50ZXJhY3Rpb25zLCB5b3Ugd2lsbCBuZWVkIHRvIGNyZWF0ZSB5b3VyIG93blxuICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbn0gaW5zdGFuY2VzIGFuZCBpbnNlcnRcbiAqIHRoZW0gaW50byBhIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn0gaW4gdGhlIG9yZGVyIHlvdSB3YW50XG4gKiBiZWZvcmUgY3JlYXRpbmcgeW91ciB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9IGluc3RhbmNlLiBDaGFuZ2luZyB0aGUgb3JkZXIgY2FuXG4gKiBiZSBvZiBpbnRlcmVzdCBpZiB0aGUgZXZlbnQgcHJvcGFnYXRpb24gbmVlZHMgdG8gYmUgc3RvcHBlZCBhdCBhIHBvaW50LlxuICogVGhlIGRlZmF1bHQgc2V0IG9mIGludGVyYWN0aW9ucywgaW4gc2VxdWVuY2UsIGlzOlxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdSb3RhdGV+RHJhZ1JvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb21+RG91YmxlQ2xpY2tab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdQYW5+RHJhZ1Bhbn1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZX5QaW5jaFJvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9QaW5jaFpvb21+UGluY2hab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkUGFufktleWJvYXJkUGFufVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbX5LZXlib2FyZFpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb21+TW91c2VXaGVlbFpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1pvb21+RHJhZ1pvb219XG4gKlxuICogQHBhcmFtIHtEZWZhdWx0c09wdGlvbnM9fSBvcHRfb3B0aW9ucyBEZWZhdWx0cyBvcHRpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqIEEgY29sbGVjdGlvbiBvZiBpbnRlcmFjdGlvbnMgdG8gYmUgdXNlZCB3aXRoIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9XG4gKiBjb25zdHJ1Y3RvcidzIGBpbnRlcmFjdGlvbnNgIG9wdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRzKG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgdmFyIGludGVyYWN0aW9ucyA9IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgdmFyIGtpbmV0aWMgPSBuZXcgS2luZXRpYygtMC4wMDUsIDAuMDUsIDEwMCk7XG4gICAgdmFyIGFsdFNoaWZ0RHJhZ1JvdGF0ZSA9IG9wdGlvbnMuYWx0U2hpZnREcmFnUm90YXRlICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBvcHRpb25zLmFsdFNoaWZ0RHJhZ1JvdGF0ZVxuICAgICAgICA6IHRydWU7XG4gICAgaWYgKGFsdFNoaWZ0RHJhZ1JvdGF0ZSkge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgRHJhZ1JvdGF0ZSgpKTtcbiAgICB9XG4gICAgdmFyIGRvdWJsZUNsaWNrWm9vbSA9IG9wdGlvbnMuZG91YmxlQ2xpY2tab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmRvdWJsZUNsaWNrWm9vbSA6IHRydWU7XG4gICAgaWYgKGRvdWJsZUNsaWNrWm9vbSkge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgRG91YmxlQ2xpY2tab29tKHtcbiAgICAgICAgICAgIGRlbHRhOiBvcHRpb25zLnpvb21EZWx0YSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvbixcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB2YXIgZHJhZ1BhbiA9IG9wdGlvbnMuZHJhZ1BhbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kcmFnUGFuIDogdHJ1ZTtcbiAgICBpZiAoZHJhZ1Bhbikge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgRHJhZ1Bhbih7XG4gICAgICAgICAgICBvbkZvY3VzT25seTogb3B0aW9ucy5vbkZvY3VzT25seSxcbiAgICAgICAgICAgIGtpbmV0aWM6IGtpbmV0aWMsXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdmFyIHBpbmNoUm90YXRlID0gb3B0aW9ucy5waW5jaFJvdGF0ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5waW5jaFJvdGF0ZSA6IHRydWU7XG4gICAgaWYgKHBpbmNoUm90YXRlKSB7XG4gICAgICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBQaW5jaFJvdGF0ZSgpKTtcbiAgICB9XG4gICAgdmFyIHBpbmNoWm9vbSA9IG9wdGlvbnMucGluY2hab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnBpbmNoWm9vbSA6IHRydWU7XG4gICAgaWYgKHBpbmNoWm9vbSkge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgUGluY2hab29tKHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvbixcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB2YXIga2V5Ym9hcmQgPSBvcHRpb25zLmtleWJvYXJkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmtleWJvYXJkIDogdHJ1ZTtcbiAgICBpZiAoa2V5Ym9hcmQpIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IEtleWJvYXJkUGFuKCkpO1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgS2V5Ym9hcmRab29tKHtcbiAgICAgICAgICAgIGRlbHRhOiBvcHRpb25zLnpvb21EZWx0YSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvbixcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB2YXIgbW91c2VXaGVlbFpvb20gPSBvcHRpb25zLm1vdXNlV2hlZWxab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1vdXNlV2hlZWxab29tIDogdHJ1ZTtcbiAgICBpZiAobW91c2VXaGVlbFpvb20pIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IE1vdXNlV2hlZWxab29tKHtcbiAgICAgICAgICAgIG9uRm9jdXNPbmx5OiBvcHRpb25zLm9uRm9jdXNPbmx5LFxuICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuem9vbUR1cmF0aW9uLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHZhciBzaGlmdERyYWdab29tID0gb3B0aW9ucy5zaGlmdERyYWdab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNoaWZ0RHJhZ1pvb20gOiB0cnVlO1xuICAgIGlmIChzaGlmdERyYWdab29tKSB7XG4gICAgICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBEcmFnWm9vbSh7XG4gICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb24sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcmV0dXJuIGludGVyYWN0aW9ucztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyYWN0aW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9UaWxlUHJvcGVydHlcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgUFJFTE9BRDogJ3ByZWxvYWQnLFxuICAgIFVTRV9JTlRFUklNX1RJTEVTX09OX0VSUk9SOiAndXNlSW50ZXJpbVRpbGVzT25FcnJvcicsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZVByb3BlcnR5LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvQmFzZVRpbGVcbiAqL1xuaW1wb3J0IExheWVyIGZyb20gJy4vTGF5ZXIuanMnO1xuaW1wb3J0IFRpbGVQcm9wZXJ0eSBmcm9tICcuL1RpbGVQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuLi9vYmouanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtbGF5ZXInXSBBIENTUyBjbGFzcyBuYW1lIHRvIHNldCB0byB0aGUgbGF5ZXIgZWxlbWVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb3BhY2l0eT0xXSBPcGFjaXR5ICgwLCAxKS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Zpc2libGU9dHJ1ZV0gVmlzaWJpbGl0eS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGJvdW5kaW5nIGV4dGVudCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgVGhlIGxheWVyIHdpbGwgbm90IGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXhdIFRoZSB6LWluZGV4IGZvciBsYXllciByZW5kZXJpbmcuICBBdCByZW5kZXJpbmcgdGltZSwgdGhlIGxheWVyc1xuICogd2lsbCBiZSBvcmRlcmVkLCBmaXJzdCBieSBaLWluZGV4IGFuZCB0aGVuIGJ5IHBvc2l0aW9uLiBXaGVuIGB1bmRlZmluZWRgLCBhIGB6SW5kZXhgIG9mIDAgaXMgYXNzdW1lZFxuICogZm9yIGxheWVycyB0aGF0IGFyZSBhZGRlZCB0byB0aGUgbWFwJ3MgYGxheWVyc2AgY29sbGVjdGlvbiwgb3IgYEluZmluaXR5YCB3aGVuIHRoZSBsYXllcidzIGBzZXRNYXAoKWBcbiAqIG1ldGhvZCB3YXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbl0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gKGV4Y2x1c2l2ZSkgYmVsb3cgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tXSBUaGUgbWluaW11bSB2aWV3IHpvb20gbGV2ZWwgKGV4Y2x1c2l2ZSkgYWJvdmUgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tXSBUaGUgbWF4aW11bSB2aWV3IHpvb20gbGV2ZWwgKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtwcmVsb2FkPTBdIFByZWxvYWQuIExvYWQgbG93LXJlc29sdXRpb24gdGlsZXMgdXAgdG8gYHByZWxvYWRgIGxldmVscy4gYDBgXG4gKiBtZWFucyBubyBwcmVsb2FkaW5nLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSBbc291cmNlXSBTb3VyY2UgZm9yIHRoaXMgbGF5ZXIuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBbbWFwXSBTZXRzIHRoZSBsYXllciBhcyBvdmVybGF5IG9uIGEgbWFwLiBUaGUgbWFwIHdpbGwgbm90IG1hbmFnZVxuICogdGhpcyBsYXllciBpbiBpdHMgbGF5ZXJzIGNvbGxlY3Rpb24sIGFuZCB0aGUgbGF5ZXIgd2lsbCBiZSByZW5kZXJlZCBvbiB0b3AuIFRoaXMgaXMgdXNlZnVsIGZvclxuICogdGVtcG9yYXJ5IGxheWVycy4gVGhlIHN0YW5kYXJkIHdheSB0byBhZGQgYSBsYXllciB0byBhIG1hcCBhbmQgaGF2ZSBpdCBtYW5hZ2VkIGJ5IHRoZSBtYXAgaXMgdG9cbiAqIHVzZSB7QGxpbmsgbW9kdWxlOm9sL01hcCNhZGRMYXllcn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1c2VJbnRlcmltVGlsZXNPbkVycm9yPXRydWVdIFVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEZvciBsYXllciBzb3VyY2VzIHRoYXQgcHJvdmlkZSBwcmUtcmVuZGVyZWQsIHRpbGVkIGltYWdlcyBpbiBncmlkcyB0aGF0IGFyZVxuICogb3JnYW5pemVkIGJ5IHpvb20gbGV2ZWxzIGZvciBzcGVjaWZpYyByZXNvbHV0aW9ucy5cbiAqIE5vdGUgdGhhdCBhbnkgcHJvcGVydHkgc2V0IGluIHRoZSBvcHRpb25zIGlzIHNldCBhcyBhIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3R9XG4gKiBwcm9wZXJ0eSBvbiB0aGUgbGF5ZXIgb2JqZWN0OyBmb3IgZXhhbXBsZSwgc2V0dGluZyBgdGl0bGU6ICdNeSBUaXRsZSdgIGluIHRoZVxuICogb3B0aW9ucyBtZWFucyB0aGF0IGB0aXRsZWAgaXMgb2JzZXJ2YWJsZSwgYW5kIGhhcyBnZXQvc2V0IGFjY2Vzc29ycy5cbiAqXG4gKiBAZXh0ZW5kcyB7TGF5ZXI8aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdD59XG4gKiBAYXBpXG4gKi9cbnZhciBCYXNlVGlsZUxheWVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCYXNlVGlsZUxheWVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIFRpbGUgbGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBCYXNlVGlsZUxheWVyKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgYmFzZU9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICBkZWxldGUgYmFzZU9wdGlvbnMucHJlbG9hZDtcbiAgICAgICAgZGVsZXRlIGJhc2VPcHRpb25zLnVzZUludGVyaW1UaWxlc09uRXJyb3I7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgYmFzZU9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnNldFByZWxvYWQob3B0aW9ucy5wcmVsb2FkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnByZWxvYWQgOiAwKTtcbiAgICAgICAgX3RoaXMuc2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvcihvcHRpb25zLnVzZUludGVyaW1UaWxlc09uRXJyb3IgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnVzZUludGVyaW1UaWxlc09uRXJyb3JcbiAgICAgICAgICAgIDogdHJ1ZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBsZXZlbCBhcyBudW1iZXIgdG8gd2hpY2ggd2Ugd2lsbCBwcmVsb2FkIHRpbGVzIHVwIHRvLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGxldmVsIHRvIHByZWxvYWQgdGlsZXMgdXAgdG8uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZVRpbGVMYXllci5wcm90b3R5cGUuZ2V0UHJlbG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoVGlsZVByb3BlcnR5LlBSRUxPQUQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbGV2ZWwgYXMgbnVtYmVyIHRvIHdoaWNoIHdlIHdpbGwgcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcHJlbG9hZCBUaGUgbGV2ZWwgdG8gcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlVGlsZUxheWVyLnByb3RvdHlwZS5zZXRQcmVsb2FkID0gZnVuY3Rpb24gKHByZWxvYWQpIHtcbiAgICAgICAgdGhpcy5zZXQoVGlsZVByb3BlcnR5LlBSRUxPQUQsIHByZWxvYWQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogV2hldGhlciB3ZSB1c2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBVc2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlVGlsZUxheWVyLnByb3RvdHlwZS5nZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtib29sZWFufSAqLyAodGhpcy5nZXQoVGlsZVByb3BlcnR5LlVTRV9JTlRFUklNX1RJTEVTX09OX0VSUk9SKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB3ZSB1c2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHVzZUludGVyaW1UaWxlc09uRXJyb3IgVXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZVRpbGVMYXllci5wcm90b3R5cGUuc2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvciA9IGZ1bmN0aW9uICh1c2VJbnRlcmltVGlsZXNPbkVycm9yKSB7XG4gICAgICAgIHRoaXMuc2V0KFRpbGVQcm9wZXJ0eS5VU0VfSU5URVJJTV9USUxFU19PTl9FUlJPUiwgdXNlSW50ZXJpbVRpbGVzT25FcnJvcik7XG4gICAgfTtcbiAgICByZXR1cm4gQmFzZVRpbGVMYXllcjtcbn0oTGF5ZXIpKTtcbmV4cG9ydCBkZWZhdWx0IEJhc2VUaWxlTGF5ZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1CYXNlVGlsZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL0xheWVyXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW1hZ2VTdGF0ZSBmcm9tICcuLi9JbWFnZVN0YXRlLmpzJztcbmltcG9ydCBPYnNlcnZhYmxlIGZyb20gJy4uL09ic2VydmFibGUuanMnO1xuaW1wb3J0IFNvdXJjZVN0YXRlIGZyb20gJy4uL3NvdXJjZS9TdGF0ZS5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuLyoqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IExheWVyVHlwZVxuICovXG52YXIgTGF5ZXJSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGF5ZXJSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0xheWVyVHlwZX0gbGF5ZXIgTGF5ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTGF5ZXJSZW5kZXJlcihsYXllcikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMuYm91bmRIYW5kbGVJbWFnZUNoYW5nZV8gPSBfdGhpcy5oYW5kbGVJbWFnZUNoYW5nZV8uYmluZChfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtMYXllclR5cGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXllcl8gPSBsYXllcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9yZW5kZXIvY2FudmFzL0V4ZWN1dG9yR3JvdXBcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRlY2x1dHRlckV4ZWN1dG9yR3JvdXAgPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91cyBsYXllciBsZXZlbCBoaXQgZGV0ZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZVwiKS5kZWZhdWx0Pj59IFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoXG4gICAgICogYW4gYXJyYXkgb2YgZmVhdHVyZXMuXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgd2hldGhlciByZW5kZXIgc2hvdWxkIGJlIGNhbGxlZC5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IExheWVyIGlzIHJlYWR5IHRvIGJlIHJlbmRlcmVkLlxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLnByZXBhcmVGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRoZSBsYXllci5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBUYXJnZXQgdGhhdCBtYXkgYmUgdXNlZCB0byByZW5kZXIgY29udGVudCB0by5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSwgdGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3Q8bnVtYmVyLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHQ+Pn0gdGlsZXMgTG9va3VwIG9mIGxvYWRlZCB0aWxlcyBieSB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufHZvaWR9IElmIGBmYWxzZWAsIHRoZSB0aWxlIHdpbGwgbm90IGJlIGNvbnNpZGVyZWQgbG9hZGVkLlxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmxvYWRlZFRpbGVDYWxsYmFjayA9IGZ1bmN0aW9uICh0aWxlcywgem9vbSwgdGlsZSkge1xuICAgICAgICBpZiAoIXRpbGVzW3pvb21dKSB7XG4gICAgICAgICAgICB0aWxlc1t6b29tXSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRpbGVzW3pvb21dW3RpbGUudGlsZUNvb3JkLnRvU3RyaW5nKCldID0gdGlsZTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgYWRkcyBsb2FkZWQgdGlsZXMgdG8gdGhlIHRpbGUgbG9va3VwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gc291cmNlIFRpbGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbiBvZiB0aGUgdGlsZXMuXG4gICAgICogQHBhcmFtIHtPYmplY3Q8bnVtYmVyLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHQ+Pn0gdGlsZXMgTG9va3VwIG9mIGxvYWRlZCB0aWxlcyBieSB6b29tIGxldmVsLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQpOmJvb2xlYW59IEEgZnVuY3Rpb24gdGhhdCBjYW4gYmVcbiAgICAgKiAgICAgY2FsbGVkIHdpdGggYSB6b29tIGxldmVsIGFuZCBhIHRpbGUgcmFuZ2UgdG8gYWRkIGxvYWRlZCB0aWxlcyB0byB0aGUgbG9va3VwLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVMb2FkZWRUaWxlRmluZGVyID0gZnVuY3Rpb24gKHNvdXJjZSwgcHJvamVjdGlvbiwgdGlsZXMpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdGlsZSByYW5nZSBpcyBmdWxseSBsb2FkZWQuXG4gICAgICAgICAqIEB0aGlzIHtMYXllclJlbmRlcmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKHpvb20sIHRpbGVSYW5nZSkge1xuICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5sb2FkZWRUaWxlQ2FsbGJhY2suYmluZCh0aGlzLCB0aWxlcywgem9vbSk7XG4gICAgICAgICAgICByZXR1cm4gc291cmNlLmZvckVhY2hMb2FkZWRUaWxlKHByb2plY3Rpb24sIHpvb20sIHRpbGVSYW5nZSwgY2FsbGJhY2spO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3ZlY3Rvci5qc1wiKS5GZWF0dXJlQ2FsbGJhY2s8VD59IGNhbGxiYWNrIEZlYXR1cmUgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL01hcC5qc1wiKS5IaXRNYXRjaDxUPj59IG1hdGNoZXMgVGhlIGhpdCBkZXRlY3RlZCBtYXRjaGVzIHdpdGggdG9sZXJhbmNlLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQuXG4gICAgICogQHRlbXBsYXRlIFRcbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrLCBtYXRjaGVzKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcmV0dXJuIHtVaW50OENsYW1wZWRBcnJheXxVaW50OEFycmF5fSBUaGUgcmVzdWx0LiAgSWYgdGhlcmUgaXMgbm8gZGF0YSBhdCB0aGUgcGl4ZWxcbiAgICAgKiAgICBsb2NhdGlvbiwgbnVsbCB3aWxsIGJlIHJldHVybmVkLiAgSWYgdGhlcmUgaXMgZGF0YSwgYnV0IHBpeGVsIHZhbHVlcyBjYW5ub3QgYmVcbiAgICAgKiAgICByZXR1cm5lZCwgYW5kIGVtcHR5IGFycmF5IHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0RGF0YUF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0xheWVyVHlwZX0gTGF5ZXIuXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0TGF5ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheWVyXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFBlcmZvcm0gYWN0aW9uIG5lY2Vzc2FyeSB0byBnZXQgdGhlIGxheWVyIHJlbmRlcmVkIGFmdGVyIG5ldyBmb250cyBoYXZlIGxvYWRlZFxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmhhbmRsZUZvbnRzQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgY2hhbmdlcyBpbiBpbWFnZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBJbWFnZSBjaGFuZ2UgZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5oYW5kbGVJbWFnZUNoYW5nZV8gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIGltYWdlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9JbWFnZS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgaWYgKGltYWdlLmdldFN0YXRlKCkgPT09IEltYWdlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcklmUmVhZHlBbmRWaXNpYmxlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIGltYWdlIGlmIG5vdCBhbHJlYWR5IGxvYWRlZCwgYW5kIHJlZ2lzdGVyIHRoZSBpbWFnZSBjaGFuZ2VcbiAgICAgKiBsaXN0ZW5lciBpZiBuZWVkZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9JbWFnZUJhc2UuanNcIikuZGVmYXVsdH0gaW1hZ2UgSW1hZ2UuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBpbWFnZSBpcyBhbHJlYWR5IGxvYWRlZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmxvYWRJbWFnZSA9IGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgICB2YXIgaW1hZ2VTdGF0ZSA9IGltYWdlLmdldFN0YXRlKCk7XG4gICAgICAgIGlmIChpbWFnZVN0YXRlICE9IEltYWdlU3RhdGUuTE9BREVEICYmIGltYWdlU3RhdGUgIT0gSW1hZ2VTdGF0ZS5FUlJPUikge1xuICAgICAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmJvdW5kSGFuZGxlSW1hZ2VDaGFuZ2VfKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW1hZ2VTdGF0ZSA9PSBJbWFnZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgIGltYWdlLmxvYWQoKTtcbiAgICAgICAgICAgIGltYWdlU3RhdGUgPSBpbWFnZS5nZXRTdGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbWFnZVN0YXRlID09IEltYWdlU3RhdGUuTE9BREVEO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlcklmUmVhZHlBbmRWaXNpYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIGlmIChsYXllci5nZXRWaXNpYmxlKCkgJiYgbGF5ZXIuZ2V0U291cmNlU3RhdGUoKSA9PSBTb3VyY2VTdGF0ZS5SRUFEWSkge1xuICAgICAgICAgICAgbGF5ZXIuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTGF5ZXJSZW5kZXJlcjtcbn0oT2JzZXJ2YWJsZSkpO1xuZXhwb3J0IGRlZmF1bHQgTGF5ZXJSZW5kZXJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxheWVyLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL0xheWVyXG4gKi9cbmltcG9ydCBMYXllclJlbmRlcmVyIGZyb20gJy4uL0xheWVyLmpzJztcbmltcG9ydCBSZW5kZXJFdmVudCBmcm9tICcuLi8uLi9yZW5kZXIvRXZlbnQuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50VHlwZSBmcm9tICcuLi8uLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIH0gZnJvbSAnLi4vLi4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IGNvbnRhaW5zQ29vcmRpbmF0ZSwgZ2V0Qm90dG9tTGVmdCwgZ2V0Qm90dG9tUmlnaHQsIGdldFRvcExlZnQsIGdldFRvcFJpZ2h0LCB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYW52YXNDb250ZXh0MkQgfSBmcm9tICcuLi8uLi9kb20uanMnO1xuaW1wb3J0IHsgcm90YXRlQXRPZmZzZXQgfSBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzLmpzJztcbi8qKlxuICogQGFic3RyYWN0XG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uLy4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IExheWVyVHlwZVxuICovXG52YXIgQ2FudmFzTGF5ZXJSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2FudmFzTGF5ZXJSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0xheWVyVHlwZX0gbGF5ZXIgTGF5ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ2FudmFzTGF5ZXJSZW5kZXJlcihsYXllcikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBsYXllcikgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGFpbmVyID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkUmVzb2x1dGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdGVtcG9yYXJ5IHRyYW5zZm9ybS4gIFRoZSB2YWx1ZXMgaW4gdGhpcyB0cmFuc2Zvcm0gc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiBhXG4gICAgICAgICAqIGZ1bmN0aW9uIHRoYXQgc2V0cyB0aGUgdmFsdWVzLlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGVtcFRyYW5zZm9ybSA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRyYW5zZm9ybSBmb3IgcmVuZGVyZWQgcGl4ZWxzIHRvIHZpZXdwb3J0IENTUyBwaXhlbHMuICBUaGlzIHRyYW5zZm9ybSBtdXN0XG4gICAgICAgICAqIGJlIHNldCB3aGVuIHJlbmRlcmluZyBhIGZyYW1lIGFuZCBtYXkgYmUgdXNlZCBieSBvdGhlciBmdW5jdGlvbnMgYWZ0ZXIgcmVuZGVyaW5nLlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0cmFuc2Zvcm0gZm9yIHZpZXdwb3J0IENTUyBwaXhlbHMgdG8gcmVuZGVyZWQgcGl4ZWxzLiAgVGhpcyB0cmFuc2Zvcm0gbXVzdFxuICAgICAgICAgKiBiZSBzZXQgd2hlbiByZW5kZXJpbmcgYSBmcmFtZSBhbmQgbWF5IGJlIHVzZWQgYnkgb3RoZXIgZnVuY3Rpb25zIGFmdGVyIHJlbmRlcmluZy5cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybSA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRleHQgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb250YWluZXJSZXVzZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYSByZW5kZXJpbmcgY29udGFpbmVyIGZyb20gYW4gZXhpc3RpbmcgdGFyZ2V0LCBpZiBjb21wYXRpYmxlLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBQb3RlbnRpYWwgcmVuZGVyIHRhcmdldC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHJhbnNmb3JtIENTUyBUcmFuc2Zvcm0uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wYWNpdHkgT3BhY2l0eS5cbiAgICAgKi9cbiAgICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS51c2VDb250YWluZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCB0cmFuc2Zvcm0sIG9wYWNpdHkpIHtcbiAgICAgICAgdmFyIGxheWVyQ2xhc3NOYW1lID0gdGhpcy5nZXRMYXllcigpLmdldENsYXNzTmFtZSgpO1xuICAgICAgICB2YXIgY29udGFpbmVyLCBjb250ZXh0O1xuICAgICAgICBpZiAodGFyZ2V0ICYmXG4gICAgICAgICAgICB0YXJnZXQuc3R5bGUub3BhY2l0eSA9PT0gJycgJiZcbiAgICAgICAgICAgIHRhcmdldC5jbGFzc05hbWUgPT09IGxheWVyQ2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgY2FudmFzID0gdGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgaWYgKGNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjb250ZXh0ICYmXG4gICAgICAgICAgICAoY29udGV4dC5jYW52YXMud2lkdGggPT09IDAgfHxcbiAgICAgICAgICAgICAgICBjb250ZXh0LmNhbnZhcy5zdHlsZS50cmFuc2Zvcm0gPT09IHRyYW5zZm9ybSkpIHtcbiAgICAgICAgICAgIC8vIENvbnRhaW5lciBvZiB0aGUgcHJldmlvdXMgbGF5ZXIgcmVuZGVyZXIgY2FuIGJlIHVzZWQuXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHRhcmdldDtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lclJldXNlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5jb250YWluZXJSZXVzZWQpIHtcbiAgICAgICAgICAgIC8vIFByZXZpb3VzbHkgcmV1c2VkIGNvbnRhaW5lciBjYW5ub3QgYmUgdXNlZCBhbnkgbW9yZS5cbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lclJldXNlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5jb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IGxheWVyQ2xhc3NOYW1lO1xuICAgICAgICAgICAgdmFyIHN0eWxlID0gY29udGFpbmVyLnN0eWxlO1xuICAgICAgICAgICAgc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgICAgICBzdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgICAgICBjb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKCk7XG4gICAgICAgICAgICB2YXIgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzKTtcbiAgICAgICAgICAgIHN0eWxlID0gY2FudmFzLnN0eWxlO1xuICAgICAgICAgICAgc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgc3R5bGUubGVmdCA9ICcwJztcbiAgICAgICAgICAgIHN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9ICd0b3AgbGVmdCc7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBDbGlwIGV4dGVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuY2xpcCA9IGZ1bmN0aW9uIChjb250ZXh0LCBmcmFtZVN0YXRlLCBleHRlbnQpIHtcbiAgICAgICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgICAgIHZhciBoYWxmV2lkdGggPSAoZnJhbWVTdGF0ZS5zaXplWzBdICogcGl4ZWxSYXRpbykgLyAyO1xuICAgICAgICB2YXIgaGFsZkhlaWdodCA9IChmcmFtZVN0YXRlLnNpemVbMV0gKiBwaXhlbFJhdGlvKSAvIDI7XG4gICAgICAgIHZhciByb3RhdGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnJvdGF0aW9uO1xuICAgICAgICB2YXIgdG9wTGVmdCA9IGdldFRvcExlZnQoZXh0ZW50KTtcbiAgICAgICAgdmFyIHRvcFJpZ2h0ID0gZ2V0VG9wUmlnaHQoZXh0ZW50KTtcbiAgICAgICAgdmFyIGJvdHRvbVJpZ2h0ID0gZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KTtcbiAgICAgICAgdmFyIGJvdHRvbUxlZnQgPSBnZXRCb3R0b21MZWZ0KGV4dGVudCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIHRvcExlZnQpO1xuICAgICAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCB0b3BSaWdodCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIGJvdHRvbVJpZ2h0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgYm90dG9tTGVmdCk7XG4gICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICByb3RhdGVBdE9mZnNldChjb250ZXh0LCAtcm90YXRpb24sIGhhbGZXaWR0aCwgaGFsZkhlaWdodCk7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGNvbnRleHQubW92ZVRvKHRvcExlZnRbMF0gKiBwaXhlbFJhdGlvLCB0b3BMZWZ0WzFdICogcGl4ZWxSYXRpbyk7XG4gICAgICAgIGNvbnRleHQubGluZVRvKHRvcFJpZ2h0WzBdICogcGl4ZWxSYXRpbywgdG9wUmlnaHRbMV0gKiBwaXhlbFJhdGlvKTtcbiAgICAgICAgY29udGV4dC5saW5lVG8oYm90dG9tUmlnaHRbMF0gKiBwaXhlbFJhdGlvLCBib3R0b21SaWdodFsxXSAqIHBpeGVsUmF0aW8pO1xuICAgICAgICBjb250ZXh0LmxpbmVUbyhib3R0b21MZWZ0WzBdICogcGl4ZWxSYXRpbywgYm90dG9tTGVmdFsxXSAqIHBpeGVsUmF0aW8pO1xuICAgICAgICBjb250ZXh0LmNsaXAoKTtcbiAgICAgICAgcm90YXRlQXRPZmZzZXQoY29udGV4dCwgcm90YXRpb24sIGhhbGZXaWR0aCwgaGFsZkhlaWdodCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgQ2xpcCBleHRlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmNsaXBVbnJvdGF0ZWQgPSBmdW5jdGlvbiAoY29udGV4dCwgZnJhbWVTdGF0ZSwgZXh0ZW50KSB7XG4gICAgICAgIHZhciB0b3BMZWZ0ID0gZ2V0VG9wTGVmdChleHRlbnQpO1xuICAgICAgICB2YXIgdG9wUmlnaHQgPSBnZXRUb3BSaWdodChleHRlbnQpO1xuICAgICAgICB2YXIgYm90dG9tUmlnaHQgPSBnZXRCb3R0b21SaWdodChleHRlbnQpO1xuICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGdldEJvdHRvbUxlZnQoZXh0ZW50KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgdG9wTGVmdCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIHRvcFJpZ2h0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgYm90dG9tUmlnaHQpO1xuICAgICAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCBib3R0b21MZWZ0KTtcbiAgICAgICAgdmFyIGludmVydGVkID0gdGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm07XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGludmVydGVkLCB0b3BMZWZ0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oaW52ZXJ0ZWQsIHRvcFJpZ2h0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oaW52ZXJ0ZWQsIGJvdHRvbVJpZ2h0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oaW52ZXJ0ZWQsIGJvdHRvbUxlZnQpO1xuICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY29udGV4dC5tb3ZlVG8oTWF0aC5yb3VuZCh0b3BMZWZ0WzBdKSwgTWF0aC5yb3VuZCh0b3BMZWZ0WzFdKSk7XG4gICAgICAgIGNvbnRleHQubGluZVRvKE1hdGgucm91bmQodG9wUmlnaHRbMF0pLCBNYXRoLnJvdW5kKHRvcFJpZ2h0WzFdKSk7XG4gICAgICAgIGNvbnRleHQubGluZVRvKE1hdGgucm91bmQoYm90dG9tUmlnaHRbMF0pLCBNYXRoLnJvdW5kKGJvdHRvbVJpZ2h0WzFdKSk7XG4gICAgICAgIGNvbnRleHQubGluZVRvKE1hdGgucm91bmQoYm90dG9tTGVmdFswXSksIE1hdGgucm91bmQoYm90dG9tTGVmdFsxXSkpO1xuICAgICAgICBjb250ZXh0LmNsaXAoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vcmVuZGVyL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIEV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZGlzcGF0Y2hSZW5kZXJFdmVudF8gPSBmdW5jdGlvbiAodHlwZSwgY29udGV4dCwgZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIGlmIChsYXllci5oYXNMaXN0ZW5lcih0eXBlKSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50XzEgPSBuZXcgUmVuZGVyRXZlbnQodHlwZSwgdGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0sIGZyYW1lU3RhdGUsIGNvbnRleHQpO1xuICAgICAgICAgICAgbGF5ZXIuZGlzcGF0Y2hFdmVudChldmVudF8xKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wcmVSZW5kZXIgPSBmdW5jdGlvbiAoY29udGV4dCwgZnJhbWVTdGF0ZSkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoUmVuZGVyRXZlbnRfKFJlbmRlckV2ZW50VHlwZS5QUkVSRU5ERVIsIGNvbnRleHQsIGZyYW1lU3RhdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wb3N0UmVuZGVyID0gZnVuY3Rpb24gKGNvbnRleHQsIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaFJlbmRlckV2ZW50XyhSZW5kZXJFdmVudFR5cGUuUE9TVFJFTkRFUiwgY29udGV4dCwgZnJhbWVTdGF0ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdHJhbnNmb3JtIGZvciByZW5kZXJpbmcgdG8gYW4gZWxlbWVudCB0aGF0IHdpbGwgYmUgcm90YXRlZCBhZnRlciByZW5kZXJpbmcuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFdpZHRoIG9mIHRoZSByZW5kZXJlZCBlbGVtZW50IChpbiBwaXhlbHMpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgSGVpZ2h0IG9mIHRoZSByZW5kZXJlZCBlbGVtZW50IChpbiBwaXhlbHMpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRYIE9mZnNldCBvbiB0aGUgeC1heGlzIGluIHZpZXcgY29vcmRpbmF0ZXMuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSBUcmFuc2Zvcm0uXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0UmVuZGVyVHJhbnNmb3JtID0gZnVuY3Rpb24gKGNlbnRlciwgcmVzb2x1dGlvbiwgcm90YXRpb24sIHBpeGVsUmF0aW8sIHdpZHRoLCBoZWlnaHQsIG9mZnNldFgpIHtcbiAgICAgICAgdmFyIGR4MSA9IHdpZHRoIC8gMjtcbiAgICAgICAgdmFyIGR5MSA9IGhlaWdodCAvIDI7XG4gICAgICAgIHZhciBzeCA9IHBpeGVsUmF0aW8gLyByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgc3kgPSAtc3g7XG4gICAgICAgIHZhciBkeDIgPSAtY2VudGVyWzBdICsgb2Zmc2V0WDtcbiAgICAgICAgdmFyIGR5MiA9IC1jZW50ZXJbMV07XG4gICAgICAgIHJldHVybiBjb21wb3NlVHJhbnNmb3JtKHRoaXMudGVtcFRyYW5zZm9ybSwgZHgxLCBkeTEsIHN4LCBzeSwgLXJvdGF0aW9uLCBkeDIsIGR5Mik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcmV0dXJuIHtVaW50OENsYW1wZWRBcnJheXxVaW50OEFycmF5fSBUaGUgcmVzdWx0LiAgSWYgdGhlcmUgaXMgbm8gZGF0YSBhdCB0aGUgcGl4ZWxcbiAgICAgKiAgICBsb2NhdGlvbiwgbnVsbCB3aWxsIGJlIHJldHVybmVkLiAgSWYgdGhlcmUgaXMgZGF0YSwgYnV0IHBpeGVsIHZhbHVlcyBjYW5ub3QgYmVcbiAgICAgKiAgICByZXR1cm5lZCwgYW5kIGVtcHR5IGFycmF5IHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0RGF0YUF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSkge1xuICAgICAgICB2YXIgcmVuZGVyUGl4ZWwgPSBhcHBseVRyYW5zZm9ybSh0aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybSwgcGl4ZWwuc2xpY2UoKSk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgICAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIHZhciBsYXllckV4dGVudCA9IGxheWVyLmdldEV4dGVudCgpO1xuICAgICAgICBpZiAobGF5ZXJFeHRlbnQpIHtcbiAgICAgICAgICAgIHZhciByZW5kZXJDb29yZGluYXRlID0gYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSwgcGl4ZWwuc2xpY2UoKSk7XG4gICAgICAgICAgICAvKiogZ2V0IG9ubHkgZGF0YSBpbnNpZGUgb2YgdGhlIGxheWVyIGV4dGVudCAqL1xuICAgICAgICAgICAgaWYgKCFjb250YWluc0Nvb3JkaW5hdGUobGF5ZXJFeHRlbnQsIHJlbmRlckNvb3JkaW5hdGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRhdGE7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgeCA9IE1hdGgucm91bmQocmVuZGVyUGl4ZWxbMF0pO1xuICAgICAgICAgICAgdmFyIHkgPSBNYXRoLnJvdW5kKHJlbmRlclBpeGVsWzFdKTtcbiAgICAgICAgICAgIHZhciBuZXdDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgIHZhciBuZXdDb250ZXh0ID0gbmV3Q2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgICBuZXdDYW52YXMud2lkdGggPSAxO1xuICAgICAgICAgICAgbmV3Q2FudmFzLmhlaWdodCA9IDE7XG4gICAgICAgICAgICBuZXdDb250ZXh0LmNsZWFyUmVjdCgwLCAwLCAxLCAxKTtcbiAgICAgICAgICAgIG5ld0NvbnRleHQuZHJhd0ltYWdlKGNvbnRleHQuY2FudmFzLCB4LCB5LCAxLCAxLCAwLCAwLCAxLCAxKTtcbiAgICAgICAgICAgIGRhdGEgPSBuZXdDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCAxLCAxKS5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIubmFtZSA9PT0gJ1NlY3VyaXR5RXJyb3InKSB7XG4gICAgICAgICAgICAgICAgLy8gdGFpbnRlZCBjYW52YXMsIHdlIGFzc3VtZSB0aGVyZSBpcyBkYXRhIGF0IHRoZSBnaXZlbiBwaXhlbCAoYWx0aG91Z2ggdGhlcmUgbWlnaHQgbm90IGJlKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGFbM10gPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH07XG4gICAgcmV0dXJuIENhbnZhc0xheWVyUmVuZGVyZXI7XG59KExheWVyUmVuZGVyZXIpKTtcbmV4cG9ydCBkZWZhdWx0IENhbnZhc0xheWVyUmVuZGVyZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1MYXllci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVGlsZVJhbmdlXG4gKi9cbi8qKlxuICogQSByZXByZXNlbnRhdGlvbiBvZiBhIGNvbnRpZ3VvdXMgYmxvY2sgb2YgdGlsZXMuICBBIHRpbGUgcmFuZ2UgaXMgc3BlY2lmaWVkXG4gKiBieSBpdHMgbWluL21heCB0aWxlIGNvb3JkaW5hdGVzIGFuZCBpcyBpbmNsdXNpdmUgb2YgY29vcmRpbmF0ZXMuXG4gKi9cbnZhciBUaWxlUmFuZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblggTWluaW11bSBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhYIE1heGltdW0gWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluWSBNaW5pbXVtIFkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFkgTWF4aW11bSBZLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbGVSYW5nZShtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5taW5YID0gbWluWDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heFggPSBtYXhYO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWluWSA9IG1pblk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhZID0gbWF4WTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgdGlsZSBjb29yZGluYXRlLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAodGlsZUNvb3JkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5zWFkodGlsZUNvb3JkWzFdLCB0aWxlQ29vcmRbMl0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtUaWxlUmFuZ2V9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuY29udGFpbnNUaWxlUmFuZ2UgPSBmdW5jdGlvbiAodGlsZVJhbmdlKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5taW5YIDw9IHRpbGVSYW5nZS5taW5YICYmXG4gICAgICAgICAgICB0aWxlUmFuZ2UubWF4WCA8PSB0aGlzLm1heFggJiZcbiAgICAgICAgICAgIHRoaXMubWluWSA8PSB0aWxlUmFuZ2UubWluWSAmJlxuICAgICAgICAgICAgdGlsZVJhbmdlLm1heFkgPD0gdGhpcy5tYXhZKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIGNvb3JkaW5hdGUuXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5jb250YWluc1hZID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluWCA8PSB4ICYmIHggPD0gdGhpcy5tYXhYICYmIHRoaXMubWluWSA8PSB5ICYmIHkgPD0gdGhpcy5tYXhZO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtUaWxlUmFuZ2V9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IEVxdWFscy5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uICh0aWxlUmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLm1pblggPT0gdGlsZVJhbmdlLm1pblggJiZcbiAgICAgICAgICAgIHRoaXMubWluWSA9PSB0aWxlUmFuZ2UubWluWSAmJlxuICAgICAgICAgICAgdGhpcy5tYXhYID09IHRpbGVSYW5nZS5tYXhYICYmXG4gICAgICAgICAgICB0aGlzLm1heFkgPT0gdGlsZVJhbmdlLm1heFkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtUaWxlUmFuZ2V9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24gKHRpbGVSYW5nZSkge1xuICAgICAgICBpZiAodGlsZVJhbmdlLm1pblggPCB0aGlzLm1pblgpIHtcbiAgICAgICAgICAgIHRoaXMubWluWCA9IHRpbGVSYW5nZS5taW5YO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aWxlUmFuZ2UubWF4WCA+IHRoaXMubWF4WCkge1xuICAgICAgICAgICAgdGhpcy5tYXhYID0gdGlsZVJhbmdlLm1heFg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbGVSYW5nZS5taW5ZIDwgdGhpcy5taW5ZKSB7XG4gICAgICAgICAgICB0aGlzLm1pblkgPSB0aWxlUmFuZ2UubWluWTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGlsZVJhbmdlLm1heFkgPiB0aGlzLm1heFkpIHtcbiAgICAgICAgICAgIHRoaXMubWF4WSA9IHRpbGVSYW5nZS5tYXhZO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEhlaWdodC5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4WSAtIHRoaXMubWluWSArIDE7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gU2l6ZS5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBbdGhpcy5nZXRXaWR0aCgpLCB0aGlzLmdldEhlaWdodCgpXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gV2lkdGguXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4WCAtIHRoaXMubWluWCArIDE7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1RpbGVSYW5nZX0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSW50ZXJzZWN0cy5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmludGVyc2VjdHMgPSBmdW5jdGlvbiAodGlsZVJhbmdlKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5taW5YIDw9IHRpbGVSYW5nZS5tYXhYICYmXG4gICAgICAgICAgICB0aGlzLm1heFggPj0gdGlsZVJhbmdlLm1pblggJiZcbiAgICAgICAgICAgIHRoaXMubWluWSA8PSB0aWxlUmFuZ2UubWF4WSAmJlxuICAgICAgICAgICAgdGhpcy5tYXhZID49IHRpbGVSYW5nZS5taW5ZKTtcbiAgICB9O1xuICAgIHJldHVybiBUaWxlUmFuZ2U7XG59KCkpO1xuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWCBNaW5pbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WCBNYXhpbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWSBNaW5pbXVtIFkuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WSBNYXhpbXVtIFkuXG4gKiBAcGFyYW0ge1RpbGVSYW5nZT19IHRpbGVSYW5nZSBUaWxlUmFuZ2UuXG4gKiBAcmV0dXJuIHtUaWxlUmFuZ2V9IFRpbGUgcmFuZ2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZLCB0aWxlUmFuZ2UpIHtcbiAgICBpZiAodGlsZVJhbmdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGlsZVJhbmdlLm1pblggPSBtaW5YO1xuICAgICAgICB0aWxlUmFuZ2UubWF4WCA9IG1heFg7XG4gICAgICAgIHRpbGVSYW5nZS5taW5ZID0gbWluWTtcbiAgICAgICAgdGlsZVJhbmdlLm1heFkgPSBtYXhZO1xuICAgICAgICByZXR1cm4gdGlsZVJhbmdlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUaWxlUmFuZ2UobWluWCwgbWF4WCwgbWluWSwgbWF4WSk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgVGlsZVJhbmdlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZVJhbmdlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL1RpbGVMYXllclxuICovXG5pbXBvcnQgQ2FudmFzTGF5ZXJSZW5kZXJlciBmcm9tICcuL0xheWVyLmpzJztcbmltcG9ydCBUaWxlUmFuZ2UgZnJvbSAnLi4vLi4vVGlsZVJhbmdlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7IGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIG1ha2VJbnZlcnNlLCB9IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuLi8uLi9vYmouanMnO1xuaW1wb3J0IHsgY3JlYXRlRW1wdHksIGVxdWFscywgZ2V0SW50ZXJzZWN0aW9uLCBnZXRUb3BMZWZ0LCB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVUcmFuc2Zvcm1TdHJpbmcgfSBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzLmpzJztcbmltcG9ydCB7IGZyb21Vc2VyRXh0ZW50IH0gZnJvbSAnLi4vLi4vcHJvai5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgfSBmcm9tICcuLi8uLi91dGlsLmpzJztcbmltcG9ydCB7IG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24gfSBmcm9tICcuLi8uLi9hcnJheS5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENhbnZhcyByZW5kZXJlciBmb3IgdGlsZSBsYXllcnMuXG4gKiBAYXBpXG4gKi9cbnZhciBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9sYXllci9UaWxlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlTGF5ZXIgVGlsZSBsYXllci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcih0aWxlTGF5ZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdGlsZUxheWVyKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVuZGVyZWQgZXh0ZW50IGhhcyBjaGFuZ2VkIHNpbmNlIHRoZSBwcmV2aW91cyBgcmVuZGVyRnJhbWUoKWAgY2FsbFxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmV4dGVudENoYW5nZWQgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRFeHRlbnRfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkUGl4ZWxSYXRpbztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRQcm9qZWN0aW9uID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkUmV2aXNpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHshQXJyYXk8aW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkVGlsZXMgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubmV3VGlsZXNfID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudG1wRXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRtcFRpbGVSYW5nZV8gPSBuZXcgVGlsZVJhbmdlKDAsIDAsIDAsIDApO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRpbGUgaXMgZHJhd2FibGUuXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmlzRHJhd2FibGVUaWxlID0gZnVuY3Rpb24gKHRpbGUpIHtcbiAgICAgICAgdmFyIHRpbGVMYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgdmFyIHRpbGVTdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgdmFyIHVzZUludGVyaW1UaWxlc09uRXJyb3IgPSB0aWxlTGF5ZXIuZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvcigpO1xuICAgICAgICByZXR1cm4gKHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuTE9BREVEIHx8XG4gICAgICAgICAgICB0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkVNUFRZIHx8XG4gICAgICAgICAgICAodGlsZVN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUiAmJiAhdXNlSW50ZXJpbVRpbGVzT25FcnJvcikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSBUaWxlLlxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRUaWxlID0gZnVuY3Rpb24gKHosIHgsIHksIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbjtcbiAgICAgICAgdmFyIHRpbGVMYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgdmFyIHRpbGVTb3VyY2UgPSB0aWxlTGF5ZXIuZ2V0U291cmNlKCk7XG4gICAgICAgIHZhciB0aWxlID0gdGlsZVNvdXJjZS5nZXRUaWxlKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5FUlJPUikge1xuICAgICAgICAgICAgaWYgKCF0aWxlTGF5ZXIuZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvcigpKSB7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiB1c2VJbnRlcmltVGlsZXNPbkVycm9yIGlzIGZhbHNlLCB3ZSBjb25zaWRlciB0aGUgZXJyb3IgdGlsZSBhcyBsb2FkZWQuXG4gICAgICAgICAgICAgICAgdGlsZS5zZXRTdGF0ZShUaWxlU3RhdGUuTE9BREVEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRpbGVMYXllci5nZXRQcmVsb2FkKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gUHJlbG9hZGVkIHRpbGVzIGZvciBsb3dlciByZXNvbHV0aW9ucyBtaWdodCBoYXZlIGZpbmlzaGVkIGxvYWRpbmcuXG4gICAgICAgICAgICAgICAgdGhpcy5uZXdUaWxlc18gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5pc0RyYXdhYmxlVGlsZSh0aWxlKSkge1xuICAgICAgICAgICAgdGlsZSA9IHRpbGUuZ2V0SW50ZXJpbVRpbGUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGlsZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PG51bWJlciwgT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pj59IHRpbGVzIExvb2t1cCBvZiBsb2FkZWQgdGlsZXMgYnkgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBab29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbnx2b2lkfSBJZiBgZmFsc2VgLCB0aGUgdGlsZSB3aWxsIG5vdCBiZSBjb25zaWRlcmVkIGxvYWRlZC5cbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUubG9hZGVkVGlsZUNhbGxiYWNrID0gZnVuY3Rpb24gKHRpbGVzLCB6b29tLCB0aWxlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRHJhd2FibGVUaWxlKHRpbGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5sb2FkZWRUaWxlQ2FsbGJhY2suY2FsbCh0aGlzLCB0aWxlcywgem9vbSwgdGlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIHdoZXRoZXIgcmVuZGVyIHNob3VsZCBiZSBjYWxsZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBMYXllciBpcyByZWFkeSB0byBiZSByZW5kZXJlZC5cbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucHJlcGFyZUZyYW1lID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5nZXRMYXllcigpLmdldFNvdXJjZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRoZSBsYXllci5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBUYXJnZXQgdGhhdCBtYXkgYmUgdXNlZCB0byByZW5kZXIgY29udGVudCB0by5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckZyYW1lID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUsIHRhcmdldCkge1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheVtmcmFtZVN0YXRlLmxheWVySW5kZXhdO1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgICAgIHZhciB2aWV3UmVzb2x1dGlvbiA9IHZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICAgICAgICB2YXIgdmlld0NlbnRlciA9IHZpZXdTdGF0ZS5jZW50ZXI7XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICAgICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgICAgIHZhciB0aWxlTGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIHZhciB0aWxlU291cmNlID0gdGlsZUxheWVyLmdldFNvdXJjZSgpO1xuICAgICAgICB2YXIgc291cmNlUmV2aXNpb24gPSB0aWxlU291cmNlLmdldFJldmlzaW9uKCk7XG4gICAgICAgIHZhciB0aWxlR3JpZCA9IHRpbGVTb3VyY2UuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICB2YXIgeiA9IHRpbGVHcmlkLmdldFpGb3JSZXNvbHV0aW9uKHZpZXdSZXNvbHV0aW9uLCB0aWxlU291cmNlLnpEaXJlY3Rpb24pO1xuICAgICAgICB2YXIgdGlsZVJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgICB2YXIgZXh0ZW50ID0gZnJhbWVTdGF0ZS5leHRlbnQ7XG4gICAgICAgIHZhciBsYXllckV4dGVudCA9IGxheWVyU3RhdGUuZXh0ZW50ICYmIGZyb21Vc2VyRXh0ZW50KGxheWVyU3RhdGUuZXh0ZW50LCBwcm9qZWN0aW9uKTtcbiAgICAgICAgaWYgKGxheWVyRXh0ZW50KSB7XG4gICAgICAgICAgICBleHRlbnQgPSBnZXRJbnRlcnNlY3Rpb24oZXh0ZW50LCBmcm9tVXNlckV4dGVudChsYXllclN0YXRlLmV4dGVudCwgcHJvamVjdGlvbikpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aWxlUGl4ZWxSYXRpbyA9IHRpbGVTb3VyY2UuZ2V0VGlsZVBpeGVsUmF0aW8ocGl4ZWxSYXRpbyk7XG4gICAgICAgIC8vIGRlc2lyZWQgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIGluIHBpeGVsc1xuICAgICAgICB2YXIgd2lkdGggPSBNYXRoLnJvdW5kKGZyYW1lU3RhdGUuc2l6ZVswXSAqIHRpbGVQaXhlbFJhdGlvKTtcbiAgICAgICAgdmFyIGhlaWdodCA9IE1hdGgucm91bmQoZnJhbWVTdGF0ZS5zaXplWzFdICogdGlsZVBpeGVsUmF0aW8pO1xuICAgICAgICBpZiAocm90YXRpb24pIHtcbiAgICAgICAgICAgIHZhciBzaXplID0gTWF0aC5yb3VuZChNYXRoLnNxcnQod2lkdGggKiB3aWR0aCArIGhlaWdodCAqIGhlaWdodCkpO1xuICAgICAgICAgICAgd2lkdGggPSBzaXplO1xuICAgICAgICAgICAgaGVpZ2h0ID0gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZHggPSAodGlsZVJlc29sdXRpb24gKiB3aWR0aCkgLyAyIC8gdGlsZVBpeGVsUmF0aW87XG4gICAgICAgIHZhciBkeSA9ICh0aWxlUmVzb2x1dGlvbiAqIGhlaWdodCkgLyAyIC8gdGlsZVBpeGVsUmF0aW87XG4gICAgICAgIHZhciBjYW52YXNFeHRlbnQgPSBbXG4gICAgICAgICAgICB2aWV3Q2VudGVyWzBdIC0gZHgsXG4gICAgICAgICAgICB2aWV3Q2VudGVyWzFdIC0gZHksXG4gICAgICAgICAgICB2aWV3Q2VudGVyWzBdICsgZHgsXG4gICAgICAgICAgICB2aWV3Q2VudGVyWzFdICsgZHksXG4gICAgICAgIF07XG4gICAgICAgIHZhciB0aWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgeik7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PG51bWJlciwgT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pj59XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgdGlsZXNUb0RyYXdCeVogPSB7fTtcbiAgICAgICAgdGlsZXNUb0RyYXdCeVpbel0gPSB7fTtcbiAgICAgICAgdmFyIGZpbmRMb2FkZWRUaWxlcyA9IHRoaXMuY3JlYXRlTG9hZGVkVGlsZUZpbmRlcih0aWxlU291cmNlLCBwcm9qZWN0aW9uLCB0aWxlc1RvRHJhd0J5Wik7XG4gICAgICAgIHZhciB0bXBFeHRlbnQgPSB0aGlzLnRtcEV4dGVudDtcbiAgICAgICAgdmFyIHRtcFRpbGVSYW5nZSA9IHRoaXMudG1wVGlsZVJhbmdlXztcbiAgICAgICAgdGhpcy5uZXdUaWxlc18gPSBmYWxzZTtcbiAgICAgICAgZm9yICh2YXIgeCA9IHRpbGVSYW5nZS5taW5YOyB4IDw9IHRpbGVSYW5nZS5tYXhYOyArK3gpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSB0aWxlUmFuZ2UubWluWTsgeSA8PSB0aWxlUmFuZ2UubWF4WTsgKyt5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbGUgPSB0aGlzLmdldFRpbGUoeiwgeCwgeSwgZnJhbWVTdGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNEcmF3YWJsZVRpbGUodGlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVpZCA9IGdldFVpZCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWxlc1RvRHJhd0J5Wlt6XVt0aWxlLnRpbGVDb29yZC50b1N0cmluZygpXSA9IHRpbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5UcmFuc2l0aW9uID0gdGlsZS5pblRyYW5zaXRpb24odWlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5uZXdUaWxlc18gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5UcmFuc2l0aW9uIHx8IHRoaXMucmVuZGVyZWRUaWxlcy5pbmRleE9mKHRpbGUpID09PSAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld1RpbGVzXyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGUuZ2V0QWxwaGEodWlkLCBmcmFtZVN0YXRlLnRpbWUpID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBsb29rIGZvciBhbHQgdGlsZXMgaWYgYWxwaGEgaXMgMVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkVGlsZVJhbmdlID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkQ2hpbGRUaWxlUmFuZ2UodGlsZS50aWxlQ29vcmQsIHRtcFRpbGVSYW5nZSwgdG1wRXh0ZW50KTtcbiAgICAgICAgICAgICAgICB2YXIgY292ZXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZFRpbGVSYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkID0gZmluZExvYWRlZFRpbGVzKHogKyAxLCBjaGlsZFRpbGVSYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghY292ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aWxlR3JpZC5mb3JFYWNoVGlsZUNvb3JkUGFyZW50VGlsZVJhbmdlKHRpbGUudGlsZUNvb3JkLCBmaW5kTG9hZGVkVGlsZXMsIHRtcFRpbGVSYW5nZSwgdG1wRXh0ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNhbnZhc1NjYWxlID0gdGlsZVJlc29sdXRpb24gLyB2aWV3UmVzb2x1dGlvbjtcbiAgICAgICAgLy8gc2V0IGZvcndhcmQgYW5kIGludmVyc2UgcGl4ZWwgdHJhbnNmb3Jtc1xuICAgICAgICBjb21wb3NlVHJhbnNmb3JtKHRoaXMucGl4ZWxUcmFuc2Zvcm0sIGZyYW1lU3RhdGUuc2l6ZVswXSAvIDIsIGZyYW1lU3RhdGUuc2l6ZVsxXSAvIDIsIDEgLyB0aWxlUGl4ZWxSYXRpbywgMSAvIHRpbGVQaXhlbFJhdGlvLCByb3RhdGlvbiwgLXdpZHRoIC8gMiwgLWhlaWdodCAvIDIpO1xuICAgICAgICB2YXIgY2FudmFzVHJhbnNmb3JtID0gY3JlYXRlVHJhbnNmb3JtU3RyaW5nKHRoaXMucGl4ZWxUcmFuc2Zvcm0pO1xuICAgICAgICB0aGlzLnVzZUNvbnRhaW5lcih0YXJnZXQsIGNhbnZhc1RyYW5zZm9ybSwgbGF5ZXJTdGF0ZS5vcGFjaXR5KTtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgIHZhciBjYW52YXMgPSBjb250ZXh0LmNhbnZhcztcbiAgICAgICAgbWFrZUludmVyc2UodGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0sIHRoaXMucGl4ZWxUcmFuc2Zvcm0pO1xuICAgICAgICAvLyBzZXQgc2NhbGUgdHJhbnNmb3JtIGZvciBjYWxjdWxhdGluZyB0aWxlIHBvc2l0aW9ucyBvbiB0aGUgY2FudmFzXG4gICAgICAgIGNvbXBvc2VUcmFuc2Zvcm0odGhpcy50ZW1wVHJhbnNmb3JtLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIsIGNhbnZhc1NjYWxlLCBjYW52YXNTY2FsZSwgMCwgLXdpZHRoIC8gMiwgLWhlaWdodCAvIDIpO1xuICAgICAgICBpZiAoY2FudmFzLndpZHRoICE9IHdpZHRoIHx8IGNhbnZhcy5oZWlnaHQgIT0gaGVpZ2h0KSB7XG4gICAgICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIXRoaXMuY29udGFpbmVyUmV1c2VkKSB7XG4gICAgICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGF5ZXJFeHRlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY2xpcFVucm90YXRlZChjb250ZXh0LCBmcmFtZVN0YXRlLCBsYXllckV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzaWduKGNvbnRleHQsIHRpbGVTb3VyY2UuZ2V0Q29udGV4dE9wdGlvbnMoKSk7XG4gICAgICAgIHRoaXMucHJlUmVuZGVyKGNvbnRleHQsIGZyYW1lU3RhdGUpO1xuICAgICAgICB0aGlzLnJlbmRlcmVkVGlsZXMubGVuZ3RoID0gMDtcbiAgICAgICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgICAgICB2YXIgenMgPSBPYmplY3Qua2V5cyh0aWxlc1RvRHJhd0J5WikubWFwKE51bWJlcik7XG4gICAgICAgIHpzLnNvcnQobnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbik7XG4gICAgICAgIHZhciBjbGlwcywgY2xpcFpzLCBjdXJyZW50Q2xpcDtcbiAgICAgICAgaWYgKGxheWVyU3RhdGUub3BhY2l0eSA9PT0gMSAmJlxuICAgICAgICAgICAgKCF0aGlzLmNvbnRhaW5lclJldXNlZCB8fFxuICAgICAgICAgICAgICAgIHRpbGVTb3VyY2UuZ2V0T3BhcXVlKGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb24pKSkge1xuICAgICAgICAgICAgenMgPSB6cy5yZXZlcnNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjbGlwcyA9IFtdO1xuICAgICAgICAgICAgY2xpcFpzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IHpzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudFogPSB6c1tpXTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50VGlsZVBpeGVsU2l6ZSA9IHRpbGVTb3VyY2UuZ2V0VGlsZVBpeGVsU2l6ZShjdXJyZW50WiwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbik7XG4gICAgICAgICAgICB2YXIgY3VycmVudFJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKGN1cnJlbnRaKTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50U2NhbGUgPSBjdXJyZW50UmVzb2x1dGlvbiAvIHRpbGVSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIGR4XzEgPSBjdXJyZW50VGlsZVBpeGVsU2l6ZVswXSAqIGN1cnJlbnRTY2FsZSAqIGNhbnZhc1NjYWxlO1xuICAgICAgICAgICAgdmFyIGR5XzEgPSBjdXJyZW50VGlsZVBpeGVsU2l6ZVsxXSAqIGN1cnJlbnRTY2FsZSAqIGNhbnZhc1NjYWxlO1xuICAgICAgICAgICAgdmFyIG9yaWdpblRpbGVDb29yZCA9IHRpbGVHcmlkLmdldFRpbGVDb29yZEZvckNvb3JkQW5kWihnZXRUb3BMZWZ0KGNhbnZhc0V4dGVudCksIGN1cnJlbnRaKTtcbiAgICAgICAgICAgIHZhciBvcmlnaW5UaWxlRXh0ZW50ID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KG9yaWdpblRpbGVDb29yZCk7XG4gICAgICAgICAgICB2YXIgb3JpZ2luXzEgPSBhcHBseVRyYW5zZm9ybSh0aGlzLnRlbXBUcmFuc2Zvcm0sIFtcbiAgICAgICAgICAgICAgICAodGlsZVBpeGVsUmF0aW8gKiAob3JpZ2luVGlsZUV4dGVudFswXSAtIGNhbnZhc0V4dGVudFswXSkpIC9cbiAgICAgICAgICAgICAgICAgICAgdGlsZVJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgKHRpbGVQaXhlbFJhdGlvICogKGNhbnZhc0V4dGVudFszXSAtIG9yaWdpblRpbGVFeHRlbnRbM10pKSAvXG4gICAgICAgICAgICAgICAgICAgIHRpbGVSZXNvbHV0aW9uLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB2YXIgdGlsZUd1dHRlciA9IHRpbGVQaXhlbFJhdGlvICogdGlsZVNvdXJjZS5nZXRHdXR0ZXJGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgdmFyIHRpbGVzVG9EcmF3ID0gdGlsZXNUb0RyYXdCeVpbY3VycmVudFpdO1xuICAgICAgICAgICAgZm9yICh2YXIgdGlsZUNvb3JkS2V5IGluIHRpbGVzVG9EcmF3KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGlsZXNUb0RyYXdbdGlsZUNvb3JkS2V5XSk7XG4gICAgICAgICAgICAgICAgdmFyIHRpbGVDb29yZCA9IHRpbGUudGlsZUNvb3JkO1xuICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBpbnRlZ2VyIHBvc2l0aW9ucyBhbmQgc2l6ZXMgc28gdGhhdCB0aWxlcyBhbGlnblxuICAgICAgICAgICAgICAgIHZhciBmbG9hdFggPSBvcmlnaW5fMVswXSAtIChvcmlnaW5UaWxlQ29vcmRbMV0gLSB0aWxlQ29vcmRbMV0pICogZHhfMTtcbiAgICAgICAgICAgICAgICB2YXIgbmV4dFggPSBNYXRoLnJvdW5kKGZsb2F0WCArIGR4XzEpO1xuICAgICAgICAgICAgICAgIHZhciBmbG9hdFkgPSBvcmlnaW5fMVsxXSAtIChvcmlnaW5UaWxlQ29vcmRbMl0gLSB0aWxlQ29vcmRbMl0pICogZHlfMTtcbiAgICAgICAgICAgICAgICB2YXIgbmV4dFkgPSBNYXRoLnJvdW5kKGZsb2F0WSArIGR5XzEpO1xuICAgICAgICAgICAgICAgIHZhciB4ID0gTWF0aC5yb3VuZChmbG9hdFgpO1xuICAgICAgICAgICAgICAgIHZhciB5ID0gTWF0aC5yb3VuZChmbG9hdFkpO1xuICAgICAgICAgICAgICAgIHZhciB3ID0gbmV4dFggLSB4O1xuICAgICAgICAgICAgICAgIHZhciBoID0gbmV4dFkgLSB5O1xuICAgICAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uID0geiA9PT0gY3VycmVudFo7XG4gICAgICAgICAgICAgICAgdmFyIGluVHJhbnNpdGlvbiA9IHRyYW5zaXRpb24gJiYgdGlsZS5nZXRBbHBoYShnZXRVaWQodGhpcyksIGZyYW1lU3RhdGUudGltZSkgIT09IDE7XG4gICAgICAgICAgICAgICAgaWYgKCFpblRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsaXBzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGlwIG1hc2sgZm9yIHJlZ2lvbnMgaW4gdGhpcyB0aWxlIHRoYXQgYWxyZWFkeSBmaWxsZWQgYnkgYSBoaWdoZXIgeiB0aWxlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDbGlwID0gW3gsIHksIHggKyB3LCB5LCB4ICsgdywgeSArIGgsIHgsIHkgKyBoXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGlfMSA9IDAsIGlpID0gY2xpcHMubGVuZ3RoOyBpXzEgPCBpaTsgKytpXzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeiAhPT0gY3VycmVudFogJiYgY3VycmVudFogPCBjbGlwWnNbaV8xXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xpcCA9IGNsaXBzW2lfMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvdW50ZXItY2xvY2t3aXNlIChvdXRlciByaW5nKSBmb3IgY3VycmVudCB0aWxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKGN1cnJlbnRDbGlwWzBdLCBjdXJyZW50Q2xpcFsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGN1cnJlbnRDbGlwWzJdLCBjdXJyZW50Q2xpcFszXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGN1cnJlbnRDbGlwWzRdLCBjdXJyZW50Q2xpcFs1XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGN1cnJlbnRDbGlwWzZdLCBjdXJyZW50Q2xpcFs3XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb2Nrd2lzZSAoaW5uZXIgcmluZykgZm9yIGhpZ2hlciB6IHRpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8oY2xpcFs2XSwgY2xpcFs3XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGNsaXBbNF0sIGNsaXBbNV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjbGlwWzJdLCBjbGlwWzNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY2xpcFswXSwgY2xpcFsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2xpcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBzLnB1c2goY3VycmVudENsaXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpcFpzLnB1c2goY3VycmVudFopO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jbGVhclJlY3QoeCwgeSwgdywgaCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3VGlsZUltYWdlKHRpbGUsIGZyYW1lU3RhdGUsIHgsIHksIHcsIGgsIHRpbGVHdXR0ZXIsIHRyYW5zaXRpb24sIGxheWVyU3RhdGUub3BhY2l0eSk7XG4gICAgICAgICAgICAgICAgaWYgKGNsaXBzICYmICFpblRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZWRUaWxlcy5wdXNoKHRpbGUpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVXNlZFRpbGVzKGZyYW1lU3RhdGUudXNlZFRpbGVzLCB0aWxlU291cmNlLCB0aWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcmVkUmV2aXNpb24gPSBzb3VyY2VSZXZpc2lvbjtcbiAgICAgICAgdGhpcy5yZW5kZXJlZFJlc29sdXRpb24gPSB0aWxlUmVzb2x1dGlvbjtcbiAgICAgICAgdGhpcy5leHRlbnRDaGFuZ2VkID1cbiAgICAgICAgICAgICF0aGlzLnJlbmRlcmVkRXh0ZW50XyB8fCAhZXF1YWxzKHRoaXMucmVuZGVyZWRFeHRlbnRfLCBjYW52YXNFeHRlbnQpO1xuICAgICAgICB0aGlzLnJlbmRlcmVkRXh0ZW50XyA9IGNhbnZhc0V4dGVudDtcbiAgICAgICAgdGhpcy5yZW5kZXJlZFBpeGVsUmF0aW8gPSBwaXhlbFJhdGlvO1xuICAgICAgICB0aGlzLnJlbmRlcmVkUHJvamVjdGlvbiA9IHByb2plY3Rpb247XG4gICAgICAgIHRoaXMubWFuYWdlVGlsZVB5cmFtaWQoZnJhbWVTdGF0ZSwgdGlsZVNvdXJjZSwgdGlsZUdyaWQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24sIGV4dGVudCwgeiwgdGlsZUxheWVyLmdldFByZWxvYWQoKSk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVFeHBpcmVDYWNoZShmcmFtZVN0YXRlLCB0aWxlU291cmNlKTtcbiAgICAgICAgdGhpcy5wb3N0UmVuZGVyKGNvbnRleHQsIGZyYW1lU3RhdGUpO1xuICAgICAgICBpZiAobGF5ZXJTdGF0ZS5leHRlbnQpIHtcbiAgICAgICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYW52YXNUcmFuc2Zvcm0gIT09IGNhbnZhcy5zdHlsZS50cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS50cmFuc2Zvcm0gPSBjYW52YXNUcmFuc2Zvcm07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9JbWFnZVRpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggTGVmdCBvZiB0aGUgdGlsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUb3Agb2YgdGhlIHRpbGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHcgV2lkdGggb2YgdGhlIHRpbGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGggSGVpZ2h0IG9mIHRoZSB0aWxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBndXR0ZXIgVGlsZSBndXR0ZXIuXG4gICAgICogQHBhcmFtIHtib29sZWFufSB0cmFuc2l0aW9uIEFwcGx5IGFuIGFscGhhIHRyYW5zaXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wYWNpdHkgT3BhY2l0eS5cbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZHJhd1RpbGVJbWFnZSA9IGZ1bmN0aW9uICh0aWxlLCBmcmFtZVN0YXRlLCB4LCB5LCB3LCBoLCBndXR0ZXIsIHRyYW5zaXRpb24sIG9wYWNpdHkpIHtcbiAgICAgICAgdmFyIGltYWdlID0gdGhpcy5nZXRUaWxlSW1hZ2UodGlsZSk7XG4gICAgICAgIGlmICghaW1hZ2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdWlkID0gZ2V0VWlkKHRoaXMpO1xuICAgICAgICB2YXIgdGlsZUFscGhhID0gdHJhbnNpdGlvbiA/IHRpbGUuZ2V0QWxwaGEodWlkLCBmcmFtZVN0YXRlLnRpbWUpIDogMTtcbiAgICAgICAgdmFyIGFscGhhID0gb3BhY2l0eSAqIHRpbGVBbHBoYTtcbiAgICAgICAgdmFyIGFscGhhQ2hhbmdlZCA9IGFscGhhICE9PSB0aGlzLmNvbnRleHQuZ2xvYmFsQWxwaGE7XG4gICAgICAgIGlmIChhbHBoYUNoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuZ2xvYmFsQWxwaGEgPSBhbHBoYTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCBndXR0ZXIsIGd1dHRlciwgaW1hZ2Uud2lkdGggLSAyICogZ3V0dGVyLCBpbWFnZS5oZWlnaHQgLSAyICogZ3V0dGVyLCB4LCB5LCB3LCBoKTtcbiAgICAgICAgaWYgKGFscGhhQ2hhbmdlZCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGlsZUFscGhhICE9PSAxKSB7XG4gICAgICAgICAgICBmcmFtZVN0YXRlLmFuaW1hdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIHRpbGUuZW5kVHJhbnNpdGlvbih1aWQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gSW1hZ2VcbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgICAgICByZXR1cm4gY29udGV4dCA/IGNvbnRleHQuY2FudmFzIDogbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaW1hZ2UgZnJvbSBhIHRpbGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9JbWFnZVRpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gSW1hZ2UuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRUaWxlSW1hZ2UgPSBmdW5jdGlvbiAodGlsZSkge1xuICAgICAgICByZXR1cm4gdGlsZS5nZXRJbWFnZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5zY2hlZHVsZUV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUsIHRpbGVTb3VyY2UpIHtcbiAgICAgICAgaWYgKHRpbGVTb3VyY2UuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdmFyIHBvc3RSZW5kZXJGdW5jdGlvbiA9IGZ1bmN0aW9uICh0aWxlU291cmNlLCBtYXAsIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGlsZVNvdXJjZUtleSA9IGdldFVpZCh0aWxlU291cmNlKTtcbiAgICAgICAgICAgICAgICBpZiAodGlsZVNvdXJjZUtleSBpbiBmcmFtZVN0YXRlLnVzZWRUaWxlcykge1xuICAgICAgICAgICAgICAgICAgICB0aWxlU291cmNlLmV4cGlyZUNhY2hlKGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb24sIGZyYW1lU3RhdGUudXNlZFRpbGVzW3RpbGVTb3VyY2VLZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LmJpbmQobnVsbCwgdGlsZVNvdXJjZSk7XG4gICAgICAgICAgICBmcmFtZVN0YXRlLnBvc3RSZW5kZXJGdW5jdGlvbnMucHVzaChcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLlBvc3RSZW5kZXJGdW5jdGlvbn0gKi8gKHBvc3RSZW5kZXJGdW5jdGlvbikpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCAhT2JqZWN0PHN0cmluZywgYm9vbGVhbj4+fSB1c2VkVGlsZXMgVXNlZCB0aWxlcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL1RpbGUuanMnKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS51cGRhdGVVc2VkVGlsZXMgPSBmdW5jdGlvbiAodXNlZFRpbGVzLCB0aWxlU291cmNlLCB0aWxlKSB7XG4gICAgICAgIC8vIEZJWE1FIHNob3VsZCB3ZSB1c2UgdGlsZXNUb0RyYXdCeVogaW5zdGVhZD9cbiAgICAgICAgdmFyIHRpbGVTb3VyY2VLZXkgPSBnZXRVaWQodGlsZVNvdXJjZSk7XG4gICAgICAgIGlmICghKHRpbGVTb3VyY2VLZXkgaW4gdXNlZFRpbGVzKSkge1xuICAgICAgICAgICAgdXNlZFRpbGVzW3RpbGVTb3VyY2VLZXldID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdXNlZFRpbGVzW3RpbGVTb3VyY2VLZXldW3RpbGUuZ2V0S2V5KCldID0gdHJ1ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1hbmFnZSB0aWxlIHB5cmFtaWQuXG4gICAgICogVGhpcyBmdW5jdGlvbiBwZXJmb3JtcyBhIG51bWJlciBvZiBmdW5jdGlvbnMgcmVsYXRlZCB0byB0aGUgdGlsZXMgYXQgdGhlXG4gICAgICogY3VycmVudCB6b29tIGFuZCBsb3dlciB6b29tIGxldmVsczpcbiAgICAgKiAtIHJlZ2lzdGVycyBpZGxlIHRpbGVzIGluIGZyYW1lU3RhdGUud2FudGVkVGlsZXMgc28gdGhhdCB0aGV5IGFyZSBub3RcbiAgICAgKiAgIGRpc2NhcmRlZCBieSB0aGUgdGlsZSBxdWV1ZVxuICAgICAqIC0gZW5xdWV1ZXMgbWlzc2luZyB0aWxlc1xuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlU291cmNlIFRpbGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGN1cnJlbnRaIEN1cnJlbnQgWi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcHJlbG9hZCBMb2FkIGxvdyByZXNvbHV0aW9uIHRpbGVzIHVwIHRvICdwcmVsb2FkJyBsZXZlbHMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHQpPX0gb3B0X3RpbGVDYWxsYmFjayBUaWxlIGNhbGxiYWNrLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUubWFuYWdlVGlsZVB5cmFtaWQgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSwgdGlsZVNvdXJjZSwgdGlsZUdyaWQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24sIGV4dGVudCwgY3VycmVudFosIHByZWxvYWQsIG9wdF90aWxlQ2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRpbGVTb3VyY2VLZXkgPSBnZXRVaWQodGlsZVNvdXJjZSk7XG4gICAgICAgIGlmICghKHRpbGVTb3VyY2VLZXkgaW4gZnJhbWVTdGF0ZS53YW50ZWRUaWxlcykpIHtcbiAgICAgICAgICAgIGZyYW1lU3RhdGUud2FudGVkVGlsZXNbdGlsZVNvdXJjZUtleV0gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgd2FudGVkVGlsZXMgPSBmcmFtZVN0YXRlLndhbnRlZFRpbGVzW3RpbGVTb3VyY2VLZXldO1xuICAgICAgICB2YXIgdGlsZVF1ZXVlID0gZnJhbWVTdGF0ZS50aWxlUXVldWU7XG4gICAgICAgIHZhciBtaW5ab29tID0gdGlsZUdyaWQuZ2V0TWluWm9vbSgpO1xuICAgICAgICB2YXIgdGlsZUNvdW50ID0gMDtcbiAgICAgICAgdmFyIHRpbGUsIHRpbGVSYW5nZSwgdGlsZVJlc29sdXRpb24sIHgsIHksIHo7XG4gICAgICAgIGZvciAoeiA9IG1pblpvb207IHogPD0gY3VycmVudFo7ICsreikge1xuICAgICAgICAgICAgdGlsZVJhbmdlID0gdGlsZUdyaWQuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihleHRlbnQsIHosIHRpbGVSYW5nZSk7XG4gICAgICAgICAgICB0aWxlUmVzb2x1dGlvbiA9IHRpbGVHcmlkLmdldFJlc29sdXRpb24oeik7XG4gICAgICAgICAgICBmb3IgKHggPSB0aWxlUmFuZ2UubWluWDsgeCA8PSB0aWxlUmFuZ2UubWF4WDsgKyt4KSB7XG4gICAgICAgICAgICAgICAgZm9yICh5ID0gdGlsZVJhbmdlLm1pblk7IHkgPD0gdGlsZVJhbmdlLm1heFk7ICsreSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFogLSB6IDw9IHByZWxvYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICsrdGlsZUNvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZSA9IHRpbGVTb3VyY2UuZ2V0VGlsZSh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YW50ZWRUaWxlc1t0aWxlLmdldEtleSgpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aWxlUXVldWUuaXNLZXlRdWV1ZWQodGlsZS5nZXRLZXkoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVF1ZXVlLmVucXVldWUoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVTb3VyY2VLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlR3JpZC5nZXRUaWxlQ29vcmRDZW50ZXIodGlsZS50aWxlQ29vcmQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRfdGlsZUNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRfdGlsZUNhbGxiYWNrKHRpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVNvdXJjZS51c2VUaWxlKHosIHgsIHksIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRpbGVTb3VyY2UudXBkYXRlQ2FjaGVTaXplKHRpbGVDb3VudCwgcHJvamVjdGlvbik7XG4gICAgfTtcbiAgICByZXR1cm4gQ2FudmFzVGlsZUxheWVyUmVuZGVyZXI7XG59KENhbnZhc0xheWVyUmVuZGVyZXIpKTtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi8uLi9sYXllci9UaWxlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0fVxuICovXG5DYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0TGF5ZXI7XG5leHBvcnQgZGVmYXVsdCBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVMYXllci5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL1RpbGVcbiAqL1xuaW1wb3J0IEJhc2VUaWxlTGF5ZXIgZnJvbSAnLi9CYXNlVGlsZS5qcyc7XG5pbXBvcnQgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIgZnJvbSAnLi4vcmVuZGVyZXIvY2FudmFzL1RpbGVMYXllci5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEZvciBsYXllciBzb3VyY2VzIHRoYXQgcHJvdmlkZSBwcmUtcmVuZGVyZWQsIHRpbGVkIGltYWdlcyBpbiBncmlkcyB0aGF0IGFyZVxuICogb3JnYW5pemVkIGJ5IHpvb20gbGV2ZWxzIGZvciBzcGVjaWZpYyByZXNvbHV0aW9ucy5cbiAqIE5vdGUgdGhhdCBhbnkgcHJvcGVydHkgc2V0IGluIHRoZSBvcHRpb25zIGlzIHNldCBhcyBhIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3R9XG4gKiBwcm9wZXJ0eSBvbiB0aGUgbGF5ZXIgb2JqZWN0OyBmb3IgZXhhbXBsZSwgc2V0dGluZyBgdGl0bGU6ICdNeSBUaXRsZSdgIGluIHRoZVxuICogb3B0aW9ucyBtZWFucyB0aGF0IGB0aXRsZWAgaXMgb2JzZXJ2YWJsZSwgYW5kIGhhcyBnZXQvc2V0IGFjY2Vzc29ycy5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBUaWxlTGF5ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRpbGVMYXllciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQmFzZVRpbGUuanNcIikuT3B0aW9ucz19IG9wdF9vcHRpb25zIFRpbGUgbGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlTGF5ZXIob3B0X29wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG9wdF9vcHRpb25zKSB8fCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSByZW5kZXJlciBmb3IgdGhpcyBsYXllci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9yZW5kZXJlci9MYXllci5qc1wiKS5kZWZhdWx0fSBBIGxheWVyIHJlbmRlcmVyLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBUaWxlTGF5ZXIucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IENhbnZhc1RpbGVMYXllclJlbmRlcmVyKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbGVMYXllcjtcbn0oQmFzZVRpbGVMYXllcikpO1xuZXhwb3J0IGRlZmF1bHQgVGlsZUxheWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0Jhc2VWZWN0b3JcbiAqL1xuaW1wb3J0IExheWVyIGZyb20gJy4vTGF5ZXIuanMnO1xuaW1wb3J0IFJCdXNoIGZyb20gJ3JidXNoJztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4uL29iai5qcyc7XG5pbXBvcnQgeyBjcmVhdGVEZWZhdWx0U3R5bGUsIHRvRnVuY3Rpb24gYXMgdG9TdHlsZUZ1bmN0aW9uLCB9IGZyb20gJy4uL3N0eWxlL1N0eWxlLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWxheWVyJ10gQSBDU1MgY2xhc3MgbmFtZSB0byBzZXQgdG8gdGhlIGxheWVyIGVsZW1lbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbV0gVGhlIG1pbmltdW0gdmlldyB6b29tIGxldmVsIChleGNsdXNpdmUpIGFib3ZlIHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gVGhlIG1heGltdW0gdmlldyB6b29tIGxldmVsIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcmVuZGVyLmpzXCIpLk9yZGVyRnVuY3Rpb259IFtyZW5kZXJPcmRlcl0gUmVuZGVyIG9yZGVyLiBGdW5jdGlvbiB0byBiZSB1c2VkIHdoZW4gc29ydGluZ1xuICogZmVhdHVyZXMgYmVmb3JlIHJlbmRlcmluZy4gQnkgZGVmYXVsdCBmZWF0dXJlcyBhcmUgZHJhd24gaW4gdGhlIG9yZGVyIHRoYXQgdGhleSBhcmUgY3JlYXRlZC4gVXNlXG4gKiBgbnVsbGAgdG8gYXZvaWQgdGhlIHNvcnQsIGJ1dCBnZXQgYW4gdW5kZWZpbmVkIGRyYXcgb3JkZXIuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JlbmRlckJ1ZmZlcj0xMDBdIFRoZSBidWZmZXIgaW4gcGl4ZWxzIGFyb3VuZCB0aGUgdmlld3BvcnQgZXh0ZW50IHVzZWQgYnkgdGhlXG4gKiByZW5kZXJlciB3aGVuIGdldHRpbmcgZmVhdHVyZXMgZnJvbSB0aGUgdmVjdG9yIHNvdXJjZSBmb3IgdGhlIHJlbmRlcmluZyBvciBoaXQtZGV0ZWN0aW9uLlxuICogUmVjb21tZW5kZWQgdmFsdWU6IHRoZSBzaXplIG9mIHRoZSBsYXJnZXN0IHN5bWJvbCwgbGluZSB3aWR0aCBvciBsYWJlbC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc291cmNlL1ZlY3Rvci5qc1wiKS5kZWZhdWx0fSBbc291cmNlXSBTb3VyY2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBbbWFwXSBTZXRzIHRoZSBsYXllciBhcyBvdmVybGF5IG9uIGEgbWFwLiBUaGUgbWFwIHdpbGwgbm90IG1hbmFnZVxuICogdGhpcyBsYXllciBpbiBpdHMgbGF5ZXJzIGNvbGxlY3Rpb24sIGFuZCB0aGUgbGF5ZXIgd2lsbCBiZSByZW5kZXJlZCBvbiB0b3AuIFRoaXMgaXMgdXNlZnVsIGZvclxuICogdGVtcG9yYXJ5IGxheWVycy4gVGhlIHN0YW5kYXJkIHdheSB0byBhZGQgYSBsYXllciB0byBhIG1hcCBhbmQgaGF2ZSBpdCBtYW5hZ2VkIGJ5IHRoZSBtYXAgaXMgdG9cbiAqIHVzZSB7QGxpbmsgbW9kdWxlOm9sL01hcCNhZGRMYXllcn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkZWNsdXR0ZXI9ZmFsc2VdIERlY2x1dHRlciBpbWFnZXMgYW5kIHRleHQuIERlY2x1dHRlcmluZyBpcyBhcHBsaWVkIHRvIGFsbFxuICogaW1hZ2UgYW5kIHRleHQgc3R5bGVzIG9mIGFsbCBWZWN0b3IgYW5kIFZlY3RvclRpbGUgbGF5ZXJzIHRoYXQgaGF2ZSBzZXQgdGhpcyB0byBgdHJ1ZWAuIFRoZSBwcmlvcml0eVxuICogaXMgZGVmaW5lZCBieSB0aGUgei1pbmRleCBvZiB0aGUgbGF5ZXIsIHRoZSBgekluZGV4YCBvZiB0aGUgc3R5bGUgYW5kIHRoZSByZW5kZXIgb3JkZXIgb2YgZmVhdHVyZXMuXG4gKiBIaWdoZXIgei1pbmRleCBtZWFucyBoaWdoZXIgcHJpb3JpdHkuIFdpdGhpbiB0aGUgc2FtZSB6LWluZGV4LCBhIGZlYXR1cmUgcmVuZGVyZWQgYmVmb3JlIGFub3RoZXIgaGFzXG4gKiBoaWdoZXIgcHJpb3JpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlTGlrZXxudWxsfSBbc3R5bGVdIExheWVyIHN0eWxlLiBXaGVuIHNldCB0byBgbnVsbGAsIG9ubHlcbiAqIGZlYXR1cmVzIHRoYXQgaGF2ZSB0aGVpciBvd24gc3R5bGUgd2lsbCBiZSByZW5kZXJlZC4gU2VlIHtAbGluayBtb2R1bGU6b2wvc3R5bGV9IGZvciBkZWZhdWx0IHN0eWxlXG4gKiB3aGljaCB3aWxsIGJlIHVzZWQgaWYgdGhpcyBpcyBub3Qgc2V0LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdXBkYXRlV2hpbGVBbmltYXRpbmc9ZmFsc2VdIFdoZW4gc2V0IHRvIGB0cnVlYCwgZmVhdHVyZSBiYXRjaGVzIHdpbGxcbiAqIGJlIHJlY3JlYXRlZCBkdXJpbmcgYW5pbWF0aW9ucy4gVGhpcyBtZWFucyB0aGF0IG5vIHZlY3RvcnMgd2lsbCBiZSBzaG93biBjbGlwcGVkLCBidXQgdGhlXG4gKiBzZXR0aW5nIHdpbGwgaGF2ZSBhIHBlcmZvcm1hbmNlIGltcGFjdCBmb3IgbGFyZ2UgYW1vdW50cyBvZiB2ZWN0b3IgZGF0YS4gV2hlbiBzZXQgdG8gYGZhbHNlYCxcbiAqIGJhdGNoZXMgd2lsbCBiZSByZWNyZWF0ZWQgd2hlbiBubyBhbmltYXRpb24gaXMgYWN0aXZlLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdXBkYXRlV2hpbGVJbnRlcmFjdGluZz1mYWxzZV0gV2hlbiBzZXQgdG8gYHRydWVgLCBmZWF0dXJlIGJhdGNoZXMgd2lsbFxuICogYmUgcmVjcmVhdGVkIGR1cmluZyBpbnRlcmFjdGlvbnMuIFNlZSBhbHNvIGB1cGRhdGVXaGlsZUFuaW1hdGluZ2AuXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBQcm9wZXJ0eSA9IHtcbiAgICBSRU5ERVJfT1JERVI6ICdyZW5kZXJPcmRlcicsXG59O1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBWZWN0b3IgZGF0YSB0aGF0IGlzIHJlbmRlcmVkIGNsaWVudC1zaWRlLlxuICogTm90ZSB0aGF0IGFueSBwcm9wZXJ0eSBzZXQgaW4gdGhlIG9wdGlvbnMgaXMgc2V0IGFzIGEge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdH1cbiAqIHByb3BlcnR5IG9uIHRoZSBsYXllciBvYmplY3Q7IGZvciBleGFtcGxlLCBzZXR0aW5nIGB0aXRsZTogJ015IFRpdGxlJ2AgaW4gdGhlXG4gKiBvcHRpb25zIG1lYW5zIHRoYXQgYHRpdGxlYCBpcyBvYnNlcnZhYmxlLCBhbmQgaGFzIGdldC9zZXQgYWNjZXNzb3JzLlxuICpcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vc291cmNlL1ZlY3Rvci5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL3NvdXJjZS9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9IFZlY3RvclNvdXJjZVR5cGVcbiAqIEBleHRlbmRzIHtMYXllcjxWZWN0b3JTb3VyY2VUeXBlPn1cbiAqIEBhcGlcbiAqL1xudmFyIEJhc2VWZWN0b3JMYXllciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQmFzZVZlY3RvckxheWVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQmFzZVZlY3RvckxheWVyKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgYmFzZU9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICBkZWxldGUgYmFzZU9wdGlvbnMuc3R5bGU7XG4gICAgICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5yZW5kZXJCdWZmZXI7XG4gICAgICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy51cGRhdGVXaGlsZUFuaW1hdGluZztcbiAgICAgICAgZGVsZXRlIGJhc2VPcHRpb25zLnVwZGF0ZVdoaWxlSW50ZXJhY3Rpbmc7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgYmFzZU9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRlY2x1dHRlcl8gPVxuICAgICAgICAgICAgb3B0aW9ucy5kZWNsdXR0ZXIgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZGVjbHV0dGVyIDogZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyQnVmZmVyXyA9XG4gICAgICAgICAgICBvcHRpb25zLnJlbmRlckJ1ZmZlciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yZW5kZXJCdWZmZXIgOiAxMDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVc2VyIHByb3ZpZGVkIHN0eWxlLlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVMaWtlfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3R5bGVfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0eWxlIGZ1bmN0aW9uIGZvciB1c2Ugd2l0aGluIHRoZSBsaWJyYXJ5LlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVGdW5jdGlvbnx1bmRlZmluZWR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdHlsZUZ1bmN0aW9uXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgX3RoaXMuc2V0U3R5bGUob3B0aW9ucy5zdHlsZSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVwZGF0ZVdoaWxlQW5pbWF0aW5nXyA9XG4gICAgICAgICAgICBvcHRpb25zLnVwZGF0ZVdoaWxlQW5pbWF0aW5nICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMudXBkYXRlV2hpbGVBbmltYXRpbmdcbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51cGRhdGVXaGlsZUludGVyYWN0aW5nXyA9XG4gICAgICAgICAgICBvcHRpb25zLnVwZGF0ZVdoaWxlSW50ZXJhY3RpbmcgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy51cGRhdGVXaGlsZUludGVyYWN0aW5nXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBEZWNsdXR0ZXIuXG4gICAgICovXG4gICAgQmFzZVZlY3RvckxheWVyLnByb3RvdHlwZS5nZXREZWNsdXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY2x1dHRlcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRvcG1vc3QgZmVhdHVyZSB0aGF0IGludGVyc2VjdHMgdGhlIGdpdmVuIHBpeGVsIG9uIHRoZSB2aWV3cG9ydC4gUmV0dXJucyBhIHByb21pc2VcbiAgICAgKiB0aGF0IHJlc29sdmVzIHdpdGggYW4gYXJyYXkgb2YgZmVhdHVyZXMuIFRoZSBhcnJheSB3aWxsIGVpdGhlciBjb250YWluIHRoZSB0b3Btb3N0IGZlYXR1cmVcbiAgICAgKiB3aGVuIGEgaGl0IHdhcyBkZXRlY3RlZCwgb3IgaXQgd2lsbCBiZSBlbXB0eS5cbiAgICAgKlxuICAgICAqIFRoZSBoaXQgZGV0ZWN0aW9uIGFsZ29yaXRobSB1c2VkIGZvciB0aGlzIG1ldGhvZCBpcyBvcHRpbWl6ZWQgZm9yIHBlcmZvcm1hbmNlLCBidXQgaXMgbGVzc1xuICAgICAqIGFjY3VyYXRlIHRoYW4gdGhlIG9uZSB1c2VkIGluIHtAbGluayBpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdCNnZXRGZWF0dXJlc0F0UGl4ZWx9OiBUZXh0XG4gICAgICogaXMgbm90IGNvbnNpZGVyZWQsIGFuZCBpY29ucyBhcmUgb25seSByZXByZXNlbnRlZCBieSB0aGVpciBib3VuZGluZyBib3ggaW5zdGVhZCBvZiB0aGUgZXhhY3RcbiAgICAgKiBpbWFnZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZVwiKS5kZWZhdWx0Pj59IFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGFuIGFycmF5IG9mIGZlYXR1cmVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldEZlYXR1cmVzID0gZnVuY3Rpb24gKHBpeGVsKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmdldEZlYXR1cmVzLmNhbGwodGhpcywgcGl4ZWwpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUmVuZGVyIGJ1ZmZlci5cbiAgICAgKi9cbiAgICBCYXNlVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldFJlbmRlckJ1ZmZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyQnVmZmVyXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0KTogbnVtYmVyfG51bGx8dW5kZWZpbmVkfSBSZW5kZXJcbiAgICAgKiAgICAgb3JkZXIuXG4gICAgICovXG4gICAgQmFzZVZlY3RvckxheWVyLnByb3RvdHlwZS5nZXRSZW5kZXJPcmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyLmpzXCIpLk9yZGVyRnVuY3Rpb258bnVsbHx1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5SRU5ERVJfT1JERVIpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc3R5bGUgZm9yIGZlYXR1cmVzLiAgVGhpcyByZXR1cm5zIHdoYXRldmVyIHdhcyBwYXNzZWQgdG8gdGhlIGBzdHlsZWBcbiAgICAgKiBvcHRpb24gYXQgY29uc3RydWN0aW9uIG9yIHRvIHRoZSBgc2V0U3R5bGVgIG1ldGhvZC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUxpa2V8bnVsbHx1bmRlZmluZWR9IExheWVyIHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldFN0eWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHlsZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHN0eWxlIGZ1bmN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlRnVuY3Rpb258dW5kZWZpbmVkfSBMYXllciBzdHlsZSBmdW5jdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZVZlY3RvckxheWVyLnByb3RvdHlwZS5nZXRTdHlsZUZ1bmN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHlsZUZ1bmN0aW9uXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHJlbmRlcmVkIGxheWVyIHNob3VsZCBiZSB1cGRhdGVkIHdoaWxlXG4gICAgICogICAgIGFuaW1hdGluZy5cbiAgICAgKi9cbiAgICBCYXNlVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldFVwZGF0ZVdoaWxlQW5pbWF0aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVXaGlsZUFuaW1hdGluZ187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSByZW5kZXJlZCBsYXllciBzaG91bGQgYmUgdXBkYXRlZCB3aGlsZVxuICAgICAqICAgICBpbnRlcmFjdGluZy5cbiAgICAgKi9cbiAgICBCYXNlVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldFVwZGF0ZVdoaWxlSW50ZXJhY3RpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVdoaWxlSW50ZXJhY3RpbmdfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIGRlY2x1dHRlciBpdGVtcyBmb3IgdGhpcyBsYXllclxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgQmFzZVZlY3RvckxheWVyLnByb3RvdHlwZS5yZW5kZXJEZWNsdXR0ZXIgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICBpZiAoIWZyYW1lU3RhdGUuZGVjbHV0dGVyVHJlZSkge1xuICAgICAgICAgICAgZnJhbWVTdGF0ZS5kZWNsdXR0ZXJUcmVlID0gbmV3IFJCdXNoKDkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBAdHlwZSB7Kn0gKi8gKHRoaXMuZ2V0UmVuZGVyZXIoKSkucmVuZGVyRGVjbHV0dGVyKGZyYW1lU3RhdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIuanNcIikuT3JkZXJGdW5jdGlvbnxudWxsfHVuZGVmaW5lZH0gcmVuZGVyT3JkZXJcbiAgICAgKiAgICAgUmVuZGVyIG9yZGVyLlxuICAgICAqL1xuICAgIEJhc2VWZWN0b3JMYXllci5wcm90b3R5cGUuc2V0UmVuZGVyT3JkZXIgPSBmdW5jdGlvbiAocmVuZGVyT3JkZXIpIHtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuUkVOREVSX09SREVSLCByZW5kZXJPcmRlcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHN0eWxlIGZvciBmZWF0dXJlcy4gIFRoaXMgY2FuIGJlIGEgc2luZ2xlIHN0eWxlIG9iamVjdCwgYW4gYXJyYXlcbiAgICAgKiBvZiBzdHlsZXMsIG9yIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIGZlYXR1cmUgYW5kIHJlc29sdXRpb24gYW5kIHJldHVybnNcbiAgICAgKiBhbiBhcnJheSBvZiBzdHlsZXMuIElmIHNldCB0byBgbnVsbGAsIHRoZSBsYXllciBoYXMgbm8gc3R5bGUgKGEgYG51bGxgIHN0eWxlKSxcbiAgICAgKiBzbyBvbmx5IGZlYXR1cmVzIHRoYXQgaGF2ZSB0aGVpciBvd24gc3R5bGVzIHdpbGwgYmUgcmVuZGVyZWQgaW4gdGhlIGxheWVyLiBDYWxsXG4gICAgICogYHNldFN0eWxlKClgIHdpdGhvdXQgYXJndW1lbnRzIHRvIHJlc2V0IHRvIHRoZSBkZWZhdWx0IHN0eWxlLiBTZWVcbiAgICAgKiB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlfSBmb3IgaW5mb3JtYXRpb24gb24gdGhlIGRlZmF1bHQgc3R5bGUuXG4gICAgICogQHBhcmFtIHsoaW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVMaWtlfG51bGwpPX0gb3B0X3N0eWxlIExheWVyIHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlVmVjdG9yTGF5ZXIucHJvdG90eXBlLnNldFN0eWxlID0gZnVuY3Rpb24gKG9wdF9zdHlsZSkge1xuICAgICAgICB0aGlzLnN0eWxlXyA9IG9wdF9zdHlsZSAhPT0gdW5kZWZpbmVkID8gb3B0X3N0eWxlIDogY3JlYXRlRGVmYXVsdFN0eWxlO1xuICAgICAgICB0aGlzLnN0eWxlRnVuY3Rpb25fID1cbiAgICAgICAgICAgIG9wdF9zdHlsZSA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IHRvU3R5bGVGdW5jdGlvbih0aGlzLnN0eWxlXyk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgcmV0dXJuIEJhc2VWZWN0b3JMYXllcjtcbn0oTGF5ZXIpKTtcbmV4cG9ydCBkZWZhdWx0IEJhc2VWZWN0b3JMYXllcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJhc2VWZWN0b3IuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9jYW52YXMvSW5zdHJ1Y3Rpb25cbiAqL1xuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG52YXIgSW5zdHJ1Y3Rpb24gPSB7XG4gICAgQkVHSU5fR0VPTUVUUlk6IDAsXG4gICAgQkVHSU5fUEFUSDogMSxcbiAgICBDSVJDTEU6IDIsXG4gICAgQ0xPU0VfUEFUSDogMyxcbiAgICBDVVNUT006IDQsXG4gICAgRFJBV19DSEFSUzogNSxcbiAgICBEUkFXX0lNQUdFOiA2LFxuICAgIEVORF9HRU9NRVRSWTogNyxcbiAgICBGSUxMOiA4LFxuICAgIE1PVkVfVE9fTElORV9UTzogOSxcbiAgICBTRVRfRklMTF9TVFlMRTogMTAsXG4gICAgU0VUX1NUUk9LRV9TVFlMRTogMTEsXG4gICAgU1RST0tFOiAxMixcbn07XG4vKipcbiAqIEB0eXBlIHtBcnJheTxJbnN0cnVjdGlvbj59XG4gKi9cbmV4cG9ydCB2YXIgZmlsbEluc3RydWN0aW9uID0gW0luc3RydWN0aW9uLkZJTExdO1xuLyoqXG4gKiBAdHlwZSB7QXJyYXk8SW5zdHJ1Y3Rpb24+fVxuICovXG5leHBvcnQgdmFyIHN0cm9rZUluc3RydWN0aW9uID0gW0luc3RydWN0aW9uLlNUUk9LRV07XG4vKipcbiAqIEB0eXBlIHtBcnJheTxJbnN0cnVjdGlvbj59XG4gKi9cbmV4cG9ydCB2YXIgYmVnaW5QYXRoSW5zdHJ1Y3Rpb24gPSBbSW5zdHJ1Y3Rpb24uQkVHSU5fUEFUSF07XG4vKipcbiAqIEB0eXBlIHtBcnJheTxJbnN0cnVjdGlvbj59XG4gKi9cbmV4cG9ydCB2YXIgY2xvc2VQYXRoSW5zdHJ1Y3Rpb24gPSBbSW5zdHJ1Y3Rpb24uQ0xPU0VfUEFUSF07XG5leHBvcnQgZGVmYXVsdCBJbnN0cnVjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUluc3RydWN0aW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvVmVjdG9yQ29udGV4dFxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENvbnRleHQgZm9yIGRyYXdpbmcgZ2VvbWV0cmllcy4gIEEgdmVjdG9yIGNvbnRleHQgaXMgYXZhaWxhYmxlIG9uIHJlbmRlclxuICogZXZlbnRzIGFuZCBkb2VzIG5vdCBuZWVkIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5LlxuICogQGFwaVxuICovXG52YXIgVmVjdG9yQ29udGV4dCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBWZWN0b3JDb250ZXh0KCkge1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgYSBnZW9tZXRyeSB3aXRoIGEgY3VzdG9tIHJlbmRlcmVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlbmRlcmVyIFJlbmRlcmVyLlxuICAgICAqL1xuICAgIFZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdDdXN0b20gPSBmdW5jdGlvbiAoZ2VvbWV0cnksIGZlYXR1cmUsIHJlbmRlcmVyKSB7IH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIGEgZ2VvbWV0cnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgVGhlIGdlb21ldHJ5IHRvIHJlbmRlci5cbiAgICAgKi9cbiAgICBWZWN0b3JDb250ZXh0LnByb3RvdHlwZS5kcmF3R2VvbWV0cnkgPSBmdW5jdGlvbiAoZ2VvbWV0cnkpIHsgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHJlbmRlcmluZyBzdHlsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgVGhlIHJlbmRlcmluZyBzdHlsZS5cbiAgICAgKi9cbiAgICBWZWN0b3JDb250ZXh0LnByb3RvdHlwZS5zZXRTdHlsZSA9IGZ1bmN0aW9uIChzdHlsZSkgeyB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gY2lyY2xlR2VvbWV0cnkgQ2lyY2xlIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICovXG4gICAgVmVjdG9yQ29udGV4dC5wcm90b3R5cGUuZHJhd0NpcmNsZSA9IGZ1bmN0aW9uIChjaXJjbGVHZW9tZXRyeSwgZmVhdHVyZSkgeyB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fSBzdHlsZSBTdHlsZS5cbiAgICAgKi9cbiAgICBWZWN0b3JDb250ZXh0LnByb3RvdHlwZS5kcmF3RmVhdHVyZSA9IGZ1bmN0aW9uIChmZWF0dXJlLCBzdHlsZSkgeyB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeUNvbGxlY3Rpb24uanNcIikuZGVmYXVsdH0gZ2VvbWV0cnlDb2xsZWN0aW9uR2VvbWV0cnkgR2VvbWV0cnkgY29sbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqL1xuICAgIFZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdHZW9tZXRyeUNvbGxlY3Rpb24gPSBmdW5jdGlvbiAoZ2VvbWV0cnlDb2xsZWN0aW9uR2VvbWV0cnksIGZlYXR1cmUpIHsgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBsaW5lU3RyaW5nR2VvbWV0cnkgTGluZSBzdHJpbmcgZ2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICovXG4gICAgVmVjdG9yQ29udGV4dC5wcm90b3R5cGUuZHJhd0xpbmVTdHJpbmcgPSBmdW5jdGlvbiAobGluZVN0cmluZ0dlb21ldHJ5LCBmZWF0dXJlKSB7IH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL011bHRpTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBtdWx0aUxpbmVTdHJpbmdHZW9tZXRyeSBNdWx0aUxpbmVTdHJpbmcgZ2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICovXG4gICAgVmVjdG9yQ29udGV4dC5wcm90b3R5cGUuZHJhd011bHRpTGluZVN0cmluZyA9IGZ1bmN0aW9uIChtdWx0aUxpbmVTdHJpbmdHZW9tZXRyeSwgZmVhdHVyZSkgeyB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9NdWx0aVBvaW50LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IG11bHRpUG9pbnRHZW9tZXRyeSBNdWx0aVBvaW50IGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqL1xuICAgIFZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdNdWx0aVBvaW50ID0gZnVuY3Rpb24gKG11bHRpUG9pbnRHZW9tZXRyeSwgZmVhdHVyZSkgeyB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9NdWx0aVBvbHlnb24uanNcIikuZGVmYXVsdH0gbXVsdGlQb2x5Z29uR2VvbWV0cnkgTXVsdGlQb2x5Z29uIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqL1xuICAgIFZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdNdWx0aVBvbHlnb24gPSBmdW5jdGlvbiAobXVsdGlQb2x5Z29uR2VvbWV0cnksIGZlYXR1cmUpIHsgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vUG9pbnQuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gcG9pbnRHZW9tZXRyeSBQb2ludCBnZW9tZXRyeS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKi9cbiAgICBWZWN0b3JDb250ZXh0LnByb3RvdHlwZS5kcmF3UG9pbnQgPSBmdW5jdGlvbiAocG9pbnRHZW9tZXRyeSwgZmVhdHVyZSkgeyB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IHBvbHlnb25HZW9tZXRyeSBQb2x5Z29uIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqL1xuICAgIFZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdQb2x5Z29uID0gZnVuY3Rpb24gKHBvbHlnb25HZW9tZXRyeSwgZmVhdHVyZSkgeyB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKi9cbiAgICBWZWN0b3JDb250ZXh0LnByb3RvdHlwZS5kcmF3VGV4dCA9IGZ1bmN0aW9uIChnZW9tZXRyeSwgZmVhdHVyZSkgeyB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvRmlsbC5qc1wiKS5kZWZhdWx0fSBmaWxsU3R5bGUgRmlsbCBzdHlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0cm9rZS5qc1wiKS5kZWZhdWx0fSBzdHJva2VTdHlsZSBTdHJva2Ugc3R5bGUuXG4gICAgICovXG4gICAgVmVjdG9yQ29udGV4dC5wcm90b3R5cGUuc2V0RmlsbFN0cm9rZVN0eWxlID0gZnVuY3Rpb24gKGZpbGxTdHlsZSwgc3Ryb2tlU3R5bGUpIHsgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL0ltYWdlLmpzXCIpLmRlZmF1bHR9IGltYWdlU3R5bGUgSW1hZ2Ugc3R5bGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvY2FudmFzLmpzXCIpLkRlY2x1dHRlckltYWdlV2l0aFRleHQ9fSBvcHRfZGVjbHV0dGVySW1hZ2VXaXRoVGV4dCBTaGFyZWQgZGF0YSBmb3IgY29tYmluZWQgZGVjbHV0dGVyaW5nIHdpdGggYSB0ZXh0IHN0eWxlLlxuICAgICAqL1xuICAgIFZlY3RvckNvbnRleHQucHJvdG90eXBlLnNldEltYWdlU3R5bGUgPSBmdW5jdGlvbiAoaW1hZ2VTdHlsZSwgb3B0X2RlY2x1dHRlckltYWdlV2l0aFRleHQpIHsgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1RleHQuanNcIikuZGVmYXVsdH0gdGV4dFN0eWxlIFRleHQgc3R5bGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvY2FudmFzLmpzXCIpLkRlY2x1dHRlckltYWdlV2l0aFRleHQ9fSBvcHRfZGVjbHV0dGVySW1hZ2VXaXRoVGV4dCBTaGFyZWQgZGF0YSBmb3IgY29tYmluZWQgZGVjbHV0dGVyaW5nIHdpdGggYW4gaW1hZ2Ugc3R5bGUuXG4gICAgICovXG4gICAgVmVjdG9yQ29udGV4dC5wcm90b3R5cGUuc2V0VGV4dFN0eWxlID0gZnVuY3Rpb24gKHRleHRTdHlsZSwgb3B0X2RlY2x1dHRlckltYWdlV2l0aFRleHQpIHsgfTtcbiAgICByZXR1cm4gVmVjdG9yQ29udGV4dDtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBWZWN0b3JDb250ZXh0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yQ29udGV4dC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9jYW52YXMvQnVpbGRlclxuICovXG5pbXBvcnQgQ2FudmFzSW5zdHJ1Y3Rpb24gZnJvbSAnLi9JbnN0cnVjdGlvbi5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4uLy4uL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBSZWxhdGlvbnNoaXAgZnJvbSAnLi4vLi4vZXh0ZW50L1JlbGF0aW9uc2hpcC5qcyc7XG5pbXBvcnQgVmVjdG9yQ29udGV4dCBmcm9tICcuLi9WZWN0b3JDb250ZXh0LmpzJztcbmltcG9ydCB7IGFzQ29sb3JMaWtlIH0gZnJvbSAnLi4vLi4vY29sb3JsaWtlLmpzJztcbmltcG9ydCB7IGJ1ZmZlciwgY2xvbmUsIGNvbnRhaW5zQ29vcmRpbmF0ZSwgY29vcmRpbmF0ZVJlbGF0aW9uc2hpcCwgfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZGVmYXVsdEZpbGxTdHlsZSwgZGVmYXVsdExpbmVDYXAsIGRlZmF1bHRMaW5lRGFzaCwgZGVmYXVsdExpbmVEYXNoT2Zmc2V0LCBkZWZhdWx0TGluZUpvaW4sIGRlZmF1bHRMaW5lV2lkdGgsIGRlZmF1bHRNaXRlckxpbWl0LCBkZWZhdWx0U3Ryb2tlU3R5bGUsIH0gZnJvbSAnLi4vY2FudmFzLmpzJztcbmltcG9ydCB7IGVxdWFscywgcmV2ZXJzZVN1YkFycmF5IH0gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuaW1wb3J0IHsgaW5mbGF0ZUNvb3JkaW5hdGVzLCBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheSwgaW5mbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheSwgfSBmcm9tICcuLi8uLi9nZW9tL2ZsYXQvaW5mbGF0ZS5qcyc7XG52YXIgQ2FudmFzQnVpbGRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2FudmFzQnVpbGRlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IG1heEV4dGVudCBNYXhpbXVtIGV4dGVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENhbnZhc0J1aWxkZXIodG9sZXJhbmNlLCBtYXhFeHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8pIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRvbGVyYW5jZSA9IHRvbGVyYW5jZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQGNvbnN0XG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWF4RXh0ZW50ID0gbWF4RXh0ZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxSYXRpbyA9IHBpeGVsUmF0aW87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhMaW5lV2lkdGggPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAY29uc3RcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PCo+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYmVnaW5HZW9tZXRyeUluc3RydWN0aW9uMV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PCo+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYmVnaW5HZW9tZXRyeUluc3RydWN0aW9uMl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5idWZmZXJlZE1heEV4dGVudF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8Kj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbnN0cnVjdGlvbnMgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb29yZGluYXRlcyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRtcENvb3JkaW5hdGVfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTwqPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdHJva2VTdGF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXRlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0cm9rZVN0YXRlfSAqLyAoe30pO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGRhc2hBcnJheSBEYXNoIGFycmF5LlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IERhc2ggYXJyYXkgd2l0aCBwaXhlbCByYXRpbyBhcHBsaWVkXG4gICAgICovXG4gICAgQ2FudmFzQnVpbGRlci5wcm90b3R5cGUuYXBwbHlQaXhlbFJhdGlvID0gZnVuY3Rpb24gKGRhc2hBcnJheSkge1xuICAgICAgICB2YXIgcGl4ZWxSYXRpbyA9IHRoaXMucGl4ZWxSYXRpbztcbiAgICAgICAgcmV0dXJuIHBpeGVsUmF0aW8gPT0gMVxuICAgICAgICAgICAgPyBkYXNoQXJyYXlcbiAgICAgICAgICAgIDogZGFzaEFycmF5Lm1hcChmdW5jdGlvbiAoZGFzaCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXNoICogcGl4ZWxSYXRpbztcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNeSBlbmRcbiAgICAgKi9cbiAgICBDYW52YXNCdWlsZGVyLnByb3RvdHlwZS5hcHBlbmRGbGF0UG9pbnRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChmbGF0Q29vcmRpbmF0ZXMsIHN0cmlkZSkge1xuICAgICAgICB2YXIgZXh0ZW50ID0gdGhpcy5nZXRCdWZmZXJlZE1heEV4dGVudCgpO1xuICAgICAgICB2YXIgdG1wQ29vcmQgPSB0aGlzLnRtcENvb3JkaW5hdGVfO1xuICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSB0aGlzLmNvb3JkaW5hdGVzO1xuICAgICAgICB2YXIgbXlFbmQgPSBjb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZsYXRDb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgaSArPSBzdHJpZGUpIHtcbiAgICAgICAgICAgIHRtcENvb3JkWzBdID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgICAgICAgdG1wQ29vcmRbMV0gPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgICAgICAgICAgaWYgKGNvbnRhaW5zQ29vcmRpbmF0ZShleHRlbnQsIHRtcENvb3JkKSkge1xuICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzW215RW5kKytdID0gdG1wQ29vcmRbMF07XG4gICAgICAgICAgICAgICAgY29vcmRpbmF0ZXNbbXlFbmQrK10gPSB0bXBDb29yZFsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbXlFbmQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY2xvc2VkIExhc3QgaW5wdXQgY29vcmRpbmF0ZSBlcXVhbHMgZmlyc3QuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBza2lwRmlyc3QgU2tpcCBmaXJzdCBjb29yZGluYXRlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE15IGVuZC5cbiAgICAgKi9cbiAgICBDYW52YXNCdWlsZGVyLnByb3RvdHlwZS5hcHBlbmRGbGF0TGluZUNvb3JkaW5hdGVzID0gZnVuY3Rpb24gKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgY2xvc2VkLCBza2lwRmlyc3QpIHtcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gdGhpcy5jb29yZGluYXRlcztcbiAgICAgICAgdmFyIG15RW5kID0gY29vcmRpbmF0ZXMubGVuZ3RoO1xuICAgICAgICB2YXIgZXh0ZW50ID0gdGhpcy5nZXRCdWZmZXJlZE1heEV4dGVudCgpO1xuICAgICAgICBpZiAoc2tpcEZpcnN0KSB7XG4gICAgICAgICAgICBvZmZzZXQgKz0gc3RyaWRlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsYXN0WENvb3JkID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgIHZhciBsYXN0WUNvb3JkID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgICAgICB2YXIgbmV4dENvb3JkID0gdGhpcy50bXBDb29yZGluYXRlXztcbiAgICAgICAgdmFyIHNraXBwZWQgPSB0cnVlO1xuICAgICAgICB2YXIgaSwgbGFzdFJlbCwgbmV4dFJlbDtcbiAgICAgICAgZm9yIChpID0gb2Zmc2V0ICsgc3RyaWRlOyBpIDwgZW5kOyBpICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgbmV4dENvb3JkWzBdID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgICAgICAgbmV4dENvb3JkWzFdID0gZmxhdENvb3JkaW5hdGVzW2kgKyAxXTtcbiAgICAgICAgICAgIG5leHRSZWwgPSBjb29yZGluYXRlUmVsYXRpb25zaGlwKGV4dGVudCwgbmV4dENvb3JkKTtcbiAgICAgICAgICAgIGlmIChuZXh0UmVsICE9PSBsYXN0UmVsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNraXBwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29vcmRpbmF0ZXNbbXlFbmQrK10gPSBsYXN0WENvb3JkO1xuICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlc1tteUVuZCsrXSA9IGxhc3RZQ29vcmQ7XG4gICAgICAgICAgICAgICAgICAgIHNraXBwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29vcmRpbmF0ZXNbbXlFbmQrK10gPSBuZXh0Q29vcmRbMF07XG4gICAgICAgICAgICAgICAgY29vcmRpbmF0ZXNbbXlFbmQrK10gPSBuZXh0Q29vcmRbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChuZXh0UmVsID09PSBSZWxhdGlvbnNoaXAuSU5URVJTRUNUSU5HKSB7XG4gICAgICAgICAgICAgICAgY29vcmRpbmF0ZXNbbXlFbmQrK10gPSBuZXh0Q29vcmRbMF07XG4gICAgICAgICAgICAgICAgY29vcmRpbmF0ZXNbbXlFbmQrK10gPSBuZXh0Q29vcmRbMV07XG4gICAgICAgICAgICAgICAgc2tpcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2tpcHBlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsYXN0WENvb3JkID0gbmV4dENvb3JkWzBdO1xuICAgICAgICAgICAgbGFzdFlDb29yZCA9IG5leHRDb29yZFsxXTtcbiAgICAgICAgICAgIGxhc3RSZWwgPSBuZXh0UmVsO1xuICAgICAgICB9XG4gICAgICAgIC8vIExhc3QgY29vcmRpbmF0ZSBlcXVhbHMgZmlyc3Qgb3Igb25seSBvbmUgcG9pbnQgdG8gYXBwZW5kOlxuICAgICAgICBpZiAoKGNsb3NlZCAmJiBza2lwcGVkKSB8fCBpID09PSBvZmZzZXQgKyBzdHJpZGUpIHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzW215RW5kKytdID0gbGFzdFhDb29yZDtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzW215RW5kKytdID0gbGFzdFlDb29yZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbXlFbmQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYnVpbGRlckVuZHMgQnVpbGRlciBlbmRzLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gT2Zmc2V0LlxuICAgICAqL1xuICAgIENhbnZhc0J1aWxkZXIucHJvdG90eXBlLmRyYXdDdXN0b21Db29yZGluYXRlc18gPSBmdW5jdGlvbiAoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgYnVpbGRlckVuZHMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgICAgIHZhciBidWlsZGVyRW5kID0gdGhpcy5hcHBlbmRGbGF0TGluZUNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZmFsc2UsIGZhbHNlKTtcbiAgICAgICAgICAgIGJ1aWxkZXJFbmRzLnB1c2goYnVpbGRlckVuZCk7XG4gICAgICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZW5kZXJlciBSZW5kZXJlci5cbiAgICAgKi9cbiAgICBDYW52YXNCdWlsZGVyLnByb3RvdHlwZS5kcmF3Q3VzdG9tID0gZnVuY3Rpb24gKGdlb21ldHJ5LCBmZWF0dXJlLCByZW5kZXJlcikge1xuICAgICAgICB0aGlzLmJlZ2luR2VvbWV0cnkoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICAgICAgICB2YXIgdHlwZSA9IGdlb21ldHJ5LmdldFR5cGUoKTtcbiAgICAgICAgdmFyIHN0cmlkZSA9IGdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgICAgICB2YXIgYnVpbGRlckJlZ2luID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMsIGJ1aWxkZXJFbmQsIGJ1aWxkZXJFbmRzLCBidWlsZGVyRW5kc3M7XG4gICAgICAgIHZhciBvZmZzZXQ7XG4gICAgICAgIGlmICh0eXBlID09IEdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OKSB7XG4gICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICAgIGJ1aWxkZXJFbmRzcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGVuZHNzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL011bHRpUG9seWdvbi5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldEVuZHNzKCk7XG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBteUVuZHMgPSBbXTtcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSB0aGlzLmRyYXdDdXN0b21Db29yZGluYXRlc18oZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzW2ldLCBzdHJpZGUsIG15RW5kcyk7XG4gICAgICAgICAgICAgICAgYnVpbGRlckVuZHNzLnB1c2gobXlFbmRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLkNVU1RPTSxcbiAgICAgICAgICAgICAgICBidWlsZGVyQmVnaW4sXG4gICAgICAgICAgICAgICAgYnVpbGRlckVuZHNzLFxuICAgICAgICAgICAgICAgIGdlb21ldHJ5LFxuICAgICAgICAgICAgICAgIHJlbmRlcmVyLFxuICAgICAgICAgICAgICAgIGluZmxhdGVNdWx0aUNvb3JkaW5hdGVzQXJyYXksXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlID09IEdlb21ldHJ5VHlwZS5QT0xZR09OIHx8XG4gICAgICAgICAgICB0eXBlID09IEdlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORykge1xuICAgICAgICAgICAgYnVpbGRlckVuZHMgPSBbXTtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9XG4gICAgICAgICAgICAgICAgdHlwZSA9PSBHZW9tZXRyeVR5cGUuUE9MWUdPTlxuICAgICAgICAgICAgICAgICAgICA/IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKVxuICAgICAgICAgICAgICAgICAgICA6IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgb2Zmc2V0ID0gdGhpcy5kcmF3Q3VzdG9tQ29vcmRpbmF0ZXNfKGZsYXRDb29yZGluYXRlcywgMCwgXG4gICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlMaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0RW5kcygpLCBzdHJpZGUsIGJ1aWxkZXJFbmRzKTtcbiAgICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLkNVU1RPTSxcbiAgICAgICAgICAgICAgICBidWlsZGVyQmVnaW4sXG4gICAgICAgICAgICAgICAgYnVpbGRlckVuZHMsXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnksXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIsXG4gICAgICAgICAgICAgICAgaW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXksXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlID09IEdlb21ldHJ5VHlwZS5MSU5FX1NUUklORyB8fFxuICAgICAgICAgICAgdHlwZSA9PSBHZW9tZXRyeVR5cGUuQ0lSQ0xFKSB7XG4gICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICAgIGJ1aWxkZXJFbmQgPSB0aGlzLmFwcGVuZEZsYXRMaW5lQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgICAgICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5DVVNUT00sXG4gICAgICAgICAgICAgICAgYnVpbGRlckJlZ2luLFxuICAgICAgICAgICAgICAgIGJ1aWxkZXJFbmQsXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnksXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIsXG4gICAgICAgICAgICAgICAgaW5mbGF0ZUNvb3JkaW5hdGVzLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PSBHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQpIHtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgYnVpbGRlckVuZCA9IHRoaXMuYXBwZW5kRmxhdFBvaW50Q29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBzdHJpZGUpO1xuICAgICAgICAgICAgaWYgKGJ1aWxkZXJFbmQgPiBidWlsZGVyQmVnaW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uQ1VTVE9NLFxuICAgICAgICAgICAgICAgICAgICBidWlsZGVyQmVnaW4sXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkZXJFbmQsXG4gICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LFxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlcixcbiAgICAgICAgICAgICAgICAgICAgaW5mbGF0ZUNvb3JkaW5hdGVzLFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gR2VvbWV0cnlUeXBlLlBPSU5UKSB7XG4gICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICAgIHRoaXMuY29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMF0sIGZsYXRDb29yZGluYXRlc1sxXSk7XG4gICAgICAgICAgICBidWlsZGVyRW5kID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgICAgICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5DVVNUT00sXG4gICAgICAgICAgICAgICAgYnVpbGRlckJlZ2luLFxuICAgICAgICAgICAgICAgIGJ1aWxkZXJFbmQsXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnksXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIsXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVuZEdlb21ldHJ5KGZlYXR1cmUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9HZW9tZXRyeVwiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgVGhlIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqL1xuICAgIENhbnZhc0J1aWxkZXIucHJvdG90eXBlLmJlZ2luR2VvbWV0cnkgPSBmdW5jdGlvbiAoZ2VvbWV0cnksIGZlYXR1cmUpIHtcbiAgICAgICAgdGhpcy5iZWdpbkdlb21ldHJ5SW5zdHJ1Y3Rpb24xXyA9IFtcbiAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLkJFR0lOX0dFT01FVFJZLFxuICAgICAgICAgICAgZmVhdHVyZSxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICBnZW9tZXRyeSxcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaCh0aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjFfKTtcbiAgICAgICAgdGhpcy5iZWdpbkdlb21ldHJ5SW5zdHJ1Y3Rpb24yXyA9IFtcbiAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLkJFR0lOX0dFT01FVFJZLFxuICAgICAgICAgICAgZmVhdHVyZSxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICBnZW9tZXRyeSxcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaCh0aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjJfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TZXJpYWxpemFibGVJbnN0cnVjdGlvbnN9IHRoZSBzZXJpYWxpemFibGUgaW5zdHJ1Y3Rpb25zLlxuICAgICAqL1xuICAgIENhbnZhc0J1aWxkZXIucHJvdG90eXBlLmZpbmlzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogdGhpcy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICBoaXREZXRlY3Rpb25JbnN0cnVjdGlvbnM6IHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgY29vcmRpbmF0ZXM6IHRoaXMuY29vcmRpbmF0ZXMsXG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXZlcnNlIHRoZSBoaXQgZGV0ZWN0aW9uIGluc3RydWN0aW9ucy5cbiAgICAgKi9cbiAgICBDYW52YXNCdWlsZGVyLnByb3RvdHlwZS5yZXZlcnNlSGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zID0gdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnM7XG4gICAgICAgIC8vIHN0ZXAgMSAtIHJldmVyc2UgYXJyYXlcbiAgICAgICAgaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnJldmVyc2UoKTtcbiAgICAgICAgLy8gc3RlcCAyIC0gcmV2ZXJzZSBpbnN0cnVjdGlvbnMgd2l0aGluIGdlb21ldHJ5IGJsb2Nrc1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgdmFyIG4gPSBoaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMubGVuZ3RoO1xuICAgICAgICB2YXIgaW5zdHJ1Y3Rpb247XG4gICAgICAgIHZhciB0eXBlO1xuICAgICAgICB2YXIgYmVnaW4gPSAtMTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb24gPSBoaXREZXRlY3Rpb25JbnN0cnVjdGlvbnNbaV07XG4gICAgICAgICAgICB0eXBlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0luc3RydWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovIChpbnN0cnVjdGlvblswXSk7XG4gICAgICAgICAgICBpZiAodHlwZSA9PSBDYW52YXNJbnN0cnVjdGlvbi5FTkRfR0VPTUVUUlkpIHtcbiAgICAgICAgICAgICAgICBiZWdpbiA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09IENhbnZhc0luc3RydWN0aW9uLkJFR0lOX0dFT01FVFJZKSB7XG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25bMl0gPSBpO1xuICAgICAgICAgICAgICAgIHJldmVyc2VTdWJBcnJheSh0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucywgYmVnaW4sIGkpO1xuICAgICAgICAgICAgICAgIGJlZ2luID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc3R5bGUvRmlsbC5qc1wiKS5kZWZhdWx0fSBmaWxsU3R5bGUgRmlsbCBzdHlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3N0eWxlL1N0cm9rZS5qc1wiKS5kZWZhdWx0fSBzdHJva2VTdHlsZSBTdHJva2Ugc3R5bGUuXG4gICAgICovXG4gICAgQ2FudmFzQnVpbGRlci5wcm90b3R5cGUuc2V0RmlsbFN0cm9rZVN0eWxlID0gZnVuY3Rpb24gKGZpbGxTdHlsZSwgc3Ryb2tlU3R5bGUpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgaWYgKGZpbGxTdHlsZSkge1xuICAgICAgICAgICAgdmFyIGZpbGxTdHlsZUNvbG9yID0gZmlsbFN0eWxlLmdldENvbG9yKCk7XG4gICAgICAgICAgICBzdGF0ZS5maWxsU3R5bGUgPSBhc0NvbG9yTGlrZShmaWxsU3R5bGVDb2xvciA/IGZpbGxTdHlsZUNvbG9yIDogZGVmYXVsdEZpbGxTdHlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGF0ZS5maWxsU3R5bGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0cm9rZVN0eWxlKSB7XG4gICAgICAgICAgICB2YXIgc3Ryb2tlU3R5bGVDb2xvciA9IHN0cm9rZVN0eWxlLmdldENvbG9yKCk7XG4gICAgICAgICAgICBzdGF0ZS5zdHJva2VTdHlsZSA9IGFzQ29sb3JMaWtlKHN0cm9rZVN0eWxlQ29sb3IgPyBzdHJva2VTdHlsZUNvbG9yIDogZGVmYXVsdFN0cm9rZVN0eWxlKTtcbiAgICAgICAgICAgIHZhciBzdHJva2VTdHlsZUxpbmVDYXAgPSBzdHJva2VTdHlsZS5nZXRMaW5lQ2FwKCk7XG4gICAgICAgICAgICBzdGF0ZS5saW5lQ2FwID1cbiAgICAgICAgICAgICAgICBzdHJva2VTdHlsZUxpbmVDYXAgIT09IHVuZGVmaW5lZCA/IHN0cm9rZVN0eWxlTGluZUNhcCA6IGRlZmF1bHRMaW5lQ2FwO1xuICAgICAgICAgICAgdmFyIHN0cm9rZVN0eWxlTGluZURhc2ggPSBzdHJva2VTdHlsZS5nZXRMaW5lRGFzaCgpO1xuICAgICAgICAgICAgc3RhdGUubGluZURhc2ggPSBzdHJva2VTdHlsZUxpbmVEYXNoXG4gICAgICAgICAgICAgICAgPyBzdHJva2VTdHlsZUxpbmVEYXNoLnNsaWNlKClcbiAgICAgICAgICAgICAgICA6IGRlZmF1bHRMaW5lRGFzaDtcbiAgICAgICAgICAgIHZhciBzdHJva2VTdHlsZUxpbmVEYXNoT2Zmc2V0ID0gc3Ryb2tlU3R5bGUuZ2V0TGluZURhc2hPZmZzZXQoKTtcbiAgICAgICAgICAgIHN0YXRlLmxpbmVEYXNoT2Zmc2V0ID0gc3Ryb2tlU3R5bGVMaW5lRGFzaE9mZnNldFxuICAgICAgICAgICAgICAgID8gc3Ryb2tlU3R5bGVMaW5lRGFzaE9mZnNldFxuICAgICAgICAgICAgICAgIDogZGVmYXVsdExpbmVEYXNoT2Zmc2V0O1xuICAgICAgICAgICAgdmFyIHN0cm9rZVN0eWxlTGluZUpvaW4gPSBzdHJva2VTdHlsZS5nZXRMaW5lSm9pbigpO1xuICAgICAgICAgICAgc3RhdGUubGluZUpvaW4gPVxuICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlTGluZUpvaW4gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA/IHN0cm9rZVN0eWxlTGluZUpvaW5cbiAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0TGluZUpvaW47XG4gICAgICAgICAgICB2YXIgc3Ryb2tlU3R5bGVXaWR0aCA9IHN0cm9rZVN0eWxlLmdldFdpZHRoKCk7XG4gICAgICAgICAgICBzdGF0ZS5saW5lV2lkdGggPVxuICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlV2lkdGggIT09IHVuZGVmaW5lZCA/IHN0cm9rZVN0eWxlV2lkdGggOiBkZWZhdWx0TGluZVdpZHRoO1xuICAgICAgICAgICAgdmFyIHN0cm9rZVN0eWxlTWl0ZXJMaW1pdCA9IHN0cm9rZVN0eWxlLmdldE1pdGVyTGltaXQoKTtcbiAgICAgICAgICAgIHN0YXRlLm1pdGVyTGltaXQgPVxuICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlTWl0ZXJMaW1pdCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8gc3Ryb2tlU3R5bGVNaXRlckxpbWl0XG4gICAgICAgICAgICAgICAgICAgIDogZGVmYXVsdE1pdGVyTGltaXQ7XG4gICAgICAgICAgICBpZiAoc3RhdGUubGluZVdpZHRoID4gdGhpcy5tYXhMaW5lV2lkdGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1heExpbmVXaWR0aCA9IHN0YXRlLmxpbmVXaWR0aDtcbiAgICAgICAgICAgICAgICAvLyBpbnZhbGlkYXRlIHRoZSBidWZmZXJlZCBtYXggZXh0ZW50IGNhY2hlXG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXJlZE1heEV4dGVudF8gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhdGUuc3Ryb2tlU3R5bGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBzdGF0ZS5saW5lQ2FwID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgc3RhdGUubGluZURhc2ggPSBudWxsO1xuICAgICAgICAgICAgc3RhdGUubGluZURhc2hPZmZzZXQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBzdGF0ZS5saW5lSm9pbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHN0YXRlLmxpbmVXaWR0aCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHN0YXRlLm1pdGVyTGltaXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdHJva2VTdGF0ZX0gc3RhdGUgU3RhdGUuXG4gICAgICogQHJldHVybiB7QXJyYXk8Kj59IEZpbGwgaW5zdHJ1Y3Rpb24uXG4gICAgICovXG4gICAgQ2FudmFzQnVpbGRlci5wcm90b3R5cGUuY3JlYXRlRmlsbCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgZmlsbFN0eWxlID0gc3RhdGUuZmlsbFN0eWxlO1xuICAgICAgICAvKiogQHR5cGUge0FycmF5PCo+fSAqL1xuICAgICAgICB2YXIgZmlsbEluc3RydWN0aW9uID0gW0NhbnZhc0luc3RydWN0aW9uLlNFVF9GSUxMX1NUWUxFLCBmaWxsU3R5bGVdO1xuICAgICAgICBpZiAodHlwZW9mIGZpbGxTdHlsZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIEZpbGwgaXMgYSBwYXR0ZXJuIG9yIGdyYWRpZW50IC0gYWxpZ24gaXQhXG4gICAgICAgICAgICBmaWxsSW5zdHJ1Y3Rpb24ucHVzaCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmlsbEluc3RydWN0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0cm9rZVN0YXRlfSBzdGF0ZSBTdGF0ZS5cbiAgICAgKi9cbiAgICBDYW52YXNCdWlsZGVyLnByb3RvdHlwZS5hcHBseVN0cm9rZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKHRoaXMuY3JlYXRlU3Ryb2tlKHN0YXRlKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3Ryb2tlU3RhdGV9IHN0YXRlIFN0YXRlLlxuICAgICAqIEByZXR1cm4ge0FycmF5PCo+fSBTdHJva2UgaW5zdHJ1Y3Rpb24uXG4gICAgICovXG4gICAgQ2FudmFzQnVpbGRlci5wcm90b3R5cGUuY3JlYXRlU3Ryb2tlID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5TRVRfU1RST0tFX1NUWUxFLFxuICAgICAgICAgICAgc3RhdGUuc3Ryb2tlU3R5bGUsXG4gICAgICAgICAgICBzdGF0ZS5saW5lV2lkdGggKiB0aGlzLnBpeGVsUmF0aW8sXG4gICAgICAgICAgICBzdGF0ZS5saW5lQ2FwLFxuICAgICAgICAgICAgc3RhdGUubGluZUpvaW4sXG4gICAgICAgICAgICBzdGF0ZS5taXRlckxpbWl0LFxuICAgICAgICAgICAgdGhpcy5hcHBseVBpeGVsUmF0aW8oc3RhdGUubGluZURhc2gpLFxuICAgICAgICAgICAgc3RhdGUubGluZURhc2hPZmZzZXQgKiB0aGlzLnBpeGVsUmF0aW8sXG4gICAgICAgIF07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3Ryb2tlU3RhdGV9IHN0YXRlIFN0YXRlLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczpDYW52YXNCdWlsZGVyLCBpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0cm9rZVN0YXRlKTpBcnJheTwqPn0gY3JlYXRlRmlsbCBDcmVhdGUgZmlsbC5cbiAgICAgKi9cbiAgICBDYW52YXNCdWlsZGVyLnByb3RvdHlwZS51cGRhdGVGaWxsU3R5bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGNyZWF0ZUZpbGwpIHtcbiAgICAgICAgdmFyIGZpbGxTdHlsZSA9IHN0YXRlLmZpbGxTdHlsZTtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWxsU3R5bGUgIT09ICdzdHJpbmcnIHx8IHN0YXRlLmN1cnJlbnRGaWxsU3R5bGUgIT0gZmlsbFN0eWxlKSB7XG4gICAgICAgICAgICBpZiAoZmlsbFN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKGNyZWF0ZUZpbGwuY2FsbCh0aGlzLCBzdGF0ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RhdGUuY3VycmVudEZpbGxTdHlsZSA9IGZpbGxTdHlsZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0cm9rZVN0YXRlfSBzdGF0ZSBTdGF0ZS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6Q2FudmFzQnVpbGRlciwgaW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdHJva2VTdGF0ZSk6IHZvaWR9IGFwcGx5U3Ryb2tlIEFwcGx5IHN0cm9rZS5cbiAgICAgKi9cbiAgICBDYW52YXNCdWlsZGVyLnByb3RvdHlwZS51cGRhdGVTdHJva2VTdHlsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgYXBwbHlTdHJva2UpIHtcbiAgICAgICAgdmFyIHN0cm9rZVN0eWxlID0gc3RhdGUuc3Ryb2tlU3R5bGU7XG4gICAgICAgIHZhciBsaW5lQ2FwID0gc3RhdGUubGluZUNhcDtcbiAgICAgICAgdmFyIGxpbmVEYXNoID0gc3RhdGUubGluZURhc2g7XG4gICAgICAgIHZhciBsaW5lRGFzaE9mZnNldCA9IHN0YXRlLmxpbmVEYXNoT2Zmc2V0O1xuICAgICAgICB2YXIgbGluZUpvaW4gPSBzdGF0ZS5saW5lSm9pbjtcbiAgICAgICAgdmFyIGxpbmVXaWR0aCA9IHN0YXRlLmxpbmVXaWR0aDtcbiAgICAgICAgdmFyIG1pdGVyTGltaXQgPSBzdGF0ZS5taXRlckxpbWl0O1xuICAgICAgICBpZiAoc3RhdGUuY3VycmVudFN0cm9rZVN0eWxlICE9IHN0cm9rZVN0eWxlIHx8XG4gICAgICAgICAgICBzdGF0ZS5jdXJyZW50TGluZUNhcCAhPSBsaW5lQ2FwIHx8XG4gICAgICAgICAgICAobGluZURhc2ggIT0gc3RhdGUuY3VycmVudExpbmVEYXNoICYmXG4gICAgICAgICAgICAgICAgIWVxdWFscyhzdGF0ZS5jdXJyZW50TGluZURhc2gsIGxpbmVEYXNoKSkgfHxcbiAgICAgICAgICAgIHN0YXRlLmN1cnJlbnRMaW5lRGFzaE9mZnNldCAhPSBsaW5lRGFzaE9mZnNldCB8fFxuICAgICAgICAgICAgc3RhdGUuY3VycmVudExpbmVKb2luICE9IGxpbmVKb2luIHx8XG4gICAgICAgICAgICBzdGF0ZS5jdXJyZW50TGluZVdpZHRoICE9IGxpbmVXaWR0aCB8fFxuICAgICAgICAgICAgc3RhdGUuY3VycmVudE1pdGVyTGltaXQgIT0gbWl0ZXJMaW1pdCkge1xuICAgICAgICAgICAgaWYgKHN0cm9rZVN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBhcHBseVN0cm9rZS5jYWxsKHRoaXMsIHN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0YXRlLmN1cnJlbnRTdHJva2VTdHlsZSA9IHN0cm9rZVN0eWxlO1xuICAgICAgICAgICAgc3RhdGUuY3VycmVudExpbmVDYXAgPSBsaW5lQ2FwO1xuICAgICAgICAgICAgc3RhdGUuY3VycmVudExpbmVEYXNoID0gbGluZURhc2g7XG4gICAgICAgICAgICBzdGF0ZS5jdXJyZW50TGluZURhc2hPZmZzZXQgPSBsaW5lRGFzaE9mZnNldDtcbiAgICAgICAgICAgIHN0YXRlLmN1cnJlbnRMaW5lSm9pbiA9IGxpbmVKb2luO1xuICAgICAgICAgICAgc3RhdGUuY3VycmVudExpbmVXaWR0aCA9IGxpbmVXaWR0aDtcbiAgICAgICAgICAgIHN0YXRlLmN1cnJlbnRNaXRlckxpbWl0ID0gbWl0ZXJMaW1pdDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICovXG4gICAgQ2FudmFzQnVpbGRlci5wcm90b3R5cGUuZW5kR2VvbWV0cnkgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICB0aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjFfWzJdID0gdGhpcy5pbnN0cnVjdGlvbnMubGVuZ3RoO1xuICAgICAgICB0aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjFfID0gbnVsbDtcbiAgICAgICAgdGhpcy5iZWdpbkdlb21ldHJ5SW5zdHJ1Y3Rpb24yX1syXSA9IHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLmxlbmd0aDtcbiAgICAgICAgdGhpcy5iZWdpbkdlb21ldHJ5SW5zdHJ1Y3Rpb24yXyA9IG51bGw7XG4gICAgICAgIHZhciBlbmRHZW9tZXRyeUluc3RydWN0aW9uID0gW0NhbnZhc0luc3RydWN0aW9uLkVORF9HRU9NRVRSWSwgZmVhdHVyZV07XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goZW5kR2VvbWV0cnlJbnN0cnVjdGlvbik7XG4gICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goZW5kR2VvbWV0cnlJbnN0cnVjdGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGJ1ZmZlcmVkIHJlbmRlcmluZyBleHRlbnQuICBSZW5kZXJpbmcgd2lsbCBiZSBjbGlwcGVkIHRvIHRoZSBleHRlbnRcbiAgICAgKiBwcm92aWRlZCB0byB0aGUgY29uc3RydWN0b3IuICBUbyBhY2NvdW50IGZvciBzeW1ib2xpemVycyB0aGF0IG1heSBpbnRlcnNlY3RcbiAgICAgKiB0aGlzIGV4dGVudCwgd2UgY2FsY3VsYXRlIGEgYnVmZmVyZWQgZXh0ZW50IChlLmcuIGJhc2VkIG9uIHN0cm9rZSB3aWR0aCkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gVGhlIGJ1ZmZlcmVkIHJlbmRlcmluZyBleHRlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENhbnZhc0J1aWxkZXIucHJvdG90eXBlLmdldEJ1ZmZlcmVkTWF4RXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuYnVmZmVyZWRNYXhFeHRlbnRfKSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlcmVkTWF4RXh0ZW50XyA9IGNsb25lKHRoaXMubWF4RXh0ZW50KTtcbiAgICAgICAgICAgIGlmICh0aGlzLm1heExpbmVXaWR0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSAodGhpcy5yZXNvbHV0aW9uICogKHRoaXMubWF4TGluZVdpZHRoICsgMSkpIC8gMjtcbiAgICAgICAgICAgICAgICBidWZmZXIodGhpcy5idWZmZXJlZE1heEV4dGVudF8sIHdpZHRoLCB0aGlzLmJ1ZmZlcmVkTWF4RXh0ZW50Xyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyZWRNYXhFeHRlbnRfO1xuICAgIH07XG4gICAgcmV0dXJuIENhbnZhc0J1aWxkZXI7XG59KFZlY3RvckNvbnRleHQpKTtcbmV4cG9ydCBkZWZhdWx0IENhbnZhc0J1aWxkZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1CdWlsZGVyLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhcy9JbWFnZUJ1aWxkZXJcbiAqL1xuaW1wb3J0IENhbnZhc0J1aWxkZXIgZnJvbSAnLi9CdWlsZGVyLmpzJztcbmltcG9ydCBDYW52YXNJbnN0cnVjdGlvbiBmcm9tICcuL0luc3RydWN0aW9uLmpzJztcbnZhciBDYW52YXNJbWFnZUJ1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENhbnZhc0ltYWdlQnVpbGRlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IG1heEV4dGVudCBNYXhpbXVtIGV4dGVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENhbnZhc0ltYWdlQnVpbGRlcih0b2xlcmFuY2UsIG1heEV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0b2xlcmFuY2UsIG1heEV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5oaXREZXRlY3Rpb25JbWFnZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlUGl4ZWxSYXRpb18gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFuY2hvclhfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmNob3JZXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGVpZ2h0XyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3BhY2l0eV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9yaWdpblhfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vcmlnaW5ZXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJvdGF0ZVdpdGhWaWV3XyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucm90YXRpb25fID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3NpemUuanNcIikuU2l6ZXx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zY2FsZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLndpZHRoXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERhdGEgc2hhcmVkIHdpdGggYSB0ZXh0IGJ1aWxkZXIgZm9yIGNvbWJpbmVkIGRlY2x1dHRlcmluZy5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5EZWNsdXR0ZXJJbWFnZVdpdGhUZXh0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGVjbHV0dGVySW1hZ2VXaXRoVGV4dF8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9nZW9tL1BvaW50LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBwb2ludEdlb21ldHJ5IFBvaW50IGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqL1xuICAgIENhbnZhc0ltYWdlQnVpbGRlci5wcm90b3R5cGUuZHJhd1BvaW50ID0gZnVuY3Rpb24gKHBvaW50R2VvbWV0cnksIGZlYXR1cmUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmltYWdlXykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmVnaW5HZW9tZXRyeShwb2ludEdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHBvaW50R2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIHZhciBzdHJpZGUgPSBwb2ludEdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgICAgICB2YXIgbXlCZWdpbiA9IHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO1xuICAgICAgICB2YXIgbXlFbmQgPSB0aGlzLmFwcGVuZEZsYXRQb2ludENvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgc3RyaWRlKTtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5EUkFXX0lNQUdFLFxuICAgICAgICAgICAgbXlCZWdpbixcbiAgICAgICAgICAgIG15RW5kLFxuICAgICAgICAgICAgdGhpcy5pbWFnZV8sXG4gICAgICAgICAgICAvLyBSZW1haW5pbmcgYXJndW1lbnRzIHRvIERSQVdfSU1BR0UgYXJlIGluIGFscGhhYmV0aWNhbCBvcmRlclxuICAgICAgICAgICAgdGhpcy5hbmNob3JYXyAqIHRoaXMuaW1hZ2VQaXhlbFJhdGlvXyxcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yWV8gKiB0aGlzLmltYWdlUGl4ZWxSYXRpb18sXG4gICAgICAgICAgICBNYXRoLmNlaWwodGhpcy5oZWlnaHRfICogdGhpcy5pbWFnZVBpeGVsUmF0aW9fKSxcbiAgICAgICAgICAgIHRoaXMub3BhY2l0eV8sXG4gICAgICAgICAgICB0aGlzLm9yaWdpblhfLFxuICAgICAgICAgICAgdGhpcy5vcmlnaW5ZXyxcbiAgICAgICAgICAgIHRoaXMucm90YXRlV2l0aFZpZXdfLFxuICAgICAgICAgICAgdGhpcy5yb3RhdGlvbl8sXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgKHRoaXMuc2NhbGVfWzBdICogdGhpcy5waXhlbFJhdGlvKSAvIHRoaXMuaW1hZ2VQaXhlbFJhdGlvXyxcbiAgICAgICAgICAgICAgICAodGhpcy5zY2FsZV9bMV0gKiB0aGlzLnBpeGVsUmF0aW8pIC8gdGhpcy5pbWFnZVBpeGVsUmF0aW9fLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIE1hdGguY2VpbCh0aGlzLndpZHRoXyAqIHRoaXMuaW1hZ2VQaXhlbFJhdGlvXyksXG4gICAgICAgICAgICB0aGlzLmRlY2x1dHRlckltYWdlV2l0aFRleHRfLFxuICAgICAgICBdKTtcbiAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5EUkFXX0lNQUdFLFxuICAgICAgICAgICAgbXlCZWdpbixcbiAgICAgICAgICAgIG15RW5kLFxuICAgICAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbWFnZV8sXG4gICAgICAgICAgICAvLyBSZW1haW5pbmcgYXJndW1lbnRzIHRvIERSQVdfSU1BR0UgYXJlIGluIGFscGhhYmV0aWNhbCBvcmRlclxuICAgICAgICAgICAgdGhpcy5hbmNob3JYXyxcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yWV8sXG4gICAgICAgICAgICB0aGlzLmhlaWdodF8sXG4gICAgICAgICAgICB0aGlzLm9wYWNpdHlfLFxuICAgICAgICAgICAgdGhpcy5vcmlnaW5YXyxcbiAgICAgICAgICAgIHRoaXMub3JpZ2luWV8sXG4gICAgICAgICAgICB0aGlzLnJvdGF0ZVdpdGhWaWV3XyxcbiAgICAgICAgICAgIHRoaXMucm90YXRpb25fLFxuICAgICAgICAgICAgdGhpcy5zY2FsZV8sXG4gICAgICAgICAgICB0aGlzLndpZHRoXyxcbiAgICAgICAgICAgIHRoaXMuZGVjbHV0dGVySW1hZ2VXaXRoVGV4dF8sXG4gICAgICAgIF0pO1xuICAgICAgICB0aGlzLmVuZEdlb21ldHJ5KGZlYXR1cmUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9nZW9tL011bHRpUG9pbnQuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IG11bHRpUG9pbnRHZW9tZXRyeSBNdWx0aVBvaW50IGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqL1xuICAgIENhbnZhc0ltYWdlQnVpbGRlci5wcm90b3R5cGUuZHJhd011bHRpUG9pbnQgPSBmdW5jdGlvbiAobXVsdGlQb2ludEdlb21ldHJ5LCBmZWF0dXJlKSB7XG4gICAgICAgIGlmICghdGhpcy5pbWFnZV8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJlZ2luR2VvbWV0cnkobXVsdGlQb2ludEdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IG11bHRpUG9pbnRHZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgdmFyIHN0cmlkZSA9IG11bHRpUG9pbnRHZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICAgICAgdmFyIG15QmVnaW4gPSB0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgICAgdmFyIG15RW5kID0gdGhpcy5hcHBlbmRGbGF0UG9pbnRDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIHN0cmlkZSk7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uRFJBV19JTUFHRSxcbiAgICAgICAgICAgIG15QmVnaW4sXG4gICAgICAgICAgICBteUVuZCxcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VfLFxuICAgICAgICAgICAgLy8gUmVtYWluaW5nIGFyZ3VtZW50cyB0byBEUkFXX0lNQUdFIGFyZSBpbiBhbHBoYWJldGljYWwgb3JkZXJcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yWF8gKiB0aGlzLmltYWdlUGl4ZWxSYXRpb18sXG4gICAgICAgICAgICB0aGlzLmFuY2hvcllfICogdGhpcy5pbWFnZVBpeGVsUmF0aW9fLFxuICAgICAgICAgICAgTWF0aC5jZWlsKHRoaXMuaGVpZ2h0XyAqIHRoaXMuaW1hZ2VQaXhlbFJhdGlvXyksXG4gICAgICAgICAgICB0aGlzLm9wYWNpdHlfLFxuICAgICAgICAgICAgdGhpcy5vcmlnaW5YXyxcbiAgICAgICAgICAgIHRoaXMub3JpZ2luWV8sXG4gICAgICAgICAgICB0aGlzLnJvdGF0ZVdpdGhWaWV3XyxcbiAgICAgICAgICAgIHRoaXMucm90YXRpb25fLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICh0aGlzLnNjYWxlX1swXSAqIHRoaXMucGl4ZWxSYXRpbykgLyB0aGlzLmltYWdlUGl4ZWxSYXRpb18sXG4gICAgICAgICAgICAgICAgKHRoaXMuc2NhbGVfWzFdICogdGhpcy5waXhlbFJhdGlvKSAvIHRoaXMuaW1hZ2VQaXhlbFJhdGlvXyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBNYXRoLmNlaWwodGhpcy53aWR0aF8gKiB0aGlzLmltYWdlUGl4ZWxSYXRpb18pLFxuICAgICAgICAgICAgdGhpcy5kZWNsdXR0ZXJJbWFnZVdpdGhUZXh0XyxcbiAgICAgICAgXSk7XG4gICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uRFJBV19JTUFHRSxcbiAgICAgICAgICAgIG15QmVnaW4sXG4gICAgICAgICAgICBteUVuZCxcbiAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VfLFxuICAgICAgICAgICAgLy8gUmVtYWluaW5nIGFyZ3VtZW50cyB0byBEUkFXX0lNQUdFIGFyZSBpbiBhbHBoYWJldGljYWwgb3JkZXJcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yWF8sXG4gICAgICAgICAgICB0aGlzLmFuY2hvcllfLFxuICAgICAgICAgICAgdGhpcy5oZWlnaHRfLFxuICAgICAgICAgICAgdGhpcy5vcGFjaXR5XyxcbiAgICAgICAgICAgIHRoaXMub3JpZ2luWF8sXG4gICAgICAgICAgICB0aGlzLm9yaWdpbllfLFxuICAgICAgICAgICAgdGhpcy5yb3RhdGVXaXRoVmlld18sXG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uXyxcbiAgICAgICAgICAgIHRoaXMuc2NhbGVfLFxuICAgICAgICAgICAgdGhpcy53aWR0aF8sXG4gICAgICAgICAgICB0aGlzLmRlY2x1dHRlckltYWdlV2l0aFRleHRfLFxuICAgICAgICBdKTtcbiAgICAgICAgdGhpcy5lbmRHZW9tZXRyeShmZWF0dXJlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TZXJpYWxpemFibGVJbnN0cnVjdGlvbnN9IHRoZSBzZXJpYWxpemFibGUgaW5zdHJ1Y3Rpb25zLlxuICAgICAqL1xuICAgIENhbnZhc0ltYWdlQnVpbGRlci5wcm90b3R5cGUuZmluaXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJldmVyc2VIaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMoKTtcbiAgICAgICAgLy8gRklYTUUgdGhpcyBkb2Vzbid0IHJlYWxseSBwcm90ZWN0IHVzIGFnYWluc3QgZnVydGhlciBjYWxscyB0byBkcmF3Kkdlb21ldHJ5XG4gICAgICAgIHRoaXMuYW5jaG9yWF8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuYW5jaG9yWV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VfID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbWFnZV8gPSBudWxsO1xuICAgICAgICB0aGlzLmltYWdlUGl4ZWxSYXRpb18gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaGVpZ2h0XyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zY2FsZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMub3BhY2l0eV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMub3JpZ2luWF8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMub3JpZ2luWV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucm90YXRlV2l0aFZpZXdfID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnJvdGF0aW9uXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy53aWR0aF8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmZpbmlzaC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zdHlsZS9JbWFnZS5qc1wiKS5kZWZhdWx0fSBpbWFnZVN0eWxlIEltYWdlIHN0eWxlLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X3NoYXJlZERhdGEgU2hhcmVkIGRhdGEuXG4gICAgICovXG4gICAgQ2FudmFzSW1hZ2VCdWlsZGVyLnByb3RvdHlwZS5zZXRJbWFnZVN0eWxlID0gZnVuY3Rpb24gKGltYWdlU3R5bGUsIG9wdF9zaGFyZWREYXRhKSB7XG4gICAgICAgIHZhciBhbmNob3IgPSBpbWFnZVN0eWxlLmdldEFuY2hvcigpO1xuICAgICAgICB2YXIgc2l6ZSA9IGltYWdlU3R5bGUuZ2V0U2l6ZSgpO1xuICAgICAgICB2YXIgaGl0RGV0ZWN0aW9uSW1hZ2UgPSBpbWFnZVN0eWxlLmdldEhpdERldGVjdGlvbkltYWdlKCk7XG4gICAgICAgIHZhciBpbWFnZSA9IGltYWdlU3R5bGUuZ2V0SW1hZ2UodGhpcy5waXhlbFJhdGlvKTtcbiAgICAgICAgdmFyIG9yaWdpbiA9IGltYWdlU3R5bGUuZ2V0T3JpZ2luKCk7XG4gICAgICAgIHRoaXMuaW1hZ2VQaXhlbFJhdGlvXyA9IGltYWdlU3R5bGUuZ2V0UGl4ZWxSYXRpbyh0aGlzLnBpeGVsUmF0aW8pO1xuICAgICAgICB0aGlzLmFuY2hvclhfID0gYW5jaG9yWzBdO1xuICAgICAgICB0aGlzLmFuY2hvcllfID0gYW5jaG9yWzFdO1xuICAgICAgICB0aGlzLmhpdERldGVjdGlvbkltYWdlXyA9IGhpdERldGVjdGlvbkltYWdlO1xuICAgICAgICB0aGlzLmltYWdlXyA9IGltYWdlO1xuICAgICAgICB0aGlzLmhlaWdodF8gPSBzaXplWzFdO1xuICAgICAgICB0aGlzLm9wYWNpdHlfID0gaW1hZ2VTdHlsZS5nZXRPcGFjaXR5KCk7XG4gICAgICAgIHRoaXMub3JpZ2luWF8gPSBvcmlnaW5bMF07XG4gICAgICAgIHRoaXMub3JpZ2luWV8gPSBvcmlnaW5bMV07XG4gICAgICAgIHRoaXMucm90YXRlV2l0aFZpZXdfID0gaW1hZ2VTdHlsZS5nZXRSb3RhdGVXaXRoVmlldygpO1xuICAgICAgICB0aGlzLnJvdGF0aW9uXyA9IGltYWdlU3R5bGUuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgdGhpcy5zY2FsZV8gPSBpbWFnZVN0eWxlLmdldFNjYWxlQXJyYXkoKTtcbiAgICAgICAgdGhpcy53aWR0aF8gPSBzaXplWzBdO1xuICAgICAgICB0aGlzLmRlY2x1dHRlckltYWdlV2l0aFRleHRfID0gb3B0X3NoYXJlZERhdGE7XG4gICAgfTtcbiAgICByZXR1cm4gQ2FudmFzSW1hZ2VCdWlsZGVyO1xufShDYW52YXNCdWlsZGVyKSk7XG5leHBvcnQgZGVmYXVsdCBDYW52YXNJbWFnZUJ1aWxkZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZUJ1aWxkZXIuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvY2FudmFzL0xpbmVTdHJpbmdCdWlsZGVyXG4gKi9cbmltcG9ydCBDYW52YXNCdWlsZGVyIGZyb20gJy4vQnVpbGRlci5qcyc7XG5pbXBvcnQgQ2FudmFzSW5zdHJ1Y3Rpb24sIHsgYmVnaW5QYXRoSW5zdHJ1Y3Rpb24sIHN0cm9rZUluc3RydWN0aW9uLCB9IGZyb20gJy4vSW5zdHJ1Y3Rpb24uanMnO1xudmFyIENhbnZhc0xpbmVTdHJpbmdCdWlsZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDYW52YXNMaW5lU3RyaW5nQnVpbGRlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IG1heEV4dGVudCBNYXhpbXVtIGV4dGVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENhbnZhc0xpbmVTdHJpbmdCdWlsZGVyKHRvbGVyYW5jZSwgbWF4RXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCB0b2xlcmFuY2UsIG1heEV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbykgfHwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEByZXR1cm4ge251bWJlcn0gZW5kLlxuICAgICAqL1xuICAgIENhbnZhc0xpbmVTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5kcmF3RmxhdENvb3JkaW5hdGVzXyA9IGZ1bmN0aW9uIChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgICAgICAgdmFyIG15QmVnaW4gPSB0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgICAgdmFyIG15RW5kID0gdGhpcy5hcHBlbmRGbGF0TGluZUNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZmFsc2UsIGZhbHNlKTtcbiAgICAgICAgdmFyIG1vdmVUb0xpbmVUb0luc3RydWN0aW9uID0gW1xuICAgICAgICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uTU9WRV9UT19MSU5FX1RPLFxuICAgICAgICAgICAgbXlCZWdpbixcbiAgICAgICAgICAgIG15RW5kLFxuICAgICAgICBdO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKG1vdmVUb0xpbmVUb0luc3RydWN0aW9uKTtcbiAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChtb3ZlVG9MaW5lVG9JbnN0cnVjdGlvbik7XG4gICAgICAgIHJldHVybiBlbmQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gbGluZVN0cmluZ0dlb21ldHJ5IExpbmUgc3RyaW5nIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqL1xuICAgIENhbnZhc0xpbmVTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5kcmF3TGluZVN0cmluZyA9IGZ1bmN0aW9uIChsaW5lU3RyaW5nR2VvbWV0cnksIGZlYXR1cmUpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgdmFyIHN0cm9rZVN0eWxlID0gc3RhdGUuc3Ryb2tlU3R5bGU7XG4gICAgICAgIHZhciBsaW5lV2lkdGggPSBzdGF0ZS5saW5lV2lkdGg7XG4gICAgICAgIGlmIChzdHJva2VTdHlsZSA9PT0gdW5kZWZpbmVkIHx8IGxpbmVXaWR0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVTdHJva2VTdHlsZShzdGF0ZSwgdGhpcy5hcHBseVN0cm9rZSk7XG4gICAgICAgIHRoaXMuYmVnaW5HZW9tZXRyeShsaW5lU3RyaW5nR2VvbWV0cnksIGZlYXR1cmUpO1xuICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLlNFVF9TVFJPS0VfU1RZTEUsXG4gICAgICAgICAgICBzdGF0ZS5zdHJva2VTdHlsZSxcbiAgICAgICAgICAgIHN0YXRlLmxpbmVXaWR0aCxcbiAgICAgICAgICAgIHN0YXRlLmxpbmVDYXAsXG4gICAgICAgICAgICBzdGF0ZS5saW5lSm9pbixcbiAgICAgICAgICAgIHN0YXRlLm1pdGVyTGltaXQsXG4gICAgICAgICAgICBzdGF0ZS5saW5lRGFzaCxcbiAgICAgICAgICAgIHN0YXRlLmxpbmVEYXNoT2Zmc2V0LFxuICAgICAgICBdLCBiZWdpblBhdGhJbnN0cnVjdGlvbik7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBsaW5lU3RyaW5nR2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIHZhciBzdHJpZGUgPSBsaW5lU3RyaW5nR2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICAgIHRoaXMuZHJhd0ZsYXRDb29yZGluYXRlc18oZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUpO1xuICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKHN0cm9rZUluc3RydWN0aW9uKTtcbiAgICAgICAgdGhpcy5lbmRHZW9tZXRyeShmZWF0dXJlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aUxpbmVTdHJpbmcuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IG11bHRpTGluZVN0cmluZ0dlb21ldHJ5IE11bHRpTGluZVN0cmluZyBnZW9tZXRyeS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKi9cbiAgICBDYW52YXNMaW5lU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZHJhd011bHRpTGluZVN0cmluZyA9IGZ1bmN0aW9uIChtdWx0aUxpbmVTdHJpbmdHZW9tZXRyeSwgZmVhdHVyZSkge1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgICAgICB2YXIgc3Ryb2tlU3R5bGUgPSBzdGF0ZS5zdHJva2VTdHlsZTtcbiAgICAgICAgdmFyIGxpbmVXaWR0aCA9IHN0YXRlLmxpbmVXaWR0aDtcbiAgICAgICAgaWYgKHN0cm9rZVN0eWxlID09PSB1bmRlZmluZWQgfHwgbGluZVdpZHRoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVN0cm9rZVN0eWxlKHN0YXRlLCB0aGlzLmFwcGx5U3Ryb2tlKTtcbiAgICAgICAgdGhpcy5iZWdpbkdlb21ldHJ5KG11bHRpTGluZVN0cmluZ0dlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5TRVRfU1RST0tFX1NUWUxFLFxuICAgICAgICAgICAgc3RhdGUuc3Ryb2tlU3R5bGUsXG4gICAgICAgICAgICBzdGF0ZS5saW5lV2lkdGgsXG4gICAgICAgICAgICBzdGF0ZS5saW5lQ2FwLFxuICAgICAgICAgICAgc3RhdGUubGluZUpvaW4sXG4gICAgICAgICAgICBzdGF0ZS5taXRlckxpbWl0LFxuICAgICAgICAgICAgc3RhdGUubGluZURhc2gsXG4gICAgICAgICAgICBzdGF0ZS5saW5lRGFzaE9mZnNldCxcbiAgICAgICAgXSwgYmVnaW5QYXRoSW5zdHJ1Y3Rpb24pO1xuICAgICAgICB2YXIgZW5kcyA9IG11bHRpTGluZVN0cmluZ0dlb21ldHJ5LmdldEVuZHMoKTtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IG11bHRpTGluZVN0cmluZ0dlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICB2YXIgc3RyaWRlID0gbXVsdGlMaW5lU3RyaW5nR2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IHRoaXMuZHJhd0ZsYXRDb29yZGluYXRlc18oZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovIChlbmRzW2ldKSwgc3RyaWRlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKHN0cm9rZUluc3RydWN0aW9uKTtcbiAgICAgICAgdGhpcy5lbmRHZW9tZXRyeShmZWF0dXJlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TZXJpYWxpemFibGVJbnN0cnVjdGlvbnN9IHRoZSBzZXJpYWxpemFibGUgaW5zdHJ1Y3Rpb25zLlxuICAgICAqL1xuICAgIENhbnZhc0xpbmVTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5maW5pc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGlmIChzdGF0ZS5sYXN0U3Ryb2tlICE9IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc3RhdGUubGFzdFN0cm9rZSAhPSB0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChzdHJva2VJbnN0cnVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXZlcnNlSGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBudWxsO1xuICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5maW5pc2guY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdHJva2VTdGF0ZX0gc3RhdGUgU3RhdGUuXG4gICAgICovXG4gICAgQ2FudmFzTGluZVN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGx5U3Ryb2tlID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIGlmIChzdGF0ZS5sYXN0U3Ryb2tlICE9IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc3RhdGUubGFzdFN0cm9rZSAhPSB0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChzdHJva2VJbnN0cnVjdGlvbik7XG4gICAgICAgICAgICBzdGF0ZS5sYXN0U3Ryb2tlID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUubGFzdFN0cm9rZSA9IDA7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuYXBwbHlTdHJva2UuY2FsbCh0aGlzLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goYmVnaW5QYXRoSW5zdHJ1Y3Rpb24pO1xuICAgIH07XG4gICAgcmV0dXJuIENhbnZhc0xpbmVTdHJpbmdCdWlsZGVyO1xufShDYW52YXNCdWlsZGVyKSk7XG5leHBvcnQgZGVmYXVsdCBDYW52YXNMaW5lU3RyaW5nQnVpbGRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxpbmVTdHJpbmdCdWlsZGVyLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhcy9Qb2x5Z29uQnVpbGRlclxuICovXG5pbXBvcnQgQ2FudmFzQnVpbGRlciBmcm9tICcuL0J1aWxkZXIuanMnO1xuaW1wb3J0IENhbnZhc0luc3RydWN0aW9uLCB7IGJlZ2luUGF0aEluc3RydWN0aW9uLCBjbG9zZVBhdGhJbnN0cnVjdGlvbiwgZmlsbEluc3RydWN0aW9uLCBzdHJva2VJbnN0cnVjdGlvbiwgfSBmcm9tICcuL0luc3RydWN0aW9uLmpzJztcbmltcG9ydCB7IGRlZmF1bHRGaWxsU3R5bGUgfSBmcm9tICcuLi9jYW52YXMuanMnO1xuaW1wb3J0IHsgc25hcCB9IGZyb20gJy4uLy4uL2dlb20vZmxhdC9zaW1wbGlmeS5qcyc7XG52YXIgQ2FudmFzUG9seWdvbkJ1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENhbnZhc1BvbHlnb25CdWlsZGVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gbWF4RXh0ZW50IE1heGltdW0gZXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ2FudmFzUG9seWdvbkJ1aWxkZXIodG9sZXJhbmNlLCBtYXhFeHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8pIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHRvbGVyYW5jZSwgbWF4RXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvKSB8fCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBFbmQuXG4gICAgICovXG4gICAgQ2FudmFzUG9seWdvbkJ1aWxkZXIucHJvdG90eXBlLmRyYXdGbGF0Q29vcmRpbmF0ZXNzXyA9IGZ1bmN0aW9uIChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIHZhciBmaWxsID0gc3RhdGUuZmlsbFN0eWxlICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBzdHJva2UgPSBzdGF0ZS5zdHJva2VTdHlsZSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgbnVtRW5kcyA9IGVuZHMubGVuZ3RoO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKGJlZ2luUGF0aEluc3RydWN0aW9uKTtcbiAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChiZWdpblBhdGhJbnN0cnVjdGlvbik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtRW5kczsgKytpKSB7XG4gICAgICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgICAgIHZhciBteUJlZ2luID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgbXlFbmQgPSB0aGlzLmFwcGVuZEZsYXRMaW5lQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB0cnVlLCAhc3Ryb2tlKTtcbiAgICAgICAgICAgIHZhciBtb3ZlVG9MaW5lVG9JbnN0cnVjdGlvbiA9IFtcbiAgICAgICAgICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5NT1ZFX1RPX0xJTkVfVE8sXG4gICAgICAgICAgICAgICAgbXlCZWdpbixcbiAgICAgICAgICAgICAgICBteUVuZCxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKG1vdmVUb0xpbmVUb0luc3RydWN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2gobW92ZVRvTGluZVRvSW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgaWYgKHN0cm9rZSkge1xuICAgICAgICAgICAgICAgIC8vIFBlcmZvcm1hbmNlIG9wdGltaXphdGlvbjogb25seSBjYWxsIGNsb3NlUGF0aCgpIHdoZW4gd2UgaGF2ZSBhIHN0cm9rZS5cbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgdGhlIHJpbmcgaXMgY2xvc2VkIGFscmVhZHkgKHNlZSBhcHBlbmRGbGF0TGluZUNvb3JkaW5hdGVzIGFib3ZlKS5cbiAgICAgICAgICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKGNsb3NlUGF0aEluc3RydWN0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKGNsb3NlUGF0aEluc3RydWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlsbCkge1xuICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChmaWxsSW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChmaWxsSW5zdHJ1Y3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdHJva2UpIHtcbiAgICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goc3Ryb2tlSW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChzdHJva2VJbnN0cnVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gY2lyY2xlR2VvbWV0cnkgQ2lyY2xlIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICovXG4gICAgQ2FudmFzUG9seWdvbkJ1aWxkZXIucHJvdG90eXBlLmRyYXdDaXJjbGUgPSBmdW5jdGlvbiAoY2lyY2xlR2VvbWV0cnksIGZlYXR1cmUpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgdmFyIGZpbGxTdHlsZSA9IHN0YXRlLmZpbGxTdHlsZTtcbiAgICAgICAgdmFyIHN0cm9rZVN0eWxlID0gc3RhdGUuc3Ryb2tlU3R5bGU7XG4gICAgICAgIGlmIChmaWxsU3R5bGUgPT09IHVuZGVmaW5lZCAmJiBzdHJva2VTdHlsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRGaWxsU3Ryb2tlU3R5bGVzXygpO1xuICAgICAgICB0aGlzLmJlZ2luR2VvbWV0cnkoY2lyY2xlR2VvbWV0cnksIGZlYXR1cmUpO1xuICAgICAgICBpZiAoc3RhdGUuZmlsbFN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLlNFVF9GSUxMX1NUWUxFLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRGaWxsU3R5bGUsXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUuc3Ryb2tlU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgICAgICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uU0VUX1NUUk9LRV9TVFlMRSxcbiAgICAgICAgICAgICAgICBzdGF0ZS5zdHJva2VTdHlsZSxcbiAgICAgICAgICAgICAgICBzdGF0ZS5saW5lV2lkdGgsXG4gICAgICAgICAgICAgICAgc3RhdGUubGluZUNhcCxcbiAgICAgICAgICAgICAgICBzdGF0ZS5saW5lSm9pbixcbiAgICAgICAgICAgICAgICBzdGF0ZS5taXRlckxpbWl0LFxuICAgICAgICAgICAgICAgIHN0YXRlLmxpbmVEYXNoLFxuICAgICAgICAgICAgICAgIHN0YXRlLmxpbmVEYXNoT2Zmc2V0LFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IGNpcmNsZUdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICB2YXIgc3RyaWRlID0gY2lyY2xlR2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICAgIHZhciBteUJlZ2luID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuYXBwZW5kRmxhdExpbmVDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSwgZmFsc2UsIGZhbHNlKTtcbiAgICAgICAgdmFyIGNpcmNsZUluc3RydWN0aW9uID0gW0NhbnZhc0luc3RydWN0aW9uLkNJUkNMRSwgbXlCZWdpbl07XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goYmVnaW5QYXRoSW5zdHJ1Y3Rpb24sIGNpcmNsZUluc3RydWN0aW9uKTtcbiAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChiZWdpblBhdGhJbnN0cnVjdGlvbiwgY2lyY2xlSW5zdHJ1Y3Rpb24pO1xuICAgICAgICBpZiAoc3RhdGUuZmlsbFN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goZmlsbEluc3RydWN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goZmlsbEluc3RydWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUuc3Ryb2tlU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChzdHJva2VJbnN0cnVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKHN0cm9rZUluc3RydWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVuZEdlb21ldHJ5KGZlYXR1cmUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IHBvbHlnb25HZW9tZXRyeSBQb2x5Z29uIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqL1xuICAgIENhbnZhc1BvbHlnb25CdWlsZGVyLnByb3RvdHlwZS5kcmF3UG9seWdvbiA9IGZ1bmN0aW9uIChwb2x5Z29uR2VvbWV0cnksIGZlYXR1cmUpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgdmFyIGZpbGxTdHlsZSA9IHN0YXRlLmZpbGxTdHlsZTtcbiAgICAgICAgdmFyIHN0cm9rZVN0eWxlID0gc3RhdGUuc3Ryb2tlU3R5bGU7XG4gICAgICAgIGlmIChmaWxsU3R5bGUgPT09IHVuZGVmaW5lZCAmJiBzdHJva2VTdHlsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRGaWxsU3Ryb2tlU3R5bGVzXygpO1xuICAgICAgICB0aGlzLmJlZ2luR2VvbWV0cnkocG9seWdvbkdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICAgICAgaWYgKHN0YXRlLmZpbGxTdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgICAgICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5TRVRfRklMTF9TVFlMRSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0RmlsbFN0eWxlLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlLnN0cm9rZVN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLlNFVF9TVFJPS0VfU1RZTEUsXG4gICAgICAgICAgICAgICAgc3RhdGUuc3Ryb2tlU3R5bGUsXG4gICAgICAgICAgICAgICAgc3RhdGUubGluZVdpZHRoLFxuICAgICAgICAgICAgICAgIHN0YXRlLmxpbmVDYXAsXG4gICAgICAgICAgICAgICAgc3RhdGUubGluZUpvaW4sXG4gICAgICAgICAgICAgICAgc3RhdGUubWl0ZXJMaW1pdCxcbiAgICAgICAgICAgICAgICBzdGF0ZS5saW5lRGFzaCxcbiAgICAgICAgICAgICAgICBzdGF0ZS5saW5lRGFzaE9mZnNldCxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbmRzID0gcG9seWdvbkdlb21ldHJ5LmdldEVuZHMoKTtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHBvbHlnb25HZW9tZXRyeS5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICB2YXIgc3RyaWRlID0gcG9seWdvbkdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgICAgICB0aGlzLmRyYXdGbGF0Q29vcmRpbmF0ZXNzXyhmbGF0Q29vcmRpbmF0ZXMsIDAsIFxuICAgICAgICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovIChlbmRzKSwgc3RyaWRlKTtcbiAgICAgICAgdGhpcy5lbmRHZW9tZXRyeShmZWF0dXJlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aVBvbHlnb24uanNcIikuZGVmYXVsdH0gbXVsdGlQb2x5Z29uR2VvbWV0cnkgTXVsdGlQb2x5Z29uIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqL1xuICAgIENhbnZhc1BvbHlnb25CdWlsZGVyLnByb3RvdHlwZS5kcmF3TXVsdGlQb2x5Z29uID0gZnVuY3Rpb24gKG11bHRpUG9seWdvbkdlb21ldHJ5LCBmZWF0dXJlKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIHZhciBmaWxsU3R5bGUgPSBzdGF0ZS5maWxsU3R5bGU7XG4gICAgICAgIHZhciBzdHJva2VTdHlsZSA9IHN0YXRlLnN0cm9rZVN0eWxlO1xuICAgICAgICBpZiAoZmlsbFN0eWxlID09PSB1bmRlZmluZWQgJiYgc3Ryb2tlU3R5bGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0RmlsbFN0cm9rZVN0eWxlc18oKTtcbiAgICAgICAgdGhpcy5iZWdpbkdlb21ldHJ5KG11bHRpUG9seWdvbkdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICAgICAgaWYgKHN0YXRlLmZpbGxTdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgICAgICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5TRVRfRklMTF9TVFlMRSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0RmlsbFN0eWxlLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlLnN0cm9rZVN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLlNFVF9TVFJPS0VfU1RZTEUsXG4gICAgICAgICAgICAgICAgc3RhdGUuc3Ryb2tlU3R5bGUsXG4gICAgICAgICAgICAgICAgc3RhdGUubGluZVdpZHRoLFxuICAgICAgICAgICAgICAgIHN0YXRlLmxpbmVDYXAsXG4gICAgICAgICAgICAgICAgc3RhdGUubGluZUpvaW4sXG4gICAgICAgICAgICAgICAgc3RhdGUubWl0ZXJMaW1pdCxcbiAgICAgICAgICAgICAgICBzdGF0ZS5saW5lRGFzaCxcbiAgICAgICAgICAgICAgICBzdGF0ZS5saW5lRGFzaE9mZnNldCxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbmRzcyA9IG11bHRpUG9seWdvbkdlb21ldHJ5LmdldEVuZHNzKCk7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBtdWx0aVBvbHlnb25HZW9tZXRyeS5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICB2YXIgc3RyaWRlID0gbXVsdGlQb2x5Z29uR2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSB0aGlzLmRyYXdGbGF0Q29vcmRpbmF0ZXNzXyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3NbaV0sIHN0cmlkZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmRHZW9tZXRyeShmZWF0dXJlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TZXJpYWxpemFibGVJbnN0cnVjdGlvbnN9IHRoZSBzZXJpYWxpemFibGUgaW5zdHJ1Y3Rpb25zLlxuICAgICAqL1xuICAgIENhbnZhc1BvbHlnb25CdWlsZGVyLnByb3RvdHlwZS5maW5pc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmV2ZXJzZUhpdERldGVjdGlvbkluc3RydWN0aW9ucygpO1xuICAgICAgICB0aGlzLnN0YXRlID0gbnVsbDtcbiAgICAgICAgLy8gV2Ugd2FudCB0byBwcmVzZXJ2ZSB0b3BvbG9neSB3aGVuIGRyYXdpbmcgcG9seWdvbnMuICBQb2x5Z29ucyBhcmVcbiAgICAgICAgLy8gc2ltcGxpZmllZCB1c2luZyBxdWFudGl6YXRpb24gYW5kIHBvaW50IGVsaW1pbmF0aW9uLiBIb3dldmVyLCB3ZSBtaWdodFxuICAgICAgICAvLyBoYXZlIHJlY2VpdmVkIGEgbWl4IG9mIHF1YW50aXplZCBhbmQgbm9uLXF1YW50aXplZCBnZW9tZXRyaWVzLCBzbyBlbnN1cmVcbiAgICAgICAgLy8gdGhhdCBhbGwgYXJlIHF1YW50aXplZCBieSBxdWFudGl6aW5nIGFsbCBjb29yZGluYXRlcyBpbiB0aGUgYmF0Y2guXG4gICAgICAgIHZhciB0b2xlcmFuY2UgPSB0aGlzLnRvbGVyYW5jZTtcbiAgICAgICAgaWYgKHRvbGVyYW5jZSAhPT0gMCkge1xuICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gdGhpcy5jb29yZGluYXRlcztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjb29yZGluYXRlc1tpXSA9IHNuYXAoY29vcmRpbmF0ZXNbaV0sIHRvbGVyYW5jZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZmluaXNoLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIENhbnZhc1BvbHlnb25CdWlsZGVyLnByb3RvdHlwZS5zZXRGaWxsU3Ryb2tlU3R5bGVzXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgdmFyIGZpbGxTdHlsZSA9IHN0YXRlLmZpbGxTdHlsZTtcbiAgICAgICAgaWYgKGZpbGxTdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbGxTdHlsZShzdGF0ZSwgdGhpcy5jcmVhdGVGaWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUuc3Ryb2tlU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdHJva2VTdHlsZShzdGF0ZSwgdGhpcy5hcHBseVN0cm9rZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBDYW52YXNQb2x5Z29uQnVpbGRlcjtcbn0oQ2FudmFzQnVpbGRlcikpO1xuZXhwb3J0IGRlZmF1bHQgQ2FudmFzUG9seWdvbkJ1aWxkZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb2x5Z29uQnVpbGRlci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3N0cmFpZ2h0Y2h1bmtcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4QW5nbGUgTWF4aW11bSBhY2NlcHRhYmxlIGFuZ2xlIGRlbHRhIGJldHdlZW4gc2VnbWVudHMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gU3RhcnQgYW5kIGVuZCBvZiB0aGUgZmlyc3Qgc3VpdGFibGUgY2h1bmsgb2YgdGhlXG4gKiBnaXZlbiBgZmxhdENvb3JkaW5hdGVzYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoaW5nQ2h1bmsobWF4QW5nbGUsIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIHZhciBjaHVua1N0YXJ0ID0gb2Zmc2V0O1xuICAgIHZhciBjaHVua0VuZCA9IG9mZnNldDtcbiAgICB2YXIgY2h1bmtNID0gMDtcbiAgICB2YXIgbSA9IDA7XG4gICAgdmFyIHN0YXJ0ID0gb2Zmc2V0O1xuICAgIHZhciBhY29zLCBpLCBtMTIsIG0yMywgeDEsIHkxLCB4MTIsIHkxMiwgeDIzLCB5MjM7XG4gICAgZm9yIChpID0gb2Zmc2V0OyBpIDwgZW5kOyBpICs9IHN0cmlkZSkge1xuICAgICAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbaV07XG4gICAgICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tpICsgMV07XG4gICAgICAgIGlmICh4MSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB4MjMgPSB4MiAtIHgxO1xuICAgICAgICAgICAgeTIzID0geTIgLSB5MTtcbiAgICAgICAgICAgIG0yMyA9IE1hdGguc3FydCh4MjMgKiB4MjMgKyB5MjMgKiB5MjMpO1xuICAgICAgICAgICAgaWYgKHgxMiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbSArPSBtMTI7XG4gICAgICAgICAgICAgICAgYWNvcyA9IE1hdGguYWNvcygoeDEyICogeDIzICsgeTEyICogeTIzKSAvIChtMTIgKiBtMjMpKTtcbiAgICAgICAgICAgICAgICBpZiAoYWNvcyA+IG1heEFuZ2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtID4gY2h1bmtNKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVua00gPSBtO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtTdGFydCA9IHN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtFbmQgPSBpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG0gPSAwO1xuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IGkgLSBzdHJpZGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbTEyID0gbTIzO1xuICAgICAgICAgICAgeDEyID0geDIzO1xuICAgICAgICAgICAgeTEyID0geTIzO1xuICAgICAgICB9XG4gICAgICAgIHgxID0geDI7XG4gICAgICAgIHkxID0geTI7XG4gICAgfVxuICAgIG0gKz0gbTIzO1xuICAgIHJldHVybiBtID4gY2h1bmtNID8gW3N0YXJ0LCBpXSA6IFtjaHVua1N0YXJ0LCBjaHVua0VuZF07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdHJhaWdodGNodW5rLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhcy9UZXh0QnVpbGRlclxuICovXG5pbXBvcnQgQ2FudmFzQnVpbGRlciBmcm9tICcuL0J1aWxkZXIuanMnO1xuaW1wb3J0IENhbnZhc0luc3RydWN0aW9uIGZyb20gJy4vSW5zdHJ1Y3Rpb24uanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuLi8uLi9nZW9tL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgVGV4dFBsYWNlbWVudCBmcm9tICcuLi8uLi9zdHlsZS9UZXh0UGxhY2VtZW50LmpzJztcbmltcG9ydCB7IGFzQ29sb3JMaWtlIH0gZnJvbSAnLi4vLi4vY29sb3JsaWtlLmpzJztcbmltcG9ydCB7IGRlZmF1bHRGaWxsU3R5bGUsIGRlZmF1bHRGb250LCBkZWZhdWx0TGluZUNhcCwgZGVmYXVsdExpbmVEYXNoLCBkZWZhdWx0TGluZURhc2hPZmZzZXQsIGRlZmF1bHRMaW5lSm9pbiwgZGVmYXVsdExpbmVXaWR0aCwgZGVmYXVsdE1pdGVyTGltaXQsIGRlZmF1bHRQYWRkaW5nLCBkZWZhdWx0U3Ryb2tlU3R5bGUsIGRlZmF1bHRUZXh0QWxpZ24sIGRlZmF1bHRUZXh0QmFzZWxpbmUsIHJlZ2lzdGVyRm9udCwgfSBmcm9tICcuLi9jYW52YXMuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi4vLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBpbnRlcnNlY3RzIH0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IG1hdGNoaW5nQ2h1bmsgfSBmcm9tICcuLi8uLi9nZW9tL2ZsYXQvc3RyYWlnaHRjaHVuay5qcyc7XG4vKipcbiAqIEBjb25zdFxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBURVhUX0FMSUdOID0ge1xuICAgICdsZWZ0JzogMCxcbiAgICAnZW5kJzogMCxcbiAgICAnY2VudGVyJzogMC41LFxuICAgICdyaWdodCc6IDEsXG4gICAgJ3N0YXJ0JzogMSxcbiAgICAndG9wJzogMCxcbiAgICAnbWlkZGxlJzogMC41LFxuICAgICdoYW5naW5nJzogMC4yLFxuICAgICdhbHBoYWJldGljJzogMC44LFxuICAgICdpZGVvZ3JhcGhpYyc6IDAuOCxcbiAgICAnYm90dG9tJzogMSxcbn07XG52YXIgQ2FudmFzVGV4dEJ1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENhbnZhc1RleHRCdWlsZGVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gbWF4RXh0ZW50IE1heGltdW0gZXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ2FudmFzVGV4dEJ1aWxkZXIodG9sZXJhbmNlLCBtYXhFeHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8pIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdG9sZXJhbmNlLCBtYXhFeHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8SFRNTENhbnZhc0VsZW1lbnQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFiZWxzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGV4dF8gPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50ZXh0T2Zmc2V0WF8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRleHRPZmZzZXRZXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50ZXh0Um90YXRlV2l0aFZpZXdfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRleHRSb3RhdGlvbl8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0YXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGV4dEZpbGxTdGF0ZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0YXRlPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZpbGxTdGF0ZXMgPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlN0cm9rZVN0YXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGV4dFN0cm9rZVN0YXRlXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TdHJva2VTdGF0ZT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdHJva2VTdGF0ZXMgPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuVGV4dFN0YXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGV4dFN0YXRlXyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlRleHRTdGF0ZX0gKi8gKHt9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlRleHRTdGF0ZT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50ZXh0U3RhdGVzID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGV4dEtleV8gPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5maWxsS2V5XyA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0cm9rZUtleV8gPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERhdGEgc2hhcmVkIHdpdGggYW4gaW1hZ2UgYnVpbGRlciBmb3IgY29tYmluZWQgZGVjbHV0dGVyaW5nLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckltYWdlV2l0aFRleHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kZWNsdXR0ZXJJbWFnZVdpdGhUZXh0XyA9IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuU2VyaWFsaXphYmxlSW5zdHJ1Y3Rpb25zfSB0aGUgc2VyaWFsaXphYmxlIGluc3RydWN0aW9ucy5cbiAgICAgKi9cbiAgICBDYW52YXNUZXh0QnVpbGRlci5wcm90b3R5cGUuZmluaXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaW5zdHJ1Y3Rpb25zID0gX3N1cGVyLnByb3RvdHlwZS5maW5pc2guY2FsbCh0aGlzKTtcbiAgICAgICAgaW5zdHJ1Y3Rpb25zLnRleHRTdGF0ZXMgPSB0aGlzLnRleHRTdGF0ZXM7XG4gICAgICAgIGluc3RydWN0aW9ucy5maWxsU3RhdGVzID0gdGhpcy5maWxsU3RhdGVzO1xuICAgICAgICBpbnN0cnVjdGlvbnMuc3Ryb2tlU3RhdGVzID0gdGhpcy5zdHJva2VTdGF0ZXM7XG4gICAgICAgIHJldHVybiBpbnN0cnVjdGlvbnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqL1xuICAgIENhbnZhc1RleHRCdWlsZGVyLnByb3RvdHlwZS5kcmF3VGV4dCA9IGZ1bmN0aW9uIChnZW9tZXRyeSwgZmVhdHVyZSkge1xuICAgICAgICB2YXIgZmlsbFN0YXRlID0gdGhpcy50ZXh0RmlsbFN0YXRlXztcbiAgICAgICAgdmFyIHN0cm9rZVN0YXRlID0gdGhpcy50ZXh0U3Ryb2tlU3RhdGVfO1xuICAgICAgICB2YXIgdGV4dFN0YXRlID0gdGhpcy50ZXh0U3RhdGVfO1xuICAgICAgICBpZiAodGhpcy50ZXh0XyA9PT0gJycgfHwgIXRleHRTdGF0ZSB8fCAoIWZpbGxTdGF0ZSAmJiAhc3Ryb2tlU3RhdGUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gdGhpcy5jb29yZGluYXRlcztcbiAgICAgICAgdmFyIGJlZ2luID0gY29vcmRpbmF0ZXMubGVuZ3RoO1xuICAgICAgICB2YXIgZ2VvbWV0cnlUeXBlID0gZ2VvbWV0cnkuZ2V0VHlwZSgpO1xuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gbnVsbDtcbiAgICAgICAgdmFyIHN0cmlkZSA9IGdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgICAgICBpZiAodGV4dFN0YXRlLnBsYWNlbWVudCA9PT0gVGV4dFBsYWNlbWVudC5MSU5FICYmXG4gICAgICAgICAgICAoZ2VvbWV0cnlUeXBlID09IEdlb21ldHJ5VHlwZS5MSU5FX1NUUklORyB8fFxuICAgICAgICAgICAgICAgIGdlb21ldHJ5VHlwZSA9PSBHZW9tZXRyeVR5cGUuTVVMVElfTElORV9TVFJJTkcgfHxcbiAgICAgICAgICAgICAgICBnZW9tZXRyeVR5cGUgPT0gR2VvbWV0cnlUeXBlLlBPTFlHT04gfHxcbiAgICAgICAgICAgICAgICBnZW9tZXRyeVR5cGUgPT0gR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT04pKSB7XG4gICAgICAgICAgICBpZiAoIWludGVyc2VjdHModGhpcy5nZXRCdWZmZXJlZE1heEV4dGVudCgpLCBnZW9tZXRyeS5nZXRFeHRlbnQoKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZW5kcyA9IHZvaWQgMDtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgaWYgKGdlb21ldHJ5VHlwZSA9PSBHZW9tZXRyeVR5cGUuTElORV9TVFJJTkcpIHtcbiAgICAgICAgICAgICAgICBlbmRzID0gW2ZsYXRDb29yZGluYXRlcy5sZW5ndGhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZ2VvbWV0cnlUeXBlID09IEdlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORykge1xuICAgICAgICAgICAgICAgIGVuZHMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlMaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0RW5kcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZ2VvbWV0cnlUeXBlID09IEdlb21ldHJ5VHlwZS5QT0xZR09OKSB7XG4gICAgICAgICAgICAgICAgZW5kcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSlcbiAgICAgICAgICAgICAgICAgICAgLmdldEVuZHMoKVxuICAgICAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChnZW9tZXRyeVR5cGUgPT0gR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT04pIHtcbiAgICAgICAgICAgICAgICB2YXIgZW5kc3MgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0RW5kc3MoKTtcbiAgICAgICAgICAgICAgICBlbmRzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBlbmRzLnB1c2goZW5kc3NbaV1bMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYmVnaW5HZW9tZXRyeShnZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgICAgICAgICB2YXIgdGV4dEFsaWduID0gdGV4dFN0YXRlLnRleHRBbGlnbjtcbiAgICAgICAgICAgIHZhciBmbGF0T2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIHZhciBmbGF0RW5kID0gdm9pZCAwO1xuICAgICAgICAgICAgZm9yICh2YXIgbyA9IDAsIG9vID0gZW5kcy5sZW5ndGg7IG8gPCBvbzsgKytvKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRleHRBbGlnbiA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJhbmdlID0gbWF0Y2hpbmdDaHVuayh0ZXh0U3RhdGUubWF4QW5nbGUsIGZsYXRDb29yZGluYXRlcywgZmxhdE9mZnNldCwgZW5kc1tvXSwgc3RyaWRlKTtcbiAgICAgICAgICAgICAgICAgICAgZmxhdE9mZnNldCA9IHJhbmdlWzBdO1xuICAgICAgICAgICAgICAgICAgICBmbGF0RW5kID0gcmFuZ2VbMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmbGF0RW5kID0gZW5kc1tvXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGZsYXRPZmZzZXQ7IGkgPCBmbGF0RW5kOyBpICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlcy5wdXNoKGZsYXRDb29yZGluYXRlc1tpXSwgZmxhdENvb3JkaW5hdGVzW2kgKyAxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBjb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZmxhdE9mZnNldCA9IGVuZHNbb107XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3Q2hhcnNfKGJlZ2luLCBlbmQpO1xuICAgICAgICAgICAgICAgIGJlZ2luID0gZW5kO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbmRHZW9tZXRyeShmZWF0dXJlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBnZW9tZXRyeVdpZHRocyA9IHRleHRTdGF0ZS5vdmVyZmxvdyA/IG51bGwgOiBbXTtcbiAgICAgICAgICAgIHN3aXRjaCAoZ2VvbWV0cnlUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuUE9JTlQ6XG4gICAgICAgICAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6XG4gICAgICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aVBvaW50LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldEZsYXRNaWRwb2ludCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5DSVJDTEU6XG4gICAgICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDZW50ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfTElORV9TVFJJTkc6XG4gICAgICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aUxpbmVTdHJpbmcuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRGbGF0TWlkcG9pbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgIHN0cmlkZSA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLlBPTFlHT046XG4gICAgICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0RmxhdEludGVyaW9yUG9pbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXh0U3RhdGUub3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5V2lkdGhzLnB1c2goZmxhdENvb3JkaW5hdGVzWzJdIC8gdGhpcy5yZXNvbHV0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdHJpZGUgPSAzO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OOlxuICAgICAgICAgICAgICAgICAgICB2YXIgaW50ZXJpb3JQb2ludHMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0RmxhdEludGVyaW9yUG9pbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnRlcmlvclBvaW50cy5sZW5ndGg7IGkgPCBpaTsgaSArPSAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRleHRTdGF0ZS5vdmVyZmxvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5V2lkdGhzLnB1c2goaW50ZXJpb3JQb2ludHNbaSArIDJdIC8gdGhpcy5yZXNvbHV0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcy5wdXNoKGludGVyaW9yUG9pbnRzW2ldLCBpbnRlcmlvclBvaW50c1tpICsgMV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RyaWRlID0gMjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlbmQgPSB0aGlzLmFwcGVuZEZsYXRQb2ludENvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgc3RyaWRlKTtcbiAgICAgICAgICAgIGlmIChlbmQgPT09IGJlZ2luKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zYXZlVGV4dFN0YXRlc18oKTtcbiAgICAgICAgICAgIGlmICh0ZXh0U3RhdGUuYmFja2dyb3VuZEZpbGwgfHwgdGV4dFN0YXRlLmJhY2tncm91bmRTdHJva2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEZpbGxTdHJva2VTdHlsZSh0ZXh0U3RhdGUuYmFja2dyb3VuZEZpbGwsIHRleHRTdGF0ZS5iYWNrZ3JvdW5kU3Ryb2tlKTtcbiAgICAgICAgICAgICAgICBpZiAodGV4dFN0YXRlLmJhY2tncm91bmRGaWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsbFN0eWxlKHRoaXMuc3RhdGUsIHRoaXMuY3JlYXRlRmlsbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2godGhpcy5jcmVhdGVGaWxsKHRoaXMuc3RhdGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRleHRTdGF0ZS5iYWNrZ3JvdW5kU3Ryb2tlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3Ryb2tlU3R5bGUodGhpcy5zdGF0ZSwgdGhpcy5hcHBseVN0cm9rZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2godGhpcy5jcmVhdGVTdHJva2UodGhpcy5zdGF0ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYmVnaW5HZW9tZXRyeShnZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgICAgICAgICAvLyBhZGp1c3QgcGFkZGluZyBmb3IgbmVnYXRpdmUgc2NhbGVcbiAgICAgICAgICAgIHZhciBwYWRkaW5nID0gdGV4dFN0YXRlLnBhZGRpbmc7XG4gICAgICAgICAgICBpZiAocGFkZGluZyAhPSBkZWZhdWx0UGFkZGluZyAmJlxuICAgICAgICAgICAgICAgICh0ZXh0U3RhdGUuc2NhbGVbMF0gPCAwIHx8IHRleHRTdGF0ZS5zY2FsZVsxXSA8IDApKSB7XG4gICAgICAgICAgICAgICAgdmFyIHAwID0gdGV4dFN0YXRlLnBhZGRpbmdbMF07XG4gICAgICAgICAgICAgICAgdmFyIHAxID0gdGV4dFN0YXRlLnBhZGRpbmdbMV07XG4gICAgICAgICAgICAgICAgdmFyIHAyID0gdGV4dFN0YXRlLnBhZGRpbmdbMl07XG4gICAgICAgICAgICAgICAgdmFyIHAzID0gdGV4dFN0YXRlLnBhZGRpbmdbM107XG4gICAgICAgICAgICAgICAgaWYgKHRleHRTdGF0ZS5zY2FsZVswXSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcDEgPSAtcDE7XG4gICAgICAgICAgICAgICAgICAgIHAzID0gLXAzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGV4dFN0YXRlLnNjYWxlWzFdIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBwMCA9IC1wMDtcbiAgICAgICAgICAgICAgICAgICAgcDIgPSAtcDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhZGRpbmcgPSBbcDAsIHAxLCBwMiwgcDNdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhlIGltYWdlIGlzIHVua25vd24gYXQgdGhpcyBzdGFnZSBzbyB3ZSBwYXNzIG51bGw7IGl0IHdpbGwgYmUgY29tcHV0ZWQgYXQgcmVuZGVyIHRpbWUuXG4gICAgICAgICAgICAvLyBGb3IgY2xhcml0eSwgd2UgcGFzcyBOYU4gZm9yIG9mZnNldFgsIG9mZnNldFksIHdpZHRoIGFuZCBoZWlnaHQsIHdoaWNoIHdpbGwgYmUgY29tcHV0ZWQgYXRcbiAgICAgICAgICAgIC8vIHJlbmRlciB0aW1lLlxuICAgICAgICAgICAgdmFyIHBpeGVsUmF0aW9fMSA9IHRoaXMucGl4ZWxSYXRpbztcbiAgICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLkRSQVdfSU1BR0UsXG4gICAgICAgICAgICAgICAgYmVnaW4sXG4gICAgICAgICAgICAgICAgZW5kLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgTmFOLFxuICAgICAgICAgICAgICAgIE5hTixcbiAgICAgICAgICAgICAgICBOYU4sXG4gICAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0Um90YXRlV2l0aFZpZXdfLFxuICAgICAgICAgICAgICAgIHRoaXMudGV4dFJvdGF0aW9uXyxcbiAgICAgICAgICAgICAgICBbMSwgMV0sXG4gICAgICAgICAgICAgICAgTmFOLFxuICAgICAgICAgICAgICAgIHRoaXMuZGVjbHV0dGVySW1hZ2VXaXRoVGV4dF8sXG4gICAgICAgICAgICAgICAgcGFkZGluZyA9PSBkZWZhdWx0UGFkZGluZ1xuICAgICAgICAgICAgICAgICAgICA/IGRlZmF1bHRQYWRkaW5nXG4gICAgICAgICAgICAgICAgICAgIDogcGFkZGluZy5tYXAoZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwICogcGl4ZWxSYXRpb18xO1xuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAhIXRleHRTdGF0ZS5iYWNrZ3JvdW5kRmlsbCxcbiAgICAgICAgICAgICAgICAhIXRleHRTdGF0ZS5iYWNrZ3JvdW5kU3Ryb2tlLFxuICAgICAgICAgICAgICAgIHRoaXMudGV4dF8sXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0S2V5XyxcbiAgICAgICAgICAgICAgICB0aGlzLnN0cm9rZUtleV8sXG4gICAgICAgICAgICAgICAgdGhpcy5maWxsS2V5XyxcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRPZmZzZXRYXyxcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRPZmZzZXRZXyxcbiAgICAgICAgICAgICAgICBnZW9tZXRyeVdpZHRocyxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgdmFyIHNjYWxlID0gMSAvIHBpeGVsUmF0aW9fMTtcbiAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLkRSQVdfSU1BR0UsXG4gICAgICAgICAgICAgICAgYmVnaW4sXG4gICAgICAgICAgICAgICAgZW5kLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgTmFOLFxuICAgICAgICAgICAgICAgIE5hTixcbiAgICAgICAgICAgICAgICBOYU4sXG4gICAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0Um90YXRlV2l0aFZpZXdfLFxuICAgICAgICAgICAgICAgIHRoaXMudGV4dFJvdGF0aW9uXyxcbiAgICAgICAgICAgICAgICBbc2NhbGUsIHNjYWxlXSxcbiAgICAgICAgICAgICAgICBOYU4sXG4gICAgICAgICAgICAgICAgdGhpcy5kZWNsdXR0ZXJJbWFnZVdpdGhUZXh0XyxcbiAgICAgICAgICAgICAgICBwYWRkaW5nLFxuICAgICAgICAgICAgICAgICEhdGV4dFN0YXRlLmJhY2tncm91bmRGaWxsLFxuICAgICAgICAgICAgICAgICEhdGV4dFN0YXRlLmJhY2tncm91bmRTdHJva2UsXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0XyxcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRLZXlfLFxuICAgICAgICAgICAgICAgIHRoaXMuc3Ryb2tlS2V5XyxcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGxLZXlfLFxuICAgICAgICAgICAgICAgIHRoaXMudGV4dE9mZnNldFhfLFxuICAgICAgICAgICAgICAgIHRoaXMudGV4dE9mZnNldFlfLFxuICAgICAgICAgICAgICAgIGdlb21ldHJ5V2lkdGhzLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB0aGlzLmVuZEdlb21ldHJ5KGZlYXR1cmUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIENhbnZhc1RleHRCdWlsZGVyLnByb3RvdHlwZS5zYXZlVGV4dFN0YXRlc18gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdHJva2VTdGF0ZSA9IHRoaXMudGV4dFN0cm9rZVN0YXRlXztcbiAgICAgICAgdmFyIHRleHRTdGF0ZSA9IHRoaXMudGV4dFN0YXRlXztcbiAgICAgICAgdmFyIGZpbGxTdGF0ZSA9IHRoaXMudGV4dEZpbGxTdGF0ZV87XG4gICAgICAgIHZhciBzdHJva2VLZXkgPSB0aGlzLnN0cm9rZUtleV87XG4gICAgICAgIGlmIChzdHJva2VTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKCEoc3Ryb2tlS2V5IGluIHRoaXMuc3Ryb2tlU3RhdGVzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3Ryb2tlU3RhdGVzW3N0cm9rZUtleV0gPSB7XG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlOiBzdHJva2VTdGF0ZS5zdHJva2VTdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgbGluZUNhcDogc3Ryb2tlU3RhdGUubGluZUNhcCxcbiAgICAgICAgICAgICAgICAgICAgbGluZURhc2hPZmZzZXQ6IHN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICBsaW5lV2lkdGg6IHN0cm9rZVN0YXRlLmxpbmVXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgbGluZUpvaW46IHN0cm9rZVN0YXRlLmxpbmVKb2luLFxuICAgICAgICAgICAgICAgICAgICBtaXRlckxpbWl0OiBzdHJva2VTdGF0ZS5taXRlckxpbWl0LFxuICAgICAgICAgICAgICAgICAgICBsaW5lRGFzaDogc3Ryb2tlU3RhdGUubGluZURhc2gsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgdGV4dEtleSA9IHRoaXMudGV4dEtleV87XG4gICAgICAgIGlmICghKHRleHRLZXkgaW4gdGhpcy50ZXh0U3RhdGVzKSkge1xuICAgICAgICAgICAgdGhpcy50ZXh0U3RhdGVzW3RleHRLZXldID0ge1xuICAgICAgICAgICAgICAgIGZvbnQ6IHRleHRTdGF0ZS5mb250LFxuICAgICAgICAgICAgICAgIHRleHRBbGlnbjogdGV4dFN0YXRlLnRleHRBbGlnbiB8fCBkZWZhdWx0VGV4dEFsaWduLFxuICAgICAgICAgICAgICAgIHRleHRCYXNlbGluZTogdGV4dFN0YXRlLnRleHRCYXNlbGluZSB8fCBkZWZhdWx0VGV4dEJhc2VsaW5lLFxuICAgICAgICAgICAgICAgIHNjYWxlOiB0ZXh0U3RhdGUuc2NhbGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBmaWxsS2V5ID0gdGhpcy5maWxsS2V5XztcbiAgICAgICAgaWYgKGZpbGxTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKCEoZmlsbEtleSBpbiB0aGlzLmZpbGxTdGF0ZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxsU3RhdGVzW2ZpbGxLZXldID0ge1xuICAgICAgICAgICAgICAgICAgICBmaWxsU3R5bGU6IGZpbGxTdGF0ZS5maWxsU3R5bGUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYmVnaW4gQmVnaW4uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gICAgICovXG4gICAgQ2FudmFzVGV4dEJ1aWxkZXIucHJvdG90eXBlLmRyYXdDaGFyc18gPSBmdW5jdGlvbiAoYmVnaW4sIGVuZCkge1xuICAgICAgICB2YXIgc3Ryb2tlU3RhdGUgPSB0aGlzLnRleHRTdHJva2VTdGF0ZV87XG4gICAgICAgIHZhciB0ZXh0U3RhdGUgPSB0aGlzLnRleHRTdGF0ZV87XG4gICAgICAgIHZhciBzdHJva2VLZXkgPSB0aGlzLnN0cm9rZUtleV87XG4gICAgICAgIHZhciB0ZXh0S2V5ID0gdGhpcy50ZXh0S2V5XztcbiAgICAgICAgdmFyIGZpbGxLZXkgPSB0aGlzLmZpbGxLZXlfO1xuICAgICAgICB0aGlzLnNhdmVUZXh0U3RhdGVzXygpO1xuICAgICAgICB2YXIgcGl4ZWxSYXRpbyA9IHRoaXMucGl4ZWxSYXRpbztcbiAgICAgICAgdmFyIGJhc2VsaW5lID0gVEVYVF9BTElHTlt0ZXh0U3RhdGUudGV4dEJhc2VsaW5lXTtcbiAgICAgICAgdmFyIG9mZnNldFkgPSB0aGlzLnRleHRPZmZzZXRZXyAqIHBpeGVsUmF0aW87XG4gICAgICAgIHZhciB0ZXh0ID0gdGhpcy50ZXh0XztcbiAgICAgICAgdmFyIHN0cm9rZVdpZHRoID0gc3Ryb2tlU3RhdGVcbiAgICAgICAgICAgID8gKHN0cm9rZVN0YXRlLmxpbmVXaWR0aCAqIE1hdGguYWJzKHRleHRTdGF0ZS5zY2FsZVswXSkpIC8gMlxuICAgICAgICAgICAgOiAwO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLkRSQVdfQ0hBUlMsXG4gICAgICAgICAgICBiZWdpbixcbiAgICAgICAgICAgIGVuZCxcbiAgICAgICAgICAgIGJhc2VsaW5lLFxuICAgICAgICAgICAgdGV4dFN0YXRlLm92ZXJmbG93LFxuICAgICAgICAgICAgZmlsbEtleSxcbiAgICAgICAgICAgIHRleHRTdGF0ZS5tYXhBbmdsZSxcbiAgICAgICAgICAgIHBpeGVsUmF0aW8sXG4gICAgICAgICAgICBvZmZzZXRZLFxuICAgICAgICAgICAgc3Ryb2tlS2V5LFxuICAgICAgICAgICAgc3Ryb2tlV2lkdGggKiBwaXhlbFJhdGlvLFxuICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgICAgIHRleHRLZXksXG4gICAgICAgICAgICAxLFxuICAgICAgICBdKTtcbiAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5EUkFXX0NIQVJTLFxuICAgICAgICAgICAgYmVnaW4sXG4gICAgICAgICAgICBlbmQsXG4gICAgICAgICAgICBiYXNlbGluZSxcbiAgICAgICAgICAgIHRleHRTdGF0ZS5vdmVyZmxvdyxcbiAgICAgICAgICAgIGZpbGxLZXksXG4gICAgICAgICAgICB0ZXh0U3RhdGUubWF4QW5nbGUsXG4gICAgICAgICAgICAxLFxuICAgICAgICAgICAgb2Zmc2V0WSxcbiAgICAgICAgICAgIHN0cm9rZUtleSxcbiAgICAgICAgICAgIHN0cm9rZVdpZHRoLFxuICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgICAgIHRleHRLZXksXG4gICAgICAgICAgICAxIC8gcGl4ZWxSYXRpbyxcbiAgICAgICAgXSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3N0eWxlL1RleHQuanNcIikuZGVmYXVsdH0gdGV4dFN0eWxlIFRleHQgc3R5bGUuXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfc2hhcmVkRGF0YSBTaGFyZWQgZGF0YS5cbiAgICAgKi9cbiAgICBDYW52YXNUZXh0QnVpbGRlci5wcm90b3R5cGUuc2V0VGV4dFN0eWxlID0gZnVuY3Rpb24gKHRleHRTdHlsZSwgb3B0X3NoYXJlZERhdGEpIHtcbiAgICAgICAgdmFyIHRleHRTdGF0ZSwgZmlsbFN0YXRlLCBzdHJva2VTdGF0ZTtcbiAgICAgICAgaWYgKCF0ZXh0U3R5bGUpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dF8gPSAnJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0ZXh0RmlsbFN0eWxlID0gdGV4dFN0eWxlLmdldEZpbGwoKTtcbiAgICAgICAgICAgIGlmICghdGV4dEZpbGxTdHlsZSkge1xuICAgICAgICAgICAgICAgIGZpbGxTdGF0ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0RmlsbFN0YXRlXyA9IGZpbGxTdGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZpbGxTdGF0ZSA9IHRoaXMudGV4dEZpbGxTdGF0ZV87XG4gICAgICAgICAgICAgICAgaWYgKCFmaWxsU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbFN0YXRlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0YXRlfSAqLyAoe30pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHRGaWxsU3RhdGVfID0gZmlsbFN0YXRlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaWxsU3RhdGUuZmlsbFN0eWxlID0gYXNDb2xvckxpa2UodGV4dEZpbGxTdHlsZS5nZXRDb2xvcigpIHx8IGRlZmF1bHRGaWxsU3R5bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRleHRTdHJva2VTdHlsZSA9IHRleHRTdHlsZS5nZXRTdHJva2UoKTtcbiAgICAgICAgICAgIGlmICghdGV4dFN0cm9rZVN0eWxlKSB7XG4gICAgICAgICAgICAgICAgc3Ryb2tlU3RhdGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dFN0cm9rZVN0YXRlXyA9IHN0cm9rZVN0YXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3Ryb2tlU3RhdGUgPSB0aGlzLnRleHRTdHJva2VTdGF0ZV87XG4gICAgICAgICAgICAgICAgaWYgKCFzdHJva2VTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBzdHJva2VTdGF0ZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlN0cm9rZVN0YXRlfSAqLyAoe30pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHRTdHJva2VTdGF0ZV8gPSBzdHJva2VTdGF0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGxpbmVEYXNoID0gdGV4dFN0cm9rZVN0eWxlLmdldExpbmVEYXNoKCk7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmVEYXNoT2Zmc2V0ID0gdGV4dFN0cm9rZVN0eWxlLmdldExpbmVEYXNoT2Zmc2V0KCk7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmVXaWR0aCA9IHRleHRTdHJva2VTdHlsZS5nZXRXaWR0aCgpO1xuICAgICAgICAgICAgICAgIHZhciBtaXRlckxpbWl0ID0gdGV4dFN0cm9rZVN0eWxlLmdldE1pdGVyTGltaXQoKTtcbiAgICAgICAgICAgICAgICBzdHJva2VTdGF0ZS5saW5lQ2FwID0gdGV4dFN0cm9rZVN0eWxlLmdldExpbmVDYXAoKSB8fCBkZWZhdWx0TGluZUNhcDtcbiAgICAgICAgICAgICAgICBzdHJva2VTdGF0ZS5saW5lRGFzaCA9IGxpbmVEYXNoID8gbGluZURhc2guc2xpY2UoKSA6IGRlZmF1bHRMaW5lRGFzaDtcbiAgICAgICAgICAgICAgICBzdHJva2VTdGF0ZS5saW5lRGFzaE9mZnNldCA9XG4gICAgICAgICAgICAgICAgICAgIGxpbmVEYXNoT2Zmc2V0ID09PSB1bmRlZmluZWQgPyBkZWZhdWx0TGluZURhc2hPZmZzZXQgOiBsaW5lRGFzaE9mZnNldDtcbiAgICAgICAgICAgICAgICBzdHJva2VTdGF0ZS5saW5lSm9pbiA9IHRleHRTdHJva2VTdHlsZS5nZXRMaW5lSm9pbigpIHx8IGRlZmF1bHRMaW5lSm9pbjtcbiAgICAgICAgICAgICAgICBzdHJva2VTdGF0ZS5saW5lV2lkdGggPVxuICAgICAgICAgICAgICAgICAgICBsaW5lV2lkdGggPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRMaW5lV2lkdGggOiBsaW5lV2lkdGg7XG4gICAgICAgICAgICAgICAgc3Ryb2tlU3RhdGUubWl0ZXJMaW1pdCA9XG4gICAgICAgICAgICAgICAgICAgIG1pdGVyTGltaXQgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRNaXRlckxpbWl0IDogbWl0ZXJMaW1pdDtcbiAgICAgICAgICAgICAgICBzdHJva2VTdGF0ZS5zdHJva2VTdHlsZSA9IGFzQ29sb3JMaWtlKHRleHRTdHJva2VTdHlsZS5nZXRDb2xvcigpIHx8IGRlZmF1bHRTdHJva2VTdHlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZXh0U3RhdGUgPSB0aGlzLnRleHRTdGF0ZV87XG4gICAgICAgICAgICB2YXIgZm9udCA9IHRleHRTdHlsZS5nZXRGb250KCkgfHwgZGVmYXVsdEZvbnQ7XG4gICAgICAgICAgICByZWdpc3RlckZvbnQoZm9udCk7XG4gICAgICAgICAgICB2YXIgdGV4dFNjYWxlID0gdGV4dFN0eWxlLmdldFNjYWxlQXJyYXkoKTtcbiAgICAgICAgICAgIHRleHRTdGF0ZS5vdmVyZmxvdyA9IHRleHRTdHlsZS5nZXRPdmVyZmxvdygpO1xuICAgICAgICAgICAgdGV4dFN0YXRlLmZvbnQgPSBmb250O1xuICAgICAgICAgICAgdGV4dFN0YXRlLm1heEFuZ2xlID0gdGV4dFN0eWxlLmdldE1heEFuZ2xlKCk7XG4gICAgICAgICAgICB0ZXh0U3RhdGUucGxhY2VtZW50ID0gdGV4dFN0eWxlLmdldFBsYWNlbWVudCgpO1xuICAgICAgICAgICAgdGV4dFN0YXRlLnRleHRBbGlnbiA9IHRleHRTdHlsZS5nZXRUZXh0QWxpZ24oKTtcbiAgICAgICAgICAgIHRleHRTdGF0ZS50ZXh0QmFzZWxpbmUgPVxuICAgICAgICAgICAgICAgIHRleHRTdHlsZS5nZXRUZXh0QmFzZWxpbmUoKSB8fCBkZWZhdWx0VGV4dEJhc2VsaW5lO1xuICAgICAgICAgICAgdGV4dFN0YXRlLmJhY2tncm91bmRGaWxsID0gdGV4dFN0eWxlLmdldEJhY2tncm91bmRGaWxsKCk7XG4gICAgICAgICAgICB0ZXh0U3RhdGUuYmFja2dyb3VuZFN0cm9rZSA9IHRleHRTdHlsZS5nZXRCYWNrZ3JvdW5kU3Ryb2tlKCk7XG4gICAgICAgICAgICB0ZXh0U3RhdGUucGFkZGluZyA9IHRleHRTdHlsZS5nZXRQYWRkaW5nKCkgfHwgZGVmYXVsdFBhZGRpbmc7XG4gICAgICAgICAgICB0ZXh0U3RhdGUuc2NhbGUgPSB0ZXh0U2NhbGUgPT09IHVuZGVmaW5lZCA/IFsxLCAxXSA6IHRleHRTY2FsZTtcbiAgICAgICAgICAgIHZhciB0ZXh0T2Zmc2V0WCA9IHRleHRTdHlsZS5nZXRPZmZzZXRYKCk7XG4gICAgICAgICAgICB2YXIgdGV4dE9mZnNldFkgPSB0ZXh0U3R5bGUuZ2V0T2Zmc2V0WSgpO1xuICAgICAgICAgICAgdmFyIHRleHRSb3RhdGVXaXRoVmlldyA9IHRleHRTdHlsZS5nZXRSb3RhdGVXaXRoVmlldygpO1xuICAgICAgICAgICAgdmFyIHRleHRSb3RhdGlvbiA9IHRleHRTdHlsZS5nZXRSb3RhdGlvbigpO1xuICAgICAgICAgICAgdGhpcy50ZXh0XyA9IHRleHRTdHlsZS5nZXRUZXh0KCkgfHwgJyc7XG4gICAgICAgICAgICB0aGlzLnRleHRPZmZzZXRYXyA9IHRleHRPZmZzZXRYID09PSB1bmRlZmluZWQgPyAwIDogdGV4dE9mZnNldFg7XG4gICAgICAgICAgICB0aGlzLnRleHRPZmZzZXRZXyA9IHRleHRPZmZzZXRZID09PSB1bmRlZmluZWQgPyAwIDogdGV4dE9mZnNldFk7XG4gICAgICAgICAgICB0aGlzLnRleHRSb3RhdGVXaXRoVmlld18gPVxuICAgICAgICAgICAgICAgIHRleHRSb3RhdGVXaXRoVmlldyA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiB0ZXh0Um90YXRlV2l0aFZpZXc7XG4gICAgICAgICAgICB0aGlzLnRleHRSb3RhdGlvbl8gPSB0ZXh0Um90YXRpb24gPT09IHVuZGVmaW5lZCA/IDAgOiB0ZXh0Um90YXRpb247XG4gICAgICAgICAgICB0aGlzLnN0cm9rZUtleV8gPSBzdHJva2VTdGF0ZVxuICAgICAgICAgICAgICAgID8gKHR5cGVvZiBzdHJva2VTdGF0ZS5zdHJva2VTdHlsZSA9PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgICAgICA/IHN0cm9rZVN0YXRlLnN0cm9rZVN0eWxlXG4gICAgICAgICAgICAgICAgICAgIDogZ2V0VWlkKHN0cm9rZVN0YXRlLnN0cm9rZVN0eWxlKSkgK1xuICAgICAgICAgICAgICAgICAgICBzdHJva2VTdGF0ZS5saW5lQ2FwICtcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQgK1xuICAgICAgICAgICAgICAgICAgICAnfCcgK1xuICAgICAgICAgICAgICAgICAgICBzdHJva2VTdGF0ZS5saW5lV2lkdGggK1xuICAgICAgICAgICAgICAgICAgICBzdHJva2VTdGF0ZS5saW5lSm9pbiArXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVN0YXRlLm1pdGVyTGltaXQgK1xuICAgICAgICAgICAgICAgICAgICAnWycgK1xuICAgICAgICAgICAgICAgICAgICBzdHJva2VTdGF0ZS5saW5lRGFzaC5qb2luKCkgK1xuICAgICAgICAgICAgICAgICAgICAnXSdcbiAgICAgICAgICAgICAgICA6ICcnO1xuICAgICAgICAgICAgdGhpcy50ZXh0S2V5XyA9XG4gICAgICAgICAgICAgICAgdGV4dFN0YXRlLmZvbnQgK1xuICAgICAgICAgICAgICAgICAgICB0ZXh0U3RhdGUuc2NhbGUgK1xuICAgICAgICAgICAgICAgICAgICAodGV4dFN0YXRlLnRleHRBbGlnbiB8fCAnPycpICtcbiAgICAgICAgICAgICAgICAgICAgKHRleHRTdGF0ZS50ZXh0QmFzZWxpbmUgfHwgJz8nKTtcbiAgICAgICAgICAgIHRoaXMuZmlsbEtleV8gPSBmaWxsU3RhdGVcbiAgICAgICAgICAgICAgICA/IHR5cGVvZiBmaWxsU3RhdGUuZmlsbFN0eWxlID09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgICAgID8gZmlsbFN0YXRlLmZpbGxTdHlsZVxuICAgICAgICAgICAgICAgICAgICA6ICd8JyArIGdldFVpZChmaWxsU3RhdGUuZmlsbFN0eWxlKVxuICAgICAgICAgICAgICAgIDogJyc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWNsdXR0ZXJJbWFnZVdpdGhUZXh0XyA9IG9wdF9zaGFyZWREYXRhO1xuICAgIH07XG4gICAgcmV0dXJuIENhbnZhc1RleHRCdWlsZGVyO1xufShDYW52YXNCdWlsZGVyKSk7XG5leHBvcnQgZGVmYXVsdCBDYW52YXNUZXh0QnVpbGRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRleHRCdWlsZGVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvY2FudmFzL0J1aWxkZXJHcm91cFxuICovXG5pbXBvcnQgQnVpbGRlciBmcm9tICcuL0J1aWxkZXIuanMnO1xuaW1wb3J0IEltYWdlQnVpbGRlciBmcm9tICcuL0ltYWdlQnVpbGRlci5qcyc7XG5pbXBvcnQgTGluZVN0cmluZ0J1aWxkZXIgZnJvbSAnLi9MaW5lU3RyaW5nQnVpbGRlci5qcyc7XG5pbXBvcnQgUG9seWdvbkJ1aWxkZXIgZnJvbSAnLi9Qb2x5Z29uQnVpbGRlci5qcyc7XG5pbXBvcnQgVGV4dEJ1aWxkZXIgZnJvbSAnLi9UZXh0QnVpbGRlci5qcyc7XG4vKipcbiAqIEB0eXBlIHtPYmplY3Q8aW1wb3J0KFwiLi9CdWlsZGVyVHlwZVwiKS5kZWZhdWx0LCB0eXBlb2YgQnVpbGRlcj59XG4gKi9cbnZhciBCQVRDSF9DT05TVFJVQ1RPUlMgPSB7XG4gICAgJ0NpcmNsZSc6IFBvbHlnb25CdWlsZGVyLFxuICAgICdEZWZhdWx0JzogQnVpbGRlcixcbiAgICAnSW1hZ2UnOiBJbWFnZUJ1aWxkZXIsXG4gICAgJ0xpbmVTdHJpbmcnOiBMaW5lU3RyaW5nQnVpbGRlcixcbiAgICAnUG9seWdvbic6IFBvbHlnb25CdWlsZGVyLFxuICAgICdUZXh0JzogVGV4dEJ1aWxkZXIsXG59O1xudmFyIEJ1aWxkZXJHcm91cCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IG1heEV4dGVudCBNYXggZXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICovXG4gICAgZnVuY3Rpb24gQnVpbGRlckdyb3VwKHRvbGVyYW5jZSwgbWF4RXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50b2xlcmFuY2VfID0gdG9sZXJhbmNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heEV4dGVudF8gPSBtYXhFeHRlbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5waXhlbFJhdGlvXyA9IHBpeGVsUmF0aW87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uXyA9IHJlc29sdXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsICFPYmplY3Q8aW1wb3J0KFwiLi9CdWlsZGVyVHlwZVwiKS5kZWZhdWx0LCBCdWlsZGVyPj59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJ1aWxkZXJzQnlaSW5kZXhfID0ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCAhT2JqZWN0PGltcG9ydChcIi4vQnVpbGRlclR5cGVcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi9CdWlsZGVyLmpzXCIpLlNlcmlhbGl6YWJsZUluc3RydWN0aW9ucz4+fSBUaGUgc2VyaWFsaXphYmxlIGluc3RydWN0aW9uc1xuICAgICAqL1xuICAgIEJ1aWxkZXJHcm91cC5wcm90b3R5cGUuZmluaXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYnVpbGRlckluc3RydWN0aW9ucyA9IHt9O1xuICAgICAgICBmb3IgKHZhciB6S2V5IGluIHRoaXMuYnVpbGRlcnNCeVpJbmRleF8pIHtcbiAgICAgICAgICAgIGJ1aWxkZXJJbnN0cnVjdGlvbnNbektleV0gPSBidWlsZGVySW5zdHJ1Y3Rpb25zW3pLZXldIHx8IHt9O1xuICAgICAgICAgICAgdmFyIGJ1aWxkZXJzID0gdGhpcy5idWlsZGVyc0J5WkluZGV4X1t6S2V5XTtcbiAgICAgICAgICAgIGZvciAodmFyIGJ1aWxkZXJLZXkgaW4gYnVpbGRlcnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgYnVpbGRlckluc3RydWN0aW9uID0gYnVpbGRlcnNbYnVpbGRlcktleV0uZmluaXNoKCk7XG4gICAgICAgICAgICAgICAgYnVpbGRlckluc3RydWN0aW9uc1t6S2V5XVtidWlsZGVyS2V5XSA9IGJ1aWxkZXJJbnN0cnVjdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnVpbGRlckluc3RydWN0aW9ucztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gekluZGV4IFogaW5kZXguXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0J1aWxkZXJUeXBlLmpzXCIpLmRlZmF1bHR9IGJ1aWxkZXJUeXBlIFJlcGxheSB0eXBlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1ZlY3RvckNvbnRleHQuanNcIikuZGVmYXVsdH0gUmVwbGF5LlxuICAgICAqL1xuICAgIEJ1aWxkZXJHcm91cC5wcm90b3R5cGUuZ2V0QnVpbGRlciA9IGZ1bmN0aW9uICh6SW5kZXgsIGJ1aWxkZXJUeXBlKSB7XG4gICAgICAgIHZhciB6SW5kZXhLZXkgPSB6SW5kZXggIT09IHVuZGVmaW5lZCA/IHpJbmRleC50b1N0cmluZygpIDogJzAnO1xuICAgICAgICB2YXIgcmVwbGF5cyA9IHRoaXMuYnVpbGRlcnNCeVpJbmRleF9bekluZGV4S2V5XTtcbiAgICAgICAgaWYgKHJlcGxheXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmVwbGF5cyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5idWlsZGVyc0J5WkluZGV4X1t6SW5kZXhLZXldID0gcmVwbGF5cztcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVwbGF5ID0gcmVwbGF5c1tidWlsZGVyVHlwZV07XG4gICAgICAgIGlmIChyZXBsYXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIENvbnN0cnVjdG9yID0gQkFUQ0hfQ09OU1RSVUNUT1JTW2J1aWxkZXJUeXBlXTtcbiAgICAgICAgICAgIHJlcGxheSA9IG5ldyBDb25zdHJ1Y3Rvcih0aGlzLnRvbGVyYW5jZV8sIHRoaXMubWF4RXh0ZW50XywgdGhpcy5yZXNvbHV0aW9uXywgdGhpcy5waXhlbFJhdGlvXyk7XG4gICAgICAgICAgICByZXBsYXlzW2J1aWxkZXJUeXBlXSA9IHJlcGxheTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVwbGF5O1xuICAgIH07XG4gICAgcmV0dXJuIEJ1aWxkZXJHcm91cDtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBCdWlsZGVyR3JvdXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1CdWlsZGVyR3JvdXAuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9jYW52YXMvQnVpbGRlclR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgQ0lSQ0xFOiAnQ2lyY2xlJyxcbiAgICBERUZBVUxUOiAnRGVmYXVsdCcsXG4gICAgSU1BR0U6ICdJbWFnZScsXG4gICAgTElORV9TVFJJTkc6ICdMaW5lU3RyaW5nJyxcbiAgICBQT0xZR09OOiAnUG9seWdvbicsXG4gICAgVEVYVDogJ1RleHQnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJ1aWxkZXJUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvdGV4dHBhdGhcbiAqL1xuaW1wb3J0IHsgbGVycCB9IGZyb20gJy4uLy4uL21hdGguanMnO1xuaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnLi90cmFuc2Zvcm0uanMnO1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBQYXRoIHRvIHB1dCB0ZXh0IG9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBTdGFydCBvZmZzZXQgb2YgdGhlIGBmbGF0Q29vcmRpbmF0ZXNgLlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQgb2Zmc2V0IG9mIHRoZSBgZmxhdENvb3JkaW5hdGVzYC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGV4dCB0byBwbGFjZSBvbiB0aGUgcGF0aC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydE0gbSBhbG9uZyB0aGUgcGF0aCB3aGVyZSB0aGUgdGV4dCBzdGFydHMuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4QW5nbGUgTWF4IGFuZ2xlIGJldHdlZW4gYWRqYWNlbnQgY2hhcnMgaW4gcmFkaWFucy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzY2FsZSBUaGUgcHJvZHVjdCBvZiB0aGUgdGV4dCBzY2FsZSBhbmQgdGhlIGRldmljZSBwaXhlbCByYXRpby5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nLCBzdHJpbmcsIE9iamVjdDxzdHJpbmcsIG51bWJlcj4pOm51bWJlcn0gbWVhc3VyZUFuZENhY2hlVGV4dFdpZHRoIE1lYXN1cmUgYW5kIGNhY2hlIHRleHQgd2lkdGguXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udCBUaGUgZm9udC5cbiAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgbnVtYmVyPn0gY2FjaGUgQSBjYWNoZSBvZiBtZWFzdXJlZCB3aWR0aHMuXG4gKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24gdG8gYXBwbHkgdG8gdGhlIGZsYXRDb29yZGluYXRlcyB0byBkZXRlcm1pbmUgd2hldGhlciB0ZXh0IG5lZWRzIHRvIGJlIHJldmVyc2VkLlxuICogQHJldHVybiB7QXJyYXk8QXJyYXk8Kj4+fSBUaGUgcmVzdWx0IGFycmF5IChvciBudWxsIGlmIGBtYXhBbmdsZWAgd2FzXG4gKiBleGNlZWRlZCkuIEVudHJpZXMgb2YgdGhlIGFycmF5IGFyZSB4LCB5LCBhbmNob3JYLCBhbmdsZSwgY2h1bmsuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkcmF3VGV4dE9uUGF0aChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHRleHQsIHN0YXJ0TSwgbWF4QW5nbGUsIHNjYWxlLCBtZWFzdXJlQW5kQ2FjaGVUZXh0V2lkdGgsIGZvbnQsIGNhY2hlLCByb3RhdGlvbikge1xuICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICB2YXIgeDEgPSAwO1xuICAgIHZhciB5MSA9IDA7XG4gICAgdmFyIHNlZ21lbnRMZW5ndGggPSAwO1xuICAgIHZhciBzZWdtZW50TSA9IDA7XG4gICAgZnVuY3Rpb24gYWR2YW5jZSgpIHtcbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgeTEgPSB5MjtcbiAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgICAgICAgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgICAgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIHNlZ21lbnRNICs9IHNlZ21lbnRMZW5ndGg7XG4gICAgICAgIHNlZ21lbnRMZW5ndGggPSBNYXRoLnNxcnQoKHgyIC0geDEpICogKHgyIC0geDEpICsgKHkyIC0geTEpICogKHkyIC0geTEpKTtcbiAgICB9XG4gICAgZG8ge1xuICAgICAgICBhZHZhbmNlKCk7XG4gICAgfSB3aGlsZSAob2Zmc2V0IDwgZW5kIC0gc3RyaWRlICYmIHNlZ21lbnRNICsgc2VnbWVudExlbmd0aCA8IHN0YXJ0TSk7XG4gICAgdmFyIGludGVycG9sYXRlID0gKHN0YXJ0TSAtIHNlZ21lbnRNKSAvIHNlZ21lbnRMZW5ndGg7XG4gICAgdmFyIGJlZ2luWCA9IGxlcnAoeDEsIHgyLCBpbnRlcnBvbGF0ZSk7XG4gICAgdmFyIGJlZ2luWSA9IGxlcnAoeTEsIHkyLCBpbnRlcnBvbGF0ZSk7XG4gICAgdmFyIHN0YXJ0T2Zmc2V0ID0gb2Zmc2V0IC0gc3RyaWRlO1xuICAgIHZhciBzdGFydExlbmd0aCA9IHNlZ21lbnRNO1xuICAgIHZhciBlbmRNID0gc3RhcnRNICsgc2NhbGUgKiBtZWFzdXJlQW5kQ2FjaGVUZXh0V2lkdGgoZm9udCwgdGV4dCwgY2FjaGUpO1xuICAgIHdoaWxlIChvZmZzZXQgPCBlbmQgLSBzdHJpZGUgJiYgc2VnbWVudE0gKyBzZWdtZW50TGVuZ3RoIDwgZW5kTSkge1xuICAgICAgICBhZHZhbmNlKCk7XG4gICAgfVxuICAgIGludGVycG9sYXRlID0gKGVuZE0gLSBzZWdtZW50TSkgLyBzZWdtZW50TGVuZ3RoO1xuICAgIHZhciBlbmRYID0gbGVycCh4MSwgeDIsIGludGVycG9sYXRlKTtcbiAgICB2YXIgZW5kWSA9IGxlcnAoeTEsIHkyLCBpbnRlcnBvbGF0ZSk7XG4gICAgLy8gS2VlcCB0ZXh0IHVwcmlnaHRcbiAgICB2YXIgcmV2ZXJzZTtcbiAgICBpZiAocm90YXRpb24pIHtcbiAgICAgICAgdmFyIGZsYXQgPSBbYmVnaW5YLCBiZWdpblksIGVuZFgsIGVuZFldO1xuICAgICAgICByb3RhdGUoZmxhdCwgMCwgNCwgMiwgcm90YXRpb24sIGZsYXQsIGZsYXQpO1xuICAgICAgICByZXZlcnNlID0gZmxhdFswXSA+IGZsYXRbMl07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXZlcnNlID0gYmVnaW5YID4gZW5kWDtcbiAgICB9XG4gICAgdmFyIFBJID0gTWF0aC5QSTtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIHNpbmdsZVNlZ21lbnQgPSBzdGFydE9mZnNldCArIHN0cmlkZSA9PT0gb2Zmc2V0O1xuICAgIG9mZnNldCA9IHN0YXJ0T2Zmc2V0O1xuICAgIHNlZ21lbnRMZW5ndGggPSAwO1xuICAgIHNlZ21lbnRNID0gc3RhcnRMZW5ndGg7XG4gICAgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAvLyBBbGwgb24gdGhlIHNhbWUgc2VnbWVudFxuICAgIGlmIChzaW5nbGVTZWdtZW50KSB7XG4gICAgICAgIGFkdmFuY2UoKTtcbiAgICAgICAgdmFyIHByZXZpb3VzQW5nbGVfMSA9IE1hdGguYXRhbjIoeTIgLSB5MSwgeDIgLSB4MSk7XG4gICAgICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICAgICAgICBwcmV2aW91c0FuZ2xlXzEgKz0gcHJldmlvdXNBbmdsZV8xID4gMCA/IC1QSSA6IFBJO1xuICAgICAgICB9XG4gICAgICAgIHZhciB4ID0gKGVuZFggKyBiZWdpblgpIC8gMjtcbiAgICAgICAgdmFyIHkgPSAoZW5kWSArIGJlZ2luWSkgLyAyO1xuICAgICAgICByZXN1bHRbMF0gPSBbeCwgeSwgKGVuZE0gLSBzdGFydE0pIC8gMiwgcHJldmlvdXNBbmdsZV8xLCB0ZXh0XTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgdmFyIHByZXZpb3VzQW5nbGU7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGV4dC5sZW5ndGg7IGkgPCBpaTspIHtcbiAgICAgICAgYWR2YW5jZSgpO1xuICAgICAgICB2YXIgYW5nbGUgPSBNYXRoLmF0YW4yKHkyIC0geTEsIHgyIC0geDEpO1xuICAgICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICAgICAgYW5nbGUgKz0gYW5nbGUgPiAwID8gLVBJIDogUEk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZXZpb3VzQW5nbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGRlbHRhID0gYW5nbGUgLSBwcmV2aW91c0FuZ2xlO1xuICAgICAgICAgICAgZGVsdGEgKz0gZGVsdGEgPiBQSSA/IC0yICogUEkgOiBkZWx0YSA8IC1QSSA/IDIgKiBQSSA6IDA7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoZGVsdGEpID4gbWF4QW5nbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcmV2aW91c0FuZ2xlID0gYW5nbGU7XG4gICAgICAgIHZhciBpU3RhcnQgPSBpO1xuICAgICAgICB2YXIgY2hhckxlbmd0aCA9IDA7XG4gICAgICAgIGZvciAoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gcmV2ZXJzZSA/IGlpIC0gaSAtIDEgOiBpO1xuICAgICAgICAgICAgdmFyIGxlbiA9IHNjYWxlICogbWVhc3VyZUFuZENhY2hlVGV4dFdpZHRoKGZvbnQsIHRleHRbaW5kZXhdLCBjYWNoZSk7XG4gICAgICAgICAgICBpZiAob2Zmc2V0ICsgc3RyaWRlIDwgZW5kICYmXG4gICAgICAgICAgICAgICAgc2VnbWVudE0gKyBzZWdtZW50TGVuZ3RoIDwgc3RhcnRNICsgY2hhckxlbmd0aCArIGxlbiAvIDIpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoYXJMZW5ndGggKz0gbGVuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpID09PSBpU3RhcnQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjaGFycyA9IHJldmVyc2VcbiAgICAgICAgICAgID8gdGV4dC5zdWJzdHJpbmcoaWkgLSBpU3RhcnQsIGlpIC0gaSlcbiAgICAgICAgICAgIDogdGV4dC5zdWJzdHJpbmcoaVN0YXJ0LCBpKTtcbiAgICAgICAgaW50ZXJwb2xhdGUgPSAoc3RhcnRNICsgY2hhckxlbmd0aCAvIDIgLSBzZWdtZW50TSkgLyBzZWdtZW50TGVuZ3RoO1xuICAgICAgICB2YXIgeCA9IGxlcnAoeDEsIHgyLCBpbnRlcnBvbGF0ZSk7XG4gICAgICAgIHZhciB5ID0gbGVycCh5MSwgeTIsIGludGVycG9sYXRlKTtcbiAgICAgICAgcmVzdWx0LnB1c2goW3gsIHksIGNoYXJMZW5ndGggLyAyLCBhbmdsZSwgY2hhcnNdKTtcbiAgICAgICAgc3RhcnRNICs9IGNoYXJMZW5ndGg7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10ZXh0cGF0aC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2xlbmd0aFxuICovXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IExlbmd0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVTdHJpbmdMZW5ndGgoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgIHZhciBsZW5ndGggPSAwO1xuICAgIGZvciAodmFyIGkgPSBvZmZzZXQgKyBzdHJpZGU7IGkgPCBlbmQ7IGkgKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICAgICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW2kgKyAxXTtcbiAgICAgICAgbGVuZ3RoICs9IE1hdGguc3FydCgoeDIgLSB4MSkgKiAoeDIgLSB4MSkgKyAoeTIgLSB5MSkgKiAoeTIgLSB5MSkpO1xuICAgICAgICB4MSA9IHgyO1xuICAgICAgICB5MSA9IHkyO1xuICAgIH1cbiAgICByZXR1cm4gbGVuZ3RoO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7bnVtYmVyfSBQZXJpbWV0ZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nTGVuZ3RoKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIHZhciBwZXJpbWV0ZXIgPSBsaW5lU3RyaW5nTGVuZ3RoKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgdmFyIGR4ID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV0gLSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB2YXIgZHkgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgMV0gLSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgcGVyaW1ldGVyICs9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgcmV0dXJuIHBlcmltZXRlcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxlbmd0aC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhcy9FeGVjdXRvclxuICovXG5pbXBvcnQgQ2FudmFzSW5zdHJ1Y3Rpb24gZnJvbSAnLi9JbnN0cnVjdGlvbi5qcyc7XG5pbXBvcnQgeyBURVhUX0FMSUdOIH0gZnJvbSAnLi9UZXh0QnVpbGRlci5qcyc7XG5pbXBvcnQgeyBXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUyB9IGZyb20gJy4uLy4uL2hhcy5qcyc7XG5pbXBvcnQgeyBhcHBseSBhcyBhcHBseVRyYW5zZm9ybSwgY29tcG9zZSBhcyBjb21wb3NlVHJhbnNmb3JtLCBjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCBzZXRGcm9tQXJyYXkgYXMgdHJhbnNmb3JtU2V0RnJvbUFycmF5LCB9IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQgeyBjcmVhdGVFbXB0eSwgY3JlYXRlT3JVcGRhdGUsIGludGVyc2VjdHMgfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZGVmYXVsdFBhZGRpbmcsIGRlZmF1bHRUZXh0QmFzZWxpbmUsIGRyYXdJbWFnZU9yTGFiZWwsIH0gZnJvbSAnLi4vY2FudmFzLmpzJztcbmltcG9ydCB7IGRlZmF1bHRUZXh0QWxpZ24sIG1lYXN1cmVBbmRDYWNoZVRleHRXaWR0aCwgbWVhc3VyZVRleHRIZWlnaHQsIG1lYXN1cmVUZXh0V2lkdGhzLCB9IGZyb20gJy4uL2NhbnZhcy5qcyc7XG5pbXBvcnQgeyBkcmF3VGV4dE9uUGF0aCB9IGZyb20gJy4uLy4uL2dlb20vZmxhdC90ZXh0cGF0aC5qcyc7XG5pbXBvcnQgeyBlcXVhbHMgfSBmcm9tICcuLi8uLi9hcnJheS5qcyc7XG5pbXBvcnQgeyBsaW5lU3RyaW5nTGVuZ3RoIH0gZnJvbSAnLi4vLi4vZ2VvbS9mbGF0L2xlbmd0aC5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0yRCB9IGZyb20gJy4uLy4uL2dlb20vZmxhdC90cmFuc2Zvcm0uanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBCQm94XG4gKiBAcHJvcGVydHkge251bWJlcn0gbWluWFxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1pbllcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtYXhYXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWF4WVxuICogQHByb3BlcnR5IHsqfSB2YWx1ZVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEltYWdlT3JMYWJlbERpbWVuc2lvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBkcmF3SW1hZ2VYXG4gKiBAcHJvcGVydHkge251bWJlcn0gZHJhd0ltYWdlWVxuICogQHByb3BlcnR5IHtudW1iZXJ9IGRyYXdJbWFnZVdcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBkcmF3SW1hZ2VIXG4gKiBAcHJvcGVydHkge251bWJlcn0gb3JpZ2luWFxuICogQHByb3BlcnR5IHtudW1iZXJ9IG9yaWdpbllcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gc2NhbGVcbiAqIEBwcm9wZXJ0eSB7QkJveH0gZGVjbHV0dGVyQm94XG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IGNhbnZhc1RyYW5zZm9ybVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHt7MDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCAxOiBudW1iZXIsIDI6IGltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5MYWJlbHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnQsIDM6IEltYWdlT3JMYWJlbERpbWVuc2lvbnMsIDQ6IG51bWJlciwgNTogQXJyYXk8Kj4sIDY6IEFycmF5PCo+fX0gUmVwbGF5SW1hZ2VPckxhYmVsQXJnc1xuICovXG4vKipcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZSwgaW1wb3J0KFwiLi4vLi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0KTogVH0gRmVhdHVyZUNhbGxiYWNrXG4gKi9cbi8qKlxuICogQHR5cGUge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gKi9cbnZhciB0bXBFeHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9ICovXG52YXIgcDEgPSBbXTtcbi8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSAqL1xudmFyIHAyID0gW107XG4vKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gKi9cbnZhciBwMyA9IFtdO1xuLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9ICovXG52YXIgcDQgPSBbXTtcbi8qKlxuICogQHBhcmFtIHtSZXBsYXlJbWFnZU9yTGFiZWxBcmdzfSByZXBsYXlJbWFnZU9yTGFiZWxBcmdzIEFyZ3VtZW50cyB0byByZXBsYXlJbWFnZU9yTGFiZWxcbiAqIEByZXR1cm4ge0JCb3h9IERlY2x1dHRlciBiYm94LlxuICovXG5mdW5jdGlvbiBnZXREZWNsdXR0ZXJCb3gocmVwbGF5SW1hZ2VPckxhYmVsQXJncykge1xuICAgIHJldHVybiByZXBsYXlJbWFnZU9yTGFiZWxBcmdzWzNdLmRlY2x1dHRlckJveDtcbn1cbnZhciBydGxSZWdFeCA9IG5ldyBSZWdFeHAoXG4vKiBlc2xpbnQtZGlzYWJsZSBwcmV0dGllci9wcmV0dGllciAqL1xuJ1snICtcbiAgICBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MDA1OTEpICsgJy0nICsgU3RyaW5nLmZyb21DaGFyQ29kZSgweDAwOGZmKSArXG4gICAgU3RyaW5nLmZyb21DaGFyQ29kZSgweDBmYjFkKSArICctJyArIFN0cmluZy5mcm9tQ2hhckNvZGUoMHgwZmRmZikgK1xuICAgIFN0cmluZy5mcm9tQ2hhckNvZGUoMHgwZmU3MCkgKyAnLScgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MGZlZmMpICtcbiAgICBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MTA4MDApICsgJy0nICsgU3RyaW5nLmZyb21DaGFyQ29kZSgweDEwZmZmKSArXG4gICAgU3RyaW5nLmZyb21DaGFyQ29kZSgweDFlODAwKSArICctJyArIFN0cmluZy5mcm9tQ2hhckNvZGUoMHgxZWZmZikgK1xuICAgICddJ1xuLyogZXNsaW50LWVuYWJsZSBwcmV0dGllci9wcmV0dGllciAqL1xuKTtcbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGV4dC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBhbGlnbiBBbGlnbm1lbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRleHQgYWxpZ25tZW50LlxuICovXG5mdW5jdGlvbiBob3Jpem9udGFsVGV4dEFsaWduKHRleHQsIGFsaWduKSB7XG4gICAgaWYgKChhbGlnbiA9PT0gJ3N0YXJ0JyB8fCBhbGlnbiA9PT0gJ2VuZCcpICYmICFydGxSZWdFeC50ZXN0KHRleHQpKSB7XG4gICAgICAgIGFsaWduID0gYWxpZ24gPT09ICdzdGFydCcgPyAnbGVmdCcgOiAncmlnaHQnO1xuICAgIH1cbiAgICByZXR1cm4gVEVYVF9BTElHTlthbGlnbl07XG59XG52YXIgRXhlY3V0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG92ZXJsYXBzIFRoZSByZXBsYXkgY2FuIGhhdmUgb3ZlcmxhcHBpbmcgZ2VvbWV0cmllcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TZXJpYWxpemFibGVJbnN0cnVjdGlvbnN9IGluc3RydWN0aW9ucyBUaGUgc2VyaWFsaXphYmxlIGluc3RydWN0aW9uc1xuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc2l6ZS5qc1wiKS5TaXplfSByZW5kZXJCdWZmZXIgUmVuZGVyIGJ1ZmZlciAod2lkdGgvaGVpZ2h0KSBpbiBwaXhlbHMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRXhlY3V0b3IocmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgb3ZlcmxhcHMsIGluc3RydWN0aW9ucywgcmVuZGVyQnVmZmVyKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vdmVybGFwcyA9IG92ZXJsYXBzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5waXhlbFJhdGlvID0gcGl4ZWxSYXRpbztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQGNvbnN0XG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFsaWduRmlsbF87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTwqPn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gaW5zdHJ1Y3Rpb25zLmluc3RydWN0aW9ucztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvb3JkaW5hdGVzID0gaW5zdHJ1Y3Rpb25zLmNvb3JkaW5hdGVzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8bnVtYmVyLGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXxBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fEFycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+Pn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29vcmRpbmF0ZUNhY2hlXyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3NpemUuanNcIikuU2l6ZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVuZGVyQnVmZmVyXyA9IHJlbmRlckJ1ZmZlcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshaW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVuZGVyZWRUcmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTwqPn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zID0gaW5zdHJ1Y3Rpb25zLmhpdERldGVjdGlvbkluc3RydWN0aW9ucztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5waXhlbENvb3JkaW5hdGVzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52aWV3Um90YXRpb25fID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdGF0ZT59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpbGxTdGF0ZXMgPSBpbnN0cnVjdGlvbnMuZmlsbFN0YXRlcyB8fCB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlN0cm9rZVN0YXRlPn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3Ryb2tlU3RhdGVzID0gaW5zdHJ1Y3Rpb25zLnN0cm9rZVN0YXRlcyB8fCB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlRleHRTdGF0ZT59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRleHRTdGF0ZXMgPSBpbnN0cnVjdGlvbnMudGV4dFN0YXRlcyB8fCB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBPYmplY3Q8c3RyaW5nLCBudW1iZXI+Pn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud2lkdGhzXyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5MYWJlbD59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxhYmVsc18gPSB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGV4dC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dEtleSBUZXh0IHN0eWxlIGtleS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsbEtleSBGaWxsIHN0eWxlIGtleS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3Ryb2tlS2V5IFN0cm9rZSBzdHlsZSBrZXkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkxhYmVsfSBMYWJlbC5cbiAgICAgKi9cbiAgICBFeGVjdXRvci5wcm90b3R5cGUuY3JlYXRlTGFiZWwgPSBmdW5jdGlvbiAodGV4dCwgdGV4dEtleSwgZmlsbEtleSwgc3Ryb2tlS2V5KSB7XG4gICAgICAgIHZhciBrZXkgPSB0ZXh0ICsgdGV4dEtleSArIGZpbGxLZXkgKyBzdHJva2VLZXk7XG4gICAgICAgIGlmICh0aGlzLmxhYmVsc19ba2V5XSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGFiZWxzX1trZXldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdHJva2VTdGF0ZSA9IHN0cm9rZUtleSA/IHRoaXMuc3Ryb2tlU3RhdGVzW3N0cm9rZUtleV0gOiBudWxsO1xuICAgICAgICB2YXIgZmlsbFN0YXRlID0gZmlsbEtleSA/IHRoaXMuZmlsbFN0YXRlc1tmaWxsS2V5XSA6IG51bGw7XG4gICAgICAgIHZhciB0ZXh0U3RhdGUgPSB0aGlzLnRleHRTdGF0ZXNbdGV4dEtleV07XG4gICAgICAgIHZhciBwaXhlbFJhdGlvID0gdGhpcy5waXhlbFJhdGlvO1xuICAgICAgICB2YXIgc2NhbGUgPSBbXG4gICAgICAgICAgICB0ZXh0U3RhdGUuc2NhbGVbMF0gKiBwaXhlbFJhdGlvLFxuICAgICAgICAgICAgdGV4dFN0YXRlLnNjYWxlWzFdICogcGl4ZWxSYXRpbyxcbiAgICAgICAgXTtcbiAgICAgICAgdmFyIGFsaWduID0gaG9yaXpvbnRhbFRleHRBbGlnbih0ZXh0LCB0ZXh0U3RhdGUudGV4dEFsaWduIHx8IGRlZmF1bHRUZXh0QWxpZ24pO1xuICAgICAgICB2YXIgc3Ryb2tlV2lkdGggPSBzdHJva2VLZXkgJiYgc3Ryb2tlU3RhdGUubGluZVdpZHRoID8gc3Ryb2tlU3RhdGUubGluZVdpZHRoIDogMDtcbiAgICAgICAgdmFyIGxpbmVzID0gdGV4dC5zcGxpdCgnXFxuJyk7XG4gICAgICAgIHZhciBudW1MaW5lcyA9IGxpbmVzLmxlbmd0aDtcbiAgICAgICAgdmFyIHdpZHRocyA9IFtdO1xuICAgICAgICB2YXIgd2lkdGggPSBtZWFzdXJlVGV4dFdpZHRocyh0ZXh0U3RhdGUuZm9udCwgbGluZXMsIHdpZHRocyk7XG4gICAgICAgIHZhciBsaW5lSGVpZ2h0ID0gbWVhc3VyZVRleHRIZWlnaHQodGV4dFN0YXRlLmZvbnQpO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gbGluZUhlaWdodCAqIG51bUxpbmVzO1xuICAgICAgICB2YXIgcmVuZGVyV2lkdGggPSB3aWR0aCArIHN0cm9rZVdpZHRoO1xuICAgICAgICB2YXIgY29udGV4dEluc3RydWN0aW9ucyA9IFtdO1xuICAgICAgICAvLyBtYWtlIGNhbnZhcyAyIHBpeGVscyB3aWRlciB0byBhY2NvdW50IGZvciBpdGFsaWMgdGV4dCB3aWR0aCBtZWFzdXJlbWVudCBlcnJvcnNcbiAgICAgICAgdmFyIHcgPSAocmVuZGVyV2lkdGggKyAyKSAqIHNjYWxlWzBdO1xuICAgICAgICB2YXIgaCA9IChoZWlnaHQgKyBzdHJva2VXaWR0aCkgKiBzY2FsZVsxXTtcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuTGFiZWx9ICovXG4gICAgICAgIHZhciBsYWJlbCA9IHtcbiAgICAgICAgICAgIHdpZHRoOiB3IDwgMCA/IE1hdGguZmxvb3IodykgOiBNYXRoLmNlaWwodyksXG4gICAgICAgICAgICBoZWlnaHQ6IGggPCAwID8gTWF0aC5mbG9vcihoKSA6IE1hdGguY2VpbChoKSxcbiAgICAgICAgICAgIGNvbnRleHRJbnN0cnVjdGlvbnM6IGNvbnRleHRJbnN0cnVjdGlvbnMsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChzY2FsZVswXSAhPSAxIHx8IHNjYWxlWzFdICE9IDEpIHtcbiAgICAgICAgICAgIGNvbnRleHRJbnN0cnVjdGlvbnMucHVzaCgnc2NhbGUnLCBzY2FsZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dEluc3RydWN0aW9ucy5wdXNoKCdmb250JywgdGV4dFN0YXRlLmZvbnQpO1xuICAgICAgICBpZiAoc3Ryb2tlS2V5KSB7XG4gICAgICAgICAgICBjb250ZXh0SW5zdHJ1Y3Rpb25zLnB1c2goJ3N0cm9rZVN0eWxlJywgc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGUpO1xuICAgICAgICAgICAgY29udGV4dEluc3RydWN0aW9ucy5wdXNoKCdsaW5lV2lkdGgnLCBzdHJva2VXaWR0aCk7XG4gICAgICAgICAgICBjb250ZXh0SW5zdHJ1Y3Rpb25zLnB1c2goJ2xpbmVDYXAnLCBzdHJva2VTdGF0ZS5saW5lQ2FwKTtcbiAgICAgICAgICAgIGNvbnRleHRJbnN0cnVjdGlvbnMucHVzaCgnbGluZUpvaW4nLCBzdHJva2VTdGF0ZS5saW5lSm9pbik7XG4gICAgICAgICAgICBjb250ZXh0SW5zdHJ1Y3Rpb25zLnB1c2goJ21pdGVyTGltaXQnLCBzdHJva2VTdGF0ZS5taXRlckxpbWl0KTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgICAgdmFyIENvbnRleHQgPSBXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUyA/IE9mZnNjcmVlbkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCA6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgICAgICAgICAgIGlmIChDb250ZXh0LnByb3RvdHlwZS5zZXRMaW5lRGFzaCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHRJbnN0cnVjdGlvbnMucHVzaCgnc2V0TGluZURhc2gnLCBbc3Ryb2tlU3RhdGUubGluZURhc2hdKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0SW5zdHJ1Y3Rpb25zLnB1c2goJ2xpbmVEYXNoT2Zmc2V0Jywgc3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChmaWxsS2V5KSB7XG4gICAgICAgICAgICBjb250ZXh0SW5zdHJ1Y3Rpb25zLnB1c2goJ2ZpbGxTdHlsZScsIGZpbGxTdGF0ZS5maWxsU3R5bGUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHRJbnN0cnVjdGlvbnMucHVzaCgndGV4dEJhc2VsaW5lJywgJ21pZGRsZScpO1xuICAgICAgICBjb250ZXh0SW5zdHJ1Y3Rpb25zLnB1c2goJ3RleHRBbGlnbicsICdjZW50ZXInKTtcbiAgICAgICAgdmFyIGxlZnRSaWdodCA9IDAuNSAtIGFsaWduO1xuICAgICAgICB2YXIgeCA9IGFsaWduICogcmVuZGVyV2lkdGggKyBsZWZ0UmlnaHQgKiBzdHJva2VXaWR0aDtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGlmIChzdHJva2VLZXkpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1MaW5lczsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dEluc3RydWN0aW9ucy5wdXNoKCdzdHJva2VUZXh0JywgW1xuICAgICAgICAgICAgICAgICAgICBsaW5lc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgeCArIGxlZnRSaWdodCAqIHdpZHRoc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgMC41ICogKHN0cm9rZVdpZHRoICsgbGluZUhlaWdodCkgKyBpICogbGluZUhlaWdodCxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlsbEtleSkge1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG51bUxpbmVzOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0SW5zdHJ1Y3Rpb25zLnB1c2goJ2ZpbGxUZXh0JywgW1xuICAgICAgICAgICAgICAgICAgICBsaW5lc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgeCArIGxlZnRSaWdodCAqIHdpZHRoc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgMC41ICogKHN0cm9rZVdpZHRoICsgbGluZUhlaWdodCkgKyBpICogbGluZUhlaWdodCxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhYmVsc19ba2V5XSA9IGxhYmVsO1xuICAgICAgICByZXR1cm4gbGFiZWw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwMSAxc3QgcG9pbnQgb2YgdGhlIGJhY2tncm91bmQgYm94LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwMiAybmQgcG9pbnQgb2YgdGhlIGJhY2tncm91bmQgYm94LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwMyAzcmQgcG9pbnQgb2YgdGhlIGJhY2tncm91bmQgYm94LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwNCA0dGggcG9pbnQgb2YgdGhlIGJhY2tncm91bmQgYm94LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8Kj59IGZpbGxJbnN0cnVjdGlvbiBGaWxsIGluc3RydWN0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8Kj59IHN0cm9rZUluc3RydWN0aW9uIFN0cm9rZSBpbnN0cnVjdGlvbi5cbiAgICAgKi9cbiAgICBFeGVjdXRvci5wcm90b3R5cGUucmVwbGF5VGV4dEJhY2tncm91bmRfID0gZnVuY3Rpb24gKGNvbnRleHQsIHAxLCBwMiwgcDMsIHA0LCBmaWxsSW5zdHJ1Y3Rpb24sIHN0cm9rZUluc3RydWN0aW9uKSB7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGNvbnRleHQubW92ZVRvLmFwcGx5KGNvbnRleHQsIHAxKTtcbiAgICAgICAgY29udGV4dC5saW5lVG8uYXBwbHkoY29udGV4dCwgcDIpO1xuICAgICAgICBjb250ZXh0LmxpbmVUby5hcHBseShjb250ZXh0LCBwMyk7XG4gICAgICAgIGNvbnRleHQubGluZVRvLmFwcGx5KGNvbnRleHQsIHA0KTtcbiAgICAgICAgY29udGV4dC5saW5lVG8uYXBwbHkoY29udGV4dCwgcDEpO1xuICAgICAgICBpZiAoZmlsbEluc3RydWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmFsaWduRmlsbF8gPSAvKiogQHR5cGUge2Jvb2xlYW59ICovIChmaWxsSW5zdHJ1Y3Rpb25bMl0pO1xuICAgICAgICAgICAgdGhpcy5maWxsXyhjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3Ryb2tlSW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3Ryb2tlU3R5bGVfKGNvbnRleHQsIFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtBcnJheTwqPn0gKi8gKHN0cm9rZUluc3RydWN0aW9uKSk7XG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzaGVldFdpZHRoIFdpZHRoIG9mIHRoZSBzcHJpdGUgc2hlZXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNoZWV0SGVpZ2h0IEhlaWdodCBvZiB0aGUgc3ByaXRlIHNoZWV0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjZW50ZXJYIFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNlbnRlclkgWS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGggV2lkdGguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCBIZWlnaHQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFuY2hvclggQW5jaG9yIFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFuY2hvclkgQW5jaG9yIFkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9yaWdpblggT3JpZ2luIFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9yaWdpblkgT3JpZ2luIFkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc2l6ZS5qc1wiKS5TaXplfSBzY2FsZSBTY2FsZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNuYXBUb1BpeGVsIFNuYXAgdG8gcGl4ZWwuXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBwYWRkaW5nIFBhZGRpbmcuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBmaWxsU3Ryb2tlIEJhY2tncm91bmQgZmlsbCBvciBzdHJva2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICogQHJldHVybiB7SW1hZ2VPckxhYmVsRGltZW5zaW9uc30gRGltZW5zaW9ucyBmb3IgcG9zaXRpb25pbmcgYW5kIGRlY2x1dHRlcmluZyB0aGUgaW1hZ2Ugb3IgbGFiZWwuXG4gICAgICovXG4gICAgRXhlY3V0b3IucHJvdG90eXBlLmNhbGN1bGF0ZUltYWdlT3JMYWJlbERpbWVuc2lvbnNfID0gZnVuY3Rpb24gKHNoZWV0V2lkdGgsIHNoZWV0SGVpZ2h0LCBjZW50ZXJYLCBjZW50ZXJZLCB3aWR0aCwgaGVpZ2h0LCBhbmNob3JYLCBhbmNob3JZLCBvcmlnaW5YLCBvcmlnaW5ZLCByb3RhdGlvbiwgc2NhbGUsIHNuYXBUb1BpeGVsLCBwYWRkaW5nLCBmaWxsU3Ryb2tlLCBmZWF0dXJlKSB7XG4gICAgICAgIGFuY2hvclggKj0gc2NhbGVbMF07XG4gICAgICAgIGFuY2hvclkgKj0gc2NhbGVbMV07XG4gICAgICAgIHZhciB4ID0gY2VudGVyWCAtIGFuY2hvclg7XG4gICAgICAgIHZhciB5ID0gY2VudGVyWSAtIGFuY2hvclk7XG4gICAgICAgIHZhciB3ID0gd2lkdGggKyBvcmlnaW5YID4gc2hlZXRXaWR0aCA/IHNoZWV0V2lkdGggLSBvcmlnaW5YIDogd2lkdGg7XG4gICAgICAgIHZhciBoID0gaGVpZ2h0ICsgb3JpZ2luWSA+IHNoZWV0SGVpZ2h0ID8gc2hlZXRIZWlnaHQgLSBvcmlnaW5ZIDogaGVpZ2h0O1xuICAgICAgICB2YXIgYm94VyA9IHBhZGRpbmdbM10gKyB3ICogc2NhbGVbMF0gKyBwYWRkaW5nWzFdO1xuICAgICAgICB2YXIgYm94SCA9IHBhZGRpbmdbMF0gKyBoICogc2NhbGVbMV0gKyBwYWRkaW5nWzJdO1xuICAgICAgICB2YXIgYm94WCA9IHggLSBwYWRkaW5nWzNdO1xuICAgICAgICB2YXIgYm94WSA9IHkgLSBwYWRkaW5nWzBdO1xuICAgICAgICBpZiAoZmlsbFN0cm9rZSB8fCByb3RhdGlvbiAhPT0gMCkge1xuICAgICAgICAgICAgcDFbMF0gPSBib3hYO1xuICAgICAgICAgICAgcDRbMF0gPSBib3hYO1xuICAgICAgICAgICAgcDFbMV0gPSBib3hZO1xuICAgICAgICAgICAgcDJbMV0gPSBib3hZO1xuICAgICAgICAgICAgcDJbMF0gPSBib3hYICsgYm94VztcbiAgICAgICAgICAgIHAzWzBdID0gcDJbMF07XG4gICAgICAgICAgICBwM1sxXSA9IGJveFkgKyBib3hIO1xuICAgICAgICAgICAgcDRbMV0gPSBwM1sxXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdHJhbnNmb3JtO1xuICAgICAgICBpZiAocm90YXRpb24gIT09IDApIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IGNvbXBvc2VUcmFuc2Zvcm0oY3JlYXRlVHJhbnNmb3JtKCksIGNlbnRlclgsIGNlbnRlclksIDEsIDEsIHJvdGF0aW9uLCAtY2VudGVyWCwgLWNlbnRlclkpO1xuICAgICAgICAgICAgYXBwbHlUcmFuc2Zvcm0odHJhbnNmb3JtLCBwMSk7XG4gICAgICAgICAgICBhcHBseVRyYW5zZm9ybSh0cmFuc2Zvcm0sIHAyKTtcbiAgICAgICAgICAgIGFwcGx5VHJhbnNmb3JtKHRyYW5zZm9ybSwgcDMpO1xuICAgICAgICAgICAgYXBwbHlUcmFuc2Zvcm0odHJhbnNmb3JtLCBwNCk7XG4gICAgICAgICAgICBjcmVhdGVPclVwZGF0ZShNYXRoLm1pbihwMVswXSwgcDJbMF0sIHAzWzBdLCBwNFswXSksIE1hdGgubWluKHAxWzFdLCBwMlsxXSwgcDNbMV0sIHA0WzFdKSwgTWF0aC5tYXgocDFbMF0sIHAyWzBdLCBwM1swXSwgcDRbMF0pLCBNYXRoLm1heChwMVsxXSwgcDJbMV0sIHAzWzFdLCBwNFsxXSksIHRtcEV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjcmVhdGVPclVwZGF0ZShNYXRoLm1pbihib3hYLCBib3hYICsgYm94VyksIE1hdGgubWluKGJveFksIGJveFkgKyBib3hIKSwgTWF0aC5tYXgoYm94WCwgYm94WCArIGJveFcpLCBNYXRoLm1heChib3hZLCBib3hZICsgYm94SCksIHRtcEV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNuYXBUb1BpeGVsKSB7XG4gICAgICAgICAgICB4ID0gTWF0aC5yb3VuZCh4KTtcbiAgICAgICAgICAgIHkgPSBNYXRoLnJvdW5kKHkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkcmF3SW1hZ2VYOiB4LFxuICAgICAgICAgICAgZHJhd0ltYWdlWTogeSxcbiAgICAgICAgICAgIGRyYXdJbWFnZVc6IHcsXG4gICAgICAgICAgICBkcmF3SW1hZ2VIOiBoLFxuICAgICAgICAgICAgb3JpZ2luWDogb3JpZ2luWCxcbiAgICAgICAgICAgIG9yaWdpblk6IG9yaWdpblksXG4gICAgICAgICAgICBkZWNsdXR0ZXJCb3g6IHtcbiAgICAgICAgICAgICAgICBtaW5YOiB0bXBFeHRlbnRbMF0sXG4gICAgICAgICAgICAgICAgbWluWTogdG1wRXh0ZW50WzFdLFxuICAgICAgICAgICAgICAgIG1heFg6IHRtcEV4dGVudFsyXSxcbiAgICAgICAgICAgICAgICBtYXhZOiB0bXBFeHRlbnRbM10sXG4gICAgICAgICAgICAgICAgdmFsdWU6IGZlYXR1cmUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FudmFzVHJhbnNmb3JtOiB0cmFuc2Zvcm0sXG4gICAgICAgICAgICBzY2FsZTogc2NhbGUsXG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvbnRleHRTY2FsZSBTY2FsZSBvZiB0aGUgY29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5MYWJlbHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IGltYWdlT3JMYWJlbCBJbWFnZS5cbiAgICAgKiBAcGFyYW0ge0ltYWdlT3JMYWJlbERpbWVuc2lvbnN9IGRpbWVuc2lvbnMgRGltZW5zaW9ucy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eSBPcGFjaXR5LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8Kj59IGZpbGxJbnN0cnVjdGlvbiBGaWxsIGluc3RydWN0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8Kj59IHN0cm9rZUluc3RydWN0aW9uIFN0cm9rZSBpbnN0cnVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgaW1hZ2Ugb3IgbGFiZWwgd2FzIHJlbmRlcmVkLlxuICAgICAqL1xuICAgIEV4ZWN1dG9yLnByb3RvdHlwZS5yZXBsYXlJbWFnZU9yTGFiZWxfID0gZnVuY3Rpb24gKGNvbnRleHQsIGNvbnRleHRTY2FsZSwgaW1hZ2VPckxhYmVsLCBkaW1lbnNpb25zLCBvcGFjaXR5LCBmaWxsSW5zdHJ1Y3Rpb24sIHN0cm9rZUluc3RydWN0aW9uKSB7XG4gICAgICAgIHZhciBmaWxsU3Ryb2tlID0gISEoZmlsbEluc3RydWN0aW9uIHx8IHN0cm9rZUluc3RydWN0aW9uKTtcbiAgICAgICAgdmFyIGJveCA9IGRpbWVuc2lvbnMuZGVjbHV0dGVyQm94O1xuICAgICAgICB2YXIgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgICAgIHZhciBzdHJva2VQYWRkaW5nID0gc3Ryb2tlSW5zdHJ1Y3Rpb25cbiAgICAgICAgICAgID8gKHN0cm9rZUluc3RydWN0aW9uWzJdICogZGltZW5zaW9ucy5zY2FsZVswXSkgLyAyXG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIHZhciBpbnRlcnNlY3RzID0gYm94Lm1pblggLSBzdHJva2VQYWRkaW5nIDw9IGNhbnZhcy53aWR0aCAvIGNvbnRleHRTY2FsZSAmJlxuICAgICAgICAgICAgYm94Lm1heFggKyBzdHJva2VQYWRkaW5nID49IDAgJiZcbiAgICAgICAgICAgIGJveC5taW5ZIC0gc3Ryb2tlUGFkZGluZyA8PSBjYW52YXMuaGVpZ2h0IC8gY29udGV4dFNjYWxlICYmXG4gICAgICAgICAgICBib3gubWF4WSArIHN0cm9rZVBhZGRpbmcgPj0gMDtcbiAgICAgICAgaWYgKGludGVyc2VjdHMpIHtcbiAgICAgICAgICAgIGlmIChmaWxsU3Ryb2tlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXBsYXlUZXh0QmFja2dyb3VuZF8oY29udGV4dCwgcDEsIHAyLCBwMywgcDQsIFxuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8Kj59ICovIChmaWxsSW5zdHJ1Y3Rpb24pLCBcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUge0FycmF5PCo+fSAqLyAoc3Ryb2tlSW5zdHJ1Y3Rpb24pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRyYXdJbWFnZU9yTGFiZWwoY29udGV4dCwgZGltZW5zaW9ucy5jYW52YXNUcmFuc2Zvcm0sIG9wYWNpdHksIGltYWdlT3JMYWJlbCwgZGltZW5zaW9ucy5vcmlnaW5YLCBkaW1lbnNpb25zLm9yaWdpblksIGRpbWVuc2lvbnMuZHJhd0ltYWdlVywgZGltZW5zaW9ucy5kcmF3SW1hZ2VILCBkaW1lbnNpb25zLmRyYXdJbWFnZVgsIGRpbWVuc2lvbnMuZHJhd0ltYWdlWSwgZGltZW5zaW9ucy5zY2FsZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICovXG4gICAgRXhlY3V0b3IucHJvdG90eXBlLmZpbGxfID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgICAgaWYgKHRoaXMuYWxpZ25GaWxsXykge1xuICAgICAgICAgICAgdmFyIG9yaWdpbl8xID0gYXBwbHlUcmFuc2Zvcm0odGhpcy5yZW5kZXJlZFRyYW5zZm9ybV8sIFswLCAwXSk7XG4gICAgICAgICAgICB2YXIgcmVwZWF0U2l6ZSA9IDUxMiAqIHRoaXMucGl4ZWxSYXRpbztcbiAgICAgICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgICAgY29udGV4dC50cmFuc2xhdGUob3JpZ2luXzFbMF0gJSByZXBlYXRTaXplLCBvcmlnaW5fMVsxXSAlIHJlcGVhdFNpemUpO1xuICAgICAgICAgICAgY29udGV4dC5yb3RhdGUodGhpcy52aWV3Um90YXRpb25fKTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LmZpbGwoKTtcbiAgICAgICAgaWYgKHRoaXMuYWxpZ25GaWxsXykge1xuICAgICAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PCo+fSBpbnN0cnVjdGlvbiBJbnN0cnVjdGlvbi5cbiAgICAgKi9cbiAgICBFeGVjdXRvci5wcm90b3R5cGUuc2V0U3Ryb2tlU3R5bGVfID0gZnVuY3Rpb24gKGNvbnRleHQsIGluc3RydWN0aW9uKSB7XG4gICAgICAgIGNvbnRleHRbJ3N0cm9rZVN0eWxlJ10gPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9ICovIChpbnN0cnVjdGlvblsxXSk7XG4gICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsyXSk7XG4gICAgICAgIGNvbnRleHQubGluZUNhcCA9IC8qKiBAdHlwZSB7Q2FudmFzTGluZUNhcH0gKi8gKGluc3RydWN0aW9uWzNdKTtcbiAgICAgICAgY29udGV4dC5saW5lSm9pbiA9IC8qKiBAdHlwZSB7Q2FudmFzTGluZUpvaW59ICovIChpbnN0cnVjdGlvbls0XSk7XG4gICAgICAgIGNvbnRleHQubWl0ZXJMaW1pdCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bNV0pO1xuICAgICAgICBpZiAoY29udGV4dC5zZXRMaW5lRGFzaCkge1xuICAgICAgICAgICAgY29udGV4dC5saW5lRGFzaE9mZnNldCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bN10pO1xuICAgICAgICAgICAgY29udGV4dC5zZXRMaW5lRGFzaCgvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovIChpbnN0cnVjdGlvbls2XSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHRvIGRyYXcuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRLZXkgVGhlIGtleSBvZiB0aGUgdGV4dCBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3Ryb2tlS2V5IFRoZSBrZXkgZm9yIHRoZSBzdHJva2Ugc3RhdGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGxLZXkgVGhlIGtleSBmb3IgdGhlIGZpbGwgc3RhdGUuXG4gICAgICogQHJldHVybiB7e2xhYmVsOiBpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuTGFiZWwsIGFuY2hvclg6IG51bWJlciwgYW5jaG9yWTogbnVtYmVyfX0gVGhlIHRleHQgaW1hZ2UgYW5kIGl0cyBhbmNob3IuXG4gICAgICovXG4gICAgRXhlY3V0b3IucHJvdG90eXBlLmRyYXdMYWJlbFdpdGhQb2ludFBsYWNlbWVudF8gPSBmdW5jdGlvbiAodGV4dCwgdGV4dEtleSwgc3Ryb2tlS2V5LCBmaWxsS2V5KSB7XG4gICAgICAgIHZhciB0ZXh0U3RhdGUgPSB0aGlzLnRleHRTdGF0ZXNbdGV4dEtleV07XG4gICAgICAgIHZhciBsYWJlbCA9IHRoaXMuY3JlYXRlTGFiZWwodGV4dCwgdGV4dEtleSwgZmlsbEtleSwgc3Ryb2tlS2V5KTtcbiAgICAgICAgdmFyIHN0cm9rZVN0YXRlID0gdGhpcy5zdHJva2VTdGF0ZXNbc3Ryb2tlS2V5XTtcbiAgICAgICAgdmFyIHBpeGVsUmF0aW8gPSB0aGlzLnBpeGVsUmF0aW87XG4gICAgICAgIHZhciBhbGlnbiA9IGhvcml6b250YWxUZXh0QWxpZ24odGV4dCwgdGV4dFN0YXRlLnRleHRBbGlnbiB8fCBkZWZhdWx0VGV4dEFsaWduKTtcbiAgICAgICAgdmFyIGJhc2VsaW5lID0gVEVYVF9BTElHTlt0ZXh0U3RhdGUudGV4dEJhc2VsaW5lIHx8IGRlZmF1bHRUZXh0QmFzZWxpbmVdO1xuICAgICAgICB2YXIgc3Ryb2tlV2lkdGggPSBzdHJva2VTdGF0ZSAmJiBzdHJva2VTdGF0ZS5saW5lV2lkdGggPyBzdHJva2VTdGF0ZS5saW5lV2lkdGggOiAwO1xuICAgICAgICAvLyBSZW1vdmUgdGhlIDIgcGl4ZWxzIHdlIGFkZGVkIGluIGNyZWF0ZUxhYmVsKCkgZm9yIHRoZSBhbmNob3JcbiAgICAgICAgdmFyIHdpZHRoID0gbGFiZWwud2lkdGggLyBwaXhlbFJhdGlvIC0gMiAqIHRleHRTdGF0ZS5zY2FsZVswXTtcbiAgICAgICAgdmFyIGFuY2hvclggPSBhbGlnbiAqIHdpZHRoICsgMiAqICgwLjUgLSBhbGlnbikgKiBzdHJva2VXaWR0aDtcbiAgICAgICAgdmFyIGFuY2hvclkgPSAoYmFzZWxpbmUgKiBsYWJlbC5oZWlnaHQpIC8gcGl4ZWxSYXRpbyArXG4gICAgICAgICAgICAyICogKDAuNSAtIGJhc2VsaW5lKSAqIHN0cm9rZVdpZHRoO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICAgICAgYW5jaG9yWDogYW5jaG9yWCxcbiAgICAgICAgICAgIGFuY2hvclk6IGFuY2hvclksXG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvbnRleHRTY2FsZSBTY2FsZSBvZiB0aGUgY29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gICAgICogQHBhcmFtIHtBcnJheTwqPn0gaW5zdHJ1Y3Rpb25zIEluc3RydWN0aW9ucyBhcnJheS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNuYXBUb1BpeGVsIFNuYXAgcG9pbnQgc3ltYm9scyBhbmQgdGV4dCB0byBpbnRlZ2VyIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge0ZlYXR1cmVDYWxsYmFjazxUPj19IG9wdF9mZWF0dXJlQ2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnQ9fSBvcHRfaGl0RXh0ZW50IE9ubHkgY2hlY2tcbiAgICAgKiAgICAgZmVhdHVyZXMgdGhhdCBpbnRlcnNlY3QgdGhpcyBleHRlbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCJyYnVzaFwiKS5kZWZhdWx0PX0gb3B0X2RlY2x1dHRlclRyZWUgRGVjbHV0dGVyIHRyZWUuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgKiBAdGVtcGxhdGUgVFxuICAgICAqL1xuICAgIEV4ZWN1dG9yLnByb3RvdHlwZS5leGVjdXRlXyA9IGZ1bmN0aW9uIChjb250ZXh0LCBjb250ZXh0U2NhbGUsIHRyYW5zZm9ybSwgaW5zdHJ1Y3Rpb25zLCBzbmFwVG9QaXhlbCwgb3B0X2ZlYXR1cmVDYWxsYmFjaywgb3B0X2hpdEV4dGVudCwgb3B0X2RlY2x1dHRlclRyZWUpIHtcbiAgICAgICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgICAgICB2YXIgcGl4ZWxDb29yZGluYXRlcztcbiAgICAgICAgaWYgKHRoaXMucGl4ZWxDb29yZGluYXRlc18gJiYgZXF1YWxzKHRyYW5zZm9ybSwgdGhpcy5yZW5kZXJlZFRyYW5zZm9ybV8pKSB7XG4gICAgICAgICAgICBwaXhlbENvb3JkaW5hdGVzID0gdGhpcy5waXhlbENvb3JkaW5hdGVzXztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5waXhlbENvb3JkaW5hdGVzXykge1xuICAgICAgICAgICAgICAgIHRoaXMucGl4ZWxDb29yZGluYXRlc18gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBpeGVsQ29vcmRpbmF0ZXMgPSB0cmFuc2Zvcm0yRCh0aGlzLmNvb3JkaW5hdGVzLCAwLCB0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aCwgMiwgdHJhbnNmb3JtLCB0aGlzLnBpeGVsQ29vcmRpbmF0ZXNfKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybVNldEZyb21BcnJheSh0aGlzLnJlbmRlcmVkVHJhbnNmb3JtXywgdHJhbnNmb3JtKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaSA9IDA7IC8vIGluc3RydWN0aW9uIGluZGV4XG4gICAgICAgIHZhciBpaSA9IGluc3RydWN0aW9ucy5sZW5ndGg7IC8vIGVuZCBvZiBpbnN0cnVjdGlvbnNcbiAgICAgICAgdmFyIGQgPSAwOyAvLyBkYXRhIGluZGV4XG4gICAgICAgIHZhciBkZDsgLy8gZW5kIG9mIHBlci1pbnN0cnVjdGlvbiBkYXRhXG4gICAgICAgIHZhciBhbmNob3JYLCBhbmNob3JZLCBwcmV2WCwgcHJldlksIHJvdW5kWCwgcm91bmRZLCBpbWFnZSwgdGV4dCwgdGV4dEtleSwgc3Ryb2tlS2V5LCBmaWxsS2V5O1xuICAgICAgICB2YXIgcGVuZGluZ0ZpbGwgPSAwO1xuICAgICAgICB2YXIgcGVuZGluZ1N0cm9rZSA9IDA7XG4gICAgICAgIHZhciBsYXN0RmlsbEluc3RydWN0aW9uID0gbnVsbDtcbiAgICAgICAgdmFyIGxhc3RTdHJva2VJbnN0cnVjdGlvbiA9IG51bGw7XG4gICAgICAgIHZhciBjb29yZGluYXRlQ2FjaGUgPSB0aGlzLmNvb3JkaW5hdGVDYWNoZV87XG4gICAgICAgIHZhciB2aWV3Um90YXRpb24gPSB0aGlzLnZpZXdSb3RhdGlvbl87XG4gICAgICAgIHZhciB2aWV3Um90YXRpb25Gcm9tVHJhbnNmb3JtID0gTWF0aC5yb3VuZChNYXRoLmF0YW4yKC10cmFuc2Zvcm1bMV0sIHRyYW5zZm9ybVswXSkgKiAxZTEyKSAvIDFlMTI7XG4gICAgICAgIHZhciBzdGF0ZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vcmVuZGVyLmpzXCIpLlN0YXRlfSAqLyAoe1xuICAgICAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgICAgICAgIHBpeGVsUmF0aW86IHRoaXMucGl4ZWxSYXRpbyxcbiAgICAgICAgICAgIHJlc29sdXRpb246IHRoaXMucmVzb2x1dGlvbixcbiAgICAgICAgICAgIHJvdGF0aW9uOiB2aWV3Um90YXRpb24sXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBXaGVuIHRoZSBiYXRjaCBzaXplIGdldHMgdG9vIGJpZywgcGVyZm9ybWFuY2UgZGVjcmVhc2VzLiAyMDAgaXMgYSBnb29kXG4gICAgICAgIC8vIGJhbGFuY2UgYmV0d2VlbiBiYXRjaCBzaXplIGFuZCBudW1iZXIgb2YgZmlsbC9zdHJva2UgaW5zdHJ1Y3Rpb25zLlxuICAgICAgICB2YXIgYmF0Y2hTaXplID0gdGhpcy5pbnN0cnVjdGlvbnMgIT0gaW5zdHJ1Y3Rpb25zIHx8IHRoaXMub3ZlcmxhcHMgPyAwIDogMjAwO1xuICAgICAgICB2YXIgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSAqLyBmZWF0dXJlO1xuICAgICAgICB2YXIgeCwgeSwgY3VycmVudEdlb21ldHJ5O1xuICAgICAgICB3aGlsZSAoaSA8IGlpKSB7XG4gICAgICAgICAgICB2YXIgaW5zdHJ1Y3Rpb24gPSBpbnN0cnVjdGlvbnNbaV07XG4gICAgICAgICAgICB2YXIgdHlwZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9JbnN0cnVjdGlvbi5qc1wiKS5kZWZhdWx0fSAqLyAoaW5zdHJ1Y3Rpb25bMF0pO1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBDYW52YXNJbnN0cnVjdGlvbi5CRUdJTl9HRU9NRVRSWTpcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gKi8gKGluc3RydWN0aW9uWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEdlb21ldHJ5ID0gaW5zdHJ1Y3Rpb25bM107XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmVhdHVyZS5nZXRHZW9tZXRyeSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsyXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob3B0X2hpdEV4dGVudCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhaW50ZXJzZWN0cyhvcHRfaGl0RXh0ZW50LCBjdXJyZW50R2VvbWV0cnkuZ2V0RXh0ZW50KCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsyXSkgKyAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgQ2FudmFzSW5zdHJ1Y3Rpb24uQkVHSU5fUEFUSDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdGaWxsID4gYmF0Y2hTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGxfKGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0ZpbGwgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nU3Ryb2tlID4gYmF0Y2hTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1N0cm9rZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwZW5kaW5nRmlsbCAmJiAhcGVuZGluZ1N0cm9rZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZYID0gTmFOO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlkgPSBOYU47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLkNJUkNMRTpcbiAgICAgICAgICAgICAgICAgICAgZCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMV0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeDEgPSBwaXhlbENvb3JkaW5hdGVzW2RdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeTEgPSBwaXhlbENvb3JkaW5hdGVzW2QgKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHgyID0gcGl4ZWxDb29yZGluYXRlc1tkICsgMl07XG4gICAgICAgICAgICAgICAgICAgIHZhciB5MiA9IHBpeGVsQ29vcmRpbmF0ZXNbZCArIDNdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZHggPSB4MiAtIHgxO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZHkgPSB5MiAtIHkxO1xuICAgICAgICAgICAgICAgICAgICB2YXIgciA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKHgxICsgciwgeTEpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmFyYyh4MSwgeTEsIHIsIDAsIDIgKiBNYXRoLlBJLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLkNMT1NFX1BBVEg6XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDYW52YXNJbnN0cnVjdGlvbi5DVVNUT006XG4gICAgICAgICAgICAgICAgICAgIGQgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgZGQgPSBpbnN0cnVjdGlvblsyXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChpbnN0cnVjdGlvblszXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZW5kZXJlciA9IGluc3RydWN0aW9uWzRdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm4gPSBpbnN0cnVjdGlvbi5sZW5ndGggPT0gNiA/IGluc3RydWN0aW9uWzVdIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5nZW9tZXRyeSA9IGdlb21ldHJ5O1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5mZWF0dXJlID0gZmVhdHVyZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaSBpbiBjb29yZGluYXRlQ2FjaGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlQ2FjaGVbaV0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgY29vcmRzID0gY29vcmRpbmF0ZUNhY2hlW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuKHBpeGVsQ29vcmRpbmF0ZXMsIGQsIGRkLCAyLCBjb29yZHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRzWzBdID0gcGl4ZWxDb29yZGluYXRlc1tkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvb3Jkc1sxXSA9IHBpeGVsQ29vcmRpbmF0ZXNbZCArIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRzLmxlbmd0aCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIoY29vcmRzLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDYW52YXNJbnN0cnVjdGlvbi5EUkFXX0lNQUdFOlxuICAgICAgICAgICAgICAgICAgICBkID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxXSk7XG4gICAgICAgICAgICAgICAgICAgIGRkID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsyXSk7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlID0gLyoqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR9ICovIChpbnN0cnVjdGlvblszXSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbWFpbmluZyBhcmd1bWVudHMgaW4gRFJBV19JTUFHRSBhcmUgaW4gYWxwaGFiZXRpY2FsIG9yZGVyXG4gICAgICAgICAgICAgICAgICAgIGFuY2hvclggPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzRdKTtcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yWSA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bNV0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls2XSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvcGFjaXR5ID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls3XSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvcmlnaW5YID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls4XSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvcmlnaW5ZID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls5XSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3RhdGVXaXRoVmlldyA9IC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKGluc3RydWN0aW9uWzEwXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3RhdGlvbiA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMTFdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9zaXplLmpzXCIpLlNpemV9ICovIChpbnN0cnVjdGlvblsxMl0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzEzXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWNsdXR0ZXJJbWFnZVdpdGhUZXh0ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRGVjbHV0dGVySW1hZ2VXaXRoVGV4dH0gKi8gKGluc3RydWN0aW9uWzE0XSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaW1hZ2UgJiYgaW5zdHJ1Y3Rpb24ubGVuZ3RoID49IDE5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgbGFiZWwgaW1hZ2VzXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChpbnN0cnVjdGlvblsxOF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEtleSA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoaW5zdHJ1Y3Rpb25bMTldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUtleSA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoaW5zdHJ1Y3Rpb25bMjBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxLZXkgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKGluc3RydWN0aW9uWzIxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFiZWxXaXRoQW5jaG9yID0gdGhpcy5kcmF3TGFiZWxXaXRoUG9pbnRQbGFjZW1lbnRfKHRleHQsIHRleHRLZXksIHN0cm9rZUtleSwgZmlsbEtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IGxhYmVsV2l0aEFuY2hvci5sYWJlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uWzNdID0gaW1hZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dE9mZnNldFggPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzIyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmNob3JYID0gKGxhYmVsV2l0aEFuY2hvci5hbmNob3JYIC0gdGV4dE9mZnNldFgpICogdGhpcy5waXhlbFJhdGlvO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25bNF0gPSBhbmNob3JYO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRleHRPZmZzZXRZID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsyM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5jaG9yWSA9IChsYWJlbFdpdGhBbmNob3IuYW5jaG9yWSAtIHRleHRPZmZzZXRZKSAqIHRoaXMucGl4ZWxSYXRpbztcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uWzVdID0gYW5jaG9yWTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IGltYWdlLmhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uWzZdID0gaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBpbWFnZS53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uWzEzXSA9IHdpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBnZW9tZXRyeVdpZHRocyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RydWN0aW9uLmxlbmd0aCA+IDI0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeVdpZHRocyA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMjRdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFkZGluZyA9IHZvaWQgMCwgYmFja2dyb3VuZEZpbGwgPSB2b2lkIDAsIGJhY2tncm91bmRTdHJva2UgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnN0cnVjdGlvbi5sZW5ndGggPiAxNikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZyA9IC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGluc3RydWN0aW9uWzE1XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kRmlsbCA9IC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKGluc3RydWN0aW9uWzE2XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kU3Ryb2tlID0gLyoqIEB0eXBlIHtib29sZWFufSAqLyAoaW5zdHJ1Y3Rpb25bMTddKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmcgPSBkZWZhdWx0UGFkZGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRGaWxsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kU3Ryb2tlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvdGF0ZVdpdGhWaWV3ICYmIHZpZXdSb3RhdGlvbkZyb21UcmFuc2Zvcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbnZhcyBpcyBleHBlY3RlZCB0byBiZSByb3RhdGVkIHRvIHJldmVyc2UgdmlldyByb3RhdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uICs9IHZpZXdSb3RhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghcm90YXRlV2l0aFZpZXcgJiYgIXZpZXdSb3RhdGlvbkZyb21UcmFuc2Zvcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbnZhcyBpcyBub3Qgcm90YXRlZCwgaW1hZ2VzIG5lZWQgdG8gYmUgcm90YXRlZCBiYWNrIHRvIGJlIG5vcnRoLXVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRpb24gLT0gdmlld1JvdGF0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciB3aWR0aEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZm9yICg7IGQgPCBkZDsgZCArPSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2VvbWV0cnlXaWR0aHMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeVdpZHRoc1t3aWR0aEluZGV4KytdIDwgd2lkdGggLyB0aGlzLnBpeGVsUmF0aW8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaW1lbnNpb25zID0gdGhpcy5jYWxjdWxhdGVJbWFnZU9yTGFiZWxEaW1lbnNpb25zXyhpbWFnZS53aWR0aCwgaW1hZ2UuaGVpZ2h0LCBwaXhlbENvb3JkaW5hdGVzW2RdLCBwaXhlbENvb3JkaW5hdGVzW2QgKyAxXSwgd2lkdGgsIGhlaWdodCwgYW5jaG9yWCwgYW5jaG9yWSwgb3JpZ2luWCwgb3JpZ2luWSwgcm90YXRpb24sIHNjYWxlLCBzbmFwVG9QaXhlbCwgcGFkZGluZywgYmFja2dyb3VuZEZpbGwgfHwgYmFja2dyb3VuZFN0cm9rZSwgZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiogQHR5cGUge1JlcGxheUltYWdlT3JMYWJlbEFyZ3N9ICovXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRTY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaW1lbnNpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEZpbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAvKiogQHR5cGUge0FycmF5PCo+fSAqLyAobGFzdEZpbGxJbnN0cnVjdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRTdHJva2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAvKiogQHR5cGUge0FycmF5PCo+fSAqLyAobGFzdFN0cm9rZUluc3RydWN0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlQXJncyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZURlY2x1dHRlckJveCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRfZGVjbHV0dGVyVHJlZSAmJiBkZWNsdXR0ZXJJbWFnZVdpdGhUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkZWNsdXR0ZXJJbWFnZVdpdGhUZXh0W2RdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIG5vdyBoYXZlIHRoZSBpbWFnZSBmb3IgYW4gaW1hZ2UrdGV4dCBjb21iaW5hdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjbHV0dGVySW1hZ2VXaXRoVGV4dFtkXSA9IGFyZ3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvbid0IHJlbmRlciBhbnl0aGluZyBmb3Igbm93LCB3YWl0IGZvciB0aGUgdGV4dC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlQXJncyA9IGRlY2x1dHRlckltYWdlV2l0aFRleHRbZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGRlY2x1dHRlckltYWdlV2l0aFRleHRbZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VEZWNsdXR0ZXJCb3ggPSBnZXREZWNsdXR0ZXJCb3goaW1hZ2VBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0X2RlY2x1dHRlclRyZWUuY29sbGlkZXMoaW1hZ2VEZWNsdXR0ZXJCb3gpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRfZGVjbHV0dGVyVHJlZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdF9kZWNsdXR0ZXJUcmVlLmNvbGxpZGVzKGRpbWVuc2lvbnMuZGVjbHV0dGVyQm94KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlQXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIG5vdyBoYXZlIGltYWdlIGFuZCB0ZXh0IGZvciBhbiBpbWFnZSt0ZXh0IGNvbWJpbmF0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRfZGVjbHV0dGVyVHJlZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRfZGVjbHV0dGVyVHJlZS5pbnNlcnQoaW1hZ2VEZWNsdXR0ZXJCb3gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW5kZXIgdGhlIGltYWdlIGJlZm9yZSB3ZSByZW5kZXIgdGhlIHRleHQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBsYXlJbWFnZU9yTGFiZWxfLmFwcGx5KHRoaXMsIGltYWdlQXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0X2RlY2x1dHRlclRyZWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRfZGVjbHV0dGVyVHJlZS5pbnNlcnQoZGltZW5zaW9ucy5kZWNsdXR0ZXJCb3gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBsYXlJbWFnZU9yTGFiZWxfLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDYW52YXNJbnN0cnVjdGlvbi5EUkFXX0NIQVJTOlxuICAgICAgICAgICAgICAgICAgICB2YXIgYmVnaW4gPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMl0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmFzZWxpbmUgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzNdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG92ZXJmbG93ID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls0XSk7XG4gICAgICAgICAgICAgICAgICAgIGZpbGxLZXkgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKGluc3RydWN0aW9uWzVdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heEFuZ2xlID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls2XSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZWFzdXJlUGl4ZWxSYXRpbyA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bN10pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0WSA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bOF0pO1xuICAgICAgICAgICAgICAgICAgICBzdHJva2VLZXkgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKGluc3RydWN0aW9uWzldKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cm9rZVdpZHRoID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxMF0pO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChpbnN0cnVjdGlvblsxMV0pO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0S2V5ID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChpbnN0cnVjdGlvblsxMl0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGl4ZWxSYXRpb1NjYWxlID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxM10pLFxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxM10pLFxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dFN0YXRlID0gdGhpcy50ZXh0U3RhdGVzW3RleHRLZXldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm9udCA9IHRleHRTdGF0ZS5mb250O1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dFNjYWxlID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0YXRlLnNjYWxlWzBdICogbWVhc3VyZVBpeGVsUmF0aW8sXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0U3RhdGUuc2NhbGVbMV0gKiBtZWFzdXJlUGl4ZWxSYXRpbyxcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhY2hlZFdpZHRocyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvbnQgaW4gdGhpcy53aWR0aHNfKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZWRXaWR0aHMgPSB0aGlzLndpZHRoc19bZm9udF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZWRXaWR0aHMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2lkdGhzX1tmb250XSA9IGNhY2hlZFdpZHRocztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgcGF0aExlbmd0aCA9IGxpbmVTdHJpbmdMZW5ndGgocGl4ZWxDb29yZGluYXRlcywgYmVnaW4sIGVuZCwgMik7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0TGVuZ3RoID0gTWF0aC5hYnModGV4dFNjYWxlWzBdKSAqXG4gICAgICAgICAgICAgICAgICAgICAgICBtZWFzdXJlQW5kQ2FjaGVUZXh0V2lkdGgoZm9udCwgdGV4dCwgY2FjaGVkV2lkdGhzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG92ZXJmbG93IHx8IHRleHRMZW5ndGggPD0gcGF0aExlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRleHRBbGlnbiA9IHRoaXMudGV4dFN0YXRlc1t0ZXh0S2V5XS50ZXh0QWxpZ247XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnRNID0gKHBhdGhMZW5ndGggLSB0ZXh0TGVuZ3RoKSAqIFRFWFRfQUxJR05bdGV4dEFsaWduXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IGRyYXdUZXh0T25QYXRoKHBpeGVsQ29vcmRpbmF0ZXMsIGJlZ2luLCBlbmQsIDIsIHRleHQsIHN0YXJ0TSwgbWF4QW5nbGUsIE1hdGguYWJzKHRleHRTY2FsZVswXSksIG1lYXN1cmVBbmRDYWNoZVRleHRXaWR0aCwgZm9udCwgY2FjaGVkV2lkdGhzLCB2aWV3Um90YXRpb25Gcm9tVHJhbnNmb3JtID8gMCA6IHRoaXMudmlld1JvdGF0aW9uXyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcmF3Q2hhcnM6IGlmIChwYXJ0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8UmVwbGF5SW1hZ2VPckxhYmVsQXJncz59ICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcGxheUltYWdlT3JMYWJlbEFyZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHZvaWQgMCwgY2MgPSB2b2lkIDAsIGNoYXJzID0gdm9pZCAwLCBsYWJlbCA9IHZvaWQgMCwgcGFydCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3Ryb2tlS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoYyA9IDAsIGNjID0gcGFydHMubGVuZ3RoOyBjIDwgY2M7ICsrYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydCA9IHBhcnRzW2NdOyAvLyB4LCB5LCBhbmNob3JYLCByb3RhdGlvbiwgY2h1bmtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJzID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChwYXJ0WzRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsID0gdGhpcy5jcmVhdGVMYWJlbChjaGFycywgdGV4dEtleSwgJycsIHN0cm9rZUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmNob3JYID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi8gKHBhcnRbMl0pICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRleHRTY2FsZVswXSA8IDAgPyAtc3Ryb2tlV2lkdGggOiBzdHJva2VXaWR0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmNob3JZID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlbGluZSAqIGxhYmVsLmhlaWdodCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoMC41IC0gYmFzZWxpbmUpICogMiAqIHN0cm9rZVdpZHRoICogdGV4dFNjYWxlWzFdKSAvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0U2NhbGVbMF0gLVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRZO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpbWVuc2lvbnMgPSB0aGlzLmNhbGN1bGF0ZUltYWdlT3JMYWJlbERpbWVuc2lvbnNfKGxhYmVsLndpZHRoLCBsYWJlbC5oZWlnaHQsIHBhcnRbMF0sIHBhcnRbMV0sIGxhYmVsLndpZHRoLCBsYWJlbC5oZWlnaHQsIGFuY2hvclgsIGFuY2hvclksIDAsIDAsIHBhcnRbM10sIHBpeGVsUmF0aW9TY2FsZSwgZmFsc2UsIGRlZmF1bHRQYWRkaW5nLCBmYWxzZSwgZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0X2RlY2x1dHRlclRyZWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRfZGVjbHV0dGVyVHJlZS5jb2xsaWRlcyhkaW1lbnNpb25zLmRlY2x1dHRlckJveCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBkcmF3Q2hhcnM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYXlJbWFnZU9yTGFiZWxBcmdzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dFNjYWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpbWVuc2lvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsbEtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGMgPSAwLCBjYyA9IHBhcnRzLmxlbmd0aDsgYyA8IGNjOyArK2MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQgPSBwYXJ0c1tjXTsgLy8geCwgeSwgYW5jaG9yWCwgcm90YXRpb24sIGNodW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFycyA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAocGFydFs0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbCA9IHRoaXMuY3JlYXRlTGFiZWwoY2hhcnMsIHRleHRLZXksIGZpbGxLZXksICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvclggPSAvKiogQHR5cGUge251bWJlcn0gKi8gKHBhcnRbMl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5jaG9yWSA9IGJhc2VsaW5lICogbGFiZWwuaGVpZ2h0IC0gb2Zmc2V0WTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaW1lbnNpb25zID0gdGhpcy5jYWxjdWxhdGVJbWFnZU9yTGFiZWxEaW1lbnNpb25zXyhsYWJlbC53aWR0aCwgbGFiZWwuaGVpZ2h0LCBwYXJ0WzBdLCBwYXJ0WzFdLCBsYWJlbC53aWR0aCwgbGFiZWwuaGVpZ2h0LCBhbmNob3JYLCBhbmNob3JZLCAwLCAwLCBwYXJ0WzNdLCBwaXhlbFJhdGlvU2NhbGUsIGZhbHNlLCBkZWZhdWx0UGFkZGluZywgZmFsc2UsIGZlYXR1cmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdF9kZWNsdXR0ZXJUcmVlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0X2RlY2x1dHRlclRyZWUuY29sbGlkZXMoZGltZW5zaW9ucy5kZWNsdXR0ZXJCb3gpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgZHJhd0NoYXJzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGF5SW1hZ2VPckxhYmVsQXJncy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRTY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaW1lbnNpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdF9kZWNsdXR0ZXJUcmVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdF9kZWNsdXR0ZXJUcmVlLmxvYWQocmVwbGF5SW1hZ2VPckxhYmVsQXJncy5tYXAoZ2V0RGVjbHV0dGVyQm94KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGlfMSA9IDAsIGlpXzEgPSByZXBsYXlJbWFnZU9yTGFiZWxBcmdzLmxlbmd0aDsgaV8xIDwgaWlfMTsgKytpXzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBsYXlJbWFnZU9yTGFiZWxfLmFwcGx5KHRoaXMsIHJlcGxheUltYWdlT3JMYWJlbEFyZ3NbaV8xXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDYW52YXNJbnN0cnVjdGlvbi5FTkRfR0VPTUVUUlk6XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRfZmVhdHVyZUNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9ICovIChpbnN0cnVjdGlvblsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gb3B0X2ZlYXR1cmVDYWxsYmFjayhmZWF0dXJlLCBjdXJyZW50R2VvbWV0cnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLkZJTEw6XG4gICAgICAgICAgICAgICAgICAgIGlmIChiYXRjaFNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdGaWxsKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGxfKGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDYW52YXNJbnN0cnVjdGlvbi5NT1ZFX1RPX0xJTkVfVE86XG4gICAgICAgICAgICAgICAgICAgIGQgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgZGQgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzJdKTtcbiAgICAgICAgICAgICAgICAgICAgeCA9IHBpeGVsQ29vcmRpbmF0ZXNbZF07XG4gICAgICAgICAgICAgICAgICAgIHkgPSBwaXhlbENvb3JkaW5hdGVzW2QgKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgcm91bmRYID0gKHggKyAwLjUpIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgcm91bmRZID0gKHkgKyAwLjUpIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvdW5kWCAhPT0gcHJldlggfHwgcm91bmRZICE9PSBwcmV2WSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8oeCwgeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2WCA9IHJvdW5kWDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZZID0gcm91bmRZO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAoZCArPSAyOyBkIDwgZGQ7IGQgKz0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgeCA9IHBpeGVsQ29vcmRpbmF0ZXNbZF07XG4gICAgICAgICAgICAgICAgICAgICAgICB5ID0gcGl4ZWxDb29yZGluYXRlc1tkICsgMV07XG4gICAgICAgICAgICAgICAgICAgICAgICByb3VuZFggPSAoeCArIDAuNSkgfCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgcm91bmRZID0gKHkgKyAwLjUpIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkID09IGRkIC0gMiB8fCByb3VuZFggIT09IHByZXZYIHx8IHJvdW5kWSAhPT0gcHJldlkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyh4LCB5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2WCA9IHJvdW5kWDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2WSA9IHJvdW5kWTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICArK2k7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgQ2FudmFzSW5zdHJ1Y3Rpb24uU0VUX0ZJTExfU1RZTEU6XG4gICAgICAgICAgICAgICAgICAgIGxhc3RGaWxsSW5zdHJ1Y3Rpb24gPSBpbnN0cnVjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGlnbkZpbGxfID0gaW5zdHJ1Y3Rpb25bMl07XG4gICAgICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nRmlsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxsXyhjb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdGaWxsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nU3Ryb2tlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nU3Ryb2tlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gKi8gKGluc3RydWN0aW9uWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLlNFVF9TVFJPS0VfU1RZTEU6XG4gICAgICAgICAgICAgICAgICAgIGxhc3RTdHJva2VJbnN0cnVjdGlvbiA9IGluc3RydWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ1N0cm9rZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdTdHJva2UgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3Ryb2tlU3R5bGVfKGNvbnRleHQsIC8qKiBAdHlwZSB7QXJyYXk8Kj59ICovIChpbnN0cnVjdGlvbikpO1xuICAgICAgICAgICAgICAgICAgICArK2k7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgQ2FudmFzSW5zdHJ1Y3Rpb24uU1RST0tFOlxuICAgICAgICAgICAgICAgICAgICBpZiAoYmF0Y2hTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nU3Ryb2tlKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgKytpOyAvLyBjb25zdW1lIHRoZSBpbnN0cnVjdGlvbiBhbnl3YXksIHRvIGF2b2lkIGFuIGluZmluaXRlIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBlbmRpbmdGaWxsKSB7XG4gICAgICAgICAgICB0aGlzLmZpbGxfKGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwZW5kaW5nU3Ryb2tlKSB7XG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb250ZXh0U2NhbGUgU2NhbGUgb2YgdGhlIGNvbnRleHQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2aWV3Um90YXRpb24gVmlldyByb3RhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNuYXBUb1BpeGVsIFNuYXAgcG9pbnQgc3ltYm9scyBhbmQgdGV4dCB0byBpbnRlZ2VyIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcInJidXNoXCIpLmRlZmF1bHQ9fSBvcHRfZGVjbHV0dGVyVHJlZSBEZWNsdXR0ZXIgdHJlZS5cbiAgICAgKi9cbiAgICBFeGVjdXRvci5wcm90b3R5cGUuZXhlY3V0ZSA9IGZ1bmN0aW9uIChjb250ZXh0LCBjb250ZXh0U2NhbGUsIHRyYW5zZm9ybSwgdmlld1JvdGF0aW9uLCBzbmFwVG9QaXhlbCwgb3B0X2RlY2x1dHRlclRyZWUpIHtcbiAgICAgICAgdGhpcy52aWV3Um90YXRpb25fID0gdmlld1JvdGF0aW9uO1xuICAgICAgICB0aGlzLmV4ZWN1dGVfKGNvbnRleHQsIGNvbnRleHRTY2FsZSwgdHJhbnNmb3JtLCB0aGlzLmluc3RydWN0aW9ucywgc25hcFRvUGl4ZWwsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvcHRfZGVjbHV0dGVyVHJlZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmlld1JvdGF0aW9uIFZpZXcgcm90YXRpb24uXG4gICAgICogQHBhcmFtIHtGZWF0dXJlQ2FsbGJhY2s8VD49fSBvcHRfZmVhdHVyZUNhbGxiYWNrIEZlYXR1cmUgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50PX0gb3B0X2hpdEV4dGVudCBPbmx5IGNoZWNrXG4gICAgICogICAgIGZlYXR1cmVzIHRoYXQgaW50ZXJzZWN0IHRoaXMgZXh0ZW50LlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQuXG4gICAgICogQHRlbXBsYXRlIFRcbiAgICAgKi9cbiAgICBFeGVjdXRvci5wcm90b3R5cGUuZXhlY3V0ZUhpdERldGVjdGlvbiA9IGZ1bmN0aW9uIChjb250ZXh0LCB0cmFuc2Zvcm0sIHZpZXdSb3RhdGlvbiwgb3B0X2ZlYXR1cmVDYWxsYmFjaywgb3B0X2hpdEV4dGVudCkge1xuICAgICAgICB0aGlzLnZpZXdSb3RhdGlvbl8gPSB2aWV3Um90YXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmV4ZWN1dGVfKGNvbnRleHQsIDEsIHRyYW5zZm9ybSwgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMsIHRydWUsIG9wdF9mZWF0dXJlQ2FsbGJhY2ssIG9wdF9oaXRFeHRlbnQpO1xuICAgIH07XG4gICAgcmV0dXJuIEV4ZWN1dG9yO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IEV4ZWN1dG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXhlY3V0b3IuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9jYW52YXMvRXhlY3V0b3JHcm91cFxuICovXG5pbXBvcnQgQnVpbGRlclR5cGUgZnJvbSAnLi9CdWlsZGVyVHlwZS5qcyc7XG5pbXBvcnQgRXhlY3V0b3IgZnJvbSAnLi9FeGVjdXRvci5qcyc7XG5pbXBvcnQgeyBidWZmZXIsIGNyZWF0ZUVtcHR5LCBleHRlbmRDb29yZGluYXRlIH0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGNvbXBvc2UgYXMgY29tcG9zZVRyYW5zZm9ybSwgY3JlYXRlIGFzIGNyZWF0ZVRyYW5zZm9ybSwgfSBmcm9tICcuLi8uLi90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FudmFzQ29udGV4dDJEIH0gZnJvbSAnLi4vLi4vZG9tLmpzJztcbmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICcuLi8uLi9vYmouanMnO1xuaW1wb3J0IHsgbnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbiB9IGZyb20gJy4uLy4uL2FycmF5LmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybTJEIH0gZnJvbSAnLi4vLi4vZ2VvbS9mbGF0L3RyYW5zZm9ybS5qcyc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PGltcG9ydChcIi4vQnVpbGRlclR5cGUuanNcIikuZGVmYXVsdD59XG4gKi9cbnZhciBPUkRFUiA9IFtcbiAgICBCdWlsZGVyVHlwZS5QT0xZR09OLFxuICAgIEJ1aWxkZXJUeXBlLkNJUkNMRSxcbiAgICBCdWlsZGVyVHlwZS5MSU5FX1NUUklORyxcbiAgICBCdWlsZGVyVHlwZS5JTUFHRSxcbiAgICBCdWlsZGVyVHlwZS5URVhULFxuICAgIEJ1aWxkZXJUeXBlLkRFRkFVTFQsXG5dO1xudmFyIEV4ZWN1dG9yR3JvdXAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBtYXhFeHRlbnQgTWF4IGV4dGVudCBmb3IgY2xpcHBpbmcuIFdoZW4gYVxuICAgICAqIGBtYXhFeHRlbnRgIHdhcyBzZXQgb24gdGhlIEJ1aWxsZGVyIGZvciB0aGlzIGV4ZWN1dG9yIGdyb3VwLCB0aGUgc2FtZSBgbWF4RXh0ZW50YFxuICAgICAqIHNob3VsZCBiZSBzZXQgaGVyZSwgdW5sZXNzIHRoZSB0YXJnZXQgY29udGV4dCBkb2VzIG5vdCBleGNlZXQgdGhhdCBleHRlbnQgKHdoaWNoXG4gICAgICogY2FuIGJlIHRoZSBjYXNlIHdoZW4gcmVuZGVyaW5nIHRvIHRpbGVzKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3ZlcmxhcHMgVGhlIGV4ZWN1dG9yIGdyb3VwIGNhbiBoYXZlIG92ZXJsYXBwaW5nIGdlb21ldHJpZXMuXG4gICAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgIU9iamVjdDxpbXBvcnQoXCIuL0J1aWxkZXJUeXBlLmpzXCIpLmRlZmF1bHQsIGltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TZXJpYWxpemFibGVJbnN0cnVjdGlvbnM+Pn0gYWxsSW5zdHJ1Y3Rpb25zXG4gICAgICogVGhlIHNlcmlhbGl6YWJsZSBpbnN0cnVjdGlvbnMuXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfcmVuZGVyQnVmZmVyIE9wdGlvbmFsIHJlbmRlcmluZyBidWZmZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRXhlY3V0b3JHcm91cChtYXhFeHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIG92ZXJsYXBzLCBhbGxJbnN0cnVjdGlvbnMsIG9wdF9yZW5kZXJCdWZmZXIpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhFeHRlbnRfID0gbWF4RXh0ZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm92ZXJsYXBzXyA9IG92ZXJsYXBzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGl4ZWxSYXRpb18gPSBwaXhlbFJhdGlvO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlbmRlckJ1ZmZlcl8gPSBvcHRfcmVuZGVyQnVmZmVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCAhT2JqZWN0PGltcG9ydChcIi4vQnVpbGRlclR5cGUuanNcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi9FeGVjdXRvclwiKS5kZWZhdWx0Pj59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmV4ZWN1dG9yc0J5WkluZGV4XyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uQ29udGV4dF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhpdERldGVjdGlvblRyYW5zZm9ybV8gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgdGhpcy5jcmVhdGVFeGVjdXRvcnNfKGFsbEluc3RydWN0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICAgICAqL1xuICAgIEV4ZWN1dG9yR3JvdXAucHJvdG90eXBlLmNsaXAgPSBmdW5jdGlvbiAoY29udGV4dCwgdHJhbnNmb3JtKSB7XG4gICAgICAgIHZhciBmbGF0Q2xpcENvb3JkcyA9IHRoaXMuZ2V0Q2xpcENvb3Jkcyh0cmFuc2Zvcm0pO1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBjb250ZXh0Lm1vdmVUbyhmbGF0Q2xpcENvb3Jkc1swXSwgZmxhdENsaXBDb29yZHNbMV0pO1xuICAgICAgICBjb250ZXh0LmxpbmVUbyhmbGF0Q2xpcENvb3Jkc1syXSwgZmxhdENsaXBDb29yZHNbM10pO1xuICAgICAgICBjb250ZXh0LmxpbmVUbyhmbGF0Q2xpcENvb3Jkc1s0XSwgZmxhdENsaXBDb29yZHNbNV0pO1xuICAgICAgICBjb250ZXh0LmxpbmVUbyhmbGF0Q2xpcENvb3Jkc1s2XSwgZmxhdENsaXBDb29yZHNbN10pO1xuICAgICAgICBjb250ZXh0LmNsaXAoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBleGVjdXRvcnMgYW5kIHBvcHVsYXRlIHRoZW0gdXNpbmcgdGhlIHByb3ZpZGVkIGluc3RydWN0aW9ucy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICFPYmplY3Q8aW1wb3J0KFwiLi9CdWlsZGVyVHlwZS5qc1wiKS5kZWZhdWx0LCBpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuU2VyaWFsaXphYmxlSW5zdHJ1Y3Rpb25zPj59IGFsbEluc3RydWN0aW9ucyBUaGUgc2VyaWFsaXphYmxlIGluc3RydWN0aW9uc1xuICAgICAqL1xuICAgIEV4ZWN1dG9yR3JvdXAucHJvdG90eXBlLmNyZWF0ZUV4ZWN1dG9yc18gPSBmdW5jdGlvbiAoYWxsSW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgIGZvciAodmFyIHpJbmRleCBpbiBhbGxJbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBleGVjdXRvcnMgPSB0aGlzLmV4ZWN1dG9yc0J5WkluZGV4X1t6SW5kZXhdO1xuICAgICAgICAgICAgaWYgKGV4ZWN1dG9ycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZXhlY3V0b3JzID0ge307XG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRvcnNCeVpJbmRleF9bekluZGV4XSA9IGV4ZWN1dG9ycztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpbnN0cnVjdGlvbkJ5WmluZGV4ID0gYWxsSW5zdHJ1Y3Rpb25zW3pJbmRleF07XG4gICAgICAgICAgICB2YXIgcmVuZGVyQnVmZmVyID0gW3RoaXMucmVuZGVyQnVmZmVyXyB8fCAwLCB0aGlzLnJlbmRlckJ1ZmZlcl8gfHwgMF07XG4gICAgICAgICAgICBmb3IgKHZhciBidWlsZGVyVHlwZSBpbiBpbnN0cnVjdGlvbkJ5WmluZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIGluc3RydWN0aW9ucyA9IGluc3RydWN0aW9uQnlaaW5kZXhbYnVpbGRlclR5cGVdO1xuICAgICAgICAgICAgICAgIGV4ZWN1dG9yc1tidWlsZGVyVHlwZV0gPSBuZXcgRXhlY3V0b3IodGhpcy5yZXNvbHV0aW9uXywgdGhpcy5waXhlbFJhdGlvXywgdGhpcy5vdmVybGFwc18sIGluc3RydWN0aW9ucywgcmVuZGVyQnVmZmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0J1aWxkZXJUeXBlLmpzXCIpLmRlZmF1bHQ+fSBleGVjdXRvcnMgRXhlY3V0b3JzLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IEhhcyBleGVjdXRvcnMgb2YgdGhlIHByb3ZpZGVkIHR5cGVzLlxuICAgICAqL1xuICAgIEV4ZWN1dG9yR3JvdXAucHJvdG90eXBlLmhhc0V4ZWN1dG9ycyA9IGZ1bmN0aW9uIChleGVjdXRvcnMpIHtcbiAgICAgICAgZm9yICh2YXIgekluZGV4IGluIHRoaXMuZXhlY3V0b3JzQnlaSW5kZXhfKSB7XG4gICAgICAgICAgICB2YXIgY2FuZGlkYXRlcyA9IHRoaXMuZXhlY3V0b3JzQnlaSW5kZXhfW3pJbmRleF07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBleGVjdXRvcnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChleGVjdXRvcnNbaV0gaW4gY2FuZGlkYXRlcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZSwgaW1wb3J0KFwiLi4vLi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0LCBudW1iZXIpOiBUfSBjYWxsYmFjayBGZWF0dXJlIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZT59IGRlY2x1dHRlcmVkRmVhdHVyZXMgRGVjbHV0dGVyZWQgZmVhdHVyZXMuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgKiBAdGVtcGxhdGUgVFxuICAgICAqL1xuICAgIEV4ZWN1dG9yR3JvdXAucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrLCBkZWNsdXR0ZXJlZEZlYXR1cmVzKSB7XG4gICAgICAgIGhpdFRvbGVyYW5jZSA9IE1hdGgucm91bmQoaGl0VG9sZXJhbmNlKTtcbiAgICAgICAgdmFyIGNvbnRleHRTaXplID0gaGl0VG9sZXJhbmNlICogMiArIDE7XG4gICAgICAgIHZhciB0cmFuc2Zvcm0gPSBjb21wb3NlVHJhbnNmb3JtKHRoaXMuaGl0RGV0ZWN0aW9uVHJhbnNmb3JtXywgaGl0VG9sZXJhbmNlICsgMC41LCBoaXRUb2xlcmFuY2UgKyAwLjUsIDEgLyByZXNvbHV0aW9uLCAtMSAvIHJlc29sdXRpb24sIC1yb3RhdGlvbiwgLWNvb3JkaW5hdGVbMF0sIC1jb29yZGluYXRlWzFdKTtcbiAgICAgICAgdmFyIG5ld0NvbnRleHQgPSAhdGhpcy5oaXREZXRlY3Rpb25Db250ZXh0XztcbiAgICAgICAgaWYgKG5ld0NvbnRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uQ29udGV4dF8gPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoY29udGV4dFNpemUsIGNvbnRleHRTaXplKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuaGl0RGV0ZWN0aW9uQ29udGV4dF87XG4gICAgICAgIGlmIChjb250ZXh0LmNhbnZhcy53aWR0aCAhPT0gY29udGV4dFNpemUgfHxcbiAgICAgICAgICAgIGNvbnRleHQuY2FudmFzLmhlaWdodCAhPT0gY29udGV4dFNpemUpIHtcbiAgICAgICAgICAgIGNvbnRleHQuY2FudmFzLndpZHRoID0gY29udGV4dFNpemU7XG4gICAgICAgICAgICBjb250ZXh0LmNhbnZhcy5oZWlnaHQgPSBjb250ZXh0U2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghbmV3Q29udGV4dCkge1xuICAgICAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY29udGV4dFNpemUsIGNvbnRleHRTaXplKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgaGl0RXh0ZW50O1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJCdWZmZXJfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhpdEV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG4gICAgICAgICAgICBleHRlbmRDb29yZGluYXRlKGhpdEV4dGVudCwgY29vcmRpbmF0ZSk7XG4gICAgICAgICAgICBidWZmZXIoaGl0RXh0ZW50LCByZXNvbHV0aW9uICogKHRoaXMucmVuZGVyQnVmZmVyXyArIGhpdFRvbGVyYW5jZSksIGhpdEV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGluZGV4ZXMgPSBnZXRQaXhlbEluZGV4QXJyYXkoaGl0VG9sZXJhbmNlKTtcbiAgICAgICAgdmFyIGJ1aWxkZXJUeXBlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAgICAgICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGZlYXR1cmVDYWxsYmFjayhmZWF0dXJlLCBnZW9tZXRyeSkge1xuICAgICAgICAgICAgdmFyIGltYWdlRGF0YSA9IGNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGNvbnRleHRTaXplLCBjb250ZXh0U2l6ZSlcbiAgICAgICAgICAgICAgICAuZGF0YTtcbiAgICAgICAgICAgIGZvciAodmFyIGlfMSA9IDAsIGlpID0gaW5kZXhlcy5sZW5ndGg7IGlfMSA8IGlpOyBpXzErKykge1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZURhdGFbaW5kZXhlc1tpXzFdXSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkZWNsdXR0ZXJlZEZlYXR1cmVzIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVpbGRlclR5cGUgIT09IEJ1aWxkZXJUeXBlLklNQUdFICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlclR5cGUgIT09IEJ1aWxkZXJUeXBlLlRFWFQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNsdXR0ZXJlZEZlYXR1cmVzLmluZGV4T2YoZmVhdHVyZSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gKGluZGV4ZXNbaV8xXSAtIDMpIC8gNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gaGl0VG9sZXJhbmNlIC0gKGlkeCAlIGNvbnRleHRTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5ID0gaGl0VG9sZXJhbmNlIC0gKChpZHggLyBjb250ZXh0U2l6ZSkgfCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRfMSA9IGNhbGxiYWNrKGZlYXR1cmUsIGdlb21ldHJ5LCB4ICogeCArIHkgKiB5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRfMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjb250ZXh0U2l6ZSwgY29udGV4dFNpemUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICAgICAgdmFyIHpzID0gT2JqZWN0LmtleXModGhpcy5leGVjdXRvcnNCeVpJbmRleF8pLm1hcChOdW1iZXIpO1xuICAgICAgICB6cy5zb3J0KG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24pO1xuICAgICAgICB2YXIgaSwgaiwgZXhlY3V0b3JzLCBleGVjdXRvciwgcmVzdWx0O1xuICAgICAgICBmb3IgKGkgPSB6cy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgdmFyIHpJbmRleEtleSA9IHpzW2ldLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBleGVjdXRvcnMgPSB0aGlzLmV4ZWN1dG9yc0J5WkluZGV4X1t6SW5kZXhLZXldO1xuICAgICAgICAgICAgZm9yIChqID0gT1JERVIubGVuZ3RoIC0gMTsgaiA+PSAwOyAtLWopIHtcbiAgICAgICAgICAgICAgICBidWlsZGVyVHlwZSA9IE9SREVSW2pdO1xuICAgICAgICAgICAgICAgIGV4ZWN1dG9yID0gZXhlY3V0b3JzW2J1aWxkZXJUeXBlXTtcbiAgICAgICAgICAgICAgICBpZiAoZXhlY3V0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBleGVjdXRvci5leGVjdXRlSGl0RGV0ZWN0aW9uKGNvbnRleHQsIHRyYW5zZm9ybSwgcm90YXRpb24sIGZlYXR1cmVDYWxsYmFjaywgaGl0RXh0ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IENsaXAgY29vcmRpbmF0ZXMuXG4gICAgICovXG4gICAgRXhlY3V0b3JHcm91cC5wcm90b3R5cGUuZ2V0Q2xpcENvb3JkcyA9IGZ1bmN0aW9uICh0cmFuc2Zvcm0pIHtcbiAgICAgICAgdmFyIG1heEV4dGVudCA9IHRoaXMubWF4RXh0ZW50XztcbiAgICAgICAgaWYgKCFtYXhFeHRlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtaW5YID0gbWF4RXh0ZW50WzBdO1xuICAgICAgICB2YXIgbWluWSA9IG1heEV4dGVudFsxXTtcbiAgICAgICAgdmFyIG1heFggPSBtYXhFeHRlbnRbMl07XG4gICAgICAgIHZhciBtYXhZID0gbWF4RXh0ZW50WzNdO1xuICAgICAgICB2YXIgZmxhdENsaXBDb29yZHMgPSBbbWluWCwgbWluWSwgbWluWCwgbWF4WSwgbWF4WCwgbWF4WSwgbWF4WCwgbWluWV07XG4gICAgICAgIHRyYW5zZm9ybTJEKGZsYXRDbGlwQ29vcmRzLCAwLCA4LCAyLCB0cmFuc2Zvcm0sIGZsYXRDbGlwQ29vcmRzKTtcbiAgICAgICAgcmV0dXJuIGZsYXRDbGlwQ29vcmRzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgZW1wdHkuXG4gICAgICovXG4gICAgRXhlY3V0b3JHcm91cC5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGlzRW1wdHkodGhpcy5leGVjdXRvcnNCeVpJbmRleF8pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY29udGV4dFNjYWxlIFNjYWxlIG9mIHRoZSBjb250ZXh0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmlld1JvdGF0aW9uIFZpZXcgcm90YXRpb24uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBzbmFwVG9QaXhlbCBTbmFwIHBvaW50IHN5bWJvbHMgYW5kIHRlc3QgdG8gaW50ZWdlciBwaXhlbC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vQnVpbGRlclR5cGUuanNcIikuZGVmYXVsdD49fSBvcHRfYnVpbGRlclR5cGVzIE9yZGVyZWQgcmVwbGF5IHR5cGVzIHRvIHJlcGxheS5cbiAgICAgKiAgICAgRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL3JlbmRlci9yZXBsYXl+T1JERVJ9XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCJyYnVzaFwiKS5kZWZhdWx0PX0gb3B0X2RlY2x1dHRlclRyZWUgRGVjbHV0dGVyIHRyZWUuXG4gICAgICovXG4gICAgRXhlY3V0b3JHcm91cC5wcm90b3R5cGUuZXhlY3V0ZSA9IGZ1bmN0aW9uIChjb250ZXh0LCBjb250ZXh0U2NhbGUsIHRyYW5zZm9ybSwgdmlld1JvdGF0aW9uLCBzbmFwVG9QaXhlbCwgb3B0X2J1aWxkZXJUeXBlcywgb3B0X2RlY2x1dHRlclRyZWUpIHtcbiAgICAgICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgICAgICB2YXIgenMgPSBPYmplY3Qua2V5cyh0aGlzLmV4ZWN1dG9yc0J5WkluZGV4XykubWFwKE51bWJlcik7XG4gICAgICAgIHpzLnNvcnQobnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbik7XG4gICAgICAgIC8vIHNldHVwIGNsaXBwaW5nIHNvIHRoYXQgdGhlIHBhcnRzIG9mIG92ZXItc2ltcGxpZmllZCBnZW9tZXRyaWVzIGFyZSBub3RcbiAgICAgICAgLy8gdmlzaWJsZSBvdXRzaWRlIHRoZSBjdXJyZW50IGV4dGVudCB3aGVuIHBhbm5pbmdcbiAgICAgICAgaWYgKHRoaXMubWF4RXh0ZW50Xykge1xuICAgICAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICB0aGlzLmNsaXAoY29udGV4dCwgdHJhbnNmb3JtKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYnVpbGRlclR5cGVzID0gb3B0X2J1aWxkZXJUeXBlcyA/IG9wdF9idWlsZGVyVHlwZXMgOiBPUkRFUjtcbiAgICAgICAgdmFyIGksIGlpLCBqLCBqaiwgcmVwbGF5cywgcmVwbGF5O1xuICAgICAgICBpZiAob3B0X2RlY2x1dHRlclRyZWUpIHtcbiAgICAgICAgICAgIHpzLnJldmVyc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IHpzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciB6SW5kZXhLZXkgPSB6c1tpXS50b1N0cmluZygpO1xuICAgICAgICAgICAgcmVwbGF5cyA9IHRoaXMuZXhlY3V0b3JzQnlaSW5kZXhfW3pJbmRleEtleV07XG4gICAgICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGJ1aWxkZXJUeXBlcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJ1aWxkZXJUeXBlID0gYnVpbGRlclR5cGVzW2pdO1xuICAgICAgICAgICAgICAgIHJlcGxheSA9IHJlcGxheXNbYnVpbGRlclR5cGVdO1xuICAgICAgICAgICAgICAgIGlmIChyZXBsYXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICByZXBsYXkuZXhlY3V0ZShjb250ZXh0LCBjb250ZXh0U2NhbGUsIHRyYW5zZm9ybSwgdmlld1JvdGF0aW9uLCBzbmFwVG9QaXhlbCwgb3B0X2RlY2x1dHRlclRyZWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXhFeHRlbnRfKSB7XG4gICAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEV4ZWN1dG9yR3JvdXA7XG59KCkpO1xuLyoqXG4gKiBUaGlzIGNhY2hlIGlzIHVzZWQgdG8gc3RvcmUgYXJyYXlzIG9mIGluZGV4ZXMgZm9yIGNhbGN1bGF0ZWQgcGl4ZWwgY2lyY2xlc1xuICogdG8gaW5jcmVhc2UgcGVyZm9ybWFuY2UuXG4gKiBJdCBpcyBhIHN0YXRpYyBwcm9wZXJ0eSB0byBhbGxvdyBlYWNoIFJlcGxheWdyb3VwIHRvIGFjY2VzcyBpdC5cbiAqIEB0eXBlIHtPYmplY3Q8bnVtYmVyLCBBcnJheTxudW1iZXI+Pn1cbiAqL1xudmFyIGNpcmNsZVBpeGVsSW5kZXhBcnJheUNhY2hlID0ge307XG4vKipcbiAqIFRoaXMgbWV0aG9kcyBjcmVhdGVzIGFuIGFycmF5IHdpdGggaW5kZXhlcyBvZiBhbGwgcGl4ZWxzIHdpdGhpbiBhIGNpcmNsZSxcbiAqIG9yZGVyZWQgYnkgaG93IGNsb3NlIHRoZXkgYXJlIHRvIHRoZSBjZW50ZXIuXG4gKiBBIGNhY2hlIGlzIHVzZWQgdG8gaW5jcmVhc2UgcGVyZm9ybWFuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFJhZGl1cy5cbiAqIEByZXR1cm5zIHtBcnJheTxudW1iZXI+fSBBbiBhcnJheSB3aXRoIGluZGV4ZXMgd2l0aGluIGEgY2lyY2xlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGl4ZWxJbmRleEFycmF5KHJhZGl1cykge1xuICAgIGlmIChjaXJjbGVQaXhlbEluZGV4QXJyYXlDYWNoZVtyYWRpdXNdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGNpcmNsZVBpeGVsSW5kZXhBcnJheUNhY2hlW3JhZGl1c107XG4gICAgfVxuICAgIHZhciBzaXplID0gcmFkaXVzICogMiArIDE7XG4gICAgdmFyIG1heERpc3RhbmNlU3EgPSByYWRpdXMgKiByYWRpdXM7XG4gICAgdmFyIGRpc3RhbmNlcyA9IG5ldyBBcnJheShtYXhEaXN0YW5jZVNxICsgMSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gcmFkaXVzOyArK2kpIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPD0gcmFkaXVzOyArK2opIHtcbiAgICAgICAgICAgIHZhciBkaXN0YW5jZVNxID0gaSAqIGkgKyBqICogajtcbiAgICAgICAgICAgIGlmIChkaXN0YW5jZVNxID4gbWF4RGlzdGFuY2VTcSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRpc3RhbmNlID0gZGlzdGFuY2VzW2Rpc3RhbmNlU3FdO1xuICAgICAgICAgICAgaWYgKCFkaXN0YW5jZSkge1xuICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gW107XG4gICAgICAgICAgICAgICAgZGlzdGFuY2VzW2Rpc3RhbmNlU3FdID0gZGlzdGFuY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXN0YW5jZS5wdXNoKCgocmFkaXVzICsgaSkgKiBzaXplICsgKHJhZGl1cyArIGopKSAqIDQgKyAzKTtcbiAgICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgICAgIGRpc3RhbmNlLnB1c2goKChyYWRpdXMgLSBpKSAqIHNpemUgKyAocmFkaXVzICsgaikpICogNCArIDMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGogPiAwKSB7XG4gICAgICAgICAgICAgICAgZGlzdGFuY2UucHVzaCgoKHJhZGl1cyArIGkpICogc2l6ZSArIChyYWRpdXMgLSBqKSkgKiA0ICsgMyk7XG4gICAgICAgICAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlLnB1c2goKChyYWRpdXMgLSBpKSAqIHNpemUgKyAocmFkaXVzIC0gaikpICogNCArIDMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgcGl4ZWxJbmRleCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGRpc3RhbmNlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGlmIChkaXN0YW5jZXNbaV0pIHtcbiAgICAgICAgICAgIHBpeGVsSW5kZXgucHVzaC5hcHBseShwaXhlbEluZGV4LCBkaXN0YW5jZXNbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNpcmNsZVBpeGVsSW5kZXhBcnJheUNhY2hlW3JhZGl1c10gPSBwaXhlbEluZGV4O1xuICAgIHJldHVybiBwaXhlbEluZGV4O1xufVxuZXhwb3J0IGRlZmF1bHQgRXhlY3V0b3JHcm91cDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV4ZWN1dG9yR3JvdXAuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9jYW52YXMvSW1tZWRpYXRlXG4gKi9cbi8vIEZJWE1FIHRlc3QsIGVzcGVjaWFsbHkgcG9seWdvbnMgd2l0aCBob2xlcyBhbmQgbXVsdGlwb2x5Z29uc1xuLy8gRklYTUUgbmVlZCB0byBoYW5kbGUgbGFyZ2UgdGhpY2sgZmVhdHVyZXMgKHdoZXJlIHBpeGVsIHNpemUgbWF0dGVycylcbi8vIEZJWE1FIGFkZCBvZmZzZXQgYW5kIGVuZCB0byBvbC9nZW9tL2ZsYXQvdHJhbnNmb3JtfnRyYW5zZm9ybTJEP1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi4vLi4vZ2VvbS9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IFZlY3RvckNvbnRleHQgZnJvbSAnLi4vVmVjdG9yQ29udGV4dC5qcyc7XG5pbXBvcnQgeyBhc0NvbG9yTGlrZSB9IGZyb20gJy4uLy4uL2NvbG9ybGlrZS5qcyc7XG5pbXBvcnQgeyBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIH0gZnJvbSAnLi4vLi4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IGRlZmF1bHRGaWxsU3R5bGUsIGRlZmF1bHRGb250LCBkZWZhdWx0TGluZUNhcCwgZGVmYXVsdExpbmVEYXNoLCBkZWZhdWx0TGluZURhc2hPZmZzZXQsIGRlZmF1bHRMaW5lSm9pbiwgZGVmYXVsdExpbmVXaWR0aCwgZGVmYXVsdE1pdGVyTGltaXQsIGRlZmF1bHRTdHJva2VTdHlsZSwgZGVmYXVsdFRleHRBbGlnbiwgZGVmYXVsdFRleHRCYXNlbGluZSwgfSBmcm9tICcuLi9jYW52YXMuanMnO1xuaW1wb3J0IHsgZXF1YWxzIH0gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuaW1wb3J0IHsgaW50ZXJzZWN0cyB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0yRCB9IGZyb20gJy4uLy4uL2dlb20vZmxhdC90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHsgdHJhbnNmb3JtR2VvbTJEIH0gZnJvbSAnLi4vLi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgY29uY3JldGUgc3ViY2xhc3Mgb2Yge0BsaW5rIG1vZHVsZTpvbC9yZW5kZXIvVmVjdG9yQ29udGV4dH0gdGhhdCBpbXBsZW1lbnRzXG4gKiBkaXJlY3QgcmVuZGVyaW5nIG9mIGZlYXR1cmVzIGFuZCBnZW9tZXRyaWVzIHRvIGFuIEhUTUw1IENhbnZhcyBjb250ZXh0LlxuICogSW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MgYXJlIGNyZWF0ZWQgaW50ZXJuYWxseSBieSB0aGUgbGlicmFyeSBhbmRcbiAqIHByb3ZpZGVkIHRvIGFwcGxpY2F0aW9uIGNvZGUgYXMgdmVjdG9yQ29udGV4dCBtZW1iZXIgb2YgdGhlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3JlbmRlci9FdmVudH5SZW5kZXJFdmVudH0gb2JqZWN0IGFzc29jaWF0ZWQgd2l0aCBwb3N0Y29tcG9zZSwgcHJlY29tcG9zZSBhbmRcbiAqIHJlbmRlciBldmVudHMgZW1pdHRlZCBieSBsYXllcnMgYW5kIG1hcHMuXG4gKi9cbnZhciBDYW52YXNJbW1lZGlhdGVSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2aWV3Um90YXRpb24gVmlldyByb3RhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9zcXVhcmVkVG9sZXJhbmNlIE9wdGlvbmFsIHNxdWFyZWQgdG9sZXJhbmNlIGZvciBzaW1wbGlmaWNhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb249fSBvcHRfdXNlclRyYW5zZm9ybSBUcmFuc2Zvcm0gZnJvbSB1c2VyIHRvIHZpZXcgcHJvamVjdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDYW52YXNJbW1lZGlhdGVSZW5kZXJlcihjb250ZXh0LCBwaXhlbFJhdGlvLCBleHRlbnQsIHRyYW5zZm9ybSwgdmlld1JvdGF0aW9uLCBvcHRfc3F1YXJlZFRvbGVyYW5jZSwgb3B0X3VzZXJUcmFuc2Zvcm0pIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb250ZXh0XyA9IGNvbnRleHQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxSYXRpb18gPSBwaXhlbFJhdGlvO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5leHRlbnRfID0gZXh0ZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmFuc2Zvcm1fID0gdHJhbnNmb3JtO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnZpZXdSb3RhdGlvbl8gPSB2aWV3Um90YXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3F1YXJlZFRvbGVyYW5jZV8gPSBvcHRfc3F1YXJlZFRvbGVyYW5jZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudXNlclRyYW5zZm9ybV8gPSBvcHRfdXNlclRyYW5zZm9ybTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdGF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRleHRGaWxsU3RhdGVfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlN0cm9rZVN0YXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGV4dFN0cm9rZVN0YXRlXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5UZXh0U3RhdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb250ZXh0VGV4dFN0YXRlXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3RhdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5maWxsU3RhdGVfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlN0cm9rZVN0YXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3Ryb2tlU3RhdGVfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlQW5jaG9yWF8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlQW5jaG9yWV8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlSGVpZ2h0XyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW1hZ2VPcGFjaXR5XyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW1hZ2VPcmlnaW5YXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW1hZ2VPcmlnaW5ZXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlUm90YXRlV2l0aFZpZXdfID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW1hZ2VSb3RhdGlvbl8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3NpemUuanNcIikuU2l6ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlU2NhbGVfID0gWzAsIDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlV2lkdGhfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50ZXh0XyA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRleHRPZmZzZXRYXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGV4dE9mZnNldFlfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGV4dFJvdGF0ZVdpdGhWaWV3XyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRleHRSb3RhdGlvbl8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3NpemUuanNcIikuU2l6ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRleHRTY2FsZV8gPSBbMCwgMF07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3RhdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50ZXh0RmlsbFN0YXRlXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TdHJva2VTdGF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRleHRTdHJva2VTdGF0ZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jYW52YXMuanNcIikuVGV4dFN0YXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGV4dFN0YXRlXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsQ29vcmRpbmF0ZXNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRtcExvY2FsVHJhbnNmb3JtXyA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd0ltYWdlc18gPSBmdW5jdGlvbiAoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gICAgICAgIGlmICghdGhpcy5pbWFnZV8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGl4ZWxDb29yZGluYXRlcyA9IHRyYW5zZm9ybTJEKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIDIsIHRoaXMudHJhbnNmb3JtXywgdGhpcy5waXhlbENvb3JkaW5hdGVzXyk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICAgICAgdmFyIGxvY2FsVHJhbnNmb3JtID0gdGhpcy50bXBMb2NhbFRyYW5zZm9ybV87XG4gICAgICAgIHZhciBhbHBoYSA9IGNvbnRleHQuZ2xvYmFsQWxwaGE7XG4gICAgICAgIGlmICh0aGlzLmltYWdlT3BhY2l0eV8gIT0gMSkge1xuICAgICAgICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IGFscGhhICogdGhpcy5pbWFnZU9wYWNpdHlfO1xuICAgICAgICB9XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMuaW1hZ2VSb3RhdGlvbl87XG4gICAgICAgIGlmICh0aGlzLmltYWdlUm90YXRlV2l0aFZpZXdfKSB7XG4gICAgICAgICAgICByb3RhdGlvbiArPSB0aGlzLnZpZXdSb3RhdGlvbl87XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcGl4ZWxDb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgaSArPSAyKSB7XG4gICAgICAgICAgICB2YXIgeCA9IHBpeGVsQ29vcmRpbmF0ZXNbaV0gLSB0aGlzLmltYWdlQW5jaG9yWF87XG4gICAgICAgICAgICB2YXIgeSA9IHBpeGVsQ29vcmRpbmF0ZXNbaSArIDFdIC0gdGhpcy5pbWFnZUFuY2hvcllfO1xuICAgICAgICAgICAgaWYgKHJvdGF0aW9uICE9PSAwIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVNjYWxlX1swXSAhPSAxIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVNjYWxlX1sxXSAhPSAxKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlclggPSB4ICsgdGhpcy5pbWFnZUFuY2hvclhfO1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXJZID0geSArIHRoaXMuaW1hZ2VBbmNob3JZXztcbiAgICAgICAgICAgICAgICBjb21wb3NlVHJhbnNmb3JtKGxvY2FsVHJhbnNmb3JtLCBjZW50ZXJYLCBjZW50ZXJZLCAxLCAxLCByb3RhdGlvbiwgLWNlbnRlclgsIC1jZW50ZXJZKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnNldFRyYW5zZm9ybS5hcHBseShjb250ZXh0LCBsb2NhbFRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgY29udGV4dC50cmFuc2xhdGUoY2VudGVyWCwgY2VudGVyWSk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5zY2FsZSh0aGlzLmltYWdlU2NhbGVfWzBdLCB0aGlzLmltYWdlU2NhbGVfWzFdKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZSh0aGlzLmltYWdlXywgdGhpcy5pbWFnZU9yaWdpblhfLCB0aGlzLmltYWdlT3JpZ2luWV8sIHRoaXMuaW1hZ2VXaWR0aF8sIHRoaXMuaW1hZ2VIZWlnaHRfLCAtdGhpcy5pbWFnZUFuY2hvclhfLCAtdGhpcy5pbWFnZUFuY2hvcllfLCB0aGlzLmltYWdlV2lkdGhfLCB0aGlzLmltYWdlSGVpZ2h0Xyk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZSh0aGlzLmltYWdlXywgdGhpcy5pbWFnZU9yaWdpblhfLCB0aGlzLmltYWdlT3JpZ2luWV8sIHRoaXMuaW1hZ2VXaWR0aF8sIHRoaXMuaW1hZ2VIZWlnaHRfLCB4LCB5LCB0aGlzLmltYWdlV2lkdGhfLCB0aGlzLmltYWdlSGVpZ2h0Xyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW1hZ2VPcGFjaXR5XyAhPSAxKSB7XG4gICAgICAgICAgICBjb250ZXh0Lmdsb2JhbEFscGhhID0gYWxwaGE7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd1RleHRfID0gZnVuY3Rpb24gKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgICAgICBpZiAoIXRoaXMudGV4dFN0YXRlXyB8fCB0aGlzLnRleHRfID09PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRleHRGaWxsU3RhdGVfKSB7XG4gICAgICAgICAgICB0aGlzLnNldENvbnRleHRGaWxsU3RhdGVfKHRoaXMudGV4dEZpbGxTdGF0ZV8pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRleHRTdHJva2VTdGF0ZV8pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29udGV4dFN0cm9rZVN0YXRlXyh0aGlzLnRleHRTdHJva2VTdGF0ZV8pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0Q29udGV4dFRleHRTdGF0ZV8odGhpcy50ZXh0U3RhdGVfKTtcbiAgICAgICAgdmFyIHBpeGVsQ29vcmRpbmF0ZXMgPSB0cmFuc2Zvcm0yRChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHRoaXMudHJhbnNmb3JtXywgdGhpcy5waXhlbENvb3JkaW5hdGVzXyk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICAgICAgdmFyIHJvdGF0aW9uID0gdGhpcy50ZXh0Um90YXRpb25fO1xuICAgICAgICBpZiAodGhpcy50ZXh0Um90YXRlV2l0aFZpZXdfKSB7XG4gICAgICAgICAgICByb3RhdGlvbiArPSB0aGlzLnZpZXdSb3RhdGlvbl87XG4gICAgICAgIH1cbiAgICAgICAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgdmFyIHggPSBwaXhlbENvb3JkaW5hdGVzW29mZnNldF0gKyB0aGlzLnRleHRPZmZzZXRYXztcbiAgICAgICAgICAgIHZhciB5ID0gcGl4ZWxDb29yZGluYXRlc1tvZmZzZXQgKyAxXSArIHRoaXMudGV4dE9mZnNldFlfO1xuICAgICAgICAgICAgaWYgKHJvdGF0aW9uICE9PSAwIHx8XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0U2NhbGVfWzBdICE9IDEgfHxcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRTY2FsZV9bMV0gIT0gMSkge1xuICAgICAgICAgICAgICAgIHZhciBsb2NhbFRyYW5zZm9ybSA9IGNvbXBvc2VUcmFuc2Zvcm0odGhpcy50bXBMb2NhbFRyYW5zZm9ybV8sIHgsIHksIDEsIDEsIHJvdGF0aW9uLCAteCwgLXkpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc2V0VHJhbnNmb3JtLmFwcGx5KGNvbnRleHQsIGxvY2FsVHJhbnNmb3JtKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZSh4LCB5KTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnNjYWxlKHRoaXMudGV4dFNjYWxlX1swXSwgdGhpcy50ZXh0U2NhbGVfWzFdKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50ZXh0U3Ryb2tlU3RhdGVfKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlVGV4dCh0aGlzLnRleHRfLCAwLCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGV4dEZpbGxTdGF0ZV8pIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maWxsVGV4dCh0aGlzLnRleHRfLCAwLCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50ZXh0U3Ryb2tlU3RhdGVfKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlVGV4dCh0aGlzLnRleHRfLCB4LCB5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGV4dEZpbGxTdGF0ZV8pIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maWxsVGV4dCh0aGlzLnRleHRfLCB4LCB5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBjbG9zZSBDbG9zZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEByZXR1cm4ge251bWJlcn0gZW5kIEVuZC5cbiAgICAgKi9cbiAgICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUubW92ZVRvTGluZVRvXyA9IGZ1bmN0aW9uIChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGNsb3NlKSB7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICAgICAgdmFyIHBpeGVsQ29vcmRpbmF0ZXMgPSB0cmFuc2Zvcm0yRChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHRoaXMudHJhbnNmb3JtXywgdGhpcy5waXhlbENvb3JkaW5hdGVzXyk7XG4gICAgICAgIGNvbnRleHQubW92ZVRvKHBpeGVsQ29vcmRpbmF0ZXNbMF0sIHBpeGVsQ29vcmRpbmF0ZXNbMV0pO1xuICAgICAgICB2YXIgbGVuZ3RoID0gcGl4ZWxDb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgIGlmIChjbG9zZSkge1xuICAgICAgICAgICAgbGVuZ3RoIC09IDI7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDI7IGkgPCBsZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8ocGl4ZWxDb29yZGluYXRlc1tpXSwgcGl4ZWxDb29yZGluYXRlc1tpICsgMV0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjbG9zZSkge1xuICAgICAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW5kO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEByZXR1cm4ge251bWJlcn0gRW5kLlxuICAgICAqL1xuICAgIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5kcmF3UmluZ3NfID0gZnVuY3Rpb24gKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSB0aGlzLm1vdmVUb0xpbmVUb18oZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNbaV0sIHN0cmlkZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlciBhIGNpcmNsZSBnZW9tZXRyeSBpbnRvIHRoZSBjYW52YXMuICBSZW5kZXJpbmcgaXMgaW1tZWRpYXRlIGFuZCB1c2VzXG4gICAgICogdGhlIGN1cnJlbnQgZmlsbCBhbmQgc3Ryb2tlIHN0eWxlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgQ2lyY2xlIGdlb21ldHJ5LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd0NpcmNsZSA9IGZ1bmN0aW9uIChnZW9tZXRyeSkge1xuICAgICAgICBpZiAoIWludGVyc2VjdHModGhpcy5leHRlbnRfLCBnZW9tZXRyeS5nZXRFeHRlbnQoKSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5maWxsU3RhdGVfIHx8IHRoaXMuc3Ryb2tlU3RhdGVfKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5maWxsU3RhdGVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb250ZXh0RmlsbFN0YXRlXyh0aGlzLmZpbGxTdGF0ZV8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc3Ryb2tlU3RhdGVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb250ZXh0U3Ryb2tlU3RhdGVfKHRoaXMuc3Ryb2tlU3RhdGVfKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwaXhlbENvb3JkaW5hdGVzID0gdHJhbnNmb3JtR2VvbTJEKGdlb21ldHJ5LCB0aGlzLnRyYW5zZm9ybV8sIHRoaXMucGl4ZWxDb29yZGluYXRlc18pO1xuICAgICAgICAgICAgdmFyIGR4ID0gcGl4ZWxDb29yZGluYXRlc1syXSAtIHBpeGVsQ29vcmRpbmF0ZXNbMF07XG4gICAgICAgICAgICB2YXIgZHkgPSBwaXhlbENvb3JkaW5hdGVzWzNdIC0gcGl4ZWxDb29yZGluYXRlc1sxXTtcbiAgICAgICAgICAgIHZhciByYWRpdXMgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGNvbnRleHQuYXJjKHBpeGVsQ29vcmRpbmF0ZXNbMF0sIHBpeGVsQ29vcmRpbmF0ZXNbMV0sIHJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZmlsbFN0YXRlXykge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc3Ryb2tlU3RhdGVfKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50ZXh0XyAhPT0gJycpIHtcbiAgICAgICAgICAgIHRoaXMuZHJhd1RleHRfKGdlb21ldHJ5LmdldENlbnRlcigpLCAwLCAyLCAyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSByZW5kZXJpbmcgc3R5bGUuICBOb3RlIHRoYXQgc2luY2UgdGhpcyBpcyBhbiBpbW1lZGlhdGUgcmVuZGVyaW5nIEFQSSxcbiAgICAgKiBhbnkgYHpJbmRleGAgb24gdGhlIHByb3ZpZGVkIHN0eWxlIHdpbGwgYmUgaWdub3JlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgVGhlIHJlbmRlcmluZyBzdHlsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLnNldFN0eWxlID0gZnVuY3Rpb24gKHN0eWxlKSB7XG4gICAgICAgIHRoaXMuc2V0RmlsbFN0cm9rZVN0eWxlKHN0eWxlLmdldEZpbGwoKSwgc3R5bGUuZ2V0U3Ryb2tlKCkpO1xuICAgICAgICB0aGlzLnNldEltYWdlU3R5bGUoc3R5bGUuZ2V0SW1hZ2UoKSk7XG4gICAgICAgIHRoaXMuc2V0VGV4dFN0eWxlKHN0eWxlLmdldFRleHQoKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gICAgICovXG4gICAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLnNldFRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0cmFuc2Zvcm0pIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1fID0gdHJhbnNmb3JtO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIGEgZ2VvbWV0cnkgaW50byB0aGUgY2FudmFzLiAgQ2FsbFxuICAgICAqIHtAbGluayBtb2R1bGU6b2wvcmVuZGVyL2NhbnZhcy9JbW1lZGlhdGUjc2V0U3R5bGV9IGZpcnN0IHRvIHNldCB0aGUgcmVuZGVyaW5nIHN0eWxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBUaGUgZ2VvbWV0cnkgdG8gcmVuZGVyLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd0dlb21ldHJ5ID0gZnVuY3Rpb24gKGdlb21ldHJ5KSB7XG4gICAgICAgIHZhciB0eXBlID0gZ2VvbWV0cnkuZ2V0VHlwZSgpO1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLlBPSU5UOlxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1BvaW50KFxuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9Qb2ludC5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0xpbmVTdHJpbmcoXG4gICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL0xpbmVTdHJpbmcuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0xZR09OOlxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1BvbHlnb24oXG4gICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9QT0lOVDpcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdNdWx0aVBvaW50KFxuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aVBvaW50LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfTElORV9TVFJJTkc6XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3TXVsdGlMaW5lU3RyaW5nKFxuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aUxpbmVTdHJpbmcuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OOlxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd011bHRpUG9seWdvbihcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuR0VPTUVUUllfQ09MTEVDVElPTjpcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdHZW9tZXRyeUNvbGxlY3Rpb24oXG4gICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL0dlb21ldHJ5Q29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkNJUkNMRTpcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdDaXJjbGUoXG4gICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL0NpcmNsZS5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlciBhIGZlYXR1cmUgaW50byB0aGUgY2FudmFzLiAgTm90ZSB0aGF0IGFueSBgekluZGV4YCBvbiB0aGUgcHJvdmlkZWRcbiAgICAgKiBzdHlsZSB3aWxsIGJlIGlnbm9yZWQgLSBmZWF0dXJlcyBhcmUgcmVuZGVyZWQgaW1tZWRpYXRlbHkgaW4gdGhlIG9yZGVyIHRoYXRcbiAgICAgKiB0aGlzIG1ldGhvZCBpcyBjYWxsZWQuICBJZiB5b3UgbmVlZCBgekluZGV4YCBzdXBwb3J0LCB5b3Ugc2hvdWxkIGJlIHVzaW5nIGFuXG4gICAgICoge0BsaW5rIG1vZHVsZTpvbC9sYXllci9WZWN0b3J+VmVjdG9yTGF5ZXJ9IGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5kcmF3RmVhdHVyZSA9IGZ1bmN0aW9uIChmZWF0dXJlLCBzdHlsZSkge1xuICAgICAgICB2YXIgZ2VvbWV0cnkgPSBzdHlsZS5nZXRHZW9tZXRyeUZ1bmN0aW9uKCkoZmVhdHVyZSk7XG4gICAgICAgIGlmICghZ2VvbWV0cnkgfHwgIWludGVyc2VjdHModGhpcy5leHRlbnRfLCBnZW9tZXRyeS5nZXRFeHRlbnQoKSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0eWxlKHN0eWxlKTtcbiAgICAgICAgdGhpcy5kcmF3R2VvbWV0cnkoZ2VvbWV0cnkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIGEgR2VvbWV0cnlDb2xsZWN0aW9uIHRvIHRoZSBjYW52YXMuICBSZW5kZXJpbmcgaXMgaW1tZWRpYXRlIGFuZFxuICAgICAqIHVzZXMgdGhlIGN1cnJlbnQgc3R5bGVzIGFwcHJvcHJpYXRlIGZvciBlYWNoIGdlb21ldHJ5IGluIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9nZW9tL0dlb21ldHJ5Q29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeSBjb2xsZWN0aW9uLlxuICAgICAqL1xuICAgIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5kcmF3R2VvbWV0cnlDb2xsZWN0aW9uID0gZnVuY3Rpb24gKGdlb21ldHJ5KSB7XG4gICAgICAgIHZhciBnZW9tZXRyaWVzID0gZ2VvbWV0cnkuZ2V0R2VvbWV0cmllc0FycmF5KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGdlb21ldHJpZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5kcmF3R2VvbWV0cnkoZ2VvbWV0cmllc1tpXSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlciBhIFBvaW50IGdlb21ldHJ5IGludG8gdGhlIGNhbnZhcy4gIFJlbmRlcmluZyBpcyBpbW1lZGlhdGUgYW5kIHVzZXNcbiAgICAgKiB0aGUgY3VycmVudCBzdHlsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9Qb2ludC5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgUG9pbnQgZ2VvbWV0cnkuXG4gICAgICovXG4gICAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLmRyYXdQb2ludCA9IGZ1bmN0aW9uIChnZW9tZXRyeSkge1xuICAgICAgICBpZiAodGhpcy5zcXVhcmVkVG9sZXJhbmNlXykge1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vUG9pbnQuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5LnNpbXBsaWZ5VHJhbnNmb3JtZWQodGhpcy5zcXVhcmVkVG9sZXJhbmNlXywgdGhpcy51c2VyVHJhbnNmb3JtXykpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgdmFyIHN0cmlkZSA9IGdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgICAgICBpZiAodGhpcy5pbWFnZV8pIHtcbiAgICAgICAgICAgIHRoaXMuZHJhd0ltYWdlc18oZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRleHRfICE9PSAnJykge1xuICAgICAgICAgICAgdGhpcy5kcmF3VGV4dF8oZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW5kZXIgYSBNdWx0aVBvaW50IGdlb21ldHJ5ICBpbnRvIHRoZSBjYW52YXMuICBSZW5kZXJpbmcgaXMgaW1tZWRpYXRlIGFuZFxuICAgICAqIHVzZXMgdGhlIGN1cnJlbnQgc3R5bGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlQb2ludC5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgTXVsdGlQb2ludCBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd011bHRpUG9pbnQgPSBmdW5jdGlvbiAoZ2VvbWV0cnkpIHtcbiAgICAgICAgaWYgKHRoaXMuc3F1YXJlZFRvbGVyYW5jZV8pIHtcbiAgICAgICAgICAgIGdlb21ldHJ5ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL011bHRpUG9pbnQuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5LnNpbXBsaWZ5VHJhbnNmb3JtZWQodGhpcy5zcXVhcmVkVG9sZXJhbmNlXywgdGhpcy51c2VyVHJhbnNmb3JtXykpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgdmFyIHN0cmlkZSA9IGdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgICAgICBpZiAodGhpcy5pbWFnZV8pIHtcbiAgICAgICAgICAgIHRoaXMuZHJhd0ltYWdlc18oZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRleHRfICE9PSAnJykge1xuICAgICAgICAgICAgdGhpcy5kcmF3VGV4dF8oZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW5kZXIgYSBMaW5lU3RyaW5nIGludG8gdGhlIGNhbnZhcy4gIFJlbmRlcmluZyBpcyBpbW1lZGlhdGUgYW5kIHVzZXNcbiAgICAgKiB0aGUgY3VycmVudCBzdHlsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9MaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBMaW5lU3RyaW5nIGdlb21ldHJ5LlxuICAgICAqL1xuICAgIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5kcmF3TGluZVN0cmluZyA9IGZ1bmN0aW9uIChnZW9tZXRyeSkge1xuICAgICAgICBpZiAodGhpcy5zcXVhcmVkVG9sZXJhbmNlXykge1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkuc2ltcGxpZnlUcmFuc2Zvcm1lZCh0aGlzLnNxdWFyZWRUb2xlcmFuY2VfLCB0aGlzLnVzZXJUcmFuc2Zvcm1fKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbnRlcnNlY3RzKHRoaXMuZXh0ZW50XywgZ2VvbWV0cnkuZ2V0RXh0ZW50KCkpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3Ryb2tlU3RhdGVfKSB7XG4gICAgICAgICAgICB0aGlzLnNldENvbnRleHRTdHJva2VTdGF0ZV8odGhpcy5zdHJva2VTdGF0ZV8pO1xuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgICAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIHRoaXMubW92ZVRvTGluZVRvXyhmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIGdlb21ldHJ5LmdldFN0cmlkZSgpLCBmYWxzZSk7XG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRleHRfICE9PSAnJykge1xuICAgICAgICAgICAgdmFyIGZsYXRNaWRwb2ludCA9IGdlb21ldHJ5LmdldEZsYXRNaWRwb2ludCgpO1xuICAgICAgICAgICAgdGhpcy5kcmF3VGV4dF8oZmxhdE1pZHBvaW50LCAwLCAyLCAyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIGEgTXVsdGlMaW5lU3RyaW5nIGdlb21ldHJ5IGludG8gdGhlIGNhbnZhcy4gIFJlbmRlcmluZyBpcyBpbW1lZGlhdGVcbiAgICAgKiBhbmQgdXNlcyB0aGUgY3VycmVudCBzdHlsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aUxpbmVTdHJpbmcuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IE11bHRpTGluZVN0cmluZyBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd011bHRpTGluZVN0cmluZyA9IGZ1bmN0aW9uIChnZW9tZXRyeSkge1xuICAgICAgICBpZiAodGhpcy5zcXVhcmVkVG9sZXJhbmNlXykge1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlMaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeS5zaW1wbGlmeVRyYW5zZm9ybWVkKHRoaXMuc3F1YXJlZFRvbGVyYW5jZV8sIHRoaXMudXNlclRyYW5zZm9ybV8pKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZ2VvbWV0cnlFeHRlbnQgPSBnZW9tZXRyeS5nZXRFeHRlbnQoKTtcbiAgICAgICAgaWYgKCFpbnRlcnNlY3RzKHRoaXMuZXh0ZW50XywgZ2VvbWV0cnlFeHRlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3Ryb2tlU3RhdGVfKSB7XG4gICAgICAgICAgICB0aGlzLnNldENvbnRleHRTdHJva2VTdGF0ZV8odGhpcy5zdHJva2VTdGF0ZV8pO1xuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgICAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IDA7XG4gICAgICAgICAgICB2YXIgZW5kcyA9IC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGdlb21ldHJ5LmdldEVuZHMoKSk7XG4gICAgICAgICAgICB2YXIgc3RyaWRlID0gZ2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gdGhpcy5tb3ZlVG9MaW5lVG9fKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzW2ldLCBzdHJpZGUsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudGV4dF8gIT09ICcnKSB7XG4gICAgICAgICAgICB2YXIgZmxhdE1pZHBvaW50cyA9IGdlb21ldHJ5LmdldEZsYXRNaWRwb2ludHMoKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd1RleHRfKGZsYXRNaWRwb2ludHMsIDAsIGZsYXRNaWRwb2ludHMubGVuZ3RoLCAyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIGEgUG9seWdvbiBnZW9tZXRyeSBpbnRvIHRoZSBjYW52YXMuICBSZW5kZXJpbmcgaXMgaW1tZWRpYXRlIGFuZCB1c2VzXG4gICAgICogdGhlIGN1cnJlbnQgc3R5bGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgUG9seWdvbiBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd1BvbHlnb24gPSBmdW5jdGlvbiAoZ2VvbWV0cnkpIHtcbiAgICAgICAgaWYgKHRoaXMuc3F1YXJlZFRvbGVyYW5jZV8pIHtcbiAgICAgICAgICAgIGdlb21ldHJ5ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5LnNpbXBsaWZ5VHJhbnNmb3JtZWQodGhpcy5zcXVhcmVkVG9sZXJhbmNlXywgdGhpcy51c2VyVHJhbnNmb3JtXykpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaW50ZXJzZWN0cyh0aGlzLmV4dGVudF8sIGdlb21ldHJ5LmdldEV4dGVudCgpKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0cm9rZVN0YXRlXyB8fCB0aGlzLmZpbGxTdGF0ZV8pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbGxTdGF0ZV8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENvbnRleHRGaWxsU3RhdGVfKHRoaXMuZmlsbFN0YXRlXyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zdHJva2VTdGF0ZV8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENvbnRleHRTdHJva2VTdGF0ZV8odGhpcy5zdHJva2VTdGF0ZV8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd1JpbmdzXyhnZW9tZXRyeS5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLCAwLCBcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGdlb21ldHJ5LmdldEVuZHMoKSksIGdlb21ldHJ5LmdldFN0cmlkZSgpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbGxTdGF0ZV8pIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnN0cm9rZVN0YXRlXykge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudGV4dF8gIT09ICcnKSB7XG4gICAgICAgICAgICB2YXIgZmxhdEludGVyaW9yUG9pbnQgPSBnZW9tZXRyeS5nZXRGbGF0SW50ZXJpb3JQb2ludCgpO1xuICAgICAgICAgICAgdGhpcy5kcmF3VGV4dF8oZmxhdEludGVyaW9yUG9pbnQsIDAsIDIsIDIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW5kZXIgTXVsdGlQb2x5Z29uIGdlb21ldHJ5IGludG8gdGhlIGNhbnZhcy4gIFJlbmRlcmluZyBpcyBpbW1lZGlhdGUgYW5kXG4gICAgICogdXNlcyB0aGUgY3VycmVudCBzdHlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IE11bHRpUG9seWdvbiBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd011bHRpUG9seWdvbiA9IGZ1bmN0aW9uIChnZW9tZXRyeSkge1xuICAgICAgICBpZiAodGhpcy5zcXVhcmVkVG9sZXJhbmNlXykge1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeS5zaW1wbGlmeVRyYW5zZm9ybWVkKHRoaXMuc3F1YXJlZFRvbGVyYW5jZV8sIHRoaXMudXNlclRyYW5zZm9ybV8pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWludGVyc2VjdHModGhpcy5leHRlbnRfLCBnZW9tZXRyeS5nZXRFeHRlbnQoKSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdHJva2VTdGF0ZV8gfHwgdGhpcy5maWxsU3RhdGVfKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5maWxsU3RhdGVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb250ZXh0RmlsbFN0YXRlXyh0aGlzLmZpbGxTdGF0ZV8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc3Ryb2tlU3RhdGVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb250ZXh0U3Ryb2tlU3RhdGVfKHRoaXMuc3Ryb2tlU3RhdGVfKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICAgICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IDA7XG4gICAgICAgICAgICB2YXIgZW5kc3MgPSBnZW9tZXRyeS5nZXRFbmRzcygpO1xuICAgICAgICAgICAgdmFyIHN0cmlkZSA9IGdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICAgICAgICAgIG9mZnNldCA9IHRoaXMuZHJhd1JpbmdzXyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmZpbGxTdGF0ZV8pIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnN0cm9rZVN0YXRlXykge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudGV4dF8gIT09ICcnKSB7XG4gICAgICAgICAgICB2YXIgZmxhdEludGVyaW9yUG9pbnRzID0gZ2VvbWV0cnkuZ2V0RmxhdEludGVyaW9yUG9pbnRzKCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdUZXh0XyhmbGF0SW50ZXJpb3JQb2ludHMsIDAsIGZsYXRJbnRlcmlvclBvaW50cy5sZW5ndGgsIDIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3RhdGV9IGZpbGxTdGF0ZSBGaWxsIHN0YXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLnNldENvbnRleHRGaWxsU3RhdGVfID0gZnVuY3Rpb24gKGZpbGxTdGF0ZSkge1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dF87XG4gICAgICAgIHZhciBjb250ZXh0RmlsbFN0YXRlID0gdGhpcy5jb250ZXh0RmlsbFN0YXRlXztcbiAgICAgICAgaWYgKCFjb250ZXh0RmlsbFN0YXRlKSB7XG4gICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGxTdGF0ZS5maWxsU3R5bGU7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRGaWxsU3RhdGVfID0ge1xuICAgICAgICAgICAgICAgIGZpbGxTdHlsZTogZmlsbFN0YXRlLmZpbGxTdHlsZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoY29udGV4dEZpbGxTdGF0ZS5maWxsU3R5bGUgIT0gZmlsbFN0YXRlLmZpbGxTdHlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHRGaWxsU3RhdGUuZmlsbFN0eWxlID0gZmlsbFN0YXRlLmZpbGxTdHlsZTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGxTdGF0ZS5maWxsU3R5bGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlN0cm9rZVN0YXRlfSBzdHJva2VTdGF0ZSBTdHJva2Ugc3RhdGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuc2V0Q29udGV4dFN0cm9rZVN0YXRlXyA9IGZ1bmN0aW9uIChzdHJva2VTdGF0ZSkge1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dF87XG4gICAgICAgIHZhciBjb250ZXh0U3Ryb2tlU3RhdGUgPSB0aGlzLmNvbnRleHRTdHJva2VTdGF0ZV87XG4gICAgICAgIGlmICghY29udGV4dFN0cm9rZVN0YXRlKSB7XG4gICAgICAgICAgICBjb250ZXh0LmxpbmVDYXAgPSBzdHJva2VTdGF0ZS5saW5lQ2FwO1xuICAgICAgICAgICAgaWYgKGNvbnRleHQuc2V0TGluZURhc2gpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnNldExpbmVEYXNoKHN0cm9rZVN0YXRlLmxpbmVEYXNoKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVEYXNoT2Zmc2V0ID0gc3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZXh0LmxpbmVKb2luID0gc3Ryb2tlU3RhdGUubGluZUpvaW47XG4gICAgICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IHN0cm9rZVN0YXRlLmxpbmVXaWR0aDtcbiAgICAgICAgICAgIGNvbnRleHQubWl0ZXJMaW1pdCA9IHN0cm9rZVN0YXRlLm1pdGVyTGltaXQ7XG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGU7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRTdHJva2VTdGF0ZV8gPSB7XG4gICAgICAgICAgICAgICAgbGluZUNhcDogc3Ryb2tlU3RhdGUubGluZUNhcCxcbiAgICAgICAgICAgICAgICBsaW5lRGFzaDogc3Ryb2tlU3RhdGUubGluZURhc2gsXG4gICAgICAgICAgICAgICAgbGluZURhc2hPZmZzZXQ6IHN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0LFxuICAgICAgICAgICAgICAgIGxpbmVKb2luOiBzdHJva2VTdGF0ZS5saW5lSm9pbixcbiAgICAgICAgICAgICAgICBsaW5lV2lkdGg6IHN0cm9rZVN0YXRlLmxpbmVXaWR0aCxcbiAgICAgICAgICAgICAgICBtaXRlckxpbWl0OiBzdHJva2VTdGF0ZS5taXRlckxpbWl0LFxuICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlOiBzdHJva2VTdGF0ZS5zdHJva2VTdHlsZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoY29udGV4dFN0cm9rZVN0YXRlLmxpbmVDYXAgIT0gc3Ryb2tlU3RhdGUubGluZUNhcCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHRTdHJva2VTdGF0ZS5saW5lQ2FwID0gc3Ryb2tlU3RhdGUubGluZUNhcDtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVDYXAgPSBzdHJva2VTdGF0ZS5saW5lQ2FwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbnRleHQuc2V0TGluZURhc2gpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVxdWFscyhjb250ZXh0U3Ryb2tlU3RhdGUubGluZURhc2gsIHN0cm9rZVN0YXRlLmxpbmVEYXNoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnNldExpbmVEYXNoKChjb250ZXh0U3Ryb2tlU3RhdGUubGluZURhc2ggPSBzdHJva2VTdGF0ZS5saW5lRGFzaCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29udGV4dFN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0ICE9IHN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHRTdHJva2VTdGF0ZS5saW5lRGFzaE9mZnNldCA9IHN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVEYXNoT2Zmc2V0ID0gc3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbnRleHRTdHJva2VTdGF0ZS5saW5lSm9pbiAhPSBzdHJva2VTdGF0ZS5saW5lSm9pbikge1xuICAgICAgICAgICAgICAgIGNvbnRleHRTdHJva2VTdGF0ZS5saW5lSm9pbiA9IHN0cm9rZVN0YXRlLmxpbmVKb2luO1xuICAgICAgICAgICAgICAgIGNvbnRleHQubGluZUpvaW4gPSBzdHJva2VTdGF0ZS5saW5lSm9pbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZXh0U3Ryb2tlU3RhdGUubGluZVdpZHRoICE9IHN0cm9rZVN0YXRlLmxpbmVXaWR0aCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHRTdHJva2VTdGF0ZS5saW5lV2lkdGggPSBzdHJva2VTdGF0ZS5saW5lV2lkdGg7XG4gICAgICAgICAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSBzdHJva2VTdGF0ZS5saW5lV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29udGV4dFN0cm9rZVN0YXRlLm1pdGVyTGltaXQgIT0gc3Ryb2tlU3RhdGUubWl0ZXJMaW1pdCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHRTdHJva2VTdGF0ZS5taXRlckxpbWl0ID0gc3Ryb2tlU3RhdGUubWl0ZXJMaW1pdDtcbiAgICAgICAgICAgICAgICBjb250ZXh0Lm1pdGVyTGltaXQgPSBzdHJva2VTdGF0ZS5taXRlckxpbWl0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbnRleHRTdHJva2VTdGF0ZS5zdHJva2VTdHlsZSAhPSBzdHJva2VTdGF0ZS5zdHJva2VTdHlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHRTdHJva2VTdGF0ZS5zdHJva2VTdHlsZSA9IHN0cm9rZVN0YXRlLnN0cm9rZVN0eWxlO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBzdHJva2VTdGF0ZS5zdHJva2VTdHlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuVGV4dFN0YXRlfSB0ZXh0U3RhdGUgVGV4dCBzdGF0ZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5zZXRDb250ZXh0VGV4dFN0YXRlXyA9IGZ1bmN0aW9uICh0ZXh0U3RhdGUpIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgICAgICB2YXIgY29udGV4dFRleHRTdGF0ZSA9IHRoaXMuY29udGV4dFRleHRTdGF0ZV87XG4gICAgICAgIHZhciB0ZXh0QWxpZ24gPSB0ZXh0U3RhdGUudGV4dEFsaWduXG4gICAgICAgICAgICA/IHRleHRTdGF0ZS50ZXh0QWxpZ25cbiAgICAgICAgICAgIDogZGVmYXVsdFRleHRBbGlnbjtcbiAgICAgICAgaWYgKCFjb250ZXh0VGV4dFN0YXRlKSB7XG4gICAgICAgICAgICBjb250ZXh0LmZvbnQgPSB0ZXh0U3RhdGUuZm9udDtcbiAgICAgICAgICAgIGNvbnRleHQudGV4dEFsaWduID0gLyoqIEB0eXBlIHtDYW52YXNUZXh0QWxpZ259ICovICh0ZXh0QWxpZ24pO1xuICAgICAgICAgICAgY29udGV4dC50ZXh0QmFzZWxpbmUgPSAvKiogQHR5cGUge0NhbnZhc1RleHRCYXNlbGluZX0gKi8gKHRleHRTdGF0ZS50ZXh0QmFzZWxpbmUpO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0VGV4dFN0YXRlXyA9IHtcbiAgICAgICAgICAgICAgICBmb250OiB0ZXh0U3RhdGUuZm9udCxcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IHRleHRBbGlnbixcbiAgICAgICAgICAgICAgICB0ZXh0QmFzZWxpbmU6IHRleHRTdGF0ZS50ZXh0QmFzZWxpbmUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNvbnRleHRUZXh0U3RhdGUuZm9udCAhPSB0ZXh0U3RhdGUuZm9udCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHRUZXh0U3RhdGUuZm9udCA9IHRleHRTdGF0ZS5mb250O1xuICAgICAgICAgICAgICAgIGNvbnRleHQuZm9udCA9IHRleHRTdGF0ZS5mb250O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbnRleHRUZXh0U3RhdGUudGV4dEFsaWduICE9IHRleHRBbGlnbikge1xuICAgICAgICAgICAgICAgIGNvbnRleHRUZXh0U3RhdGUudGV4dEFsaWduID0gLyoqIEB0eXBlIHtDYW52YXNUZXh0QWxpZ259ICovICh0ZXh0QWxpZ24pO1xuICAgICAgICAgICAgICAgIGNvbnRleHQudGV4dEFsaWduID0gLyoqIEB0eXBlIHtDYW52YXNUZXh0QWxpZ259ICovICh0ZXh0QWxpZ24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbnRleHRUZXh0U3RhdGUudGV4dEJhc2VsaW5lICE9IHRleHRTdGF0ZS50ZXh0QmFzZWxpbmUpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0VGV4dFN0YXRlLnRleHRCYXNlbGluZSA9IC8qKiBAdHlwZSB7Q2FudmFzVGV4dEJhc2VsaW5lfSAqLyAodGV4dFN0YXRlLnRleHRCYXNlbGluZSk7XG4gICAgICAgICAgICAgICAgY29udGV4dC50ZXh0QmFzZWxpbmUgPSAvKiogQHR5cGUge0NhbnZhc1RleHRCYXNlbGluZX0gKi8gKHRleHRTdGF0ZS50ZXh0QmFzZWxpbmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGZpbGwgYW5kIHN0cm9rZSBzdHlsZSBmb3Igc3Vic2VxdWVudCBkcmF3IG9wZXJhdGlvbnMuICBUbyBjbGVhclxuICAgICAqIGVpdGhlciBmaWxsIG9yIHN0cm9rZSBzdHlsZXMsIHBhc3MgbnVsbCBmb3IgdGhlIGFwcHJvcHJpYXRlIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc3R5bGUvRmlsbC5qc1wiKS5kZWZhdWx0fSBmaWxsU3R5bGUgRmlsbCBzdHlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3N0eWxlL1N0cm9rZS5qc1wiKS5kZWZhdWx0fSBzdHJva2VTdHlsZSBTdHJva2Ugc3R5bGUuXG4gICAgICovXG4gICAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLnNldEZpbGxTdHJva2VTdHlsZSA9IGZ1bmN0aW9uIChmaWxsU3R5bGUsIHN0cm9rZVN0eWxlKSB7XG4gICAgICAgIGlmICghZmlsbFN0eWxlKSB7XG4gICAgICAgICAgICB0aGlzLmZpbGxTdGF0ZV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGZpbGxTdHlsZUNvbG9yID0gZmlsbFN0eWxlLmdldENvbG9yKCk7XG4gICAgICAgICAgICB0aGlzLmZpbGxTdGF0ZV8gPSB7XG4gICAgICAgICAgICAgICAgZmlsbFN0eWxlOiBhc0NvbG9yTGlrZShmaWxsU3R5bGVDb2xvciA/IGZpbGxTdHlsZUNvbG9yIDogZGVmYXVsdEZpbGxTdHlsZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICghc3Ryb2tlU3R5bGUpIHtcbiAgICAgICAgICAgIHRoaXMuc3Ryb2tlU3RhdGVfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzdHJva2VTdHlsZUNvbG9yID0gc3Ryb2tlU3R5bGUuZ2V0Q29sb3IoKTtcbiAgICAgICAgICAgIHZhciBzdHJva2VTdHlsZUxpbmVDYXAgPSBzdHJva2VTdHlsZS5nZXRMaW5lQ2FwKCk7XG4gICAgICAgICAgICB2YXIgc3Ryb2tlU3R5bGVMaW5lRGFzaCA9IHN0cm9rZVN0eWxlLmdldExpbmVEYXNoKCk7XG4gICAgICAgICAgICB2YXIgc3Ryb2tlU3R5bGVMaW5lRGFzaE9mZnNldCA9IHN0cm9rZVN0eWxlLmdldExpbmVEYXNoT2Zmc2V0KCk7XG4gICAgICAgICAgICB2YXIgc3Ryb2tlU3R5bGVMaW5lSm9pbiA9IHN0cm9rZVN0eWxlLmdldExpbmVKb2luKCk7XG4gICAgICAgICAgICB2YXIgc3Ryb2tlU3R5bGVXaWR0aCA9IHN0cm9rZVN0eWxlLmdldFdpZHRoKCk7XG4gICAgICAgICAgICB2YXIgc3Ryb2tlU3R5bGVNaXRlckxpbWl0ID0gc3Ryb2tlU3R5bGUuZ2V0TWl0ZXJMaW1pdCgpO1xuICAgICAgICAgICAgdGhpcy5zdHJva2VTdGF0ZV8gPSB7XG4gICAgICAgICAgICAgICAgbGluZUNhcDogc3Ryb2tlU3R5bGVMaW5lQ2FwICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgPyBzdHJva2VTdHlsZUxpbmVDYXBcbiAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0TGluZUNhcCxcbiAgICAgICAgICAgICAgICBsaW5lRGFzaDogc3Ryb2tlU3R5bGVMaW5lRGFzaCA/IHN0cm9rZVN0eWxlTGluZURhc2ggOiBkZWZhdWx0TGluZURhc2gsXG4gICAgICAgICAgICAgICAgbGluZURhc2hPZmZzZXQ6IHN0cm9rZVN0eWxlTGluZURhc2hPZmZzZXRcbiAgICAgICAgICAgICAgICAgICAgPyBzdHJva2VTdHlsZUxpbmVEYXNoT2Zmc2V0XG4gICAgICAgICAgICAgICAgICAgIDogZGVmYXVsdExpbmVEYXNoT2Zmc2V0LFxuICAgICAgICAgICAgICAgIGxpbmVKb2luOiBzdHJva2VTdHlsZUxpbmVKb2luICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgPyBzdHJva2VTdHlsZUxpbmVKb2luXG4gICAgICAgICAgICAgICAgICAgIDogZGVmYXVsdExpbmVKb2luLFxuICAgICAgICAgICAgICAgIGxpbmVXaWR0aDogdGhpcy5waXhlbFJhdGlvXyAqXG4gICAgICAgICAgICAgICAgICAgIChzdHJva2VTdHlsZVdpZHRoICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc3Ryb2tlU3R5bGVXaWR0aFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0TGluZVdpZHRoKSxcbiAgICAgICAgICAgICAgICBtaXRlckxpbWl0OiBzdHJva2VTdHlsZU1pdGVyTGltaXQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA/IHN0cm9rZVN0eWxlTWl0ZXJMaW1pdFxuICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHRNaXRlckxpbWl0LFxuICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlOiBhc0NvbG9yTGlrZShzdHJva2VTdHlsZUNvbG9yID8gc3Ryb2tlU3R5bGVDb2xvciA6IGRlZmF1bHRTdHJva2VTdHlsZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGltYWdlIHN0eWxlIGZvciBzdWJzZXF1ZW50IGRyYXcgb3BlcmF0aW9ucy4gIFBhc3MgbnVsbCB0byByZW1vdmVcbiAgICAgKiB0aGUgaW1hZ2Ugc3R5bGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3N0eWxlL0ltYWdlLmpzXCIpLmRlZmF1bHR9IGltYWdlU3R5bGUgSW1hZ2Ugc3R5bGUuXG4gICAgICovXG4gICAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLnNldEltYWdlU3R5bGUgPSBmdW5jdGlvbiAoaW1hZ2VTdHlsZSkge1xuICAgICAgICBpZiAoIWltYWdlU3R5bGUpIHtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBpbWFnZVNpemUgPSBpbWFnZVN0eWxlLmdldFNpemUoKTtcbiAgICAgICAgICAgIGlmICghaW1hZ2VTaXplKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZV8gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGltYWdlQW5jaG9yID0gaW1hZ2VTdHlsZS5nZXRBbmNob3IoKTtcbiAgICAgICAgICAgICAgICAvLyBGSVhNRSBwaXhlbCByYXRpb1xuICAgICAgICAgICAgICAgIHZhciBpbWFnZUltYWdlID0gaW1hZ2VTdHlsZS5nZXRJbWFnZSgxKTtcbiAgICAgICAgICAgICAgICB2YXIgaW1hZ2VPcmlnaW4gPSBpbWFnZVN0eWxlLmdldE9yaWdpbigpO1xuICAgICAgICAgICAgICAgIHZhciBpbWFnZVNjYWxlID0gaW1hZ2VTdHlsZS5nZXRTY2FsZUFycmF5KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZUFuY2hvclhfID0gaW1hZ2VBbmNob3JbMF07XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZUFuY2hvcllfID0gaW1hZ2VBbmNob3JbMV07XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZUhlaWdodF8gPSBpbWFnZVNpemVbMV07XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZV8gPSBpbWFnZUltYWdlO1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VPcGFjaXR5XyA9IGltYWdlU3R5bGUuZ2V0T3BhY2l0eSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VPcmlnaW5YXyA9IGltYWdlT3JpZ2luWzBdO1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VPcmlnaW5ZXyA9IGltYWdlT3JpZ2luWzFdO1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VSb3RhdGVXaXRoVmlld18gPSBpbWFnZVN0eWxlLmdldFJvdGF0ZVdpdGhWaWV3KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVJvdGF0aW9uXyA9IGltYWdlU3R5bGUuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlU2NhbGVfID0gW1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBpeGVsUmF0aW9fICogaW1hZ2VTY2FsZVswXSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5waXhlbFJhdGlvXyAqIGltYWdlU2NhbGVbMV0sXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlV2lkdGhfID0gaW1hZ2VTaXplWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHRleHQgc3R5bGUgZm9yIHN1YnNlcXVlbnQgZHJhdyBvcGVyYXRpb25zLiAgUGFzcyBudWxsIHRvXG4gICAgICogcmVtb3ZlIHRoZSB0ZXh0IHN0eWxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zdHlsZS9UZXh0LmpzXCIpLmRlZmF1bHR9IHRleHRTdHlsZSBUZXh0IHN0eWxlLlxuICAgICAqL1xuICAgIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5zZXRUZXh0U3R5bGUgPSBmdW5jdGlvbiAodGV4dFN0eWxlKSB7XG4gICAgICAgIGlmICghdGV4dFN0eWxlKSB7XG4gICAgICAgICAgICB0aGlzLnRleHRfID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGV4dEZpbGxTdHlsZSA9IHRleHRTdHlsZS5nZXRGaWxsKCk7XG4gICAgICAgICAgICBpZiAoIXRleHRGaWxsU3R5bGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRGaWxsU3RhdGVfID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0RmlsbFN0eWxlQ29sb3IgPSB0ZXh0RmlsbFN0eWxlLmdldENvbG9yKCk7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0RmlsbFN0YXRlXyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbFN0eWxlOiBhc0NvbG9yTGlrZSh0ZXh0RmlsbFN0eWxlQ29sb3IgPyB0ZXh0RmlsbFN0eWxlQ29sb3IgOiBkZWZhdWx0RmlsbFN0eWxlKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRleHRTdHJva2VTdHlsZSA9IHRleHRTdHlsZS5nZXRTdHJva2UoKTtcbiAgICAgICAgICAgIGlmICghdGV4dFN0cm9rZVN0eWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0U3Ryb2tlU3RhdGVfID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0U3Ryb2tlU3R5bGVDb2xvciA9IHRleHRTdHJva2VTdHlsZS5nZXRDb2xvcigpO1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0U3Ryb2tlU3R5bGVMaW5lQ2FwID0gdGV4dFN0cm9rZVN0eWxlLmdldExpbmVDYXAoKTtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dFN0cm9rZVN0eWxlTGluZURhc2ggPSB0ZXh0U3Ryb2tlU3R5bGUuZ2V0TGluZURhc2goKTtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dFN0cm9rZVN0eWxlTGluZURhc2hPZmZzZXQgPSB0ZXh0U3Ryb2tlU3R5bGUuZ2V0TGluZURhc2hPZmZzZXQoKTtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dFN0cm9rZVN0eWxlTGluZUpvaW4gPSB0ZXh0U3Ryb2tlU3R5bGUuZ2V0TGluZUpvaW4oKTtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dFN0cm9rZVN0eWxlV2lkdGggPSB0ZXh0U3Ryb2tlU3R5bGUuZ2V0V2lkdGgoKTtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dFN0cm9rZVN0eWxlTWl0ZXJMaW1pdCA9IHRleHRTdHJva2VTdHlsZS5nZXRNaXRlckxpbWl0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0U3Ryb2tlU3RhdGVfID0ge1xuICAgICAgICAgICAgICAgICAgICBsaW5lQ2FwOiB0ZXh0U3Ryb2tlU3R5bGVMaW5lQ2FwICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGV4dFN0cm9rZVN0eWxlTGluZUNhcFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0TGluZUNhcCxcbiAgICAgICAgICAgICAgICAgICAgbGluZURhc2g6IHRleHRTdHJva2VTdHlsZUxpbmVEYXNoXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRleHRTdHJva2VTdHlsZUxpbmVEYXNoXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHRMaW5lRGFzaCxcbiAgICAgICAgICAgICAgICAgICAgbGluZURhc2hPZmZzZXQ6IHRleHRTdHJva2VTdHlsZUxpbmVEYXNoT2Zmc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRleHRTdHJva2VTdHlsZUxpbmVEYXNoT2Zmc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHRMaW5lRGFzaE9mZnNldCxcbiAgICAgICAgICAgICAgICAgICAgbGluZUpvaW46IHRleHRTdHJva2VTdHlsZUxpbmVKb2luICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGV4dFN0cm9rZVN0eWxlTGluZUpvaW5cbiAgICAgICAgICAgICAgICAgICAgICAgIDogZGVmYXVsdExpbmVKb2luLFxuICAgICAgICAgICAgICAgICAgICBsaW5lV2lkdGg6IHRleHRTdHJva2VTdHlsZVdpZHRoICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGV4dFN0cm9rZVN0eWxlV2lkdGhcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZGVmYXVsdExpbmVXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgbWl0ZXJMaW1pdDogdGV4dFN0cm9rZVN0eWxlTWl0ZXJMaW1pdCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRleHRTdHJva2VTdHlsZU1pdGVyTGltaXRcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZGVmYXVsdE1pdGVyTGltaXQsXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlOiBhc0NvbG9yTGlrZSh0ZXh0U3Ryb2tlU3R5bGVDb2xvciA/IHRleHRTdHJva2VTdHlsZUNvbG9yIDogZGVmYXVsdFN0cm9rZVN0eWxlKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRleHRGb250ID0gdGV4dFN0eWxlLmdldEZvbnQoKTtcbiAgICAgICAgICAgIHZhciB0ZXh0T2Zmc2V0WCA9IHRleHRTdHlsZS5nZXRPZmZzZXRYKCk7XG4gICAgICAgICAgICB2YXIgdGV4dE9mZnNldFkgPSB0ZXh0U3R5bGUuZ2V0T2Zmc2V0WSgpO1xuICAgICAgICAgICAgdmFyIHRleHRSb3RhdGVXaXRoVmlldyA9IHRleHRTdHlsZS5nZXRSb3RhdGVXaXRoVmlldygpO1xuICAgICAgICAgICAgdmFyIHRleHRSb3RhdGlvbiA9IHRleHRTdHlsZS5nZXRSb3RhdGlvbigpO1xuICAgICAgICAgICAgdmFyIHRleHRTY2FsZSA9IHRleHRTdHlsZS5nZXRTY2FsZUFycmF5KCk7XG4gICAgICAgICAgICB2YXIgdGV4dFRleHQgPSB0ZXh0U3R5bGUuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgdmFyIHRleHRUZXh0QWxpZ24gPSB0ZXh0U3R5bGUuZ2V0VGV4dEFsaWduKCk7XG4gICAgICAgICAgICB2YXIgdGV4dFRleHRCYXNlbGluZSA9IHRleHRTdHlsZS5nZXRUZXh0QmFzZWxpbmUoKTtcbiAgICAgICAgICAgIHRoaXMudGV4dFN0YXRlXyA9IHtcbiAgICAgICAgICAgICAgICBmb250OiB0ZXh0Rm9udCAhPT0gdW5kZWZpbmVkID8gdGV4dEZvbnQgOiBkZWZhdWx0Rm9udCxcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IHRleHRUZXh0QWxpZ24gIT09IHVuZGVmaW5lZCA/IHRleHRUZXh0QWxpZ24gOiBkZWZhdWx0VGV4dEFsaWduLFxuICAgICAgICAgICAgICAgIHRleHRCYXNlbGluZTogdGV4dFRleHRCYXNlbGluZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8gdGV4dFRleHRCYXNlbGluZVxuICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHRUZXh0QmFzZWxpbmUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50ZXh0XyA9IHRleHRUZXh0ICE9PSB1bmRlZmluZWQgPyB0ZXh0VGV4dCA6ICcnO1xuICAgICAgICAgICAgdGhpcy50ZXh0T2Zmc2V0WF8gPVxuICAgICAgICAgICAgICAgIHRleHRPZmZzZXRYICE9PSB1bmRlZmluZWQgPyB0aGlzLnBpeGVsUmF0aW9fICogdGV4dE9mZnNldFggOiAwO1xuICAgICAgICAgICAgdGhpcy50ZXh0T2Zmc2V0WV8gPVxuICAgICAgICAgICAgICAgIHRleHRPZmZzZXRZICE9PSB1bmRlZmluZWQgPyB0aGlzLnBpeGVsUmF0aW9fICogdGV4dE9mZnNldFkgOiAwO1xuICAgICAgICAgICAgdGhpcy50ZXh0Um90YXRlV2l0aFZpZXdfID1cbiAgICAgICAgICAgICAgICB0ZXh0Um90YXRlV2l0aFZpZXcgIT09IHVuZGVmaW5lZCA/IHRleHRSb3RhdGVXaXRoVmlldyA6IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy50ZXh0Um90YXRpb25fID0gdGV4dFJvdGF0aW9uICE9PSB1bmRlZmluZWQgPyB0ZXh0Um90YXRpb24gOiAwO1xuICAgICAgICAgICAgdGhpcy50ZXh0U2NhbGVfID0gW1xuICAgICAgICAgICAgICAgIHRoaXMucGl4ZWxSYXRpb18gKiB0ZXh0U2NhbGVbMF0sXG4gICAgICAgICAgICAgICAgdGhpcy5waXhlbFJhdGlvXyAqIHRleHRTY2FsZVsxXSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBDYW52YXNJbW1lZGlhdGVSZW5kZXJlcjtcbn0oVmVjdG9yQ29udGV4dCkpO1xuZXhwb3J0IGRlZmF1bHQgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbW1lZGlhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0eWxlL0ljb25BbmNob3JVbml0c1xuICovXG4vKipcbiAqIEljb24gYW5jaG9yIHVuaXRzLiBPbmUgb2YgJ2ZyYWN0aW9uJywgJ3BpeGVscycuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogQW5jaG9yIGlzIGEgZnJhY3Rpb25cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgRlJBQ1RJT046ICdmcmFjdGlvbicsXG4gICAgLyoqXG4gICAgICogQW5jaG9yIGlzIGluIHBpeGVsc1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQSVhFTFM6ICdwaXhlbHMnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUljb25BbmNob3JVbml0cy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3R5bGUvSWNvbk9yaWdpblxuICovXG4vKipcbiAqIEljb24gb3JpZ2luLiBPbmUgb2YgJ2JvdHRvbS1sZWZ0JywgJ2JvdHRvbS1yaWdodCcsICd0b3AtbGVmdCcsICd0b3AtcmlnaHQnLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC8qKlxuICAgICAqIE9yaWdpbiBpcyBhdCBib3R0b20gbGVmdFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCT1RUT01fTEVGVDogJ2JvdHRvbS1sZWZ0JyxcbiAgICAvKipcbiAgICAgKiBPcmlnaW4gaXMgYXQgYm90dG9tIHJpZ2h0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJPVFRPTV9SSUdIVDogJ2JvdHRvbS1yaWdodCcsXG4gICAgLyoqXG4gICAgICogT3JpZ2luIGlzIGF0IHRvcCBsZWZ0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRPUF9MRUZUOiAndG9wLWxlZnQnLFxuICAgIC8qKlxuICAgICAqIE9yaWdpbiBpcyBhdCB0b3AgcmlnaHRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVE9QX1JJR0hUOiAndG9wLXJpZ2h0Jyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JY29uT3JpZ2luLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvSW1hZ2VCYXNlXG4gKi9cbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuL3V0aWwuanMnO1xuLyoqXG4gKiBAYWJzdHJhY3RcbiAqL1xudmFyIEltYWdlQmFzZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW1hZ2VCYXNlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9IHN0YXRlIFN0YXRlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEltYWdlQmFzZShleHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIHN0YXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5leHRlbnQgPSBleHRlbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxSYXRpb18gPSBwaXhlbFJhdGlvO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBJbWFnZUJhc2UucHJvdG90eXBlLmNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChFdmVudFR5cGUuQ0hBTkdFKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5leHRlbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IEltYWdlLlxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBQaXhlbFJhdGlvLlxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0UGl4ZWxSYXRpbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGl4ZWxSYXRpb187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24uXG4gICAgICovXG4gICAgSW1hZ2VCYXNlLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLnJlc29sdXRpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9IFN0YXRlLlxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZCBub3QgeWV0IGxvYWRlZCBVUkkuXG4gICAgICogQGFic3RyYWN0XG4gICAgICovXG4gICAgSW1hZ2VCYXNlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgcmV0dXJuIEltYWdlQmFzZTtcbn0oRXZlbnRUYXJnZXQpKTtcbmV4cG9ydCBkZWZhdWx0IEltYWdlQmFzZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlQmFzZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL0ltYWdlXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbWFnZUJhc2UgZnJvbSAnLi9JbWFnZUJhc2UuanMnO1xuaW1wb3J0IEltYWdlU3RhdGUgZnJvbSAnLi9JbWFnZVN0YXRlLmpzJztcbmltcG9ydCB7IElNQUdFX0RFQ09ERSB9IGZyb20gJy4vaGFzLmpzJztcbmltcG9ydCB7IGdldEhlaWdodCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGxpc3Rlbk9uY2UsIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuL2V2ZW50cy5qcyc7XG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL0ltYWdlfkltYWdlfSBmb3IgdGhlIGltYWdlIGFuZCBhXG4gKiBge3N0cmluZ31gIGZvciB0aGUgc3JjIGFzIGFyZ3VtZW50cy4gSXQgaXMgc3VwcG9zZWQgdG8gbWFrZSBpdCBzbyB0aGVcbiAqIHVuZGVybHlpbmcgaW1hZ2Uge0BsaW5rIG1vZHVsZTpvbC9JbWFnZX5JbWFnZSNnZXRJbWFnZX0gaXMgYXNzaWduZWQgdGhlXG4gKiBjb250ZW50IHNwZWNpZmllZCBieSB0aGUgc3JjLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgZGVmYXVsdCBpc1xuICpcbiAqICAgICBmdW5jdGlvbihpbWFnZSwgc3JjKSB7XG4gKiAgICAgICBpbWFnZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqICAgICB9XG4gKlxuICogUHJvdmlkaW5nIGEgY3VzdG9tIGBpbWFnZUxvYWRGdW5jdGlvbmAgY2FuIGJlIHVzZWZ1bCB0byBsb2FkIGltYWdlcyB3aXRoXG4gKiBwb3N0IHJlcXVlc3RzIG9yIC0gaW4gZ2VuZXJhbCAtIHRocm91Z2ggWEhSIHJlcXVlc3RzLCB3aGVyZSB0aGUgc3JjIG9mIHRoZVxuICogaW1hZ2UgZWxlbWVudCB3b3VsZCBiZSBzZXQgdG8gYSBkYXRhIFVSSSB3aGVuIHRoZSBjb250ZW50IGlzIGxvYWRlZC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oSW1hZ2VXcmFwcGVyLCBzdHJpbmcpOiB2b2lkfSBMb2FkRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xudmFyIEltYWdlV3JhcHBlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW1hZ2VXcmFwcGVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgSW1hZ2Ugc291cmNlIFVSSS5cbiAgICAgKiBAcGFyYW0gez9zdHJpbmd9IGNyb3NzT3JpZ2luIENyb3NzIG9yaWdpbi5cbiAgICAgKiBAcGFyYW0ge0xvYWRGdW5jdGlvbn0gaW1hZ2VMb2FkRnVuY3Rpb24gSW1hZ2UgbG9hZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBJbWFnZVdyYXBwZXIoZXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBzcmMsIGNyb3NzT3JpZ2luLCBpbWFnZUxvYWRGdW5jdGlvbikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBleHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIEltYWdlU3RhdGUuSURMRSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zcmNfID0gc3JjO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlXyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpZiAoY3Jvc3NPcmlnaW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIF90aGlzLmltYWdlXy5jcm9zc09yaWdpbiA9IGNyb3NzT3JpZ2luO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2Z1bmN0aW9uKCk6dm9pZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVubGlzdGVuXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0ltYWdlU3RhdGUuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXRlID0gSW1hZ2VTdGF0ZS5JRExFO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0xvYWRGdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlTG9hZEZ1bmN0aW9uXyA9IGltYWdlTG9hZEZ1bmN0aW9uO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gSW1hZ2UuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlV3JhcHBlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmltYWdlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYWNrcyBsb2FkaW5nIG9yIHJlYWQgZXJyb3JzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVdyYXBwZXIucHJvdG90eXBlLmhhbmRsZUltYWdlRXJyb3JfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gSW1hZ2VTdGF0ZS5FUlJPUjtcbiAgICAgICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYWNrcyBzdWNjZXNzZnVsIGltYWdlIGxvYWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEltYWdlV3JhcHBlci5wcm90b3R5cGUuaGFuZGxlSW1hZ2VMb2FkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzb2x1dGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdXRpb24gPSBnZXRIZWlnaHQodGhpcy5leHRlbnQpIC8gdGhpcy5pbWFnZV8uaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUgPSBJbWFnZVN0YXRlLkxPQURFRDtcbiAgICAgICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIGltYWdlIG9yIHJldHJ5IGlmIGxvYWRpbmcgcHJldmlvdXNseSBmYWlsZWQuXG4gICAgICogTG9hZGluZyBpcyB0YWtlbiBjYXJlIG9mIGJ5IHRoZSB0aWxlIHF1ZXVlLCBhbmQgY2FsbGluZyB0aGlzIG1ldGhvZCBpc1xuICAgICAqIG9ubHkgbmVlZGVkIGZvciBwcmVsb2FkaW5nIG9yIGZvciByZWxvYWRpbmcgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW1hZ2VXcmFwcGVyLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSBJbWFnZVN0YXRlLklETEUgfHwgdGhpcy5zdGF0ZSA9PSBJbWFnZVN0YXRlLkVSUk9SKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gSW1hZ2VTdGF0ZS5MT0FESU5HO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgICAgICB0aGlzLmltYWdlTG9hZEZ1bmN0aW9uXyh0aGlzLCB0aGlzLnNyY18pO1xuICAgICAgICAgICAgdGhpcy51bmxpc3Rlbl8gPSBsaXN0ZW5JbWFnZSh0aGlzLmltYWdlXywgdGhpcy5oYW5kbGVJbWFnZUxvYWRfLmJpbmQodGhpcyksIHRoaXMuaGFuZGxlSW1hZ2VFcnJvcl8uYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBpbWFnZSBJbWFnZS5cbiAgICAgKi9cbiAgICBJbWFnZVdyYXBwZXIucHJvdG90eXBlLnNldEltYWdlID0gZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICAgIHRoaXMuaW1hZ2VfID0gaW1hZ2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXNjYXJkcyBldmVudCBoYW5kbGVycyB3aGljaCBsaXN0ZW4gZm9yIGxvYWQgY29tcGxldGlvbiBvciBlcnJvcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEltYWdlV3JhcHBlci5wcm90b3R5cGUudW5saXN0ZW5JbWFnZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnVubGlzdGVuXykge1xuICAgICAgICAgICAgdGhpcy51bmxpc3Rlbl8oKTtcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5fID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEltYWdlV3JhcHBlcjtcbn0oSW1hZ2VCYXNlKSk7XG4vKipcbiAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBpbWFnZSBJbWFnZSBlbGVtZW50LlxuICogQHBhcmFtIHtmdW5jdGlvbigpOmFueX0gbG9hZEhhbmRsZXIgTG9hZCBjYWxsYmFjayBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKTphbnl9IGVycm9ySGFuZGxlciBFcnJvciBjYWxsYmFjayBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKCk6dm9pZH0gQ2FsbGJhY2sgdG8gc3RvcCBsaXN0ZW5pbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW5JbWFnZShpbWFnZSwgbG9hZEhhbmRsZXIsIGVycm9ySGFuZGxlcikge1xuICAgIHZhciBpbWcgPSAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR9ICovIChpbWFnZSk7XG4gICAgaWYgKGltZy5zcmMgJiYgSU1BR0VfREVDT0RFKSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gaW1nLmRlY29kZSgpO1xuICAgICAgICB2YXIgbGlzdGVuaW5nXzEgPSB0cnVlO1xuICAgICAgICB2YXIgdW5saXN0ZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsaXN0ZW5pbmdfMSA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBwcm9taXNlXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAobGlzdGVuaW5nXzEpIHtcbiAgICAgICAgICAgICAgICBsb2FkSGFuZGxlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGxpc3RlbmluZ18xKSB7XG4gICAgICAgICAgICAgICAgLy8gRklYTUU6IFVuY29uZGl0aW9uYWxseSBjYWxsIGVycm9ySGFuZGxlcigpIHdoZW4gdGhpcyBidWcgaXMgZml4ZWQgdXBzdHJlYW06XG4gICAgICAgICAgICAgICAgLy8gICAgICAgIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xOTg1MjdcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0VuY29kaW5nRXJyb3InICYmXG4gICAgICAgICAgICAgICAgICAgIGVycm9yLm1lc3NhZ2UgPT09ICdJbnZhbGlkIGltYWdlIHR5cGUuJykge1xuICAgICAgICAgICAgICAgICAgICBsb2FkSGFuZGxlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHVubGlzdGVuO1xuICAgIH1cbiAgICB2YXIgbGlzdGVuZXJLZXlzID0gW1xuICAgICAgICBsaXN0ZW5PbmNlKGltZywgRXZlbnRUeXBlLkxPQUQsIGxvYWRIYW5kbGVyKSxcbiAgICAgICAgbGlzdGVuT25jZShpbWcsIEV2ZW50VHlwZS5FUlJPUiwgZXJyb3JIYW5kbGVyKSxcbiAgICBdO1xuICAgIHJldHVybiBmdW5jdGlvbiB1bmxpc3RlbigpIHtcbiAgICAgICAgbGlzdGVuZXJLZXlzLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgfTtcbn1cbmV4cG9ydCBkZWZhdWx0IEltYWdlV3JhcHBlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zdHlsZS9JY29uSW1hZ2VcbiAqL1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW1hZ2VTdGF0ZSBmcm9tICcuLi9JbWFnZVN0YXRlLmpzJztcbmltcG9ydCB7IGFzU3RyaW5nIH0gZnJvbSAnLi4vY29sb3IuanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FudmFzQ29udGV4dDJEIH0gZnJvbSAnLi4vZG9tLmpzJztcbmltcG9ydCB7IHNoYXJlZCBhcyBpY29uSW1hZ2VDYWNoZSB9IGZyb20gJy4vSWNvbkltYWdlQ2FjaGUuanMnO1xuaW1wb3J0IHsgbGlzdGVuSW1hZ2UgfSBmcm9tICcuLi9JbWFnZS5qcyc7XG4vKipcbiAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XG4gKi9cbnZhciB0YWludGVkVGVzdENvbnRleHQgPSBudWxsO1xudmFyIEljb25JbWFnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSWNvbkltYWdlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudH0gaW1hZ2UgSW1hZ2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfSBzcmMgU3JjLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFNpemUuXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9IGltYWdlU3RhdGUgSW1hZ2Ugc3RhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn0gY29sb3IgQ29sb3IuXG4gICAgICovXG4gICAgZnVuY3Rpb24gSWNvbkltYWdlKGltYWdlLCBzcmMsIHNpemUsIGNyb3NzT3JpZ2luLCBpbWFnZVN0YXRlLCBjb2xvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5oaXREZXRlY3Rpb25JbWFnZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZV8gPSAhaW1hZ2UgPyBuZXcgSW1hZ2UoKSA6IGltYWdlO1xuICAgICAgICBpZiAoY3Jvc3NPcmlnaW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudH0gKi8gKF90aGlzLmltYWdlXykuY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxudW1iZXIsIEhUTUxDYW52YXNFbGVtZW50Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNhbnZhc18gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbG9yXyA9IGNvbG9yO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9mdW5jdGlvbigpOnZvaWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bmxpc3Rlbl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL0ltYWdlU3RhdGUuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlU3RhdGVfID0gaW1hZ2VTdGF0ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zaXplXyA9IHNpemU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNyY18gPSBzcmM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGFpbnRlZF87XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgaW1hZ2UgY2FudmFzIGlzIHRhaW50ZWQuXG4gICAgICovXG4gICAgSWNvbkltYWdlLnByb3RvdHlwZS5pc1RhaW50ZWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy50YWludGVkXyA9PT0gdW5kZWZpbmVkICYmIHRoaXMuaW1hZ2VTdGF0ZV8gPT09IEltYWdlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICBpZiAoIXRhaW50ZWRUZXN0Q29udGV4dCkge1xuICAgICAgICAgICAgICAgIHRhaW50ZWRUZXN0Q29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCgxLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhaW50ZWRUZXN0Q29udGV4dC5kcmF3SW1hZ2UodGhpcy5pbWFnZV8sIDAsIDApO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0YWludGVkVGVzdENvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIDEsIDEpO1xuICAgICAgICAgICAgICAgIHRoaXMudGFpbnRlZF8gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGFpbnRlZFRlc3RDb250ZXh0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnRhaW50ZWRfID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50YWludGVkXyA9PT0gdHJ1ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSWNvbkltYWdlLnByb3RvdHlwZS5kaXNwYXRjaENoYW5nZUV2ZW50XyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEV2ZW50VHlwZS5DSEFOR0UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJY29uSW1hZ2UucHJvdG90eXBlLmhhbmRsZUltYWdlRXJyb3JfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmltYWdlU3RhdGVfID0gSW1hZ2VTdGF0ZS5FUlJPUjtcbiAgICAgICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoQ2hhbmdlRXZlbnRfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEljb25JbWFnZS5wcm90b3R5cGUuaGFuZGxlSW1hZ2VMb2FkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pbWFnZVN0YXRlXyA9IEltYWdlU3RhdGUuTE9BREVEO1xuICAgICAgICBpZiAodGhpcy5zaXplXykge1xuICAgICAgICAgICAgdGhpcy5pbWFnZV8ud2lkdGggPSB0aGlzLnNpemVfWzBdO1xuICAgICAgICAgICAgdGhpcy5pbWFnZV8uaGVpZ2h0ID0gdGhpcy5zaXplX1sxXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2l6ZV8gPSBbdGhpcy5pbWFnZV8ud2lkdGgsIHRoaXMuaW1hZ2VfLmhlaWdodF07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoQ2hhbmdlRXZlbnRfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcmV0dXJuIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fSBJbWFnZSBvciBDYW52YXMgZWxlbWVudC5cbiAgICAgKi9cbiAgICBJY29uSW1hZ2UucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKHBpeGVsUmF0aW8pIHtcbiAgICAgICAgdGhpcy5yZXBsYWNlQ29sb3JfKHBpeGVsUmF0aW8pO1xuICAgICAgICByZXR1cm4gdGhpcy5jYW52YXNfW3BpeGVsUmF0aW9dID8gdGhpcy5jYW52YXNfW3BpeGVsUmF0aW9dIDogdGhpcy5pbWFnZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEltYWdlIG9yIENhbnZhcyBlbGVtZW50LlxuICAgICAqL1xuICAgIEljb25JbWFnZS5wcm90b3R5cGUuZ2V0UGl4ZWxSYXRpbyA9IGZ1bmN0aW9uIChwaXhlbFJhdGlvKSB7XG4gICAgICAgIHRoaXMucmVwbGFjZUNvbG9yXyhwaXhlbFJhdGlvKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FudmFzX1twaXhlbFJhdGlvXSA/IHBpeGVsUmF0aW8gOiAxO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vSW1hZ2VTdGF0ZS5qc1wiKS5kZWZhdWx0fSBJbWFnZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBJY29uSW1hZ2UucHJvdG90eXBlLmdldEltYWdlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmltYWdlU3RhdGVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudH0gSW1hZ2UgZWxlbWVudC5cbiAgICAgKi9cbiAgICBJY29uSW1hZ2UucHJvdG90eXBlLmdldEhpdERldGVjdGlvbkltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VfKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1RhaW50ZWRfKCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSB0aGlzLnNpemVfWzBdO1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLnNpemVfWzFdO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbWFnZV8gPSBjb250ZXh0LmNhbnZhcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VfID0gdGhpcy5pbWFnZV87XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzaXplIG9mIHRoZSBpY29uIChpbiBwaXhlbHMpLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gSW1hZ2Ugc2l6ZS5cbiAgICAgKi9cbiAgICBJY29uSW1hZ2UucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gSW1hZ2Ugc3JjLlxuICAgICAqL1xuICAgIEljb25JbWFnZS5wcm90b3R5cGUuZ2V0U3JjID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zcmNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZCBub3QgeWV0IGxvYWRlZCBVUkkuXG4gICAgICovXG4gICAgSWNvbkltYWdlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pbWFnZVN0YXRlXyA9PSBJbWFnZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VTdGF0ZV8gPSBJbWFnZVN0YXRlLkxPQURJTkc7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudH0gKi8gKHRoaXMuaW1hZ2VfKS5zcmMgPSB0aGlzLnNyY187XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlSW1hZ2VFcnJvcl8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5fID0gbGlzdGVuSW1hZ2UodGhpcy5pbWFnZV8sIHRoaXMuaGFuZGxlSW1hZ2VMb2FkXy5iaW5kKHRoaXMpLCB0aGlzLmhhbmRsZUltYWdlRXJyb3JfLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEljb25JbWFnZS5wcm90b3R5cGUucmVwbGFjZUNvbG9yXyA9IGZ1bmN0aW9uIChwaXhlbFJhdGlvKSB7XG4gICAgICAgIGlmICghdGhpcy5jb2xvcl8gfHwgdGhpcy5jYW52YXNfW3BpeGVsUmF0aW9dKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICB0aGlzLmNhbnZhc19bcGl4ZWxSYXRpb10gPSBjYW52YXM7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IE1hdGguY2VpbCh0aGlzLmltYWdlXy53aWR0aCAqIHBpeGVsUmF0aW8pO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gTWF0aC5jZWlsKHRoaXMuaW1hZ2VfLmhlaWdodCAqIHBpeGVsUmF0aW8pO1xuICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGN0eC5zY2FsZShwaXhlbFJhdGlvLCBwaXhlbFJhdGlvKTtcbiAgICAgICAgY3R4LmRyYXdJbWFnZSh0aGlzLmltYWdlXywgMCwgMCk7XG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnbXVsdGlwbHknO1xuICAgICAgICAvLyBJbnRlcm5ldCBFeHBsb3JlciAxMSBkb2VzIG5vdCBzdXBwb3J0IHRoZSBtdWx0aXBseSBvcGVyYXRpb24uXG4gICAgICAgIC8vIElmIHRoZSBjYW52YXMgaXMgdGFpbnRlZCBpbiBJbnRlcm5ldCBFeHBsb3JlciB0aGlzIHN0aWxsIHByb2R1Y2VzXG4gICAgICAgIC8vIGEgc29saWQgY29sb3IgaW1hZ2Ugd2l0aCB0aGUgc2hhcGUgb2YgdGhlIGljb24uXG4gICAgICAgIGlmIChjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID09PSAnbXVsdGlwbHknIHx8IHRoaXMuaXNUYWludGVkXygpKSB7XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gYXNTdHJpbmcodGhpcy5jb2xvcl8pO1xuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2Rlc3RpbmF0aW9uLWluJztcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UodGhpcy5pbWFnZV8sIDAsIDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGltZ0RhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IGltZ0RhdGEuZGF0YTtcbiAgICAgICAgICAgIHZhciByID0gdGhpcy5jb2xvcl9bMF0gLyAyNTUuMDtcbiAgICAgICAgICAgIHZhciBnID0gdGhpcy5jb2xvcl9bMV0gLyAyNTUuMDtcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy5jb2xvcl9bMl0gLyAyNTUuMDtcbiAgICAgICAgICAgIHZhciBhID0gdGhpcy5jb2xvcl9bM107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBkYXRhLmxlbmd0aDsgaSA8IGlpOyBpICs9IDQpIHtcbiAgICAgICAgICAgICAgICBkYXRhW2ldICo9IHI7XG4gICAgICAgICAgICAgICAgZGF0YVtpICsgMV0gKj0gZztcbiAgICAgICAgICAgICAgICBkYXRhW2kgKyAyXSAqPSBiO1xuICAgICAgICAgICAgICAgIGRhdGFbaSArIDNdICo9IGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHgucHV0SW1hZ2VEYXRhKGltZ0RhdGEsIDAsIDApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXNjYXJkcyBldmVudCBoYW5kbGVycyB3aGljaCBsaXN0ZW4gZm9yIGxvYWQgY29tcGxldGlvbiBvciBlcnJvcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEljb25JbWFnZS5wcm90b3R5cGUudW5saXN0ZW5JbWFnZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnVubGlzdGVuXykge1xuICAgICAgICAgICAgdGhpcy51bmxpc3Rlbl8oKTtcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5fID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEljb25JbWFnZTtcbn0oRXZlbnRUYXJnZXQpKTtcbi8qKlxuICogQHBhcmFtIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fSBpbWFnZSBJbWFnZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgU3JjLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IHNpemUgU2l6ZS5cbiAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9IGltYWdlU3RhdGUgSW1hZ2Ugc3RhdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge0ljb25JbWFnZX0gSWNvbiBpbWFnZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldChpbWFnZSwgc3JjLCBzaXplLCBjcm9zc09yaWdpbiwgaW1hZ2VTdGF0ZSwgY29sb3IpIHtcbiAgICB2YXIgaWNvbkltYWdlID0gaWNvbkltYWdlQ2FjaGUuZ2V0KHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yKTtcbiAgICBpZiAoIWljb25JbWFnZSkge1xuICAgICAgICBpY29uSW1hZ2UgPSBuZXcgSWNvbkltYWdlKGltYWdlLCBzcmMsIHNpemUsIGNyb3NzT3JpZ2luLCBpbWFnZVN0YXRlLCBjb2xvcik7XG4gICAgICAgIGljb25JbWFnZUNhY2hlLnNldChzcmMsIGNyb3NzT3JpZ2luLCBjb2xvciwgaWNvbkltYWdlKTtcbiAgICB9XG4gICAgcmV0dXJuIGljb25JbWFnZTtcbn1cbmV4cG9ydCBkZWZhdWx0IEljb25JbWFnZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUljb25JbWFnZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3N0eWxlL0ljb25cbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJY29uQW5jaG9yVW5pdHMgZnJvbSAnLi9JY29uQW5jaG9yVW5pdHMuanMnO1xuaW1wb3J0IEljb25PcmlnaW4gZnJvbSAnLi9JY29uT3JpZ2luLmpzJztcbmltcG9ydCBJbWFnZVN0YXRlIGZyb20gJy4uL0ltYWdlU3RhdGUuanMnO1xuaW1wb3J0IEltYWdlU3R5bGUgZnJvbSAnLi9JbWFnZS5qcyc7XG5pbXBvcnQgeyBhc0FycmF5IH0gZnJvbSAnLi4vY29sb3IuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBnZXQgYXMgZ2V0SWNvbkltYWdlIH0gZnJvbSAnLi9JY29uSW1hZ2UuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi4vdXRpbC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gW2FuY2hvcj1bMC41LCAwLjVdXSBBbmNob3IuIERlZmF1bHQgdmFsdWUgaXMgdGhlIGljb24gY2VudGVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0ljb25PcmlnaW4uanNcIikuZGVmYXVsdH0gW2FuY2hvck9yaWdpbj0ndG9wLWxlZnQnXSBPcmlnaW4gb2YgdGhlIGFuY2hvcjogYGJvdHRvbS1sZWZ0YCwgYGJvdHRvbS1yaWdodGAsXG4gKiBgdG9wLWxlZnRgIG9yIGB0b3AtcmlnaHRgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0ljb25BbmNob3JVbml0cy5qc1wiKS5kZWZhdWx0fSBbYW5jaG9yWFVuaXRzPSdmcmFjdGlvbiddIFVuaXRzIGluIHdoaWNoIHRoZSBhbmNob3IgeCB2YWx1ZSBpc1xuICogc3BlY2lmaWVkLiBBIHZhbHVlIG9mIGAnZnJhY3Rpb24nYCBpbmRpY2F0ZXMgdGhlIHggdmFsdWUgaXMgYSBmcmFjdGlvbiBvZiB0aGUgaWNvbi4gQSB2YWx1ZSBvZiBgJ3BpeGVscydgIGluZGljYXRlc1xuICogdGhlIHggdmFsdWUgaW4gcGl4ZWxzLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0ljb25BbmNob3JVbml0cy5qc1wiKS5kZWZhdWx0fSBbYW5jaG9yWVVuaXRzPSdmcmFjdGlvbiddIFVuaXRzIGluIHdoaWNoIHRoZSBhbmNob3IgeSB2YWx1ZSBpc1xuICogc3BlY2lmaWVkLiBBIHZhbHVlIG9mIGAnZnJhY3Rpb24nYCBpbmRpY2F0ZXMgdGhlIHkgdmFsdWUgaXMgYSBmcmFjdGlvbiBvZiB0aGUgaWNvbi4gQSB2YWx1ZSBvZiBgJ3BpeGVscydgIGluZGljYXRlc1xuICogdGhlIHkgdmFsdWUgaW4gcGl4ZWxzLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcnxzdHJpbmd9IFtjb2xvcl0gQ29sb3IgdG8gdGludCB0aGUgaWNvbi4gSWYgbm90IHNwZWNpZmllZCxcbiAqIHRoZSBpY29uIHdpbGwgYmUgbGVmdCBhcyBpcy5cbiAqIEBwcm9wZXJ0eSB7bnVsbHxzdHJpbmd9IFtjcm9zc09yaWdpbl0gVGhlIGBjcm9zc09yaWdpbmAgYXR0cmlidXRlIGZvciBsb2FkZWQgaW1hZ2VzLiBOb3RlIHRoYXQgeW91IG11c3QgcHJvdmlkZSBhXG4gKiBgY3Jvc3NPcmlnaW5gIHZhbHVlIGlmIHlvdSB3YW50IHRvIGFjY2VzcyBwaXhlbCBkYXRhIHdpdGggdGhlIENhbnZhcyByZW5kZXJlci5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0NPUlNfZW5hYmxlZF9pbWFnZSBmb3IgbW9yZSBkZXRhaWwuXG4gKiBAcHJvcGVydHkge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR9IFtpbWddIEltYWdlIG9iamVjdCBmb3IgdGhlIGljb24uIElmIHRoZSBgc3JjYCBvcHRpb24gaXMgbm90IHByb3ZpZGVkIHRoZW4gdGhlXG4gKiBwcm92aWRlZCBpbWFnZSBtdXN0IGFscmVhZHkgYmUgbG9hZGVkLiBBbmQgaW4gdGhhdCBjYXNlLCBpdCBpcyByZXF1aXJlZFxuICogdG8gcHJvdmlkZSB0aGUgc2l6ZSBvZiB0aGUgaW1hZ2UsIHdpdGggdGhlIGBpbWdTaXplYCBvcHRpb24uXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtvZmZzZXQ9WzAsIDBdXSBPZmZzZXQsIHdoaWNoLCB0b2dldGhlciB3aXRoIHRoZSBzaXplIGFuZCB0aGUgb2Zmc2V0IG9yaWdpbiwgZGVmaW5lIHRoZVxuICogc3ViLXJlY3RhbmdsZSB0byB1c2UgZnJvbSB0aGUgb3JpZ2luYWwgaWNvbiBpbWFnZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gW2Rpc3BsYWNlbWVudD1bMCwwXV0gRGlzcGxhY2VtZW50IHRoZSBpY29uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vSWNvbk9yaWdpbi5qc1wiKS5kZWZhdWx0fSBbb2Zmc2V0T3JpZ2luPSd0b3AtbGVmdCddIE9yaWdpbiBvZiB0aGUgb2Zmc2V0OiBgYm90dG9tLWxlZnRgLCBgYm90dG9tLXJpZ2h0YCxcbiAqIGB0b3AtbGVmdGAgb3IgYHRvcC1yaWdodGAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSBvZiB0aGUgaWNvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gW3NjYWxlPTFdIFNjYWxlLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbcm90YXRlV2l0aFZpZXc9ZmFsc2VdIFdoZXRoZXIgdG8gcm90YXRlIHRoZSBpY29uIHdpdGggdGhlIHZpZXcuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JvdGF0aW9uPTBdIFJvdGF0aW9uIGluIHJhZGlhbnMgKHBvc2l0aXZlIHJvdGF0aW9uIGNsb2Nrd2lzZSkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gW3NpemVdIEljb24gc2l6ZSBpbiBwaXhlbC4gQ2FuIGJlIHVzZWQgdG9nZXRoZXIgd2l0aCBgb2Zmc2V0YCB0byBkZWZpbmUgdGhlXG4gKiBzdWItcmVjdGFuZ2xlIHRvIHVzZSBmcm9tIHRoZSBvcmlnaW4gKHNwcml0ZSkgaWNvbiBpbWFnZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBbaW1nU2l6ZV0gSW1hZ2Ugc2l6ZSBpbiBwaXhlbHMuIE9ubHkgcmVxdWlyZWQgaWYgYGltZ2AgaXMgc2V0IGFuZCBgc3JjYCBpcyBub3QsIGFuZFxuICogZm9yIFNWRyBpbWFnZXMgaW4gSW50ZXJuZXQgRXhwbG9yZXIgMTEuIFRoZSBwcm92aWRlZCBgaW1nU2l6ZWAgbmVlZHMgdG8gbWF0Y2ggdGhlIGFjdHVhbCBzaXplIG9mIHRoZSBpbWFnZS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbc3JjXSBJbWFnZSBzb3VyY2UgVVJJLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFNldCBpY29uIHN0eWxlIGZvciB2ZWN0b3IgZmVhdHVyZXMuXG4gKiBAYXBpXG4gKi9cbnZhciBJY29uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJY29uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gSWNvbihvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHZhciBvcGFjaXR5ID0gb3B0aW9ucy5vcGFjaXR5ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm9wYWNpdHkgOiAxO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHZhciByb3RhdGlvbiA9IG9wdGlvbnMucm90YXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucm90YXRpb24gOiAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgc2NhbGUgPSBvcHRpb25zLnNjYWxlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNjYWxlIDogMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHJvdGF0ZVdpdGhWaWV3ID0gb3B0aW9ucy5yb3RhdGVXaXRoVmlldyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yb3RhdGVXaXRoVmlldyA6IGZhbHNlO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IG9wYWNpdHksXG4gICAgICAgICAgICByb3RhdGlvbjogcm90YXRpb24sXG4gICAgICAgICAgICBzY2FsZTogc2NhbGUsXG4gICAgICAgICAgICBkaXNwbGFjZW1lbnQ6IG9wdGlvbnMuZGlzcGxhY2VtZW50ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmRpc3BsYWNlbWVudCA6IFswLCAwXSxcbiAgICAgICAgICAgIHJvdGF0ZVdpdGhWaWV3OiByb3RhdGVXaXRoVmlldyxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5jaG9yXyA9IG9wdGlvbnMuYW5jaG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmFuY2hvciA6IFswLjUsIDAuNV07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm5vcm1hbGl6ZWRBbmNob3JfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0ljb25PcmlnaW4uanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFuY2hvck9yaWdpbl8gPVxuICAgICAgICAgICAgb3B0aW9ucy5hbmNob3JPcmlnaW4gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5hbmNob3JPcmlnaW5cbiAgICAgICAgICAgICAgICA6IEljb25PcmlnaW4uVE9QX0xFRlQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9JY29uQW5jaG9yVW5pdHMuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFuY2hvclhVbml0c18gPVxuICAgICAgICAgICAgb3B0aW9ucy5hbmNob3JYVW5pdHMgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5hbmNob3JYVW5pdHNcbiAgICAgICAgICAgICAgICA6IEljb25BbmNob3JVbml0cy5GUkFDVElPTjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0ljb25BbmNob3JVbml0cy5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5jaG9yWVVuaXRzXyA9XG4gICAgICAgICAgICBvcHRpb25zLmFuY2hvcllVbml0cyAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLmFuY2hvcllVbml0c1xuICAgICAgICAgICAgICAgIDogSWNvbkFuY2hvclVuaXRzLkZSQUNUSU9OO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9zdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jcm9zc09yaWdpbl8gPVxuICAgICAgICAgICAgb3B0aW9ucy5jcm9zc09yaWdpbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jcm9zc09yaWdpbiA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIHZhciBpbWFnZSA9IG9wdGlvbnMuaW1nICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmltZyA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGltZ1NpemUgPSBvcHRpb25zLmltZ1NpemUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaW1nU2l6ZSA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHZhciBzcmMgPSBvcHRpb25zLnNyYztcbiAgICAgICAgYXNzZXJ0KCEoc3JjICE9PSB1bmRlZmluZWQgJiYgaW1hZ2UpLCA0KTsgLy8gYGltYWdlYCBhbmQgYHNyY2AgY2Fubm90IGJlIHByb3ZpZGVkIGF0IHRoZSBzYW1lIHRpbWVcbiAgICAgICAgYXNzZXJ0KCFpbWFnZSB8fCAoaW1hZ2UgJiYgaW1nU2l6ZSksIDUpOyAvLyBgaW1nU2l6ZWAgbXVzdCBiZSBzZXQgd2hlbiBgaW1hZ2VgIGlzIHByb3ZpZGVkXG4gICAgICAgIGlmICgoc3JjID09PSB1bmRlZmluZWQgfHwgc3JjLmxlbmd0aCA9PT0gMCkgJiYgaW1hZ2UpIHtcbiAgICAgICAgICAgIHNyYyA9IC8qKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudH0gKi8gKGltYWdlKS5zcmMgfHwgZ2V0VWlkKGltYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBhc3NlcnQoc3JjICE9PSB1bmRlZmluZWQgJiYgc3JjLmxlbmd0aCA+IDAsIDYpOyAvLyBBIGRlZmluZWQgYW5kIG5vbi1lbXB0eSBgc3JjYCBvciBgaW1hZ2VgIG11c3QgYmUgcHJvdmlkZWRcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgaW1hZ2VTdGF0ZSA9IG9wdGlvbnMuc3JjICE9PSB1bmRlZmluZWQgPyBJbWFnZVN0YXRlLklETEUgOiBJbWFnZVN0YXRlLkxPQURFRDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbG9yXyA9IG9wdGlvbnMuY29sb3IgIT09IHVuZGVmaW5lZCA/IGFzQXJyYXkob3B0aW9ucy5jb2xvcikgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vSWNvbkltYWdlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pY29uSW1hZ2VfID0gZ2V0SWNvbkltYWdlKGltYWdlLCBcbiAgICAgICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovIChzcmMpLCBpbWdTaXplLCBfdGhpcy5jcm9zc09yaWdpbl8sIGltYWdlU3RhdGUsIF90aGlzLmNvbG9yXyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9mZnNldF8gPSBvcHRpb25zLm9mZnNldCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vZmZzZXQgOiBbMCwgMF07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9JY29uT3JpZ2luLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vZmZzZXRPcmlnaW5fID1cbiAgICAgICAgICAgIG9wdGlvbnMub2Zmc2V0T3JpZ2luICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMub2Zmc2V0T3JpZ2luXG4gICAgICAgICAgICAgICAgOiBJY29uT3JpZ2luLlRPUF9MRUZUO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vcmlnaW5fID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zaXplXyA9IG9wdGlvbnMuc2l6ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zaXplIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9uZXMgdGhlIHN0eWxlLiBUaGUgdW5kZXJseWluZyBJbWFnZS9IVE1MQ2FudmFzRWxlbWVudCBpcyBub3QgY2xvbmVkLlxuICAgICAqIEByZXR1cm4ge0ljb259IFRoZSBjbG9uZWQgc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEljb24ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2NhbGUgPSB0aGlzLmdldFNjYWxlKCk7XG4gICAgICAgIHJldHVybiBuZXcgSWNvbih7XG4gICAgICAgICAgICBhbmNob3I6IHRoaXMuYW5jaG9yXy5zbGljZSgpLFxuICAgICAgICAgICAgYW5jaG9yT3JpZ2luOiB0aGlzLmFuY2hvck9yaWdpbl8sXG4gICAgICAgICAgICBhbmNob3JYVW5pdHM6IHRoaXMuYW5jaG9yWFVuaXRzXyxcbiAgICAgICAgICAgIGFuY2hvcllVbml0czogdGhpcy5hbmNob3JZVW5pdHNfLFxuICAgICAgICAgICAgY3Jvc3NPcmlnaW46IHRoaXMuY3Jvc3NPcmlnaW5fLFxuICAgICAgICAgICAgY29sb3I6IHRoaXMuY29sb3JfICYmIHRoaXMuY29sb3JfLnNsaWNlXG4gICAgICAgICAgICAgICAgPyB0aGlzLmNvbG9yXy5zbGljZSgpXG4gICAgICAgICAgICAgICAgOiB0aGlzLmNvbG9yXyB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICBzcmM6IHRoaXMuZ2V0U3JjKCksXG4gICAgICAgICAgICBvZmZzZXQ6IHRoaXMub2Zmc2V0Xy5zbGljZSgpLFxuICAgICAgICAgICAgb2Zmc2V0T3JpZ2luOiB0aGlzLm9mZnNldE9yaWdpbl8sXG4gICAgICAgICAgICBzaXplOiB0aGlzLnNpemVfICE9PSBudWxsID8gdGhpcy5zaXplXy5zbGljZSgpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgb3BhY2l0eTogdGhpcy5nZXRPcGFjaXR5KCksXG4gICAgICAgICAgICBzY2FsZTogQXJyYXkuaXNBcnJheShzY2FsZSkgPyBzY2FsZS5zbGljZSgpIDogc2NhbGUsXG4gICAgICAgICAgICByb3RhdGlvbjogdGhpcy5nZXRSb3RhdGlvbigpLFxuICAgICAgICAgICAgcm90YXRlV2l0aFZpZXc6IHRoaXMuZ2V0Um90YXRlV2l0aFZpZXcoKSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBpbiBwaXhlbHMuIFRoZSBhbmNob3IgZGV0ZXJtaW5lcyB0aGUgY2VudGVyIHBvaW50IGZvciB0aGVcbiAgICAgKiBzeW1ib2xpemVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEFuY2hvci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSWNvbi5wcm90b3R5cGUuZ2V0QW5jaG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5ub3JtYWxpemVkQW5jaG9yXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplZEFuY2hvcl87XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFuY2hvciA9IHRoaXMuYW5jaG9yXztcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFNpemUoKTtcbiAgICAgICAgaWYgKHRoaXMuYW5jaG9yWFVuaXRzXyA9PSBJY29uQW5jaG9yVW5pdHMuRlJBQ1RJT04gfHxcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yWVVuaXRzXyA9PSBJY29uQW5jaG9yVW5pdHMuRlJBQ1RJT04pIHtcbiAgICAgICAgICAgIGlmICghc2l6ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYW5jaG9yID0gdGhpcy5hbmNob3JfLnNsaWNlKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5hbmNob3JYVW5pdHNfID09IEljb25BbmNob3JVbml0cy5GUkFDVElPTikge1xuICAgICAgICAgICAgICAgIGFuY2hvclswXSAqPSBzaXplWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYW5jaG9yWVVuaXRzXyA9PSBJY29uQW5jaG9yVW5pdHMuRlJBQ1RJT04pIHtcbiAgICAgICAgICAgICAgICBhbmNob3JbMV0gKj0gc2l6ZVsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hbmNob3JPcmlnaW5fICE9IEljb25PcmlnaW4uVE9QX0xFRlQpIHtcbiAgICAgICAgICAgIGlmICghc2l6ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFuY2hvciA9PT0gdGhpcy5hbmNob3JfKSB7XG4gICAgICAgICAgICAgICAgYW5jaG9yID0gdGhpcy5hbmNob3JfLnNsaWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbmNob3JPcmlnaW5fID09IEljb25PcmlnaW4uVE9QX1JJR0hUIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5hbmNob3JPcmlnaW5fID09IEljb25PcmlnaW4uQk9UVE9NX1JJR0hUKSB7XG4gICAgICAgICAgICAgICAgYW5jaG9yWzBdID0gLWFuY2hvclswXSArIHNpemVbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbmNob3JPcmlnaW5fID09IEljb25PcmlnaW4uQk9UVE9NX0xFRlQgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmFuY2hvck9yaWdpbl8gPT0gSWNvbk9yaWdpbi5CT1RUT01fUklHSFQpIHtcbiAgICAgICAgICAgICAgICBhbmNob3JbMV0gPSAtYW5jaG9yWzFdICsgc2l6ZVsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5vcm1hbGl6ZWRBbmNob3JfID0gYW5jaG9yO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpemVkQW5jaG9yXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgYW5jaG9yIHBvaW50LiBUaGUgYW5jaG9yIGRldGVybWluZXMgdGhlIGNlbnRlciBwb2ludCBmb3IgdGhlXG4gICAgICogc3ltYm9saXplci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYW5jaG9yIEFuY2hvci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSWNvbi5wcm90b3R5cGUuc2V0QW5jaG9yID0gZnVuY3Rpb24gKGFuY2hvcikge1xuICAgICAgICB0aGlzLmFuY2hvcl8gPSBhbmNob3I7XG4gICAgICAgIHRoaXMubm9ybWFsaXplZEFuY2hvcl8gPSBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpY29uIGNvbG9yLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfSBDb2xvci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSWNvbi5wcm90b3R5cGUuZ2V0Q29sb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaW1hZ2UgaWNvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcmV0dXJuIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fSBJbWFnZSBvciBDYW52YXMgZWxlbWVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSWNvbi5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAocGl4ZWxSYXRpbykge1xuICAgICAgICByZXR1cm4gdGhpcy5pY29uSW1hZ2VfLmdldEltYWdlKHBpeGVsUmF0aW8pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBwaXhlbCByYXRpb24gb2YgdGhlIGltYWdlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJY29uLnByb3RvdHlwZS5nZXRQaXhlbFJhdGlvID0gZnVuY3Rpb24gKHBpeGVsUmF0aW8pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWNvbkltYWdlXy5nZXRQaXhlbFJhdGlvKHBpeGVsUmF0aW8pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBJbWFnZSBzaXplLlxuICAgICAqL1xuICAgIEljb24ucHJvdG90eXBlLmdldEltYWdlU2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWNvbkltYWdlXy5nZXRTaXplKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFNpemUgb2YgdGhlIGhpdC1kZXRlY3Rpb24gaW1hZ2UuXG4gICAgICovXG4gICAgSWNvbi5wcm90b3R5cGUuZ2V0SGl0RGV0ZWN0aW9uSW1hZ2VTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRJbWFnZVNpemUoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL0ltYWdlU3RhdGUuanNcIikuZGVmYXVsdH0gSW1hZ2Ugc3RhdGUuXG4gICAgICovXG4gICAgSWNvbi5wcm90b3R5cGUuZ2V0SW1hZ2VTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWNvbkltYWdlXy5nZXRJbWFnZVN0YXRlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fSBJbWFnZSBlbGVtZW50LlxuICAgICAqL1xuICAgIEljb24ucHJvdG90eXBlLmdldEhpdERldGVjdGlvbkltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pY29uSW1hZ2VfLmdldEhpdERldGVjdGlvbkltYWdlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG9yaWdpbiBvZiB0aGUgc3ltYm9saXplci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPcmlnaW4uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEljb24ucHJvdG90eXBlLmdldE9yaWdpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMub3JpZ2luXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luXztcbiAgICAgICAgfVxuICAgICAgICB2YXIgb2Zmc2V0ID0gdGhpcy5vZmZzZXRfO1xuICAgICAgICB2YXIgZGlzcGxhY2VtZW50ID0gdGhpcy5nZXREaXNwbGFjZW1lbnQoKTtcbiAgICAgICAgaWYgKHRoaXMub2Zmc2V0T3JpZ2luXyAhPSBJY29uT3JpZ2luLlRPUF9MRUZUKSB7XG4gICAgICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpO1xuICAgICAgICAgICAgdmFyIGljb25JbWFnZVNpemUgPSB0aGlzLmljb25JbWFnZV8uZ2V0U2l6ZSgpO1xuICAgICAgICAgICAgaWYgKCFzaXplIHx8ICFpY29uSW1hZ2VTaXplKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQuc2xpY2UoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9mZnNldE9yaWdpbl8gPT0gSWNvbk9yaWdpbi5UT1BfUklHSFQgfHxcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldE9yaWdpbl8gPT0gSWNvbk9yaWdpbi5CT1RUT01fUklHSFQpIHtcbiAgICAgICAgICAgICAgICBvZmZzZXRbMF0gPSBpY29uSW1hZ2VTaXplWzBdIC0gc2l6ZVswXSAtIG9mZnNldFswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9mZnNldE9yaWdpbl8gPT0gSWNvbk9yaWdpbi5CT1RUT01fTEVGVCB8fFxuICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0T3JpZ2luXyA9PSBJY29uT3JpZ2luLkJPVFRPTV9SSUdIVCkge1xuICAgICAgICAgICAgICAgIG9mZnNldFsxXSA9IGljb25JbWFnZVNpemVbMV0gLSBzaXplWzFdIC0gb2Zmc2V0WzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG9mZnNldFswXSArPSBkaXNwbGFjZW1lbnRbMF07XG4gICAgICAgIG9mZnNldFsxXSArPSBkaXNwbGFjZW1lbnRbMV07XG4gICAgICAgIHRoaXMub3JpZ2luXyA9IG9mZnNldDtcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaW1hZ2UgVVJMLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IEltYWdlIHNyYy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSWNvbi5wcm90b3R5cGUuZ2V0U3JjID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pY29uSW1hZ2VfLmdldFNyYygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzaXplIG9mIHRoZSBpY29uIChpbiBwaXhlbHMpLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gSW1hZ2Ugc2l6ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSWNvbi5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLnNpemVfID8gdGhpcy5pY29uSW1hZ2VfLmdldFNpemUoKSA6IHRoaXMuc2l6ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0KTogdm9pZH0gbGlzdGVuZXIgTGlzdGVuZXIgZnVuY3Rpb24uXG4gICAgICovXG4gICAgSWNvbi5wcm90b3R5cGUubGlzdGVuSW1hZ2VDaGFuZ2UgPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5pY29uSW1hZ2VfLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNIQU5HRSwgbGlzdGVuZXIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZCBub3QgeWV0IGxvYWRlZCBVUkkuXG4gICAgICogV2hlbiByZW5kZXJpbmcgYSBmZWF0dXJlIHdpdGggYW4gaWNvbiBzdHlsZSwgdGhlIHZlY3RvciByZW5kZXJlciB3aWxsXG4gICAgICogYXV0b21hdGljYWxseSBjYWxsIHRoaXMgbWV0aG9kLiBIb3dldmVyLCB5b3UgbWlnaHQgd2FudCB0byBjYWxsIHRoaXNcbiAgICAgKiBtZXRob2QgeW91cnNlbGYgZm9yIHByZWxvYWRpbmcgb3Igb3RoZXIgcHVycG9zZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEljb24ucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaWNvbkltYWdlXy5sb2FkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0KTogdm9pZH0gbGlzdGVuZXIgTGlzdGVuZXIgZnVuY3Rpb24uXG4gICAgICovXG4gICAgSWNvbi5wcm90b3R5cGUudW5saXN0ZW5JbWFnZUNoYW5nZSA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmljb25JbWFnZV8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0hBTkdFLCBsaXN0ZW5lcik7XG4gICAgfTtcbiAgICByZXR1cm4gSWNvbjtcbn0oSW1hZ2VTdHlsZSkpO1xuZXhwb3J0IGRlZmF1bHQgSWNvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUljb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL3ZlY3RvclxuICovXG5pbXBvcnQgQnVpbGRlclR5cGUgZnJvbSAnLi4vcmVuZGVyL2NhbnZhcy9CdWlsZGVyVHlwZS5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4uL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBJbWFnZVN0YXRlIGZyb20gJy4uL0ltYWdlU3RhdGUuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi4vdXRpbC5qcyc7XG4vKipcbiAqIEZlYXR1cmUgY2FsbGJhY2suIFRoZSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCB3aXRoIHRocmVlIGFyZ3VtZW50cy4gVGhlIGZpcnN0XG4gKiBhcmd1bWVudCBpcyBvbmUge0BsaW5rIG1vZHVsZTpvbC9GZWF0dXJlIGZlYXR1cmV9IG9yIHtAbGluayBtb2R1bGU6b2wvcmVuZGVyL0ZlYXR1cmUgcmVuZGVyIGZlYXR1cmV9XG4gKiBhdCB0aGUgcGl4ZWwsIHRoZSBzZWNvbmQgaXMgdGhlIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXIgbGF5ZXJ9IG9mIHRoZSBmZWF0dXJlIGFuZCB3aWxsIGJlIG51bGwgZm9yXG4gKiB1bm1hbmFnZWQgbGF5ZXJzLiBUaGUgdGhpcmQgaXMgdGhlIHtAbGluayBtb2R1bGU6b2wvZ2VvbS9TaW1wbGVHZW9tZXRyeX0gb2YgdGhlIGZlYXR1cmUuIEZvciBmZWF0dXJlc1xuICogd2l0aCBhIEdlb21ldHJ5Q29sbGVjdGlvbiBnZW9tZXRyeSwgaXQgd2lsbCBiZSB0aGUgZmlyc3QgZGV0ZWN0ZWQgZ2VvbWV0cnkgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZSwgaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0KTogVH0gRmVhdHVyZUNhbGxiYWNrXG4gKi9cbi8qKlxuICogVG9sZXJhbmNlIGZvciBnZW9tZXRyeSBzaW1wbGlmaWNhdGlvbiBpbiBkZXZpY2UgcGl4ZWxzLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xudmFyIFNJTVBMSUZZX1RPTEVSQU5DRSA9IDAuNTtcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7T2JqZWN0PGltcG9ydChcIi4uL2dlb20vR2VvbWV0cnlUeXBlLmpzXCIpLmRlZmF1bHQsXG4gKiAgICAgICAgICAgICAgICBmdW5jdGlvbihpbXBvcnQoXCIuLi9yZW5kZXIvY2FudmFzL0J1aWxkZXJHcm91cC5qc1wiKS5kZWZhdWx0LCBpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHQsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0LCBPYmplY3QpOiB2b2lkPn1cbiAqL1xudmFyIEdFT01FVFJZX1JFTkRFUkVSUyA9IHtcbiAgICAnUG9pbnQnOiByZW5kZXJQb2ludEdlb21ldHJ5LFxuICAgICdMaW5lU3RyaW5nJzogcmVuZGVyTGluZVN0cmluZ0dlb21ldHJ5LFxuICAgICdQb2x5Z29uJzogcmVuZGVyUG9seWdvbkdlb21ldHJ5LFxuICAgICdNdWx0aVBvaW50JzogcmVuZGVyTXVsdGlQb2ludEdlb21ldHJ5LFxuICAgICdNdWx0aUxpbmVTdHJpbmcnOiByZW5kZXJNdWx0aUxpbmVTdHJpbmdHZW9tZXRyeSxcbiAgICAnTXVsdGlQb2x5Z29uJzogcmVuZGVyTXVsdGlQb2x5Z29uR2VvbWV0cnksXG4gICAgJ0dlb21ldHJ5Q29sbGVjdGlvbic6IHJlbmRlckdlb21ldHJ5Q29sbGVjdGlvbkdlb21ldHJ5LFxuICAgICdDaXJjbGUnOiByZW5kZXJDaXJjbGVHZW9tZXRyeSxcbn07XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZTEgRmVhdHVyZSAxLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlMiBGZWF0dXJlIDIuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE9yZGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdE9yZGVyKGZlYXR1cmUxLCBmZWF0dXJlMikge1xuICAgIHJldHVybiBwYXJzZUludChnZXRVaWQoZmVhdHVyZTEpLCAxMCkgLSBwYXJzZUludChnZXRVaWQoZmVhdHVyZTIpLCAxMCk7XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBwaXhlbCB0b2xlcmFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTcXVhcmVkVG9sZXJhbmNlKHJlc29sdXRpb24sIHBpeGVsUmF0aW8pIHtcbiAgICB2YXIgdG9sZXJhbmNlID0gZ2V0VG9sZXJhbmNlKHJlc29sdXRpb24sIHBpeGVsUmF0aW8pO1xuICAgIHJldHVybiB0b2xlcmFuY2UgKiB0b2xlcmFuY2U7XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAqIEByZXR1cm4ge251bWJlcn0gUGl4ZWwgdG9sZXJhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9sZXJhbmNlKHJlc29sdXRpb24sIHBpeGVsUmF0aW8pIHtcbiAgICByZXR1cm4gKFNJTVBMSUZZX1RPTEVSQU5DRSAqIHJlc29sdXRpb24pIC8gcGl4ZWxSYXRpbztcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvY2FudmFzL0J1aWxkZXJHcm91cC5qc1wiKS5kZWZhdWx0fSBidWlsZGVyR3JvdXAgQnVpbGRlciBncm91cC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL2NhbnZhcy9CdWlsZGVyR3JvdXAuanNcIikuZGVmYXVsdD19IG9wdF9kZWNsdXR0ZXJCdWlsZGVyR3JvdXAgQnVpbGRlciBmb3IgZGVjbHV0dGVyaW5nLlxuICovXG5mdW5jdGlvbiByZW5kZXJDaXJjbGVHZW9tZXRyeShidWlsZGVyR3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSwgb3B0X2RlY2x1dHRlckJ1aWxkZXJHcm91cCkge1xuICAgIHZhciBmaWxsU3R5bGUgPSBzdHlsZS5nZXRGaWxsKCk7XG4gICAgdmFyIHN0cm9rZVN0eWxlID0gc3R5bGUuZ2V0U3Ryb2tlKCk7XG4gICAgaWYgKGZpbGxTdHlsZSB8fCBzdHJva2VTdHlsZSkge1xuICAgICAgICB2YXIgY2lyY2xlUmVwbGF5ID0gYnVpbGRlckdyb3VwLmdldEJ1aWxkZXIoc3R5bGUuZ2V0WkluZGV4KCksIEJ1aWxkZXJUeXBlLkNJUkNMRSk7XG4gICAgICAgIGNpcmNsZVJlcGxheS5zZXRGaWxsU3Ryb2tlU3R5bGUoZmlsbFN0eWxlLCBzdHJva2VTdHlsZSk7XG4gICAgICAgIGNpcmNsZVJlcGxheS5kcmF3Q2lyY2xlKGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICB9XG4gICAgdmFyIHRleHRTdHlsZSA9IHN0eWxlLmdldFRleHQoKTtcbiAgICBpZiAodGV4dFN0eWxlICYmIHRleHRTdHlsZS5nZXRUZXh0KCkpIHtcbiAgICAgICAgdmFyIHRleHRSZXBsYXkgPSAob3B0X2RlY2x1dHRlckJ1aWxkZXJHcm91cCB8fCBidWlsZGVyR3JvdXApLmdldEJ1aWxkZXIoc3R5bGUuZ2V0WkluZGV4KCksIEJ1aWxkZXJUeXBlLlRFWFQpO1xuICAgICAgICB0ZXh0UmVwbGF5LnNldFRleHRTdHlsZSh0ZXh0U3R5bGUpO1xuICAgICAgICB0ZXh0UmVwbGF5LmRyYXdUZXh0KGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL2NhbnZhcy9CdWlsZGVyR3JvdXAuanNcIikuZGVmYXVsdH0gcmVwbGF5R3JvdXAgUmVwbGF5IGdyb3VwLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0KTogdm9pZH0gbGlzdGVuZXIgTGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IFtvcHRfdHJhbnNmb3JtXSBUcmFuc2Zvcm0gZnJvbSB1c2VyIHRvIHZpZXcgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL2NhbnZhcy9CdWlsZGVyR3JvdXAuanNcIikuZGVmYXVsdD19IG9wdF9kZWNsdXR0ZXJCdWlsZGVyR3JvdXAgQnVpbGRlciBmb3IgZGVjbHV0dGVyaW5nLlxuICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHN0eWxlIGlzIGxvYWRpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJGZWF0dXJlKHJlcGxheUdyb3VwLCBmZWF0dXJlLCBzdHlsZSwgc3F1YXJlZFRvbGVyYW5jZSwgbGlzdGVuZXIsIG9wdF90cmFuc2Zvcm0sIG9wdF9kZWNsdXR0ZXJCdWlsZGVyR3JvdXApIHtcbiAgICB2YXIgbG9hZGluZyA9IGZhbHNlO1xuICAgIHZhciBpbWFnZVN0eWxlID0gc3R5bGUuZ2V0SW1hZ2UoKTtcbiAgICBpZiAoaW1hZ2VTdHlsZSkge1xuICAgICAgICB2YXIgaW1hZ2VTdGF0ZSA9IGltYWdlU3R5bGUuZ2V0SW1hZ2VTdGF0ZSgpO1xuICAgICAgICBpZiAoaW1hZ2VTdGF0ZSA9PSBJbWFnZVN0YXRlLkxPQURFRCB8fCBpbWFnZVN0YXRlID09IEltYWdlU3RhdGUuRVJST1IpIHtcbiAgICAgICAgICAgIGltYWdlU3R5bGUudW5saXN0ZW5JbWFnZUNoYW5nZShsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoaW1hZ2VTdGF0ZSA9PSBJbWFnZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgICAgICBpbWFnZVN0eWxlLmxvYWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGltYWdlU3RhdGUgPSBpbWFnZVN0eWxlLmdldEltYWdlU3RhdGUoKTtcbiAgICAgICAgICAgIGltYWdlU3R5bGUubGlzdGVuSW1hZ2VDaGFuZ2UobGlzdGVuZXIpO1xuICAgICAgICAgICAgbG9hZGluZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyRmVhdHVyZUludGVybmFsKHJlcGxheUdyb3VwLCBmZWF0dXJlLCBzdHlsZSwgc3F1YXJlZFRvbGVyYW5jZSwgb3B0X3RyYW5zZm9ybSwgb3B0X2RlY2x1dHRlckJ1aWxkZXJHcm91cCk7XG4gICAgcmV0dXJuIGxvYWRpbmc7XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL2NhbnZhcy9CdWlsZGVyR3JvdXAuanNcIikuZGVmYXVsdH0gcmVwbGF5R3JvdXAgUmVwbGF5IGdyb3VwLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IFtvcHRfdHJhbnNmb3JtXSBPcHRpb25hbCB0cmFuc2Zvcm0gZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9jYW52YXMvQnVpbGRlckdyb3VwLmpzXCIpLmRlZmF1bHQ9fSBvcHRfZGVjbHV0dGVyQnVpbGRlckdyb3VwIEJ1aWxkZXIgZm9yIGRlY2x1dHRlcmluZy5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyRmVhdHVyZUludGVybmFsKHJlcGxheUdyb3VwLCBmZWF0dXJlLCBzdHlsZSwgc3F1YXJlZFRvbGVyYW5jZSwgb3B0X3RyYW5zZm9ybSwgb3B0X2RlY2x1dHRlckJ1aWxkZXJHcm91cCkge1xuICAgIHZhciBnZW9tZXRyeSA9IHN0eWxlLmdldEdlb21ldHJ5RnVuY3Rpb24oKShmZWF0dXJlKTtcbiAgICBpZiAoIWdlb21ldHJ5KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHNpbXBsaWZpZWRHZW9tZXRyeSA9IGdlb21ldHJ5LnNpbXBsaWZ5VHJhbnNmb3JtZWQoc3F1YXJlZFRvbGVyYW5jZSwgb3B0X3RyYW5zZm9ybSk7XG4gICAgdmFyIHJlbmRlcmVyID0gc3R5bGUuZ2V0UmVuZGVyZXIoKTtcbiAgICBpZiAocmVuZGVyZXIpIHtcbiAgICAgICAgcmVuZGVyR2VvbWV0cnkocmVwbGF5R3JvdXAsIHNpbXBsaWZpZWRHZW9tZXRyeSwgc3R5bGUsIGZlYXR1cmUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIGdlb21ldHJ5UmVuZGVyZXIgPSBHRU9NRVRSWV9SRU5ERVJFUlNbc2ltcGxpZmllZEdlb21ldHJ5LmdldFR5cGUoKV07XG4gICAgICAgIGdlb21ldHJ5UmVuZGVyZXIocmVwbGF5R3JvdXAsIHNpbXBsaWZpZWRHZW9tZXRyeSwgc3R5bGUsIGZlYXR1cmUsIG9wdF9kZWNsdXR0ZXJCdWlsZGVyR3JvdXApO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvY2FudmFzL0J1aWxkZXJHcm91cC5qc1wiKS5kZWZhdWx0fSByZXBsYXlHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9yZW5kZXIvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyR2VvbWV0cnkocmVwbGF5R3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSkge1xuICAgIGlmIChnZW9tZXRyeS5nZXRUeXBlKCkgPT0gR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT04pIHtcbiAgICAgICAgdmFyIGdlb21ldHJpZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0R2VvbWV0cmllcygpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBnZW9tZXRyaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHJlbmRlckdlb21ldHJ5KHJlcGxheUdyb3VwLCBnZW9tZXRyaWVzW2ldLCBzdHlsZSwgZmVhdHVyZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVwbGF5ID0gcmVwbGF5R3JvdXAuZ2V0QnVpbGRlcihzdHlsZS5nZXRaSW5kZXgoKSwgQnVpbGRlclR5cGUuREVGQVVMVCk7XG4gICAgcmVwbGF5LmRyYXdDdXN0b20oXG4gICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSksIGZlYXR1cmUsIHN0eWxlLmdldFJlbmRlcmVyKCkpO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9jYW52YXMvQnVpbGRlckdyb3VwLmpzXCIpLmRlZmF1bHR9IHJlcGxheUdyb3VwIFJlcGxheSBncm91cC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeUNvbGxlY3Rpb24uanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL2NhbnZhcy9CdWlsZGVyR3JvdXAuanNcIikuZGVmYXVsdD19IG9wdF9kZWNsdXR0ZXJCdWlsZGVyR3JvdXAgQnVpbGRlciBmb3IgZGVjbHV0dGVyaW5nLlxuICovXG5mdW5jdGlvbiByZW5kZXJHZW9tZXRyeUNvbGxlY3Rpb25HZW9tZXRyeShyZXBsYXlHcm91cCwgZ2VvbWV0cnksIHN0eWxlLCBmZWF0dXJlLCBvcHRfZGVjbHV0dGVyQnVpbGRlckdyb3VwKSB7XG4gICAgdmFyIGdlb21ldHJpZXMgPSBnZW9tZXRyeS5nZXRHZW9tZXRyaWVzQXJyYXkoKTtcbiAgICB2YXIgaSwgaWk7XG4gICAgZm9yIChpID0gMCwgaWkgPSBnZW9tZXRyaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGdlb21ldHJ5UmVuZGVyZXIgPSBHRU9NRVRSWV9SRU5ERVJFUlNbZ2VvbWV0cmllc1tpXS5nZXRUeXBlKCldO1xuICAgICAgICBnZW9tZXRyeVJlbmRlcmVyKHJlcGxheUdyb3VwLCBnZW9tZXRyaWVzW2ldLCBzdHlsZSwgZmVhdHVyZSwgb3B0X2RlY2x1dHRlckJ1aWxkZXJHcm91cCk7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9jYW52YXMvQnVpbGRlckdyb3VwLmpzXCIpLmRlZmF1bHR9IGJ1aWxkZXJHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL3JlbmRlci9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fSBzdHlsZSBTdHlsZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvY2FudmFzL0J1aWxkZXJHcm91cC5qc1wiKS5kZWZhdWx0PX0gb3B0X2RlY2x1dHRlckJ1aWxkZXJHcm91cCBCdWlsZGVyIGZvciBkZWNsdXR0ZXJpbmcuXG4gKi9cbmZ1bmN0aW9uIHJlbmRlckxpbmVTdHJpbmdHZW9tZXRyeShidWlsZGVyR3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSwgb3B0X2RlY2x1dHRlckJ1aWxkZXJHcm91cCkge1xuICAgIHZhciBzdHJva2VTdHlsZSA9IHN0eWxlLmdldFN0cm9rZSgpO1xuICAgIGlmIChzdHJva2VTdHlsZSkge1xuICAgICAgICB2YXIgbGluZVN0cmluZ1JlcGxheSA9IGJ1aWxkZXJHcm91cC5nZXRCdWlsZGVyKHN0eWxlLmdldFpJbmRleCgpLCBCdWlsZGVyVHlwZS5MSU5FX1NUUklORyk7XG4gICAgICAgIGxpbmVTdHJpbmdSZXBsYXkuc2V0RmlsbFN0cm9rZVN0eWxlKG51bGwsIHN0cm9rZVN0eWxlKTtcbiAgICAgICAgbGluZVN0cmluZ1JlcGxheS5kcmF3TGluZVN0cmluZyhnZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgfVxuICAgIHZhciB0ZXh0U3R5bGUgPSBzdHlsZS5nZXRUZXh0KCk7XG4gICAgaWYgKHRleHRTdHlsZSAmJiB0ZXh0U3R5bGUuZ2V0VGV4dCgpKSB7XG4gICAgICAgIHZhciB0ZXh0UmVwbGF5ID0gKG9wdF9kZWNsdXR0ZXJCdWlsZGVyR3JvdXAgfHwgYnVpbGRlckdyb3VwKS5nZXRCdWlsZGVyKHN0eWxlLmdldFpJbmRleCgpLCBCdWlsZGVyVHlwZS5URVhUKTtcbiAgICAgICAgdGV4dFJlcGxheS5zZXRUZXh0U3R5bGUodGV4dFN0eWxlKTtcbiAgICAgICAgdGV4dFJlcGxheS5kcmF3VGV4dChnZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9jYW52YXMvQnVpbGRlckdyb3VwLmpzXCIpLmRlZmF1bHR9IGJ1aWxkZXJHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vTXVsdGlMaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vcmVuZGVyL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9jYW52YXMvQnVpbGRlckdyb3VwLmpzXCIpLmRlZmF1bHQ9fSBvcHRfZGVjbHV0dGVyQnVpbGRlckdyb3VwIEJ1aWxkZXIgZm9yIGRlY2x1dHRlcmluZy5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyTXVsdGlMaW5lU3RyaW5nR2VvbWV0cnkoYnVpbGRlckdyb3VwLCBnZW9tZXRyeSwgc3R5bGUsIGZlYXR1cmUsIG9wdF9kZWNsdXR0ZXJCdWlsZGVyR3JvdXApIHtcbiAgICB2YXIgc3Ryb2tlU3R5bGUgPSBzdHlsZS5nZXRTdHJva2UoKTtcbiAgICBpZiAoc3Ryb2tlU3R5bGUpIHtcbiAgICAgICAgdmFyIGxpbmVTdHJpbmdSZXBsYXkgPSBidWlsZGVyR3JvdXAuZ2V0QnVpbGRlcihzdHlsZS5nZXRaSW5kZXgoKSwgQnVpbGRlclR5cGUuTElORV9TVFJJTkcpO1xuICAgICAgICBsaW5lU3RyaW5nUmVwbGF5LnNldEZpbGxTdHJva2VTdHlsZShudWxsLCBzdHJva2VTdHlsZSk7XG4gICAgICAgIGxpbmVTdHJpbmdSZXBsYXkuZHJhd011bHRpTGluZVN0cmluZyhnZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgfVxuICAgIHZhciB0ZXh0U3R5bGUgPSBzdHlsZS5nZXRUZXh0KCk7XG4gICAgaWYgKHRleHRTdHlsZSAmJiB0ZXh0U3R5bGUuZ2V0VGV4dCgpKSB7XG4gICAgICAgIHZhciB0ZXh0UmVwbGF5ID0gKG9wdF9kZWNsdXR0ZXJCdWlsZGVyR3JvdXAgfHwgYnVpbGRlckdyb3VwKS5nZXRCdWlsZGVyKHN0eWxlLmdldFpJbmRleCgpLCBCdWlsZGVyVHlwZS5URVhUKTtcbiAgICAgICAgdGV4dFJlcGxheS5zZXRUZXh0U3R5bGUodGV4dFN0eWxlKTtcbiAgICAgICAgdGV4dFJlcGxheS5kcmF3VGV4dChnZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9jYW52YXMvQnVpbGRlckdyb3VwLmpzXCIpLmRlZmF1bHR9IGJ1aWxkZXJHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fSBzdHlsZSBTdHlsZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9jYW52YXMvQnVpbGRlckdyb3VwLmpzXCIpLmRlZmF1bHQ9fSBvcHRfZGVjbHV0dGVyQnVpbGRlckdyb3VwIEJ1aWxkZXIgZm9yIGRlY2x1dHRlcmluZy5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyTXVsdGlQb2x5Z29uR2VvbWV0cnkoYnVpbGRlckdyb3VwLCBnZW9tZXRyeSwgc3R5bGUsIGZlYXR1cmUsIG9wdF9kZWNsdXR0ZXJCdWlsZGVyR3JvdXApIHtcbiAgICB2YXIgZmlsbFN0eWxlID0gc3R5bGUuZ2V0RmlsbCgpO1xuICAgIHZhciBzdHJva2VTdHlsZSA9IHN0eWxlLmdldFN0cm9rZSgpO1xuICAgIGlmIChzdHJva2VTdHlsZSB8fCBmaWxsU3R5bGUpIHtcbiAgICAgICAgdmFyIHBvbHlnb25SZXBsYXkgPSBidWlsZGVyR3JvdXAuZ2V0QnVpbGRlcihzdHlsZS5nZXRaSW5kZXgoKSwgQnVpbGRlclR5cGUuUE9MWUdPTik7XG4gICAgICAgIHBvbHlnb25SZXBsYXkuc2V0RmlsbFN0cm9rZVN0eWxlKGZpbGxTdHlsZSwgc3Ryb2tlU3R5bGUpO1xuICAgICAgICBwb2x5Z29uUmVwbGF5LmRyYXdNdWx0aVBvbHlnb24oZ2VvbWV0cnksIGZlYXR1cmUpO1xuICAgIH1cbiAgICB2YXIgdGV4dFN0eWxlID0gc3R5bGUuZ2V0VGV4dCgpO1xuICAgIGlmICh0ZXh0U3R5bGUgJiYgdGV4dFN0eWxlLmdldFRleHQoKSkge1xuICAgICAgICB2YXIgdGV4dFJlcGxheSA9IChvcHRfZGVjbHV0dGVyQnVpbGRlckdyb3VwIHx8IGJ1aWxkZXJHcm91cCkuZ2V0QnVpbGRlcihzdHlsZS5nZXRaSW5kZXgoKSwgQnVpbGRlclR5cGUuVEVYVCk7XG4gICAgICAgIHRleHRSZXBsYXkuc2V0VGV4dFN0eWxlKHRleHRTdHlsZSk7XG4gICAgICAgIHRleHRSZXBsYXkuZHJhd1RleHQoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvY2FudmFzL0J1aWxkZXJHcm91cC5qc1wiKS5kZWZhdWx0fSBidWlsZGVyR3JvdXAgUmVwbGF5IGdyb3VwLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL1BvaW50LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vcmVuZGVyL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9jYW52YXMvQnVpbGRlckdyb3VwLmpzXCIpLmRlZmF1bHQ9fSBvcHRfZGVjbHV0dGVyQnVpbGRlckdyb3VwIEJ1aWxkZXIgZm9yIGRlY2x1dHRlcmluZy5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyUG9pbnRHZW9tZXRyeShidWlsZGVyR3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSwgb3B0X2RlY2x1dHRlckJ1aWxkZXJHcm91cCkge1xuICAgIHZhciBpbWFnZVN0eWxlID0gc3R5bGUuZ2V0SW1hZ2UoKTtcbiAgICB2YXIgdGV4dFN0eWxlID0gc3R5bGUuZ2V0VGV4dCgpO1xuICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyL2NhbnZhcy5qc1wiKS5EZWNsdXR0ZXJJbWFnZVdpdGhUZXh0fSAqL1xuICAgIHZhciBkZWNsdXR0ZXJJbWFnZVdpdGhUZXh0O1xuICAgIGlmIChvcHRfZGVjbHV0dGVyQnVpbGRlckdyb3VwKSB7XG4gICAgICAgIGJ1aWxkZXJHcm91cCA9IG9wdF9kZWNsdXR0ZXJCdWlsZGVyR3JvdXA7XG4gICAgICAgIGRlY2x1dHRlckltYWdlV2l0aFRleHQgPVxuICAgICAgICAgICAgaW1hZ2VTdHlsZSAmJiB0ZXh0U3R5bGUgJiYgdGV4dFN0eWxlLmdldFRleHQoKSA/IHt9IDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoaW1hZ2VTdHlsZSkge1xuICAgICAgICBpZiAoaW1hZ2VTdHlsZS5nZXRJbWFnZVN0YXRlKCkgIT0gSW1hZ2VTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaW1hZ2VSZXBsYXkgPSBidWlsZGVyR3JvdXAuZ2V0QnVpbGRlcihzdHlsZS5nZXRaSW5kZXgoKSwgQnVpbGRlclR5cGUuSU1BR0UpO1xuICAgICAgICBpbWFnZVJlcGxheS5zZXRJbWFnZVN0eWxlKGltYWdlU3R5bGUsIGRlY2x1dHRlckltYWdlV2l0aFRleHQpO1xuICAgICAgICBpbWFnZVJlcGxheS5kcmF3UG9pbnQoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICAgIH1cbiAgICBpZiAodGV4dFN0eWxlICYmIHRleHRTdHlsZS5nZXRUZXh0KCkpIHtcbiAgICAgICAgdmFyIHRleHRSZXBsYXkgPSBidWlsZGVyR3JvdXAuZ2V0QnVpbGRlcihzdHlsZS5nZXRaSW5kZXgoKSwgQnVpbGRlclR5cGUuVEVYVCk7XG4gICAgICAgIHRleHRSZXBsYXkuc2V0VGV4dFN0eWxlKHRleHRTdHlsZSwgZGVjbHV0dGVySW1hZ2VXaXRoVGV4dCk7XG4gICAgICAgIHRleHRSZXBsYXkuZHJhd1RleHQoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvY2FudmFzL0J1aWxkZXJHcm91cC5qc1wiKS5kZWZhdWx0fSBidWlsZGVyR3JvdXAgUmVwbGF5IGdyb3VwLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL011bHRpUG9pbnQuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9yZW5kZXIvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL2NhbnZhcy9CdWlsZGVyR3JvdXAuanNcIikuZGVmYXVsdD19IG9wdF9kZWNsdXR0ZXJCdWlsZGVyR3JvdXAgQnVpbGRlciBmb3IgZGVjbHV0dGVyaW5nLlxuICovXG5mdW5jdGlvbiByZW5kZXJNdWx0aVBvaW50R2VvbWV0cnkoYnVpbGRlckdyb3VwLCBnZW9tZXRyeSwgc3R5bGUsIGZlYXR1cmUsIG9wdF9kZWNsdXR0ZXJCdWlsZGVyR3JvdXApIHtcbiAgICB2YXIgaW1hZ2VTdHlsZSA9IHN0eWxlLmdldEltYWdlKCk7XG4gICAgdmFyIHRleHRTdHlsZSA9IHN0eWxlLmdldFRleHQoKTtcbiAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL3JlbmRlci9jYW52YXMuanNcIikuRGVjbHV0dGVySW1hZ2VXaXRoVGV4dH0gKi9cbiAgICB2YXIgZGVjbHV0dGVySW1hZ2VXaXRoVGV4dDtcbiAgICBpZiAob3B0X2RlY2x1dHRlckJ1aWxkZXJHcm91cCkge1xuICAgICAgICBidWlsZGVyR3JvdXAgPSBvcHRfZGVjbHV0dGVyQnVpbGRlckdyb3VwO1xuICAgICAgICBkZWNsdXR0ZXJJbWFnZVdpdGhUZXh0ID1cbiAgICAgICAgICAgIGltYWdlU3R5bGUgJiYgdGV4dFN0eWxlICYmIHRleHRTdHlsZS5nZXRUZXh0KCkgPyB7fSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKGltYWdlU3R5bGUpIHtcbiAgICAgICAgaWYgKGltYWdlU3R5bGUuZ2V0SW1hZ2VTdGF0ZSgpICE9IEltYWdlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGltYWdlUmVwbGF5ID0gYnVpbGRlckdyb3VwLmdldEJ1aWxkZXIoc3R5bGUuZ2V0WkluZGV4KCksIEJ1aWxkZXJUeXBlLklNQUdFKTtcbiAgICAgICAgaW1hZ2VSZXBsYXkuc2V0SW1hZ2VTdHlsZShpbWFnZVN0eWxlLCBkZWNsdXR0ZXJJbWFnZVdpdGhUZXh0KTtcbiAgICAgICAgaW1hZ2VSZXBsYXkuZHJhd011bHRpUG9pbnQoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICAgIH1cbiAgICBpZiAodGV4dFN0eWxlICYmIHRleHRTdHlsZS5nZXRUZXh0KCkpIHtcbiAgICAgICAgdmFyIHRleHRSZXBsYXkgPSAob3B0X2RlY2x1dHRlckJ1aWxkZXJHcm91cCB8fCBidWlsZGVyR3JvdXApLmdldEJ1aWxkZXIoc3R5bGUuZ2V0WkluZGV4KCksIEJ1aWxkZXJUeXBlLlRFWFQpO1xuICAgICAgICB0ZXh0UmVwbGF5LnNldFRleHRTdHlsZSh0ZXh0U3R5bGUsIGRlY2x1dHRlckltYWdlV2l0aFRleHQpO1xuICAgICAgICB0ZXh0UmVwbGF5LmRyYXdUZXh0KGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL2NhbnZhcy9CdWlsZGVyR3JvdXAuanNcIikuZGVmYXVsdH0gYnVpbGRlckdyb3VwIFJlcGxheSBncm91cC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vcmVuZGVyL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9jYW52YXMvQnVpbGRlckdyb3VwLmpzXCIpLmRlZmF1bHQ9fSBvcHRfZGVjbHV0dGVyQnVpbGRlckdyb3VwIEJ1aWxkZXIgZm9yIGRlY2x1dHRlcmluZy5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyUG9seWdvbkdlb21ldHJ5KGJ1aWxkZXJHcm91cCwgZ2VvbWV0cnksIHN0eWxlLCBmZWF0dXJlLCBvcHRfZGVjbHV0dGVyQnVpbGRlckdyb3VwKSB7XG4gICAgdmFyIGZpbGxTdHlsZSA9IHN0eWxlLmdldEZpbGwoKTtcbiAgICB2YXIgc3Ryb2tlU3R5bGUgPSBzdHlsZS5nZXRTdHJva2UoKTtcbiAgICBpZiAoZmlsbFN0eWxlIHx8IHN0cm9rZVN0eWxlKSB7XG4gICAgICAgIHZhciBwb2x5Z29uUmVwbGF5ID0gYnVpbGRlckdyb3VwLmdldEJ1aWxkZXIoc3R5bGUuZ2V0WkluZGV4KCksIEJ1aWxkZXJUeXBlLlBPTFlHT04pO1xuICAgICAgICBwb2x5Z29uUmVwbGF5LnNldEZpbGxTdHJva2VTdHlsZShmaWxsU3R5bGUsIHN0cm9rZVN0eWxlKTtcbiAgICAgICAgcG9seWdvblJlcGxheS5kcmF3UG9seWdvbihnZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgfVxuICAgIHZhciB0ZXh0U3R5bGUgPSBzdHlsZS5nZXRUZXh0KCk7XG4gICAgaWYgKHRleHRTdHlsZSAmJiB0ZXh0U3R5bGUuZ2V0VGV4dCgpKSB7XG4gICAgICAgIHZhciB0ZXh0UmVwbGF5ID0gKG9wdF9kZWNsdXR0ZXJCdWlsZGVyR3JvdXAgfHwgYnVpbGRlckdyb3VwKS5nZXRCdWlsZGVyKHN0eWxlLmdldFpJbmRleCgpLCBCdWlsZGVyVHlwZS5URVhUKTtcbiAgICAgICAgdGV4dFJlcGxheS5zZXRUZXh0U3R5bGUodGV4dFN0eWxlKTtcbiAgICAgICAgdGV4dFJlcGxheS5kcmF3VGV4dChnZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmVjdG9yLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL1ZlY3RvckxheWVyXG4gKi9cbmltcG9ydCBDYW52YXNCdWlsZGVyR3JvdXAgZnJvbSAnLi4vLi4vcmVuZGVyL2NhbnZhcy9CdWlsZGVyR3JvdXAuanMnO1xuaW1wb3J0IENhbnZhc0xheWVyUmVuZGVyZXIgZnJvbSAnLi9MYXllci5qcyc7XG5pbXBvcnQgRXhlY3V0b3JHcm91cCBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzL0V4ZWN1dG9yR3JvdXAuanMnO1xuaW1wb3J0IFZpZXdIaW50IGZyb20gJy4uLy4uL1ZpZXdIaW50LmpzJztcbmltcG9ydCB7IGFwcGx5LCBtYWtlSW52ZXJzZSwgbWFrZVNjYWxlLCB0b1N0cmluZyBhcyB0cmFuc2Zvcm1Ub1N0cmluZywgfSBmcm9tICcuLi8uLi90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHsgYnVmZmVyLCBjb250YWluc0V4dGVudCwgY3JlYXRlRW1wdHksIGdldFdpZHRoLCBpbnRlcnNlY3RzIGFzIGludGVyc2VjdHNFeHRlbnQsIHdyYXBYIGFzIHdyYXBFeHRlbnRYLCB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVIaXREZXRlY3Rpb25JbWFnZURhdGEsIGhpdERldGVjdCwgfSBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzL2hpdGRldGVjdC5qcyc7XG5pbXBvcnQgeyBkZWZhdWx0T3JkZXIgYXMgZGVmYXVsdFJlbmRlck9yZGVyLCBnZXRUb2xlcmFuY2UgYXMgZ2V0UmVuZGVyVG9sZXJhbmNlLCBnZXRTcXVhcmVkVG9sZXJhbmNlIGFzIGdldFNxdWFyZWRSZW5kZXJUb2xlcmFuY2UsIHJlbmRlckZlYXR1cmUsIH0gZnJvbSAnLi4vdmVjdG9yLmpzJztcbmltcG9ydCB7IGZyb21Vc2VyRXh0ZW50LCBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMsIGdldFVzZXJQcm9qZWN0aW9uLCB0b1VzZXJFeHRlbnQsIH0gZnJvbSAnLi4vLi4vcHJvai5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgfSBmcm9tICcuLi8uLi91dGlsLmpzJztcbmltcG9ydCB7IHdyYXBYIGFzIHdyYXBDb29yZGluYXRlWCB9IGZyb20gJy4uLy4uL2Nvb3JkaW5hdGUuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDYW52YXMgcmVuZGVyZXIgZm9yIHZlY3RvciBsYXllcnMuXG4gKiBAYXBpXG4gKi9cbnZhciBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVmVjdG9yLmpzXCIpLmRlZmF1bHR9IHZlY3RvckxheWVyIFZlY3RvciBsYXllci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyKHZlY3RvckxheWVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHZlY3RvckxheWVyKSB8fCB0aGlzO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMuYm91bmRIYW5kbGVTdHlsZUltYWdlQ2hhbmdlXyA9IF90aGlzLmhhbmRsZVN0eWxlSW1hZ2VDaGFuZ2VfLmJpbmQoX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmltYXRpbmdPckludGVyYWN0aW5nXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGlydHlfID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7SW1hZ2VEYXRhfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VEYXRhXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkRmVhdHVyZXNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFJldmlzaW9uXyA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkUmVzb2x1dGlvbl8gPSBOYU47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkRXh0ZW50XyA9IGNyZWF0ZUVtcHR5KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRSb3RhdGlvbl87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZVwiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRDZW50ZXJfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9wcm9qL1Byb2plY3Rpb25cIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkUHJvamVjdGlvbl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Z1bmN0aW9uKGltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0KTogbnVtYmVyfG51bGx9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFJlbmRlck9yZGVyXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vcmVuZGVyL2NhbnZhcy9FeGVjdXRvckdyb3VwXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZXBsYXlHcm91cF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBuZXcgcmVwbGF5IGdyb3VwIGhhZCB0byBiZSBjcmVhdGVkIGJ5IGBwcmVwYXJlRnJhbWUoKWBcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZXBsYXlHcm91cENoYW5nZWQgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3JlbmRlci9jYW52YXMvRXhlY3V0b3JHcm91cFwiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGVjbHV0dGVyRXhlY3V0b3JHcm91cCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDbGlwcGluZyB0byBiZSBwZXJmb3JtZWQgYnkgYHJlbmRlckZyYW1lKClgXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2xpcHBpbmcgPSB0cnVlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhIHJlbmRlcmluZyBjb250YWluZXIgZnJvbSBhbiBleGlzdGluZyB0YXJnZXQsIGlmIGNvbXBhdGlibGUuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0IFBvdGVudGlhbCByZW5kZXIgdGFyZ2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0cmFuc2Zvcm0gQ1NTIFRyYW5zZm9ybS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eSBPcGFjaXR5LlxuICAgICAqL1xuICAgIENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIucHJvdG90eXBlLnVzZUNvbnRhaW5lciA9IGZ1bmN0aW9uICh0YXJnZXQsIHRyYW5zZm9ybSwgb3BhY2l0eSkge1xuICAgICAgICBpZiAob3BhY2l0eSA8IDEpIHtcbiAgICAgICAgICAgIHRhcmdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51c2VDb250YWluZXIuY2FsbCh0aGlzLCB0YXJnZXQsIHRyYW5zZm9ybSwgb3BhY2l0eSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0V4ZWN1dG9yR3JvdXB9IGV4ZWN1dG9yR3JvdXAgRXhlY3V0b3IgZ3JvdXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcInJidXNoXCIpLmRlZmF1bHQ9fSBvcHRfZGVjbHV0dGVyVHJlZSBEZWNsdXR0ZXIgdHJlZS5cbiAgICAgKi9cbiAgICBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJXb3JsZHMgPSBmdW5jdGlvbiAoZXhlY3V0b3JHcm91cCwgZnJhbWVTdGF0ZSwgb3B0X2RlY2x1dHRlclRyZWUpIHtcbiAgICAgICAgdmFyIGV4dGVudCA9IGZyYW1lU3RhdGUuZXh0ZW50O1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIHZhciBjZW50ZXIgPSB2aWV3U3RhdGUuY2VudGVyO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICAgICAgICB2YXIgcHJvamVjdGlvbiA9IHZpZXdTdGF0ZS5wcm9qZWN0aW9uO1xuICAgICAgICB2YXIgcm90YXRpb24gPSB2aWV3U3RhdGUucm90YXRpb247XG4gICAgICAgIHZhciBwcm9qZWN0aW9uRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICAgICAgdmFyIHZlY3RvclNvdXJjZSA9IHRoaXMuZ2V0TGF5ZXIoKS5nZXRTb3VyY2UoKTtcbiAgICAgICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgICAgIHZhciB2aWV3SGludHMgPSBmcmFtZVN0YXRlLnZpZXdIaW50cztcbiAgICAgICAgdmFyIHNuYXBUb1BpeGVsID0gISh2aWV3SGludHNbVmlld0hpbnQuQU5JTUFUSU5HXSB8fCB2aWV3SGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddKTtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgIHZhciB3aWR0aCA9IE1hdGgucm91bmQoZnJhbWVTdGF0ZS5zaXplWzBdICogcGl4ZWxSYXRpbyk7XG4gICAgICAgIHZhciBoZWlnaHQgPSBNYXRoLnJvdW5kKGZyYW1lU3RhdGUuc2l6ZVsxXSAqIHBpeGVsUmF0aW8pO1xuICAgICAgICB2YXIgbXVsdGlXb3JsZCA9IHZlY3RvclNvdXJjZS5nZXRXcmFwWCgpICYmIHByb2plY3Rpb24uY2FuV3JhcFgoKTtcbiAgICAgICAgdmFyIHdvcmxkV2lkdGggPSBtdWx0aVdvcmxkID8gZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCkgOiBudWxsO1xuICAgICAgICB2YXIgZW5kV29ybGQgPSBtdWx0aVdvcmxkXG4gICAgICAgICAgICA/IE1hdGguY2VpbCgoZXh0ZW50WzJdIC0gcHJvamVjdGlvbkV4dGVudFsyXSkgLyB3b3JsZFdpZHRoKSArIDFcbiAgICAgICAgICAgIDogMTtcbiAgICAgICAgdmFyIHdvcmxkID0gbXVsdGlXb3JsZFxuICAgICAgICAgICAgPyBNYXRoLmZsb29yKChleHRlbnRbMF0gLSBwcm9qZWN0aW9uRXh0ZW50WzBdKSAvIHdvcmxkV2lkdGgpXG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIHZhciB0cmFuc2Zvcm0gPSB0aGlzLmdldFJlbmRlclRyYW5zZm9ybShjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBwaXhlbFJhdGlvLCB3aWR0aCwgaGVpZ2h0LCB3b3JsZCAqIHdvcmxkV2lkdGgpO1xuICAgICAgICAgICAgZXhlY3V0b3JHcm91cC5leGVjdXRlKGNvbnRleHQsIDEsIHRyYW5zZm9ybSwgcm90YXRpb24sIHNuYXBUb1BpeGVsLCB1bmRlZmluZWQsIG9wdF9kZWNsdXR0ZXJUcmVlKTtcbiAgICAgICAgfSB3aGlsZSAoKyt3b3JsZCA8IGVuZFdvcmxkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlciBkZWNsdXR0ZXIgaXRlbXMgZm9yIHRoaXMgbGF5ZXJcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckRlY2x1dHRlciA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIGlmICh0aGlzLmRlY2x1dHRlckV4ZWN1dG9yR3JvdXApIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyV29ybGRzKHRoaXMuZGVjbHV0dGVyRXhlY3V0b3JHcm91cCwgZnJhbWVTdGF0ZSwgZnJhbWVTdGF0ZS5kZWNsdXR0ZXJUcmVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRoZSBsYXllci5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBUYXJnZXQgdGhhdCBtYXkgYmUgdXNlZCB0byByZW5kZXIgY29udGVudCB0by5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAgICovXG4gICAgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSwgdGFyZ2V0KSB7XG4gICAgICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheVtmcmFtZVN0YXRlLmxheWVySW5kZXhdO1xuICAgICAgICAvLyBzZXQgZm9yd2FyZCBhbmQgaW52ZXJzZSBwaXhlbCB0cmFuc2Zvcm1zXG4gICAgICAgIG1ha2VTY2FsZSh0aGlzLnBpeGVsVHJhbnNmb3JtLCAxIC8gcGl4ZWxSYXRpbywgMSAvIHBpeGVsUmF0aW8pO1xuICAgICAgICBtYWtlSW52ZXJzZSh0aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybSwgdGhpcy5waXhlbFRyYW5zZm9ybSk7XG4gICAgICAgIHZhciBjYW52YXNUcmFuc2Zvcm0gPSB0cmFuc2Zvcm1Ub1N0cmluZyh0aGlzLnBpeGVsVHJhbnNmb3JtKTtcbiAgICAgICAgdGhpcy51c2VDb250YWluZXIodGFyZ2V0LCBjYW52YXNUcmFuc2Zvcm0sIGxheWVyU3RhdGUub3BhY2l0eSk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgICAgICB2YXIgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgICAgIHZhciByZXBsYXlHcm91cCA9IHRoaXMucmVwbGF5R3JvdXBfO1xuICAgICAgICB2YXIgZGVjbHV0dGVyRXhlY3V0b3JHcm91cCA9IHRoaXMuZGVjbHV0dGVyRXhlY3V0b3JHcm91cDtcbiAgICAgICAgaWYgKCghcmVwbGF5R3JvdXAgfHwgcmVwbGF5R3JvdXAuaXNFbXB0eSgpKSAmJlxuICAgICAgICAgICAgKCFkZWNsdXR0ZXJFeGVjdXRvckdyb3VwIHx8IGRlY2x1dHRlckV4ZWN1dG9yR3JvdXAuaXNFbXB0eSgpKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lclJldXNlZCAmJiBjYW52YXMud2lkdGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXNpemUgYW5kIGNsZWFyXG4gICAgICAgIHZhciB3aWR0aCA9IE1hdGgucm91bmQoZnJhbWVTdGF0ZS5zaXplWzBdICogcGl4ZWxSYXRpbyk7XG4gICAgICAgIHZhciBoZWlnaHQgPSBNYXRoLnJvdW5kKGZyYW1lU3RhdGUuc2l6ZVsxXSAqIHBpeGVsUmF0aW8pO1xuICAgICAgICBpZiAoY2FudmFzLndpZHRoICE9IHdpZHRoIHx8IGNhbnZhcy5oZWlnaHQgIT0gaGVpZ2h0KSB7XG4gICAgICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICBpZiAoY2FudmFzLnN0eWxlLnRyYW5zZm9ybSAhPT0gY2FudmFzVHJhbnNmb3JtKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzLnN0eWxlLnRyYW5zZm9ybSA9IGNhbnZhc1RyYW5zZm9ybTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdGhpcy5jb250YWluZXJSZXVzZWQpIHtcbiAgICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJlUmVuZGVyKGNvbnRleHQsIGZyYW1lU3RhdGUpO1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgICAgIC8vIGNsaXBwZWQgcmVuZGVyaW5nIGlmIGxheWVyIGV4dGVudCBpcyBzZXRcbiAgICAgICAgdmFyIGNsaXBwZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKGxheWVyU3RhdGUuZXh0ZW50ICYmIHRoaXMuY2xpcHBpbmcpIHtcbiAgICAgICAgICAgIHZhciBsYXllckV4dGVudCA9IGZyb21Vc2VyRXh0ZW50KGxheWVyU3RhdGUuZXh0ZW50LCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIGNsaXBwZWQgPVxuICAgICAgICAgICAgICAgICFjb250YWluc0V4dGVudChsYXllckV4dGVudCwgZnJhbWVTdGF0ZS5leHRlbnQpICYmXG4gICAgICAgICAgICAgICAgICAgIGludGVyc2VjdHNFeHRlbnQobGF5ZXJFeHRlbnQsIGZyYW1lU3RhdGUuZXh0ZW50KTtcbiAgICAgICAgICAgIGlmIChjbGlwcGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGlwVW5yb3RhdGVkKGNvbnRleHQsIGZyYW1lU3RhdGUsIGxheWVyRXh0ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcldvcmxkcyhyZXBsYXlHcm91cCwgZnJhbWVTdGF0ZSk7XG4gICAgICAgIGlmIChjbGlwcGVkKSB7XG4gICAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvc3RSZW5kZXIoY29udGV4dCwgZnJhbWVTdGF0ZSk7XG4gICAgICAgIHZhciBvcGFjaXR5ID0gbGF5ZXJTdGF0ZS5vcGFjaXR5O1xuICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7XG4gICAgICAgIGlmIChvcGFjaXR5ICE9PSBwYXJzZUZsb2F0KGNvbnRhaW5lci5zdHlsZS5vcGFjaXR5KSkge1xuICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5ID09PSAxID8gJycgOiBTdHJpbmcob3BhY2l0eSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRSb3RhdGlvbl8gIT09IHZpZXdTdGF0ZS5yb3RhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFJvdGF0aW9uXyA9IHZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VEYXRhXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQXN5bmNocm9ub3VzIGxheWVyIGxldmVsIGhpdCBkZXRlY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxBcnJheTxpbXBvcnQoXCIuLi8uLi9GZWF0dXJlXCIpLmRlZmF1bHQ+Pn0gUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYW4gYXJyYXkgb2YgZmVhdHVyZXMuXG4gICAgICovXG4gICAgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihBcnJheTxpbXBvcnQoXCIuLi8uLi9GZWF0dXJlXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vLi4vcmVuZGVyL0ZlYXR1cmVcIikuZGVmYXVsdD4pOiB2b2lkfSByZXNvbHZlIFJlc29sdmVyIGZ1bmN0aW9uLlxuICAgICAgICAgKiBAdGhpcyB7Q2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlcn1cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VEYXRhXyAmJiAhdGhpcy5hbmltYXRpbmdPckludGVyYWN0aW5nXykge1xuICAgICAgICAgICAgICAgIHZhciBzaXplID0gW3RoaXMuY29udGV4dC5jYW52YXMud2lkdGgsIHRoaXMuY29udGV4dC5jYW52YXMuaGVpZ2h0XTtcbiAgICAgICAgICAgICAgICBhcHBseSh0aGlzLnBpeGVsVHJhbnNmb3JtLCBzaXplKTtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gdGhpcy5yZW5kZXJlZENlbnRlcl87XG4gICAgICAgICAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLnJlbmRlcmVkUmVzb2x1dGlvbl87XG4gICAgICAgICAgICAgICAgdmFyIHJvdGF0aW9uID0gdGhpcy5yZW5kZXJlZFJvdGF0aW9uXztcbiAgICAgICAgICAgICAgICB2YXIgcHJvamVjdGlvbiA9IHRoaXMucmVuZGVyZWRQcm9qZWN0aW9uXztcbiAgICAgICAgICAgICAgICB2YXIgZXh0ZW50ID0gdGhpcy5yZW5kZXJlZEV4dGVudF87XG4gICAgICAgICAgICAgICAgdmFyIGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgICAgICAgICAgICAgIHZhciB0cmFuc2Zvcm1zID0gW107XG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gc2l6ZVswXSAvIDI7XG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IHNpemVbMV0gLyAyO1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybXMucHVzaCh0aGlzLmdldFJlbmRlclRyYW5zZm9ybShjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCAwLjUsIHdpZHRoLCBoZWlnaHQsIDApLnNsaWNlKCkpO1xuICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBsYXllci5nZXRTb3VyY2UoKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvamVjdGlvbkV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5nZXRXcmFwWCgpICYmXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Rpb24uY2FuV3JhcFgoKSAmJlxuICAgICAgICAgICAgICAgICAgICAhY29udGFpbnNFeHRlbnQocHJvamVjdGlvbkV4dGVudCwgZXh0ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnRYID0gZXh0ZW50WzBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgd29ybGRXaWR0aCA9IGdldFdpZHRoKHByb2plY3Rpb25FeHRlbnQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgd29ybGQgPSAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0WCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHN0YXJ0WCA8IHByb2plY3Rpb25FeHRlbnRbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC0td29ybGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRYID0gd29ybGRXaWR0aCAqIHdvcmxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3Jtcy5wdXNoKHRoaXMuZ2V0UmVuZGVyVHJhbnNmb3JtKGNlbnRlciwgcmVzb2x1dGlvbiwgcm90YXRpb24sIDAuNSwgd2lkdGgsIGhlaWdodCwgb2Zmc2V0WCkuc2xpY2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFggKz0gd29ybGRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3b3JsZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0WCA9IGV4dGVudFsyXTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHN0YXJ0WCA+IHByb2plY3Rpb25FeHRlbnRbMl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICsrd29ybGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRYID0gd29ybGRXaWR0aCAqIHdvcmxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3Jtcy5wdXNoKHRoaXMuZ2V0UmVuZGVyVHJhbnNmb3JtKGNlbnRlciwgcmVzb2x1dGlvbiwgcm90YXRpb24sIDAuNSwgd2lkdGgsIGhlaWdodCwgb2Zmc2V0WCkuc2xpY2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFggLT0gd29ybGRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmhpdERldGVjdGlvbkltYWdlRGF0YV8gPSBjcmVhdGVIaXREZXRlY3Rpb25JbWFnZURhdGEoc2l6ZSwgdHJhbnNmb3JtcywgdGhpcy5yZW5kZXJlZEZlYXR1cmVzXywgbGF5ZXIuZ2V0U3R5bGVGdW5jdGlvbigpLCBleHRlbnQsIHJlc29sdXRpb24sIHJvdGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc29sdmUoaGl0RGV0ZWN0KHBpeGVsLCB0aGlzLnJlbmRlcmVkRmVhdHVyZXNfLCB0aGlzLmhpdERldGVjdGlvbkltYWdlRGF0YV8pKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdmVjdG9yLmpzXCIpLkZlYXR1cmVDYWxsYmFjazxUPn0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uL01hcC5qc1wiKS5IaXRNYXRjaDxUPj59IG1hdGNoZXMgVGhlIGhpdCBkZXRlY3RlZCBtYXRjaGVzIHdpdGggdG9sZXJhbmNlLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQuXG4gICAgICogQHRlbXBsYXRlIFRcbiAgICAgKi9cbiAgICBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrLCBtYXRjaGVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghdGhpcy5yZXBsYXlHcm91cF8pIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICAgICAgICB2YXIgcm90YXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICAgICAgdmFyIGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgICAgICAvKiogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9NYXAuanNcIikuSGl0TWF0Y2g8VD58dHJ1ZT59ICovXG4gICAgICAgIHZhciBmZWF0dXJlcyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlU3EgVGhlIHNxdWFyZWQgZGlzdGFuY2UgdG8gdGhlIGNsaWNrIHBvc2l0aW9uXG4gICAgICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQuXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgZmVhdHVyZUNhbGxiYWNrID0gZnVuY3Rpb24gKGZlYXR1cmUsIGdlb21ldHJ5LCBkaXN0YW5jZVNxKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gZ2V0VWlkKGZlYXR1cmUpO1xuICAgICAgICAgICAgdmFyIG1hdGNoID0gZmVhdHVyZXNba2V5XTtcbiAgICAgICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2VTcSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlc1trZXldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGZlYXR1cmUsIGxheWVyLCBnZW9tZXRyeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaCgoZmVhdHVyZXNba2V5XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZTogZmVhdHVyZSxcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXI6IGxheWVyLFxuICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ2VvbWV0cnksXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlU3E6IGRpc3RhbmNlU3EsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtYXRjaCAhPT0gdHJ1ZSAmJiBkaXN0YW5jZVNxIDwgbWF0Y2guZGlzdGFuY2VTcSkge1xuICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZVNxID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzW2tleV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnNwbGljZShtYXRjaGVzLmxhc3RJbmRleE9mKG1hdGNoKSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhmZWF0dXJlLCBsYXllciwgZ2VvbWV0cnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtYXRjaC5nZW9tZXRyeSA9IGdlb21ldHJ5O1xuICAgICAgICAgICAgICAgIG1hdGNoLmRpc3RhbmNlU3EgPSBkaXN0YW5jZVNxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdmFyIGV4ZWN1dG9yR3JvdXBzID0gW3RoaXMucmVwbGF5R3JvdXBfXTtcbiAgICAgICAgaWYgKHRoaXMuZGVjbHV0dGVyRXhlY3V0b3JHcm91cCkge1xuICAgICAgICAgICAgZXhlY3V0b3JHcm91cHMucHVzaCh0aGlzLmRlY2x1dHRlckV4ZWN1dG9yR3JvdXApO1xuICAgICAgICB9XG4gICAgICAgIGV4ZWN1dG9yR3JvdXBzLnNvbWUoZnVuY3Rpb24gKGV4ZWN1dG9yR3JvdXApIHtcbiAgICAgICAgICAgIHJldHVybiAocmVzdWx0ID0gZXhlY3V0b3JHcm91cC5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShjb29yZGluYXRlLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgaGl0VG9sZXJhbmNlLCBmZWF0dXJlQ2FsbGJhY2ssIGV4ZWN1dG9yR3JvdXAgPT09IF90aGlzLmRlY2x1dHRlckV4ZWN1dG9yR3JvdXBcbiAgICAgICAgICAgICAgICA/IGZyYW1lU3RhdGUuZGVjbHV0dGVyVHJlZS5hbGwoKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGl0ZW0udmFsdWU7IH0pXG4gICAgICAgICAgICAgICAgOiBudWxsKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUGVyZm9ybSBhY3Rpb24gbmVjZXNzYXJ5IHRvIGdldCB0aGUgbGF5ZXIgcmVuZGVyZWQgYWZ0ZXIgbmV3IGZvbnRzIGhhdmUgbG9hZGVkXG4gICAgICovXG4gICAgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlRm9udHNDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIGlmIChsYXllci5nZXRWaXNpYmxlKCkgJiYgdGhpcy5yZXBsYXlHcm91cF8pIHtcbiAgICAgICAgICAgIGxheWVyLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGNoYW5nZXMgaW4gaW1hZ2Ugc3R5bGUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgSW1hZ2Ugc3R5bGUgY2hhbmdlIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlU3R5bGVJbWFnZUNoYW5nZV8gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJJZlJlYWR5QW5kVmlzaWJsZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIHdoZXRoZXIgcmVuZGVyIHNob3VsZCBiZSBjYWxsZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBMYXllciBpcyByZWFkeSB0byBiZSByZW5kZXJlZC5cbiAgICAgKi9cbiAgICBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wcmVwYXJlRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgdmVjdG9yTGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIHZhciB2ZWN0b3JTb3VyY2UgPSB2ZWN0b3JMYXllci5nZXRTb3VyY2UoKTtcbiAgICAgICAgaWYgKCF2ZWN0b3JTb3VyY2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYW5pbWF0aW5nID0gZnJhbWVTdGF0ZS52aWV3SGludHNbVmlld0hpbnQuQU5JTUFUSU5HXTtcbiAgICAgICAgdmFyIGludGVyYWN0aW5nID0gZnJhbWVTdGF0ZS52aWV3SGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddO1xuICAgICAgICB2YXIgdXBkYXRlV2hpbGVBbmltYXRpbmcgPSB2ZWN0b3JMYXllci5nZXRVcGRhdGVXaGlsZUFuaW1hdGluZygpO1xuICAgICAgICB2YXIgdXBkYXRlV2hpbGVJbnRlcmFjdGluZyA9IHZlY3RvckxheWVyLmdldFVwZGF0ZVdoaWxlSW50ZXJhY3RpbmcoKTtcbiAgICAgICAgaWYgKCghdGhpcy5kaXJ0eV8gJiYgIXVwZGF0ZVdoaWxlQW5pbWF0aW5nICYmIGFuaW1hdGluZykgfHxcbiAgICAgICAgICAgICghdXBkYXRlV2hpbGVJbnRlcmFjdGluZyAmJiBpbnRlcmFjdGluZykpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW5nT3JJbnRlcmFjdGluZ18gPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hbmltYXRpbmdPckludGVyYWN0aW5nXyA9IGZhbHNlO1xuICAgICAgICB2YXIgZnJhbWVTdGF0ZUV4dGVudCA9IGZyYW1lU3RhdGUuZXh0ZW50O1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb247XG4gICAgICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgICAgICB2YXIgdmVjdG9yTGF5ZXJSZXZpc2lvbiA9IHZlY3RvckxheWVyLmdldFJldmlzaW9uKCk7XG4gICAgICAgIHZhciB2ZWN0b3JMYXllclJlbmRlckJ1ZmZlciA9IHZlY3RvckxheWVyLmdldFJlbmRlckJ1ZmZlcigpO1xuICAgICAgICB2YXIgdmVjdG9yTGF5ZXJSZW5kZXJPcmRlciA9IHZlY3RvckxheWVyLmdldFJlbmRlck9yZGVyKCk7XG4gICAgICAgIGlmICh2ZWN0b3JMYXllclJlbmRlck9yZGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZlY3RvckxheWVyUmVuZGVyT3JkZXIgPSBkZWZhdWx0UmVuZGVyT3JkZXI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNlbnRlciA9IHZpZXdTdGF0ZS5jZW50ZXIuc2xpY2UoKTtcbiAgICAgICAgdmFyIGV4dGVudCA9IGJ1ZmZlcihmcmFtZVN0YXRlRXh0ZW50LCB2ZWN0b3JMYXllclJlbmRlckJ1ZmZlciAqIHJlc29sdXRpb24pO1xuICAgICAgICB2YXIgbG9hZEV4dGVudHMgPSBbZXh0ZW50LnNsaWNlKCldO1xuICAgICAgICB2YXIgcHJvamVjdGlvbkV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgICAgIGlmICh2ZWN0b3JTb3VyY2UuZ2V0V3JhcFgoKSAmJlxuICAgICAgICAgICAgcHJvamVjdGlvbi5jYW5XcmFwWCgpICYmXG4gICAgICAgICAgICAhY29udGFpbnNFeHRlbnQocHJvamVjdGlvbkV4dGVudCwgZnJhbWVTdGF0ZS5leHRlbnQpKSB7XG4gICAgICAgICAgICAvLyBGb3IgdGhlIHJlcGxheSBncm91cCwgd2UgbmVlZCBhbiBleHRlbnQgdGhhdCBpbnRlcnNlY3RzIHRoZSByZWFsIHdvcmxkXG4gICAgICAgICAgICAvLyAoLTE4MMKwIHRvICsxODDCsCkuIFRvIHN1cHBvcnQgZ2VvbWV0cmllcyBpbiBhIGNvb3JkaW5hdGUgcmFuZ2UgZnJvbSAtNTQwwrBcbiAgICAgICAgICAgIC8vIHRvICs1NDDCsCwgd2UgYWRkIGF0IGxlYXN0IDEgd29ybGQgd2lkdGggb24gZWFjaCBzaWRlIG9mIHRoZSBwcm9qZWN0aW9uXG4gICAgICAgICAgICAvLyBleHRlbnQuIElmIHRoZSB2aWV3cG9ydCBpcyB3aWRlciB0aGFuIHRoZSB3b3JsZCwgd2UgbmVlZCB0byBhZGQgaGFsZiBvZlxuICAgICAgICAgICAgLy8gdGhlIHZpZXdwb3J0IHdpZHRoIHRvIG1ha2Ugc3VyZSB3ZSBjb3ZlciB0aGUgd2hvbGUgdmlld3BvcnQuXG4gICAgICAgICAgICB2YXIgd29ybGRXaWR0aCA9IGdldFdpZHRoKHByb2plY3Rpb25FeHRlbnQpO1xuICAgICAgICAgICAgdmFyIGd1dHRlciA9IE1hdGgubWF4KGdldFdpZHRoKGV4dGVudCkgLyAyLCB3b3JsZFdpZHRoKTtcbiAgICAgICAgICAgIGV4dGVudFswXSA9IHByb2plY3Rpb25FeHRlbnRbMF0gLSBndXR0ZXI7XG4gICAgICAgICAgICBleHRlbnRbMl0gPSBwcm9qZWN0aW9uRXh0ZW50WzJdICsgZ3V0dGVyO1xuICAgICAgICAgICAgd3JhcENvb3JkaW5hdGVYKGNlbnRlciwgcHJvamVjdGlvbik7XG4gICAgICAgICAgICB2YXIgbG9hZEV4dGVudCA9IHdyYXBFeHRlbnRYKGxvYWRFeHRlbnRzWzBdLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIC8vIElmIHRoZSBleHRlbnQgY3Jvc3NlcyB0aGUgZGF0ZSBsaW5lLCB3ZSBsb2FkIGRhdGEgZm9yIGJvdGggZWRnZXMgb2YgdGhlIHdvcmxkc1xuICAgICAgICAgICAgaWYgKGxvYWRFeHRlbnRbMF0gPCBwcm9qZWN0aW9uRXh0ZW50WzBdICYmXG4gICAgICAgICAgICAgICAgbG9hZEV4dGVudFsyXSA8IHByb2plY3Rpb25FeHRlbnRbMl0pIHtcbiAgICAgICAgICAgICAgICBsb2FkRXh0ZW50cy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgICAgbG9hZEV4dGVudFswXSArIHdvcmxkV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGxvYWRFeHRlbnRbMV0sXG4gICAgICAgICAgICAgICAgICAgIGxvYWRFeHRlbnRbMl0gKyB3b3JsZFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICBsb2FkRXh0ZW50WzNdLFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobG9hZEV4dGVudFswXSA+IHByb2plY3Rpb25FeHRlbnRbMF0gJiZcbiAgICAgICAgICAgICAgICBsb2FkRXh0ZW50WzJdID4gcHJvamVjdGlvbkV4dGVudFsyXSkge1xuICAgICAgICAgICAgICAgIGxvYWRFeHRlbnRzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgICBsb2FkRXh0ZW50WzBdIC0gd29ybGRXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgbG9hZEV4dGVudFsxXSxcbiAgICAgICAgICAgICAgICAgICAgbG9hZEV4dGVudFsyXSAtIHdvcmxkV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGxvYWRFeHRlbnRbM10sXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmRpcnR5XyAmJlxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFJlc29sdXRpb25fID09IHJlc29sdXRpb24gJiZcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRSZXZpc2lvbl8gPT0gdmVjdG9yTGF5ZXJSZXZpc2lvbiAmJlxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFJlbmRlck9yZGVyXyA9PSB2ZWN0b3JMYXllclJlbmRlck9yZGVyICYmXG4gICAgICAgICAgICBjb250YWluc0V4dGVudCh0aGlzLnJlbmRlcmVkRXh0ZW50XywgZXh0ZW50KSkge1xuICAgICAgICAgICAgdGhpcy5yZXBsYXlHcm91cENoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVwbGF5R3JvdXBfID0gbnVsbDtcbiAgICAgICAgdGhpcy5kaXJ0eV8gPSBmYWxzZTtcbiAgICAgICAgdmFyIHJlcGxheUdyb3VwID0gbmV3IENhbnZhc0J1aWxkZXJHcm91cChnZXRSZW5kZXJUb2xlcmFuY2UocmVzb2x1dGlvbiwgcGl4ZWxSYXRpbyksIGV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbyk7XG4gICAgICAgIHZhciBkZWNsdXR0ZXJCdWlsZGVyR3JvdXA7XG4gICAgICAgIGlmICh0aGlzLmdldExheWVyKCkuZ2V0RGVjbHV0dGVyKCkpIHtcbiAgICAgICAgICAgIGRlY2x1dHRlckJ1aWxkZXJHcm91cCA9IG5ldyBDYW52YXNCdWlsZGVyR3JvdXAoZ2V0UmVuZGVyVG9sZXJhbmNlKHJlc29sdXRpb24sIHBpeGVsUmF0aW8pLCBleHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8pO1xuICAgICAgICB9XG4gICAgICAgIHZhciB1c2VyUHJvamVjdGlvbiA9IGdldFVzZXJQcm9qZWN0aW9uKCk7XG4gICAgICAgIHZhciB1c2VyVHJhbnNmb3JtO1xuICAgICAgICBpZiAodXNlclByb2plY3Rpb24pIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxvYWRFeHRlbnRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2ZWN0b3JTb3VyY2UubG9hZEZlYXR1cmVzKHRvVXNlckV4dGVudChsb2FkRXh0ZW50c1tpXSwgcHJvamVjdGlvbiksIHJlc29sdXRpb24sIHVzZXJQcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVzZXJUcmFuc2Zvcm0gPSBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnModXNlclByb2plY3Rpb24sIHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbG9hZEV4dGVudHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIHZlY3RvclNvdXJjZS5sb2FkRmVhdHVyZXMobG9hZEV4dGVudHNbaV0sIHJlc29sdXRpb24sIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBzcXVhcmVkVG9sZXJhbmNlID0gZ2V0U3F1YXJlZFJlbmRlclRvbGVyYW5jZShyZXNvbHV0aW9uLCBwaXhlbFJhdGlvKTtcbiAgICAgICAgdmFyIHJlbmRlciA9IFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgICAgICogQHRoaXMge0NhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICAgICAgdmFyIHN0eWxlcztcbiAgICAgICAgICAgIHZhciBzdHlsZUZ1bmN0aW9uID0gZmVhdHVyZS5nZXRTdHlsZUZ1bmN0aW9uKCkgfHwgdmVjdG9yTGF5ZXIuZ2V0U3R5bGVGdW5jdGlvbigpO1xuICAgICAgICAgICAgaWYgKHN0eWxlRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBzdHlsZXMgPSBzdHlsZUZ1bmN0aW9uKGZlYXR1cmUsIHJlc29sdXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0eWxlcykge1xuICAgICAgICAgICAgICAgIHZhciBkaXJ0eSA9IHRoaXMucmVuZGVyRmVhdHVyZShmZWF0dXJlLCBzcXVhcmVkVG9sZXJhbmNlLCBzdHlsZXMsIHJlcGxheUdyb3VwLCB1c2VyVHJhbnNmb3JtLCBkZWNsdXR0ZXJCdWlsZGVyR3JvdXApO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlydHlfID0gdGhpcy5kaXJ0eV8gfHwgZGlydHk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKTtcbiAgICAgICAgdmFyIHVzZXJFeHRlbnQgPSB0b1VzZXJFeHRlbnQoZXh0ZW50LCBwcm9qZWN0aW9uKTtcbiAgICAgICAgLyoqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+fSAqL1xuICAgICAgICB2YXIgZmVhdHVyZXMgPSB2ZWN0b3JTb3VyY2UuZ2V0RmVhdHVyZXNJbkV4dGVudCh1c2VyRXh0ZW50KTtcbiAgICAgICAgaWYgKHZlY3RvckxheWVyUmVuZGVyT3JkZXIpIHtcbiAgICAgICAgICAgIGZlYXR1cmVzLnNvcnQodmVjdG9yTGF5ZXJSZW5kZXJPcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZmVhdHVyZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgcmVuZGVyKGZlYXR1cmVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcmVkRmVhdHVyZXNfID0gZmVhdHVyZXM7XG4gICAgICAgIHZhciByZXBsYXlHcm91cEluc3RydWN0aW9ucyA9IHJlcGxheUdyb3VwLmZpbmlzaCgpO1xuICAgICAgICB2YXIgZXhlY3V0b3JHcm91cCA9IG5ldyBFeGVjdXRvckdyb3VwKGV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgdmVjdG9yU291cmNlLmdldE92ZXJsYXBzKCksIHJlcGxheUdyb3VwSW5zdHJ1Y3Rpb25zLCB2ZWN0b3JMYXllci5nZXRSZW5kZXJCdWZmZXIoKSk7XG4gICAgICAgIGlmIChkZWNsdXR0ZXJCdWlsZGVyR3JvdXApIHtcbiAgICAgICAgICAgIHRoaXMuZGVjbHV0dGVyRXhlY3V0b3JHcm91cCA9IG5ldyBFeGVjdXRvckdyb3VwKGV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgdmVjdG9yU291cmNlLmdldE92ZXJsYXBzKCksIGRlY2x1dHRlckJ1aWxkZXJHcm91cC5maW5pc2goKSwgdmVjdG9yTGF5ZXIuZ2V0UmVuZGVyQnVmZmVyKCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uXyA9IHJlc29sdXRpb247XG4gICAgICAgIHRoaXMucmVuZGVyZWRSZXZpc2lvbl8gPSB2ZWN0b3JMYXllclJldmlzaW9uO1xuICAgICAgICB0aGlzLnJlbmRlcmVkUmVuZGVyT3JkZXJfID0gdmVjdG9yTGF5ZXJSZW5kZXJPcmRlcjtcbiAgICAgICAgdGhpcy5yZW5kZXJlZEV4dGVudF8gPSBleHRlbnQ7XG4gICAgICAgIHRoaXMucmVuZGVyZWRDZW50ZXJfID0gY2VudGVyO1xuICAgICAgICB0aGlzLnJlbmRlcmVkUHJvamVjdGlvbl8gPSBwcm9qZWN0aW9uO1xuICAgICAgICB0aGlzLnJlcGxheUdyb3VwXyA9IGV4ZWN1dG9yR3JvdXA7XG4gICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VEYXRhXyA9IG51bGw7XG4gICAgICAgIHRoaXMucmVwbGF5R3JvdXBDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgcmVuZGVyIHRvbGVyYW5jZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR8QXJyYXk8aW1wb3J0KFwiLi4vLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdD59IHN0eWxlcyBUaGUgc3R5bGUgb3IgYXJyYXkgb2Ygc3R5bGVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vcmVuZGVyL2NhbnZhcy9CdWlsZGVyR3JvdXAuanNcIikuZGVmYXVsdH0gYnVpbGRlckdyb3VwIEJ1aWxkZXIgZ3JvdXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9uPX0gb3B0X3RyYW5zZm9ybSBUcmFuc2Zvcm0gZnJvbSB1c2VyIHRvIHZpZXcgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3JlbmRlci9jYW52YXMvQnVpbGRlckdyb3VwLmpzXCIpLmRlZmF1bHQ9fSBvcHRfZGVjbHV0dGVyQnVpbGRlckdyb3VwIEJ1aWxkZXIgZm9yIGRlY2x1dHRlcmluZy5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgYW4gaW1hZ2UgaXMgbG9hZGluZy5cbiAgICAgKi9cbiAgICBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJGZWF0dXJlID0gZnVuY3Rpb24gKGZlYXR1cmUsIHNxdWFyZWRUb2xlcmFuY2UsIHN0eWxlcywgYnVpbGRlckdyb3VwLCBvcHRfdHJhbnNmb3JtLCBvcHRfZGVjbHV0dGVyQnVpbGRlckdyb3VwKSB7XG4gICAgICAgIGlmICghc3R5bGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3R5bGVzKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gc3R5bGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBsb2FkaW5nID1cbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyRmVhdHVyZShidWlsZGVyR3JvdXAsIGZlYXR1cmUsIHN0eWxlc1tpXSwgc3F1YXJlZFRvbGVyYW5jZSwgdGhpcy5ib3VuZEhhbmRsZVN0eWxlSW1hZ2VDaGFuZ2VfLCBvcHRfdHJhbnNmb3JtLCBvcHRfZGVjbHV0dGVyQnVpbGRlckdyb3VwKSB8fCBsb2FkaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9hZGluZyA9IHJlbmRlckZlYXR1cmUoYnVpbGRlckdyb3VwLCBmZWF0dXJlLCBzdHlsZXMsIHNxdWFyZWRUb2xlcmFuY2UsIHRoaXMuYm91bmRIYW5kbGVTdHlsZUltYWdlQ2hhbmdlXywgb3B0X3RyYW5zZm9ybSwgb3B0X2RlY2x1dHRlckJ1aWxkZXJHcm91cCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxvYWRpbmc7XG4gICAgfTtcbiAgICByZXR1cm4gQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlcjtcbn0oQ2FudmFzTGF5ZXJSZW5kZXJlcikpO1xuZXhwb3J0IGRlZmF1bHQgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZlY3RvckxheWVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvY2FudmFzL2hpdGRldGVjdFxuICovXG5pbXBvcnQgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIgZnJvbSAnLi9JbW1lZGlhdGUuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuLi8uLi9nZW9tL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgSWNvbkFuY2hvclVuaXRzIGZyb20gJy4uLy4uL3N0eWxlL0ljb25BbmNob3JVbml0cy5qcyc7XG5pbXBvcnQgeyBJY29uIH0gZnJvbSAnLi4vLi4vc3R5bGUuanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FudmFzQ29udGV4dDJEIH0gZnJvbSAnLi4vLi4vZG9tLmpzJztcbmltcG9ydCB7IGludGVyc2VjdHMgfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgbnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbiB9IGZyb20gJy4uLy4uL2FycmF5LmpzJztcbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zaXplLmpzXCIpLlNpemV9IHNpemUgQ2FudmFzIHNpemUgaW4gY3NzIHBpeGVscy5cbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybT59IHRyYW5zZm9ybXMgVHJhbnNmb3Jtc1xuICogZm9yIHJlbmRlcmluZyBmZWF0dXJlcyB0byBhbGwgd29ybGRzIG9mIHRoZSB2aWV3cG9ydCwgZnJvbSBjb29yZGluYXRlcyB0byBjc3NcbiAqIHBpeGVscy5cbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZT59IGZlYXR1cmVzXG4gKiBGZWF0dXJlcyB0byBjb25zaWRlciBmb3IgaGl0IGRldGVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVGdW5jdGlvbnx1bmRlZmluZWR9IHN0eWxlRnVuY3Rpb25cbiAqIExheWVyIHN0eWxlIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEByZXR1cm4ge0ltYWdlRGF0YX0gSGl0IGRldGVjdGlvbiBpbWFnZSBkYXRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSGl0RGV0ZWN0aW9uSW1hZ2VEYXRhKHNpemUsIHRyYW5zZm9ybXMsIGZlYXR1cmVzLCBzdHlsZUZ1bmN0aW9uLCBleHRlbnQsIHJlc29sdXRpb24sIHJvdGF0aW9uKSB7XG4gICAgdmFyIHdpZHRoID0gc2l6ZVswXSAvIDI7XG4gICAgdmFyIGhlaWdodCA9IHNpemVbMV0gLyAyO1xuICAgIHZhciBjb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKHdpZHRoLCBoZWlnaHQpO1xuICAgIGNvbnRleHQuaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgdmFyIGNhbnZhcyA9IGNvbnRleHQuY2FudmFzO1xuICAgIHZhciByZW5kZXJlciA9IG5ldyBDYW52YXNJbW1lZGlhdGVSZW5kZXJlcihjb250ZXh0LCAwLjUsIGV4dGVudCwgbnVsbCwgcm90YXRpb24pO1xuICAgIHZhciBmZWF0dXJlQ291bnQgPSBmZWF0dXJlcy5sZW5ndGg7XG4gICAgLy8gU3RyZXRjaCBoaXQgZGV0ZWN0aW9uIGluZGV4IHRvIHVzZSB0aGUgd2hvbGUgYXZhaWxhYmxlIGNvbG9yIHJhbmdlXG4gICAgdmFyIGluZGV4RmFjdG9yID0gTWF0aC5mbG9vcigoMjU2ICogMjU2ICogMjU2IC0gMSkgLyBmZWF0dXJlQ291bnQpO1xuICAgIHZhciBmZWF0dXJlc0J5WkluZGV4ID0ge307XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gZmVhdHVyZUNvdW50OyArK2kpIHtcbiAgICAgICAgdmFyIGZlYXR1cmUgPSBmZWF0dXJlc1tpIC0gMV07XG4gICAgICAgIHZhciBmZWF0dXJlU3R5bGVGdW5jdGlvbiA9IGZlYXR1cmUuZ2V0U3R5bGVGdW5jdGlvbigpIHx8IHN0eWxlRnVuY3Rpb247XG4gICAgICAgIGlmICghc3R5bGVGdW5jdGlvbikge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0eWxlcyA9IGZlYXR1cmVTdHlsZUZ1bmN0aW9uKGZlYXR1cmUsIHJlc29sdXRpb24pO1xuICAgICAgICBpZiAoIXN0eWxlcykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHN0eWxlcykpIHtcbiAgICAgICAgICAgIHN0eWxlcyA9IFtzdHlsZXNdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbmRleCA9IGkgKiBpbmRleEZhY3RvcjtcbiAgICAgICAgdmFyIGNvbG9yID0gJyMnICsgKCcwMDAwMDAnICsgaW5kZXgudG9TdHJpbmcoMTYpKS5zbGljZSgtNik7XG4gICAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IHN0eWxlcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgICB2YXIgb3JpZ2luYWxTdHlsZSA9IHN0eWxlc1tqXTtcbiAgICAgICAgICAgIHZhciBzdHlsZSA9IG9yaWdpbmFsU3R5bGUuY2xvbmUoKTtcbiAgICAgICAgICAgIHZhciBmaWxsID0gc3R5bGUuZ2V0RmlsbCgpO1xuICAgICAgICAgICAgaWYgKGZpbGwpIHtcbiAgICAgICAgICAgICAgICBmaWxsLnNldENvbG9yKGNvbG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzdHJva2UgPSBzdHlsZS5nZXRTdHJva2UoKTtcbiAgICAgICAgICAgIGlmIChzdHJva2UpIHtcbiAgICAgICAgICAgICAgICBzdHJva2Uuc2V0Q29sb3IoY29sb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3R5bGUuc2V0VGV4dCh1bmRlZmluZWQpO1xuICAgICAgICAgICAgdmFyIGltYWdlID0gb3JpZ2luYWxTdHlsZS5nZXRJbWFnZSgpO1xuICAgICAgICAgICAgaWYgKGltYWdlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGltZ1NpemUgPSBpbWFnZS5nZXRJbWFnZVNpemUoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWltZ1NpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjYW52YXNfMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgICAgICAgIGNhbnZhc18xLndpZHRoID0gaW1nU2l6ZVswXTtcbiAgICAgICAgICAgICAgICBjYW52YXNfMS5oZWlnaHQgPSBpbWdTaXplWzFdO1xuICAgICAgICAgICAgICAgIHZhciBpbWdDb250ZXh0ID0gY2FudmFzXzEuZ2V0Q29udGV4dCgnMmQnLCB7IGFscGhhOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICBpbWdDb250ZXh0LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgICAgICAgICAgICAgIHZhciBpbWcgPSBpbWdDb250ZXh0LmNhbnZhcztcbiAgICAgICAgICAgICAgICBpbWdDb250ZXh0LmZpbGxSZWN0KDAsIDAsIGltZy53aWR0aCwgaW1nLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoXzEgPSBpbWdTaXplID8gaW1nU2l6ZVswXSA6IGltZy53aWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0XzEgPSBpbWdTaXplID8gaW1nU2l6ZVsxXSA6IGltZy5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgdmFyIGljb25Db250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKHdpZHRoXzEsIGhlaWdodF8xKTtcbiAgICAgICAgICAgICAgICBpY29uQ29udGV4dC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTtcbiAgICAgICAgICAgICAgICBzdHlsZS5zZXRJbWFnZShuZXcgSWNvbih7XG4gICAgICAgICAgICAgICAgICAgIGltZzogaW1nLFxuICAgICAgICAgICAgICAgICAgICBpbWdTaXplOiBpbWdTaXplLFxuICAgICAgICAgICAgICAgICAgICBhbmNob3I6IGltYWdlLmdldEFuY2hvcigpLFxuICAgICAgICAgICAgICAgICAgICBhbmNob3JYVW5pdHM6IEljb25BbmNob3JVbml0cy5QSVhFTFMsXG4gICAgICAgICAgICAgICAgICAgIGFuY2hvcllVbml0czogSWNvbkFuY2hvclVuaXRzLlBJWEVMUyxcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiBpbWFnZS5nZXRPcmlnaW4oKSxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogaW1hZ2UuZ2V0U2l6ZSgpLFxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBpbWFnZS5nZXRPcGFjaXR5KCksXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiBpbWFnZS5nZXRTY2FsZSgpLFxuICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogaW1hZ2UuZ2V0Um90YXRpb24oKSxcbiAgICAgICAgICAgICAgICAgICAgcm90YXRlV2l0aFZpZXc6IGltYWdlLmdldFJvdGF0ZVdpdGhWaWV3KCksXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHpJbmRleCA9IE51bWJlcihzdHlsZS5nZXRaSW5kZXgoKSk7XG4gICAgICAgICAgICB2YXIgYnlHZW9tZXRyeVR5cGUgPSBmZWF0dXJlc0J5WkluZGV4W3pJbmRleF07XG4gICAgICAgICAgICBpZiAoIWJ5R2VvbWV0cnlUeXBlKSB7XG4gICAgICAgICAgICAgICAgYnlHZW9tZXRyeVR5cGUgPSB7fTtcbiAgICAgICAgICAgICAgICBmZWF0dXJlc0J5WkluZGV4W3pJbmRleF0gPSBieUdlb21ldHJ5VHlwZTtcbiAgICAgICAgICAgICAgICBieUdlb21ldHJ5VHlwZVtHZW9tZXRyeVR5cGUuUE9MWUdPTl0gPSBbXTtcbiAgICAgICAgICAgICAgICBieUdlb21ldHJ5VHlwZVtHZW9tZXRyeVR5cGUuQ0lSQ0xFXSA9IFtdO1xuICAgICAgICAgICAgICAgIGJ5R2VvbWV0cnlUeXBlW0dlb21ldHJ5VHlwZS5MSU5FX1NUUklOR10gPSBbXTtcbiAgICAgICAgICAgICAgICBieUdlb21ldHJ5VHlwZVtHZW9tZXRyeVR5cGUuUE9JTlRdID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBzdHlsZS5nZXRHZW9tZXRyeUZ1bmN0aW9uKCkoZmVhdHVyZSk7XG4gICAgICAgICAgICBpZiAoZ2VvbWV0cnkgJiYgaW50ZXJzZWN0cyhleHRlbnQsIGdlb21ldHJ5LmdldEV4dGVudCgpKSkge1xuICAgICAgICAgICAgICAgIGJ5R2VvbWV0cnlUeXBlW2dlb21ldHJ5LmdldFR5cGUoKS5yZXBsYWNlKCdNdWx0aScsICcnKV0ucHVzaChnZW9tZXRyeSwgc3R5bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHZhciB6SW5kZXhLZXlzID0gT2JqZWN0LmtleXMoZmVhdHVyZXNCeVpJbmRleClcbiAgICAgICAgLm1hcChOdW1iZXIpXG4gICAgICAgIC5zb3J0KG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24pO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHpJbmRleEtleXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgYnlHZW9tZXRyeVR5cGUgPSBmZWF0dXJlc0J5WkluZGV4W3pJbmRleEtleXNbaV1dO1xuICAgICAgICBmb3IgKHZhciB0eXBlIGluIGJ5R2VvbWV0cnlUeXBlKSB7XG4gICAgICAgICAgICB2YXIgZ2VvbUFuZFN0eWxlID0gYnlHZW9tZXRyeVR5cGVbdHlwZV07XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamogPSBnZW9tQW5kU3R5bGUubGVuZ3RoOyBqIDwgamo7IGogKz0gMikge1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLnNldFN0eWxlKGdlb21BbmRTdHlsZVtqICsgMV0pO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBrayA9IHRyYW5zZm9ybXMubGVuZ3RoOyBrIDwga2s7ICsraykge1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5zZXRUcmFuc2Zvcm0odHJhbnNmb3Jtc1trXSk7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLmRyYXdHZW9tZXRyeShnZW9tQW5kU3R5bGVbal0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9waXhlbFwiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwgY29vcmRpbmF0ZSBvbiB0aGUgaGl0XG4gKiBkZXRlY3Rpb24gY2FudmFzIGluIGNzcyBwaXhlbHMuXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uLy4uL0ZlYXR1cmVcIikuRmVhdHVyZUxpa2U+fSBmZWF0dXJlcyBGZWF0dXJlcy4gSGFzIHRvXG4gKiBtYXRjaCB0aGUgYGZlYXR1cmVzYCBhcnJheSB0aGF0IHdhcyBwYXNzZWQgdG8gYGNyZWF0ZUhpdERldGVjdGlvbkltYWdlRGF0YSgpYC5cbiAqIEBwYXJhbSB7SW1hZ2VEYXRhfSBpbWFnZURhdGEgSGl0IGRldGVjdGlvbiBpbWFnZSBkYXRhIGdlbmVyYXRlZCBieVxuICogYGNyZWF0ZUhpdERldGVjdGlvbkltYWdlRGF0YSgpYC5cbiAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4uLy4uL0ZlYXR1cmVcIikuRmVhdHVyZUxpa2U+fSBmZWF0dXJlcyBGZWF0dXJlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhpdERldGVjdChwaXhlbCwgZmVhdHVyZXMsIGltYWdlRGF0YSkge1xuICAgIHZhciByZXN1bHRGZWF0dXJlcyA9IFtdO1xuICAgIGlmIChpbWFnZURhdGEpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gKE1hdGgucm91bmQocGl4ZWxbMF0gLyAyKSArIE1hdGgucm91bmQocGl4ZWxbMV0gLyAyKSAqIGltYWdlRGF0YS53aWR0aCkgKlxuICAgICAgICAgICAgNDtcbiAgICAgICAgdmFyIHIgPSBpbWFnZURhdGEuZGF0YVtpbmRleF07XG4gICAgICAgIHZhciBnID0gaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAxXTtcbiAgICAgICAgdmFyIGIgPSBpbWFnZURhdGEuZGF0YVtpbmRleCArIDJdO1xuICAgICAgICB2YXIgaSA9IGIgKyAyNTYgKiAoZyArIDI1NiAqIHIpO1xuICAgICAgICB2YXIgaW5kZXhGYWN0b3IgPSBNYXRoLmZsb29yKCgyNTYgKiAyNTYgKiAyNTYgLSAxKSAvIGZlYXR1cmVzLmxlbmd0aCk7XG4gICAgICAgIGlmIChpICYmIGkgJSBpbmRleEZhY3RvciA9PT0gMCkge1xuICAgICAgICAgICAgcmVzdWx0RmVhdHVyZXMucHVzaChmZWF0dXJlc1tpIC8gaW5kZXhGYWN0b3IgLSAxXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdEZlYXR1cmVzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGl0ZGV0ZWN0LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvVmVjdG9yXG4gKi9cbmltcG9ydCBCYXNlVmVjdG9yTGF5ZXIgZnJvbSAnLi9CYXNlVmVjdG9yLmpzJztcbmltcG9ydCBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyIGZyb20gJy4uL3JlbmRlcmVyL2NhbnZhcy9WZWN0b3JMYXllci5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFZlY3RvciBkYXRhIHRoYXQgaXMgcmVuZGVyZWQgY2xpZW50LXNpZGUuXG4gKiBOb3RlIHRoYXQgYW55IHByb3BlcnR5IHNldCBpbiB0aGUgb3B0aW9ucyBpcyBzZXQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0fVxuICogcHJvcGVydHkgb24gdGhlIGxheWVyIG9iamVjdDsgZm9yIGV4YW1wbGUsIHNldHRpbmcgYHRpdGxlOiAnTXkgVGl0bGUnYCBpbiB0aGVcbiAqIG9wdGlvbnMgbWVhbnMgdGhhdCBgdGl0bGVgIGlzIG9ic2VydmFibGUsIGFuZCBoYXMgZ2V0L3NldCBhY2Nlc3NvcnMuXG4gKlxuICogQGV4dGVuZHMge0Jhc2VWZWN0b3JMYXllcjxpbXBvcnQoXCIuLi9zb3VyY2UvVmVjdG9yLmpzXCIpLmRlZmF1bHQ+fVxuICogQGFwaVxuICovXG52YXIgVmVjdG9yTGF5ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFZlY3RvckxheWVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9CYXNlVmVjdG9yLmpzXCIpLk9wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFZlY3RvckxheWVyKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvcHRfb3B0aW9ucykgfHwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgcmVuZGVyZXIgZm9yIHRoaXMgbGF5ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcmVuZGVyZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gQSBsYXllciByZW5kZXJlci5cbiAgICAgKi9cbiAgICBWZWN0b3JMYXllci5wcm90b3R5cGUuY3JlYXRlUmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlcih0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBWZWN0b3JMYXllcjtcbn0oQmFzZVZlY3RvckxheWVyKSk7XG5leHBvcnQgZGVmYXVsdCBWZWN0b3JMYXllcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZlY3Rvci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3RydWN0cy9SQnVzaFxuICovXG5pbXBvcnQgUkJ1c2hfIGZyb20gJ3JidXNoJztcbmltcG9ydCB7IGNyZWF0ZU9yVXBkYXRlLCBlcXVhbHMgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBpc0VtcHR5IH0gZnJvbSAnLi4vb2JqLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRW50cnlcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaW5YXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWluWVxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1heFhcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtYXhZXG4gKiBAcHJvcGVydHkge09iamVjdH0gW3ZhbHVlXVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFdyYXBwZXIgYXJvdW5kIHRoZSBSQnVzaCBieSBWbGFkaW1pciBBZ2Fmb25raW4uXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21vdXJuZXIvcmJ1c2guXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqL1xudmFyIFJCdXNoID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X21heEVudHJpZXMgTWF4IGVudHJpZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUkJ1c2gob3B0X21heEVudHJpZXMpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJidXNoXyA9IG5ldyBSQnVzaF8ob3B0X21heEVudHJpZXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBtYXBwaW5nIGJldHdlZW4gdGhlIG9iamVjdHMgYWRkZWQgdG8gdGhpcyByYnVzaCB3cmFwcGVyXG4gICAgICAgICAqIGFuZCB0aGUgb2JqZWN0cyB0aGF0IGFyZSBhY3R1YWxseSBhZGRlZCB0byB0aGUgaW50ZXJuYWwgcmJ1c2guXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBFbnRyeT59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLml0ZW1zXyA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnNlcnQgYSB2YWx1ZSBpbnRvIHRoZSBSQnVzaC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtUfSB2YWx1ZSBWYWx1ZS5cbiAgICAgKi9cbiAgICBSQnVzaC5wcm90b3R5cGUuaW5zZXJ0ID0gZnVuY3Rpb24gKGV4dGVudCwgdmFsdWUpIHtcbiAgICAgICAgLyoqIEB0eXBlIHtFbnRyeX0gKi9cbiAgICAgICAgdmFyIGl0ZW0gPSB7XG4gICAgICAgICAgICBtaW5YOiBleHRlbnRbMF0sXG4gICAgICAgICAgICBtaW5ZOiBleHRlbnRbMV0sXG4gICAgICAgICAgICBtYXhYOiBleHRlbnRbMl0sXG4gICAgICAgICAgICBtYXhZOiBleHRlbnRbM10sXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmJ1c2hfLmluc2VydChpdGVtKTtcbiAgICAgICAgdGhpcy5pdGVtc19bZ2V0VWlkKHZhbHVlKV0gPSBpdGVtO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQnVsay1pbnNlcnQgdmFsdWVzIGludG8gdGhlIFJCdXNoLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudD59IGV4dGVudHMgRXh0ZW50cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5PFQ+fSB2YWx1ZXMgVmFsdWVzLlxuICAgICAqL1xuICAgIFJCdXNoLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKGV4dGVudHMsIHZhbHVlcykge1xuICAgICAgICB2YXIgaXRlbXMgPSBuZXcgQXJyYXkodmFsdWVzLmxlbmd0aCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgdmFyIGV4dGVudCA9IGV4dGVudHNbaV07XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZXNbaV07XG4gICAgICAgICAgICAvKiogQHR5cGUge0VudHJ5fSAqL1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB7XG4gICAgICAgICAgICAgICAgbWluWDogZXh0ZW50WzBdLFxuICAgICAgICAgICAgICAgIG1pblk6IGV4dGVudFsxXSxcbiAgICAgICAgICAgICAgICBtYXhYOiBleHRlbnRbMl0sXG4gICAgICAgICAgICAgICAgbWF4WTogZXh0ZW50WzNdLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpdGVtc1tpXSA9IGl0ZW07XG4gICAgICAgICAgICB0aGlzLml0ZW1zX1tnZXRVaWQodmFsdWUpXSA9IGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yYnVzaF8ubG9hZChpdGVtcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSB2YWx1ZSBmcm9tIHRoZSBSQnVzaC5cbiAgICAgKiBAcGFyYW0ge1R9IHZhbHVlIFZhbHVlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFJlbW92ZWQuXG4gICAgICovXG4gICAgUkJ1c2gucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgdWlkID0gZ2V0VWlkKHZhbHVlKTtcbiAgICAgICAgLy8gZ2V0IHRoZSBvYmplY3QgaW4gd2hpY2ggdGhlIHZhbHVlIHdhcyB3cmFwcGVkIHdoZW4gYWRkaW5nIHRvIHRoZVxuICAgICAgICAvLyBpbnRlcm5hbCByYnVzaC4gdGhlbiB1c2UgdGhhdCBvYmplY3QgdG8gZG8gdGhlIHJlbW92YWwuXG4gICAgICAgIHZhciBpdGVtID0gdGhpcy5pdGVtc19bdWlkXTtcbiAgICAgICAgZGVsZXRlIHRoaXMuaXRlbXNfW3VpZF07XG4gICAgICAgIHJldHVybiB0aGlzLnJidXNoXy5yZW1vdmUoaXRlbSkgIT09IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGV4dGVudCBvZiBhIHZhbHVlIGluIHRoZSBSQnVzaC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtUfSB2YWx1ZSBWYWx1ZS5cbiAgICAgKi9cbiAgICBSQnVzaC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGV4dGVudCwgdmFsdWUpIHtcbiAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLml0ZW1zX1tnZXRVaWQodmFsdWUpXTtcbiAgICAgICAgdmFyIGJib3ggPSBbaXRlbS5taW5YLCBpdGVtLm1pblksIGl0ZW0ubWF4WCwgaXRlbS5tYXhZXTtcbiAgICAgICAgaWYgKCFlcXVhbHMoYmJveCwgZXh0ZW50KSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUodmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5pbnNlcnQoZXh0ZW50LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiBhbGwgdmFsdWVzIGluIHRoZSBSQnVzaC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxUPn0gQWxsLlxuICAgICAqL1xuICAgIFJCdXNoLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpdGVtcyA9IHRoaXMucmJ1c2hfLmFsbCgpO1xuICAgICAgICByZXR1cm4gaXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS52YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYWxsIHZhbHVlcyBpbiB0aGUgZ2l2ZW4gZXh0ZW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxUPn0gQWxsIGluIGV4dGVudC5cbiAgICAgKi9cbiAgICBSQnVzaC5wcm90b3R5cGUuZ2V0SW5FeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIC8qKiBAdHlwZSB7RW50cnl9ICovXG4gICAgICAgIHZhciBiYm94ID0ge1xuICAgICAgICAgICAgbWluWDogZXh0ZW50WzBdLFxuICAgICAgICAgICAgbWluWTogZXh0ZW50WzFdLFxuICAgICAgICAgICAgbWF4WDogZXh0ZW50WzJdLFxuICAgICAgICAgICAgbWF4WTogZXh0ZW50WzNdLFxuICAgICAgICB9O1xuICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLnJidXNoXy5zZWFyY2goYmJveCk7XG4gICAgICAgIHJldHVybiBpdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVtLnZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhbGxzIGEgY2FsbGJhY2sgZnVuY3Rpb24gd2l0aCBlYWNoIHZhbHVlIGluIHRoZSB0cmVlLlxuICAgICAqIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIGEgdHJ1dGh5IHZhbHVlLCB0aGlzIHZhbHVlIGlzIHJldHVybmVkIHdpdGhvdXRcbiAgICAgKiBjaGVja2luZyB0aGUgcmVzdCBvZiB0aGUgdHJlZS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFQpOiAqfSBjYWxsYmFjayBDYWxsYmFjay5cbiAgICAgKiBAcmV0dXJuIHsqfSBDYWxsYmFjayByZXR1cm4gdmFsdWUuXG4gICAgICovXG4gICAgUkJ1c2gucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaF8odGhpcy5nZXRBbGwoKSwgY2FsbGJhY2spO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2FsbHMgYSBjYWxsYmFjayBmdW5jdGlvbiB3aXRoIGVhY2ggdmFsdWUgaW4gdGhlIHByb3ZpZGVkIGV4dGVudC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihUKTogKn0gY2FsbGJhY2sgQ2FsbGJhY2suXG4gICAgICogQHJldHVybiB7Kn0gQ2FsbGJhY2sgcmV0dXJuIHZhbHVlLlxuICAgICAqL1xuICAgIFJCdXNoLnByb3RvdHlwZS5mb3JFYWNoSW5FeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50LCBjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoXyh0aGlzLmdldEluRXh0ZW50KGV4dGVudCksIGNhbGxiYWNrKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8VD59IHZhbHVlcyBWYWx1ZXMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihUKTogKn0gY2FsbGJhY2sgQ2FsbGJhY2suXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcmV0dXJuIHsqfSBDYWxsYmFjayByZXR1cm4gdmFsdWUuXG4gICAgICovXG4gICAgUkJ1c2gucHJvdG90eXBlLmZvckVhY2hfID0gZnVuY3Rpb24gKHZhbHVlcywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBjYWxsYmFjayh2YWx1ZXNbaV0pO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGVtcHR5LlxuICAgICAqL1xuICAgIFJCdXNoLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gaXNFbXB0eSh0aGlzLml0ZW1zXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYWxsIHZhbHVlcyBmcm9tIHRoZSBSQnVzaC5cbiAgICAgKi9cbiAgICBSQnVzaC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmJ1c2hfLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuaXRlbXNfID0ge307XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQ9fSBvcHRfZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICovXG4gICAgUkJ1c2gucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uIChvcHRfZXh0ZW50KSB7XG4gICAgICAgIHZhciBkYXRhID0gdGhpcy5yYnVzaF8udG9KU09OKCk7XG4gICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZShkYXRhLm1pblgsIGRhdGEubWluWSwgZGF0YS5tYXhYLCBkYXRhLm1heFksIG9wdF9leHRlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtSQnVzaH0gcmJ1c2ggUi1UcmVlLlxuICAgICAqL1xuICAgIFJCdXNoLnByb3RvdHlwZS5jb25jYXQgPSBmdW5jdGlvbiAocmJ1c2gpIHtcbiAgICAgICAgdGhpcy5yYnVzaF8ubG9hZChyYnVzaC5yYnVzaF8uYWxsKCkpO1xuICAgICAgICBmb3IgKHZhciBpIGluIHJidXNoLml0ZW1zXykge1xuICAgICAgICAgICAgdGhpcy5pdGVtc19baV0gPSByYnVzaC5pdGVtc19baV07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBSQnVzaDtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBSQnVzaDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJCdXNoLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1NvdXJjZVxuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IFNvdXJjZVN0YXRlIGZyb20gJy4vU3RhdGUuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7IGdldCBhcyBnZXRQcm9qZWN0aW9uIH0gZnJvbSAnLi4vcHJvai5qcyc7XG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3RyaW5nIG9yIGFuIGFycmF5IG9mIHN0cmluZ3MgcmVwcmVzZW50aW5nIHNvdXJjZVxuICogYXR0cmlidXRpb25zLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZSk6IChzdHJpbmd8QXJyYXk8c3RyaW5nPil9IEF0dHJpYnV0aW9uXG4gKi9cbi8qKlxuICogQSB0eXBlIHRoYXQgY2FuIGJlIHVzZWQgdG8gcHJvdmlkZSBhdHRyaWJ1dGlvbiBpbmZvcm1hdGlvbiBmb3IgZGF0YSBzb3VyY2VzLlxuICpcbiAqIEl0IHJlcHJlc2VudHMgZWl0aGVyXG4gKiAqIGEgc2ltcGxlIHN0cmluZyAoZS5nLiBgJ8KpIEFjbWUgSW5jLidgKVxuICogKiBhbiBhcnJheSBvZiBzaW1wbGUgc3RyaW5ncyAoZS5nLiBgWyfCqSBBY21lIEluYy4nLCAnwqkgQmFjbWUgSW5jLiddYClcbiAqICogYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdHJpbmcgb3IgYXJyYXkgb2Ygc3RyaW5ncyAoe0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvU291cmNlfkF0dHJpYnV0aW9ufSlcbiAqXG4gKiBAdHlwZWRlZiB7c3RyaW5nfEFycmF5PHN0cmluZz58QXR0cmlidXRpb259IEF0dHJpYnV0aW9uTGlrZVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7QXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24uIERlZmF1bHQgaXMgdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBbc3RhdGU9J3JlYWR5J11cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYPWZhbHNlXVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEJhc2UgY2xhc3MgZm9yIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXJ9IHNvdXJjZXMuXG4gKlxuICogQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIHRyaWdnZXJlZCB3aGVuIHRoZSBzdGF0ZSBvZiB0aGUgc291cmNlIGNoYW5nZXMuXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xudmFyIFNvdXJjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU291cmNlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBTb3VyY2Ugb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTb3VyY2Uob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucHJvamVjdGlvbl8gPSBnZXRQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbik7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0F0dHJpYnV0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYXR0cmlidXRpb25zXyA9IGFkYXB0QXR0cmlidXRpb25zKG9wdGlvbnMuYXR0cmlidXRpb25zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYXR0cmlidXRpb25zQ29sbGFwc2libGVfID1cbiAgICAgICAgICAgIG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZVxuICAgICAgICAgICAgICAgIDogdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgc291cmNlIGlzIGN1cnJlbnRseSBsb2FkaW5nIGRhdGEuIFNvdXJjZXMgdGhhdCBkZWZlciBsb2FkaW5nIHRvIHRoZVxuICAgICAgICAgKiBtYXAncyB0aWxlIHF1ZXVlIG5ldmVyIHNldCB0aGlzIHRvIGB0cnVlYC5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhdGVfID1cbiAgICAgICAgICAgIG9wdGlvbnMuc3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc3RhdGUgOiBTb3VyY2VTdGF0ZS5SRUFEWTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMud3JhcFhfID0gb3B0aW9ucy53cmFwWCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy53cmFwWCA6IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYXR0cmlidXRpb24gZnVuY3Rpb24gZm9yIHRoZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7P0F0dHJpYnV0aW9ufSBBdHRyaWJ1dGlvbiBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLmdldEF0dHJpYnV0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRpb25zXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5nZXRBdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRpb25zQ29sbGFwc2libGVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwcm9qZWN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IFByb2plY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0UHJvamVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvamVjdGlvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fHVuZGVmaW5lZH0gUmVzb2x1dGlvbnMuXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UsIHNlZSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9TdGF0ZX5TdGF0ZX0gZm9yIHBvc3NpYmxlIHN0YXRlcy5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFN0YXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufHVuZGVmaW5lZH0gV3JhcCBYLlxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0V3JhcFggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBYXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9IENvbnRleHQgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLmdldENvbnRleHRPcHRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVmcmVzaGVzIHRoZSBzb3VyY2UuIFRoZSBzb3VyY2Ugd2lsbCBiZSBjbGVhcmVkLCBhbmQgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIgd2lsbCBiZSByZWxvYWRlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgYXR0cmlidXRpb25zIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtBdHRyaWJ1dGlvbkxpa2V8dW5kZWZpbmVkfSBhdHRyaWJ1dGlvbnMgQXR0cmlidXRpb25zLlxuICAgICAqICAgICBDYW4gYmUgcGFzc2VkIGFzIGBzdHJpbmdgLCBgQXJyYXk8c3RyaW5nPmAsIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1NvdXJjZX5BdHRyaWJ1dGlvbn0sXG4gICAgICogICAgIG9yIGB1bmRlZmluZWRgLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLnNldEF0dHJpYnV0aW9ucyA9IGZ1bmN0aW9uIChhdHRyaWJ1dGlvbnMpIHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGlvbnNfID0gYWRhcHRBdHRyaWJ1dGlvbnMoYXR0cmlidXRpb25zKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1N0YXRlLmpzXCIpLmRlZmF1bHR9IHN0YXRlIFN0YXRlLlxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuc2V0U3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZV8gPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICByZXR1cm4gU291cmNlO1xufShCYXNlT2JqZWN0KSk7XG4vKipcbiAqIFR1cm5zIHRoZSBhdHRyaWJ1dGlvbnMgb3B0aW9uIGludG8gYW4gYXR0cmlidXRpb25zIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtBdHRyaWJ1dGlvbkxpa2V8dW5kZWZpbmVkfSBhdHRyaWJ1dGlvbkxpa2UgVGhlIGF0dHJpYnV0aW9uIG9wdGlvbi5cbiAqIEByZXR1cm4gez9BdHRyaWJ1dGlvbn0gQW4gYXR0cmlidXRpb24gZnVuY3Rpb24gKG9yIG51bGwpLlxuICovXG5mdW5jdGlvbiBhZGFwdEF0dHJpYnV0aW9ucyhhdHRyaWJ1dGlvbkxpa2UpIHtcbiAgICBpZiAoIWF0dHJpYnV0aW9uTGlrZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXR0cmlidXRpb25MaWtlKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBhdHRyaWJ1dGlvbkxpa2U7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYXR0cmlidXRpb25MaWtlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGlvbkxpa2U7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICByZXR1cm4gW2F0dHJpYnV0aW9uTGlrZV07XG4gICAgfTtcbn1cbmV4cG9ydCBkZWZhdWx0IFNvdXJjZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNvdXJjZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1ZlY3RvckV2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIGZlYXR1cmUgaXMgYWRkZWQgdG8gdGhlIHNvdXJjZS5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3IuVmVjdG9yU291cmNlRXZlbnQjYWRkZmVhdHVyZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBBRERGRUFUVVJFOiAnYWRkZmVhdHVyZScsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSBmZWF0dXJlIGlzIHVwZGF0ZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yLlZlY3RvclNvdXJjZUV2ZW50I2NoYW5nZWZlYXR1cmVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ0hBTkdFRkVBVFVSRTogJ2NoYW5nZWZlYXR1cmUnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIHRoZSBjbGVhciBtZXRob2QgaXMgY2FsbGVkIG9uIHRoZSBzb3VyY2UuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yLlZlY3RvclNvdXJjZUV2ZW50I2NsZWFyXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENMRUFSOiAnY2xlYXInLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgZmVhdHVyZSBpcyByZW1vdmVkIGZyb20gdGhlIHNvdXJjZS5cbiAgICAgKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yI2NsZWFyIHNvdXJjZS5jbGVhcigpfSBmb3IgZXhjZXB0aW9ucy5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3IuVmVjdG9yU291cmNlRXZlbnQjcmVtb3ZlZmVhdHVyZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBSRU1PVkVGRUFUVVJFOiAncmVtb3ZlZmVhdHVyZScsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gZmVhdHVyZXMgc3RhcnRzIGxvYWRpbmcuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yLlZlY3RvclNvdXJjZUV2ZW50I2ZlYXR1cmVzbG9hZHN0YXJ0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEZFQVRVUkVTTE9BRFNUQVJUOiAnZmVhdHVyZXNsb2Fkc3RhcnQnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGZlYXR1cmVzIGZpbmlzaGVzIGxvYWRpbmcuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yLlZlY3RvclNvdXJjZUV2ZW50I2ZlYXR1cmVzbG9hZGVuZFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBGRUFUVVJFU0xPQURFTkQ6ICdmZWF0dXJlc2xvYWRlbmQnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBpZiBmZWF0dXJlIGxvYWRpbmcgcmVzdWx0cyBpbiBhbiBlcnJvci5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3IuVmVjdG9yU291cmNlRXZlbnQjZmVhdHVyZXNsb2FkZXJyb3JcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgRkVBVFVSRVNMT0FERVJST1I6ICdmZWF0dXJlc2xvYWRlcnJvcicsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yRXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9sb2FkaW5nc3RyYXRlZ3lcbiAqL1xuLyoqXG4gKiBTdHJhdGVneSBmdW5jdGlvbiBmb3IgbG9hZGluZyBhbGwgZmVhdHVyZXMgd2l0aCBhIHNpbmdsZSByZXF1ZXN0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50Pn0gRXh0ZW50cy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFsbChleHRlbnQsIHJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gW1stSW5maW5pdHksIC1JbmZpbml0eSwgSW5maW5pdHksIEluZmluaXR5XV07XG59XG4vKipcbiAqIFN0cmF0ZWd5IGZ1bmN0aW9uIGZvciBsb2FkaW5nIGZlYXR1cmVzIGJhc2VkIG9uIHRoZSB2aWV3J3MgZXh0ZW50IGFuZFxuICogcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudD59IEV4dGVudHMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiYm94KGV4dGVudCwgcmVzb2x1dGlvbikge1xuICAgIHJldHVybiBbZXh0ZW50XTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHN0cmF0ZWd5IGZ1bmN0aW9uIGZvciBsb2FkaW5nIGZlYXR1cmVzIGJhc2VkIG9uIGEgdGlsZSBncmlkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVHcmlkIFRpbGUgZ3JpZC5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKGltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudCwgbnVtYmVyKTogQXJyYXk8aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50Pn0gTG9hZGluZyBzdHJhdGVneS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRpbGUodGlsZUdyaWQpIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50Pn0gRXh0ZW50cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAoZXh0ZW50LCByZXNvbHV0aW9uKSB7XG4gICAgICAgIHZhciB6ID0gdGlsZUdyaWQuZ2V0WkZvclJlc29sdXRpb24ocmVzb2x1dGlvbik7XG4gICAgICAgIHZhciB0aWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgeik7XG4gICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50Pn0gKi9cbiAgICAgICAgdmFyIGV4dGVudHMgPSBbXTtcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9ICovXG4gICAgICAgIHZhciB0aWxlQ29vcmQgPSBbeiwgMCwgMF07XG4gICAgICAgIGZvciAodGlsZUNvb3JkWzFdID0gdGlsZVJhbmdlLm1pblg7IHRpbGVDb29yZFsxXSA8PSB0aWxlUmFuZ2UubWF4WDsgKyt0aWxlQ29vcmRbMV0pIHtcbiAgICAgICAgICAgIGZvciAodGlsZUNvb3JkWzJdID0gdGlsZVJhbmdlLm1pblk7IHRpbGVDb29yZFsyXSA8PSB0aWxlUmFuZ2UubWF4WTsgKyt0aWxlQ29vcmRbMl0pIHtcbiAgICAgICAgICAgICAgICBleHRlbnRzLnB1c2godGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBleHRlbnRzO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9hZGluZ3N0cmF0ZWd5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9mb3JtYXQvRm9ybWF0VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBBUlJBWV9CVUZGRVI6ICdhcnJheWJ1ZmZlcicsXG4gICAgSlNPTjogJ2pzb24nLFxuICAgIFRFWFQ6ICd0ZXh0JyxcbiAgICBYTUw6ICd4bWwnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZvcm1hdFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ZlYXR1cmVsb2FkZXJcbiAqL1xuaW1wb3J0IEZvcm1hdFR5cGUgZnJvbSAnLi9mb3JtYXQvRm9ybWF0VHlwZS5qcyc7XG5pbXBvcnQgeyBWT0lEIH0gZnJvbSAnLi9mdW5jdGlvbnMuanMnO1xuLyoqXG4gKlxuICogQHR5cGUge2Jvb2xlYW59XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgd2l0aENyZWRlbnRpYWxzID0gZmFsc2U7XG4vKipcbiAqIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1ZlY3Rvcn0gc291cmNlcyB1c2UgYSBmdW5jdGlvbiBvZiB0aGlzIHR5cGUgdG9cbiAqIGxvYWQgZmVhdHVyZXMuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL2V4dGVudH5FeHRlbnR9IHJlcHJlc2VudGluZyB0aGUgYXJlYSB0byBiZSBsb2FkZWQsXG4gKiBhIGB7bnVtYmVyfWAgcmVwcmVzZW50aW5nIHRoZSByZXNvbHV0aW9uIChtYXAgdW5pdHMgcGVyIHBpeGVsKSwgYW5cbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufSBmb3IgdGhlIHByb2plY3Rpb24gYW5kIHN1Y2Nlc3MgYW5kIGZhaWx1cmUgY2FsbGJhY2tzIGFzXG4gKiBhcmd1bWVudHMuIGB0aGlzYCB3aXRoaW4gdGhlIGZ1bmN0aW9uIGlzIGJvdW5kIHRvIHRoZVxuICoge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yfSBpdCdzIGNhbGxlZCBmcm9tLlxuICpcbiAqIFRoZSBmdW5jdGlvbiBpcyByZXNwb25zaWJsZSBmb3IgbG9hZGluZyB0aGUgZmVhdHVyZXMgYW5kIGFkZGluZyB0aGVtIHRvIHRoZVxuICogc291cmNlLlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKHRoaXM6KGltcG9ydChcIi4vc291cmNlL1ZlY3RvclwiKS5kZWZhdWx0fGltcG9ydChcIi4vVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0KSxcbiAqICAgICAgICAgICBpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnQsXG4gKiAgICAgICAgICAgbnVtYmVyLFxuICogICAgICAgICAgIGltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHQsXG4gKiAgICAgICAgICAgZnVuY3Rpb24oQXJyYXk8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+KTogdm9pZD0sXG4gKiAgICAgICAgICAgZnVuY3Rpb24oKTogdm9pZD0pOiB2b2lkfSBGZWF0dXJlTG9hZGVyXG4gKiBAYXBpXG4gKi9cbi8qKlxuICoge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yfSBzb3VyY2VzIHVzZSBhIGZ1bmN0aW9uIG9mIHRoaXMgdHlwZSB0b1xuICogZ2V0IHRoZSB1cmwgdG8gbG9hZCBmZWF0dXJlcyBmcm9tLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9leHRlbnR+RXh0ZW50fSByZXByZXNlbnRpbmcgdGhlIGFyZWFcbiAqIHRvIGJlIGxvYWRlZCwgYSBge251bWJlcn1gIHJlcHJlc2VudGluZyB0aGUgcmVzb2x1dGlvbiAobWFwIHVuaXRzIHBlciBwaXhlbClcbiAqIGFuZCBhbiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn0gZm9yIHRoZSBwcm9qZWN0aW9uICBhc1xuICogYXJndW1lbnRzIGFuZCByZXR1cm5zIGEgYHtzdHJpbmd9YCByZXByZXNlbnRpbmcgdGhlIFVSTC5cbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnQsIG51bWJlciwgaW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdCk6IHN0cmluZ30gRmVhdHVyZVVybEZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd8RmVhdHVyZVVybEZ1bmN0aW9ufSB1cmwgRmVhdHVyZSBVUkwgc2VydmljZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9mb3JtYXQvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmb3JtYXQgRmVhdHVyZSBmb3JtYXQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oQXJyYXk8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+LCBpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0KTogdm9pZH0gc3VjY2VzcyBTdWNjZXNzXG4gKiAgICAgIEZ1bmN0aW9uIGNhbGxlZCB3aXRoIHRoZSBsb2FkZWQgZmVhdHVyZXMgYW5kIG9wdGlvbmFsbHkgd2l0aCB0aGUgZGF0YSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtmdW5jdGlvbigpOiB2b2lkfSBmYWlsdXJlIEZhaWx1cmVcbiAqICAgICAgRnVuY3Rpb24gY2FsbGVkIHdoZW4gbG9hZGluZyBmYWlsZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2FkRmVhdHVyZXNYaHIodXJsLCBmb3JtYXQsIGV4dGVudCwgcmVzb2x1dGlvbiwgcHJvamVjdGlvbiwgc3VjY2VzcywgZmFpbHVyZSkge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignR0VUJywgdHlwZW9mIHVybCA9PT0gJ2Z1bmN0aW9uJyA/IHVybChleHRlbnQsIHJlc29sdXRpb24sIHByb2plY3Rpb24pIDogdXJsLCB0cnVlKTtcbiAgICBpZiAoZm9ybWF0LmdldFR5cGUoKSA9PSBGb3JtYXRUeXBlLkFSUkFZX0JVRkZFUikge1xuICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICB9XG4gICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHdpdGhDcmVkZW50aWFscztcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCBFdmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gc3RhdHVzIHdpbGwgYmUgMCBmb3IgZmlsZTovLyB1cmxzXG4gICAgICAgIGlmICgheGhyLnN0YXR1cyB8fCAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDMwMCkpIHtcbiAgICAgICAgICAgIHZhciB0eXBlID0gZm9ybWF0LmdldFR5cGUoKTtcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7RG9jdW1lbnR8Tm9kZXxPYmplY3R8c3RyaW5nfHVuZGVmaW5lZH0gKi9cbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAodHlwZSA9PSBGb3JtYXRUeXBlLkpTT04gfHwgdHlwZSA9PSBGb3JtYXRUeXBlLlRFWFQpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2UgPSB4aHIucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PSBGb3JtYXRUeXBlLlhNTCkge1xuICAgICAgICAgICAgICAgIHNvdXJjZSA9IHhoci5yZXNwb25zZVhNTDtcbiAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHhoci5yZXNwb25zZVRleHQsICdhcHBsaWNhdGlvbi94bWwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09IEZvcm1hdFR5cGUuQVJSQVlfQlVGRkVSKSB7XG4gICAgICAgICAgICAgICAgc291cmNlID0gLyoqIEB0eXBlIHtBcnJheUJ1ZmZlcn0gKi8gKHhoci5yZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgICAgICAgc3VjY2VzcyhcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUge0FycmF5PGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0Pn0gKi9cbiAgICAgICAgICAgICAgICAoZm9ybWF0LnJlYWRGZWF0dXJlcyhzb3VyY2UsIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW50OiBleHRlbnQsXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVQcm9qZWN0aW9uOiBwcm9qZWN0aW9uLFxuICAgICAgICAgICAgICAgIH0pKSwgZm9ybWF0LnJlYWRQcm9qZWN0aW9uKHNvdXJjZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZmFpbHVyZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZmFpbHVyZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHhoci5vbmVycm9yID0gZmFpbHVyZTtcbiAgICB4aHIuc2VuZCgpO1xufVxuLyoqXG4gKiBDcmVhdGUgYW4gWEhSIGZlYXR1cmUgbG9hZGVyIGZvciBhIGB1cmxgIGFuZCBgZm9ybWF0YC4gVGhlIGZlYXR1cmUgbG9hZGVyXG4gKiBsb2FkcyBmZWF0dXJlcyAod2l0aCBYSFIpLCBwYXJzZXMgdGhlIGZlYXR1cmVzLCBhbmQgYWRkcyB0aGVtIHRvIHRoZVxuICogdmVjdG9yIHNvdXJjZS5cbiAqIEBwYXJhbSB7c3RyaW5nfEZlYXR1cmVVcmxGdW5jdGlvbn0gdXJsIEZlYXR1cmUgVVJMIHNlcnZpY2UuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZm9ybWF0L0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZm9ybWF0IEZlYXR1cmUgZm9ybWF0LlxuICogQHJldHVybiB7RmVhdHVyZUxvYWRlcn0gVGhlIGZlYXR1cmUgbG9hZGVyLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24geGhyKHVybCwgZm9ybWF0KSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IHZvaWQ9fSBzdWNjZXNzIFN1Y2Nlc3NcbiAgICAgKiAgICAgIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIGxvYWRpbmcgc3VjY2VlZGVkLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogdm9pZD19IGZhaWx1cmUgRmFpbHVyZVxuICAgICAqICAgICAgRnVuY3Rpb24gY2FsbGVkIHdoZW4gbG9hZGluZyBmYWlsZWQuXG4gICAgICogQHRoaXMge2ltcG9ydChcIi4vc291cmNlL1ZlY3RvclwiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXh0ZW50LCByZXNvbHV0aW9uLCBwcm9qZWN0aW9uLCBzdWNjZXNzLCBmYWlsdXJlKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vc291cmNlL1ZlY3RvclwiKS5kZWZhdWx0fSAqLyAodGhpcyk7XG4gICAgICAgIGxvYWRGZWF0dXJlc1hocih1cmwsIGZvcm1hdCwgZXh0ZW50LCByZXNvbHV0aW9uLCBwcm9qZWN0aW9uLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+fSBmZWF0dXJlcyBUaGUgbG9hZGVkIGZlYXR1cmVzLlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IGRhdGFQcm9qZWN0aW9uIERhdGFcbiAgICAgICAgICogcHJvamVjdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChmZWF0dXJlcywgZGF0YVByb2plY3Rpb24pIHtcbiAgICAgICAgICAgIGlmIChzdWNjZXNzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzKGZlYXR1cmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNvdXJjZS5hZGRGZWF0dXJlcyhmZWF0dXJlcyk7XG4gICAgICAgIH0sIFxuICAgICAgICAvKiBGSVhNRSBoYW5kbGUgZXJyb3IgKi8gZmFpbHVyZSA/IGZhaWx1cmUgOiBWT0lEKTtcbiAgICB9O1xufVxuLyoqXG4gKiBTZXR0ZXIgZm9yIHRoZSB3aXRoQ3JlZGVudGlhbHMgY29uZmlndXJhdGlvbiBmb3IgdGhlIFhIUi5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHhocldpdGhDcmVkZW50aWFscyBUaGUgdmFsdWUgb2Ygd2l0aENyZWRlbnRpYWxzIHRvIHNldC5cbiAqIENvbXBhcmUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1hNTEh0dHBSZXF1ZXN0L1xuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0V2l0aENyZWRlbnRpYWxzKHhocldpdGhDcmVkZW50aWFscykge1xuICAgIHdpdGhDcmVkZW50aWFscyA9IHhocldpdGhDcmVkZW50aWFscztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZlYXR1cmVsb2FkZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9WZWN0b3JcbiAqL1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4uL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IENvbGxlY3Rpb25FdmVudFR5cGUgZnJvbSAnLi4vQ29sbGVjdGlvbkV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4uL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUkJ1c2ggZnJvbSAnLi4vc3RydWN0cy9SQnVzaC5qcyc7XG5pbXBvcnQgU291cmNlIGZyb20gJy4vU291cmNlLmpzJztcbmltcG9ydCBTb3VyY2VTdGF0ZSBmcm9tICcuL1N0YXRlLmpzJztcbmltcG9ydCBWZWN0b3JFdmVudFR5cGUgZnJvbSAnLi9WZWN0b3JFdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgVFJVRSwgVk9JRCB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBhbGwgYXMgYWxsU3RyYXRlZ3kgfSBmcm9tICcuLi9sb2FkaW5nc3RyYXRlZ3kuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBjb250YWluc0V4dGVudCwgZXF1YWxzIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGV4dGVuZCB9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgZ2V0VmFsdWVzLCBpc0VtcHR5IH0gZnJvbSAnLi4vb2JqLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgeyB4aHIgfSBmcm9tICcuLi9mZWF0dXJlbG9hZGVyLmpzJztcbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvZXh0ZW50fkV4dGVudH0gYW5kIGEgcmVzb2x1dGlvbiBhcyBhcmd1bWVudHMsIGFuZFxuICogcmV0dXJucyBhbiBhcnJheSBvZiB7QGxpbmsgbW9kdWxlOm9sL2V4dGVudH5FeHRlbnR9IHdpdGggdGhlIGV4dGVudHMgdG8gbG9hZC4gVXN1YWxseSB0aGlzXG4gKiBpcyBvbmUgb2YgdGhlIHN0YW5kYXJkIHtAbGluayBtb2R1bGU6b2wvbG9hZGluZ3N0cmF0ZWd5fSBzdHJhdGVnaWVzLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50LCBudW1iZXIpOiBBcnJheTxpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50Pn0gTG9hZGluZ1N0cmF0ZWd5XG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yfSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZiB0aGlzXG4gKiB0eXBlLlxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5XG4gKi9cbnZhciBWZWN0b3JTb3VyY2VFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVmVjdG9yU291cmNlRXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT49fSBvcHRfZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pj49fSBvcHRfZmVhdHVyZXMgRmVhdHVyZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVmVjdG9yU291cmNlRXZlbnQodHlwZSwgb3B0X2ZlYXR1cmUsIG9wdF9mZWF0dXJlcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGFkZGVkIG9yIHJlbW92ZWQgZmVhdHVyZSBmb3IgdGhlIGBBRERGRUFUVVJFYCBhbmQgYFJFTU9WRUZFQVRVUkVgIGV2ZW50cywgYHVuZGVmaW5lZGAgb3RoZXJ3aXNlLlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pnx1bmRlZmluZWR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZlYXR1cmUgPSBvcHRfZmVhdHVyZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBsb2FkZWQgZmVhdHVyZXMgZm9yIHRoZSBgRkVBVFVSRVNMT0FERURgIGV2ZW50LCBgdW5kZWZpbmVkYCBvdGhlcndpc2UuXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+Pnx1bmRlZmluZWR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZlYXR1cmVzID0gb3B0X2ZlYXR1cmVzO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBWZWN0b3JTb3VyY2VFdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCB7IFZlY3RvclNvdXJjZUV2ZW50IH07XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD58Q29sbGVjdGlvbjxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+fSBbZmVhdHVyZXNdXG4gKiBGZWF0dXJlcy4gSWYgcHJvdmlkZWQgYXMge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufSwgdGhlIGZlYXR1cmVzIGluIHRoZSBzb3VyY2VcbiAqIGFuZCB0aGUgY29sbGVjdGlvbiB3aWxsIHN0YXkgaW4gc3luYy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZm9ybWF0L0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gW2Zvcm1hdF0gVGhlIGZlYXR1cmUgZm9ybWF0IHVzZWQgYnkgdGhlIFhIUlxuICogZmVhdHVyZSBsb2FkZXIgd2hlbiBgdXJsYCBpcyBzZXQuIFJlcXVpcmVkIGlmIGB1cmxgIGlzIHNldCwgb3RoZXJ3aXNlIGlnbm9yZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2ZlYXR1cmVsb2FkZXIuanNcIikuRmVhdHVyZUxvYWRlcn0gW2xvYWRlcl1cbiAqIFRoZSBsb2FkZXIgZnVuY3Rpb24gdXNlZCB0byBsb2FkIGZlYXR1cmVzLCBmcm9tIGEgcmVtb3RlIHNvdXJjZSBmb3IgZXhhbXBsZS5cbiAqIElmIHRoaXMgaXMgbm90IHNldCBhbmQgYHVybGAgaXMgc2V0LCB0aGUgc291cmNlIHdpbGwgY3JlYXRlIGFuZCB1c2UgYW4gWEhSXG4gKiBmZWF0dXJlIGxvYWRlci5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQge1ZlY3Rvcn0gZnJvbSAnb2wvc291cmNlJztcbiAqIGltcG9ydCB7R2VvSlNPTn0gZnJvbSAnb2wvZm9ybWF0JztcbiAqIGltcG9ydCB7YmJveH0gZnJvbSAnb2wvbG9hZGluZ3N0cmF0ZWd5JztcbiAqXG4gKiB2YXIgdmVjdG9yU291cmNlID0gbmV3IFZlY3Rvcih7XG4gKiAgIGZvcm1hdDogbmV3IEdlb0pTT04oKSxcbiAqICAgbG9hZGVyOiBmdW5jdGlvbihleHRlbnQsIHJlc29sdXRpb24sIHByb2plY3Rpb24pIHtcbiAqICAgICAgdmFyIHByb2ogPSBwcm9qZWN0aW9uLmdldENvZGUoKTtcbiAqICAgICAgdmFyIHVybCA9ICdodHRwczovL2Fob2NldmFyLmNvbS9nZW9zZXJ2ZXIvd2ZzP3NlcnZpY2U9V0ZTJicgK1xuICogICAgICAgICAgJ3ZlcnNpb249MS4xLjAmcmVxdWVzdD1HZXRGZWF0dXJlJnR5cGVuYW1lPW9zbTp3YXRlcl9hcmVhcyYnICtcbiAqICAgICAgICAgICdvdXRwdXRGb3JtYXQ9YXBwbGljYXRpb24vanNvbiZzcnNuYW1lPScgKyBwcm9qICsgJyYnICtcbiAqICAgICAgICAgICdiYm94PScgKyBleHRlbnQuam9pbignLCcpICsgJywnICsgcHJvajtcbiAqICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICogICAgICB4aHIub3BlbignR0VUJywgdXJsKTtcbiAqICAgICAgdmFyIG9uRXJyb3IgPSBmdW5jdGlvbigpIHtcbiAqICAgICAgICB2ZWN0b3JTb3VyY2UucmVtb3ZlTG9hZGVkRXh0ZW50KGV4dGVudCk7XG4gKiAgICAgIH1cbiAqICAgICAgeGhyLm9uZXJyb3IgPSBvbkVycm9yO1xuICogICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT0gMjAwKSB7XG4gKiAgICAgICAgICB2ZWN0b3JTb3VyY2UuYWRkRmVhdHVyZXMoXG4gKiAgICAgICAgICAgICAgdmVjdG9yU291cmNlLmdldEZvcm1hdCgpLnJlYWRGZWF0dXJlcyh4aHIucmVzcG9uc2VUZXh0KSk7XG4gKiAgICAgICAgfSBlbHNlIHtcbiAqICAgICAgICAgIG9uRXJyb3IoKTtcbiAqICAgICAgICB9XG4gKiAgICAgIH1cbiAqICAgICAgeGhyLnNlbmQoKTtcbiAqICAgIH0sXG4gKiAgICBzdHJhdGVneTogYmJveFxuICogIH0pO1xuICogYGBgXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvdmVybGFwcz10cnVlXSBUaGlzIHNvdXJjZSBtYXkgaGF2ZSBvdmVybGFwcGluZyBnZW9tZXRyaWVzLlxuICogU2V0dGluZyB0aGlzIHRvIGBmYWxzZWAgKGUuZy4gZm9yIHNvdXJjZXMgd2l0aCBwb2x5Z29ucyB0aGF0IHJlcHJlc2VudCBhZG1pbmlzdHJhdGl2ZVxuICogYm91bmRhcmllcyBvciBUb3BvSlNPTiBzb3VyY2VzKSBhbGxvd3MgdGhlIHJlbmRlcmVyIHRvIG9wdGltaXNlIGZpbGwgYW5kXG4gKiBzdHJva2Ugb3BlcmF0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7TG9hZGluZ1N0cmF0ZWd5fSBbc3RyYXRlZ3ldIFRoZSBsb2FkaW5nIHN0cmF0ZWd5IHRvIHVzZS5cbiAqIEJ5IGRlZmF1bHQgYW4ge0BsaW5rIG1vZHVsZTpvbC9sb2FkaW5nc3RyYXRlZ3l+YWxsfVxuICogc3RyYXRlZ3kgaXMgdXNlZCwgYSBvbmUtb2ZmIHN0cmF0ZWd5IHdoaWNoIGxvYWRzIGFsbCBmZWF0dXJlcyBhdCBvbmNlLlxuICogQHByb3BlcnR5IHtzdHJpbmd8aW1wb3J0KFwiLi4vZmVhdHVyZWxvYWRlci5qc1wiKS5GZWF0dXJlVXJsRnVuY3Rpb259IFt1cmxdXG4gKiBTZXR0aW5nIHRoaXMgb3B0aW9uIGluc3RydWN0cyB0aGUgc291cmNlIHRvIGxvYWQgZmVhdHVyZXMgdXNpbmcgYW4gWEhSIGxvYWRlclxuICogKHNlZSB7QGxpbmsgbW9kdWxlOm9sL2ZlYXR1cmVsb2FkZXJ+eGhyfSkuIFVzZSBhIGBzdHJpbmdgIGFuZCBhblxuICoge0BsaW5rIG1vZHVsZTpvbC9sb2FkaW5nc3RyYXRlZ3l+YWxsfSBmb3IgYSBvbmUtb2ZmIGRvd25sb2FkIG9mIGFsbCBmZWF0dXJlcyBmcm9tXG4gKiB0aGUgZ2l2ZW4gVVJMLiBVc2UgYSB7QGxpbmsgbW9kdWxlOm9sL2ZlYXR1cmVsb2FkZXJ+RmVhdHVyZVVybEZ1bmN0aW9ufSB0byBnZW5lcmF0ZSB0aGUgdXJsIHdpdGhcbiAqIG90aGVyIGxvYWRpbmcgc3RyYXRlZ2llcy5cbiAqIFJlcXVpcmVzIGBmb3JtYXRgIHRvIGJlIHNldCBhcyB3ZWxsLlxuICogV2hlbiBkZWZhdWx0IFhIUiBmZWF0dXJlIGxvYWRlciBpcyBwcm92aWRlZCwgdGhlIGZlYXR1cmVzIHdpbGxcbiAqIGJlIHRyYW5zZm9ybWVkIGZyb20gdGhlIGRhdGEgcHJvamVjdGlvbiB0byB0aGUgdmlldyBwcm9qZWN0aW9uXG4gKiBkdXJpbmcgcGFyc2luZy4gSWYgeW91ciByZW1vdGUgZGF0YSBzb3VyY2UgZG9lcyBub3QgYWR2ZXJ0aXNlIGl0cyBwcm9qZWN0aW9uXG4gKiBwcm9wZXJseSwgdGhpcyB0cmFuc2Zvcm1hdGlvbiB3aWxsIGJlIGluY29ycmVjdC4gRm9yIHNvbWUgZm9ybWF0cywgdGhlXG4gKiBkZWZhdWx0IHByb2plY3Rpb24gKHVzdWFsbHkgRVBTRzo0MzI2KSBjYW4gYmUgb3ZlcnJpZGRlbiBieSBzZXR0aW5nIHRoZVxuICogZGF0YVByb2plY3Rpb24gY29uc3RydWN0b3Igb3B0aW9uIG9uIHRoZSBmb3JtYXQuXG4gKiBOb3RlIHRoYXQgaWYgYSBzb3VyY2UgY29udGFpbnMgbm9uLWZlYXR1cmUgZGF0YSwgc3VjaCBhcyBhIEdlb0pTT04gZ2VvbWV0cnlcbiAqIG9yIGEgS01MIE5ldHdvcmtMaW5rLCB0aGVzZSB3aWxsIGJlIGlnbm9yZWQuIFVzZSBhIGN1c3RvbSBsb2FkZXIgdG8gbG9hZCB0aGVzZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VzZVNwYXRpYWxJbmRleD10cnVlXVxuICogQnkgZGVmYXVsdCwgYW4gUlRyZWUgaXMgdXNlZCBhcyBzcGF0aWFsIGluZGV4LiBXaGVuIGZlYXR1cmVzIGFyZSByZW1vdmVkIGFuZFxuICogYWRkZWQgZnJlcXVlbnRseSwgYW5kIHRoZSB0b3RhbCBudW1iZXIgb2YgZmVhdHVyZXMgaXMgbG93LCBzZXR0aW5nIHRoaXMgdG9cbiAqIGBmYWxzZWAgbWF5IGltcHJvdmUgcGVyZm9ybWFuY2UuXG4gKlxuICogTm90ZSB0aGF0XG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J+VmVjdG9yU291cmNlI2dldEZlYXR1cmVzSW5FeHRlbnR9LFxuICoge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yflZlY3RvclNvdXJjZSNnZXRDbG9zZXN0RmVhdHVyZVRvQ29vcmRpbmF0ZX0gYW5kXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J+VmVjdG9yU291cmNlI2dldEV4dGVudH0gY2Fubm90IGJlIHVzZWQgd2hlbiBgdXNlU3BhdGlhbEluZGV4YCBpc1xuICogc2V0IHRvIGBmYWxzZWAsIGFuZCB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J+VmVjdG9yU291cmNlI2ZvckVhY2hGZWF0dXJlSW5FeHRlbnR9IHdpbGwgbG9vcFxuICogdGhyb3VnaCBhbGwgZmVhdHVyZXMuXG4gKlxuICogV2hlbiBzZXQgdG8gYGZhbHNlYCwgdGhlIGZlYXR1cmVzIHdpbGwgYmUgbWFpbnRhaW5lZCBpbiBhblxuICoge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufSwgd2hpY2ggY2FuIGJlIHJldHJpZXZlZCB0aHJvdWdoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J+VmVjdG9yU291cmNlI2dldEZlYXR1cmVzQ29sbGVjdGlvbn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD10cnVlXSBXcmFwIHRoZSB3b3JsZCBob3Jpem9udGFsbHkuIEZvciB2ZWN0b3IgZWRpdGluZyBhY3Jvc3MgdGhlXG4gKiAtMTgwwrAgYW5kIDE4MMKwIG1lcmlkaWFucyB0byB3b3JrIHByb3Blcmx5LCB0aGlzIHNob3VsZCBiZSBzZXQgdG8gYGZhbHNlYC4gVGhlXG4gKiByZXN1bHRpbmcgZ2VvbWV0cnkgY29vcmRpbmF0ZXMgd2lsbCB0aGVuIGV4Y2VlZCB0aGUgd29ybGQgYm91bmRzLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByb3ZpZGVzIGEgc291cmNlIG9mIGZlYXR1cmVzIGZvciB2ZWN0b3IgbGF5ZXJzLiBWZWN0b3IgZmVhdHVyZXMgcHJvdmlkZWRcbiAqIGJ5IHRoaXMgc291cmNlIGFyZSBzdWl0YWJsZSBmb3IgZWRpdGluZy4gU2VlIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1ZlY3RvclRpbGV+VmVjdG9yVGlsZX0gZm9yXG4gKiB2ZWN0b3IgZGF0YSB0aGF0IGlzIG9wdGltaXplZCBmb3IgcmVuZGVyaW5nLlxuICpcbiAqIEBmaXJlcyBWZWN0b3JTb3VyY2VFdmVudFxuICogQGFwaVxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5XG4gKi9cbnZhciBWZWN0b3JTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFZlY3RvclNvdXJjZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBWZWN0b3Igc291cmNlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVmVjdG9yU291cmNlKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgICAgICAgIHByb2plY3Rpb246IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHN0YXRlOiBTb3VyY2VTdGF0ZS5SRUFEWSxcbiAgICAgICAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLndyYXBYIDogdHJ1ZSxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9mZWF0dXJlbG9hZGVyLmpzXCIpLkZlYXR1cmVMb2FkZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sb2FkZXJfID0gVk9JRDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9mb3JtYXQvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZvcm1hdF8gPSBvcHRpb25zLmZvcm1hdDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3ZlcmxhcHNfID0gb3B0aW9ucy5vdmVybGFwcyA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IG9wdGlvbnMub3ZlcmxhcHM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfGltcG9ydChcIi4uL2ZlYXR1cmVsb2FkZXIuanNcIikuRmVhdHVyZVVybEZ1bmN0aW9ufHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVybF8gPSBvcHRpb25zLnVybDtcbiAgICAgICAgaWYgKG9wdGlvbnMubG9hZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLmxvYWRlcl8gPSBvcHRpb25zLmxvYWRlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChfdGhpcy51cmxfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGFzc2VydChfdGhpcy5mb3JtYXRfLCA3KTsgLy8gYGZvcm1hdGAgbXVzdCBiZSBzZXQgd2hlbiBgdXJsYCBpcyBzZXRcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhIFhIUiBmZWF0dXJlIGxvYWRlciBmb3IgXCJ1cmxcIiBhbmQgXCJmb3JtYXRcIlxuICAgICAgICAgICAgX3RoaXMubG9hZGVyXyA9IHhocihfdGhpcy51cmxfLCBcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vZm9ybWF0L0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gKi8gKF90aGlzLmZvcm1hdF8pKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0xvYWRpbmdTdHJhdGVneX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0cmF0ZWd5XyA9XG4gICAgICAgICAgICBvcHRpb25zLnN0cmF0ZWd5ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnN0cmF0ZWd5IDogYWxsU3RyYXRlZ3k7XG4gICAgICAgIHZhciB1c2VTcGF0aWFsSW5kZXggPSBvcHRpb25zLnVzZVNwYXRpYWxJbmRleCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy51c2VTcGF0aWFsSW5kZXggOiB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge1JCdXNoPGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZmVhdHVyZXNSdHJlZV8gPSB1c2VTcGF0aWFsSW5kZXggPyBuZXcgUkJ1c2goKSA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7UkJ1c2g8e2V4dGVudDogaW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubG9hZGVkRXh0ZW50c1J0cmVlXyA9IG5ldyBSQnVzaCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm51bGxHZW9tZXRyeUZlYXR1cmVzXyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBsb29rdXAgb2YgZmVhdHVyZXMgYnkgaWQgKHRoZSByZXR1cm4gZnJvbSBmZWF0dXJlLmdldElkKCkpLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaWRJbmRleF8gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbG9va3VwIG9mIGZlYXR1cmVzIGJ5IHVpZCAodXNpbmcgZ2V0VWlkKGZlYXR1cmUpKS5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVpZEluZGV4XyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIEFycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZlYXR1cmVDaGFuZ2VLZXlzXyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0NvbGxlY3Rpb248aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fID0gbnVsbDtcbiAgICAgICAgdmFyIGNvbGxlY3Rpb24sIGZlYXR1cmVzO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLmZlYXR1cmVzKSkge1xuICAgICAgICAgICAgZmVhdHVyZXMgPSBvcHRpb25zLmZlYXR1cmVzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuZmVhdHVyZXMpIHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBvcHRpb25zLmZlYXR1cmVzO1xuICAgICAgICAgICAgZmVhdHVyZXMgPSBjb2xsZWN0aW9uLmdldEFycmF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF1c2VTcGF0aWFsSW5kZXggJiYgY29sbGVjdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb2xsZWN0aW9uID0gbmV3IENvbGxlY3Rpb24oZmVhdHVyZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmZWF0dXJlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5hZGRGZWF0dXJlc0ludGVybmFsKGZlYXR1cmVzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29sbGVjdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5iaW5kRmVhdHVyZXNDb2xsZWN0aW9uXyhjb2xsZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIHNpbmdsZSBmZWF0dXJlIHRvIHRoZSBzb3VyY2UuICBJZiB5b3Ugd2FudCB0byBhZGQgYSBiYXRjaCBvZiBmZWF0dXJlc1xuICAgICAqIGF0IG9uY2UsIGNhbGwge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yflZlY3RvclNvdXJjZSNhZGRGZWF0dXJlcyAjYWRkRmVhdHVyZXMoKX1cbiAgICAgKiBpbnN0ZWFkLiBBIGZlYXR1cmUgd2lsbCBub3QgYmUgYWRkZWQgdG8gdGhlIHNvdXJjZSBpZiBmZWF0dXJlIHdpdGhcbiAgICAgKiB0aGUgc2FtZSBpZCBpcyBhbHJlYWR5IHRoZXJlLiBUaGUgcmVhc29uIGZvciB0aGlzIGJlaGF2aW9yIGlzIHRvIGF2b2lkXG4gICAgICogZmVhdHVyZSBkdXBsaWNhdGlvbiB3aGVuIHVzaW5nIGJib3ggb3IgdGlsZSBsb2FkaW5nIHN0cmF0ZWdpZXMuXG4gICAgICogTm90ZTogdGhpcyBhbHNvIGFwcGxpZXMgaWYgYW4ge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufSBpcyB1c2VkIGZvciBmZWF0dXJlcyxcbiAgICAgKiBtZWFuaW5nIHRoYXQgaWYgYSBmZWF0dXJlIHdpdGggYSBkdXBsaWNhdGUgaWQgaXMgYWRkZWQgaW4gdGhlIGNvbGxlY3Rpb24sIGl0IHdpbGxcbiAgICAgKiBiZSByZW1vdmVkIGZyb20gaXQgcmlnaHQgYXdheS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT59IGZlYXR1cmUgRmVhdHVyZSB0byBhZGQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuYWRkRmVhdHVyZSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgIHRoaXMuYWRkRmVhdHVyZUludGVybmFsKGZlYXR1cmUpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZCBhIGZlYXR1cmUgd2l0aG91dCBmaXJpbmcgYSBgY2hhbmdlYCBldmVudC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT59IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5hZGRGZWF0dXJlSW50ZXJuYWwgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICB2YXIgZmVhdHVyZUtleSA9IGdldFVpZChmZWF0dXJlKTtcbiAgICAgICAgaWYgKCF0aGlzLmFkZFRvSW5kZXhfKGZlYXR1cmVLZXksIGZlYXR1cmUpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fLnJlbW92ZShmZWF0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldHVwQ2hhbmdlRXZlbnRzXyhmZWF0dXJlS2V5LCBmZWF0dXJlKTtcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICAgICAgICBpZiAoZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgIHZhciBleHRlbnQgPSBnZW9tZXRyeS5nZXRFeHRlbnQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZlYXR1cmVzUnRyZWVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlc1J0cmVlXy5pbnNlcnQoZXh0ZW50LCBmZWF0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfW2ZlYXR1cmVLZXldID0gZmVhdHVyZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFZlY3RvclNvdXJjZUV2ZW50KFZlY3RvckV2ZW50VHlwZS5BRERGRUFUVVJFLCBmZWF0dXJlKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmVhdHVyZUtleSBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGZlYXR1cmUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+fSBmZWF0dXJlIFRoZSBmZWF0dXJlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5zZXR1cENoYW5nZUV2ZW50c18gPSBmdW5jdGlvbiAoZmVhdHVyZUtleSwgZmVhdHVyZSkge1xuICAgICAgICB0aGlzLmZlYXR1cmVDaGFuZ2VLZXlzX1tmZWF0dXJlS2V5XSA9IFtcbiAgICAgICAgICAgIGxpc3RlbihmZWF0dXJlLCBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZUZlYXR1cmVDaGFuZ2VfLCB0aGlzKSxcbiAgICAgICAgICAgIGxpc3RlbihmZWF0dXJlLCBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsIHRoaXMuaGFuZGxlRmVhdHVyZUNoYW5nZV8sIHRoaXMpLFxuICAgICAgICBdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZlYXR1cmVLZXkgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBmZWF0dXJlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pn0gZmVhdHVyZSBUaGUgZmVhdHVyZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZmVhdHVyZSBpcyBcInZhbGlkXCIsIGluIHRoZSBzZW5zZSB0aGF0IGl0IGlzIGFsc28gYVxuICAgICAqICAgICBjYW5kaWRhdGUgZm9yIGluc2VydGlvbiBpbnRvIHRoZSBSdHJlZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuYWRkVG9JbmRleF8gPSBmdW5jdGlvbiAoZmVhdHVyZUtleSwgZmVhdHVyZSkge1xuICAgICAgICB2YXIgdmFsaWQgPSB0cnVlO1xuICAgICAgICB2YXIgaWQgPSBmZWF0dXJlLmdldElkKCk7XG4gICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoIShpZC50b1N0cmluZygpIGluIHRoaXMuaWRJbmRleF8pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pZEluZGV4X1tpZC50b1N0cmluZygpXSA9IGZlYXR1cmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh2YWxpZCkge1xuICAgICAgICAgICAgYXNzZXJ0KCEoZmVhdHVyZUtleSBpbiB0aGlzLnVpZEluZGV4XyksIDMwKTsgLy8gVGhlIHBhc3NlZCBgZmVhdHVyZWAgd2FzIGFscmVhZHkgYWRkZWQgdG8gdGhlIHNvdXJjZVxuICAgICAgICAgICAgdGhpcy51aWRJbmRleF9bZmVhdHVyZUtleV0gPSBmZWF0dXJlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWxpZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZCBhIGJhdGNoIG9mIGZlYXR1cmVzIHRvIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+Pn0gZmVhdHVyZXMgRmVhdHVyZXMgdG8gYWRkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmFkZEZlYXR1cmVzID0gZnVuY3Rpb24gKGZlYXR1cmVzKSB7XG4gICAgICAgIHRoaXMuYWRkRmVhdHVyZXNJbnRlcm5hbChmZWF0dXJlcyk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkIGZlYXR1cmVzIHdpdGhvdXQgZmlyaW5nIGEgYGNoYW5nZWAgZXZlbnQuXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+Pn0gZmVhdHVyZXMgRmVhdHVyZXMuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuYWRkRmVhdHVyZXNJbnRlcm5hbCA9IGZ1bmN0aW9uIChmZWF0dXJlcykge1xuICAgICAgICB2YXIgZXh0ZW50cyA9IFtdO1xuICAgICAgICB2YXIgbmV3RmVhdHVyZXMgPSBbXTtcbiAgICAgICAgdmFyIGdlb21ldHJ5RmVhdHVyZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmVhdHVyZXMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykge1xuICAgICAgICAgICAgdmFyIGZlYXR1cmUgPSBmZWF0dXJlc1tpXTtcbiAgICAgICAgICAgIHZhciBmZWF0dXJlS2V5ID0gZ2V0VWlkKGZlYXR1cmUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWRkVG9JbmRleF8oZmVhdHVyZUtleSwgZmVhdHVyZSkpIHtcbiAgICAgICAgICAgICAgICBuZXdGZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMiA9IG5ld0ZlYXR1cmVzLmxlbmd0aDsgaSA8IGxlbmd0aF8yOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBmZWF0dXJlID0gbmV3RmVhdHVyZXNbaV07XG4gICAgICAgICAgICB2YXIgZmVhdHVyZUtleSA9IGdldFVpZChmZWF0dXJlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0dXBDaGFuZ2VFdmVudHNfKGZlYXR1cmVLZXksIGZlYXR1cmUpO1xuICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICAgICAgICAgICAgaWYgKGdlb21ldHJ5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGV4dGVudCA9IGdlb21ldHJ5LmdldEV4dGVudCgpO1xuICAgICAgICAgICAgICAgIGV4dGVudHMucHVzaChleHRlbnQpO1xuICAgICAgICAgICAgICAgIGdlb21ldHJ5RmVhdHVyZXMucHVzaChmZWF0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfW2ZlYXR1cmVLZXldID0gZmVhdHVyZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5mZWF0dXJlc1J0cmVlXykge1xuICAgICAgICAgICAgdGhpcy5mZWF0dXJlc1J0cmVlXy5sb2FkKGV4dGVudHMsIGdlb21ldHJ5RmVhdHVyZXMpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMyA9IG5ld0ZlYXR1cmVzLmxlbmd0aDsgaSA8IGxlbmd0aF8zOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVmVjdG9yU291cmNlRXZlbnQoVmVjdG9yRXZlbnRUeXBlLkFEREZFQVRVUkUsIG5ld0ZlYXR1cmVzW2ldKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IUNvbGxlY3Rpb248aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pj59IGNvbGxlY3Rpb24gQ29sbGVjdGlvbi5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuYmluZEZlYXR1cmVzQ29sbGVjdGlvbl8gPSBmdW5jdGlvbiAoY29sbGVjdGlvbikge1xuICAgICAgICB2YXIgbW9kaWZ5aW5nQ29sbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoVmVjdG9yRXZlbnRUeXBlLkFEREZFQVRVUkUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtWZWN0b3JTb3VyY2VFdmVudDxHZW9tZXRyeT59IGV2dCBUaGUgdmVjdG9yIHNvdXJjZSBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgaWYgKCFtb2RpZnlpbmdDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgbW9kaWZ5aW5nQ29sbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbi5wdXNoKGV2dC5mZWF0dXJlKTtcbiAgICAgICAgICAgICAgICBtb2RpZnlpbmdDb2xsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoVmVjdG9yRXZlbnRUeXBlLlJFTU9WRUZFQVRVUkUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtWZWN0b3JTb3VyY2VFdmVudDxHZW9tZXRyeT59IGV2dCBUaGUgdmVjdG9yIHNvdXJjZSBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgaWYgKCFtb2RpZnlpbmdDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgbW9kaWZ5aW5nQ29sbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbi5yZW1vdmUoZXZ0LmZlYXR1cmUpO1xuICAgICAgICAgICAgICAgIG1vZGlmeWluZ0NvbGxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbGxlY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcihDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldnQgVGhlIGNvbGxlY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIGlmICghbW9kaWZ5aW5nQ29sbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIG1vZGlmeWluZ0NvbGxlY3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkRmVhdHVyZShcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT59ICovIChldnQuZWxlbWVudCkpO1xuICAgICAgICAgICAgICAgIG1vZGlmeWluZ0NvbGxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgY29sbGVjdGlvbi5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2dCBUaGUgY29sbGVjdGlvbiBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgaWYgKCFtb2RpZnlpbmdDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgbW9kaWZ5aW5nQ29sbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGZWF0dXJlKFxuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pn0gKi8gKGV2dC5lbGVtZW50KSk7XG4gICAgICAgICAgICAgICAgbW9kaWZ5aW5nQ29sbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmZlYXR1cmVzQ29sbGVjdGlvbl8gPSBjb2xsZWN0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFsbCBmZWF0dXJlcyBmcm9tIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2Zhc3QgU2tpcCBkaXNwYXRjaGluZyBvZiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3IuVmVjdG9yU291cmNlRXZlbnQjcmVtb3ZlZmVhdHVyZX0gZXZlbnRzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKG9wdF9mYXN0KSB7XG4gICAgICAgIGlmIChvcHRfZmFzdCkge1xuICAgICAgICAgICAgZm9yICh2YXIgZmVhdHVyZUlkIGluIHRoaXMuZmVhdHVyZUNoYW5nZUtleXNfKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSB0aGlzLmZlYXR1cmVDaGFuZ2VLZXlzX1tmZWF0dXJlSWRdO1xuICAgICAgICAgICAgICAgIGtleXMuZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlQ2hhbmdlS2V5c18gPSB7fTtcbiAgICAgICAgICAgICAgICB0aGlzLmlkSW5kZXhfID0ge307XG4gICAgICAgICAgICAgICAgdGhpcy51aWRJbmRleF8gPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZlYXR1cmVzUnRyZWVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlc1J0cmVlXy5mb3JFYWNoKHRoaXMucmVtb3ZlRmVhdHVyZUludGVybmFsLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGlkIGluIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRmVhdHVyZUludGVybmFsKHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfW2lkXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZlYXR1cmVzQ29sbGVjdGlvbl8pIHtcbiAgICAgICAgICAgIHRoaXMuZmVhdHVyZXNDb2xsZWN0aW9uXy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZlYXR1cmVzUnRyZWVfKSB7XG4gICAgICAgICAgICB0aGlzLmZlYXR1cmVzUnRyZWVfLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5udWxsR2VvbWV0cnlGZWF0dXJlc18gPSB7fTtcbiAgICAgICAgdmFyIGNsZWFyRXZlbnQgPSBuZXcgVmVjdG9yU291cmNlRXZlbnQoVmVjdG9yRXZlbnRUeXBlLkNMRUFSKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGNsZWFyRXZlbnQpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEl0ZXJhdGUgdGhyb3VnaCBhbGwgZmVhdHVyZXMgb24gdGhlIHNvdXJjZSwgY2FsbGluZyB0aGUgcHJvdmlkZWQgY2FsbGJhY2tcbiAgICAgKiB3aXRoIGVhY2ggb25lLiAgSWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYW55IFwidHJ1dGh5XCIgdmFsdWUsIGl0ZXJhdGlvbiB3aWxsXG4gICAgICogc3RvcCBhbmQgdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHRoZSBzYW1lIHZhbHVlLlxuICAgICAqIE5vdGU6IHRoaXMgZnVuY3Rpb24gb25seSBpdGVyYXRlIHRocm91Z2ggdGhlIGZlYXR1cmUgdGhhdCBoYXZlIGEgZGVmaW5lZCBnZW9tZXRyeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pik6IFR9IGNhbGxiYWNrIENhbGxlZCB3aXRoIGVhY2ggZmVhdHVyZVxuICAgICAqICAgICBvbiB0aGUgc291cmNlLiAgUmV0dXJuIGEgdHJ1dGh5IHZhbHVlIHRvIHN0b3AgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBUaGUgcmV0dXJuIHZhbHVlIGZyb20gdGhlIGxhc3QgY2FsbCB0byB0aGUgY2FsbGJhY2suXG4gICAgICogQHRlbXBsYXRlIFRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy5mZWF0dXJlc1J0cmVlXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZXNSdHJlZV8uZm9yRWFjaChjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fKSB7XG4gICAgICAgICAgICB0aGlzLmZlYXR1cmVzQ29sbGVjdGlvbl8uZm9yRWFjaChjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEl0ZXJhdGUgdGhyb3VnaCBhbGwgZmVhdHVyZXMgd2hvc2UgZ2VvbWV0cmllcyBjb250YWluIHRoZSBwcm92aWRlZFxuICAgICAqIGNvb3JkaW5hdGUsIGNhbGxpbmcgdGhlIGNhbGxiYWNrIHdpdGggZWFjaCBmZWF0dXJlLiAgSWYgdGhlIGNhbGxiYWNrIHJldHVybnNcbiAgICAgKiBhIFwidHJ1dGh5XCIgdmFsdWUsIGl0ZXJhdGlvbiB3aWxsIHN0b3AgYW5kIHRoZSBmdW5jdGlvbiB3aWxsIHJldHVybiB0aGUgc2FtZVxuICAgICAqIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT4pOiBUfSBjYWxsYmFjayBDYWxsZWQgd2l0aCBlYWNoIGZlYXR1cmVcbiAgICAgKiAgICAgd2hvc2UgZ29lbWV0cnkgY29udGFpbnMgdGhlIHByb3ZpZGVkIGNvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IFRoZSByZXR1cm4gdmFsdWUgZnJvbSB0aGUgbGFzdCBjYWxsIHRvIHRoZSBjYWxsYmFjay5cbiAgICAgKiBAdGVtcGxhdGUgVFxuICAgICAqL1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGVEaXJlY3QgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGV4dGVudCA9IFtjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdLCBjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaEZlYXR1cmVJbkV4dGVudChleHRlbnQsIGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG4gICAgICAgICAgICBpZiAoZ2VvbWV0cnkuaW50ZXJzZWN0c0Nvb3JkaW5hdGUoY29vcmRpbmF0ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZmVhdHVyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEl0ZXJhdGUgdGhyb3VnaCBhbGwgZmVhdHVyZXMgd2hvc2UgYm91bmRpbmcgYm94IGludGVyc2VjdHMgdGhlIHByb3ZpZGVkXG4gICAgICogZXh0ZW50IChub3RlIHRoYXQgdGhlIGZlYXR1cmUncyBnZW9tZXRyeSBtYXkgbm90IGludGVyc2VjdCB0aGUgZXh0ZW50KSxcbiAgICAgKiBjYWxsaW5nIHRoZSBjYWxsYmFjayB3aXRoIGVhY2ggZmVhdHVyZS4gIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIGEgXCJ0cnV0aHlcIlxuICAgICAqIHZhbHVlLCBpdGVyYXRpb24gd2lsbCBzdG9wIGFuZCB0aGUgZnVuY3Rpb24gd2lsbCByZXR1cm4gdGhlIHNhbWUgdmFsdWUuXG4gICAgICpcbiAgICAgKiBJZiB5b3UgYXJlIGludGVyZXN0ZWQgaW4gZmVhdHVyZXMgd2hvc2UgZ2VvbWV0cnkgaW50ZXJzZWN0cyBhbiBleHRlbnQsIGNhbGxcbiAgICAgKiB0aGUge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yflZlY3RvclNvdXJjZSNmb3JFYWNoRmVhdHVyZUludGVyc2VjdGluZ0V4dGVudCAjZm9yRWFjaEZlYXR1cmVJbnRlcnNlY3RpbmdFeHRlbnQoKX0gbWV0aG9kIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBXaGVuIGB1c2VTcGF0aWFsSW5kZXhgIGlzIHNldCB0byBmYWxzZSwgdGhpcyBtZXRob2Qgd2lsbCBsb29wIHRocm91Z2ggYWxsXG4gICAgICogZmVhdHVyZXMsIGVxdWl2YWxlbnQgdG8ge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yflZlY3RvclNvdXJjZSNmb3JFYWNoRmVhdHVyZSAjZm9yRWFjaEZlYXR1cmUoKX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+KTogVH0gY2FsbGJhY2sgQ2FsbGVkIHdpdGggZWFjaCBmZWF0dXJlXG4gICAgICogICAgIHdob3NlIGJvdW5kaW5nIGJveCBpbnRlcnNlY3RzIHRoZSBwcm92aWRlZCBleHRlbnQuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IFRoZSByZXR1cm4gdmFsdWUgZnJvbSB0aGUgbGFzdCBjYWxsIHRvIHRoZSBjYWxsYmFjay5cbiAgICAgKiBAdGVtcGxhdGUgVFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlSW5FeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50LCBjYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy5mZWF0dXJlc1J0cmVlXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZXNSdHJlZV8uZm9yRWFjaEluRXh0ZW50KGV4dGVudCwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZmVhdHVyZXNDb2xsZWN0aW9uXykge1xuICAgICAgICAgICAgdGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fLmZvckVhY2goY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJdGVyYXRlIHRocm91Z2ggYWxsIGZlYXR1cmVzIHdob3NlIGdlb21ldHJ5IGludGVyc2VjdHMgdGhlIHByb3ZpZGVkIGV4dGVudCxcbiAgICAgKiBjYWxsaW5nIHRoZSBjYWxsYmFjayB3aXRoIGVhY2ggZmVhdHVyZS4gIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIGEgXCJ0cnV0aHlcIlxuICAgICAqIHZhbHVlLCBpdGVyYXRpb24gd2lsbCBzdG9wIGFuZCB0aGUgZnVuY3Rpb24gd2lsbCByZXR1cm4gdGhlIHNhbWUgdmFsdWUuXG4gICAgICpcbiAgICAgKiBJZiB5b3Ugb25seSB3YW50IHRvIHRlc3QgZm9yIGJvdW5kaW5nIGJveCBpbnRlcnNlY3Rpb24sIGNhbGwgdGhlXG4gICAgICoge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yflZlY3RvclNvdXJjZSNmb3JFYWNoRmVhdHVyZUluRXh0ZW50ICNmb3JFYWNoRmVhdHVyZUluRXh0ZW50KCl9IG1ldGhvZCBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pik6IFR9IGNhbGxiYWNrIENhbGxlZCB3aXRoIGVhY2ggZmVhdHVyZVxuICAgICAqICAgICB3aG9zZSBnZW9tZXRyeSBpbnRlcnNlY3RzIHRoZSBwcm92aWRlZCBleHRlbnQuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IFRoZSByZXR1cm4gdmFsdWUgZnJvbSB0aGUgbGFzdCBjYWxsIHRvIHRoZSBjYWxsYmFjay5cbiAgICAgKiBAdGVtcGxhdGUgVFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlSW50ZXJzZWN0aW5nRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaEZlYXR1cmVJbkV4dGVudChleHRlbnQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+fSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBUaGUgcmV0dXJuIHZhbHVlIGZyb20gdGhlIGxhc3QgY2FsbCB0byB0aGUgY2FsbGJhY2suXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICAgICAgICAgICAgaWYgKGdlb21ldHJ5LmludGVyc2VjdHNFeHRlbnQoZXh0ZW50KSkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBjYWxsYmFjayhmZWF0dXJlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZmVhdHVyZXMgY29sbGVjdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhpcyBzb3VyY2UuIFdpbGwgYmUgYG51bGxgXG4gICAgICogdW5sZXNzIHRoZSBzb3VyY2Ugd2FzIGNvbmZpZ3VyZWQgd2l0aCBgdXNlU3BhdGlhbEluZGV4YCBzZXQgdG8gYGZhbHNlYCwgb3JcbiAgICAgKiB3aXRoIGFuIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn0gYXMgYGZlYXR1cmVzYC5cbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT4+fSBUaGUgY29sbGVjdGlvbiBvZiBmZWF0dXJlcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5nZXRGZWF0dXJlc0NvbGxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZlYXR1cmVzQ29sbGVjdGlvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGZlYXR1cmVzIG9uIHRoZSBzb3VyY2UgaW4gcmFuZG9tIG9yZGVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT4+fSBGZWF0dXJlcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5nZXRGZWF0dXJlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZlYXR1cmVzO1xuICAgICAgICBpZiAodGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fKSB7XG4gICAgICAgICAgICBmZWF0dXJlcyA9IHRoaXMuZmVhdHVyZXNDb2xsZWN0aW9uXy5nZXRBcnJheSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZmVhdHVyZXNSdHJlZV8pIHtcbiAgICAgICAgICAgIGZlYXR1cmVzID0gdGhpcy5mZWF0dXJlc1J0cmVlXy5nZXRBbGwoKTtcbiAgICAgICAgICAgIGlmICghaXNFbXB0eSh0aGlzLm51bGxHZW9tZXRyeUZlYXR1cmVzXykpIHtcbiAgICAgICAgICAgICAgICBleHRlbmQoZmVhdHVyZXMsIGdldFZhbHVlcyh0aGlzLm51bGxHZW9tZXRyeUZlYXR1cmVzXykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT4+fSAqLyAoZmVhdHVyZXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBmZWF0dXJlcyB3aG9zZSBnZW9tZXRyeSBpbnRlcnNlY3RzIHRoZSBwcm92aWRlZCBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pj59IEZlYXR1cmVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldEZlYXR1cmVzQXRDb29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgdmFyIGZlYXR1cmVzID0gW107XG4gICAgICAgIHRoaXMuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGVEaXJlY3QoY29vcmRpbmF0ZSwgZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgICAgICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmVhdHVyZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGZlYXR1cmVzIHdob3NlIGJvdW5kaW5nIGJveCBpbnRlcnNlY3RzIHRoZSBwcm92aWRlZCBleHRlbnQuICBOb3RlIHRoYXQgdGhpcyByZXR1cm5zIGFuIGFycmF5IG9mXG4gICAgICogYWxsIGZlYXR1cmVzIGludGVyc2VjdGluZyB0aGUgZ2l2ZW4gZXh0ZW50IGluIHJhbmRvbSBvcmRlciAoc28gaXQgbWF5IGluY2x1ZGVcbiAgICAgKiBmZWF0dXJlcyB3aG9zZSBnZW9tZXRyaWVzIGRvIG5vdCBpbnRlcnNlY3QgdGhlIGV4dGVudCkuXG4gICAgICpcbiAgICAgKiBXaGVuIGB1c2VTcGF0aWFsSW5kZXhgIGlzIHNldCB0byBmYWxzZSwgdGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gYWxsXG4gICAgICogZmVhdHVyZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pj59IEZlYXR1cmVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldEZlYXR1cmVzSW5FeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmZlYXR1cmVzUnRyZWVfKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mZWF0dXJlc1J0cmVlXy5nZXRJbkV4dGVudChleHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZmVhdHVyZXNDb2xsZWN0aW9uXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZXNDb2xsZWN0aW9uXy5nZXRBcnJheSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNsb3Nlc3QgZmVhdHVyZSB0byB0aGUgcHJvdmlkZWQgY29vcmRpbmF0ZS5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIG5vdCBhdmFpbGFibGUgd2hlbiB0aGUgc291cmNlIGlzIGNvbmZpZ3VyZWQgd2l0aFxuICAgICAqIGB1c2VTcGF0aWFsSW5kZXhgIHNldCB0byBgZmFsc2VgLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+KTpib29sZWFuPX0gb3B0X2ZpbHRlciBGZWF0dXJlIGZpbHRlciBmdW5jdGlvbi5cbiAgICAgKiAgICAgVGhlIGZpbHRlciBmdW5jdGlvbiB3aWxsIHJlY2VpdmUgb25lIGFyZ3VtZW50LCB0aGUge0BsaW5rIG1vZHVsZTpvbC9GZWF0dXJlIGZlYXR1cmV9XG4gICAgICogICAgIGFuZCBpdCBzaG91bGQgcmV0dXJuIGEgYm9vbGVhbiB2YWx1ZS4gQnkgZGVmYXVsdCwgbm8gZmlsdGVyaW5nIGlzIG1hZGUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pn0gQ2xvc2VzdCBmZWF0dXJlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldENsb3Nlc3RGZWF0dXJlVG9Db29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIG9wdF9maWx0ZXIpIHtcbiAgICAgICAgLy8gRmluZCB0aGUgY2xvc2VzdCBmZWF0dXJlIHVzaW5nIGJyYW5jaCBhbmQgYm91bmQuICBXZSBzdGFydCBzZWFyY2hpbmcgYW5cbiAgICAgICAgLy8gaW5maW5pdGUgZXh0ZW50LCBhbmQgZmluZCB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgZmlyc3QgZmVhdHVyZSBmb3VuZC4gIFRoaXNcbiAgICAgICAgLy8gYmVjb21lcyB0aGUgY2xvc2VzdCBmZWF0dXJlLiAgV2UgdGhlbiBjb21wdXRlIGEgc21hbGxlciBleHRlbnQgd2hpY2ggYW55XG4gICAgICAgIC8vIGNsb3NlciBmZWF0dXJlIG11c3QgaW50ZXJzZWN0LiAgV2UgY29udGludWUgc2VhcmNoaW5nIHdpdGggdGhpcyBzbWFsbGVyXG4gICAgICAgIC8vIGV4dGVudCwgdHJ5aW5nIHRvIGZpbmQgYSBjbG9zZXIgZmVhdHVyZS4gIEV2ZXJ5IHRpbWUgd2UgZmluZCBhIGNsb3NlclxuICAgICAgICAvLyBmZWF0dXJlLCB3ZSB1cGRhdGUgdGhlIGV4dGVudCBiZWluZyBzZWFyY2hlZCBzbyB0aGF0IGFueSBldmVuIGNsb3NlclxuICAgICAgICAvLyBmZWF0dXJlIG11c3QgaW50ZXJzZWN0IGl0LiAgV2UgY29udGludWUgdW50aWwgd2UgcnVuIG91dCBvZiBmZWF0dXJlcy5cbiAgICAgICAgdmFyIHggPSBjb29yZGluYXRlWzBdO1xuICAgICAgICB2YXIgeSA9IGNvb3JkaW5hdGVbMV07XG4gICAgICAgIHZhciBjbG9zZXN0RmVhdHVyZSA9IG51bGw7XG4gICAgICAgIHZhciBjbG9zZXN0UG9pbnQgPSBbTmFOLCBOYU5dO1xuICAgICAgICB2YXIgbWluU3F1YXJlZERpc3RhbmNlID0gSW5maW5pdHk7XG4gICAgICAgIHZhciBleHRlbnQgPSBbLUluZmluaXR5LCAtSW5maW5pdHksIEluZmluaXR5LCBJbmZpbml0eV07XG4gICAgICAgIHZhciBmaWx0ZXIgPSBvcHRfZmlsdGVyID8gb3B0X2ZpbHRlciA6IFRSVUU7XG4gICAgICAgIHRoaXMuZmVhdHVyZXNSdHJlZV8uZm9yRWFjaEluRXh0ZW50KGV4dGVudCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT59IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgICAgICBpZiAoZmlsdGVyKGZlYXR1cmUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICAgICAgICAgICAgICAgIHZhciBwcmV2aW91c01pblNxdWFyZWREaXN0YW5jZSA9IG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgICAgICAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBnZW9tZXRyeS5jbG9zZXN0UG9pbnRYWSh4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1pblNxdWFyZWREaXN0YW5jZSA8IHByZXZpb3VzTWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RGZWF0dXJlID0gZmVhdHVyZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBzbmVha3kuICBSZWR1Y2UgdGhlIGV4dGVudCB0aGF0IGl0IGlzIGN1cnJlbnRseSBiZWluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBzZWFyY2hlZCB3aGlsZSB0aGUgUi1UcmVlIHRyYXZlcnNhbCB1c2luZyB0aGlzIHNhbWUgZXh0ZW50IG9iamVjdFxuICAgICAgICAgICAgICAgICAgICAvLyBpcyBzdGlsbCBpbiBwcm9ncmVzcy4gIFRoaXMgaXMgc2FmZSBiZWNhdXNlIHRoZSBuZXcgZXh0ZW50IGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIHN0cmljdGx5IGNvbnRhaW5lZCBieSB0aGUgb2xkIGV4dGVudC5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pbkRpc3RhbmNlID0gTWF0aC5zcXJ0KG1pblNxdWFyZWREaXN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVudFswXSA9IHggLSBtaW5EaXN0YW5jZTtcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW50WzFdID0geSAtIG1pbkRpc3RhbmNlO1xuICAgICAgICAgICAgICAgICAgICBleHRlbnRbMl0gPSB4ICsgbWluRGlzdGFuY2U7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVudFszXSA9IHkgKyBtaW5EaXN0YW5jZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY2xvc2VzdEZlYXR1cmU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGV4dGVudCBvZiB0aGUgZmVhdHVyZXMgY3VycmVudGx5IGluIHRoZSBzb3VyY2UuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYXZhaWxhYmxlIHdoZW4gdGhlIHNvdXJjZSBpcyBjb25maWd1cmVkIHdpdGhcbiAgICAgKiBgdXNlU3BhdGlhbEluZGV4YCBzZXQgdG8gYGZhbHNlYC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQ9fSBvcHRfZXh0ZW50IERlc3RpbmF0aW9uIGV4dGVudC4gSWYgcHJvdmlkZWQsIG5vIG5ldyBleHRlbnRcbiAgICAgKiAgICAgd2lsbCBiZSBjcmVhdGVkLiBJbnN0ZWFkLCB0aGF0IGV4dGVudCdzIGNvb3JkaW5hdGVzIHdpbGwgYmUgb3ZlcndyaXR0ZW4uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uIChvcHRfZXh0ZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZlYXR1cmVzUnRyZWVfLmdldEV4dGVudChvcHRfZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIGZlYXR1cmUgYnkgaXRzIGlkZW50aWZpZXIgKHRoZSB2YWx1ZSByZXR1cm5lZCBieSBmZWF0dXJlLmdldElkKCkpLlxuICAgICAqIE5vdGUgdGhhdCB0aGUgaW5kZXggdHJlYXRzIHN0cmluZyBhbmQgbnVtZXJpYyBpZGVudGlmaWVycyBhcyB0aGUgc2FtZS4gIFNvXG4gICAgICogYHNvdXJjZS5nZXRGZWF0dXJlQnlJZCgyKWAgd2lsbCByZXR1cm4gYSBmZWF0dXJlIHdpdGggaWQgYCcyJ2Agb3IgYDJgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBpZCBGZWF0dXJlIGlkZW50aWZpZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pn0gVGhlIGZlYXR1cmUgKG9yIGBudWxsYCBpZiBub3QgZm91bmQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldEZlYXR1cmVCeUlkID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHZhciBmZWF0dXJlID0gdGhpcy5pZEluZGV4X1tpZC50b1N0cmluZygpXTtcbiAgICAgICAgcmV0dXJuIGZlYXR1cmUgIT09IHVuZGVmaW5lZCA/IGZlYXR1cmUgOiBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgZmVhdHVyZSBieSBpdHMgaW50ZXJuYWwgdW5pcXVlIGlkZW50aWZpZXIgKHVzaW5nIGBnZXRVaWRgKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1aWQgRmVhdHVyZSBpZGVudGlmaWVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT59IFRoZSBmZWF0dXJlIChvciBgbnVsbGAgaWYgbm90IGZvdW5kKS5cbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldEZlYXR1cmVCeVVpZCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgdmFyIGZlYXR1cmUgPSB0aGlzLnVpZEluZGV4X1t1aWRdO1xuICAgICAgICByZXR1cm4gZmVhdHVyZSAhPT0gdW5kZWZpbmVkID8gZmVhdHVyZSA6IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGZvcm1hdCBhc3NvY2lhdGVkIHdpdGggdGhpcyBzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9mb3JtYXQvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIGZlYXR1cmUgZm9ybWF0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldEZvcm1hdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBzb3VyY2UgY2FuIGhhdmUgb3ZlcmxhcHBpbmcgZ2VvbWV0cmllcy5cbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldE92ZXJsYXBzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdmVybGFwc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHVybCBhc3NvY2lhdGVkIHdpdGggdGhpcyBzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8aW1wb3J0KFwiLi4vZmVhdHVyZWxvYWRlci5qc1wiKS5GZWF0dXJlVXJsRnVuY3Rpb258dW5kZWZpbmVkfSBUaGUgdXJsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldFVybCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXJsXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5oYW5kbGVGZWF0dXJlQ2hhbmdlXyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgZmVhdHVyZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pn0gKi8gKGV2ZW50LnRhcmdldCk7XG4gICAgICAgIHZhciBmZWF0dXJlS2V5ID0gZ2V0VWlkKGZlYXR1cmUpO1xuICAgICAgICB2YXIgZ2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG4gICAgICAgIGlmICghZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgIGlmICghKGZlYXR1cmVLZXkgaW4gdGhpcy5udWxsR2VvbWV0cnlGZWF0dXJlc18pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmVhdHVyZXNSdHJlZV8pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlc1J0cmVlXy5yZW1vdmUoZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfW2ZlYXR1cmVLZXldID0gZmVhdHVyZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBleHRlbnQgPSBnZW9tZXRyeS5nZXRFeHRlbnQoKTtcbiAgICAgICAgICAgIGlmIChmZWF0dXJlS2V5IGluIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfW2ZlYXR1cmVLZXldO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZlYXR1cmVzUnRyZWVfKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZXNSdHJlZV8uaW5zZXJ0KGV4dGVudCwgZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmVhdHVyZXNSdHJlZV8pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlc1J0cmVlXy51cGRhdGUoZXh0ZW50LCBmZWF0dXJlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlkID0gZmVhdHVyZS5nZXRJZCgpO1xuICAgICAgICBpZiAoaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIHNpZCA9IGlkLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pZEluZGV4X1tzaWRdICE9PSBmZWF0dXJlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGcm9tSWRJbmRleF8oZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pZEluZGV4X1tzaWRdID0gZmVhdHVyZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRnJvbUlkSW5kZXhfKGZlYXR1cmUpO1xuICAgICAgICAgICAgdGhpcy51aWRJbmRleF9bZmVhdHVyZUtleV0gPSBmZWF0dXJlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFZlY3RvclNvdXJjZUV2ZW50KFZlY3RvckV2ZW50VHlwZS5DSEFOR0VGRUFUVVJFLCBmZWF0dXJlKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGZlYXR1cmUgaXMgY29udGFpbmVkIHdpdGhpbiB0aGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pn0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IEhhcyBmZWF0dXJlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmhhc0ZlYXR1cmUgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICB2YXIgaWQgPSBmZWF0dXJlLmdldElkKCk7XG4gICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gaWQgaW4gdGhpcy5pZEluZGV4XztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRVaWQoZmVhdHVyZSkgaW4gdGhpcy51aWRJbmRleF87XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGVtcHR5LlxuICAgICAqL1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZXNSdHJlZV8uaXNFbXB0eSgpICYmIGlzRW1wdHkodGhpcy5udWxsR2VvbWV0cnlGZWF0dXJlc18pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqL1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUubG9hZEZlYXR1cmVzID0gZnVuY3Rpb24gKGV4dGVudCwgcmVzb2x1dGlvbiwgcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgbG9hZGVkRXh0ZW50c1J0cmVlID0gdGhpcy5sb2FkZWRFeHRlbnRzUnRyZWVfO1xuICAgICAgICB2YXIgZXh0ZW50c1RvTG9hZCA9IHRoaXMuc3RyYXRlZ3lfKGV4dGVudCwgcmVzb2x1dGlvbik7XG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChpLCBpaSkge1xuICAgICAgICAgICAgdmFyIGV4dGVudFRvTG9hZCA9IGV4dGVudHNUb0xvYWRbaV07XG4gICAgICAgICAgICB2YXIgYWxyZWFkeUxvYWRlZCA9IGxvYWRlZEV4dGVudHNSdHJlZS5mb3JFYWNoSW5FeHRlbnQoZXh0ZW50VG9Mb2FkLCBcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHBhcmFtIHt7ZXh0ZW50OiBpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fX0gb2JqZWN0IE9iamVjdC5cbiAgICAgICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5zRXh0ZW50KG9iamVjdC5leHRlbnQsIGV4dGVudFRvTG9hZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghYWxyZWFkeUxvYWRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXNfMS5kaXNwYXRjaEV2ZW50KG5ldyBWZWN0b3JTb3VyY2VFdmVudChWZWN0b3JFdmVudFR5cGUuRkVBVFVSRVNMT0FEU1RBUlQpKTtcbiAgICAgICAgICAgICAgICB0aGlzXzEubG9hZGVyXy5jYWxsKHRoaXNfMSwgZXh0ZW50VG9Mb2FkLCByZXNvbHV0aW9uLCBwcm9qZWN0aW9uLCBmdW5jdGlvbiAoZmVhdHVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBWZWN0b3JTb3VyY2VFdmVudChWZWN0b3JFdmVudFR5cGUuRkVBVFVSRVNMT0FERU5ELCB1bmRlZmluZWQsIGZlYXR1cmVzKSk7XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXNfMSksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBWZWN0b3JTb3VyY2VFdmVudChWZWN0b3JFdmVudFR5cGUuRkVBVFVSRVNMT0FERVJST1IpKTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpc18xKSk7XG4gICAgICAgICAgICAgICAgbG9hZGVkRXh0ZW50c1J0cmVlLmluc2VydChleHRlbnRUb0xvYWQsIHsgZXh0ZW50OiBleHRlbnRUb0xvYWQuc2xpY2UoKSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzXzEubG9hZGluZyA9IHRoaXNfMS5sb2FkZXJfICE9PSBWT0lEO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgdGhpc18xID0gdGhpcztcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZXh0ZW50c1RvTG9hZC5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBfbG9vcF8xKGksIGlpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNsZWFyKHRydWUpO1xuICAgICAgICB0aGlzLmxvYWRlZEV4dGVudHNSdHJlZV8uY2xlYXIoKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZWZyZXNoLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYW4gZXh0ZW50IGZyb20gdGhlIGxpc3Qgb2YgbG9hZGVkIGV4dGVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLnJlbW92ZUxvYWRlZEV4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgdmFyIGxvYWRlZEV4dGVudHNSdHJlZSA9IHRoaXMubG9hZGVkRXh0ZW50c1J0cmVlXztcbiAgICAgICAgdmFyIG9iajtcbiAgICAgICAgbG9hZGVkRXh0ZW50c1J0cmVlLmZvckVhY2hJbkV4dGVudChleHRlbnQsIGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChlcXVhbHMob2JqZWN0LmV4dGVudCwgZXh0ZW50KSkge1xuICAgICAgICAgICAgICAgIG9iaiA9IG9iamVjdDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChvYmopIHtcbiAgICAgICAgICAgIGxvYWRlZEV4dGVudHNSdHJlZS5yZW1vdmUob2JqKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgc2luZ2xlIGZlYXR1cmUgZnJvbSB0aGUgc291cmNlLiAgSWYgeW91IHdhbnQgdG8gcmVtb3ZlIGFsbCBmZWF0dXJlc1xuICAgICAqIGF0IG9uY2UsIHVzZSB0aGUge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yflZlY3RvclNvdXJjZSNjbGVhciAjY2xlYXIoKX0gbWV0aG9kXG4gICAgICogaW5zdGVhZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT59IGZlYXR1cmUgRmVhdHVyZSB0byByZW1vdmUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUucmVtb3ZlRmVhdHVyZSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgIHZhciBmZWF0dXJlS2V5ID0gZ2V0VWlkKGZlYXR1cmUpO1xuICAgICAgICBpZiAoZmVhdHVyZUtleSBpbiB0aGlzLm51bGxHZW9tZXRyeUZlYXR1cmVzXykge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfW2ZlYXR1cmVLZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuZmVhdHVyZXNSdHJlZV8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZlYXR1cmVzUnRyZWVfLnJlbW92ZShmZWF0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW92ZUZlYXR1cmVJbnRlcm5hbChmZWF0dXJlKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgZmVhdHVyZSB3aXRob3V0IGZpcmluZyBhIGBjaGFuZ2VgIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pn0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLnJlbW92ZUZlYXR1cmVJbnRlcm5hbCA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgIHZhciBmZWF0dXJlS2V5ID0gZ2V0VWlkKGZlYXR1cmUpO1xuICAgICAgICB0aGlzLmZlYXR1cmVDaGFuZ2VLZXlzX1tmZWF0dXJlS2V5XS5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICBkZWxldGUgdGhpcy5mZWF0dXJlQ2hhbmdlS2V5c19bZmVhdHVyZUtleV07XG4gICAgICAgIHZhciBpZCA9IGZlYXR1cmUuZ2V0SWQoKTtcbiAgICAgICAgaWYgKGlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmlkSW5kZXhfW2lkLnRvU3RyaW5nKCldO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSB0aGlzLnVpZEluZGV4X1tmZWF0dXJlS2V5XTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBWZWN0b3JTb3VyY2VFdmVudChWZWN0b3JFdmVudFR5cGUuUkVNT1ZFRkVBVFVSRSwgZmVhdHVyZSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgZmVhdHVyZSBmcm9tIHRoZSBpZCBpbmRleC4gIENhbGxlZCBpbnRlcm5hbGx5IHdoZW4gdGhlIGZlYXR1cmUgaWRcbiAgICAgKiBtYXkgaGF2ZSBjaGFuZ2VkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pn0gZmVhdHVyZSBUaGUgZmVhdHVyZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBSZW1vdmVkIHRoZSBmZWF0dXJlIGZyb20gdGhlIGluZGV4LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5yZW1vdmVGcm9tSWRJbmRleF8gPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICB2YXIgcmVtb3ZlZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLmlkSW5kZXhfKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pZEluZGV4X1tpZF0gPT09IGZlYXR1cmUpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5pZEluZGV4X1tpZF07XG4gICAgICAgICAgICAgICAgcmVtb3ZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlbW92ZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG5ldyBsb2FkZXIgb2YgdGhlIHNvdXJjZS4gVGhlIG5leHQgcmVuZGVyIGN5Y2xlIHdpbGwgdXNlIHRoZVxuICAgICAqIG5ldyBsb2FkZXIuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9mZWF0dXJlbG9hZGVyLmpzXCIpLkZlYXR1cmVMb2FkZXJ9IGxvYWRlciBUaGUgbG9hZGVyIHRvIHNldC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5zZXRMb2FkZXIgPSBmdW5jdGlvbiAobG9hZGVyKSB7XG4gICAgICAgIHRoaXMubG9hZGVyXyA9IGxvYWRlcjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFBvaW50cyB0aGUgc291cmNlIHRvIGEgbmV3IHVybC4gVGhlIG5leHQgcmVuZGVyIGN5Y2xlIHdpbGwgdXNlIHRoZSBuZXcgdXJsLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfGltcG9ydChcIi4uL2ZlYXR1cmVsb2FkZXIuanNcIikuRmVhdHVyZVVybEZ1bmN0aW9ufSB1cmwgVXJsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLnNldFVybCA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgYXNzZXJ0KHRoaXMuZm9ybWF0XywgNyk7IC8vIGBmb3JtYXRgIG11c3QgYmUgc2V0IHdoZW4gYHVybGAgaXMgc2V0XG4gICAgICAgIHRoaXMuc2V0TG9hZGVyKHhocih1cmwsIHRoaXMuZm9ybWF0XykpO1xuICAgIH07XG4gICAgcmV0dXJuIFZlY3RvclNvdXJjZTtcbn0oU291cmNlKSk7XG5leHBvcnQgZGVmYXVsdCBWZWN0b3JTb3VyY2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1WZWN0b3IuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9UaWxlXG4gKi9cbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4vdXRpbC5qcyc7XG5pbXBvcnQgeyBlYXNlSW4gfSBmcm9tICcuL2Vhc2luZy5qcyc7XG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL1RpbGV9IGZvciB0aGUgdGlsZSBhbmQgYVxuICogYHtzdHJpbmd9YCBmb3IgdGhlIHVybCBhcyBhcmd1bWVudHMuIFRoZSBkZWZhdWx0IGlzXG4gKiBgYGBqc1xuICogc291cmNlLnNldFRpbGVMb2FkRnVuY3Rpb24oZnVuY3Rpb24odGlsZSwgc3JjKSB7XG4gKiAgIHRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiB9KTtcbiAqIGBgYFxuICogRm9yIG1vcmUgZmluZSBncmFpbmVkIGNvbnRyb2wsIHRoZSBsb2FkIGZ1bmN0aW9uIGNhbiB1c2UgZmV0Y2ggb3IgWE1MSHR0cFJlcXVlc3QgYW5kIGludm9sdmVcbiAqIGVycm9yIGhhbmRsaW5nOlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQgVGlsZVN0YXRlIGZyb20gJ29sL1RpbGVTdGF0ZSc7XG4gKlxuICogc291cmNlLnNldFRpbGVMb2FkRnVuY3Rpb24oZnVuY3Rpb24odGlsZSwgc3JjKSB7XG4gKiAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAqICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJztcbiAqICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlbmQnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gKiAgICAgdmFyIGRhdGEgPSB0aGlzLnJlc3BvbnNlO1xuICogICAgIGlmIChkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAqICAgICAgIHRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGRhdGEpO1xuICogICAgIH0gZWxzZSB7XG4gKiAgICAgICB0aWxlLnNldFN0YXRlKFRpbGVTdGF0ZS5FUlJPUik7XG4gKiAgICAgfVxuICogICB9KTtcbiAqICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24gKCkge1xuICogICAgIHRpbGUuc2V0U3RhdGUoVGlsZVN0YXRlLkVSUk9SKTtcbiAqICAgfSk7XG4gKiAgIHhoci5vcGVuKCdHRVQnLCBzcmMpO1xuICogICB4aHIuc2VuZCgpO1xuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oVGlsZSwgc3RyaW5nKTogdm9pZH0gTG9hZEZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cbi8qKlxuICoge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZX5UaWxlfSBzb3VyY2VzIHVzZSBhIGZ1bmN0aW9uIG9mIHRoaXMgdHlwZSB0byBnZXRcbiAqIHRoZSB1cmwgdGhhdCBwcm92aWRlcyBhIHRpbGUgZm9yIGEgZ2l2ZW4gdGlsZSBjb29yZGluYXRlLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC90aWxlY29vcmR+VGlsZUNvb3JkfSBmb3IgdGhlIHRpbGVcbiAqIGNvb3JkaW5hdGUsIGEgYHtudW1iZXJ9YCByZXByZXNlbnRpbmcgdGhlIHBpeGVsIHJhdGlvIGFuZCBhXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn0gZm9yIHRoZSBwcm9qZWN0aW9uICBhcyBhcmd1bWVudHNcbiAqIGFuZCByZXR1cm5zIGEgYHtzdHJpbmd9YCByZXByZXNlbnRpbmcgdGhlIHRpbGUgVVJMLCBvciB1bmRlZmluZWQgaWYgbm8gdGlsZVxuICogc2hvdWxkIGJlIHJlcXVlc3RlZCBmb3IgdGhlIHBhc3NlZCB0aWxlIGNvb3JkaW5hdGUuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKGltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCwgbnVtYmVyLFxuICogICAgICAgICAgIGltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHQpOiAoc3RyaW5nfHVuZGVmaW5lZCl9IFVybEZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0cmFuc2l0aW9uPTI1MF0gQSBkdXJhdGlvbiBmb3IgdGlsZSBvcGFjaXR5XG4gKiB0cmFuc2l0aW9ucyBpbiBtaWxsaXNlY29uZHMuIEEgZHVyYXRpb24gb2YgMCBkaXNhYmxlcyB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uLlxuICogQGFwaVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHRpbGVzLlxuICpcbiAqIEBhYnN0cmFjdFxuICovXG52YXIgVGlsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZVN0YXRlLmpzXCIpLmRlZmF1bHR9IHN0YXRlIFN0YXRlLlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIFRpbGUgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlKHRpbGVDb29yZCwgc3RhdGUsIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVDb29yZCA9IHRpbGVDb29yZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vVGlsZVN0YXRlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQW4gXCJpbnRlcmltXCIgdGlsZSBmb3IgdGhpcyB0aWxlLiBUaGUgaW50ZXJpbSB0aWxlIG1heSBiZSB1c2VkIHdoaWxlIHRoaXNcbiAgICAgICAgICogb25lIGlzIGxvYWRpbmcsIGZvciBcInNtb290aFwiIHRyYW5zaXRpb25zIHdoZW4gY2hhbmdpbmcgcGFyYW1zL2RpbWVuc2lvbnNcbiAgICAgICAgICogb24gdGhlIHNvdXJjZS5cbiAgICAgICAgICogQHR5cGUge1RpbGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbnRlcmltVGlsZSA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGlsZSBpcyBhdmFpbGFibGUgYXQgdGhlIGhpZ2hlc3QgcG9zc2libGUgcmVzb2x1dGlvbi4gU3ViY2xhc3NlcyBjYW5cbiAgICAgICAgICogc2V0IHRoaXMgdG8gYGZhbHNlYCBpbml0aWFsbHkuIFRpbGUgbG9hZCBsaXN0ZW5lcnMgd2lsbCBub3QgYmVcbiAgICAgICAgICogdW5yZWdpc3RlcmVkIGJlZm9yZSB0aGlzIGlzIHNldCB0byBgdHJ1ZWAgYW5kIGEgYCNjaGFuZ2VkKClgIGlzIGNhbGxlZC5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5oaWZpID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEga2V5IGFzc2lnbmVkIHRvIHRoZSB0aWxlLiBUaGlzIGlzIHVzZWQgYnkgdGhlIHRpbGUgc291cmNlIHRvIGRldGVybWluZVxuICAgICAgICAgKiBpZiB0aGlzIHRpbGUgY2FuIGVmZmVjdGl2ZWx5IGJlIHVzZWQsIG9yIGlmIGEgbmV3IHRpbGUgc2hvdWxkIGJlIGNyZWF0ZWRcbiAgICAgICAgICogYW5kIHRoaXMgb25lIGJlIHVzZWQgYXMgYW4gaW50ZXJpbSB0aWxlIGZvciB0aGlzIG5ldyB0aWxlLlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMua2V5ID0gJyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZHVyYXRpb24gZm9yIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24uXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmFuc2l0aW9uXyA9XG4gICAgICAgICAgICBvcHRpb25zLnRyYW5zaXRpb24gPT09IHVuZGVmaW5lZCA/IDI1MCA6IG9wdGlvbnMudHJhbnNpdGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIExvb2t1cCBvZiBzdGFydCB0aW1lcyBmb3IgcmVuZGVyaW5nIHRyYW5zaXRpb25zLiAgSWYgdGhlIHN0YXJ0IHRpbWUgaXNcbiAgICAgICAgICogZXF1YWwgdG8gLTEsIHRoZSB0cmFuc2l0aW9uIGlzIGNvbXBsZXRlLlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgbnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyYW5zaXRpb25TdGFydHNfID0ge307XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChFdmVudFR5cGUuQ0hBTkdFKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhbGxlZCBieSB0aGUgdGlsZSBjYWNoZSB3aGVuIHRoZSB0aWxlIGlzIHJlbW92ZWQgZnJvbSB0aGUgY2FjaGUgZHVlIHRvIGV4cGlyeVxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLnJlbGVhc2UgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBLZXkuXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuZ2V0S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXkgKyAnLycgKyB0aGlzLnRpbGVDb29yZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaW50ZXJpbSB0aWxlIG1vc3Qgc3VpdGFibGUgZm9yIHJlbmRlcmluZyB1c2luZyB0aGUgY2hhaW4gb2YgaW50ZXJpbVxuICAgICAqIHRpbGVzLiBUaGlzIGNvcnJlc3BvbmRzIHRvIHRoZSAgbW9zdCByZWNlbnQgdGlsZSB0aGF0IGhhcyBiZWVuIGxvYWRlZCwgaWYgbm9cbiAgICAgKiBzdWNoIHRpbGUgZXhpc3RzLCB0aGUgb3JpZ2luYWwgdGlsZSBpcyByZXR1cm5lZC5cbiAgICAgKiBAcmV0dXJuIHshVGlsZX0gQmVzdCB0aWxlIGZvciByZW5kZXJpbmcuXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuZ2V0SW50ZXJpbVRpbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pbnRlcmltVGlsZSkge1xuICAgICAgICAgICAgLy9lbXB0eSBjaGFpblxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpbGUgPSB0aGlzLmludGVyaW1UaWxlO1xuICAgICAgICAvLyBmaW5kIHRoZSBmaXJzdCBsb2FkZWQgdGlsZSBhbmQgcmV0dXJuIGl0LiBTaW5jZSB0aGUgY2hhaW4gaXMgc29ydGVkIGluXG4gICAgICAgIC8vIGRlY3JlYXNpbmcgb3JkZXIgb2YgY3JlYXRpb24gdGltZSwgdGhlcmUgaXMgbm8gbmVlZCB0byBzZWFyY2ggdGhlIHJlbWFpbmRlclxuICAgICAgICAvLyBvZiB0aGUgbGlzdCAoYWxsIHRob3NlIHRpbGVzIGNvcnJlc3BvbmQgdG8gb2xkZXIgcmVxdWVzdHMgYW5kIHdpbGwgYmVcbiAgICAgICAgLy8gY2xlYW5lZCB1cCBieSByZWZyZXNoSW50ZXJpbUNoYWluKVxuICAgICAgICBkbyB7XG4gICAgICAgICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgICAgICAgICAvLyBTaG93IHRpbGUgaW1tZWRpYXRlbHkgaW5zdGVhZCBvZiBmYWRpbmcgaXQgaW4gYWZ0ZXIgbG9hZGluZywgYmVjYXVzZVxuICAgICAgICAgICAgICAgIC8vIHRoZSBpbnRlcmltIHRpbGUgaXMgaW4gcGxhY2UgYWxyZWFkeVxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbl8gPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGlsZSA9IHRpbGUuaW50ZXJpbVRpbGU7XG4gICAgICAgIH0gd2hpbGUgKHRpbGUpO1xuICAgICAgICAvLyB3ZSBjYW4gbm90IGZpbmQgYSBiZXR0ZXIgdGlsZVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdvZXMgdGhyb3VnaCB0aGUgY2hhaW4gb2YgaW50ZXJpbSB0aWxlcyBhbmQgZGlzY2FyZHMgc2VjdGlvbnMgb2YgdGhlIGNoYWluXG4gICAgICogdGhhdCBhcmUgbm8gbG9uZ2VyIHJlbGV2YW50LlxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLnJlZnJlc2hJbnRlcmltQ2hhaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pbnRlcmltVGlsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aWxlID0gdGhpcy5pbnRlcmltVGlsZTtcbiAgICAgICAgdmFyIHByZXYgPSAvKiogQHR5cGUge1RpbGV9ICovICh0aGlzKTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICAgICAgLy93ZSBoYXZlIGEgbG9hZGVkIHRpbGUsIHdlIGNhbiBkaXNjYXJkIHRoZSByZXN0IG9mIHRoZSBsaXN0XG4gICAgICAgICAgICAgICAgLy93ZSB3b3VsZCBjb3VsZCBhYm9ydCBhbnkgTE9BRElORyB0aWxlIHJlcXVlc3RcbiAgICAgICAgICAgICAgICAvL29sZGVyIHRoYW4gdGhpcyB0aWxlIChpLmUuIGFueSBMT0FESU5HIHRpbGUgZm9sbG93aW5nIHRoaXMgZW50cnkgaW4gdGhlIGNoYWluKVxuICAgICAgICAgICAgICAgIHRpbGUuaW50ZXJpbVRpbGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FESU5HKSB7XG4gICAgICAgICAgICAgICAgLy9rZWVwIHRoaXMgTE9BRElORyB0aWxlIGFueSBsb2FkZWQgdGlsZXMgbGF0ZXIgaW4gdGhlIGNoYWluIGFyZVxuICAgICAgICAgICAgICAgIC8vb2xkZXIgdGhhbiB0aGlzIHRpbGUsIHNvIHdlJ3JlIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhlIHJlcXVlc3RcbiAgICAgICAgICAgICAgICBwcmV2ID0gdGlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgICAgIC8vdGhlIGhlYWQgb2YgdGhlIGxpc3QgaXMgdGhlIG1vc3QgY3VycmVudCB0aWxlLCB3ZSBkb24ndCBuZWVkXG4gICAgICAgICAgICAgICAgLy90byBzdGFydCBhbnkgb3RoZXIgcmVxdWVzdHMgZm9yIHRoaXMgY2hhaW5cbiAgICAgICAgICAgICAgICBwcmV2LmludGVyaW1UaWxlID0gdGlsZS5pbnRlcmltVGlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByZXYgPSB0aWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGlsZSA9IHByZXYuaW50ZXJpbVRpbGU7XG4gICAgICAgIH0gd2hpbGUgKHRpbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0aWxlIGNvb3JkaW5hdGUgZm9yIHRoaXMgdGlsZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRoZSB0aWxlIGNvb3JkaW5hdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmdldFRpbGVDb29yZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZUNvb3JkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9UaWxlU3RhdGUuanNcIikuZGVmYXVsdH0gU3RhdGUuXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc3RhdGUgb2YgdGhpcyB0aWxlLiBJZiB5b3Ugd3JpdGUgeW91ciBvd24ge0BsaW5rIG1vZHVsZTpvbC9UaWxlfkxvYWRGdW5jdGlvbiB0aWxlTG9hZEZ1bmN0aW9ufSAsXG4gICAgICogaXQgaXMgaW1wb3J0YW50IHRvIHNldCB0aGUgc3RhdGUgY29ycmVjdGx5IHRvIHtAbGluayBtb2R1bGU6b2wvVGlsZVN0YXRlfkVSUk9SfVxuICAgICAqIHdoZW4gdGhlIHRpbGUgY2Fubm90IGJlIGxvYWRlZC4gT3RoZXJ3aXNlIHRoZSB0aWxlIGNhbm5vdCBiZSByZW1vdmVkIGZyb21cbiAgICAgKiB0aGUgdGlsZSBxdWV1ZSBhbmQgd2lsbCBibG9jayBvdGhlciByZXF1ZXN0cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZVN0YXRlLmpzXCIpLmRlZmF1bHR9IHN0YXRlIFN0YXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gVGlsZVN0YXRlLkVSUk9SICYmIHRoaXMuc3RhdGUgPiBzdGF0ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaWxlIGxvYWQgc2VxdWVuY2UgdmlvbGF0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIGltYWdlIG9yIHJldHJ5IGlmIGxvYWRpbmcgcHJldmlvdXNseSBmYWlsZWQuXG4gICAgICogTG9hZGluZyBpcyB0YWtlbiBjYXJlIG9mIGJ5IHRoZSB0aWxlIHF1ZXVlLCBhbmQgY2FsbGluZyB0aGlzIG1ldGhvZCBpc1xuICAgICAqIG9ubHkgbmVlZGVkIGZvciBwcmVsb2FkaW5nIG9yIGZvciByZWxvYWRpbmcgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYWxwaGEgdmFsdWUgZm9yIHJlbmRlcmluZy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgQW4gaWQgZm9yIHRoZSByZW5kZXJlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGltZSBUaGUgcmVuZGVyIGZyYW1lIHRpbWUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBBIG51bWJlciBiZXR3ZWVuIDAgYW5kIDEuXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuZ2V0QWxwaGEgPSBmdW5jdGlvbiAoaWQsIHRpbWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zaXRpb25fKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLnRyYW5zaXRpb25TdGFydHNfW2lkXTtcbiAgICAgICAgaWYgKCFzdGFydCkge1xuICAgICAgICAgICAgc3RhcnQgPSB0aW1lO1xuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uU3RhcnRzX1tpZF0gPSBzdGFydDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdGFydCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZWx0YSA9IHRpbWUgLSBzdGFydCArIDEwMDAgLyA2MDsgLy8gYXZvaWQgcmVuZGVyaW5nIGF0IDBcbiAgICAgICAgaWYgKGRlbHRhID49IHRoaXMudHJhbnNpdGlvbl8pIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlYXNlSW4oZGVsdGEgLyB0aGlzLnRyYW5zaXRpb25fKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVybWluZSBpZiBhIHRpbGUgaXMgaW4gYW4gYWxwaGEgdHJhbnNpdGlvbi4gIEEgdGlsZSBpcyBjb25zaWRlcmVkIGluXG4gICAgICogdHJhbnNpdGlvbiBpZiB0aWxlLmdldEFscGhhKCkgaGFzIG5vdCB5ZXQgYmVlbiBjYWxsZWQgb3IgaGFzIGJlZW4gY2FsbGVkXG4gICAgICogYW5kIHJldHVybmVkIDEuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkIEFuIGlkIGZvciB0aGUgcmVuZGVyZXIuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHRpbGUgaXMgaW4gdHJhbnNpdGlvbi5cbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5pblRyYW5zaXRpb24gPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zaXRpb25fKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNpdGlvblN0YXJ0c19baWRdICE9PSAtMTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1hcmsgYSB0cmFuc2l0aW9uIGFzIGNvbXBsZXRlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBBbiBpZCBmb3IgdGhlIHJlbmRlcmVyLlxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmVuZFRyYW5zaXRpb24gPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgaWYgKHRoaXMudHJhbnNpdGlvbl8pIHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvblN0YXJ0c19baWRdID0gLTE7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBUaWxlO1xufShFdmVudFRhcmdldCkpO1xuZXhwb3J0IGRlZmF1bHQgVGlsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9JbWFnZVRpbGVcbiAqL1xuaW1wb3J0IFRpbGUgZnJvbSAnLi9UaWxlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FudmFzQ29udGV4dDJEIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgbGlzdGVuSW1hZ2UgfSBmcm9tICcuL0ltYWdlLmpzJztcbnZhciBJbWFnZVRpbGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEltYWdlVGlsZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZVN0YXRlLmpzXCIpLmRlZmF1bHR9IHN0YXRlIFN0YXRlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgSW1hZ2Ugc291cmNlIFVSSS5cbiAgICAgKiBAcGFyYW0gez9zdHJpbmd9IGNyb3NzT3JpZ2luIENyb3NzIG9yaWdpbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IHRpbGVMb2FkRnVuY3Rpb24gVGlsZSBsb2FkIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLk9wdGlvbnM9fSBvcHRfb3B0aW9ucyBUaWxlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gSW1hZ2VUaWxlKHRpbGVDb29yZCwgc3RhdGUsIHNyYywgY3Jvc3NPcmlnaW4sIHRpbGVMb2FkRnVuY3Rpb24sIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHRpbGVDb29yZCwgc3RhdGUsIG9wdF9vcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9zdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jcm9zc09yaWdpbl8gPSBjcm9zc09yaWdpbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEltYWdlIFVSSVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3JjXyA9IHNyYztcbiAgICAgICAgX3RoaXMua2V5ID0gc3JjO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZV8gPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaWYgKGNyb3NzT3JpZ2luICE9PSBudWxsKSB7XG4gICAgICAgICAgICBfdGhpcy5pbWFnZV8uY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9mdW5jdGlvbigpOnZvaWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bmxpc3Rlbl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlTG9hZEZ1bmN0aW9uXyA9IHRpbGVMb2FkRnVuY3Rpb247XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBIVE1MIGltYWdlIGVsZW1lbnQgZm9yIHRoaXMgdGlsZSAobWF5IGJlIGEgQ2FudmFzLCBJbWFnZSwgb3IgVmlkZW8pLlxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gSW1hZ2UuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlVGlsZS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmltYWdlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYWNrcyBsb2FkaW5nIG9yIHJlYWQgZXJyb3JzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVRpbGUucHJvdG90eXBlLmhhbmRsZUltYWdlRXJyb3JfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVSUk9SO1xuICAgICAgICB0aGlzLnVubGlzdGVuSW1hZ2VfKCk7XG4gICAgICAgIHRoaXMuaW1hZ2VfID0gZ2V0QmxhbmtJbWFnZSgpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYWNrcyBzdWNjZXNzZnVsIGltYWdlIGxvYWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEltYWdlVGlsZS5wcm90b3R5cGUuaGFuZGxlSW1hZ2VMb2FkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGltYWdlID0gLyoqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fSAqLyAodGhpcy5pbWFnZV8pO1xuICAgICAgICBpZiAoaW1hZ2UubmF0dXJhbFdpZHRoICYmIGltYWdlLm5hdHVyYWxIZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BREVEO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVubGlzdGVuSW1hZ2VfKCk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZCBub3QgeWV0IGxvYWRlZCBVUkkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlVGlsZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gVGlsZVN0YXRlLkVSUk9SKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLklETEU7XG4gICAgICAgICAgICB0aGlzLmltYWdlXyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY3Jvc3NPcmlnaW5fICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZV8uY3Jvc3NPcmlnaW4gPSB0aGlzLmNyb3NzT3JpZ2luXztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5MT0FESU5HO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgICAgICB0aGlzLnRpbGVMb2FkRnVuY3Rpb25fKHRoaXMsIHRoaXMuc3JjXyk7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuXyA9IGxpc3RlbkltYWdlKHRoaXMuaW1hZ2VfLCB0aGlzLmhhbmRsZUltYWdlTG9hZF8uYmluZCh0aGlzKSwgdGhpcy5oYW5kbGVJbWFnZUVycm9yXy5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRGlzY2FyZHMgZXZlbnQgaGFuZGxlcnMgd2hpY2ggbGlzdGVuIGZvciBsb2FkIGNvbXBsZXRpb24gb3IgZXJyb3JzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVRpbGUucHJvdG90eXBlLnVubGlzdGVuSW1hZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy51bmxpc3Rlbl8pIHtcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5fKCk7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBJbWFnZVRpbGU7XG59KFRpbGUpKTtcbi8qKlxuICogR2V0IGEgMS1waXhlbCBibGFuayBpbWFnZS5cbiAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fSBCbGFuayBpbWFnZS5cbiAqL1xuZnVuY3Rpb24gZ2V0QmxhbmtJbWFnZSgpIHtcbiAgICB2YXIgY3R4ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKDEsIDEpO1xuICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLDAsMCwwKSc7XG4gICAgY3R4LmZpbGxSZWN0KDAsIDAsIDEsIDEpO1xuICAgIHJldHVybiBjdHguY2FudmFzO1xufVxuZXhwb3J0IGRlZmF1bHQgSW1hZ2VUaWxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW1hZ2VUaWxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2ovVHJpYW5ndWxhdGlvblxuICovXG5pbXBvcnQgeyBib3VuZGluZ0V4dGVudCwgY3JlYXRlRW1wdHksIGV4dGVuZENvb3JkaW5hdGUsIGdldEFyZWEsIGdldEJvdHRvbUxlZnQsIGdldEJvdHRvbVJpZ2h0LCBnZXRUb3BMZWZ0LCBnZXRUb3BSaWdodCwgZ2V0V2lkdGgsIGludGVyc2VjdHMsIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGdldFRyYW5zZm9ybSB9IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IHsgbG9nMiwgbW9kdWxvIH0gZnJvbSAnLi4vbWF0aC5qcyc7XG4vKipcbiAqIFNpbmdsZSB0cmlhbmdsZTsgY29uc2lzdHMgb2YgMyBzb3VyY2UgcG9pbnRzIGFuZCAzIHRhcmdldCBwb2ludHMuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUcmlhbmdsZVxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBzb3VyY2VcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gdGFyZ2V0XG4gKi9cbi8qKlxuICogTWF4aW11bSBudW1iZXIgb2Ygc3ViZGl2aXNpb24gc3RlcHMgZHVyaW5nIHJhc3RlciByZXByb2plY3Rpb24gdHJpYW5ndWxhdGlvbi5cbiAqIFByZXZlbnRzIGhpZ2ggbWVtb3J5IHVzYWdlIGFuZCBsYXJnZSBudW1iZXIgb2YgcHJvajQgY2FsbHMgKGZvciBjZXJ0YWluXG4gKiB0cmFuc2Zvcm1hdGlvbnMgYW5kIGFyZWFzKS4gQXQgbW9zdCBgMiooMl50aGlzKWAgdHJpYW5nbGVzIGFyZSBjcmVhdGVkIGZvclxuICogZWFjaCB0cmlhbmd1bGF0ZWQgZXh0ZW50ICh0aWxlL2ltYWdlKS5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBNQVhfU1VCRElWSVNJT04gPSAxMDtcbi8qKlxuICogTWF4aW11bSBhbGxvd2VkIHNpemUgb2YgdHJpYW5nbGUgcmVsYXRpdmUgdG8gd29ybGQgd2lkdGguIFdoZW4gdHJhbnNmb3JtaW5nXG4gKiBjb3JuZXJzIG9mIHdvcmxkIGV4dGVudCBiZXR3ZWVuIGNlcnRhaW4gcHJvamVjdGlvbnMsIHRoZSByZXN1bHRpbmdcbiAqIHRyaWFuZ3VsYXRpb24gc2VlbXMgdG8gaGF2ZSB6ZXJvIGVycm9yIGFuZCBubyBzdWJkaXZpc2lvbiBpcyBwZXJmb3JtZWQuIElmXG4gKiB0aGUgdHJpYW5nbGUgd2lkdGggaXMgbW9yZSB0aGFuIHRoaXMgKHJlbGF0aXZlIHRvIHdvcmxkIHdpZHRoOyAwLTEpLFxuICogc3ViZGl2aXNvbiBpcyBmb3JjZWQgKHVwIHRvIGBNQVhfU1VCRElWSVNJT05gKS4gRGVmYXVsdCBpcyBgMC4yNWAuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG52YXIgTUFYX1RSSUFOR0xFX1dJRFRIID0gMC4yNTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ2xhc3MgY29udGFpbmluZyB0cmlhbmd1bGF0aW9uIG9mIHRoZSBnaXZlbiB0YXJnZXQgZXh0ZW50LlxuICogVXNlZCBmb3IgZGV0ZXJtaW5pbmcgc291cmNlIGRhdGEgYW5kIHRoZSByZXByb2plY3Rpb24gaXRzZWxmLlxuICovXG52YXIgVHJpYW5ndWxhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2VQcm9qIFNvdXJjZSBwcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHRhcmdldFByb2ogVGFyZ2V0IHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSB0YXJnZXRFeHRlbnQgVGFyZ2V0IGV4dGVudCB0byB0cmlhbmd1bGF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IG1heFNvdXJjZUV4dGVudCBNYXhpbWFsIHNvdXJjZSBleHRlbnQgdGhhdCBjYW4gYmUgdXNlZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZXJyb3JUaHJlc2hvbGQgQWNjZXB0YWJsZSBlcnJvciAoaW4gc291cmNlIHVuaXRzKS5cbiAgICAgKiBAcGFyYW0gez9udW1iZXJ9IG9wdF9kZXN0aW5hdGlvblJlc29sdXRpb24gVGhlIChvcHRpb25hbCkgcmVzb2x1dGlvbiBvZiB0aGUgZGVzdGluYXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gVHJpYW5ndWxhdGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCB0YXJnZXRFeHRlbnQsIG1heFNvdXJjZUV4dGVudCwgZXJyb3JUaHJlc2hvbGQsIG9wdF9kZXN0aW5hdGlvblJlc29sdXRpb24pIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc291cmNlUHJval8gPSBzb3VyY2VQcm9qO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YXJnZXRQcm9qXyA9IHRhcmdldFByb2o7XG4gICAgICAgIC8qKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59ICovXG4gICAgICAgIHZhciB0cmFuc2Zvcm1JbnZDYWNoZSA9IHt9O1xuICAgICAgICB2YXIgdHJhbnNmb3JtSW52ID0gZ2V0VHJhbnNmb3JtKHRoaXMudGFyZ2V0UHJval8sIHRoaXMuc291cmNlUHJval8pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGMgQSBjb29yZGluYXRlLlxuICAgICAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGUuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRyYW5zZm9ybUludl8gPSBmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgdmFyIGtleSA9IGNbMF0gKyAnLycgKyBjWzFdO1xuICAgICAgICAgICAgaWYgKCF0cmFuc2Zvcm1JbnZDYWNoZVtrZXldKSB7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtSW52Q2FjaGVba2V5XSA9IHRyYW5zZm9ybUludihjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cmFuc2Zvcm1JbnZDYWNoZVtrZXldO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heFNvdXJjZUV4dGVudF8gPSBtYXhTb3VyY2VFeHRlbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lcnJvclRocmVzaG9sZFNxdWFyZWRfID0gZXJyb3JUaHJlc2hvbGQgKiBlcnJvclRocmVzaG9sZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxUcmlhbmdsZT59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRyaWFuZ2xlc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSB0cmlhbmd1bGF0aW9uIGNyb3NzZXMgZWRnZSBvZiB0aGUgc291cmNlIHByb2plY3Rpb24uXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53cmFwc1hJblNvdXJjZV8gPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYW5XcmFwWEluU291cmNlXyA9XG4gICAgICAgICAgICB0aGlzLnNvdXJjZVByb2pfLmNhbldyYXBYKCkgJiZcbiAgICAgICAgICAgICAgICAhIW1heFNvdXJjZUV4dGVudCAmJlxuICAgICAgICAgICAgICAgICEhdGhpcy5zb3VyY2VQcm9qXy5nZXRFeHRlbnQoKSAmJlxuICAgICAgICAgICAgICAgIGdldFdpZHRoKG1heFNvdXJjZUV4dGVudCkgPT0gZ2V0V2lkdGgodGhpcy5zb3VyY2VQcm9qXy5nZXRFeHRlbnQoKSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7P251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc291cmNlV29ybGRXaWR0aF8gPSB0aGlzLnNvdXJjZVByb2pfLmdldEV4dGVudCgpXG4gICAgICAgICAgICA/IGdldFdpZHRoKHRoaXMuc291cmNlUHJval8uZ2V0RXh0ZW50KCkpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7P251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFyZ2V0V29ybGRXaWR0aF8gPSB0aGlzLnRhcmdldFByb2pfLmdldEV4dGVudCgpXG4gICAgICAgICAgICA/IGdldFdpZHRoKHRoaXMudGFyZ2V0UHJval8uZ2V0RXh0ZW50KCkpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvblRvcExlZnQgPSBnZXRUb3BMZWZ0KHRhcmdldEV4dGVudCk7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvblRvcFJpZ2h0ID0gZ2V0VG9wUmlnaHQodGFyZ2V0RXh0ZW50KTtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uQm90dG9tUmlnaHQgPSBnZXRCb3R0b21SaWdodCh0YXJnZXRFeHRlbnQpO1xuICAgICAgICB2YXIgZGVzdGluYXRpb25Cb3R0b21MZWZ0ID0gZ2V0Qm90dG9tTGVmdCh0YXJnZXRFeHRlbnQpO1xuICAgICAgICB2YXIgc291cmNlVG9wTGVmdCA9IHRoaXMudHJhbnNmb3JtSW52XyhkZXN0aW5hdGlvblRvcExlZnQpO1xuICAgICAgICB2YXIgc291cmNlVG9wUmlnaHQgPSB0aGlzLnRyYW5zZm9ybUludl8oZGVzdGluYXRpb25Ub3BSaWdodCk7XG4gICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodCA9IHRoaXMudHJhbnNmb3JtSW52XyhkZXN0aW5hdGlvbkJvdHRvbVJpZ2h0KTtcbiAgICAgICAgdmFyIHNvdXJjZUJvdHRvbUxlZnQgPSB0aGlzLnRyYW5zZm9ybUludl8oZGVzdGluYXRpb25Cb3R0b21MZWZ0KTtcbiAgICAgICAgLypcbiAgICAgICAgICogVGhlIG1heFN1YmRpdmlzaW9uIGNvbnRyb2xzIGhvdyBtYW55IHNwbGl0dGluZ3Mgb2YgdGhlIHRhcmdldCBhcmVhIGNhblxuICAgICAgICAgKiBiZSBkb25lLiBUaGUgaWRlYSBoZXJlIGlzIHRvIGRvIGEgbGluZWFyIG1hcHBpbmcgb2YgdGhlIHRhcmdldCBhcmVhc1xuICAgICAgICAgKiBidXQgdGhlIGFjdHVhbCBvdmVyYWwgcmVwcm9qZWN0aW9uIChjYW4gYmUpIGV4dHJlbWVseSBub24tbGluZWFyLiBUaGVcbiAgICAgICAgICogZGVmYXVsdCB2YWx1ZSBvZiBNQVhfU1VCRElWSVNJT04gd2FzIGNob3NlbiBiYXNlZCBvbiBtYXBwaW5nIGEgMjU2eDI1NlxuICAgICAgICAgKiB0aWxlIHNpemUuIEhvd2V2ZXIgdGhpcyBmdW5jdGlvbiBpcyBhbHNvIGNhbGxlZCB0byByZW1hcCBjYW52YXMgcmVuZGVyZWRcbiAgICAgICAgICogbGF5ZXJzIHdoaWNoIGNhbiBiZSBtdWNoIGxhcmdlci4gVGhpcyBjYWxjdWxhdGlvbiBpbmNyZWFzZXMgdGhlIG1heFN1YmRpdmlzaW9uXG4gICAgICAgICAqIHZhbHVlIGJ5IHRoZSByaWdodCBmYWN0b3Igc28gdGhhdCBlYWNoIDI1NngyNTYgcGl4ZWwgYXJlYSBoYXNcbiAgICAgICAgICogTUFYX1NVQkRJVklTSU9OIGRpdmlzaW9ucy5cbiAgICAgICAgICovXG4gICAgICAgIHZhciBtYXhTdWJkaXZpc2lvbiA9IE1BWF9TVUJESVZJU0lPTiArXG4gICAgICAgICAgICAob3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvblxuICAgICAgICAgICAgICAgID8gTWF0aC5tYXgoMCwgTWF0aC5jZWlsKGxvZzIoZ2V0QXJlYSh0YXJnZXRFeHRlbnQpIC9cbiAgICAgICAgICAgICAgICAgICAgKG9wdF9kZXN0aW5hdGlvblJlc29sdXRpb24gKlxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvbiAqXG4gICAgICAgICAgICAgICAgICAgICAgICAyNTYgKlxuICAgICAgICAgICAgICAgICAgICAgICAgMjU2KSkpKVxuICAgICAgICAgICAgICAgIDogMCk7XG4gICAgICAgIHRoaXMuYWRkUXVhZF8oZGVzdGluYXRpb25Ub3BMZWZ0LCBkZXN0aW5hdGlvblRvcFJpZ2h0LCBkZXN0aW5hdGlvbkJvdHRvbVJpZ2h0LCBkZXN0aW5hdGlvbkJvdHRvbUxlZnQsIHNvdXJjZVRvcExlZnQsIHNvdXJjZVRvcFJpZ2h0LCBzb3VyY2VCb3R0b21SaWdodCwgc291cmNlQm90dG9tTGVmdCwgbWF4U3ViZGl2aXNpb24pO1xuICAgICAgICBpZiAodGhpcy53cmFwc1hJblNvdXJjZV8pIHtcbiAgICAgICAgICAgIHZhciBsZWZ0Qm91bmRfMSA9IEluZmluaXR5O1xuICAgICAgICAgICAgdGhpcy50cmlhbmdsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRyaWFuZ2xlLCBpLCBhcnIpIHtcbiAgICAgICAgICAgICAgICBsZWZ0Qm91bmRfMSA9IE1hdGgubWluKGxlZnRCb3VuZF8xLCB0cmlhbmdsZS5zb3VyY2VbMF1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsxXVswXSwgdHJpYW5nbGUuc291cmNlWzJdWzBdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gU2hpZnQgdHJpYW5nbGVzIHRvIGJlIGFzIGNsb3NlIHRvIGBsZWZ0Qm91bmRgIGFzIHBvc3NpYmxlXG4gICAgICAgICAgICAvLyAoaWYgdGhlIGRpc3RhbmNlIGlzIG1vcmUgdGhhbiBgd29ybGRXaWR0aCAvIDJgIGl0IGNhbiBiZSBjbG9zZXIuXG4gICAgICAgICAgICB0aGlzLnRyaWFuZ2xlc18uZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5tYXgodHJpYW5nbGUuc291cmNlWzBdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMV1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsyXVswXSkgLVxuICAgICAgICAgICAgICAgICAgICBsZWZ0Qm91bmRfMSA+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdUcmlhbmdsZSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0cmlhbmdsZS5zb3VyY2VbMF1bMF0sIHRyaWFuZ2xlLnNvdXJjZVswXVsxXV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBbdHJpYW5nbGUuc291cmNlWzFdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMV1bMV1dLFxuICAgICAgICAgICAgICAgICAgICAgICAgW3RyaWFuZ2xlLnNvdXJjZVsyXVswXSwgdHJpYW5nbGUuc291cmNlWzJdWzFdXSxcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1RyaWFuZ2xlWzBdWzBdIC0gbGVmdEJvdW5kXzEgPiB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfIC8gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VHJpYW5nbGVbMF1bMF0gLT0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VHJpYW5nbGVbMV1bMF0gLSBsZWZ0Qm91bmRfMSA+IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUcmlhbmdsZVsxXVswXSAtPSB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdUcmlhbmdsZVsyXVswXSAtIGxlZnRCb3VuZF8xID4gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RyaWFuZ2xlWzJdWzBdIC09IHRoaXMuc291cmNlV29ybGRXaWR0aF87XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gUmFyZWx5IChpZiB0aGUgZXh0ZW50IGNvbnRhaW5zIGJvdGggdGhlIGRhdGVsaW5lIGFuZCBwcmltZSBtZXJpZGlhbilcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHNoaWZ0IGNhbiBpbiB0dXJuIGJyZWFrIHNvbWUgdHJpYW5nbGVzLlxuICAgICAgICAgICAgICAgICAgICAvLyBEZXRlY3QgdGhpcyBoZXJlIGFuZCBkb24ndCBzaGlmdCBpbiBzdWNoIGNhc2VzLlxuICAgICAgICAgICAgICAgICAgICB2YXIgbWluWCA9IE1hdGgubWluKG5ld1RyaWFuZ2xlWzBdWzBdLCBuZXdUcmlhbmdsZVsxXVswXSwgbmV3VHJpYW5nbGVbMl1bMF0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWF4WCA9IE1hdGgubWF4KG5ld1RyaWFuZ2xlWzBdWzBdLCBuZXdUcmlhbmdsZVsxXVswXSwgbmV3VHJpYW5nbGVbMl1bMF0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF4WCAtIG1pblggPCB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfIC8gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJpYW5nbGUuc291cmNlID0gbmV3VHJpYW5nbGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIHRyYW5zZm9ybUludkNhY2hlID0ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdHJpYW5nbGUgdG8gdGhlIHRyaWFuZ3VsYXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGEgVGhlIHRhcmdldCBhIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGIgVGhlIHRhcmdldCBiIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGMgVGhlIHRhcmdldCBjIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFTcmMgVGhlIHNvdXJjZSBhIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGJTcmMgVGhlIHNvdXJjZSBiIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNTcmMgVGhlIHNvdXJjZSBjIGNvb3JkaW5hdGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBUcmlhbmd1bGF0aW9uLnByb3RvdHlwZS5hZGRUcmlhbmdsZV8gPSBmdW5jdGlvbiAoYSwgYiwgYywgYVNyYywgYlNyYywgY1NyYykge1xuICAgICAgICB0aGlzLnRyaWFuZ2xlc18ucHVzaCh7XG4gICAgICAgICAgICBzb3VyY2U6IFthU3JjLCBiU3JjLCBjU3JjXSxcbiAgICAgICAgICAgIHRhcmdldDogW2EsIGIsIGNdLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgcXVhZCAocG9pbnRzIGluIGNsb2NrLXdpc2Ugb3JkZXIpIHRvIHRoZSB0cmlhbmd1bGF0aW9uXG4gICAgICogKGFuZCByZXByb2plY3RzIHRoZSB2ZXJ0aWNlcykgaWYgdmFsaWQuXG4gICAgICogUGVyZm9ybXMgcXVhZCBzdWJkaXZpc2lvbiBpZiBuZWVkZWQgdG8gaW5jcmVhc2UgcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGEgVGhlIHRhcmdldCBhIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGIgVGhlIHRhcmdldCBiIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGMgVGhlIHRhcmdldCBjIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGQgVGhlIHRhcmdldCBkIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFTcmMgVGhlIHNvdXJjZSBhIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGJTcmMgVGhlIHNvdXJjZSBiIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNTcmMgVGhlIHNvdXJjZSBjIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGRTcmMgVGhlIHNvdXJjZSBkIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFN1YmRpdmlzaW9uIE1heGltYWwgYWxsb3dlZCBzdWJkaXZpc2lvbiBvZiB0aGUgcXVhZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRyaWFuZ3VsYXRpb24ucHJvdG90eXBlLmFkZFF1YWRfID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQsIGFTcmMsIGJTcmMsIGNTcmMsIGRTcmMsIG1heFN1YmRpdmlzaW9uKSB7XG4gICAgICAgIHZhciBzb3VyY2VRdWFkRXh0ZW50ID0gYm91bmRpbmdFeHRlbnQoW2FTcmMsIGJTcmMsIGNTcmMsIGRTcmNdKTtcbiAgICAgICAgdmFyIHNvdXJjZUNvdmVyYWdlWCA9IHRoaXMuc291cmNlV29ybGRXaWR0aF9cbiAgICAgICAgICAgID8gZ2V0V2lkdGgoc291cmNlUXVhZEV4dGVudCkgLyB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIHZhciBzb3VyY2VXb3JsZFdpZHRoID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLnNvdXJjZVdvcmxkV2lkdGhfKTtcbiAgICAgICAgLy8gd2hlbiB0aGUgcXVhZCBpcyB3cmFwcGVkIGluIHRoZSBzb3VyY2UgcHJvamVjdGlvblxuICAgICAgICAvLyBpdCBjb3ZlcnMgbW9zdCBvZiB0aGUgcHJvamVjdGlvbiBleHRlbnQsIGJ1dCBub3QgZnVsbHlcbiAgICAgICAgdmFyIHdyYXBzWCA9IHRoaXMuc291cmNlUHJval8uY2FuV3JhcFgoKSAmJlxuICAgICAgICAgICAgc291cmNlQ292ZXJhZ2VYID4gMC41ICYmXG4gICAgICAgICAgICBzb3VyY2VDb3ZlcmFnZVggPCAxO1xuICAgICAgICB2YXIgbmVlZHNTdWJkaXZpc2lvbiA9IGZhbHNlO1xuICAgICAgICBpZiAobWF4U3ViZGl2aXNpb24gPiAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YXJnZXRQcm9qXy5pc0dsb2JhbCgpICYmIHRoaXMudGFyZ2V0V29ybGRXaWR0aF8pIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0UXVhZEV4dGVudCA9IGJvdW5kaW5nRXh0ZW50KFthLCBiLCBjLCBkXSk7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldENvdmVyYWdlWCA9IGdldFdpZHRoKHRhcmdldFF1YWRFeHRlbnQpIC8gdGhpcy50YXJnZXRXb3JsZFdpZHRoXztcbiAgICAgICAgICAgICAgICBuZWVkc1N1YmRpdmlzaW9uID1cbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q292ZXJhZ2VYID4gTUFYX1RSSUFOR0xFX1dJRFRIIHx8IG5lZWRzU3ViZGl2aXNpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXdyYXBzWCAmJiB0aGlzLnNvdXJjZVByb2pfLmlzR2xvYmFsKCkgJiYgc291cmNlQ292ZXJhZ2VYKSB7XG4gICAgICAgICAgICAgICAgbmVlZHNTdWJkaXZpc2lvbiA9XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUNvdmVyYWdlWCA+IE1BWF9UUklBTkdMRV9XSURUSCB8fCBuZWVkc1N1YmRpdmlzaW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghbmVlZHNTdWJkaXZpc2lvbiAmJiB0aGlzLm1heFNvdXJjZUV4dGVudF8pIHtcbiAgICAgICAgICAgIGlmIChpc0Zpbml0ZShzb3VyY2VRdWFkRXh0ZW50WzBdKSAmJlxuICAgICAgICAgICAgICAgIGlzRmluaXRlKHNvdXJjZVF1YWRFeHRlbnRbMV0pICYmXG4gICAgICAgICAgICAgICAgaXNGaW5pdGUoc291cmNlUXVhZEV4dGVudFsyXSkgJiZcbiAgICAgICAgICAgICAgICBpc0Zpbml0ZShzb3VyY2VRdWFkRXh0ZW50WzNdKSkge1xuICAgICAgICAgICAgICAgIGlmICghaW50ZXJzZWN0cyhzb3VyY2VRdWFkRXh0ZW50LCB0aGlzLm1heFNvdXJjZUV4dGVudF8pKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdob2xlIHF1YWQgb3V0c2lkZSBzb3VyY2UgcHJvamVjdGlvbiBleHRlbnQgLT4gaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlzTm90RmluaXRlID0gMDtcbiAgICAgICAgaWYgKCFuZWVkc1N1YmRpdmlzaW9uKSB7XG4gICAgICAgICAgICBpZiAoIWlzRmluaXRlKGFTcmNbMF0pIHx8XG4gICAgICAgICAgICAgICAgIWlzRmluaXRlKGFTcmNbMV0pIHx8XG4gICAgICAgICAgICAgICAgIWlzRmluaXRlKGJTcmNbMF0pIHx8XG4gICAgICAgICAgICAgICAgIWlzRmluaXRlKGJTcmNbMV0pIHx8XG4gICAgICAgICAgICAgICAgIWlzRmluaXRlKGNTcmNbMF0pIHx8XG4gICAgICAgICAgICAgICAgIWlzRmluaXRlKGNTcmNbMV0pIHx8XG4gICAgICAgICAgICAgICAgIWlzRmluaXRlKGRTcmNbMF0pIHx8XG4gICAgICAgICAgICAgICAgIWlzRmluaXRlKGRTcmNbMV0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heFN1YmRpdmlzaW9uID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBuZWVkc1N1YmRpdmlzaW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEl0IG1pZ2h0IGJlIHRoZSBjYXNlIHRoYXQgb25seSAxIG9mIHRoZSBwb2ludHMgaXMgaW5maW5pdGUuIEluIHRoaXMgY2FzZVxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBjYW4gZHJhdyBhIHNpbmdsZSB0cmlhbmdsZSB3aXRoIHRoZSBvdGhlciB0aHJlZSBwb2ludHNcbiAgICAgICAgICAgICAgICAgICAgaXNOb3RGaW5pdGUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgKCFpc0Zpbml0ZShhU3JjWzBdKSB8fCAhaXNGaW5pdGUoYVNyY1sxXSkgPyA4IDogMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICghaXNGaW5pdGUoYlNyY1swXSkgfHwgIWlzRmluaXRlKGJTcmNbMV0pID8gNCA6IDApICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIWlzRmluaXRlKGNTcmNbMF0pIHx8ICFpc0Zpbml0ZShjU3JjWzFdKSA/IDIgOiAwKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFpc0Zpbml0ZShkU3JjWzBdKSB8fCAhaXNGaW5pdGUoZFNyY1sxXSkgPyAxIDogMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc05vdEZpbml0ZSAhPSAxICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBpc05vdEZpbml0ZSAhPSAyICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBpc05vdEZpbml0ZSAhPSA0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBpc05vdEZpbml0ZSAhPSA4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1heFN1YmRpdmlzaW9uID4gMCkge1xuICAgICAgICAgICAgaWYgKCFuZWVkc1N1YmRpdmlzaW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IFsoYVswXSArIGNbMF0pIC8gMiwgKGFbMV0gKyBjWzFdKSAvIDJdO1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXJTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oY2VudGVyKTtcbiAgICAgICAgICAgICAgICB2YXIgZHggPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKHdyYXBzWCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VudGVyU3JjRXN0aW1YID0gKG1vZHVsbyhhU3JjWzBdLCBzb3VyY2VXb3JsZFdpZHRoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2R1bG8oY1NyY1swXSwgc291cmNlV29ybGRXaWR0aCkpIC9cbiAgICAgICAgICAgICAgICAgICAgICAgIDI7XG4gICAgICAgICAgICAgICAgICAgIGR4ID0gY2VudGVyU3JjRXN0aW1YIC0gbW9kdWxvKGNlbnRlclNyY1swXSwgc291cmNlV29ybGRXaWR0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkeCA9IChhU3JjWzBdICsgY1NyY1swXSkgLyAyIC0gY2VudGVyU3JjWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZHkgPSAoYVNyY1sxXSArIGNTcmNbMV0pIC8gMiAtIGNlbnRlclNyY1sxXTtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyU3JjRXJyb3JTcXVhcmVkID0gZHggKiBkeCArIGR5ICogZHk7XG4gICAgICAgICAgICAgICAgbmVlZHNTdWJkaXZpc2lvbiA9IGNlbnRlclNyY0Vycm9yU3F1YXJlZCA+IHRoaXMuZXJyb3JUaHJlc2hvbGRTcXVhcmVkXztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZWVkc1N1YmRpdmlzaW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGFbMF0gLSBjWzBdKSA8PSBNYXRoLmFicyhhWzFdIC0gY1sxXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3BsaXQgaG9yaXpvbnRhbGx5ICh0b3AgJiBib3R0b20pXG4gICAgICAgICAgICAgICAgICAgIHZhciBiYyA9IFsoYlswXSArIGNbMF0pIC8gMiwgKGJbMV0gKyBjWzFdKSAvIDJdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmNTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oYmMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGEgPSBbKGRbMF0gKyBhWzBdKSAvIDIsIChkWzFdICsgYVsxXSkgLyAyXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhU3JjID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRRdWFkXyhhLCBiLCBiYywgZGEsIGFTcmMsIGJTcmMsIGJjU3JjLCBkYVNyYywgbWF4U3ViZGl2aXNpb24gLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRRdWFkXyhkYSwgYmMsIGMsIGQsIGRhU3JjLCBiY1NyYywgY1NyYywgZFNyYywgbWF4U3ViZGl2aXNpb24gLSAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNwbGl0IHZlcnRpY2FsbHkgKGxlZnQgJiByaWdodClcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFiID0gWyhhWzBdICsgYlswXSkgLyAyLCAoYVsxXSArIGJbMV0pIC8gMl07XG4gICAgICAgICAgICAgICAgICAgIHZhciBhYlNyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhhYik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZCA9IFsoY1swXSArIGRbMF0pIC8gMiwgKGNbMV0gKyBkWzFdKSAvIDJdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2RTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oY2QpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFF1YWRfKGEsIGFiLCBjZCwgZCwgYVNyYywgYWJTcmMsIGNkU3JjLCBkU3JjLCBtYXhTdWJkaXZpc2lvbiAtIDEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFF1YWRfKGFiLCBiLCBjLCBjZCwgYWJTcmMsIGJTcmMsIGNTcmMsIGNkU3JjLCBtYXhTdWJkaXZpc2lvbiAtIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdyYXBzWCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNhbldyYXBYSW5Tb3VyY2VfKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy53cmFwc1hJblNvdXJjZV8gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIEV4YWN0bHkgemVybyBvciBvbmUgb2YgKlNyYyBpcyBub3QgZmluaXRlXG4gICAgICAgIC8vIFRoZSB0cmlhbmdsZXMgbXVzdCBoYXZlIHRoZSBkaWFnb25hbCBsaW5lIGFzIHRoZSBmaXJzdCBzaWRlXG4gICAgICAgIC8vIFRoaXMgaXMgdG8gYWxsb3cgZWFzeSBjb2RlIGluIHJlcHJvai5zIHRvIG1ha2UgaXQgc3RyYWlnaHQgZm9yIGJyb2tlblxuICAgICAgICAvLyBicm93c2VycyB0aGF0IGNhbid0IGhhbmRsZSBkaWFnb25hbCBjbGlwcGluZ1xuICAgICAgICBpZiAoKGlzTm90RmluaXRlICYgMHhiKSA9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFRyaWFuZ2xlXyhhLCBjLCBkLCBhU3JjLCBjU3JjLCBkU3JjKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGlzTm90RmluaXRlICYgMHhlKSA9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFRyaWFuZ2xlXyhhLCBjLCBiLCBhU3JjLCBjU3JjLCBiU3JjKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOb3RGaW5pdGUpIHtcbiAgICAgICAgICAgIC8vIFRyeSB0aGUgb3RoZXIgdHdvIHRyaWFuZ2xlc1xuICAgICAgICAgICAgaWYgKChpc05vdEZpbml0ZSAmIDB4ZCkgPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkVHJpYW5nbGVfKGIsIGQsIGEsIGJTcmMsIGRTcmMsIGFTcmMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChpc05vdEZpbml0ZSAmIDB4NykgPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkVHJpYW5nbGVfKGIsIGQsIGMsIGJTcmMsIGRTcmMsIGNTcmMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIGV4dGVudCBvZiB0aGUgJ3NvdXJjZScgY29vcmRpbmF0ZXMgZnJvbSBhbGwgdGhlIHRyaWFuZ2xlcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IENhbGN1bGF0ZWQgZXh0ZW50LlxuICAgICAqL1xuICAgIFRyaWFuZ3VsYXRpb24ucHJvdG90eXBlLmNhbGN1bGF0ZVNvdXJjZUV4dGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG4gICAgICAgIHRoaXMudHJpYW5nbGVzXy5mb3JFYWNoKGZ1bmN0aW9uICh0cmlhbmdsZSwgaSwgYXJyKSB7XG4gICAgICAgICAgICB2YXIgc3JjID0gdHJpYW5nbGUuc291cmNlO1xuICAgICAgICAgICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIHNyY1swXSk7XG4gICAgICAgICAgICBleHRlbmRDb29yZGluYXRlKGV4dGVudCwgc3JjWzFdKTtcbiAgICAgICAgICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBzcmNbMl0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGV4dGVudDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PFRyaWFuZ2xlPn0gQXJyYXkgb2YgdGhlIGNhbGN1bGF0ZWQgdHJpYW5nbGVzLlxuICAgICAqL1xuICAgIFRyaWFuZ3VsYXRpb24ucHJvdG90eXBlLmdldFRyaWFuZ2xlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJpYW5nbGVzXztcbiAgICB9O1xuICAgIHJldHVybiBUcmlhbmd1bGF0aW9uO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IFRyaWFuZ3VsYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Ucmlhbmd1bGF0aW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvY29tbW9uXG4gKi9cbi8qKlxuICogRGVmYXVsdCBXTVMgdmVyc2lvbi5cbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgREVGQVVMVF9XTVNfVkVSU0lPTiA9ICcxLjMuMCc7XG4vKipcbiAqIENvbnRleHQgb3B0aW9ucyB0byBkaXNhYmxlIGltYWdlIHNtb290aGluZy5cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbmV4cG9ydCB2YXIgSU1BR0VfU01PT1RISU5HX0RJU0FCTEVEID0ge1xuICAgIGltYWdlU21vb3RoaW5nRW5hYmxlZDogZmFsc2UsXG4gICAgbXNJbWFnZVNtb290aGluZ0VuYWJsZWQ6IGZhbHNlLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1vbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVwcm9qXG4gKi9cbmltcG9ydCB7IElNQUdFX1NNT09USElOR19ESVNBQkxFRCB9IGZyb20gJy4vc291cmNlL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuL29iai5qcyc7XG5pbXBvcnQgeyBjb250YWluc0Nvb3JkaW5hdGUsIGNyZWF0ZUVtcHR5LCBleHRlbmQsIGZvckVhY2hDb3JuZXIsIGdldENlbnRlciwgZ2V0SGVpZ2h0LCBnZXRUb3BMZWZ0LCBnZXRXaWR0aCwgfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYW52YXNDb250ZXh0MkQgfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQgeyBnZXRQb2ludFJlc29sdXRpb24sIHRyYW5zZm9ybSB9IGZyb20gJy4vcHJvai5qcyc7XG5pbXBvcnQgeyBzb2x2ZUxpbmVhclN5c3RlbSB9IGZyb20gJy4vbWF0aC5qcyc7XG52YXIgYnJva2VuRGlhZ29uYWxSZW5kZXJpbmdfO1xuLyoqXG4gKiBUaGlzIGRyYXdzIGEgc21hbGwgdHJpYW5nbGUgaW50byBhIGNhbnZhcyBieSBzZXR0aW5nIHRoZSB0cmlhbmdsZSBhcyB0aGUgY2xpcCByZWdpb25cbiAqIGFuZCB0aGVuIGRyYXdpbmcgYSAodG9vIGxhcmdlKSByZWN0YW5nbGVcbiAqXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY3R4IFRoZSBjb250ZXh0IGluIHdoaWNoIHRvIGRyYXcgdGhlIHRyaWFuZ2xlXG4gKiBAcGFyYW0ge251bWJlcn0gdTEgVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgc2Vjb25kIHBvaW50LiBUaGUgZmlyc3QgcG9pbnQgaXMgMCwwLlxuICogQHBhcmFtIHtudW1iZXJ9IHYxIFRoZSB5LWNvb3JkaW5hdGUgb2YgdGhlIHNlY29uZCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB1MiBUaGUgeC1jb29yZGluYXRlIG9mIHRoZSB0aGlyZCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2MiBUaGUgeS1jb29yZGluYXRlIG9mIHRoZSB0aGlyZCBwb2ludC5cbiAqL1xuZnVuY3Rpb24gZHJhd1Rlc3RUcmlhbmdsZShjdHgsIHUxLCB2MSwgdTIsIHYyKSB7XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5tb3ZlVG8oMCwgMCk7XG4gICAgY3R4LmxpbmVUbyh1MSwgdjEpO1xuICAgIGN0eC5saW5lVG8odTIsIHYyKTtcbiAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgY3R4LnNhdmUoKTtcbiAgICBjdHguY2xpcCgpO1xuICAgIGN0eC5maWxsUmVjdCgwLCAwLCBNYXRoLm1heCh1MSwgdTIpICsgMSwgTWF0aC5tYXgodjEsIHYyKSk7XG4gICAgY3R4LnJlc3RvcmUoKTtcbn1cbi8qKlxuICogR2l2ZW4gdGhlIGRhdGEgZnJvbSBnZXRJbWFnZURhdGEsIHNlZSBpZiB0aGUgcmlnaHQgdmFsdWVzIGFwcGVhciBhdCB0aGUgcHJvdmlkZWQgb2Zmc2V0LlxuICogUmV0dXJucyB0cnVlIGlmIGVpdGhlciB0aGUgY29sb3Igb3IgdHJhbnNwYXJlbmN5IGlzIG9mZlxuICpcbiAqIEBwYXJhbSB7VWludDhDbGFtcGVkQXJyYXl9IGRhdGEgVGhlIGRhdGEgcmV0dXJuZWQgZnJvbSBnZXRJbWFnZURhdGFcbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgVGhlIHBpeGVsIG9mZnNldCBmcm9tIHRoZSBzdGFydCBvZiBkYXRhLlxuICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgZGlhZ29uYWwgcmVuZGVyaW5nIGlzIGJyb2tlblxuICovXG5mdW5jdGlvbiB2ZXJpZnlCcm9rZW5EaWFnb25hbFJlbmRlcmluZyhkYXRhLCBvZmZzZXQpIHtcbiAgICAvLyB0aGUgdmFsdWVzIG91Z2h0IHRvIGJlIGNsb3NlIHRvIHRoZSByZ2JhKDIxMCwgMCwgMCwgMC43NSlcbiAgICByZXR1cm4gKE1hdGguYWJzKGRhdGFbb2Zmc2V0ICogNF0gLSAyMTApID4gMiB8fFxuICAgICAgICBNYXRoLmFicyhkYXRhW29mZnNldCAqIDQgKyAzXSAtIDAuNzUgKiAyNTUpID4gMik7XG59XG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIGN1cnJlbnQgYnJvd3NlciBjb25maWd1cmF0aW9uIGNhbiByZW5kZXIgdHJpYW5ndWxhciBjbGlwIHJlZ2lvbnMgY29ycmVjdGx5LlxuICogVGhpcyB2YWx1ZSBpcyBjYWNoZWQgc28gdGhlIGZ1bmN0aW9uIGlzIG9ubHkgZXhwZW5zaXZlIHRoZSBmaXJzdCB0aW1lIGNhbGxlZC5cbiAqIEZpcmVmb3ggb24gV2luZG93cyAoYXMgb2Ygbm93KSBkb2VzIG5vdCBpZiBIV0EgaXMgZW5hYmxlZC4gU2VlIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE2MDY5NzZcbiAqIElFIGFsc28gZG9lc24ndC4gQ2hyb21lIHdvcmtzLCBhbmQgZXZlcnl0aGluZyBzZWVtcyB0byB3b3JrIG9uIE9TWCBhbmQgQW5kcm9pZC4gVGhpcyBmdW5jdGlvbiBjYWNoZXMgdGhlXG4gKiByZXN1bHQuIEkgc3VwcG9zZSB0aGF0IGl0IGlzIGNvbmNlaXZhYmx5IHBvc3NpYmxlIHRoYXQgYSBicm93c2VyIG1pZ2h0IGZsaXAgbW9kZXMgd2hpbGUgdGhlIGFwcCBpc1xuICogcnVubmluZywgYnV0IGxldHMgaG9wZSBub3QuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgRGlhZ29uYWwgUmVuZGVyaW5nIGlzIGJyb2tlbi5cbiAqL1xuZnVuY3Rpb24gaXNCcm9rZW5EaWFnb25hbFJlbmRlcmluZygpIHtcbiAgICBpZiAoYnJva2VuRGlhZ29uYWxSZW5kZXJpbmdfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIGN0eCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnbGlnaHRlcic7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyMTAsIDAsIDAsIDAuNzUpJztcbiAgICAgICAgZHJhd1Rlc3RUcmlhbmdsZShjdHgsIDQsIDUsIDQsIDApO1xuICAgICAgICBkcmF3VGVzdFRyaWFuZ2xlKGN0eCwgNCwgNSwgMCwgNSk7XG4gICAgICAgIHZhciBkYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCAzLCAzKS5kYXRhO1xuICAgICAgICBicm9rZW5EaWFnb25hbFJlbmRlcmluZ18gPVxuICAgICAgICAgICAgdmVyaWZ5QnJva2VuRGlhZ29uYWxSZW5kZXJpbmcoZGF0YSwgMCkgfHxcbiAgICAgICAgICAgICAgICB2ZXJpZnlCcm9rZW5EaWFnb25hbFJlbmRlcmluZyhkYXRhLCA0KSB8fFxuICAgICAgICAgICAgICAgIHZlcmlmeUJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKGRhdGEsIDgpO1xuICAgIH1cbiAgICByZXR1cm4gYnJva2VuRGlhZ29uYWxSZW5kZXJpbmdfO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIGlkZWFsIHJlc29sdXRpb24gdG8gdXNlIGZyb20gdGhlIHNvdXJjZSBpbiBvcmRlciB0byBhY2hpZXZlXG4gKiBwaXhlbCBtYXBwaW5nIGFzIGNsb3NlIGFzIHBvc3NpYmxlIHRvIDE6MSBkdXJpbmcgcmVwcm9qZWN0aW9uLlxuICogVGhlIHJlc29sdXRpb24gaXMgY2FsY3VsYXRlZCByZWdhcmRsZXNzIG9mIHdoYXQgcmVzb2x1dGlvbnNcbiAqIGFyZSBhY3R1YWxseSBhdmFpbGFibGUgaW4gdGhlIGRhdGFzZXQgKFRpbGVHcmlkLCBJbWFnZSwgLi4uKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHRhcmdldFByb2ogVGFyZ2V0IHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSB0YXJnZXRDZW50ZXIgVGFyZ2V0IGNlbnRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRSZXNvbHV0aW9uIFRhcmdldCByZXNvbHV0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgYmVzdCByZXNvbHV0aW9uIHRvIHVzZS4gQ2FuIGJlICstSW5maW5pdHksIE5hTiBvciAwLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlU291cmNlUmVzb2x1dGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCB0YXJnZXRDZW50ZXIsIHRhcmdldFJlc29sdXRpb24pIHtcbiAgICB2YXIgc291cmNlQ2VudGVyID0gdHJhbnNmb3JtKHRhcmdldENlbnRlciwgdGFyZ2V0UHJvaiwgc291cmNlUHJvaik7XG4gICAgLy8gY2FsY3VsYXRlIHRoZSBpZGVhbCByZXNvbHV0aW9uIG9mIHRoZSBzb3VyY2UgZGF0YVxuICAgIHZhciBzb3VyY2VSZXNvbHV0aW9uID0gZ2V0UG9pbnRSZXNvbHV0aW9uKHRhcmdldFByb2osIHRhcmdldFJlc29sdXRpb24sIHRhcmdldENlbnRlcik7XG4gICAgdmFyIHRhcmdldE1ldGVyc1BlclVuaXQgPSB0YXJnZXRQcm9qLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgICBpZiAodGFyZ2V0TWV0ZXJzUGVyVW5pdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNvdXJjZVJlc29sdXRpb24gKj0gdGFyZ2V0TWV0ZXJzUGVyVW5pdDtcbiAgICB9XG4gICAgdmFyIHNvdXJjZU1ldGVyc1BlclVuaXQgPSBzb3VyY2VQcm9qLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgICBpZiAoc291cmNlTWV0ZXJzUGVyVW5pdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNvdXJjZVJlc29sdXRpb24gLz0gc291cmNlTWV0ZXJzUGVyVW5pdDtcbiAgICB9XG4gICAgLy8gQmFzZWQgb24gdGhlIHByb2plY3Rpb24gcHJvcGVydGllcywgdGhlIHBvaW50IHJlc29sdXRpb24gYXQgdGhlIHNwZWNpZmllZFxuICAgIC8vIGNvb3JkaW5hdGVzIG1heSBiZSBzbGlnaHRseSBkaWZmZXJlbnQuIFdlIG5lZWQgdG8gcmV2ZXJzZS1jb21wZW5zYXRlIHRoaXNcbiAgICAvLyBpbiBvcmRlciB0byBhY2hpZXZlIG9wdGltYWwgcmVzdWx0cy5cbiAgICB2YXIgc291cmNlRXh0ZW50ID0gc291cmNlUHJvai5nZXRFeHRlbnQoKTtcbiAgICBpZiAoIXNvdXJjZUV4dGVudCB8fCBjb250YWluc0Nvb3JkaW5hdGUoc291cmNlRXh0ZW50LCBzb3VyY2VDZW50ZXIpKSB7XG4gICAgICAgIHZhciBjb21wZW5zYXRpb25GYWN0b3IgPSBnZXRQb2ludFJlc29sdXRpb24oc291cmNlUHJvaiwgc291cmNlUmVzb2x1dGlvbiwgc291cmNlQ2VudGVyKSAvXG4gICAgICAgICAgICBzb3VyY2VSZXNvbHV0aW9uO1xuICAgICAgICBpZiAoaXNGaW5pdGUoY29tcGVuc2F0aW9uRmFjdG9yKSAmJiBjb21wZW5zYXRpb25GYWN0b3IgPiAwKSB7XG4gICAgICAgICAgICBzb3VyY2VSZXNvbHV0aW9uIC89IGNvbXBlbnNhdGlvbkZhY3RvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc291cmNlUmVzb2x1dGlvbjtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyBpZGVhbCByZXNvbHV0aW9uIHRvIHVzZSBmcm9tIHRoZSBzb3VyY2UgaW4gb3JkZXIgdG8gYWNoaWV2ZVxuICogcGl4ZWwgbWFwcGluZyBhcyBjbG9zZSBhcyBwb3NzaWJsZSB0byAxOjEgZHVyaW5nIHJlcHJvamVjdGlvbi5cbiAqIFRoZSByZXNvbHV0aW9uIGlzIGNhbGN1bGF0ZWQgcmVnYXJkbGVzcyBvZiB3aGF0IHJlc29sdXRpb25zXG4gKiBhcmUgYWN0dWFsbHkgYXZhaWxhYmxlIGluIHRoZSBkYXRhc2V0IChUaWxlR3JpZCwgSW1hZ2UsIC4uLikuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2VQcm9qIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSB0YXJnZXRQcm9qIFRhcmdldCBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IHRhcmdldEV4dGVudCBUYXJnZXQgZXh0ZW50XG4gKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0UmVzb2x1dGlvbiBUYXJnZXQgcmVzb2x1dGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGJlc3QgcmVzb2x1dGlvbiB0byB1c2UuIENhbiBiZSArLUluZmluaXR5LCBOYU4gb3IgMC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVNvdXJjZUV4dGVudFJlc29sdXRpb24oc291cmNlUHJvaiwgdGFyZ2V0UHJvaiwgdGFyZ2V0RXh0ZW50LCB0YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgdmFyIHRhcmdldENlbnRlciA9IGdldENlbnRlcih0YXJnZXRFeHRlbnQpO1xuICAgIHZhciBzb3VyY2VSZXNvbHV0aW9uID0gY2FsY3VsYXRlU291cmNlUmVzb2x1dGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCB0YXJnZXRDZW50ZXIsIHRhcmdldFJlc29sdXRpb24pO1xuICAgIGlmICghaXNGaW5pdGUoc291cmNlUmVzb2x1dGlvbikgfHwgc291cmNlUmVzb2x1dGlvbiA8PSAwKSB7XG4gICAgICAgIGZvckVhY2hDb3JuZXIodGFyZ2V0RXh0ZW50LCBmdW5jdGlvbiAoY29ybmVyKSB7XG4gICAgICAgICAgICBzb3VyY2VSZXNvbHV0aW9uID0gY2FsY3VsYXRlU291cmNlUmVzb2x1dGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCBjb3JuZXIsIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIGlzRmluaXRlKHNvdXJjZVJlc29sdXRpb24pICYmIHNvdXJjZVJlc29sdXRpb24gPiAwO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHNvdXJjZVJlc29sdXRpb247XG59XG4vKipcbiAqIFJlbmRlcnMgdGhlIHNvdXJjZSBkYXRhIGludG8gbmV3IGNhbnZhcyBiYXNlZCBvbiB0aGUgdHJpYW5ndWxhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gd2lkdGggV2lkdGggb2YgdGhlIGNhbnZhcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgSGVpZ2h0IG9mIHRoZSBjYW52YXMuXG4gKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzb3VyY2VSZXNvbHV0aW9uIFNvdXJjZSByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IHNvdXJjZUV4dGVudCBFeHRlbnQgb2YgdGhlIGRhdGEgc291cmNlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldFJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gdGFyZ2V0RXh0ZW50IFRhcmdldCBleHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcmVwcm9qL1RyaWFuZ3VsYXRpb24uanNcIikuZGVmYXVsdH0gdHJpYW5ndWxhdGlvblxuICogQ2FsY3VsYXRlZCB0cmlhbmd1bGF0aW9uLlxuICogQHBhcmFtIHtBcnJheTx7ZXh0ZW50OiBpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnQsXG4gKiAgICAgICAgICAgICAgICAgaW1hZ2U6IChIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnQpfT59IHNvdXJjZXNcbiAqIEFycmF5IG9mIHNvdXJjZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gZ3V0dGVyIEd1dHRlciBvZiB0aGUgc291cmNlcy5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9yZW5kZXJFZGdlcyBSZW5kZXIgcmVwcm9qZWN0aW9uIGVkZ2VzLlxuICogQHBhcmFtIHtvYmplY3Q9fSBvcHRfY29udGV4dE9wdGlvbnMgUHJvcGVydGllcyB0byBzZXQgb24gdGhlIGNhbnZhcyBjb250ZXh0LlxuICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IENhbnZhcyB3aXRoIHJlcHJvamVjdGVkIGRhdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXIod2lkdGgsIGhlaWdodCwgcGl4ZWxSYXRpbywgc291cmNlUmVzb2x1dGlvbiwgc291cmNlRXh0ZW50LCB0YXJnZXRSZXNvbHV0aW9uLCB0YXJnZXRFeHRlbnQsIHRyaWFuZ3VsYXRpb24sIHNvdXJjZXMsIGd1dHRlciwgb3B0X3JlbmRlckVkZ2VzLCBvcHRfY29udGV4dE9wdGlvbnMpIHtcbiAgICB2YXIgY29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRChNYXRoLnJvdW5kKHBpeGVsUmF0aW8gKiB3aWR0aCksIE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIGhlaWdodCkpO1xuICAgIGFzc2lnbihjb250ZXh0LCBvcHRfY29udGV4dE9wdGlvbnMpO1xuICAgIGlmIChzb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gY29udGV4dC5jYW52YXM7XG4gICAgfVxuICAgIGNvbnRleHQuc2NhbGUocGl4ZWxSYXRpbywgcGl4ZWxSYXRpbyk7XG4gICAgZnVuY3Rpb24gcGl4ZWxSb3VuZCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAqIHBpeGVsUmF0aW8pIC8gcGl4ZWxSYXRpbztcbiAgICB9XG4gICAgY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnbGlnaHRlcic7XG4gICAgdmFyIHNvdXJjZURhdGFFeHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuICAgIHNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbiAoc3JjLCBpLCBhcnIpIHtcbiAgICAgICAgZXh0ZW5kKHNvdXJjZURhdGFFeHRlbnQsIHNyYy5leHRlbnQpO1xuICAgIH0pO1xuICAgIHZhciBjYW52YXNXaWR0aEluVW5pdHMgPSBnZXRXaWR0aChzb3VyY2VEYXRhRXh0ZW50KTtcbiAgICB2YXIgY2FudmFzSGVpZ2h0SW5Vbml0cyA9IGdldEhlaWdodChzb3VyY2VEYXRhRXh0ZW50KTtcbiAgICB2YXIgc3RpdGNoQ29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRChNYXRoLnJvdW5kKChwaXhlbFJhdGlvICogY2FudmFzV2lkdGhJblVuaXRzKSAvIHNvdXJjZVJlc29sdXRpb24pLCBNYXRoLnJvdW5kKChwaXhlbFJhdGlvICogY2FudmFzSGVpZ2h0SW5Vbml0cykgLyBzb3VyY2VSZXNvbHV0aW9uKSk7XG4gICAgYXNzaWduKHN0aXRjaENvbnRleHQsIG9wdF9jb250ZXh0T3B0aW9ucyk7XG4gICAgdmFyIHN0aXRjaFNjYWxlID0gcGl4ZWxSYXRpbyAvIHNvdXJjZVJlc29sdXRpb247XG4gICAgc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChzcmMsIGksIGFycikge1xuICAgICAgICB2YXIgeFBvcyA9IHNyYy5leHRlbnRbMF0gLSBzb3VyY2VEYXRhRXh0ZW50WzBdO1xuICAgICAgICB2YXIgeVBvcyA9IC0oc3JjLmV4dGVudFszXSAtIHNvdXJjZURhdGFFeHRlbnRbM10pO1xuICAgICAgICB2YXIgc3JjV2lkdGggPSBnZXRXaWR0aChzcmMuZXh0ZW50KTtcbiAgICAgICAgdmFyIHNyY0hlaWdodCA9IGdldEhlaWdodChzcmMuZXh0ZW50KTtcbiAgICAgICAgLy8gVGhpcyB0ZXN0IHNob3VsZCBuZXZlciBmYWlsIC0tIGJ1dCBpdCBkb2VzLiBOZWVkIHRvIGZpbmQgYSBmaXggdGhlIHVwc3RyZWFtIGNvbmRpdGlvblxuICAgICAgICBpZiAoc3JjLmltYWdlLndpZHRoID4gMCAmJiBzcmMuaW1hZ2UuaGVpZ2h0ID4gMCkge1xuICAgICAgICAgICAgc3RpdGNoQ29udGV4dC5kcmF3SW1hZ2Uoc3JjLmltYWdlLCBndXR0ZXIsIGd1dHRlciwgc3JjLmltYWdlLndpZHRoIC0gMiAqIGd1dHRlciwgc3JjLmltYWdlLmhlaWdodCAtIDIgKiBndXR0ZXIsIHhQb3MgKiBzdGl0Y2hTY2FsZSwgeVBvcyAqIHN0aXRjaFNjYWxlLCBzcmNXaWR0aCAqIHN0aXRjaFNjYWxlLCBzcmNIZWlnaHQgKiBzdGl0Y2hTY2FsZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgdGFyZ2V0VG9wTGVmdCA9IGdldFRvcExlZnQodGFyZ2V0RXh0ZW50KTtcbiAgICB0cmlhbmd1bGF0aW9uLmdldFRyaWFuZ2xlcygpLmZvckVhY2goZnVuY3Rpb24gKHRyaWFuZ2xlLCBpLCBhcnIpIHtcbiAgICAgICAgLyogQ2FsY3VsYXRlIGFmZmluZSB0cmFuc2Zvcm0gKHNyYyAtPiBkc3QpXG4gICAgICAgICAqIFJlc3VsdGluZyBtYXRyaXggY2FuIGJlIHVzZWQgdG8gdHJhbnNmb3JtIGNvb3JkaW5hdGVcbiAgICAgICAgICogZnJvbSBgc291cmNlUHJvamVjdGlvbmAgdG8gZGVzdGluYXRpb24gcGl4ZWxzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUbyBvcHRpbWl6ZSBudW1iZXIgb2YgY29udGV4dCBjYWxscyBhbmQgaW5jcmVhc2UgbnVtZXJpY2FsIHN0YWJpbGl0eSxcbiAgICAgICAgICogd2UgYWxzbyBkbyB0aGUgZm9sbG93aW5nIG9wZXJhdGlvbnM6XG4gICAgICAgICAqIHRyYW5zKC10b3BMZWZ0RXh0ZW50Q29ybmVyKSwgc2NhbGUoMSAvIHRhcmdldFJlc29sdXRpb24pLCBzY2FsZSgxLCAtMSlcbiAgICAgICAgICogaGVyZSBiZWZvcmUgc29sdmluZyB0aGUgbGluZWFyIHN5c3RlbSBzbyBbdWksIHZpXSBhcmUgcGl4ZWwgY29vcmRpbmF0ZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFNyYyBwb2ludHM6IHhpLCB5aVxuICAgICAgICAgKiBEc3QgcG9pbnRzOiB1aSwgdmlcbiAgICAgICAgICogQWZmaW5lIGNvZWZmaWNpZW50czogYWlqXG4gICAgICAgICAqXG4gICAgICAgICAqIHwgeDAgeTAgMSAgMCAgMCAwIHwgICB8YTAwfCAgIHx1MHxcbiAgICAgICAgICogfCB4MSB5MSAxICAwICAwIDAgfCAgIHxhMDF8ICAgfHUxfFxuICAgICAgICAgKiB8IHgyIHkyIDEgIDAgIDAgMCB8IHggfGEwMnwgPSB8dTJ8XG4gICAgICAgICAqIHwgIDAgIDAgMCB4MCB5MCAxIHwgICB8YTEwfCAgIHx2MHxcbiAgICAgICAgICogfCAgMCAgMCAwIHgxIHkxIDEgfCAgIHxhMTF8ICAgfHYxfFxuICAgICAgICAgKiB8ICAwICAwIDAgeDIgeTIgMSB8ICAgfGExMnwgICB8djJ8XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgc291cmNlID0gdHJpYW5nbGUuc291cmNlO1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdHJpYW5nbGUudGFyZ2V0O1xuICAgICAgICB2YXIgeDAgPSBzb3VyY2VbMF1bMF0sIHkwID0gc291cmNlWzBdWzFdO1xuICAgICAgICB2YXIgeDEgPSBzb3VyY2VbMV1bMF0sIHkxID0gc291cmNlWzFdWzFdO1xuICAgICAgICB2YXIgeDIgPSBzb3VyY2VbMl1bMF0sIHkyID0gc291cmNlWzJdWzFdO1xuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCBldmVyeXRoaW5nIGlzIG9uIHBpeGVsIGJvdW5kYXJpZXNcbiAgICAgICAgdmFyIHUwID0gcGl4ZWxSb3VuZCgodGFyZ2V0WzBdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgdmFyIHYwID0gcGl4ZWxSb3VuZCgtKHRhcmdldFswXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgIHZhciB1MSA9IHBpeGVsUm91bmQoKHRhcmdldFsxXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgIHZhciB2MSA9IHBpeGVsUm91bmQoLSh0YXJnZXRbMV1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICB2YXIgdTIgPSBwaXhlbFJvdW5kKCh0YXJnZXRbMl1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICB2YXIgdjIgPSBwaXhlbFJvdW5kKC0odGFyZ2V0WzJdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgLy8gU2hpZnQgYWxsIHRoZSBzb3VyY2UgcG9pbnRzIHRvIGltcHJvdmUgbnVtZXJpY2FsIHN0YWJpbGl0eVxuICAgICAgICAvLyBvZiBhbGwgdGhlIHN1YnNlcXVlbnQgY2FsY3VsYXRpb25zLiBUaGUgW3gwLCB5MF0gaXMgdXNlZCBoZXJlLlxuICAgICAgICAvLyBUaGlzIGlzIGFsc28gdXNlZCB0byBzaW1wbGlmeSB0aGUgbGluZWFyIHN5c3RlbS5cbiAgICAgICAgdmFyIHNvdXJjZU51bWVyaWNhbFNoaWZ0WCA9IHgwO1xuICAgICAgICB2YXIgc291cmNlTnVtZXJpY2FsU2hpZnRZID0geTA7XG4gICAgICAgIHgwID0gMDtcbiAgICAgICAgeTAgPSAwO1xuICAgICAgICB4MSAtPSBzb3VyY2VOdW1lcmljYWxTaGlmdFg7XG4gICAgICAgIHkxIC09IHNvdXJjZU51bWVyaWNhbFNoaWZ0WTtcbiAgICAgICAgeDIgLT0gc291cmNlTnVtZXJpY2FsU2hpZnRYO1xuICAgICAgICB5MiAtPSBzb3VyY2VOdW1lcmljYWxTaGlmdFk7XG4gICAgICAgIHZhciBhdWdtZW50ZWRNYXRyaXggPSBbXG4gICAgICAgICAgICBbeDEsIHkxLCAwLCAwLCB1MSAtIHUwXSxcbiAgICAgICAgICAgIFt4MiwgeTIsIDAsIDAsIHUyIC0gdTBdLFxuICAgICAgICAgICAgWzAsIDAsIHgxLCB5MSwgdjEgLSB2MF0sXG4gICAgICAgICAgICBbMCwgMCwgeDIsIHkyLCB2MiAtIHYwXSxcbiAgICAgICAgXTtcbiAgICAgICAgdmFyIGFmZmluZUNvZWZzID0gc29sdmVMaW5lYXJTeXN0ZW0oYXVnbWVudGVkTWF0cml4KTtcbiAgICAgICAgaWYgKCFhZmZpbmVDb2Vmcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBpZiAoaXNCcm9rZW5EaWFnb25hbFJlbmRlcmluZygpIHx8XG4gICAgICAgICAgICBvcHRfY29udGV4dE9wdGlvbnMgPT09IElNQUdFX1NNT09USElOR19ESVNBQkxFRCkge1xuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgYWxsIGxpbmVzIGFyZSBob3Jpem9udGFsIG9yIHZlcnRpY2FsXG4gICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyh1MSwgdjEpO1xuICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgZGlhZ29uYWwgbGluZS4gRG8gaXQgaW4gNCBzdGVwc1xuICAgICAgICAgICAgdmFyIHN0ZXBzID0gNDtcbiAgICAgICAgICAgIHZhciB1ZCA9IHUwIC0gdTE7XG4gICAgICAgICAgICB2YXIgdmQgPSB2MCAtIHYxO1xuICAgICAgICAgICAgZm9yICh2YXIgc3RlcCA9IDA7IHN0ZXAgPCBzdGVwczsgc3RlcCsrKSB7XG4gICAgICAgICAgICAgICAgLy8gR28gaG9yaXpvbnRhbGx5XG4gICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTEgKyBwaXhlbFJvdW5kKCgoc3RlcCArIDEpICogdWQpIC8gc3RlcHMpLCB2MSArIHBpeGVsUm91bmQoKHN0ZXAgKiB2ZCkgLyAoc3RlcHMgLSAxKSkpO1xuICAgICAgICAgICAgICAgIC8vIEdvIHZlcnRpY2FsbHlcbiAgICAgICAgICAgICAgICBpZiAoc3RlcCAhPSBzdGVwcyAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTEgKyBwaXhlbFJvdW5kKCgoc3RlcCArIDEpICogdWQpIC8gc3RlcHMpLCB2MSArIHBpeGVsUm91bmQoKChzdGVwICsgMSkgKiB2ZCkgLyAoc3RlcHMgLSAxKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdlIGFyZSBhbG1vc3QgYXQgdTByLCB2MHJcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHUyLCB2Mik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyh1MSwgdjEpO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTAsIHYwKTtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHUyLCB2Mik7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5jbGlwKCk7XG4gICAgICAgIGNvbnRleHQudHJhbnNmb3JtKGFmZmluZUNvZWZzWzBdLCBhZmZpbmVDb2Vmc1syXSwgYWZmaW5lQ29lZnNbMV0sIGFmZmluZUNvZWZzWzNdLCB1MCwgdjApO1xuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZShzb3VyY2VEYXRhRXh0ZW50WzBdIC0gc291cmNlTnVtZXJpY2FsU2hpZnRYLCBzb3VyY2VEYXRhRXh0ZW50WzNdIC0gc291cmNlTnVtZXJpY2FsU2hpZnRZKTtcbiAgICAgICAgY29udGV4dC5zY2FsZShzb3VyY2VSZXNvbHV0aW9uIC8gcGl4ZWxSYXRpbywgLXNvdXJjZVJlc29sdXRpb24gLyBwaXhlbFJhdGlvKTtcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2Uoc3RpdGNoQ29udGV4dC5jYW52YXMsIDAsIDApO1xuICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICB9KTtcbiAgICBpZiAob3B0X3JlbmRlckVkZ2VzKSB7XG4gICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICBjb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3Zlcic7XG4gICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IDE7XG4gICAgICAgIHRyaWFuZ3VsYXRpb24uZ2V0VHJpYW5nbGVzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUsIGksIGFycikge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRyaWFuZ2xlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciB1MCA9ICh0YXJnZXRbMF1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgdjAgPSAtKHRhcmdldFswXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB1MSA9ICh0YXJnZXRbMV1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgdjEgPSAtKHRhcmdldFsxXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB1MiA9ICh0YXJnZXRbMl1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgdjIgPSAtKHRhcmdldFsyXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyh1MSwgdjEpO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTAsIHYwKTtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHUyLCB2Mik7XG4gICAgICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgIH1cbiAgICByZXR1cm4gY29udGV4dC5jYW52YXM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXByb2ouanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2ovVGlsZVxuICovXG5pbXBvcnQgeyBFUlJPUl9USFJFU0hPTEQgfSBmcm9tICcuL2NvbW1vbi5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFRpbGUgZnJvbSAnLi4vVGlsZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgVHJpYW5ndWxhdGlvbiBmcm9tICcuL1RyaWFuZ3VsYXRpb24uanMnO1xuaW1wb3J0IHsgY2FsY3VsYXRlU291cmNlRXh0ZW50UmVzb2x1dGlvbiwgcmVuZGVyIGFzIHJlbmRlclJlcHJvamVjdGVkLCB9IGZyb20gJy4uL3JlcHJvai5qcyc7XG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IHsgZ2V0QXJlYSwgZ2V0SW50ZXJzZWN0aW9uIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIpIDogaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSBGdW5jdGlvblR5cGVcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDbGFzcyBlbmNhcHN1bGF0aW5nIHNpbmdsZSByZXByb2plY3RlZCB0aWxlLlxuICogU2VlIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1RpbGVJbWFnZX5UaWxlSW1hZ2V9LlxuICpcbiAqL1xudmFyIFJlcHJvalRpbGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlcHJvalRpbGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlUHJvaiBTb3VyY2UgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVRpbGVHcmlkIFNvdXJjZSB0aWxlIGdyaWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRhcmdldFRpbGVHcmlkIFRhcmdldCB0aWxlIGdyaWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgQ29vcmRpbmF0ZSBvZiB0aGUgdGlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHdyYXBwZWRUaWxlQ29vcmQgQ29vcmRpbmF0ZSBvZiB0aGUgdGlsZSB3cmFwcGVkIGluIFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGd1dHRlciBHdXR0ZXIgb2YgdGhlIHNvdXJjZSB0aWxlcy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uVHlwZX0gZ2V0VGlsZUZ1bmN0aW9uXG4gICAgICogICAgIEZ1bmN0aW9uIHJldHVybmluZyBzb3VyY2UgdGlsZXMgKHosIHgsIHksIHBpeGVsUmF0aW8pLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2Vycm9yVGhyZXNob2xkIEFjY2VwdGFibGUgcmVwcm9qZWN0aW9uIGVycm9yIChpbiBweCkuXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3JlbmRlckVkZ2VzIFJlbmRlciByZXByb2plY3Rpb24gZWRnZXMuXG4gICAgICogQHBhcmFtIHtvYmplY3Q9fSBvcHRfY29udGV4dE9wdGlvbnMgUHJvcGVydGllcyB0byBzZXQgb24gdGhlIGNhbnZhcyBjb250ZXh0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJlcHJvalRpbGUoc291cmNlUHJvaiwgc291cmNlVGlsZUdyaWQsIHRhcmdldFByb2osIHRhcmdldFRpbGVHcmlkLCB0aWxlQ29vcmQsIHdyYXBwZWRUaWxlQ29vcmQsIHBpeGVsUmF0aW8sIGd1dHRlciwgZ2V0VGlsZUZ1bmN0aW9uLCBvcHRfZXJyb3JUaHJlc2hvbGQsIG9wdF9yZW5kZXJFZGdlcywgb3B0X2NvbnRleHRPcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHRpbGVDb29yZCwgVGlsZVN0YXRlLklETEUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlckVkZ2VzXyA9IG9wdF9yZW5kZXJFZGdlcyAhPT0gdW5kZWZpbmVkID8gb3B0X3JlbmRlckVkZ2VzIDogZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGV4dE9wdGlvbnNfID0gb3B0X2NvbnRleHRPcHRpb25zO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsUmF0aW9fID0gcGl4ZWxSYXRpbztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ndXR0ZXJfID0gZ3V0dGVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2FudmFzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZVRpbGVHcmlkXyA9IHNvdXJjZVRpbGVHcmlkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRUaWxlR3JpZF8gPSB0YXJnZXRUaWxlR3JpZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMud3JhcHBlZFRpbGVDb29yZF8gPSB3cmFwcGVkVGlsZUNvb3JkID8gd3JhcHBlZFRpbGVDb29yZCA6IHRpbGVDb29yZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshQXJyYXk8aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZVRpbGVzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9BcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zb3VyY2VaXyA9IDA7XG4gICAgICAgIHZhciB0YXJnZXRFeHRlbnQgPSB0YXJnZXRUaWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQoX3RoaXMud3JhcHBlZFRpbGVDb29yZF8pO1xuICAgICAgICB2YXIgbWF4VGFyZ2V0RXh0ZW50ID0gX3RoaXMudGFyZ2V0VGlsZUdyaWRfLmdldEV4dGVudCgpO1xuICAgICAgICB2YXIgbWF4U291cmNlRXh0ZW50ID0gX3RoaXMuc291cmNlVGlsZUdyaWRfLmdldEV4dGVudCgpO1xuICAgICAgICB2YXIgbGltaXRlZFRhcmdldEV4dGVudCA9IG1heFRhcmdldEV4dGVudFxuICAgICAgICAgICAgPyBnZXRJbnRlcnNlY3Rpb24odGFyZ2V0RXh0ZW50LCBtYXhUYXJnZXRFeHRlbnQpXG4gICAgICAgICAgICA6IHRhcmdldEV4dGVudDtcbiAgICAgICAgaWYgKGdldEFyZWEobGltaXRlZFRhcmdldEV4dGVudCkgPT09IDApIHtcbiAgICAgICAgICAgIC8vIFRpbGUgaXMgY29tcGxldGVseSBvdXRzaWRlIHJhbmdlIC0+IEVNUFRZXG4gICAgICAgICAgICAvLyBUT0RPOiBpcyBpdCBhY3R1YWxseSBjb3JyZWN0IHRoYXQgdGhlIHNvdXJjZSBldmVuIGNyZWF0ZXMgdGhlIHRpbGUgP1xuICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNvdXJjZVByb2pFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICAgICAgICBpZiAoc291cmNlUHJvakV4dGVudCkge1xuICAgICAgICAgICAgaWYgKCFtYXhTb3VyY2VFeHRlbnQpIHtcbiAgICAgICAgICAgICAgICBtYXhTb3VyY2VFeHRlbnQgPSBzb3VyY2VQcm9qRXh0ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWF4U291cmNlRXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKG1heFNvdXJjZUV4dGVudCwgc291cmNlUHJvakV4dGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRhcmdldFJlc29sdXRpb24gPSB0YXJnZXRUaWxlR3JpZC5nZXRSZXNvbHV0aW9uKF90aGlzLndyYXBwZWRUaWxlQ29vcmRfWzBdKTtcbiAgICAgICAgdmFyIHNvdXJjZVJlc29sdXRpb24gPSBjYWxjdWxhdGVTb3VyY2VFeHRlbnRSZXNvbHV0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIGxpbWl0ZWRUYXJnZXRFeHRlbnQsIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICBpZiAoIWlzRmluaXRlKHNvdXJjZVJlc29sdXRpb24pIHx8IHNvdXJjZVJlc29sdXRpb24gPD0gMCkge1xuICAgICAgICAgICAgLy8gaW52YWxpZCBzb3VyY2VSZXNvbHV0aW9uIC0+IEVNUFRZXG4gICAgICAgICAgICAvLyBwcm9iYWJseSBlZGdlcyBvZiB0aGUgcHJvamVjdGlvbnMgd2hlbiBubyBleHRlbnQgaXMgZGVmaW5lZFxuICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVycm9yVGhyZXNob2xkSW5QaXhlbHMgPSBvcHRfZXJyb3JUaHJlc2hvbGQgIT09IHVuZGVmaW5lZCA/IG9wdF9lcnJvclRocmVzaG9sZCA6IEVSUk9SX1RIUkVTSE9MRDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshaW1wb3J0KFwiLi9Ucmlhbmd1bGF0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmlhbmd1bGF0aW9uXyA9IG5ldyBUcmlhbmd1bGF0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIGxpbWl0ZWRUYXJnZXRFeHRlbnQsIG1heFNvdXJjZUV4dGVudCwgc291cmNlUmVzb2x1dGlvbiAqIGVycm9yVGhyZXNob2xkSW5QaXhlbHMsIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICBpZiAoX3RoaXMudHJpYW5ndWxhdGlvbl8uZ2V0VHJpYW5nbGVzKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAvLyBubyB2YWxpZCB0cmlhbmdsZXMgLT4gRU1QVFlcbiAgICAgICAgICAgIF90aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLnNvdXJjZVpfID0gc291cmNlVGlsZUdyaWQuZ2V0WkZvclJlc29sdXRpb24oc291cmNlUmVzb2x1dGlvbik7XG4gICAgICAgIHZhciBzb3VyY2VFeHRlbnQgPSBfdGhpcy50cmlhbmd1bGF0aW9uXy5jYWxjdWxhdGVTb3VyY2VFeHRlbnQoKTtcbiAgICAgICAgaWYgKG1heFNvdXJjZUV4dGVudCkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZVByb2ouY2FuV3JhcFgoKSkge1xuICAgICAgICAgICAgICAgIHNvdXJjZUV4dGVudFsxXSA9IGNsYW1wKHNvdXJjZUV4dGVudFsxXSwgbWF4U291cmNlRXh0ZW50WzFdLCBtYXhTb3VyY2VFeHRlbnRbM10pO1xuICAgICAgICAgICAgICAgIHNvdXJjZUV4dGVudFszXSA9IGNsYW1wKHNvdXJjZUV4dGVudFszXSwgbWF4U291cmNlRXh0ZW50WzFdLCBtYXhTb3VyY2VFeHRlbnRbM10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc291cmNlRXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKHNvdXJjZUV4dGVudCwgbWF4U291cmNlRXh0ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWdldEFyZWEoc291cmNlRXh0ZW50KSkge1xuICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgc291cmNlUmFuZ2UgPSBzb3VyY2VUaWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKHNvdXJjZUV4dGVudCwgX3RoaXMuc291cmNlWl8pO1xuICAgICAgICAgICAgZm9yICh2YXIgc3JjWCA9IHNvdXJjZVJhbmdlLm1pblg7IHNyY1ggPD0gc291cmNlUmFuZ2UubWF4WDsgc3JjWCsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc3JjWSA9IHNvdXJjZVJhbmdlLm1pblk7IHNyY1kgPD0gc291cmNlUmFuZ2UubWF4WTsgc3JjWSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aWxlID0gZ2V0VGlsZUZ1bmN0aW9uKF90aGlzLnNvdXJjZVpfLCBzcmNYLCBzcmNZLCBwaXhlbFJhdGlvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNvdXJjZVRpbGVzXy5wdXNoKHRpbGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF90aGlzLnNvdXJjZVRpbGVzXy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgSFRNTCBDYW52YXMgZWxlbWVudCBmb3IgdGhpcyB0aWxlLlxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fSBDYW52YXMuXG4gICAgICovXG4gICAgUmVwcm9qVGlsZS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFJlcHJvalRpbGUucHJvdG90eXBlLnJlcHJvamVjdF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzb3VyY2VzID0gW107XG4gICAgICAgIHRoaXMuc291cmNlVGlsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRpbGUsIGksIGFycikge1xuICAgICAgICAgICAgaWYgKHRpbGUgJiYgdGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2VzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBleHRlbnQ6IHRoaXMuc291cmNlVGlsZUdyaWRfLmdldFRpbGVDb29yZEV4dGVudCh0aWxlLnRpbGVDb29yZCksXG4gICAgICAgICAgICAgICAgICAgIGltYWdlOiB0aWxlLmdldEltYWdlKCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuc291cmNlVGlsZXNfLmxlbmd0aCA9IDA7XG4gICAgICAgIGlmIChzb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FUlJPUjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB6ID0gdGhpcy53cmFwcGVkVGlsZUNvb3JkX1swXTtcbiAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy50YXJnZXRUaWxlR3JpZF8uZ2V0VGlsZVNpemUoeik7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0eXBlb2Ygc2l6ZSA9PT0gJ251bWJlcicgPyBzaXplIDogc2l6ZVswXTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0eXBlb2Ygc2l6ZSA9PT0gJ251bWJlcicgPyBzaXplIDogc2l6ZVsxXTtcbiAgICAgICAgICAgIHZhciB0YXJnZXRSZXNvbHV0aW9uID0gdGhpcy50YXJnZXRUaWxlR3JpZF8uZ2V0UmVzb2x1dGlvbih6KTtcbiAgICAgICAgICAgIHZhciBzb3VyY2VSZXNvbHV0aW9uID0gdGhpcy5zb3VyY2VUaWxlR3JpZF8uZ2V0UmVzb2x1dGlvbih0aGlzLnNvdXJjZVpfKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXRFeHRlbnQgPSB0aGlzLnRhcmdldFRpbGVHcmlkXy5nZXRUaWxlQ29vcmRFeHRlbnQodGhpcy53cmFwcGVkVGlsZUNvb3JkXyk7XG4gICAgICAgICAgICB0aGlzLmNhbnZhc18gPSByZW5kZXJSZXByb2plY3RlZCh3aWR0aCwgaGVpZ2h0LCB0aGlzLnBpeGVsUmF0aW9fLCBzb3VyY2VSZXNvbHV0aW9uLCB0aGlzLnNvdXJjZVRpbGVHcmlkXy5nZXRFeHRlbnQoKSwgdGFyZ2V0UmVzb2x1dGlvbiwgdGFyZ2V0RXh0ZW50LCB0aGlzLnRyaWFuZ3VsYXRpb25fLCBzb3VyY2VzLCB0aGlzLmd1dHRlcl8sIHRoaXMucmVuZGVyRWRnZXNfLCB0aGlzLmNvbnRleHRPcHRpb25zXyk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkxPQURFRDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgbm90IHlldCBsb2FkZWQgVVJJLlxuICAgICAqL1xuICAgIFJlcHJvalRpbGUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkxPQURJTkc7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgICAgIHZhciBsZWZ0VG9Mb2FkXzEgPSAwO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VUaWxlc18uZm9yRWFjaChmdW5jdGlvbiAodGlsZSwgaSwgYXJyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSB8fCBzdGF0ZSA9PSBUaWxlU3RhdGUuTE9BRElORykge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0VG9Mb2FkXzErKztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZUxpc3RlbktleV8xID0gbGlzdGVuKHRpbGUsIEV2ZW50VHlwZS5DSEFOR0UsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT0gVGlsZVN0YXRlLkxPQURFRCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID09IFRpbGVTdGF0ZS5FTVBUWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVubGlzdGVuQnlLZXkoc291cmNlTGlzdGVuS2V5XzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRUb0xvYWRfMS0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZWZ0VG9Mb2FkXzEgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bmxpc3RlblNvdXJjZXNfKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVwcm9qZWN0XygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlc0xpc3RlbmVyS2V5c18ucHVzaChzb3VyY2VMaXN0ZW5LZXlfMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuc291cmNlVGlsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRpbGUsIGksIGFycikge1xuICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGlsZS5sb2FkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAobGVmdFRvTG9hZF8xID09PSAwKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLnJlcHJvamVjdF8uYmluZCh0aGlzKSwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUmVwcm9qVGlsZS5wcm90b3R5cGUudW5saXN0ZW5Tb3VyY2VzXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICB0aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBSZXByb2pUaWxlO1xufShUaWxlKSk7XG5leHBvcnQgZGVmYXVsdCBSZXByb2pUaWxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVwcm9qL2NvbW1vblxuICovXG4vKipcbiAqIERlZmF1bHQgbWF4aW11bSBhbGxvd2VkIHRocmVzaG9sZCAgKGluIHBpeGVscykgZm9yIHJlcHJvamVjdGlvblxuICogdHJpYW5ndWxhdGlvbi5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgRVJST1JfVEhSRVNIT0xEID0gMC41O1xuLyoqXG4gKiBFbmFibGUgYXV0b21hdGljIHJlcHJvamVjdGlvbiBvZiByYXN0ZXIgc291cmNlcy4gRGVmYXVsdCBpcyBgdHJ1ZWAuXG4gKiBUT0RPOiBkZWNpZGUgaWYgd2Ugd2FudCB0byBleHBvc2UgdGhpcyBhcyBhIGJ1aWxkIGZsYWcgb3IgcmVtb3ZlIGl0XG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiA9IHRydWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21tb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0cnVjdHMvTFJVQ2FjaGVcbiAqL1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEVudHJ5XG4gKiBAcHJvcGVydHkge3N0cmluZ30ga2V5X1xuICogQHByb3BlcnR5IHtPYmplY3R9IG5ld2VyXG4gKiBAcHJvcGVydHkge09iamVjdH0gb2xkZXJcbiAqIEBwcm9wZXJ0eSB7Kn0gdmFsdWVfXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogSW1wbGVtZW50cyBhIExlYXN0LVJlY2VudGx5LVVzZWQgY2FjaGUgd2hlcmUgdGhlIGtleXMgZG8gbm90IGNvbmZsaWN0IHdpdGhcbiAqIE9iamVjdCdzIHByb3BlcnRpZXMgKGUuZy4gJ2hhc093blByb3BlcnR5JyBpcyBub3QgYWxsb3dlZCBhcyBhIGtleSkuIEV4cGlyaW5nXG4gKiBpdGVtcyBmcm9tIHRoZSBjYWNoZSBpcyB0aGUgcmVzcG9uc2liaWxpdHkgb2YgdGhlIHVzZXIuXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0XG4gKiBAdGVtcGxhdGUgVFxuICovXG52YXIgTFJVQ2FjaGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaGlnaFdhdGVyTWFyayBIaWdoIHdhdGVyIG1hcmsuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTFJVQ2FjaGUob3B0X2hpZ2hXYXRlck1hcmspIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlc2lyZWQgbWF4IGNhY2hlIHNpemUgYWZ0ZXIgZXhwaXJlQ2FjaGUoKS4gSWYgc2V0IHRvIDAsIG5vIGNhY2hlIGVudHJpZXNcbiAgICAgICAgICogd2lsbCBiZSBwcnVuZWQgYXQgYWxsLlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oaWdoV2F0ZXJNYXJrID1cbiAgICAgICAgICAgIG9wdF9oaWdoV2F0ZXJNYXJrICE9PSB1bmRlZmluZWQgPyBvcHRfaGlnaFdhdGVyTWFyayA6IDIwNDg7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb3VudF8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBFbnRyeT59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVudHJpZXNfID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0VudHJ5fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbGRlc3RfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/RW50cnl9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5ld2VzdF8gPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDYW4gZXhwaXJlIGNhY2hlLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5jYW5FeHBpcmVDYWNoZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlnaFdhdGVyTWFyayA+IDAgJiYgdGhpcy5nZXRDb3VudCgpID4gdGhpcy5oaWdoV2F0ZXJNYXJrO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNvdW50XyA9IDA7XG4gICAgICAgIHRoaXMuZW50cmllc18gPSB7fTtcbiAgICAgICAgdGhpcy5vbGRlc3RfID0gbnVsbDtcbiAgICAgICAgdGhpcy5uZXdlc3RfID0gbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIGtleS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuY29udGFpbnNLZXkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVudHJpZXNfLmhhc093blByb3BlcnR5KGtleSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFQsIHN0cmluZywgTFJVQ2FjaGU8VD4pOiA/fSBmIFRoZSBmdW5jdGlvblxuICAgICAqICAgICB0byBjYWxsIGZvciBldmVyeSBlbnRyeSBmcm9tIHRoZSBvbGRlc3QgdG8gdGhlIG5ld2VyLiBUaGlzIGZ1bmN0aW9uIHRha2VzXG4gICAgICogICAgIDMgYXJndW1lbnRzICh0aGUgZW50cnkgdmFsdWUsIHRoZSBlbnRyeSBrZXkgYW5kIHRoZSBMUlVDYWNoZSBvYmplY3QpLlxuICAgICAqICAgICBUaGUgcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWQuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoZikge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLm9sZGVzdF87XG4gICAgICAgIHdoaWxlIChlbnRyeSkge1xuICAgICAgICAgICAgZihlbnRyeS52YWx1ZV8sIGVudHJ5LmtleV8sIHRoaXMpO1xuICAgICAgICAgICAgZW50cnkgPSBlbnRyeS5uZXdlcjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkuXG4gICAgICogQHBhcmFtIHsqPX0gb3B0X29wdGlvbnMgT3B0aW9ucyAocmVzZXJ2ZXJkIGZvciBzdWJjbGFzc2VzKS5cbiAgICAgKiBAcmV0dXJuIHtUfSBWYWx1ZS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy5lbnRyaWVzX1trZXldO1xuICAgICAgICBhc3NlcnQoZW50cnkgIT09IHVuZGVmaW5lZCwgMTUpOyAvLyBUcmllZCB0byBnZXQgYSB2YWx1ZSBmb3IgYSBrZXkgdGhhdCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgY2FjaGVcbiAgICAgICAgaWYgKGVudHJ5ID09PSB0aGlzLm5ld2VzdF8pIHtcbiAgICAgICAgICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZW50cnkgPT09IHRoaXMub2xkZXN0Xykge1xuICAgICAgICAgICAgdGhpcy5vbGRlc3RfID0gLyoqIEB0eXBlIHtFbnRyeX0gKi8gKHRoaXMub2xkZXN0Xy5uZXdlcik7XG4gICAgICAgICAgICB0aGlzLm9sZGVzdF8ub2xkZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW50cnkubmV3ZXIub2xkZXIgPSBlbnRyeS5vbGRlcjtcbiAgICAgICAgICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZW50cnkubmV3ZXIgPSBudWxsO1xuICAgICAgICBlbnRyeS5vbGRlciA9IHRoaXMubmV3ZXN0XztcbiAgICAgICAgdGhpcy5uZXdlc3RfLm5ld2VyID0gZW50cnk7XG4gICAgICAgIHRoaXMubmV3ZXN0XyA9IGVudHJ5O1xuICAgICAgICByZXR1cm4gZW50cnkudmFsdWVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFuIGVudHJ5IGZyb20gdGhlIGNhY2hlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGVudHJ5IGtleS5cbiAgICAgKiBAcmV0dXJuIHtUfSBUaGUgcmVtb3ZlZCBlbnRyeS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLmVudHJpZXNfW2tleV07XG4gICAgICAgIGFzc2VydChlbnRyeSAhPT0gdW5kZWZpbmVkLCAxNSk7IC8vIFRyaWVkIHRvIGdldCBhIHZhbHVlIGZvciBhIGtleSB0aGF0IGRvZXMgbm90IGV4aXN0IGluIHRoZSBjYWNoZVxuICAgICAgICBpZiAoZW50cnkgPT09IHRoaXMubmV3ZXN0Xykge1xuICAgICAgICAgICAgdGhpcy5uZXdlc3RfID0gLyoqIEB0eXBlIHtFbnRyeX0gKi8gKGVudHJ5Lm9sZGVyKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm5ld2VzdF8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5ld2VzdF8ubmV3ZXIgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGVudHJ5ID09PSB0aGlzLm9sZGVzdF8pIHtcbiAgICAgICAgICAgIHRoaXMub2xkZXN0XyA9IC8qKiBAdHlwZSB7RW50cnl9ICovIChlbnRyeS5uZXdlcik7XG4gICAgICAgICAgICBpZiAodGhpcy5vbGRlc3RfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbGRlc3RfLm9sZGVyID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gZW50cnkub2xkZXI7XG4gICAgICAgICAgICBlbnRyeS5vbGRlci5uZXdlciA9IGVudHJ5Lm5ld2VyO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSB0aGlzLmVudHJpZXNfW2tleV07XG4gICAgICAgIC0tdGhpcy5jb3VudF87XG4gICAgICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IENvdW50LlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY291bnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gS2V5cy5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuZ2V0S2V5cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGtleXMgPSBuZXcgQXJyYXkodGhpcy5jb3VudF8pO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHZhciBlbnRyeTtcbiAgICAgICAgZm9yIChlbnRyeSA9IHRoaXMubmV3ZXN0XzsgZW50cnk7IGVudHJ5ID0gZW50cnkub2xkZXIpIHtcbiAgICAgICAgICAgIGtleXNbaSsrXSA9IGVudHJ5LmtleV87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxUPn0gVmFsdWVzLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5nZXRWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSBuZXcgQXJyYXkodGhpcy5jb3VudF8pO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHZhciBlbnRyeTtcbiAgICAgICAgZm9yIChlbnRyeSA9IHRoaXMubmV3ZXN0XzsgZW50cnk7IGVudHJ5ID0gZW50cnkub2xkZXIpIHtcbiAgICAgICAgICAgIHZhbHVlc1tpKytdID0gZW50cnkudmFsdWVfO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtUfSBMYXN0IHZhbHVlLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5wZWVrTGFzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2xkZXN0Xy52YWx1ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IExhc3Qga2V5LlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5wZWVrTGFzdEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2xkZXN0Xy5rZXlfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBrZXkgb2YgdGhlIG5ld2VzdCBpdGVtIGluIHRoZSBjYWNoZS4gIFRocm93cyBpZiB0aGUgY2FjaGUgaXMgZW1wdHkuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgbmV3ZXN0IGtleS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUucGVla0ZpcnN0S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uZXdlc3RfLmtleV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtUfSB2YWx1ZSBWYWx1ZS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLm9sZGVzdF87XG4gICAgICAgIGRlbGV0ZSB0aGlzLmVudHJpZXNfW2VudHJ5LmtleV9dO1xuICAgICAgICBpZiAoZW50cnkubmV3ZXIpIHtcbiAgICAgICAgICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9sZGVzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAoZW50cnkubmV3ZXIpO1xuICAgICAgICBpZiAoIXRoaXMub2xkZXN0Xykge1xuICAgICAgICAgICAgdGhpcy5uZXdlc3RfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAtLXRoaXMuY291bnRfO1xuICAgICAgICByZXR1cm4gZW50cnkudmFsdWVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkuXG4gICAgICogQHBhcmFtIHtUfSB2YWx1ZSBWYWx1ZS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZ2V0KGtleSk7IC8vIHVwZGF0ZSBgbmV3ZXN0X2BcbiAgICAgICAgdGhpcy5lbnRyaWVzX1trZXldLnZhbHVlXyA9IHZhbHVlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkuXG4gICAgICogQHBhcmFtIHtUfSB2YWx1ZSBWYWx1ZS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgYXNzZXJ0KCEoa2V5IGluIHRoaXMuZW50cmllc18pLCAxNik7IC8vIFRyaWVkIHRvIHNldCBhIHZhbHVlIGZvciBhIGtleSB0aGF0IGlzIHVzZWQgYWxyZWFkeVxuICAgICAgICB2YXIgZW50cnkgPSB7XG4gICAgICAgICAgICBrZXlfOiBrZXksXG4gICAgICAgICAgICBuZXdlcjogbnVsbCxcbiAgICAgICAgICAgIG9sZGVyOiB0aGlzLm5ld2VzdF8sXG4gICAgICAgICAgICB2YWx1ZV86IHZhbHVlLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIXRoaXMubmV3ZXN0Xykge1xuICAgICAgICAgICAgdGhpcy5vbGRlc3RfID0gZW50cnk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5ld2VzdF8ubmV3ZXIgPSBlbnRyeTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5ld2VzdF8gPSBlbnRyeTtcbiAgICAgICAgdGhpcy5lbnRyaWVzX1trZXldID0gZW50cnk7XG4gICAgICAgICsrdGhpcy5jb3VudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgYSBtYXhpbXVtIG51bWJlciBvZiBlbnRyaWVzIGZvciB0aGUgY2FjaGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgQ2FjaGUgc2l6ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgICAgICB0aGlzLmhpZ2hXYXRlck1hcmsgPSBzaXplO1xuICAgIH07XG4gICAgcmV0dXJuIExSVUNhY2hlO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IExSVUNhY2hlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TFJVQ2FjaGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3RpbGVjb29yZFxuICovXG4vKipcbiAqIEFuIGFycmF5IG9mIHRocmVlIG51bWJlcnMgcmVwcmVzZW50aW5nIHRoZSBsb2NhdGlvbiBvZiBhIHRpbGUgaW4gYSB0aWxlXG4gKiBncmlkLiBUaGUgb3JkZXIgaXMgYHpgICh6b29tIGxldmVsKSwgYHhgIChjb2x1bW4pLCBhbmQgYHlgIChyb3cpLlxuICogQHR5cGVkZWYge0FycmF5PG51bWJlcj59IFRpbGVDb29yZFxuICogQGFwaVxuICovXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB6IFouXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7VGlsZUNvb3JkPX0gb3B0X3RpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtUaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlKHosIHgsIHksIG9wdF90aWxlQ29vcmQpIHtcbiAgICBpZiAob3B0X3RpbGVDb29yZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG9wdF90aWxlQ29vcmRbMF0gPSB6O1xuICAgICAgICBvcHRfdGlsZUNvb3JkWzFdID0geDtcbiAgICAgICAgb3B0X3RpbGVDb29yZFsyXSA9IHk7XG4gICAgICAgIHJldHVybiBvcHRfdGlsZUNvb3JkO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFt6LCB4LCB5XTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB6IFouXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0S2V5WlhZKHosIHgsIHkpIHtcbiAgICByZXR1cm4geiArICcvJyArIHggKyAnLycgKyB5O1xufVxuLyoqXG4gKiBHZXQgdGhlIGtleSBmb3IgYSB0aWxlIGNvb3JkLlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IHRpbGVDb29yZCBUaGUgdGlsZSBjb29yZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0S2V5KHRpbGVDb29yZCkge1xuICAgIHJldHVybiBnZXRLZXlaWFkodGlsZUNvb3JkWzBdLCB0aWxlQ29vcmRbMV0sIHRpbGVDb29yZFsyXSk7XG59XG4vKipcbiAqIEdldCBhIHRpbGUgY29vcmQgZ2l2ZW4gYSBrZXkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSB0aWxlIGNvb3JkIGtleS5cbiAqIEByZXR1cm4ge1RpbGVDb29yZH0gVGhlIHRpbGUgY29vcmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tS2V5KGtleSkge1xuICAgIHJldHVybiBrZXkuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTtcbn1cbi8qKlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkLlxuICogQHJldHVybiB7bnVtYmVyfSBIYXNoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzaCh0aWxlQ29vcmQpIHtcbiAgICByZXR1cm4gKHRpbGVDb29yZFsxXSA8PCB0aWxlQ29vcmRbMF0pICsgdGlsZUNvb3JkWzJdO1xufVxuLyoqXG4gKiBAcGFyYW0ge1RpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7IWltcG9ydChcIi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGlsZSBjb29yZGluYXRlIGlzIHdpdGhpbiBleHRlbnQgYW5kIHpvb20gbGV2ZWwgcmFuZ2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoaW5FeHRlbnRBbmRaKHRpbGVDb29yZCwgdGlsZUdyaWQpIHtcbiAgICB2YXIgeiA9IHRpbGVDb29yZFswXTtcbiAgICB2YXIgeCA9IHRpbGVDb29yZFsxXTtcbiAgICB2YXIgeSA9IHRpbGVDb29yZFsyXTtcbiAgICBpZiAodGlsZUdyaWQuZ2V0TWluWm9vbSgpID4geiB8fCB6ID4gdGlsZUdyaWQuZ2V0TWF4Wm9vbSgpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIHRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldEZ1bGxUaWxlUmFuZ2Uoeik7XG4gICAgaWYgKCF0aWxlUmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdGlsZVJhbmdlLmNvbnRhaW5zWFkoeCwgeSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGlsZWNvb3JkLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvVGlsZUNhY2hlXG4gKi9cbmltcG9ydCBMUlVDYWNoZSBmcm9tICcuL3N0cnVjdHMvTFJVQ2FjaGUuanMnO1xuaW1wb3J0IHsgZnJvbUtleSwgZ2V0S2V5IH0gZnJvbSAnLi90aWxlY29vcmQuanMnO1xudmFyIFRpbGVDYWNoZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZUNhY2hlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFRpbGVDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gdXNlZFRpbGVzIFVzZWQgdGlsZXMuXG4gICAgICovXG4gICAgVGlsZUNhY2hlLnByb3RvdHlwZS5leHBpcmVDYWNoZSA9IGZ1bmN0aW9uICh1c2VkVGlsZXMpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgICAgICAgdmFyIHRpbGUgPSB0aGlzLnBlZWtMYXN0KCk7XG4gICAgICAgICAgICBpZiAodGlsZS5nZXRLZXkoKSBpbiB1c2VkVGlsZXMpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wKCkucmVsZWFzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQcnVuZSBhbGwgdGlsZXMgZnJvbSB0aGUgY2FjaGUgdGhhdCBkb24ndCBoYXZlIHRoZSBzYW1lIHogYXMgdGhlIG5ld2VzdCB0aWxlLlxuICAgICAqL1xuICAgIFRpbGVDYWNoZS5wcm90b3R5cGUucHJ1bmVFeGNlcHROZXdlc3RaID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5nZXRDb3VudCgpID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGtleSA9IHRoaXMucGVla0ZpcnN0S2V5KCk7XG4gICAgICAgIHZhciB0aWxlQ29vcmQgPSBmcm9tS2V5KGtleSk7XG4gICAgICAgIHZhciB6ID0gdGlsZUNvb3JkWzBdO1xuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHRpbGUpIHtcbiAgICAgICAgICAgIGlmICh0aWxlLnRpbGVDb29yZFswXSAhPT0geikge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKGdldEtleSh0aWxlLnRpbGVDb29yZCkpO1xuICAgICAgICAgICAgICAgIHRpbGUucmVsZWFzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbGVDYWNoZTtcbn0oTFJVQ2FjaGUpKTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVDYWNoZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVDYWNoZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZWdyaWQvVGlsZUdyaWRcbiAqL1xuaW1wb3J0IFRpbGVSYW5nZSwgeyBjcmVhdGVPclVwZGF0ZSBhcyBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZSwgfSBmcm9tICcuLi9UaWxlUmFuZ2UuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9USUxFX1NJWkUgfSBmcm9tICcuL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi4vbWF0aC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVPclVwZGF0ZSwgZ2V0VG9wTGVmdCB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVPclVwZGF0ZSBhcyBjcmVhdGVPclVwZGF0ZVRpbGVDb29yZCB9IGZyb20gJy4uL3RpbGVjb29yZC5qcyc7XG5pbXBvcnQgeyBpc1NvcnRlZCwgbGluZWFyRmluZE5lYXJlc3QgfSBmcm9tICcuLi9hcnJheS5qcyc7XG5pbXBvcnQgeyB0b1NpemUgfSBmcm9tICcuLi9zaXplLmpzJztcbi8qKlxuICogQHByaXZhdGVcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfVxuICovXG52YXIgdG1wVGlsZUNvb3JkID0gWzAsIDAsIDBdO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIEV4dGVudCBmb3IgdGhlIHRpbGUgZ3JpZC4gTm8gdGlsZXMgb3V0c2lkZSB0aGlzXG4gKiBleHRlbnQgd2lsbCBiZSByZXF1ZXN0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZX0gc291cmNlcy4gV2hlbiBubyBgb3JpZ2luYCBvclxuICogYG9yaWdpbnNgIGFyZSBjb25maWd1cmVkLCB0aGUgYG9yaWdpbmAgd2lsbCBiZSBzZXQgdG8gdGhlIHRvcC1sZWZ0IGNvcm5lciBvZiB0aGUgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIE1pbmltdW0gem9vbS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3JpZ2luXSBUaGUgdGlsZSBncmlkIG9yaWdpbiwgaS5lLiB3aGVyZSB0aGUgYHhgXG4gKiBhbmQgYHlgIGF4ZXMgbWVldCAoYFt6LCAwLCAwXWApLiBUaWxlIGNvb3JkaW5hdGVzIGluY3JlYXNlIGxlZnQgdG8gcmlnaHQgYW5kIGRvd253YXJkcy4gSWYgbm90XG4gKiBzcGVjaWZpZWQsIGBleHRlbnRgIG9yIGBvcmlnaW5zYCBtdXN0IGJlIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBbb3JpZ2luc10gVGlsZSBncmlkIG9yaWdpbnMsIGkuZS4gd2hlcmVcbiAqIHRoZSBgeGAgYW5kIGB5YCBheGVzIG1lZXQgKGBbeiwgMCwgMF1gKSwgZm9yIGVhY2ggem9vbSBsZXZlbC4gSWYgZ2l2ZW4sIHRoZSBhcnJheSBsZW5ndGhcbiAqIHNob3VsZCBtYXRjaCB0aGUgbGVuZ3RoIG9mIHRoZSBgcmVzb2x1dGlvbnNgIGFycmF5LCBpLmUuIGVhY2ggcmVzb2x1dGlvbiBjYW4gaGF2ZSBhIGRpZmZlcmVudFxuICogb3JpZ2luLiBUaWxlIGNvb3JkaW5hdGVzIGluY3JlYXNlIGxlZnQgdG8gcmlnaHQgYW5kIGRvd253YXJkcy4gSWYgbm90IHNwZWNpZmllZCwgYGV4dGVudGAgb3JcbiAqIGBvcmlnaW5gIG11c3QgYmUgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkgeyFBcnJheTxudW1iZXI+fSByZXNvbHV0aW9ucyBSZXNvbHV0aW9ucy4gVGhlIGFycmF5IGluZGV4IG9mIGVhY2ggcmVzb2x1dGlvbiBuZWVkc1xuICogdG8gbWF0Y2ggdGhlIHpvb20gbGV2ZWwuIFRoaXMgbWVhbnMgdGhhdCBldmVuIGlmIGEgYG1pblpvb21gIGlzIGNvbmZpZ3VyZWQsIHRoZSByZXNvbHV0aW9uc1xuICogYXJyYXkgd2lsbCBoYXZlIGEgbGVuZ3RoIG9mIGBtYXhab29tICsgMWAuXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZT59IFtzaXplc10gTnVtYmVyIG9mIHRpbGUgcm93cyBhbmQgY29sdW1uc1xuICogb2YgdGhlIGdyaWQgZm9yIGVhY2ggem9vbSBsZXZlbC4gSWYgc3BlY2lmaWVkIHRoZSB2YWx1ZXNcbiAqIGRlZmluZSBlYWNoIHpvb20gbGV2ZWwncyBleHRlbnQgdG9nZXRoZXIgd2l0aCB0aGUgYG9yaWdpbmAgb3IgYG9yaWdpbnNgLlxuICogQSBncmlkIGBleHRlbnRgIGNhbiBiZSBjb25maWd1cmVkIGluIGFkZGl0aW9uLCBhbmQgd2lsbCBmdXJ0aGVyIGxpbWl0IHRoZSBleHRlbnRcbiAqIGZvciB3aGljaCB0aWxlIHJlcXVlc3RzIGFyZSBtYWRlIGJ5IHNvdXJjZXMuIElmIHRoZSBib3R0b20tbGVmdCBjb3JuZXIgb2ZcbiAqIGFuIGV4dGVudCBpcyB1c2VkIGFzIGBvcmlnaW5gIG9yIGBvcmlnaW5zYCwgdGhlbiB0aGUgYHlgIHZhbHVlIG11c3QgYmVcbiAqIG5lZ2F0aXZlIGJlY2F1c2UgT3BlbkxheWVycyB0aWxlIGNvb3JkaW5hdGVzIHVzZSB0aGUgdG9wIGxlZnQgYXMgdGhlIG9yaWdpbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gW3RpbGVTaXplXSBUaWxlIHNpemUuXG4gKiBEZWZhdWx0IGlzIGBbMjU2LCAyNTZdYC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplPn0gW3RpbGVTaXplc10gVGlsZSBzaXplcy4gSWYgZ2l2ZW4sIHRoZSBhcnJheSBsZW5ndGhcbiAqIHNob3VsZCBtYXRjaCB0aGUgbGVuZ3RoIG9mIHRoZSBgcmVzb2x1dGlvbnNgIGFycmF5LCBpLmUuIGVhY2ggcmVzb2x1dGlvbiBjYW4gaGF2ZSBhIGRpZmZlcmVudFxuICogdGlsZSBzaXplLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHNldHRpbmcgdGhlIGdyaWQgcGF0dGVybiBmb3Igc291cmNlcyBhY2Nlc3NpbmcgdGlsZWQtaW1hZ2VcbiAqIHNlcnZlcnMuXG4gKiBAYXBpXG4gKi9cbnZhciBUaWxlR3JpZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgVGlsZSBncmlkIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZUdyaWQob3B0aW9ucykge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5taW5ab29tID0gb3B0aW9ucy5taW5ab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblpvb20gOiAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uc18gPSBvcHRpb25zLnJlc29sdXRpb25zO1xuICAgICAgICBhc3NlcnQoaXNTb3J0ZWQodGhpcy5yZXNvbHV0aW9uc18sIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYiAtIGE7XG4gICAgICAgIH0sIHRydWUpLCAxNyk7IC8vIGByZXNvbHV0aW9uc2AgbXVzdCBiZSBzb3J0ZWQgaW4gZGVzY2VuZGluZyBvcmRlclxuICAgICAgICAvLyBjaGVjayBpZiB3ZSd2ZSBnb3QgYSBjb25zaXN0ZW50IHpvb20gZmFjdG9yIGFuZCBvcmlnaW5cbiAgICAgICAgdmFyIHpvb21GYWN0b3I7XG4gICAgICAgIGlmICghb3B0aW9ucy5vcmlnaW5zKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGggLSAxOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmICghem9vbUZhY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICB6b29tRmFjdG9yID0gdGhpcy5yZXNvbHV0aW9uc19baV0gLyB0aGlzLnJlc29sdXRpb25zX1tpICsgMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXNvbHV0aW9uc19baV0gLyB0aGlzLnJlc29sdXRpb25zX1tpICsgMV0gIT09IHpvb21GYWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHpvb21GYWN0b3IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnpvb21GYWN0b3JfID0gem9vbUZhY3RvcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4Wm9vbSA9IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCAtIDE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcmlnaW5fID0gb3B0aW9ucy5vcmlnaW4gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub3JpZ2luIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcmlnaW5zXyA9IG51bGw7XG4gICAgICAgIGlmIChvcHRpb25zLm9yaWdpbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5zXyA9IG9wdGlvbnMub3JpZ2lucztcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLm9yaWdpbnNfLmxlbmd0aCA9PSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGgsIDIwKTsgLy8gTnVtYmVyIG9mIGBvcmlnaW5zYCBhbmQgYHJlc29sdXRpb25zYCBtdXN0IGJlIGVxdWFsXG4gICAgICAgIH1cbiAgICAgICAgdmFyIGV4dGVudCA9IG9wdGlvbnMuZXh0ZW50O1xuICAgICAgICBpZiAoZXh0ZW50ICE9PSB1bmRlZmluZWQgJiYgIXRoaXMub3JpZ2luXyAmJiAhdGhpcy5vcmlnaW5zXykge1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5fID0gZ2V0VG9wTGVmdChleHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydCgoIXRoaXMub3JpZ2luXyAmJiB0aGlzLm9yaWdpbnNfKSB8fCAodGhpcy5vcmlnaW5fICYmICF0aGlzLm9yaWdpbnNfKSwgMTgpOyAvLyBFaXRoZXIgYG9yaWdpbmAgb3IgYG9yaWdpbnNgIG11c3QgYmUgY29uZmlndXJlZCwgbmV2ZXIgYm90aFxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemU+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50aWxlU2l6ZXNfID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdGlvbnMudGlsZVNpemVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMudGlsZVNpemVzXyA9IG9wdGlvbnMudGlsZVNpemVzO1xuICAgICAgICAgICAgYXNzZXJ0KHRoaXMudGlsZVNpemVzXy5sZW5ndGggPT0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoLCAxOSk7IC8vIE51bWJlciBvZiBgdGlsZVNpemVzYCBhbmQgYHJlc29sdXRpb25zYCBtdXN0IGJlIGVxdWFsXG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50aWxlU2l6ZV8gPVxuICAgICAgICAgICAgb3B0aW9ucy50aWxlU2l6ZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLnRpbGVTaXplXG4gICAgICAgICAgICAgICAgOiAhdGhpcy50aWxlU2l6ZXNfXG4gICAgICAgICAgICAgICAgICAgID8gREVGQVVMVF9USUxFX1NJWkVcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICBhc3NlcnQoKCF0aGlzLnRpbGVTaXplXyAmJiB0aGlzLnRpbGVTaXplc18pIHx8XG4gICAgICAgICAgICAodGhpcy50aWxlU2l6ZV8gJiYgIXRoaXMudGlsZVNpemVzXyksIDIyKTsgLy8gRWl0aGVyIGB0aWxlU2l6ZWAgb3IgYHRpbGVTaXplc2AgbXVzdCBiZSBjb25maWd1cmVkLCBuZXZlciBib3RoXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZXh0ZW50XyA9IGV4dGVudCAhPT0gdW5kZWZpbmVkID8gZXh0ZW50IDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZ1bGxUaWxlUmFuZ2VzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50bXBTaXplXyA9IFswLCAwXTtcbiAgICAgICAgaWYgKG9wdGlvbnMuc2l6ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5mdWxsVGlsZVJhbmdlc18gPSBvcHRpb25zLnNpemVzLm1hcChmdW5jdGlvbiAoc2l6ZSwgeikge1xuICAgICAgICAgICAgICAgIHZhciB0aWxlUmFuZ2UgPSBuZXcgVGlsZVJhbmdlKE1hdGgubWluKDAsIHNpemVbMF0pLCBNYXRoLm1heChzaXplWzBdIC0gMSwgLTEpLCBNYXRoLm1pbigwLCBzaXplWzFdKSwgTWF0aC5tYXgoc2l6ZVsxXSAtIDEsIC0xKSk7XG4gICAgICAgICAgICAgICAgaWYgKGV4dGVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdHJpY3RlZFRpbGVSYW5nZSA9IHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihleHRlbnQsIHopO1xuICAgICAgICAgICAgICAgICAgICB0aWxlUmFuZ2UubWluWCA9IE1hdGgubWF4KHJlc3RyaWN0ZWRUaWxlUmFuZ2UubWluWCwgdGlsZVJhbmdlLm1pblgpO1xuICAgICAgICAgICAgICAgICAgICB0aWxlUmFuZ2UubWF4WCA9IE1hdGgubWluKHJlc3RyaWN0ZWRUaWxlUmFuZ2UubWF4WCwgdGlsZVJhbmdlLm1heFgpO1xuICAgICAgICAgICAgICAgICAgICB0aWxlUmFuZ2UubWluWSA9IE1hdGgubWF4KHJlc3RyaWN0ZWRUaWxlUmFuZ2UubWluWSwgdGlsZVJhbmdlLm1pblkpO1xuICAgICAgICAgICAgICAgICAgICB0aWxlUmFuZ2UubWF4WSA9IE1hdGgubWluKHJlc3RyaWN0ZWRUaWxlUmFuZ2UubWF4WSwgdGlsZVJhbmdlLm1heFkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGlsZVJhbmdlO1xuICAgICAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXh0ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVRpbGVSYW5nZXNfKGV4dGVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBhIGZ1bmN0aW9uIHdpdGggZWFjaCB0aWxlIGNvb3JkaW5hdGUgZm9yIGEgZ2l2ZW4gZXh0ZW50IGFuZCB6b29tIGxldmVsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQpOiB2b2lkfSBjYWxsYmFjayBGdW5jdGlvbiBjYWxsZWQgd2l0aCBlYWNoIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmZvckVhY2hUaWxlQ29vcmQgPSBmdW5jdGlvbiAoZXh0ZW50LCB6b29tLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgdGlsZVJhbmdlID0gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgem9vbSk7XG4gICAgICAgIGZvciAodmFyIGkgPSB0aWxlUmFuZ2UubWluWCwgaWkgPSB0aWxlUmFuZ2UubWF4WDsgaSA8PSBpaTsgKytpKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gdGlsZVJhbmdlLm1pblksIGpqID0gdGlsZVJhbmdlLm1heFk7IGogPD0gamo7ICsraikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKFt6b29tLCBpLCBqXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBjYWxsYmFjayBDYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0PX0gb3B0X3RpbGVSYW5nZSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudD19IG9wdF9leHRlbnQgVGVtcG9yYXJ5IGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbGxiYWNrIHN1Y2NlZWRlZC5cbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZm9yRWFjaFRpbGVDb29yZFBhcmVudFRpbGVSYW5nZSA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIGNhbGxiYWNrLCBvcHRfdGlsZVJhbmdlLCBvcHRfZXh0ZW50KSB7XG4gICAgICAgIHZhciB0aWxlUmFuZ2UsIHgsIHk7XG4gICAgICAgIHZhciB0aWxlQ29vcmRFeHRlbnQgPSBudWxsO1xuICAgICAgICB2YXIgeiA9IHRpbGVDb29yZFswXSAtIDE7XG4gICAgICAgIGlmICh0aGlzLnpvb21GYWN0b3JfID09PSAyKSB7XG4gICAgICAgICAgICB4ID0gdGlsZUNvb3JkWzFdO1xuICAgICAgICAgICAgeSA9IHRpbGVDb29yZFsyXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRpbGVDb29yZEV4dGVudCA9IHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgb3B0X2V4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHogPj0gdGhpcy5taW5ab29tKSB7XG4gICAgICAgICAgICBpZiAodGhpcy56b29tRmFjdG9yXyA9PT0gMikge1xuICAgICAgICAgICAgICAgIHggPSBNYXRoLmZsb29yKHggLyAyKTtcbiAgICAgICAgICAgICAgICB5ID0gTWF0aC5mbG9vcih5IC8gMik7XG4gICAgICAgICAgICAgICAgdGlsZVJhbmdlID0gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UoeCwgeCwgeSwgeSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aWxlUmFuZ2UgPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFoodGlsZUNvb3JkRXh0ZW50LCB6LCBvcHRfdGlsZVJhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYWxsYmFjayh6LCB0aWxlUmFuZ2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAtLXo7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBleHRlbnQgZm9yIHRoaXMgdGlsZSBncmlkLCBpZiBpdCB3YXMgY29uZmlndXJlZC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRFeHRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4dGVudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1heGltdW0gem9vbSBsZXZlbCBmb3IgdGhlIGdyaWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNYXggem9vbS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldE1heFpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heFpvb207XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIGdyaWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNaW4gem9vbS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldE1pblpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pblpvb207XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG9yaWdpbiBmb3IgdGhlIGdyaWQgYXQgdGhlIGdpdmVuIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gT3JpZ2luLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0T3JpZ2luID0gZnVuY3Rpb24gKHopIHtcbiAgICAgICAgaWYgKHRoaXMub3JpZ2luXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luXztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9yaWdpbnNfW3pdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIHRoZSBnaXZlbiB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHopIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x1dGlvbnNfW3pdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIHJlc29sdXRpb25zIGZvciB0aGUgdGlsZSBncmlkLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFJlc29sdXRpb25zLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdXRpb25zXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0PX0gb3B0X3RpbGVSYW5nZSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudD19IG9wdF9leHRlbnQgVGVtcG9yYXJ5IGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBUaWxlIHJhbmdlLlxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRDaGlsZFRpbGVSYW5nZSA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIG9wdF90aWxlUmFuZ2UsIG9wdF9leHRlbnQpIHtcbiAgICAgICAgaWYgKHRpbGVDb29yZFswXSA8IHRoaXMubWF4Wm9vbSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuem9vbUZhY3Rvcl8gPT09IDIpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWluWCA9IHRpbGVDb29yZFsxXSAqIDI7XG4gICAgICAgICAgICAgICAgdmFyIG1pblkgPSB0aWxlQ29vcmRbMl0gKiAyO1xuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZShtaW5YLCBtaW5YICsgMSwgbWluWSwgbWluWSArIDEsIG9wdF90aWxlUmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRpbGVDb29yZEV4dGVudCA9IHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgb3B0X2V4dGVudCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKHRpbGVDb29yZEV4dGVudCwgdGlsZUNvb3JkWzBdICsgMSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGV4dGVudCBmb3IgYSB0aWxlIHJhbmdlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQ9fSBvcHRfZXh0ZW50IFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50IG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVSYW5nZUV4dGVudCA9IGZ1bmN0aW9uICh6LCB0aWxlUmFuZ2UsIG9wdF9leHRlbnQpIHtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMuZ2V0T3JpZ2luKHopO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbih6KTtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUoeiksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICB2YXIgbWluWCA9IG9yaWdpblswXSArIHRpbGVSYW5nZS5taW5YICogdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWF4WCA9IG9yaWdpblswXSArICh0aWxlUmFuZ2UubWF4WCArIDEpICogdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWluWSA9IG9yaWdpblsxXSArIHRpbGVSYW5nZS5taW5ZICogdGlsZVNpemVbMV0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWF4WSA9IG9yaWdpblsxXSArICh0aWxlUmFuZ2UubWF4WSArIDEpICogdGlsZVNpemVbMV0gKiByZXNvbHV0aW9uO1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUobWluWCwgbWluWSwgbWF4WCwgbWF4WSwgb3B0X2V4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSB0aWxlIHJhbmdlIGZvciB0aGUgZ2l2ZW4gZXh0ZW50IGFuZCBpbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0PX0gb3B0X3RpbGVSYW5nZSBUZW1wb3JhcnkgdGlsZSByYW5nZSBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFRpbGUgcmFuZ2UuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFogPSBmdW5jdGlvbiAoZXh0ZW50LCB6LCBvcHRfdGlsZVJhbmdlKSB7XG4gICAgICAgIHZhciB0aWxlQ29vcmQgPSB0bXBUaWxlQ29vcmQ7XG4gICAgICAgIHRoaXMuZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyhleHRlbnRbMF0sIGV4dGVudFszXSwgeiwgZmFsc2UsIHRpbGVDb29yZCk7XG4gICAgICAgIHZhciBtaW5YID0gdGlsZUNvb3JkWzFdO1xuICAgICAgICB2YXIgbWluWSA9IHRpbGVDb29yZFsyXTtcbiAgICAgICAgdGhpcy5nZXRUaWxlQ29vcmRGb3JYWUFuZFpfKGV4dGVudFsyXSwgZXh0ZW50WzFdLCB6LCB0cnVlLCB0aWxlQ29vcmQpO1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UobWluWCwgdGlsZUNvb3JkWzFdLCBtaW5ZLCB0aWxlQ29vcmRbMl0sIG9wdF90aWxlUmFuZ2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVGlsZSBjZW50ZXIuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZENlbnRlciA9IGZ1bmN0aW9uICh0aWxlQ29vcmQpIHtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMuZ2V0T3JpZ2luKHRpbGVDb29yZFswXSk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHRpbGVDb29yZFswXSk7XG4gICAgICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHRpbGVDb29yZFswXSksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgb3JpZ2luWzBdICsgKHRpbGVDb29yZFsxXSArIDAuNSkgKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb24sXG4gICAgICAgICAgICBvcmlnaW5bMV0gLSAodGlsZUNvb3JkWzJdICsgMC41KSAqIHRpbGVTaXplWzFdICogcmVzb2x1dGlvbixcbiAgICAgICAgXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZXh0ZW50IG9mIGEgdGlsZSBjb29yZGluYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudD19IG9wdF9leHRlbnQgVGVtcG9yYXJ5IGV4dGVudCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkRXh0ZW50ID0gZnVuY3Rpb24gKHRpbGVDb29yZCwgb3B0X2V4dGVudCkge1xuICAgICAgICB2YXIgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4odGlsZUNvb3JkWzBdKTtcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24odGlsZUNvb3JkWzBdKTtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUodGlsZUNvb3JkWzBdKSwgdGhpcy50bXBTaXplXyk7XG4gICAgICAgIHZhciBtaW5YID0gb3JpZ2luWzBdICsgdGlsZUNvb3JkWzFdICogdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWluWSA9IG9yaWdpblsxXSAtICh0aWxlQ29vcmRbMl0gKyAxKSAqIHRpbGVTaXplWzFdICogcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIG1heFggPSBtaW5YICsgdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWF4WSA9IG1pblkgKyB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCBvcHRfZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGlsZSBjb29yZGluYXRlIGZvciB0aGUgZ2l2ZW4gbWFwIGNvb3JkaW5hdGUgYW5kIHJlc29sdXRpb24uICBUaGlzXG4gICAgICogbWV0aG9kIGNvbnNpZGVycyB0aGF0IGNvb3JkaW5hdGVzIHRoYXQgaW50ZXJzZWN0IHRpbGUgYm91bmRhcmllcyBzaG91bGQgYmVcbiAgICAgKiBhc3NpZ25lZCB0aGUgaGlnaGVyIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQ9fSBvcHRfdGlsZUNvb3JkIERlc3RpbmF0aW9uIGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEZvckNvb3JkQW5kUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCByZXNvbHV0aW9uLCBvcHRfdGlsZUNvb3JkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl8oY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSwgcmVzb2x1dGlvbiwgZmFsc2UsIG9wdF90aWxlQ29vcmQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIHNob3VsZCBub3QgYmUgY2FsbGVkIGZvciByZXNvbHV0aW9ucyB0aGF0IGNvcnJlc3BvbmRcbiAgICAgKiB0byBhbiBpbnRlZ2VyIHpvb20gbGV2ZWwuICBJbnN0ZWFkIGNhbGwgdGhlIGBnZXRUaWxlQ29vcmRGb3JYWUFuZFpfYCBtZXRob2QuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24gKGZvciBhIG5vbi1pbnRlZ2VyIHpvb20gbGV2ZWwpLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSBJbnN0ZWFkIG9mIGxldHRpbmcgZWRnZVxuICAgICAqICAgICBpbnRlcnNlY3Rpb25zIGdvIHRvIHRoZSBoaWdoZXIgdGlsZSBjb29yZGluYXRlLCBsZXQgZWRnZSBpbnRlcnNlY3Rpb25zXG4gICAgICogICAgIGdvIHRvIHRoZSBsb3dlciB0aWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkPX0gb3B0X3RpbGVDb29yZCBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl8gPSBmdW5jdGlvbiAoeCwgeSwgcmVzb2x1dGlvbiwgcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSwgb3B0X3RpbGVDb29yZCkge1xuICAgICAgICB2YXIgeiA9IHRoaXMuZ2V0WkZvclJlc29sdXRpb24ocmVzb2x1dGlvbik7XG4gICAgICAgIHZhciBzY2FsZSA9IHJlc29sdXRpb24gLyB0aGlzLmdldFJlc29sdXRpb24oeik7XG4gICAgICAgIHZhciBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih6KTtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUoeiksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICB2YXIgYWRqdXN0WCA9IHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kgPyAwLjUgOiAwO1xuICAgICAgICB2YXIgYWRqdXN0WSA9IHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kgPyAwLjUgOiAwO1xuICAgICAgICB2YXIgeEZyb21PcmlnaW4gPSBNYXRoLmZsb29yKCh4IC0gb3JpZ2luWzBdKSAvIHJlc29sdXRpb24gKyBhZGp1c3RYKTtcbiAgICAgICAgdmFyIHlGcm9tT3JpZ2luID0gTWF0aC5mbG9vcigob3JpZ2luWzFdIC0geSkgLyByZXNvbHV0aW9uICsgYWRqdXN0WSk7XG4gICAgICAgIHZhciB0aWxlQ29vcmRYID0gKHNjYWxlICogeEZyb21PcmlnaW4pIC8gdGlsZVNpemVbMF07XG4gICAgICAgIHZhciB0aWxlQ29vcmRZID0gKHNjYWxlICogeUZyb21PcmlnaW4pIC8gdGlsZVNpemVbMV07XG4gICAgICAgIGlmIChyZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5KSB7XG4gICAgICAgICAgICB0aWxlQ29vcmRYID0gTWF0aC5jZWlsKHRpbGVDb29yZFgpIC0gMTtcbiAgICAgICAgICAgIHRpbGVDb29yZFkgPSBNYXRoLmNlaWwodGlsZUNvb3JkWSkgLSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGlsZUNvb3JkWCA9IE1hdGguZmxvb3IodGlsZUNvb3JkWCk7XG4gICAgICAgICAgICB0aWxlQ29vcmRZID0gTWF0aC5mbG9vcih0aWxlQ29vcmRZKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlQ29vcmQoeiwgdGlsZUNvb3JkWCwgdGlsZUNvb3JkWSwgb3B0X3RpbGVDb29yZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBbHRob3VnaCB0aGVyZSBpcyByZXBldGl0aW9uIGJldHdlZW4gdGhpcyBtZXRob2QgYW5kIGBnZXRUaWxlQ29vcmRGb3JYWUFuZFJlc29sdXRpb25fYCxcbiAgICAgKiB0aGV5IHNob3VsZCBoYXZlIHNlcGFyYXRlIGltcGxlbWVudGF0aW9ucy4gIFRoaXMgbWV0aG9kIGlzIGZvciBpbnRlZ2VyIHpvb21cbiAgICAgKiBsZXZlbHMuICBUaGUgb3RoZXIgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBmb3IgcmVzb2x1dGlvbnMgY29ycmVzcG9uZGluZ1xuICAgICAqIHRvIG5vbi1pbnRlZ2VyIHpvb20gbGV2ZWxzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IE1hcCB4IGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgTWFwIHkgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBJbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtib29sZWFufSByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5IEluc3RlYWQgb2YgbGV0dGluZyBlZGdlXG4gICAgICogICAgIGludGVyc2VjdGlvbnMgZ28gdG8gdGhlIGhpZ2hlciB0aWxlIGNvb3JkaW5hdGUsIGxldCBlZGdlIGludGVyc2VjdGlvbnNcbiAgICAgKiAgICAgZ28gdG8gdGhlIGxvd2VyIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQ9fSBvcHRfdGlsZUNvb3JkIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkIG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyA9IGZ1bmN0aW9uICh4LCB5LCB6LCByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5LCBvcHRfdGlsZUNvb3JkKSB7XG4gICAgICAgIHZhciBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih6KTtcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oeik7XG4gICAgICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHopLCB0aGlzLnRtcFNpemVfKTtcbiAgICAgICAgdmFyIGFkanVzdFggPSByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5ID8gMC41IDogMDtcbiAgICAgICAgdmFyIGFkanVzdFkgPSByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5ID8gMC41IDogMDtcbiAgICAgICAgdmFyIHhGcm9tT3JpZ2luID0gTWF0aC5mbG9vcigoeCAtIG9yaWdpblswXSkgLyByZXNvbHV0aW9uICsgYWRqdXN0WCk7XG4gICAgICAgIHZhciB5RnJvbU9yaWdpbiA9IE1hdGguZmxvb3IoKG9yaWdpblsxXSAtIHkpIC8gcmVzb2x1dGlvbiArIGFkanVzdFkpO1xuICAgICAgICB2YXIgdGlsZUNvb3JkWCA9IHhGcm9tT3JpZ2luIC8gdGlsZVNpemVbMF07XG4gICAgICAgIHZhciB0aWxlQ29vcmRZID0geUZyb21PcmlnaW4gLyB0aWxlU2l6ZVsxXTtcbiAgICAgICAgaWYgKHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kpIHtcbiAgICAgICAgICAgIHRpbGVDb29yZFggPSBNYXRoLmNlaWwodGlsZUNvb3JkWCkgLSAxO1xuICAgICAgICAgICAgdGlsZUNvb3JkWSA9IE1hdGguY2VpbCh0aWxlQ29vcmRZKSAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aWxlQ29vcmRYID0gTWF0aC5mbG9vcih0aWxlQ29vcmRYKTtcbiAgICAgICAgICAgIHRpbGVDb29yZFkgPSBNYXRoLmZsb29yKHRpbGVDb29yZFkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVDb29yZCh6LCB0aWxlQ29vcmRYLCB0aWxlQ29vcmRZLCBvcHRfdGlsZUNvb3JkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIHRpbGUgY29vcmRpbmF0ZSBnaXZlbiBhIG1hcCBjb29yZGluYXRlIGFuZCB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogWm9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQ9fSBvcHRfdGlsZUNvb3JkIERlc3RpbmF0aW9uIGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEZvckNvb3JkQW5kWiA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCB6LCBvcHRfdGlsZUNvb3JkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVDb29yZEZvclhZQW5kWl8oY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSwgeiwgZmFsc2UsIG9wdF90aWxlQ29vcmQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGlsZSByZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHRpbGVDb29yZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHV0aW9uc19bdGlsZUNvb3JkWzBdXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGlsZSBzaXplIGZvciBhIHpvb20gbGV2ZWwuIFRoZSB0eXBlIG9mIHRoZSByZXR1cm4gdmFsdWUgbWF0Y2hlcyB0aGVcbiAgICAgKiBgdGlsZVNpemVgIG9yIGB0aWxlU2l6ZXNgIHRoYXQgdGhlIHRpbGUgZ3JpZCB3YXMgY29uZmlndXJlZCB3aXRoLiBUbyBhbHdheXNcbiAgICAgKiBnZXQgYW4gYGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZWAsIHJ1biB0aGUgcmVzdWx0IHRocm91Z2ggYGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZS50b1NpemUoKWAuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogWi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBUaWxlIHNpemUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlU2l6ZSA9IGZ1bmN0aW9uICh6KSB7XG4gICAgICAgIGlmICh0aGlzLnRpbGVTaXplXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZVNpemVfO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZVNpemVzX1t6XTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogWm9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gRXh0ZW50IHRpbGUgcmFuZ2UgZm9yIHRoZSBzcGVjaWZpZWQgem9vbSBsZXZlbC5cbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0RnVsbFRpbGVSYW5nZSA9IGZ1bmN0aW9uICh6KSB7XG4gICAgICAgIGlmICghdGhpcy5mdWxsVGlsZVJhbmdlc18pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4dGVudF9cbiAgICAgICAgICAgICAgICA/IHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWih0aGlzLmV4dGVudF8sIHopXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnVsbFRpbGVSYW5nZXNfW3pdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2RpcmVjdGlvbiBJZiAwLCB0aGUgbmVhcmVzdCByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC5cbiAgICAgKiAgICAgSWYgMSwgdGhlIG5lYXJlc3QgbG93ZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGUgbmVhcmVzdFxuICAgICAqICAgICBoaWdoZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuIERlZmF1bHQgaXMgMC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFouXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRaRm9yUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBvcHRfZGlyZWN0aW9uKSB7XG4gICAgICAgIHZhciB6ID0gbGluZWFyRmluZE5lYXJlc3QodGhpcy5yZXNvbHV0aW9uc18sIHJlc29sdXRpb24sIG9wdF9kaXJlY3Rpb24gfHwgMCk7XG4gICAgICAgIHJldHVybiBjbGFtcCh6LCB0aGlzLm1pblpvb20sIHRoaXMubWF4Wm9vbSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50IGZvciB0aGlzIHRpbGUgZ3JpZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5jYWxjdWxhdGVUaWxlUmFuZ2VzXyA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aDtcbiAgICAgICAgdmFyIGZ1bGxUaWxlUmFuZ2VzID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgICAgIGZvciAodmFyIHogPSB0aGlzLm1pblpvb207IHogPCBsZW5ndGg7ICsreikge1xuICAgICAgICAgICAgZnVsbFRpbGVSYW5nZXNbel0gPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZ1bGxUaWxlUmFuZ2VzXyA9IGZ1bGxUaWxlUmFuZ2VzO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbGVHcmlkO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVHcmlkO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZUdyaWQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3RpbGVncmlkXG4gKi9cbmltcG9ydCBDb3JuZXIgZnJvbSAnLi9leHRlbnQvQ29ybmVyLmpzJztcbmltcG9ydCBUaWxlR3JpZCBmcm9tICcuL3RpbGVncmlkL1RpbGVHcmlkLmpzJztcbmltcG9ydCBVbml0cyBmcm9tICcuL3Byb2ovVW5pdHMuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9NQVhfWk9PTSwgREVGQVVMVF9USUxFX1NJWkUgfSBmcm9tICcuL3RpbGVncmlkL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBNRVRFUlNfUEVSX1VOSVQsIGdldCBhcyBnZXRQcm9qZWN0aW9uIH0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7IGNvbnRhaW5zQ29vcmRpbmF0ZSwgY3JlYXRlT3JVcGRhdGUsIGdldENvcm5lciwgZ2V0SGVpZ2h0LCBnZXRXaWR0aCwgfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyB0b1NpemUgfSBmcm9tICcuL3NpemUuanMnO1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gRGVmYXVsdCB0aWxlIGdyaWQgZm9yIHRoZVxuICogcGFzc2VkIHByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgICB2YXIgdGlsZUdyaWQgPSBwcm9qZWN0aW9uLmdldERlZmF1bHRUaWxlR3JpZCgpO1xuICAgIGlmICghdGlsZUdyaWQpIHtcbiAgICAgICAgdGlsZUdyaWQgPSBjcmVhdGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICBwcm9qZWN0aW9uLnNldERlZmF1bHRUaWxlR3JpZCh0aWxlR3JpZCk7XG4gICAgfVxuICAgIHJldHVybiB0aWxlR3JpZDtcbn1cbi8qKlxuICogQHBhcmFtIHtUaWxlR3JpZH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gd3JhcFgodGlsZUdyaWQsIHRpbGVDb29yZCwgcHJvamVjdGlvbikge1xuICAgIHZhciB6ID0gdGlsZUNvb3JkWzBdO1xuICAgIHZhciBjZW50ZXIgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRDZW50ZXIodGlsZUNvb3JkKTtcbiAgICB2YXIgcHJvamVjdGlvbkV4dGVudCA9IGV4dGVudEZyb21Qcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIGlmICghY29udGFpbnNDb29yZGluYXRlKHByb2plY3Rpb25FeHRlbnQsIGNlbnRlcikpIHtcbiAgICAgICAgdmFyIHdvcmxkV2lkdGggPSBnZXRXaWR0aChwcm9qZWN0aW9uRXh0ZW50KTtcbiAgICAgICAgdmFyIHdvcmxkc0F3YXkgPSBNYXRoLmNlaWwoKHByb2plY3Rpb25FeHRlbnRbMF0gLSBjZW50ZXJbMF0pIC8gd29ybGRXaWR0aCk7XG4gICAgICAgIGNlbnRlclswXSArPSB3b3JsZFdpZHRoICogd29ybGRzQXdheTtcbiAgICAgICAgcmV0dXJuIHRpbGVHcmlkLmdldFRpbGVDb29yZEZvckNvb3JkQW5kWihjZW50ZXIsIHopO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRpbGVDb29yZDtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfbWF4Wm9vbSBNYXhpbXVtIHpvb20gbGV2ZWwgKGRlZmF1bHQgaXNcbiAqICAgICBERUZBVUxUX01BWF9aT09NKS5cbiAqIEBwYXJhbSB7bnVtYmVyfGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplPX0gb3B0X3RpbGVTaXplIFRpbGUgc2l6ZSAoZGVmYXVsdCB1c2VzXG4gKiAgICAgREVGQVVMVF9USUxFX1NJWkUpLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC9Db3JuZXIuanNcIikuZGVmYXVsdD19IG9wdF9jb3JuZXIgRXh0ZW50IGNvcm5lciAoZGVmYXVsdCBpcyBgJ3RvcC1sZWZ0J2ApLlxuICogQHJldHVybiB7IVRpbGVHcmlkfSBUaWxlR3JpZCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZvckV4dGVudChleHRlbnQsIG9wdF9tYXhab29tLCBvcHRfdGlsZVNpemUsIG9wdF9jb3JuZXIpIHtcbiAgICB2YXIgY29ybmVyID0gb3B0X2Nvcm5lciAhPT0gdW5kZWZpbmVkID8gb3B0X2Nvcm5lciA6IENvcm5lci5UT1BfTEVGVDtcbiAgICB2YXIgcmVzb2x1dGlvbnMgPSByZXNvbHV0aW9uc0Zyb21FeHRlbnQoZXh0ZW50LCBvcHRfbWF4Wm9vbSwgb3B0X3RpbGVTaXplKTtcbiAgICByZXR1cm4gbmV3IFRpbGVHcmlkKHtcbiAgICAgICAgZXh0ZW50OiBleHRlbnQsXG4gICAgICAgIG9yaWdpbjogZ2V0Q29ybmVyKGV4dGVudCwgY29ybmVyKSxcbiAgICAgICAgcmVzb2x1dGlvbnM6IHJlc29sdXRpb25zLFxuICAgICAgICB0aWxlU2l6ZTogb3B0X3RpbGVTaXplLFxuICAgIH0pO1xufVxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBYWVpPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gRXh0ZW50IGZvciB0aGUgdGlsZSBncmlkLiBUaGUgb3JpZ2luIGZvciBhbiBYWVogdGlsZSBncmlkIGlzIHRoZVxuICogdG9wLWxlZnQgY29ybmVyIG9mIHRoZSBleHRlbnQuIElmIGBtYXhSZXNvbHV0aW9uYCBpcyBub3QgcHJvdmlkZWQgdGhlIHplcm8gbGV2ZWwgb2YgdGhlIGdyaWQgaXMgZGVmaW5lZCBieSB0aGUgcmVzb2x1dGlvblxuICogYXQgd2hpY2ggb25lIHRpbGUgZml0cyBpbiB0aGUgcHJvdmlkZWQgZXh0ZW50LiBJZiBub3QgcHJvdmlkZWQsIHRoZSBleHRlbnQgb2YgdGhlIEVQU0c6Mzg1NyBwcm9qZWN0aW9uIGlzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFJlc29sdXRpb24gYXQgbGV2ZWwgemVyby5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gTWF4aW11bSB6b29tLiBUaGUgZGVmYXVsdCBpcyBgNDJgLiBUaGlzIGRldGVybWluZXMgdGhlIG51bWJlciBvZiBsZXZlbHNcbiAqIGluIHRoZSBncmlkIHNldC4gRm9yIGV4YW1wbGUsIGEgYG1heFpvb21gIG9mIDIxIG1lYW5zIHRoZXJlIGFyZSAyMiBsZXZlbHMgaW4gdGhlIGdyaWQgc2V0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIE1pbmltdW0gem9vbS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbdGlsZVNpemU9WzI1NiwgMjU2XV0gVGlsZSBzaXplIGluIHBpeGVscy5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgdGlsZSBncmlkIHdpdGggYSBzdGFuZGFyZCBYWVogdGlsaW5nIHNjaGVtZS5cbiAqIEBwYXJhbSB7WFlaT3B0aW9ucz19IG9wdF9vcHRpb25zIFRpbGUgZ3JpZCBvcHRpb25zLlxuICogQHJldHVybiB7IVRpbGVHcmlkfSBUaWxlIGdyaWQgaW5zdGFuY2UuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVYWVoob3B0X29wdGlvbnMpIHtcbiAgICB2YXIgeHl6T3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgIHZhciBleHRlbnQgPSB4eXpPcHRpb25zLmV4dGVudCB8fCBnZXRQcm9qZWN0aW9uKCdFUFNHOjM4NTcnKS5nZXRFeHRlbnQoKTtcbiAgICB2YXIgZ3JpZE9wdGlvbnMgPSB7XG4gICAgICAgIGV4dGVudDogZXh0ZW50LFxuICAgICAgICBtaW5ab29tOiB4eXpPcHRpb25zLm1pblpvb20sXG4gICAgICAgIHRpbGVTaXplOiB4eXpPcHRpb25zLnRpbGVTaXplLFxuICAgICAgICByZXNvbHV0aW9uczogcmVzb2x1dGlvbnNGcm9tRXh0ZW50KGV4dGVudCwgeHl6T3B0aW9ucy5tYXhab29tLCB4eXpPcHRpb25zLnRpbGVTaXplLCB4eXpPcHRpb25zLm1heFJlc29sdXRpb24pLFxuICAgIH07XG4gICAgcmV0dXJuIG5ldyBUaWxlR3JpZChncmlkT3B0aW9ucyk7XG59XG4vKipcbiAqIENyZWF0ZSBhIHJlc29sdXRpb25zIGFycmF5IGZyb20gYW4gZXh0ZW50LiAgQSB6b29tIGZhY3RvciBvZiAyIGlzIGFzc3VtZWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X21heFpvb20gTWF4aW11bSB6b29tIGxldmVsIChkZWZhdWx0IGlzXG4gKiAgICAgREVGQVVMVF9NQVhfWk9PTSkuXG4gKiBAcGFyYW0ge251bWJlcnxpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZT19IG9wdF90aWxlU2l6ZSBUaWxlIHNpemUgKGRlZmF1bHQgdXNlc1xuICogICAgIERFRkFVTFRfVElMRV9TSVpFKS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X21heFJlc29sdXRpb24gUmVzb2x1dGlvbiBhdCBsZXZlbCB6ZXJvLlxuICogQHJldHVybiB7IUFycmF5PG51bWJlcj59IFJlc29sdXRpb25zIGFycmF5LlxuICovXG5mdW5jdGlvbiByZXNvbHV0aW9uc0Zyb21FeHRlbnQoZXh0ZW50LCBvcHRfbWF4Wm9vbSwgb3B0X3RpbGVTaXplLCBvcHRfbWF4UmVzb2x1dGlvbikge1xuICAgIHZhciBtYXhab29tID0gb3B0X21heFpvb20gIT09IHVuZGVmaW5lZCA/IG9wdF9tYXhab29tIDogREVGQVVMVF9NQVhfWk9PTTtcbiAgICB2YXIgaGVpZ2h0ID0gZ2V0SGVpZ2h0KGV4dGVudCk7XG4gICAgdmFyIHdpZHRoID0gZ2V0V2lkdGgoZXh0ZW50KTtcbiAgICB2YXIgdGlsZVNpemUgPSB0b1NpemUob3B0X3RpbGVTaXplICE9PSB1bmRlZmluZWQgPyBvcHRfdGlsZVNpemUgOiBERUZBVUxUX1RJTEVfU0laRSk7XG4gICAgdmFyIG1heFJlc29sdXRpb24gPSBvcHRfbWF4UmVzb2x1dGlvbiA+IDBcbiAgICAgICAgPyBvcHRfbWF4UmVzb2x1dGlvblxuICAgICAgICA6IE1hdGgubWF4KHdpZHRoIC8gdGlsZVNpemVbMF0sIGhlaWdodCAvIHRpbGVTaXplWzFdKTtcbiAgICB2YXIgbGVuZ3RoID0gbWF4Wm9vbSArIDE7XG4gICAgdmFyIHJlc29sdXRpb25zID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgeiA9IDA7IHogPCBsZW5ndGg7ICsreikge1xuICAgICAgICByZXNvbHV0aW9uc1t6XSA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdygyLCB6KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc29sdXRpb25zO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfbWF4Wm9vbSBNYXhpbXVtIHpvb20gbGV2ZWwgKGRlZmF1bHQgaXNcbiAqICAgICBERUZBVUxUX01BWF9aT09NKS5cbiAqIEBwYXJhbSB7bnVtYmVyfGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplPX0gb3B0X3RpbGVTaXplIFRpbGUgc2l6ZSAoZGVmYXVsdCB1c2VzXG4gKiAgICAgREVGQVVMVF9USUxFX1NJWkUpLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC9Db3JuZXIuanNcIikuZGVmYXVsdD19IG9wdF9jb3JuZXIgRXh0ZW50IGNvcm5lciAoZGVmYXVsdCBpcyBgJ3RvcC1sZWZ0J2ApLlxuICogQHJldHVybiB7IVRpbGVHcmlkfSBUaWxlR3JpZCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZvclByb2plY3Rpb24ocHJvamVjdGlvbiwgb3B0X21heFpvb20sIG9wdF90aWxlU2l6ZSwgb3B0X2Nvcm5lcikge1xuICAgIHZhciBleHRlbnQgPSBleHRlbnRGcm9tUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICByZXR1cm4gY3JlYXRlRm9yRXh0ZW50KGV4dGVudCwgb3B0X21heFpvb20sIG9wdF90aWxlU2l6ZSwgb3B0X2Nvcm5lcik7XG59XG4vKipcbiAqIEdlbmVyYXRlIGEgdGlsZSBncmlkIGV4dGVudCBmcm9tIGEgcHJvamVjdGlvbi4gIElmIHRoZSBwcm9qZWN0aW9uIGhhcyBhblxuICogZXh0ZW50LCBpdCBpcyB1c2VkLiAgSWYgbm90LCBhIGdsb2JhbCBleHRlbnQgaXMgYXNzdW1lZC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVudEZyb21Qcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgICBwcm9qZWN0aW9uID0gZ2V0UHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICB2YXIgZXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICBpZiAoIWV4dGVudCkge1xuICAgICAgICB2YXIgaGFsZiA9ICgxODAgKiBNRVRFUlNfUEVSX1VOSVRbVW5pdHMuREVHUkVFU10pIC8gcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KCk7XG4gICAgICAgIGV4dGVudCA9IGNyZWF0ZU9yVXBkYXRlKC1oYWxmLCAtaGFsZiwgaGFsZiwgaGFsZik7XG4gICAgfVxuICAgIHJldHVybiBleHRlbnQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aWxlZ3JpZC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9UaWxlXG4gKi9cbmltcG9ydCBFdmVudCBmcm9tICcuLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IFNvdXJjZSBmcm9tICcuL1NvdXJjZS5qcyc7XG5pbXBvcnQgVGlsZUNhY2hlIGZyb20gJy4uL1RpbGVDYWNoZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBlcXVpdmFsZW50IH0gZnJvbSAnLi4vcHJvai5qcyc7XG5pbXBvcnQgeyBnZXRLZXlaWFksIHdpdGhpbkV4dGVudEFuZFogfSBmcm9tICcuLi90aWxlY29vcmQuanMnO1xuaW1wb3J0IHsgZ2V0Rm9yUHJvamVjdGlvbiBhcyBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24sIHdyYXBYLCB9IGZyb20gJy4uL3RpbGVncmlkLmpzJztcbmltcG9ydCB7IHNjYWxlIGFzIHNjYWxlU2l6ZSwgdG9TaXplIH0gZnJvbSAnLi4vc2l6ZS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY2FjaGVTaXplXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3BhcXVlPWZhbHNlXSBXaGV0aGVyIHRoZSBsYXllciBpcyBvcGFxdWUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbGVQaXhlbFJhdGlvXVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBbc3RhdGVdXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFt0aWxlR3JpZF1cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYPXRydWVdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb25dXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2tleV1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekRpcmVjdGlvbj0wXVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEJhc2UgY2xhc3MgZm9yIHNvdXJjZXMgcHJvdmlkaW5nIGltYWdlcyBkaXZpZGVkIGludG8gYSB0aWxlIGdyaWQuXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xudmFyIFRpbGVTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRpbGVTb3VyY2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIFNvdXJjZVRpbGUgc291cmNlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZVNvdXJjZShvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbnMsXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSxcbiAgICAgICAgICAgIHByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvbixcbiAgICAgICAgICAgIHN0YXRlOiBvcHRpb25zLnN0YXRlLFxuICAgICAgICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFgsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9wYXF1ZV8gPSBvcHRpb25zLm9wYXF1ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vcGFxdWUgOiBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlUGl4ZWxSYXRpb18gPVxuICAgICAgICAgICAgb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyA6IDE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUdyaWQgPSBvcHRpb25zLnRpbGVHcmlkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbGVHcmlkIDogbnVsbDtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gWzI1NiwgMjU2XTtcbiAgICAgICAgdmFyIHRpbGVHcmlkID0gb3B0aW9ucy50aWxlR3JpZDtcbiAgICAgICAgaWYgKHRpbGVHcmlkKSB7XG4gICAgICAgICAgICB0b1NpemUodGlsZUdyaWQuZ2V0VGlsZVNpemUodGlsZUdyaWQuZ2V0TWluWm9vbSgpKSwgdGlsZVNpemUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9UaWxlQ2FjaGUuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVDYWNoZSA9IG5ldyBUaWxlQ2FjaGUob3B0aW9ucy5jYWNoZVNpemUgfHwgMCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50bXBTaXplID0gWzAsIDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmtleV8gPSBvcHRpb25zLmtleSB8fCAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuT3B0aW9uc31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVPcHRpb25zID0geyB0cmFuc2l0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24gfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIHpEaXJlY3Rpb24gaGludCwgcmVhZCBieSB0aGUgcmVuZGVyZXIuIEluZGljYXRlcyB3aGljaCByZXNvbHV0aW9uIHNob3VsZCBiZSB1c2VkXG4gICAgICAgICAqIGJ5IGEgcmVuZGVyZXIgaWYgdGhlIHZpZXdzIHJlc29sdXRpb24gZG9lcyBub3QgbWF0Y2ggYW55IHJlc29sdXRpb24gb2YgdGhlIHRpbGUgc291cmNlLlxuICAgICAgICAgKiBJZiAwLCB0aGUgbmVhcmVzdCByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC4gSWYgMSwgdGhlIG5lYXJlc3QgbG93ZXIgcmVzb2x1dGlvblxuICAgICAgICAgKiB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGUgbmVhcmVzdCBoaWdoZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy56RGlyZWN0aW9uID0gb3B0aW9ucy56RGlyZWN0aW9uID8gb3B0aW9ucy56RGlyZWN0aW9uIDogMDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDYW4gZXhwaXJlIGNhY2hlLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmNhbkV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlQ2FjaGUuY2FuRXhwaXJlQ2FjaGUoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gdXNlZFRpbGVzIFVzZWQgdGlsZXMuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAocHJvamVjdGlvbiwgdXNlZFRpbGVzKSB7XG4gICAgICAgIHZhciB0aWxlQ2FjaGUgPSB0aGlzLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIGlmICh0aWxlQ2FjaGUpIHtcbiAgICAgICAgICAgIHRpbGVDYWNoZS5leHBpcmVDYWNoZSh1c2VkVGlsZXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogWm9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdCk6KGJvb2xlYW58dm9pZCl9IGNhbGxiYWNrIENhbGxlZCB3aXRoIGVhY2hcbiAgICAgKiAgICAgbG9hZGVkIHRpbGUuICBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBgZmFsc2VgLCB0aGUgdGlsZSB3aWxsIG5vdCBiZVxuICAgICAqICAgICBjb25zaWRlcmVkIGxvYWRlZC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdGlsZSByYW5nZSBpcyBmdWxseSBjb3ZlcmVkIHdpdGggbG9hZGVkIHRpbGVzLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmZvckVhY2hMb2FkZWRUaWxlID0gZnVuY3Rpb24gKHByb2plY3Rpb24sIHosIHRpbGVSYW5nZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgaWYgKCF0aWxlQ2FjaGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY292ZXJlZCA9IHRydWU7XG4gICAgICAgIHZhciB0aWxlLCB0aWxlQ29vcmRLZXksIGxvYWRlZDtcbiAgICAgICAgZm9yICh2YXIgeCA9IHRpbGVSYW5nZS5taW5YOyB4IDw9IHRpbGVSYW5nZS5tYXhYOyArK3gpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSB0aWxlUmFuZ2UubWluWTsgeSA8PSB0aWxlUmFuZ2UubWF4WTsgKyt5KSB7XG4gICAgICAgICAgICAgICAgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgICAgICAgICAgICAgIGxvYWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICh0aWxlQ2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB0aWxlID0gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGlsZUNhY2hlLmdldCh0aWxlQ29vcmRLZXkpKTtcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVkID0gdGlsZS5nZXRTdGF0ZSgpID09PSBUaWxlU3RhdGUuTE9BREVEO1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWQgPSBjYWxsYmFjayh0aWxlKSAhPT0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFsb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY292ZXJlZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEd1dHRlci5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRHdXR0ZXJGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGtleSB0byBiZSB1c2VkIGZvciBhbGwgdGlsZXMgaW4gdGhlIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBrZXkgZm9yIGFsbCB0aWxlcy5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXlfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2YWx1ZSB0byBiZSB1c2VkIGFzIHRoZSBrZXkgZm9yIGFsbCB0aWxlcyBpbiB0aGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBmb3IgdGlsZXMuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLnNldEtleSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKHRoaXMua2V5XyAhPT0ga2V5KSB7XG4gICAgICAgICAgICB0aGlzLmtleV8gPSBrZXk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IE9wYXF1ZS5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRPcGFxdWUgPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5vcGFxdWVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gUmVzb2x1dGlvbnMuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVHcmlkLmdldFJlc29sdXRpb25zKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlID0gZnVuY3Rpb24gKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHRpbGUgZ3JpZCBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gVGlsZSBncmlkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlR3JpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZUdyaWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFRpbGUgZ3JpZC5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24gPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICBpZiAoIXRoaXMudGlsZUdyaWQpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlR3JpZDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVDYWNoZS5qc1wiKS5kZWZhdWx0fSBUaWxlIGNhY2hlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgYXNzZXJ0KGVxdWl2YWxlbnQodGhpcy5nZXRQcm9qZWN0aW9uKCksIHByb2plY3Rpb24pLCA2OCAvLyBBIFZlY3RvclRpbGUgc291cmNlIGNhbiBvbmx5IGJlIHJlbmRlcmVkIGlmIGl0IGhhcyBhIHByb2plY3Rpb24gY29tcGF0aWJsZSB3aXRoIHRoZSB2aWV3IHByb2plY3Rpb24uXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVDYWNoZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGlsZSBwaXhlbCByYXRpbyBmb3IgdGhpcyBzb3VyY2UuIFN1YmNsYXNzZXMgbWF5IG92ZXJyaWRlIHRoaXNcbiAgICAgKiBtZXRob2QsIHdoaWNoIGlzIG1lYW50IHRvIHJldHVybiBhIHN1cHBvcnRlZCBwaXhlbCByYXRpbyB0aGF0IG1hdGNoZXMgdGhlXG4gICAgICogcHJvdmlkZWQgYHBpeGVsUmF0aW9gIGFzIGNsb3NlIGFzIHBvc3NpYmxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGlsZSBwaXhlbCByYXRpby5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlUGl4ZWxSYXRpbyA9IGZ1bmN0aW9uIChwaXhlbFJhdGlvKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVQaXhlbFJhdGlvXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gVGlsZSBzaXplLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFRpbGVQaXhlbFNpemUgPSBmdW5jdGlvbiAoeiwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgdGlsZUdyaWQgPSB0aGlzLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgdmFyIHRpbGVQaXhlbFJhdGlvID0gdGhpcy5nZXRUaWxlUGl4ZWxSYXRpbyhwaXhlbFJhdGlvKTtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRpbGVHcmlkLmdldFRpbGVTaXplKHopLCB0aGlzLnRtcFNpemUpO1xuICAgICAgICBpZiAodGlsZVBpeGVsUmF0aW8gPT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRpbGVTaXplO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNjYWxlU2l6ZSh0aWxlU2l6ZSwgdGlsZVBpeGVsUmF0aW8sIHRoaXMudG1wU2l6ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB0aWxlIGNvb3JkaW5hdGUgd3JhcHBlZCBhcm91bmQgdGhlIHgtYXhpcy4gV2hlbiB0aGUgdGlsZSBjb29yZGluYXRlXG4gICAgICogaXMgb3V0c2lkZSB0aGUgcmVzb2x1dGlvbiBhbmQgZXh0ZW50IHJhbmdlIG9mIHRoZSB0aWxlIGdyaWQsIGBudWxsYCB3aWxsIGJlXG4gICAgICogcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHQ9fSBvcHRfcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZSB0byBiZSBwYXNzZWQgdG8gdGhlIHRpbGVVcmxGdW5jdGlvbiBvclxuICAgICAqICAgICBudWxsIGlmIG5vIHRpbGUgVVJMIHNob3VsZCBiZSBjcmVhdGVkIGZvciB0aGUgcGFzc2VkIGB0aWxlQ29vcmRgLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbiA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIG9wdF9wcm9qZWN0aW9uKSB7XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gb3B0X3Byb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9wcm9qZWN0aW9uIDogdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgIHZhciB0aWxlR3JpZCA9IHRoaXMuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICBpZiAodGhpcy5nZXRXcmFwWCgpICYmIHByb2plY3Rpb24uaXNHbG9iYWwoKSkge1xuICAgICAgICAgICAgdGlsZUNvb3JkID0gd3JhcFgodGlsZUdyaWQsIHRpbGVDb29yZCwgcHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdpdGhpbkV4dGVudEFuZFoodGlsZUNvb3JkLCB0aWxlR3JpZCkgPyB0aWxlQ29vcmQgOiBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFsbCBjYWNoZWQgdGlsZXMgZnJvbSB0aGUgc291cmNlLiBUaGUgbmV4dCByZW5kZXIgY3ljbGUgd2lsbCBmZXRjaCBuZXcgdGlsZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnRpbGVDYWNoZS5jbGVhcigpO1xuICAgIH07XG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlZnJlc2guY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEluY3JlYXNlcyB0aGUgY2FjaGUgc2l6ZSBpZiBuZWVkZWRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGlsZUNvdW50IE1pbmltdW0gbnVtYmVyIG9mIHRpbGVzIG5lZWRlZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUudXBkYXRlQ2FjaGVTaXplID0gZnVuY3Rpb24gKHRpbGVDb3VudCwgcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgdGlsZUNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICBpZiAodGlsZUNvdW50ID4gdGlsZUNhY2hlLmhpZ2hXYXRlck1hcmspIHtcbiAgICAgICAgICAgIHRpbGVDYWNoZS5oaWdoV2F0ZXJNYXJrID0gdGlsZUNvdW50O1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNYXJrcyBhIHRpbGUgY29vcmQgYXMgYmVpbmcgdXNlZCwgd2l0aG91dCB0cmlnZ2VyaW5nIGEgbG9hZC5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUudXNlVGlsZSA9IGZ1bmN0aW9uICh6LCB4LCB5LCBwcm9qZWN0aW9uKSB7IH07XG4gICAgcmV0dXJuIFRpbGVTb3VyY2U7XG59KFNvdXJjZSkpO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBieSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlflRpbGVTb3VyY2V9IGluc3RhbmNlcyBhcmUgaW5zdGFuY2VzIG9mIHRoaXNcbiAqIHR5cGUuXG4gKi9cbnZhciBUaWxlU291cmNlRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRpbGVTb3VyY2VFdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRoZSB0aWxlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbGVTb3VyY2VFdmVudCh0eXBlLCB0aWxlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHR5cGUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGlsZSByZWxhdGVkIHRvIHRoZSBldmVudC5cbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZSA9IHRpbGU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFRpbGVTb3VyY2VFdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCB7IFRpbGVTb3VyY2VFdmVudCB9O1xuZXhwb3J0IGRlZmF1bHQgVGlsZVNvdXJjZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3RpbGV1cmxmdW5jdGlvblxuICovXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgbW9kdWxvIH0gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7IGhhc2ggYXMgdGlsZUNvb3JkSGFzaCB9IGZyb20gJy4vdGlsZWNvb3JkLmpzJztcbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHRlbXBsYXRlIFRlbXBsYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVHcmlkIFRpbGUgZ3JpZC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gVGlsZSBVUkwgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcm9tVGVtcGxhdGUodGVtcGxhdGUsIHRpbGVHcmlkKSB7XG4gICAgdmFyIHpSZWdFeCA9IC9cXHt6XFx9L2c7XG4gICAgdmFyIHhSZWdFeCA9IC9cXHt4XFx9L2c7XG4gICAgdmFyIHlSZWdFeCA9IC9cXHt5XFx9L2c7XG4gICAgdmFyIGRhc2hZUmVnRXggPSAvXFx7LXlcXH0vZztcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFRpbGUgVVJMLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uICh0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgaWYgKCF0aWxlQ29vcmQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAucmVwbGFjZSh6UmVnRXgsIHRpbGVDb29yZFswXS50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKHhSZWdFeCwgdGlsZUNvb3JkWzFdLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoeVJlZ0V4LCB0aWxlQ29vcmRbMl0udG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZShkYXNoWVJlZ0V4LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHogPSB0aWxlQ29vcmRbMF07XG4gICAgICAgICAgICAgICAgdmFyIHJhbmdlID0gdGlsZUdyaWQuZ2V0RnVsbFRpbGVSYW5nZSh6KTtcbiAgICAgICAgICAgICAgICBhc3NlcnQocmFuZ2UsIDU1KTsgLy8gVGhlIHsteX0gcGxhY2Vob2xkZXIgcmVxdWlyZXMgYSB0aWxlIGdyaWQgd2l0aCBleHRlbnRcbiAgICAgICAgICAgICAgICB2YXIgeSA9IHJhbmdlLmdldEhlaWdodCgpIC0gdGlsZUNvb3JkWzJdIC0gMTtcbiAgICAgICAgICAgICAgICByZXR1cm4geS50b1N0cmluZygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSB0ZW1wbGF0ZXMgVGVtcGxhdGVzLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVHcmlkIFRpbGUgZ3JpZC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gVGlsZSBVUkwgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcm9tVGVtcGxhdGVzKHRlbXBsYXRlcywgdGlsZUdyaWQpIHtcbiAgICB2YXIgbGVuID0gdGVtcGxhdGVzLmxlbmd0aDtcbiAgICB2YXIgdGlsZVVybEZ1bmN0aW9ucyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgdGlsZVVybEZ1bmN0aW9uc1tpXSA9IGNyZWF0ZUZyb21UZW1wbGF0ZSh0ZW1wbGF0ZXNbaV0sIHRpbGVHcmlkKTtcbiAgICB9XG4gICAgcmV0dXJuIGNyZWF0ZUZyb21UaWxlVXJsRnVuY3Rpb25zKHRpbGVVcmxGdW5jdGlvbnMpO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbj59IHRpbGVVcmxGdW5jdGlvbnMgVGlsZSBVUkwgRnVuY3Rpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBUaWxlIFVSTCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZyb21UaWxlVXJsRnVuY3Rpb25zKHRpbGVVcmxGdW5jdGlvbnMpIHtcbiAgICBpZiAodGlsZVVybEZ1bmN0aW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHRpbGVVcmxGdW5jdGlvbnNbMF07XG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gVGlsZSBVUkwuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHRpbGVDb29yZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgICAgICBpZiAoIXRpbGVDb29yZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBoID0gdGlsZUNvb3JkSGFzaCh0aWxlQ29vcmQpO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gbW9kdWxvKGgsIHRpbGVVcmxGdW5jdGlvbnMubGVuZ3RoKTtcbiAgICAgICAgICAgIHJldHVybiB0aWxlVXJsRnVuY3Rpb25zW2luZGV4XSh0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFRpbGUgVVJMLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbnVsbFRpbGVVcmxGdW5jdGlvbih0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFVSTC5cbiAqIEByZXR1cm4ge0FycmF5PHN0cmluZz59IEFycmF5IG9mIHVybHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHBhbmRVcmwodXJsKSB7XG4gICAgdmFyIHVybHMgPSBbXTtcbiAgICB2YXIgbWF0Y2ggPSAvXFx7KFthLXpdKS0oW2Etel0pXFx9Ly5leGVjKHVybCk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIC8vIGNoYXIgcmFuZ2VcbiAgICAgICAgdmFyIHN0YXJ0Q2hhckNvZGUgPSBtYXRjaFsxXS5jaGFyQ29kZUF0KDApO1xuICAgICAgICB2YXIgc3RvcENoYXJDb2RlID0gbWF0Y2hbMl0uY2hhckNvZGVBdCgwKTtcbiAgICAgICAgdmFyIGNoYXJDb2RlID0gdm9pZCAwO1xuICAgICAgICBmb3IgKGNoYXJDb2RlID0gc3RhcnRDaGFyQ29kZTsgY2hhckNvZGUgPD0gc3RvcENoYXJDb2RlOyArK2NoYXJDb2RlKSB7XG4gICAgICAgICAgICB1cmxzLnB1c2godXJsLnJlcGxhY2UobWF0Y2hbMF0sIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVybHM7XG4gICAgfVxuICAgIG1hdGNoID0gL1xceyhcXGQrKS0oXFxkKylcXH0vLmV4ZWModXJsKTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgLy8gbnVtYmVyIHJhbmdlXG4gICAgICAgIHZhciBzdG9wXzEgPSBwYXJzZUludChtYXRjaFsyXSwgMTApO1xuICAgICAgICBmb3IgKHZhciBpID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTsgaSA8PSBzdG9wXzE7IGkrKykge1xuICAgICAgICAgICAgdXJscy5wdXNoKHVybC5yZXBsYWNlKG1hdGNoWzBdLCBpLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXJscztcbiAgICB9XG4gICAgdXJscy5wdXNoKHVybCk7XG4gICAgcmV0dXJuIHVybHM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aWxldXJsZnVuY3Rpb24uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvVXJsVGlsZVxuICovXG5pbXBvcnQgVGlsZUV2ZW50VHlwZSBmcm9tICcuL1RpbGVFdmVudFR5cGUuanMnO1xuaW1wb3J0IFRpbGVTb3VyY2UsIHsgVGlsZVNvdXJjZUV2ZW50IH0gZnJvbSAnLi9UaWxlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7IGNyZWF0ZUZyb21UZW1wbGF0ZXMsIGV4cGFuZFVybCB9IGZyb20gJy4uL3RpbGV1cmxmdW5jdGlvbi5qcyc7XG5pbXBvcnQgeyBnZXRLZXlaWFkgfSBmcm9tICcuLi90aWxlY29vcmQuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi4vdXRpbC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY2FjaGVTaXplXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3BhcXVlPWZhbHNlXSBXaGV0aGVyIHRoZSBsYXllciBpcyBvcGFxdWUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFtzdGF0ZV1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gW3RpbGVHcmlkXVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gdGlsZUxvYWRGdW5jdGlvblxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aWxlUGl4ZWxSYXRpb11cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gW3RpbGVVcmxGdW5jdGlvbl1cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdXJsXVxuICogQHByb3BlcnR5IHtBcnJheTxzdHJpbmc+fSBbdXJsc11cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYPXRydWVdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb25dXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2tleV1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekRpcmVjdGlvbj0wXVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHNvdXJjZXMgcHJvdmlkaW5nIHRpbGVzIGRpdmlkZWQgaW50byBhIHRpbGUgZ3JpZCBvdmVyIGh0dHAuXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4vVGlsZS5qc1wiKS5UaWxlU291cmNlRXZlbnRcbiAqL1xudmFyIFVybFRpbGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFVybFRpbGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIEltYWdlIHRpbGUgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBVcmxUaWxlKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgICAgICAgIGNhY2hlU2l6ZTogb3B0aW9ucy5jYWNoZVNpemUsXG4gICAgICAgICAgICBvcGFxdWU6IG9wdGlvbnMub3BhcXVlLFxuICAgICAgICAgICAgcHJvamVjdGlvbjogb3B0aW9ucy5wcm9qZWN0aW9uLFxuICAgICAgICAgICAgc3RhdGU6IG9wdGlvbnMuc3RhdGUsXG4gICAgICAgICAgICB0aWxlR3JpZDogb3B0aW9ucy50aWxlR3JpZCxcbiAgICAgICAgICAgIHRpbGVQaXhlbFJhdGlvOiBvcHRpb25zLnRpbGVQaXhlbFJhdGlvLFxuICAgICAgICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFgsXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24sXG4gICAgICAgICAgICBrZXk6IG9wdGlvbnMua2V5LFxuICAgICAgICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUsXG4gICAgICAgICAgICB6RGlyZWN0aW9uOiBvcHRpb25zLnpEaXJlY3Rpb24sXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmdlbmVyYXRlVGlsZVVybEZ1bmN0aW9uXyA9XG4gICAgICAgICAgICBfdGhpcy50aWxlVXJsRnVuY3Rpb24gPT09IFVybFRpbGUucHJvdG90eXBlLnRpbGVVcmxGdW5jdGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUxvYWRGdW5jdGlvbiA9IG9wdGlvbnMudGlsZUxvYWRGdW5jdGlvbjtcbiAgICAgICAgaWYgKG9wdGlvbnMudGlsZVVybEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICBfdGhpcy50aWxlVXJsRnVuY3Rpb24gPSBvcHRpb25zLnRpbGVVcmxGdW5jdGlvbjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PHN0cmluZz58bnVsbH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVybHMgPSBudWxsO1xuICAgICAgICBpZiAob3B0aW9ucy51cmxzKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRVcmxzKG9wdGlvbnMudXJscyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy51cmwpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFVybChvcHRpb25zLnVybCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlTG9hZGluZ0tleXNfID0ge307XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB0aWxlIGxvYWQgZnVuY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gVGlsZUxvYWRGdW5jdGlvblxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5nZXRUaWxlTG9hZEZ1bmN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlTG9hZEZ1bmN0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB0aWxlIFVSTCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFRpbGVVcmxGdW5jdGlvblxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5nZXRUaWxlVXJsRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykudGlsZVVybEZ1bmN0aW9uID09PSB0aGlzLnRpbGVVcmxGdW5jdGlvblxuICAgICAgICAgICAgPyB0aGlzLnRpbGVVcmxGdW5jdGlvbi5iaW5kKHRoaXMpXG4gICAgICAgICAgICA6IHRoaXMudGlsZVVybEZ1bmN0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBVUkxzIHVzZWQgZm9yIHRoaXMgc291cmNlLlxuICAgICAqIFdoZW4gYSB0aWxlVXJsRnVuY3Rpb24gaXMgdXNlZCBpbnN0ZWFkIG9mIHVybCBvciB1cmxzLFxuICAgICAqIG51bGwgd2lsbCBiZSByZXR1cm5lZC5cbiAgICAgKiBAcmV0dXJuIHshQXJyYXk8c3RyaW5nPnxudWxsfSBVUkxzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5nZXRVcmxzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51cmxzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHRpbGUgY2hhbmdlIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuaGFuZGxlVGlsZUNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgdGlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgdmFyIHVpZCA9IGdldFVpZCh0aWxlKTtcbiAgICAgICAgdmFyIHRpbGVTdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgdmFyIHR5cGU7XG4gICAgICAgIGlmICh0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkxPQURJTkcpIHtcbiAgICAgICAgICAgIHRoaXMudGlsZUxvYWRpbmdLZXlzX1t1aWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIHR5cGUgPSBUaWxlRXZlbnRUeXBlLlRJTEVMT0FEU1RBUlQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodWlkIGluIHRoaXMudGlsZUxvYWRpbmdLZXlzXykge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMudGlsZUxvYWRpbmdLZXlzX1t1aWRdO1xuICAgICAgICAgICAgdHlwZSA9XG4gICAgICAgICAgICAgICAgdGlsZVN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUlxuICAgICAgICAgICAgICAgICAgICA/IFRpbGVFdmVudFR5cGUuVElMRUxPQURFUlJPUlxuICAgICAgICAgICAgICAgICAgICA6IHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuTE9BREVEXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFRpbGVFdmVudFR5cGUuVElMRUxPQURFTkRcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBUaWxlU291cmNlRXZlbnQodHlwZSwgdGlsZSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHRpbGUgbG9hZCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IHRpbGVMb2FkRnVuY3Rpb24gVGlsZSBsb2FkIGZ1bmN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5zZXRUaWxlTG9hZEZ1bmN0aW9uID0gZnVuY3Rpb24gKHRpbGVMb2FkRnVuY3Rpb24pIHtcbiAgICAgICAgdGhpcy50aWxlQ2FjaGUuY2xlYXIoKTtcbiAgICAgICAgdGhpcy50aWxlTG9hZEZ1bmN0aW9uID0gdGlsZUxvYWRGdW5jdGlvbjtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHRpbGUgVVJMIGZ1bmN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSB0aWxlVXJsRnVuY3Rpb24gVGlsZSBVUkwgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBrZXkgT3B0aW9uYWwgbmV3IHRpbGUga2V5IGZvciB0aGUgc291cmNlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5zZXRUaWxlVXJsRnVuY3Rpb24gPSBmdW5jdGlvbiAodGlsZVVybEZ1bmN0aW9uLCBrZXkpIHtcbiAgICAgICAgdGhpcy50aWxlVXJsRnVuY3Rpb24gPSB0aWxlVXJsRnVuY3Rpb247XG4gICAgICAgIHRoaXMudGlsZUNhY2hlLnBydW5lRXhjZXB0TmV3ZXN0WigpO1xuICAgICAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0S2V5KGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBVUkwgdG8gdXNlIGZvciByZXF1ZXN0cy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFVSTC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuc2V0VXJsID0gZnVuY3Rpb24gKHVybCkge1xuICAgICAgICB2YXIgdXJscyA9IGV4cGFuZFVybCh1cmwpO1xuICAgICAgICB0aGlzLnVybHMgPSB1cmxzO1xuICAgICAgICB0aGlzLnNldFVybHModXJscyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIFVSTHMgdG8gdXNlIGZvciByZXF1ZXN0cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHVybHMgVVJMcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuc2V0VXJscyA9IGZ1bmN0aW9uICh1cmxzKSB7XG4gICAgICAgIHRoaXMudXJscyA9IHVybHM7XG4gICAgICAgIHZhciBrZXkgPSB1cmxzLmpvaW4oJ1xcbicpO1xuICAgICAgICBpZiAodGhpcy5nZW5lcmF0ZVRpbGVVcmxGdW5jdGlvbl8pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0VGlsZVVybEZ1bmN0aW9uKGNyZWF0ZUZyb21UZW1wbGF0ZXModXJscywgdGhpcy50aWxlR3JpZCksIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldEtleShrZXkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFRpbGUgVVJMLlxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLnRpbGVVcmxGdW5jdGlvbiA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1hcmtzIGEgdGlsZSBjb29yZCBhcyBiZWluZyB1c2VkLCB3aXRob3V0IHRyaWdnZXJpbmcgYSBsb2FkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLnVzZVRpbGUgPSBmdW5jdGlvbiAoeiwgeCwgeSkge1xuICAgICAgICB2YXIgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgICAgICBpZiAodGhpcy50aWxlQ2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xuICAgICAgICAgICAgdGhpcy50aWxlQ2FjaGUuZ2V0KHRpbGVDb29yZEtleSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBVcmxUaWxlO1xufShUaWxlU291cmNlKSk7XG5leHBvcnQgZGVmYXVsdCBVcmxUaWxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VXJsVGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1RpbGVFdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSB0aWxlIHN0YXJ0cyBsb2FkaW5nLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvc291cmNlL1RpbGUuVGlsZVNvdXJjZUV2ZW50I3RpbGVsb2Fkc3RhcnRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVElMRUxPQURTVEFSVDogJ3RpbGVsb2Fkc3RhcnQnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgdGlsZSBmaW5pc2hlcyBsb2FkaW5nLCBlaXRoZXIgd2hlbiBpdHMgZGF0YSBpcyBsb2FkZWQsXG4gICAgICogb3Igd2hlbiBsb2FkaW5nIHdhcyBhYm9ydGVkIGJlY2F1c2UgdGhlIHRpbGUgaXMgbm8gbG9uZ2VyIG5lZWRlZC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9UaWxlLlRpbGVTb3VyY2VFdmVudCN0aWxlbG9hZGVuZFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUSUxFTE9BREVORDogJ3RpbGVsb2FkZW5kJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgaWYgdGlsZSBsb2FkaW5nIHJlc3VsdHMgaW4gYW4gZXJyb3IuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9zb3VyY2UvVGlsZS5UaWxlU291cmNlRXZlbnQjdGlsZWxvYWRlcnJvclxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUSUxFTE9BREVSUk9SOiAndGlsZWxvYWRlcnJvcicsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZUV2ZW50VHlwZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9UaWxlSW1hZ2VcbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbWFnZVRpbGUgZnJvbSAnLi4vSW1hZ2VUaWxlLmpzJztcbmltcG9ydCBSZXByb2pUaWxlIGZyb20gJy4uL3JlcHJvai9UaWxlLmpzJztcbmltcG9ydCBUaWxlQ2FjaGUgZnJvbSAnLi4vVGlsZUNhY2hlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCBVcmxUaWxlIGZyb20gJy4vVXJsVGlsZS5qcyc7XG5pbXBvcnQgeyBFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiB9IGZyb20gJy4uL3JlcHJvai9jb21tb24uanMnO1xuaW1wb3J0IHsgSU1BR0VfU01PT1RISU5HX0RJU0FCTEVEIH0gZnJvbSAnLi9jb21tb24uanMnO1xuaW1wb3J0IHsgZXF1aXZhbGVudCwgZ2V0IGFzIGdldFByb2plY3Rpb24gfSBmcm9tICcuLi9wcm9qLmpzJztcbmltcG9ydCB7IGdldEtleSwgZ2V0S2V5WlhZIH0gZnJvbSAnLi4vdGlsZWNvb3JkLmpzJztcbmltcG9ydCB7IGdldEZvclByb2plY3Rpb24gYXMgZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uIH0gZnJvbSAnLi4vdGlsZWdyaWQuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi4vdXRpbC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZT10cnVlXSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjYWNoZVNpemVdIEluaXRpYWwgdGlsZSBjYWNoZSBzaXplLiBXaWxsIGF1dG8tZ3JvdyB0byBob2xkIGF0IGxlYXN0IHRoZSBudW1iZXIgb2YgdGlsZXMgaW4gdGhlIHZpZXdwb3J0LlxuICogQHByb3BlcnR5IHtudWxsfHN0cmluZ30gW2Nyb3NzT3JpZ2luXSBUaGUgYGNyb3NzT3JpZ2luYCBhdHRyaWJ1dGUgZm9yIGxvYWRlZCBpbWFnZXMuICBOb3RlIHRoYXRcbiAqIHlvdSBtdXN0IHByb3ZpZGUgYSBgY3Jvc3NPcmlnaW5gIHZhbHVlIGlmIHlvdSB3YW50IHRvIGFjY2VzcyBwaXhlbCBkYXRhIHdpdGggdGhlIENhbnZhcyByZW5kZXJlci5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0NPUlNfZW5hYmxlZF9pbWFnZSBmb3IgbW9yZSBkZXRhaWwuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpbWFnZVNtb290aGluZz10cnVlXSBFbmFibGUgaW1hZ2Ugc21vb3RoaW5nLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3BhcXVlPWZhbHNlXSBXaGV0aGVyIHRoZSBsYXllciBpcyBvcGFxdWUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXSBQcm9qZWN0aW9uLiBEZWZhdWx0IGlzIHRoZSB2aWV3IHByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkPTAuNV0gTWF4aW11bSBhbGxvd2VkIHJlcHJvamVjdGlvbiBlcnJvciAoaW4gcGl4ZWxzKS5cbiAqIEhpZ2hlciB2YWx1ZXMgY2FuIGluY3JlYXNlIHJlcHJvamVjdGlvbiBwZXJmb3JtYW5jZSwgYnV0IGRlY3JlYXNlIHByZWNpc2lvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBbc3RhdGVdIFNvdXJjZSBzdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7dHlwZW9mIGltcG9ydChcIi4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSBbdGlsZUNsYXNzXSBDbGFzcyB1c2VkIHRvIGluc3RhbnRpYXRlIGltYWdlIHRpbGVzLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL0ltYWdlVGlsZX5JbWFnZVRpbGV9LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBbdGlsZUdyaWRdIFRpbGUgZ3JpZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IFt0aWxlTG9hZEZ1bmN0aW9uXSBPcHRpb25hbCBmdW5jdGlvbiB0byBsb2FkIGEgdGlsZSBnaXZlbiBhIFVSTC4gVGhlIGRlZmF1bHQgaXNcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbihpbWFnZVRpbGUsIHNyYykge1xuICogICBpbWFnZVRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiB9O1xuICogYGBgXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbGVQaXhlbFJhdGlvPTFdIFRoZSBwaXhlbCByYXRpbyB1c2VkIGJ5IHRoZSB0aWxlIHNlcnZpY2UuIEZvciBleGFtcGxlLCBpZiB0aGUgdGlsZVxuICogc2VydmljZSBhZHZlcnRpemVzIDI1NnB4IGJ5IDI1NnB4IHRpbGVzIGJ1dCBhY3R1YWxseSBzZW5kcyA1MTJweFxuICogYnkgNTEycHggaW1hZ2VzIChmb3IgcmV0aW5hL2hpZHBpIGRldmljZXMpIHRoZW4gYHRpbGVQaXhlbFJhdGlvYFxuICogc2hvdWxkIGJlIHNldCB0byBgMmAuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFt0aWxlVXJsRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGdldCB0aWxlIFVSTCBnaXZlbiBhIHRpbGUgY29vcmRpbmF0ZSBhbmQgdGhlIHByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3VybF0gVVJMIHRlbXBsYXRlLiBNdXN0IGluY2x1ZGUgYHt4fWAsIGB7eX1gIG9yIGB7LXl9YCwgYW5kIGB7en1gIHBsYWNlaG9sZGVycy5cbiAqIEEgYHs/LT99YCB0ZW1wbGF0ZSBwYXR0ZXJuLCBmb3IgZXhhbXBsZSBgc3ViZG9tYWlue2EtZn0uZG9tYWluLmNvbWAsIG1heSBiZVxuICogdXNlZCBpbnN0ZWFkIG9mIGRlZmluaW5nIGVhY2ggb25lIHNlcGFyYXRlbHkgaW4gdGhlIGB1cmxzYCBvcHRpb24uXG4gKiBAcHJvcGVydHkge0FycmF5PHN0cmluZz59IFt1cmxzXSBBbiBhcnJheSBvZiBVUkwgdGVtcGxhdGVzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFhdIFdoZXRoZXIgdG8gd3JhcCB0aGUgd29ybGQgaG9yaXpvbnRhbGx5LiBUaGUgZGVmYXVsdCwgaXMgdG9cbiAqIHJlcXVlc3Qgb3V0LW9mLWJvdW5kcyB0aWxlcyBmcm9tIHRoZSBzZXJ2ZXIuIFdoZW4gc2V0IHRvIGBmYWxzZWAsIG9ubHkgb25lXG4gKiB3b3JsZCB3aWxsIGJlIHJlbmRlcmVkLiBXaGVuIHNldCB0byBgdHJ1ZWAsIHRpbGVzIHdpbGwgYmUgcmVxdWVzdGVkIGZvciBvbmVcbiAqIHdvcmxkIG9ubHksIGJ1dCB0aGV5IHdpbGwgYmUgd3JhcHBlZCBob3Jpem9udGFsbHkgdG8gcmVuZGVyIG11bHRpcGxlIHdvcmxkcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbl0gRHVyYXRpb24gb2YgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiBmb3IgcmVuZGVyaW5nLlxuICogVG8gZGlzYWJsZSB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uLCBwYXNzIGB0cmFuc2l0aW9uOiAwYC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBba2V5XSBPcHRpb25hbCB0aWxlIGtleSBmb3IgcHJvcGVyIGNhY2hlIGZldGNoaW5nXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pEaXJlY3Rpb249MF0gSW5kaWNhdGUgd2hpY2ggcmVzb2x1dGlvbiBzaG91bGQgYmUgdXNlZFxuICogYnkgYSByZW5kZXJlciBpZiB0aGUgdmlldyByZXNvbHV0aW9uIGRvZXMgbm90IG1hdGNoIGFueSByZXNvbHV0aW9uIG9mIHRoZSB0aWxlIHNvdXJjZS5cbiAqIElmIDAsIHRoZSBuZWFyZXN0IHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLiBJZiAxLCB0aGUgbmVhcmVzdCBsb3dlciByZXNvbHV0aW9uXG4gKiB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGUgbmVhcmVzdCBoaWdoZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmb3Igc291cmNlcyBwcm92aWRpbmcgaW1hZ2VzIGRpdmlkZWQgaW50byBhIHRpbGUgZ3JpZC5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9UaWxlLmpzXCIpLlRpbGVTb3VyY2VFdmVudFxuICogQGFwaVxuICovXG52YXIgVGlsZUltYWdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlSW1hZ2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshT3B0aW9uc30gb3B0aW9ucyBJbWFnZSB0aWxlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZUltYWdlKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgICAgICAgIGNhY2hlU2l6ZTogb3B0aW9ucy5jYWNoZVNpemUsXG4gICAgICAgICAgICBvcGFxdWU6IG9wdGlvbnMub3BhcXVlLFxuICAgICAgICAgICAgcHJvamVjdGlvbjogb3B0aW9ucy5wcm9qZWN0aW9uLFxuICAgICAgICAgICAgc3RhdGU6IG9wdGlvbnMuc3RhdGUsXG4gICAgICAgICAgICB0aWxlR3JpZDogb3B0aW9ucy50aWxlR3JpZCxcbiAgICAgICAgICAgIHRpbGVMb2FkRnVuY3Rpb246IG9wdGlvbnMudGlsZUxvYWRGdW5jdGlvblxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy50aWxlTG9hZEZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgOiBkZWZhdWx0VGlsZUxvYWRGdW5jdGlvbixcbiAgICAgICAgICAgIHRpbGVQaXhlbFJhdGlvOiBvcHRpb25zLnRpbGVQaXhlbFJhdGlvLFxuICAgICAgICAgICAgdGlsZVVybEZ1bmN0aW9uOiBvcHRpb25zLnRpbGVVcmxGdW5jdGlvbixcbiAgICAgICAgICAgIHVybDogb3B0aW9ucy51cmwsXG4gICAgICAgICAgICB1cmxzOiBvcHRpb25zLnVybHMsXG4gICAgICAgICAgICB3cmFwWDogb3B0aW9ucy53cmFwWCxcbiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbixcbiAgICAgICAgICAgIGtleTogb3B0aW9ucy5rZXksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSxcbiAgICAgICAgICAgIHpEaXJlY3Rpb246IG9wdGlvbnMuekRpcmVjdGlvbixcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUgez9zdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jcm9zc09yaWdpbiA9XG4gICAgICAgICAgICBvcHRpb25zLmNyb3NzT3JpZ2luICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNyb3NzT3JpZ2luIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge3R5cGVvZiBJbWFnZVRpbGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlQ2xhc3MgPVxuICAgICAgICAgICAgb3B0aW9ucy50aWxlQ2xhc3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGlsZUNsYXNzIDogSW1hZ2VUaWxlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIFRpbGVDYWNoZT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb24gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGRfID0gb3B0aW9ucy5yZXByb2plY3Rpb25FcnJvclRocmVzaG9sZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtvYmplY3R8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGV4dE9wdGlvbnNfID1cbiAgICAgICAgICAgIG9wdGlvbnMuaW1hZ2VTbW9vdGhpbmcgPT09IGZhbHNlID8gSU1BR0VfU01PT1RISU5HX0RJU0FCTEVEIDogdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJSZXByb2plY3Rpb25FZGdlc18gPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDYW4gZXhwaXJlIGNhY2hlLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuY2FuRXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmNhbkV4cGlyZUNhY2hlLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudGlsZUNhY2hlLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25ba2V5XS5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59IHVzZWRUaWxlcyBVc2VkIHRpbGVzLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAocHJvamVjdGlvbiwgdXNlZFRpbGVzKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZXhwaXJlQ2FjaGUuY2FsbCh0aGlzLCBwcm9qZWN0aW9uLCB1c2VkVGlsZXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB1c2VkVGlsZUNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICB0aGlzLnRpbGVDYWNoZS5leHBpcmVDYWNoZSh0aGlzLnRpbGVDYWNoZSA9PSB1c2VkVGlsZUNhY2hlID8gdXNlZFRpbGVzIDoge30pO1xuICAgICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciB0aWxlQ2FjaGUgPSB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25baWRdO1xuICAgICAgICAgICAgdGlsZUNhY2hlLmV4cGlyZUNhY2hlKHRpbGVDYWNoZSA9PSB1c2VkVGlsZUNhY2hlID8gdXNlZFRpbGVzIDoge30pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfSBDb250ZXh0IG9wdGlvbnMuXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRDb250ZXh0T3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dE9wdGlvbnNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gR3V0dGVyLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0R3V0dGVyRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmIChFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiAmJlxuICAgICAgICAgICAgdGhpcy5nZXRQcm9qZWN0aW9uKCkgJiZcbiAgICAgICAgICAgIHByb2plY3Rpb24gJiZcbiAgICAgICAgICAgICFlcXVpdmFsZW50KHRoaXMuZ2V0UHJvamVjdGlvbigpLCBwcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRHdXR0ZXIoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBHdXR0ZXIuXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRHdXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBrZXkgdG8gYmUgdXNlZCBmb3IgYWxsIHRpbGVzIGluIHRoZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUga2V5IGZvciBhbGwgdGlsZXMuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKF9zdXBlci5wcm90b3R5cGUuZ2V0S2V5LmNhbGwodGhpcykgK1xuICAgICAgICAgICAgKHRoaXMuY29udGV4dE9wdGlvbnNfID8gJ1xcbicgKyBKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHRPcHRpb25zXykgOiAnJykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IE9wYXF1ZS5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldE9wYXF1ZSA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmIChFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiAmJlxuICAgICAgICAgICAgdGhpcy5nZXRQcm9qZWN0aW9uKCkgJiZcbiAgICAgICAgICAgIHByb2plY3Rpb24gJiZcbiAgICAgICAgICAgICFlcXVpdmFsZW50KHRoaXMuZ2V0UHJvamVjdGlvbigpLCBwcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZ2V0T3BhcXVlLmNhbGwodGhpcywgcHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gVGlsZSBncmlkLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgaWYgKCFFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTikge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uLmNhbGwodGhpcywgcHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRoaXNQcm9qID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgIGlmICh0aGlzLnRpbGVHcmlkICYmICghdGhpc1Byb2ogfHwgZXF1aXZhbGVudCh0aGlzUHJvaiwgcHJvamVjdGlvbikpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlR3JpZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwcm9qS2V5ID0gZ2V0VWlkKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgaWYgKCEocHJvaktleSBpbiB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbltwcm9qS2V5XSA9IGdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbltwcm9qS2V5XTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVDYWNoZS5qc1wiKS5kZWZhdWx0fSBUaWxlIGNhY2hlLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24uY2FsbCh0aGlzLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGhpc1Byb2ogPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgaWYgKCF0aGlzUHJvaiB8fCBlcXVpdmFsZW50KHRoaXNQcm9qLCBwcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZUNhY2hlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHByb2pLZXkgPSBnZXRVaWQocHJvamVjdGlvbik7XG4gICAgICAgICAgICBpZiAoIShwcm9qS2V5IGluIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25bcHJvaktleV0gPSBuZXcgVGlsZUNhY2hlKHRoaXMudGlsZUNhY2hlLmhpZ2hXYXRlck1hcmspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbltwcm9qS2V5XTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBzZXQgb24gdGhlIHRpbGUuXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuY3JlYXRlVGlsZV8gPSBmdW5jdGlvbiAoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwga2V5KSB7XG4gICAgICAgIHZhciB0aWxlQ29vcmQgPSBbeiwgeCwgeV07XG4gICAgICAgIHZhciB1cmxUaWxlQ29vcmQgPSB0aGlzLmdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbih0aWxlQ29vcmQsIHByb2plY3Rpb24pO1xuICAgICAgICB2YXIgdGlsZVVybCA9IHVybFRpbGVDb29yZFxuICAgICAgICAgICAgPyB0aGlzLnRpbGVVcmxGdW5jdGlvbih1cmxUaWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIHRpbGUgPSBuZXcgdGhpcy50aWxlQ2xhc3ModGlsZUNvb3JkLCB0aWxlVXJsICE9PSB1bmRlZmluZWQgPyBUaWxlU3RhdGUuSURMRSA6IFRpbGVTdGF0ZS5FTVBUWSwgdGlsZVVybCAhPT0gdW5kZWZpbmVkID8gdGlsZVVybCA6ICcnLCB0aGlzLmNyb3NzT3JpZ2luLCB0aGlzLnRpbGVMb2FkRnVuY3Rpb24sIHRoaXMudGlsZU9wdGlvbnMpO1xuICAgICAgICB0aWxlLmtleSA9IGtleTtcbiAgICAgICAgdGlsZS5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlVGlsZUNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgcmV0dXJuIHRpbGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldFRpbGUgPSBmdW5jdGlvbiAoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgc291cmNlUHJvamVjdGlvbiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OIHx8XG4gICAgICAgICAgICAhc291cmNlUHJvamVjdGlvbiB8fFxuICAgICAgICAgICAgIXByb2plY3Rpb24gfHxcbiAgICAgICAgICAgIGVxdWl2YWxlbnQoc291cmNlUHJvamVjdGlvbiwgcHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVJbnRlcm5hbCh6LCB4LCB5LCBwaXhlbFJhdGlvLCBzb3VyY2VQcm9qZWN0aW9uIHx8IHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgdmFyIHRpbGVDb29yZCA9IFt6LCB4LCB5XTtcbiAgICAgICAgICAgIHZhciB0aWxlID0gdm9pZCAwO1xuICAgICAgICAgICAgdmFyIHRpbGVDb29yZEtleSA9IGdldEtleSh0aWxlQ29vcmQpO1xuICAgICAgICAgICAgaWYgKGNhY2hlLmNvbnRhaW5zS2V5KHRpbGVDb29yZEtleSkpIHtcbiAgICAgICAgICAgICAgICB0aWxlID0gY2FjaGUuZ2V0KHRpbGVDb29yZEtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5nZXRLZXkoKTtcbiAgICAgICAgICAgIGlmICh0aWxlICYmIHRpbGUua2V5ID09IGtleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZVRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24oc291cmNlUHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldFRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZWRUaWxlQ29vcmQgPSB0aGlzLmdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbih0aWxlQ29vcmQsIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgIHZhciBuZXdUaWxlID0gbmV3IFJlcHJvalRpbGUoc291cmNlUHJvamVjdGlvbiwgc291cmNlVGlsZUdyaWQsIHByb2plY3Rpb24sIHRhcmdldFRpbGVHcmlkLCB0aWxlQ29vcmQsIHdyYXBwZWRUaWxlQ29vcmQsIHRoaXMuZ2V0VGlsZVBpeGVsUmF0aW8ocGl4ZWxSYXRpbyksIHRoaXMuZ2V0R3V0dGVyKCksIGZ1bmN0aW9uICh6LCB4LCB5LCBwaXhlbFJhdGlvKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVJbnRlcm5hbCh6LCB4LCB5LCBwaXhlbFJhdGlvLCBzb3VyY2VQcm9qZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksIHRoaXMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGRfLCB0aGlzLnJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXywgdGhpcy5jb250ZXh0T3B0aW9uc18pO1xuICAgICAgICAgICAgICAgIG5ld1RpbGUua2V5ID0ga2V5O1xuICAgICAgICAgICAgICAgIGlmICh0aWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1RpbGUuaW50ZXJpbVRpbGUgPSB0aWxlO1xuICAgICAgICAgICAgICAgICAgICBuZXdUaWxlLnJlZnJlc2hJbnRlcmltQ2hhaW4oKTtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGUucmVwbGFjZSh0aWxlQ29vcmRLZXksIG5ld1RpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGUuc2V0KHRpbGVDb29yZEtleSwgbmV3VGlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXdUaWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0geyFpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0VGlsZUludGVybmFsID0gZnVuY3Rpb24gKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgdmFyIHRpbGUgPSBudWxsO1xuICAgICAgICB2YXIgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgICAgICB2YXIga2V5ID0gdGhpcy5nZXRLZXkoKTtcbiAgICAgICAgaWYgKCF0aGlzLnRpbGVDYWNoZS5jb250YWluc0tleSh0aWxlQ29vcmRLZXkpKSB7XG4gICAgICAgICAgICB0aWxlID0gdGhpcy5jcmVhdGVUaWxlXyh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBrZXkpO1xuICAgICAgICAgICAgdGhpcy50aWxlQ2FjaGUuc2V0KHRpbGVDb29yZEtleSwgdGlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aWxlID0gdGhpcy50aWxlQ2FjaGUuZ2V0KHRpbGVDb29yZEtleSk7XG4gICAgICAgICAgICBpZiAodGlsZS5rZXkgIT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIHNvdXJjZSdzIHBhcmFtcyBjaGFuZ2VkLiBJZiB0aGUgdGlsZSBoYXMgYW4gaW50ZXJpbSB0aWxlIGFuZCBpZiB3ZVxuICAgICAgICAgICAgICAgIC8vIGNhbiB1c2UgaXQgdGhlbiB3ZSB1c2UgaXQuIE90aGVyd2lzZSB3ZSBjcmVhdGUgYSBuZXcgdGlsZS4gIEluIGJvdGhcbiAgICAgICAgICAgICAgICAvLyBjYXNlcyB3ZSBhdHRlbXB0IHRvIGFzc2lnbiBhbiBpbnRlcmltIHRpbGUgdG8gdGhlIG5ldyB0aWxlLlxuICAgICAgICAgICAgICAgIHZhciBpbnRlcmltVGlsZSA9IHRpbGU7XG4gICAgICAgICAgICAgICAgdGlsZSA9IHRoaXMuY3JlYXRlVGlsZV8oeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwga2V5KTtcbiAgICAgICAgICAgICAgICAvL21ha2UgdGhlIG5ldyB0aWxlIHRoZSBoZWFkIG9mIHRoZSBsaXN0LFxuICAgICAgICAgICAgICAgIGlmIChpbnRlcmltVGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vdGhlIG9sZCB0aWxlIGhhc24ndCBiZWd1biBsb2FkaW5nIHlldCwgYW5kIGlzIG5vdyBvdXRkYXRlZCwgc28gd2UgY2FuIHNpbXBseSBkaXNjYXJkIGl0XG4gICAgICAgICAgICAgICAgICAgIHRpbGUuaW50ZXJpbVRpbGUgPSBpbnRlcmltVGlsZS5pbnRlcmltVGlsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbGUuaW50ZXJpbVRpbGUgPSBpbnRlcmltVGlsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGlsZS5yZWZyZXNoSW50ZXJpbUNoYWluKCk7XG4gICAgICAgICAgICAgICAgdGhpcy50aWxlQ2FjaGUucmVwbGFjZSh0aWxlQ29vcmRLZXksIHRpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aWxlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB3aGV0aGVyIHRvIHJlbmRlciByZXByb2plY3Rpb24gZWRnZXMgb3Igbm90ICh1c3VhbGx5IGZvciBkZWJ1Z2dpbmcpLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVuZGVyIFJlbmRlciB0aGUgZWRnZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuc2V0UmVuZGVyUmVwcm9qZWN0aW9uRWRnZXMgPSBmdW5jdGlvbiAocmVuZGVyKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04gfHxcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUmVwcm9qZWN0aW9uRWRnZXNfID09IHJlbmRlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyUmVwcm9qZWN0aW9uRWRnZXNfID0gcmVuZGVyO1xuICAgICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbltpZF0uY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRpbGUgZ3JpZCB0byB1c2Ugd2hlbiByZXByb2plY3RpbmcgdGhlIHRpbGVzIHRvIHRoZSBnaXZlblxuICAgICAqIHByb2plY3Rpb24gaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCB0aWxlIGdyaWQgZm9yIHRoZSBwcm9qZWN0aW9uLlxuICAgICAqXG4gICAgICogVGhpcyBjYW4gYmUgdXNlZnVsIHdoZW4gdGhlIGRlZmF1bHQgdGlsZSBncmlkIGNhbm5vdCBiZSBjcmVhdGVkXG4gICAgICogKGUuZy4gcHJvamVjdGlvbiBoYXMgbm8gZXh0ZW50IGRlZmluZWQpIG9yXG4gICAgICogZm9yIG9wdGltaXphdGlvbiByZWFzb25zIChjdXN0b20gdGlsZSBzaXplLCByZXNvbHV0aW9ucywgLi4uKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZWdyaWQgVGlsZSBncmlkIHRvIHVzZSBmb3IgdGhlIHByb2plY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuc2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24sIHRpbGVncmlkKSB7XG4gICAgICAgIGlmIChFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTikge1xuICAgICAgICAgICAgdmFyIHByb2ogPSBnZXRQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgaWYgKHByb2opIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvaktleSA9IGdldFVpZChwcm9qKTtcbiAgICAgICAgICAgICAgICBpZiAoIShwcm9qS2V5IGluIHRoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbltwcm9qS2V5XSA9IHRpbGVncmlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRpbGVJbWFnZTtcbn0oVXJsVGlsZSkpO1xuLyoqXG4gKiBAcGFyYW0ge0ltYWdlVGlsZX0gaW1hZ2VUaWxlIEltYWdlIHRpbGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNvdXJjZS5cbiAqL1xuZnVuY3Rpb24gZGVmYXVsdFRpbGVMb2FkRnVuY3Rpb24oaW1hZ2VUaWxlLCBzcmMpIHtcbiAgICAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gKi8gKGltYWdlVGlsZS5nZXRJbWFnZSgpKS5zcmMgPSBzcmM7XG59XG5leHBvcnQgZGVmYXVsdCBUaWxlSW1hZ2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlSW1hZ2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9YWVpcbiAqL1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBUaWxlSW1hZ2UgZnJvbSAnLi9UaWxlSW1hZ2UuanMnO1xuaW1wb3J0IHsgY3JlYXRlWFlaLCBleHRlbnRGcm9tUHJvamVjdGlvbiB9IGZyb20gJy4uL3RpbGVncmlkLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5BdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdIEF0dHJpYnV0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uc0NvbGxhcHNpYmxlPXRydWVdIEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2NhY2hlU2l6ZV0gSW5pdGlhbCB0aWxlIGNhY2hlIHNpemUuIFdpbGwgYXV0by1ncm93IHRvIGhvbGQgYXQgbGVhc3QgdGhlIG51bWJlciBvZiB0aWxlcyBpbiB0aGUgdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge251bGx8c3RyaW5nfSBbY3Jvc3NPcmlnaW5dIFRoZSBgY3Jvc3NPcmlnaW5gIGF0dHJpYnV0ZSBmb3IgbG9hZGVkIGltYWdlcy4gIE5vdGUgdGhhdFxuICogeW91IG11c3QgcHJvdmlkZSBhIGBjcm9zc09yaWdpbmAgdmFsdWUgaWYgeW91IHdhbnQgdG8gYWNjZXNzIHBpeGVsIGRhdGEgd2l0aCB0aGUgQ2FudmFzIHJlbmRlcmVyLlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvQ09SU19lbmFibGVkX2ltYWdlIGZvciBtb3JlIGRldGFpbC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ltYWdlU21vb3RoaW5nPXRydWVdIEVuYWJsZSBpbWFnZSBzbW9vdGhpbmcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9ZmFsc2VdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb249J0VQU0c6Mzg1NyddIFByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkPTAuNV0gTWF4aW11bSBhbGxvd2VkIHJlcHJvamVjdGlvbiBlcnJvciAoaW4gcGl4ZWxzKS5cbiAqIEhpZ2hlciB2YWx1ZXMgY2FuIGluY3JlYXNlIHJlcHJvamVjdGlvbiBwZXJmb3JtYW5jZSwgYnV0IGRlY3JlYXNlIHByZWNpc2lvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbT00Ml0gT3B0aW9uYWwgbWF4IHpvb20gbGV2ZWwuIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb209MF0gT3B0aW9uYWwgbWluIHpvb20gbGV2ZWwuIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIE9wdGlvbmFsIHRpbGUgZ3JpZCByZXNvbHV0aW9uIGF0IGxldmVsIHplcm8uIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFt0aWxlR3JpZF0gVGlsZSBncmlkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gW3RpbGVMb2FkRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGxvYWQgYSB0aWxlIGdpdmVuIGEgVVJMLiBUaGUgZGVmYXVsdCBpc1xuICogYGBganNcbiAqIGZ1bmN0aW9uKGltYWdlVGlsZSwgc3JjKSB7XG4gKiAgIGltYWdlVGlsZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqIH07XG4gKiBgYGBcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGlsZVBpeGVsUmF0aW89MV0gVGhlIHBpeGVsIHJhdGlvIHVzZWQgYnkgdGhlIHRpbGUgc2VydmljZS5cbiAqIEZvciBleGFtcGxlLCBpZiB0aGUgdGlsZSBzZXJ2aWNlIGFkdmVydGl6ZXMgMjU2cHggYnkgMjU2cHggdGlsZXMgYnV0IGFjdHVhbGx5IHNlbmRzIDUxMnB4XG4gKiBieSA1MTJweCBpbWFnZXMgKGZvciByZXRpbmEvaGlkcGkgZGV2aWNlcykgdGhlbiBgdGlsZVBpeGVsUmF0aW9gXG4gKiBzaG91bGQgYmUgc2V0IHRvIGAyYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gW3RpbGVTaXplPVsyNTYsIDI1Nl1dIFRoZSB0aWxlIHNpemUgdXNlZCBieSB0aGUgdGlsZSBzZXJ2aWNlLlxuICogTm90IHVzZWQgaWYgYHRpbGVHcmlkYCBpcyBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gW3RpbGVVcmxGdW5jdGlvbl0gT3B0aW9uYWwgZnVuY3Rpb24gdG8gZ2V0XG4gKiB0aWxlIFVSTCBnaXZlbiBhIHRpbGUgY29vcmRpbmF0ZSBhbmQgdGhlIHByb2plY3Rpb24uXG4gKiBSZXF1aXJlZCBpZiBgdXJsYCBvciBgdXJsc2AgYXJlIG5vdCBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdXJsXSBVUkwgdGVtcGxhdGUuIE11c3QgaW5jbHVkZSBge3h9YCwgYHt5fWAgb3IgYHsteX1gLFxuICogYW5kIGB7en1gIHBsYWNlaG9sZGVycy4gQSBgez8tP31gIHRlbXBsYXRlIHBhdHRlcm4sIGZvciBleGFtcGxlIGBzdWJkb21haW57YS1mfS5kb21haW4uY29tYCxcbiAqIG1heSBiZSB1c2VkIGluc3RlYWQgb2YgZGVmaW5pbmcgZWFjaCBvbmUgc2VwYXJhdGVseSBpbiB0aGUgYHVybHNgIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gW3VybHNdIEFuIGFycmF5IG9mIFVSTCB0ZW1wbGF0ZXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD10cnVlXSBXaGV0aGVyIHRvIHdyYXAgdGhlIHdvcmxkIGhvcml6b250YWxseS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbj0yNTBdIER1cmF0aW9uIG9mIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24gZm9yIHJlbmRlcmluZy5cbiAqIFRvIGRpc2FibGUgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiwgcGFzcyBgdHJhbnNpdGlvbjogMGAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pEaXJlY3Rpb249MF0gSW5kaWNhdGUgd2hpY2ggcmVzb2x1dGlvbiBzaG91bGQgYmUgdXNlZFxuICogYnkgYSByZW5kZXJlciBpZiB0aGUgdmlldyByZXNvbHV0aW9uIGRvZXMgbm90IG1hdGNoIGFueSByZXNvbHV0aW9uIG9mIHRoZSB0aWxlIHNvdXJjZS5cbiAqIElmIDAsIHRoZSBuZWFyZXN0IHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLiBJZiAxLCB0aGUgbmVhcmVzdCBsb3dlciByZXNvbHV0aW9uXG4gKiB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGUgbmVhcmVzdCBoaWdoZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogTGF5ZXIgc291cmNlIGZvciB0aWxlIGRhdGEgd2l0aCBVUkxzIGluIGEgc2V0IFhZWiBmb3JtYXQgdGhhdCBhcmVcbiAqIGRlZmluZWQgaW4gYSBVUkwgdGVtcGxhdGUuIEJ5IGRlZmF1bHQsIHRoaXMgZm9sbG93cyB0aGUgd2lkZWx5LXVzZWRcbiAqIEdvb2dsZSBncmlkIHdoZXJlIGB4YCAwIGFuZCBgeWAgMCBhcmUgaW4gdGhlIHRvcCBsZWZ0LiBHcmlkcyBsaWtlXG4gKiBUTVMgd2hlcmUgYHhgIDAgYW5kIGB5YCAwIGFyZSBpbiB0aGUgYm90dG9tIGxlZnQgY2FuIGJlIHVzZWQgYnlcbiAqIHVzaW5nIHRoZSBgey15fWAgcGxhY2Vob2xkZXIgaW4gdGhlIFVSTCB0ZW1wbGF0ZSwgc28gbG9uZyBhcyB0aGVcbiAqIHNvdXJjZSBkb2VzIG5vdCBoYXZlIGEgY3VzdG9tIHRpbGUgZ3JpZC4gSW4gdGhpcyBjYXNlXG4gKiBhIGB0aWxlVXJsRnVuY3Rpb25gIGNhbiBiZSB1c2VkLCBzdWNoIGFzOlxuICogYGBganNcbiAqICB0aWxlVXJsRnVuY3Rpb246IGZ1bmN0aW9uKGNvb3JkaW5hdGUpIHtcbiAqICAgIHJldHVybiAnaHR0cDovL21hcHNlcnZlci5jb20vJyArIGNvb3JkaW5hdGVbMF0gKyAnLycgK1xuICogICAgICBjb29yZGluYXRlWzFdICsgJy8nICsgKC1jb29yZGluYXRlWzJdIC0gMSkgKyAnLnBuZyc7XG4gKiAgfVxuICogYGBgXG4gKiBAYXBpXG4gKi9cbnZhciBYWVogPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFhZWiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBYWVogb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBYWVoob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSBvcHRpb25zLnByb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucHJvamVjdGlvbiA6ICdFUFNHOjM4NTcnO1xuICAgICAgICB2YXIgdGlsZUdyaWQgPSBvcHRpb25zLnRpbGVHcmlkICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy50aWxlR3JpZFxuICAgICAgICAgICAgOiBjcmVhdGVYWVooe1xuICAgICAgICAgICAgICAgIGV4dGVudDogZXh0ZW50RnJvbVByb2plY3Rpb24ocHJvamVjdGlvbiksXG4gICAgICAgICAgICAgICAgbWF4UmVzb2x1dGlvbjogb3B0aW9ucy5tYXhSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgIG1heFpvb206IG9wdGlvbnMubWF4Wm9vbSxcbiAgICAgICAgICAgICAgICBtaW5ab29tOiBvcHRpb25zLm1pblpvb20sXG4gICAgICAgICAgICAgICAgdGlsZVNpemU6IG9wdGlvbnMudGlsZVNpemUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb25zLFxuICAgICAgICAgICAgY2FjaGVTaXplOiBvcHRpb25zLmNhY2hlU2l6ZSxcbiAgICAgICAgICAgIGNyb3NzT3JpZ2luOiBvcHRpb25zLmNyb3NzT3JpZ2luLFxuICAgICAgICAgICAgaW1hZ2VTbW9vdGhpbmc6IG9wdGlvbnMuaW1hZ2VTbW9vdGhpbmcsXG4gICAgICAgICAgICBvcGFxdWU6IG9wdGlvbnMub3BhcXVlLFxuICAgICAgICAgICAgcHJvamVjdGlvbjogcHJvamVjdGlvbixcbiAgICAgICAgICAgIHJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkOiBvcHRpb25zLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkLFxuICAgICAgICAgICAgdGlsZUdyaWQ6IHRpbGVHcmlkLFxuICAgICAgICAgICAgdGlsZUxvYWRGdW5jdGlvbjogb3B0aW9ucy50aWxlTG9hZEZ1bmN0aW9uLFxuICAgICAgICAgICAgdGlsZVBpeGVsUmF0aW86IG9wdGlvbnMudGlsZVBpeGVsUmF0aW8sXG4gICAgICAgICAgICB0aWxlVXJsRnVuY3Rpb246IG9wdGlvbnMudGlsZVVybEZ1bmN0aW9uLFxuICAgICAgICAgICAgdXJsOiBvcHRpb25zLnVybCxcbiAgICAgICAgICAgIHVybHM6IG9wdGlvbnMudXJscyxcbiAgICAgICAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLndyYXBYIDogdHJ1ZSxcbiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbixcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlOiBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlLFxuICAgICAgICAgICAgekRpcmVjdGlvbjogb3B0aW9ucy56RGlyZWN0aW9uLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBYWVo7XG59KFRpbGVJbWFnZSkpO1xuZXhwb3J0IGRlZmF1bHQgWFlaO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9WFlaLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvT1NNXG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgWFlaIGZyb20gJy4vWFlaLmpzJztcbi8qKlxuICogVGhlIGF0dHJpYnV0aW9uIGNvbnRhaW5pbmcgYSBsaW5rIHRvIHRoZSBPcGVuU3RyZWV0TWFwIENvcHlyaWdodCBhbmQgTGljZW5zZVxuICogcGFnZS5cbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBBVFRSSUJVVElPTiA9ICcmIzE2OTsgJyArXG4gICAgJzxhIGhyZWY9XCJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIiB0YXJnZXQ9XCJfYmxhbmtcIj5PcGVuU3RyZWV0TWFwPC9hPiAnICtcbiAgICAnY29udHJpYnV0b3JzLic7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2NhY2hlU2l6ZV0gSW5pdGlhbCB0aWxlIGNhY2hlIHNpemUuIFdpbGwgYXV0by1ncm93IHRvIGhvbGQgYXQgbGVhc3QgdGhlIG51bWJlciBvZiB0aWxlcyBpbiB0aGUgdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge251bGx8c3RyaW5nfSBbY3Jvc3NPcmlnaW49J2Fub255bW91cyddIFRoZSBgY3Jvc3NPcmlnaW5gIGF0dHJpYnV0ZSBmb3IgbG9hZGVkIGltYWdlcy4gIE5vdGUgdGhhdFxuICogeW91IG11c3QgcHJvdmlkZSBhIGBjcm9zc09yaWdpbmAgdmFsdWUgaWYgeW91IHdhbnQgdG8gYWNjZXNzIHBpeGVsIGRhdGEgd2l0aCB0aGUgQ2FudmFzIHJlbmRlcmVyLlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvQ09SU19lbmFibGVkX2ltYWdlIGZvciBtb3JlIGRldGFpbC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ltYWdlU21vb3RoaW5nPXRydWVdIEVuYWJsZSBpbWFnZSBzbW9vdGhpbmcuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb209MTldIE1heCB6b29tLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3BhcXVlPXRydWVdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ9MC41XSBNYXhpbXVtIGFsbG93ZWQgcmVwcm9qZWN0aW9uIGVycm9yIChpbiBwaXhlbHMpLlxuICogSGlnaGVyIHZhbHVlcyBjYW4gaW5jcmVhc2UgcmVwcm9qZWN0aW9uIHBlcmZvcm1hbmNlLCBidXQgZGVjcmVhc2UgcHJlY2lzaW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gW3RpbGVMb2FkRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGxvYWQgYSB0aWxlIGdpdmVuIGEgVVJMLiBUaGUgZGVmYXVsdCBpc1xuICogYGBganNcbiAqIGZ1bmN0aW9uKGltYWdlVGlsZSwgc3JjKSB7XG4gKiAgIGltYWdlVGlsZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqIH07XG4gKiBgYGBcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbj0yNTBdIER1cmF0aW9uIG9mIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24gZm9yIHJlbmRlcmluZy5cbiAqIFRvIGRpc2FibGUgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiwgcGFzcyBgdHJhbnNpdGlvbjogMGAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3VybD0naHR0cHM6Ly97YS1jfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZyddIFVSTCB0ZW1wbGF0ZS5cbiAqIE11c3QgaW5jbHVkZSBge3h9YCwgYHt5fWAgb3IgYHsteX1gLCBhbmQgYHt6fWAgcGxhY2Vob2xkZXJzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9dHJ1ZV0gV2hldGhlciB0byB3cmFwIHRoZSB3b3JsZCBob3Jpem9udGFsbHkuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogTGF5ZXIgc291cmNlIGZvciB0aGUgT3BlblN0cmVldE1hcCB0aWxlIHNlcnZlci5cbiAqIEBhcGlcbiAqL1xudmFyIE9TTSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoT1NNLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IFtvcHRfb3B0aW9uc10gT3BlbiBTdHJlZXQgTWFwIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gT1NNKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgICAgIHZhciBhdHRyaWJ1dGlvbnM7XG4gICAgICAgIGlmIChvcHRpb25zLmF0dHJpYnV0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnMgPSBvcHRpb25zLmF0dHJpYnV0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF0dHJpYnV0aW9ucyA9IFtBVFRSSUJVVElPTl07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNyb3NzT3JpZ2luID0gb3B0aW9ucy5jcm9zc09yaWdpbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jcm9zc09yaWdpbiA6ICdhbm9ueW1vdXMnO1xuICAgICAgICB2YXIgdXJsID0gb3B0aW9ucy51cmwgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnVybFxuICAgICAgICAgICAgOiAnaHR0cHM6Ly97YS1jfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZyc7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgYXR0cmlidXRpb25zOiBhdHRyaWJ1dGlvbnMsXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogZmFsc2UsXG4gICAgICAgICAgICBjYWNoZVNpemU6IG9wdGlvbnMuY2FjaGVTaXplLFxuICAgICAgICAgICAgY3Jvc3NPcmlnaW46IGNyb3NzT3JpZ2luLFxuICAgICAgICAgICAgaW1hZ2VTbW9vdGhpbmc6IG9wdGlvbnMuaW1hZ2VTbW9vdGhpbmcsXG4gICAgICAgICAgICBtYXhab29tOiBvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4Wm9vbSA6IDE5LFxuICAgICAgICAgICAgb3BhcXVlOiBvcHRpb25zLm9wYXF1ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vcGFxdWUgOiB0cnVlLFxuICAgICAgICAgICAgcmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ6IG9wdGlvbnMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQsXG4gICAgICAgICAgICB0aWxlTG9hZEZ1bmN0aW9uOiBvcHRpb25zLnRpbGVMb2FkRnVuY3Rpb24sXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24sXG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBPU007XG59KFhZWikpO1xuZXhwb3J0IGRlZmF1bHQgT1NNO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T1NNLmpzLm1hcCIsImltcG9ydCAnLi9pbmRleC5jc3MnXG5pbXBvcnQgeyBpbml0TWFya2VyTWFwIH0gZnJvbSAnLi9tYXAnXG5pbXBvcnQgeyBNYXJrZXIgfSBmcm9tICcuL21hcmtlcidcbmltcG9ydCB7IGZpbHRlck9iamVjdCB9IGZyb20gJy4vdXRpbCdcblxuZnVuY3Rpb24gcmVhZE1hcmtlckNTViAoZWxlbWVudCkge1xuICBjb25zdCBsaW5lcyA9IGVsZW1lbnQudGV4dENvbnRlbnQudHJpbSgpLnNwbGl0KCdcXG4nKVxuXG4gIHJldHVybiBsaW5lcy5tYXAobGluZSA9PiBsaW5lLnNwbGl0KCcsJykubWFwKHZhbHVlID0+IHtcbiAgICBjb25zdCBwYXJzZWQgPSBOdW1iZXIodmFsdWUpXG4gICAgcmV0dXJuIE51bWJlci5pc05hTihwYXJzZWQpID8gdmFsdWUgOiBwYXJzZWRcbiAgfSkpXG59XG5cbmZ1bmN0aW9uIGdldExvY2F0aW9uIChlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICByZXR1cm4gW1xuICAgIE51bWJlcihlbGVtZW50LmRhdGFzZXQubG9uKSxcbiAgICBOdW1iZXIoZWxlbWVudC5kYXRhc2V0LmxhdClcbiAgXVxufVxuXG5mdW5jdGlvbiBnZXRDb2xvciAoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgcmV0dXJuIGZpbHRlck9iamVjdCh7XG4gICAgcHJpbWFyeTogZWxlbWVudC5kYXRhc2V0LmNvbG9yUHJpbWFyeSxcbiAgICBzZWNvbmRhcnk6IGVsZW1lbnQuZGF0YXNldC5jb2xvclNlY29uZGFyeVxuICB9LCAoa2V5LCB2YWx1ZSkgPT4gdmFsdWUpXG59XG5cbmNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcbmNvbnN0IG1hcmtlclBhcmFtID0gcGFyYW1zLmdldCgnbWFya2VycycpXG5jb25zdCBpc1ZpZXdNb2RlID0gKHdpbmRvdy5wYXJlbnQgIT09IHdpbmRvdykgfHwgcGFyYW1zLmhhcygnbm9lZGl0JylcbmNvbnN0IHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKVxuXG5mdW5jdGlvbiBnZXRWaWV3UGFyYW0gKHByb3A6IHN0cmluZywgdmlld0RlZmF1bHQ6IHN0cmluZykge1xuICByZXR1cm4gcGFyYW1zLmdldChwcm9wKSB8fCAoaXNWaWV3TW9kZSA/IHZpZXdEZWZhdWx0IDogJycpXG59XG5cbk9iamVjdC5hc3NpZ24odGFyZ2V0LnN0eWxlLCB7XG4gIHdpZHRoOiBnZXRWaWV3UGFyYW0oJ3dpZHRoJywgJzEwMHZ3JyksXG4gIGhlaWdodDogZ2V0Vmlld1BhcmFtKCdoZWlnaHQnLCAnMTAwdmgnKVxufSlcblxuY29uc3QgbWFya2VycyA9IG1hcmtlclBhcmFtXG4gID8gSlNPTi5wYXJzZShtYXJrZXJQYXJhbSlcbiAgOiBBcnJheS5mcm9tKFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTFRlbXBsYXRlRWxlbWVudD4oJy5tYXJrZXInKSxcbiAgICB0ZW1wbGF0ZSA9PiAoe1xuICAgICAgbG9jYXRpb246IGdldExvY2F0aW9uKHRlbXBsYXRlKSxcbiAgICAgIGNvbG9yOiBnZXRDb2xvcih0ZW1wbGF0ZSksXG4gICAgICBuYW1lOiB0ZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYW1lJyk/LnRleHRDb250ZW50LFxuICAgICAgaW5mbzogdGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuaW5mbycpPy5jbG9uZU5vZGUodHJ1ZSlcbiAgICB9KVxuICApXG5cbmNvbnN0IHsgbWFya2VyTGF5ZXIsIG1hcmtlclNlbGVjdCB9ID0gaW5pdE1hcmtlck1hcCh0YXJnZXQsIG1hcmtlcnMpXG5jb25zdCBtYXAgPSBtYXJrZXJTZWxlY3QuZ2V0TWFwKClcbmNvbnN0IHZpZXcgPSBtYXAuZ2V0VmlldygpXG5cbm1hcmtlclNlbGVjdC5vbignc2VsZWN0JywgZXZlbnQgPT4ge1xuICBjb25zdCBbY3VycmVudF0gPSBldmVudC5zZWxlY3RlZCBhcyBNYXJrZXJbXVxuXG4gIGV2ZW50LnNlbGVjdGVkLmZvckVhY2goKG1hcmtlcjogTWFya2VyKSA9PiB7XG4gICAgbWFya2VyLnNob3dJbmZvKG1hcClcbiAgfSlcblxuICBldmVudC5kZXNlbGVjdGVkLmZvckVhY2goKG1hcmtlcjogTWFya2VyKSA9PiB7XG4gICAgbWFya2VyLmhpZGVJbmZvKG1hcClcbiAgfSlcblxuICBpZiAoY3VycmVudCAmJiAhY3VycmVudC5oYXNJbmZvKSB7XG4gICAgdmlldy5hbmltYXRlKHtcbiAgICAgIGNlbnRlcjogY3VycmVudC5nZXQoJ2dlb21ldHJ5JykuZ2V0Q29vcmRpbmF0ZXMoKSxcbiAgICAgIGR1cmF0aW9uOiAyMDBcbiAgICB9KVxuICB9XG59KVxuXG5pZiAoIWlzVmlld01vZGUpIHtcbiAgaW1wb3J0KCcuL2NvbnRyb2xwYW5lbCcpLnRoZW4oKHsgaW5pdENvbnRyb2xzIH0pID0+IHtcbiAgICBjb25zdCBjb250cm9sRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250cm9scycpXG5cbiAgICBjb250cm9sRm9ybS5zdHlsZS5kaXNwbGF5ID0gJydcbiAgICBpbml0Q29udHJvbHMoY29udHJvbEZvcm0gYXMgSFRNTEZvcm1FbGVtZW50LCBtYXJrZXJMYXllciwgbWFya2VyU2VsZWN0KVxuICB9KS5jYXRjaChjb25zb2xlLmVycm9yKVxufVxuIiwiaW1wb3J0ICdvbC9vbC5jc3MnXG5pbXBvcnQgeyBNYXAsIFZpZXcgfSBmcm9tICdvbCdcbmltcG9ydCB7IGZyb21Mb25MYXQgfSBmcm9tICdvbC9wcm9qJ1xuaW1wb3J0IHsgU2VsZWN0IH0gZnJvbSAnb2wvaW50ZXJhY3Rpb24nXG5pbXBvcnQgeyBjbGljayB9IGZyb20gJ29sL2V2ZW50cy9jb25kaXRpb24nXG5pbXBvcnQgVGlsZUxheWVyIGZyb20gJ29sL2xheWVyL1RpbGUnXG5pbXBvcnQgVmVjdG9yTGF5ZXIgZnJvbSAnb2wvbGF5ZXIvVmVjdG9yJ1xuaW1wb3J0IFZlY3RvclNvdXJjZSBmcm9tICdvbC9zb3VyY2UvVmVjdG9yJ1xuaW1wb3J0IE9TTSBmcm9tICdvbC9zb3VyY2UvT1NNJ1xuaW1wb3J0IHsgTWFya2VyLCBtYXJrZXJTdHlsZSB9IGZyb20gJy4vbWFya2VyJ1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdE1hcmtlck1hcCAodGFyZ2V0OiBIVE1MRWxlbWVudCwgbWFya2VyczogYW55W10pIHtcbiAgY29uc3QgY2VudGVyID0gbWFya2Vycy5sZW5ndGhcbiAgICA/IG1hcmtlcnNbMF0ubG9jYXRpb25cbiAgICA6IFtNYXRoLnJhbmRvbSgpICogMTgwLCBNYXRoLnJhbmRvbSgpICogOTBdXG5cbiAgY29uc3QgbWFwID0gbmV3IE1hcCh7XG4gICAgdGFyZ2V0LFxuICAgIGxheWVyczogW1xuICAgICAgbmV3IFRpbGVMYXllcih7XG4gICAgICAgIHNvdXJjZTogbmV3IE9TTSgpXG4gICAgICB9KVxuICAgIF0sXG4gICAgdmlldzogbmV3IFZpZXcoe1xuICAgICAgY2VudGVyOiBmcm9tTG9uTGF0KGNlbnRlciksXG4gICAgICB6b29tOiBtYXJrZXJzLmxlbmd0aCA/IDE1IDogNVxuICAgIH0pXG4gIH0pXG5cbiAgY29uc3QgbWFya2VyTGF5ZXIgPSBuZXcgVmVjdG9yTGF5ZXIoe1xuICAgIHNvdXJjZTogbmV3IFZlY3RvclNvdXJjZSh7XG4gICAgICBmZWF0dXJlczogbWFya2Vycy5tYXAoZGF0YSA9PiBuZXcgTWFya2VyKGRhdGEpKVxuICAgIH0pLFxuICAgIHN0eWxlOiBmZWF0dXJlID0+IG1hcmtlclN0eWxlKGZlYXR1cmUpXG4gIH0pXG5cbiAgY29uc3QgbWFya2VyU2VsZWN0ID0gbmV3IFNlbGVjdCh7XG4gICAgY29uZGl0aW9uOiBjbGljayxcbiAgICBzdHlsZTogZmVhdHVyZSA9PiBtYXJrZXJTdHlsZShmZWF0dXJlLCB0cnVlKVxuICB9KVxuXG4gIG1hcC5hZGRMYXllcihtYXJrZXJMYXllcilcbiAgbWFwLmFkZEludGVyYWN0aW9uKG1hcmtlclNlbGVjdClcblxuICByZXR1cm4geyBtYXJrZXJMYXllciwgbWFya2VyU2VsZWN0IH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=